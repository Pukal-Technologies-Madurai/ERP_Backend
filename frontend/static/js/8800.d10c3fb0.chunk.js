"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8800],{18800:(e,l,t)=>{t.r(l),t.d(l,{default:()=>C});var i=t(89379),r=t(65043),o=t(77739),n=t(17392),a=t(81e3),d=t(52083),s=t(84511),c=t(11906),u=t(85865),v=t(83462),m=t(26600),h=t(35316),x=t(29347),p=t(20656),y=t(97707),g=t(83560),A=t(59383),_=t(79484),D=t(3632),b=t(65074),S=t(48471),j=t(73216),f=(t(41649),t(70579));const C=e=>{let{loadingOn:l,loadingOff:t,AddRights:C,EditRights:I,pageID:N}=e;const P=sessionStorage.getItem("filterValues"),T={Fromdate:(0,y.ny)(),Todate:(0,y.ny)(),Retailer:{value:"",label:"ALL"},CreatedBy:{value:"",label:"ALL"},SalesPerson:{value:"",label:"ALL"},VoucherType:{value:"",label:"ALL"},DeliveryPerson:{value:"",label:"ALL"},Cancel_status:1},O=JSON.parse(localStorage.getItem("user")),k=(0,j.Zp)(),[L,w]=(0,r.useState)([]),[F,R]=(0,r.useState)([]),[V,E]=(0,r.useState)([]),[B,z]=(0,r.useState)([]),[Q,G]=(0,r.useState)([]),[M,H]=(0,r.useState)([]),[W,U]=(0,r.useState)([]),[J,Z]=(0,r.useState)({}),[q,K]=(0,r.useState)("sales"),[X,Y]=(0,r.useState)("All"),[$,ee]=(0,r.useState)("All"),[le,te]=(0,r.useState)({all:0,delivered:0,pending:0,previousDaySalesCount:0}),[ie,re]=(0,r.useState)({all:0,converted:0,nonConvert:0}),[oe,ne]=(0,r.useState)(T),[ae,de]=(0,r.useState)({filters:!1,orderDetails:!1});(0,r.useEffect)(()=>{const e=(0,y.vU)(N),{Fromdate:l,Todate:t,Retailer:r=T.Retailer,CreatedBy:o=T.CreatedBy,SalesPerson:n=T.SalesPerson,VoucherType:a=T.VoucherType,DeliveryPerson:d=T.DeliveryPerson,Cancel_status:s=T.Cancel_status}=e;ne(e=>(0,i.A)((0,i.A)({},e),{},{Fromdate:l,Todate:t,Retailer:r,CreatedBy:o,SalesPerson:n,VoucherType:a,DeliveryPerson:d,Cancel_status:s}))},[P,N,q]),(0,r.useEffect)(()=>{(0,b.z)({address:"sales/saleOrder/retailers"}).then(e=>{e.success&&E(e.data)}).catch(e=>console.error(e)),(0,b.z)({address:"masters/users/salesPerson/dropDown?Company_id=".concat(null===O||void 0===O?void 0:O.Company_id)}).then(e=>{e.success&&z(e.data)}).catch(e=>console.error(e)),(0,b.z)({address:"masters/user/dropDown?Company_id=".concat(null===O||void 0===O?void 0:O.Company_id)}).then(e=>{e.success&&G(e.data)}).catch(e=>console.error(e)),(0,b.z)({address:"masters/voucher"}).then(e=>{e.success&&H(e.data)}).catch(e=>console.error(e)),(0,b.z)({address:"dataEntry/costCenter"}).then(e=>{e.success&&U(e.data)}).catch(e=>console.error(e))},[]),(0,r.useEffect)(()=>{const e=(0,y.vU)(N),{Fromdate:i,Todate:r,Retailer:o=T.Retailer,CreatedBy:n=T.CreatedBy,SalesPerson:a=T.SalesPerson,VoucherType:d=T.VoucherType,DeliveryPerson:s=T.DeliveryPerson,Cancel_status:c=T.Cancel_status}=e;"sales"===q?(0,b.z)({address:"reports/reportsNonconvert/sales?Fromdate=".concat(i,"&Todate=").concat(r,"&Retailer_Id=").concat(null===o||void 0===o?void 0:o.value,"&Sales_Person_Id=").concat(null===a||void 0===a?void 0:a.value,"&Created_by=").concat(null===n||void 0===n?void 0:n.value,"&VoucherType=").concat(null===d||void 0===d?void 0:d.value,"&Cancel_status=").concat(c),loadingOn:l,loadingOff:t}).then(e=>{if(e.success){const l=(null===e||void 0===e?void 0:e.data)||[];w(l);const t=l.filter(e=>2===e.IsConverted).length,i=l.filter(e=>2!==e.IsConverted).length,r=l.length;re({all:r,converted:t,nonConvert:i})}}).catch(e=>console.error(e)):(0,b.z)({address:"delivery/deliveryOrderListData?Fromdate=".concat(i,"&Todate=").concat(r,"&Retailer_Id=").concat(null===o||void 0===o?void 0:o.value,"&Sales_Person_Id=").concat(null===a||void 0===a?void 0:a.value,"&Delivery_Person_Id=").concat(null===s||void 0===s?void 0:s.value,"&Created_by=").concat(null===n||void 0===n?void 0:n.value,"&Cancel_status=").concat(c),loadingOn:l,loadingOff:t}).then(e=>{if(e.success){const l=(null===e||void 0===e?void 0:e.data)||[];R(l);const t=l.filter(e=>"Delivered"===e.DeliveryStatusName).length,i=l.filter(e=>1===e.Delivery_Status).length,r=l.length,o=l.length>0&&l[0].PreviousDaySalesOrderCount||0;te({all:r,delivered:t,pending:i,previousDaySalesCount:o})}}).catch(e=>console.error(e))},[P,N,q]);const se=()=>{de(e=>(0,i.A)((0,i.A)({},e),{},{filters:!1,orderDetails:!1}))},ce=(0,r.useMemo)(()=>("sales"===q?L:F).reduce((e,l)=>(0,y.Lr)(e,null===l||void 0===l?void 0:l.Total_Invoice_value),0),[L,F,q]),ue=(0,r.useMemo)(()=>{if("delivery"!==q)return F;switch(X){case"Delivered":return F.filter(e=>7===e.Delivery_Status);case"Pending":return F.filter(e=>1===e.Delivery_Status);default:return F}},[F,X,q]),ve=(0,r.useMemo)(()=>{if("sales"!==q)return L;switch($){case"Converted":return L.filter(e=>2===e.IsConverted);case"Non-Converted":return L.filter(e=>2!==e.IsConverted);default:return L}},[L,$,q]),me=(0,r.useMemo)(()=>"sales"===q?[(0,S.Lj)("So_Date","date","SoDate"),(0,S.Lj)("So_Inv_No","string","SO ID"),(0,S.Lj)("Retailer_Name","string","Customer"),(0,S.Lj)("VoucherTypeGet","string","Voucher"),(0,S.Lj)("Total_Before_Tax","number","Before Tax"),(0,S.Lj)("Total_Tax","number","Tax"),(0,S.Lj)("Total_Invoice_value","number","Invoice Value"),{Field_Name:"Action",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.A,{title:"View Order",children:(0,f.jsx)(n.A,{onClick:()=>Z({orderDetails:l,orderProducts:(null===l||void 0===l?void 0:l.Products_List)||[]}),color:"primary",size:"small",children:(0,f.jsx)(D.A,{className:"fa-16"})})}),I&&(0,f.jsx)(o.A,{title:"Edit",children:(0,f.jsx)(n.A,{onClick:()=>k("create",{state:(0,i.A)((0,i.A)({},l),{},{isEdit:!0})}),size:"small",children:(0,f.jsx)(g.A,{className:"fa-16"})})})]})}}]:[(0,S.Lj)("Do_Id","string","Delivery ID"),(0,S.Lj)("So_No","string","Sale Order ID"),(0,S.Lj)("Do_Inv_No","string","DO Inv No"),(0,S.Lj)("Retailer_Name","string","Customer"),(0,S.Lj)("SalesDate","date","Sale Order Date"),(0,S.Lj)("Do_Date","date","Delivery Date"),(0,S.Lj)("Total_Before_Tax","number","Before Tax"),(0,S.Lj)("Total_Tax","number","Tax"),(0,S.Lj)("Total_Invoice_value","number","Invoice Value"),(0,S.Lj)("DeliveryStatusName","string","Delivery Status"),{Field_Name:"Action",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.A,{title:"View Order",children:(0,f.jsx)(n.A,{onClick:()=>Z({orderDetails:l,orderProducts:(null===l||void 0===l?void 0:l.Products_List)||[]}),color:"primary",size:"small",children:(0,f.jsx)(D.A,{className:"fa-16"})})}),I&&(0,f.jsx)(o.A,{title:"Edit",children:(0,f.jsx)(n.A,{onClick:()=>k("create",{state:(0,i.A)((0,i.A)({},l),{},{isEdit:!0})}),size:"small",children:(0,f.jsx)(g.A,{className:"fa-16"})})})]})}}],[q,I,k]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(S.Ay,{title:"".concat("sales"===q?"Sale":"Delivery"," Orders"),dataArray:"sales"===q?ve:ue,EnableSerialNumber:!0,columns:me,ButtonArea:(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(a.A,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap",mb:2},children:[(0,f.jsxs)(d.A,{value:q,exclusive:!0,onChange:(e,l)=>{l&&(ne(T),(0,y.Mb)((0,i.A)((0,i.A)({},T),{},{pageID:N})),"sales"===q?ee("All"):Y("All"),K(l),ee("All"),Y("All"))},"aria-label":"view type",sx:{"& .MuiToggleButton-root":{px:3,py:1,m:.5}},children:[(0,f.jsx)(s.A,{value:"sales","aria-label":"sales view",sx:{backgroundColor:"sales"===q?"#1976d2":"inherit",color:"sales"===q?"white":"inherit",fontWeight:"sales"===q?"bold":"normal","&:hover":{backgroundColor:"sales"===q?"#1565c0":"rgba(0, 0, 0, 0.04)"}},children:"Sale Order"}),(0,f.jsx)(s.A,{value:"delivery","aria-label":"delivery view",sx:{backgroundColor:"delivery"===q?"#1976d2":"inherit",color:"delivery"===q?"white":"inherit",fontWeight:"delivery"===q?"bold":"normal","&:hover":{backgroundColor:"delivery"===q?"#1565c0":"rgba(0, 0, 0, 0.04)"}},children:"Invoice"})]}),"sales"===q&&(0,f.jsxs)(a.A,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,f.jsxs)(c.A,{variant:"All"===$?"contained":"outlined",color:"primary",onClick:()=>ee("All"),sx:{px:3,py:1,fontWeight:"All"===$?"bold":"normal",m:.5},children:["Overall - ",ie.all]}),(0,f.jsxs)(c.A,{variant:"Converted"===$?"contained":"outlined",color:"success",onClick:()=>ee("Converted"),sx:{px:3,py:1,fontWeight:"Converted"===$?"bold":"normal",m:.5},children:["Converted - ",ie.converted]}),(0,f.jsxs)(c.A,{variant:"Non-Converted"===$?"contained":"outlined",color:"warning",onClick:()=>ee("Non-Converted"),sx:{px:3,py:1,fontWeight:"Non-Converted"===$?"bold":"normal",m:.5},children:["Non-Converted - ",ie.nonConvert]})]}),"delivery"===q&&(0,f.jsxs)(a.A,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,f.jsxs)(c.A,{variant:"All"===X?"contained":"outlined",color:"primary",onClick:()=>Y("All"),sx:{px:3,py:1,fontWeight:"All"===X?"bold":"normal",m:.5},children:["Overall - ",le.all]}),(0,f.jsxs)(c.A,{variant:"Delivered"===X?"contained":"outlined",color:"success",onClick:()=>Y("Delivered"),sx:{px:3,py:1,fontWeight:"Delivered"===X?"bold":"normal",m:.5},children:["Delivered - ",le.delivered]}),(0,f.jsxs)(c.A,{variant:"Pending"===X?"contained":"outlined",color:"warning",onClick:()=>Y("Pending"),sx:{px:3,py:1,fontWeight:"Pending"===X?"bold":"normal",m:.5},children:["Pending - ",le.pending]})]}),(0,f.jsx)(o.A,{title:"Filters",children:(0,f.jsx)(n.A,{size:"medium",onClick:()=>de(e=>(0,i.A)((0,i.A)({},e),{},{filters:!0})),sx:{ml:1},children:(0,f.jsx)(A.A,{})})}),(0,f.jsx)(a.A,{sx:{bgcolor:"background.paper",px:2,py:1,borderRadius:1,ml:"auto"},children:(0,y.Ro)(ce)>0&&(0,f.jsxs)(u.A,{variant:"subtitle2",color:"text.secondary",children:["Total Amount: ",(0,y.jG)(ce)]})})]})}),isExpendable:!0,tableMaxHeight:550,expandableComp:e=>{let{row:l}=e;return(0,f.jsx)("table",{className:"table",children:(0,f.jsxs)("tbody",{children:[(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Branch"}),(0,f.jsx)("td",{className:"border p-2",children:l.Branch_Name}),(0,f.jsx)("td",{className:"border p-2 bg-light",children:"sales"===q?"Sales Person":"Delivery Person"}),(0,f.jsx)("td",{className:"border p-2",children:"sales"===q?l.Sales_Person_Name:l.Delivery_Person_Name}),(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Round off"}),(0,f.jsx)("td",{className:"border p-2",children:l.Round_off})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Invoice Type"}),(0,f.jsxs)("td",{className:"border p-2",children:[(0,y.id)(l.GST_Inclusive,1)&&"Inclusive",(0,y.id)(l.GST_Inclusive,0)&&"Exclusive"]}),(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Tax Type"}),(0,f.jsxs)("td",{className:"border p-2",children:[(0,y.id)(l.IS_IGST,1)&&"IGST",(0,y.id)(l.IS_IGST,0)&&"GST"]}),(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,f.jsx)("td",{className:"border p-2",children:l.Sales_Person_Name})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Narration"}),(0,f.jsx)("td",{className:"border p-2",colSpan:5,children:l.Narration})]})]})})}}),(0,f.jsxs)(v.A,{open:ae.filters,onClose:se,fullWidth:!0,maxWidth:"sm",children:[(0,f.jsx)(m.A,{children:"Filters"}),(0,f.jsx)(h.A,{children:(0,f.jsx)("div",{className:"table-responsive pb-4",children:(0,f.jsx)("table",{className:"table",children:(0,f.jsxs)("tbody",{children:[(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,f.jsx)("td",{children:(0,f.jsx)("input",{type:"date",value:oe.Fromdate,onChange:e=>ne(l=>(0,i.A)((0,i.A)({},l),{},{Fromdate:e.target.value})),className:"cus-inpt"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,f.jsx)("td",{children:(0,f.jsx)("input",{type:"date",value:oe.Todate,onChange:e=>ne(l=>(0,i.A)((0,i.A)({},l),{},{Todate:e.target.value})),className:"cus-inpt"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Retailer"}),(0,f.jsx)("td",{children:(0,f.jsx)(p.Ay,{value:oe.Retailer,onChange:e=>ne(l=>(0,i.A)((0,i.A)({},l),{},{Retailer:e})),options:[{value:"",label:"ALL"},...V.map(e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:"".concat(null===e||void 0===e?void 0:e.Retailer_Name," - \u20b9").concat((0,y.jG)((0,y.Ro)(null===e||void 0===e?void 0:e.TotalSales))," (").concat((0,y.Ro)(null===e||void 0===e?void 0:e.OrderCount),")")}))],isSearchable:!0,placeholder:"Retailer Name"})})]}),"delivery"===q&&(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Delivery Person"}),(0,f.jsx)("td",{children:(0,f.jsx)(p.Ay,{value:oe.DeliveryPerson,onChange:e=>ne(l=>(0,i.A)((0,i.A)({},l),{},{DeliveryPerson:e})),options:[{value:"",label:"ALL"},...W.map(e=>({value:null===e||void 0===e?void 0:e.Cost_Center_Id,label:null===e||void 0===e?void 0:e.Cost_Center_Name}))],isSearchable:!0,placeholder:"Delivery Person Name"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Sales Person"}),(0,f.jsx)("td",{children:(0,f.jsx)(p.Ay,{value:oe.SalesPerson,onChange:e=>ne(l=>(0,i.A)((0,i.A)({},l),{},{SalesPerson:e})),options:[{value:"",label:"ALL"},...B.map(e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name}))],isSearchable:!0,placeholder:"Sales Person Name"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Created By"}),(0,f.jsx)("td",{children:(0,f.jsx)(p.Ay,{value:oe.CreatedBy,onChange:e=>ne(l=>(0,i.A)((0,i.A)({},l),{},{CreatedBy:e})),options:[{value:"",label:"ALL"},...Q.map(e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name}))],isSearchable:!0,placeholder:"Created By"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Voucher"}),(0,f.jsx)("td",{children:(0,f.jsx)(p.Ay,{value:oe.VoucherType,onChange:e=>ne(l=>(0,i.A)((0,i.A)({},l),{},{VoucherType:e})),options:[{value:"",label:"ALL"},...M.filter(e=>"SALES"===e.Type).map(e=>({value:null===e||void 0===e?void 0:e.Vocher_Type_Id,label:null===e||void 0===e?void 0:e.Voucher_Type}))],menuPortalTarget:document.body,isSearchable:!0,placeholder:"Voucher Name"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Canceled Order"}),(0,f.jsx)("td",{children:(0,f.jsxs)("select",{value:oe.Cancel_status,onChange:e=>ne(l=>(0,i.A)((0,i.A)({},l),{},{Cancel_status:Number(e.target.value)})),className:"cus-inpt",children:[(0,f.jsx)("option",{value:1,children:"Show"}),(0,f.jsx)("option",{value:0,children:"Hide"})]})})]})]})})})}),(0,f.jsxs)(x.A,{children:[(0,f.jsx)(c.A,{onClick:se,children:"Close"}),(0,f.jsx)(c.A,{onClick:()=>{se(),(0,y.Mb)({Fromdate:oe.Fromdate,Todate:oe.Todate,pageID:N,Retailer:oe.Retailer,CreatedBy:oe.CreatedBy,SalesPerson:oe.SalesPerson,DeliveryPerson:oe.DeliveryPerson,VoucherType:oe.VoucherType,Cancel_status:oe.Cancel_status})},startIcon:(0,f.jsx)(_.A,{}),variant:"outlined",children:"Search"})]})]})]})}},41649:(e,l,t)=>{t.d(l,{Uh:()=>y,bI:()=>v});var i=t(89379),r=t(97707),o=t(70579);const n=e=>Array.isArray(e),a={ITEMS:{dataTransformer:e=>d(e,"all"),columns:["OrderId","Party","Date","Item","Quantity","ArrivedQuantity","PendingQuantity","Rate","Amount","Actions"]},"ITEMS PENDING":{dataTransformer:e=>d(e,"pending"),columns:["OrderId","Party","Date","Item","Quantity","ArrivedQuantity","PendingQuantity","Rate","Amount","Actions"]},"ITEMS DELIVERED":{dataTransformer:e=>d(e,"arrived"),columns:["OrderId","Party","Date","Item","Quantity","ArrivedQuantity","PendingQuantity","Rate","Amount","Actions"]},ORDERS:{dataTransformer:e=>e,columns:["OrderId","Date","Party","InvoiceValue","DeliveryStatus","Status","Actions"]},"COMPLETED ORDERS":{dataTransformer:e=>s(e,"completed"),columns:["OrderId","Date","Party","InvoiceValue","DeliveryStatus","Status","Actions"]},"IN-COMPLETED ORDERS":{dataTransformer:e=>s(e,"incomplete"),columns:["OrderId","Date","Party","InvoiceValue","DeliveryStatus","Status","Actions"]},"ORDERS PENDING":{dataTransformer:e=>c(e,"noDelivery"),columns:["OrderId","Date","Party","InvoiceValue","Actions"]},"ORDERS ARRIVED":{dataTransformer:e=>c(e,"hasDelivery"),columns:["OrderId","Date","Party","InvoiceValue","DeliveryCount","Actions"]}},d=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";return null===e||void 0===e?void 0:e.reduce((e,t)=>{if("pending"===l&&3===Number(null===t||void 0===t?void 0:t.Cancel_status))return e;if(!Array.isArray(null===t||void 0===t?void 0:t.OrderStockDetails))return e;let o=t.OrderStockDetails;var n;if("pending"===l)o=null===(n=t.OrderStockDetails)||void 0===n?void 0:n.filter(e=>{const l=((null===t||void 0===t?void 0:t.DeliveryDetails)||[]).filter(l=>{var t;return null===(t=l.StockDetails)||void 0===t?void 0:t.some(l=>(0,r.id)(l.Item_Id,null===e||void 0===e?void 0:e.Item_Id))}).reduce((l,t)=>{var i;const o=null===(i=t.StockDetails)||void 0===i?void 0:i.find(l=>(0,r.id)(l.Item_Id,null===e||void 0===e?void 0:e.Item_Id));return(0,r.Lr)(l,(null===o||void 0===o?void 0:o.Bill_Qty)||0)},0);return Number(l)<Number(null===e||void 0===e?void 0:e.Bill_Qty)});else if("arrived"===l){var a;o=null===(a=t.OrderStockDetails)||void 0===a?void 0:a.filter(e=>{const l=((null===t||void 0===t?void 0:t.DeliveryDetails)||[]).filter(l=>{var t;return null===(t=l.StockDetails)||void 0===t?void 0:t.some(l=>(0,r.id)(l.Item_Id,null===e||void 0===e?void 0:e.Item_Id))}).reduce((l,t)=>{var i;const o=null===(i=t.StockDetails)||void 0===i?void 0:i.find(l=>(0,r.id)(l.Item_Id,null===e||void 0===e?void 0:e.Item_Id));return(0,r.Lr)(l,(null===o||void 0===o?void 0:o.Bill_Qty)||0)},0);return Number(l)>=Number(null===e||void 0===e?void 0:e.Bill_Qty)})}const d=o.map(e=>(0,i.A)((0,i.A)({},e),{},{OrderDetails:u(t)}));return e.concat(d)},[])},s=(e,l)=>e.reduce((e,t)=>{if("0"!==(null===t||void 0===t?void 0:t.Cancel_status))return e;const i=(null===t||void 0===t?void 0:t.OrderStockDetails)||[],o=(null===t||void 0===t?void 0:t.DeliveryDetails)||[];if(!i.length)return e;const n=i.every(e=>{const l=o.reduce((l,t)=>{var i;const o=null===(i=t.StockDetails)||void 0===i?void 0:i.find(l=>(0,r.id)(l.Item_Id,e.Item_Id));return(0,r.Lr)(l,(null===o||void 0===o?void 0:o.Bill_Qty)||0)},0);return Number(l)>=Number(e.Bill_Qty)});return"completed"===l&&n&&e.push(t),"incomplete"!==l||n||e.push(t),e},[]),c=(e,l)=>e.reduce((e,t)=>{const i=Array.isArray(null===t||void 0===t?void 0:t.DeliveryDetails)&&t.DeliveryDetails.length>0;return"noDelivery"===l&&i?e:"hasDelivery"!==l||i?e.concat(t):e},[]),u=e=>{var l,t,i,o,a,d,s,c;return{S_Id:null===e||void 0===e?void 0:e.S_Id,So_Id:null===e||void 0===e?void 0:e.So_Id,So_Inv_No:null===e||void 0===e?void 0:e.So_Inv_No,So_Date:null===e||void 0===e?void 0:e.So_Date,Retailer_Id:null===e||void 0===e?void 0:e.Retailer_Id,Sales_Person_Id:null===e||void 0===e?void 0:e.Sales_Person_Id,Branch_Id:null===e||void 0===e?void 0:e.Branch_Id,Ledger_Name:(null===e||void 0===e?void 0:e.Ledger_Name)||(null===e||void 0===e||null===(l=e.DeliveryDetails)||void 0===l||null===(t=l[0])||void 0===t?void 0:t.Ledger_Name)||(null===e||void 0===e||null===(i=e.OrderStockDetails)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.Ledger_Name),Party_District:(null===e||void 0===e?void 0:e.Party_District)||(null===e||void 0===e||null===(a=e.DeliveryDetails)||void 0===a||null===(d=a[0])||void 0===d?void 0:d.Party_District)||(null===e||void 0===e||null===(s=e.OrderStockDetails)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.Party_District),Total_Invoice_value:null===e||void 0===e?void 0:e.Total_Invoice_value,Total_Before_Tax:null===e||void 0===e?void 0:e.Total_Before_Tax,Round_off:null===e||void 0===e?void 0:e.Round_off,Cancel_status:null===e||void 0===e?void 0:e.Cancel_status,isConverted:null===e||void 0===e?void 0:e.isConverted,IsConvertedAsInvoice:(0,r.Ro)(null===e||void 0===e?void 0:e.IsConvertedAsInvoice),isConvertableArrivalExist:(0,r.Ro)(null===e||void 0===e?void 0:e.isConvertableArrivalExist),OrderStockDetails:n(e.OrderStockDetails)?e.OrderStockDetails:[],DeliveryDetails:n(e.DeliveryDetails)?e.DeliveryDetails:[],StaffDetails:n(e.StaffDetails)?e.StaffDetails:[],Created_on:null===e||void 0===e?void 0:e.Created_on,Alterd_on:null===e||void 0===e?void 0:e.Alterd_on,Narration:null===e||void 0===e?void 0:e.Narration,VoucherType:null===e||void 0===e?void 0:e.VoucherType,GST_Inclusive:null===e||void 0===e?void 0:e.GST_Inclusive}},v=e=>{let{data:l=[],status:t="ITEMS"}=e;const i=a[t];return i?i.dataTransformer(l):[]},m="bg-success text-light fa-11 px-2 py-1 rounded-3",h="bg-danger text-light fw-bold fa-11 px-2 py-1 rounded-3",x="bg-warning fw-bold fa-11 px-2 py-1 rounded-3",p={OrderId:{type:"string",header:"Order ID",getValue:e=>{var l;return(null===e||void 0===e?void 0:e.So_Inv_No)||(null===e||void 0===e||null===(l=e.OrderDetails)||void 0===l?void 0:l.So_Inv_No)||""}},Date:{type:"custom",header:"Order Date",getValue:e=>{var l;return(0,r.yc)((null===e||void 0===e?void 0:e.So_Date)||(null===e||void 0===e||null===(l=e.OrderDetails)||void 0===l?void 0:l.So_Date))}},Party:{type:"custom",header:"Party",getValue:e=>{const l=(null===e||void 0===e?void 0:e.OrderDetails)||e;return(null===l||void 0===l?void 0:l.Ledger_Name)||"N/A"}},InvoiceValue:{type:"custom",header:"Invoice Value",getValue:e=>{var l;const t=(null===e||void 0===e?void 0:e.Total_Invoice_value)||(null===e||void 0===e||null===(l=e.OrderDetails)||void 0===l?void 0:l.Total_Invoice_value);return(0,r.IQ)(t)?(0,r.jG)(t):"0"}},Status:{type:"custom",header:"Status",getValue:e=>{const l=(null===e||void 0===e?void 0:e.OrderDetails)||e,t=(e=>{const l="0"==(null===e||void 0===e?void 0:e.Cancel_status),t=Array.isArray(null===e||void 0===e?void 0:e.DeliveryDetails)&&e.DeliveryDetails.length>0;return l?"Canceled":t?"Delivered":"Pending"})(l),i=(e=>{const l="0"==(null===e||void 0===e?void 0:e.Cancel_status),t=Array.isArray(null===e||void 0===e?void 0:e.DeliveryDetails)&&e.DeliveryDetails.length>0;return l?h:t?m:x})(l);return(0,o.jsx)("span",{className:i,children:t})}},Item:{type:"string",header:"Item",getValue:e=>(null===e||void 0===e?void 0:e.Stock_Item)||"N/A"},Quantity:{type:"custom",header:"Quantity",getValue:e=>{const l=(null===e||void 0===e?void 0:e.Bill_Qty)||(null===e||void 0===e?void 0:e.Total_Qty);return(0,r.IQ)(l)?(0,r.jG)(l):"0"}},ArrivedQuantity:{type:"custom",header:"Delivered Qty",getValue:e=>{const l=null===e||void 0===e?void 0:e.OrderDetails,t=null===e||void 0===e?void 0:e.Item_Id;return((null===l||void 0===l?void 0:l.DeliveryDetails)||[]).reduce((e,l)=>{var i;const o=null===(i=l.StockDetails)||void 0===i?void 0:i.find(e=>(0,r.id)(e.Item_Id,t));return(0,r.Lr)(e,(null===o||void 0===o?void 0:o.Bill_Qty)||0)},0)}},PendingQuantity:{type:"custom",header:"Pending Qty",getValue:e=>{const l=null===e||void 0===e?void 0:e.OrderDetails,t=null===e||void 0===e?void 0:e.Item_Id,i=Number((null===e||void 0===e?void 0:e.Bill_Qty)||0),o=((null===l||void 0===l?void 0:l.DeliveryDetails)||[]).reduce((e,l)=>{var i;const o=null===(i=l.StockDetails)||void 0===i?void 0:i.find(e=>(0,r.id)(e.Item_Id,t));return(0,r.Lr)(e,(null===o||void 0===o?void 0:o.Bill_Qty)||0)},0);return(0,r.DG)(i,o)}},Rate:{type:"custom",header:"Rate",getValue:e=>{const l=(null===e||void 0===e?void 0:e.Item_Rate)||(null===e||void 0===e?void 0:e.Taxable_Rate);return(0,r.IQ)(l)?(0,r.jG)(l):"0"}},Amount:{type:"custom",header:"Amount",getValue:e=>{const l=(null===e||void 0===e?void 0:e.Amount)||(null===e||void 0===e?void 0:e.Final_Amo);return(0,r.IQ)(l)?(0,r.jG)(l):"0"}},DeliveryCount:{type:"custom",header:"Deliveries",getValue:e=>{var l;return((null===e||void 0===e?void 0:e.DeliveryDetails)||(null===e||void 0===e||null===(l=e.OrderDetails)||void 0===l?void 0:l.DeliveryDetails)||[]).length}},Stock_Item:{type:"string",header:"Stock Item",getValue:e=>null===e||void 0===e?void 0:e.Stock_Item},Stock_Group:{type:"string",header:"Stock Group",getValue:e=>null===e||void 0===e?void 0:e.Stock_Group}},y=e=>{let{OrderStatus:l="ITEMS",dialogs:t,setOrderPreview:r,navigation:o,EditRights:n,DeleteRights:d,AddRights:s}=e;const c=a[l];return c?c.columns.map(e=>{const l=p[e];if(!l)return console.warn("Sales column definition not found for key: ".concat(e)),null;const a={isVisible:1,ColumnHeader:l.header,isCustomCell:"custom"===l.type};return"custom"===l.type?(0,i.A)((0,i.A)({},a),{},{Cell:e=>{let{row:i}=e;return l.getValue(i,{setOrderPreview:r,navigation:o,EditRights:n,DeleteRights:d,AddRights:s,dialogs:t})}}):(0,i.A)((0,i.A)({},a),{},{Field_Name:e,Fied_Data:l.type},l.getValue&&{isCustomCell:!0,Cell:e=>{let{row:t}=e;return l.getValue(t)}})}).filter(Boolean):[]}},48471:(e,l,t)=>{t.d(l,{Ay:()=>V,JT:()=>F,Lj:()=>L,wF:()=>w});var i=t(89379),r=t(65043),o=t(77739),n=t(17392),a=t(41020),d=t(30922),s=t(32143),c=t(2050),u=t(48734),v=t(28076),m=t(39652),h=t(12110),x=t(63336),p=t(79650),y=t(71806),g=t(84882),A=t(58093),_=t(73460),D=t(31159),b=t(97707),S=t(47968),j=t(692),f=t(8737),C=t(58558),I=t(30599),N=t(433),P=t(37762),T=(t(20557),t(11238)),O=t(70579);const k=(e,l)=>e.map(e=>{const t={};return l.forEach((l,i)=>{if(l.isVisible||l.Defult_Display)if(l.isCustomCell&&l.Cell){const r=l.Cell({row:e}),o=l.ColumnHeader?String(l.ColumnHeader).replace(/\s+/g,"_").toLowerCase():"field_".concat(i+1);"string"!==typeof r&&"number"!==typeof r&&"bigint"!==typeof r||(t[o]=r)}else{let i=l.Field_Name;t[i]=e[i]||""}}),t}),L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,i.A)({isVisible:n,Field_Name:e,Fied_Data:l,align:r,verticalAlign:o},t&&{ColumnHeader:t})},w=e=>{let{buttonsData:l=[],ToolTipText:t="Options"}=e;const[i,v]=(0,r.useState)(null),m=Boolean(i);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(o.A,{title:t,children:(0,O.jsx)(n.A,{"aria-describedby":m,onClick:e=>{v(e.currentTarget)},className:"ms-2",size:"small",children:(0,O.jsx)(C.A,{})})}),(0,O.jsx)(a.Ay,{open:m,anchorEl:i,onClose:()=>{v(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,O.jsx)(d.A,{children:l.map((e,l)=>(0,O.jsxs)(s.A,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,O.jsx)(c.A,{children:null===e||void 0===e?void 0:e.icon}),(0,O.jsx)(u.A,{children:null===e||void 0===e?void 0:e.name})]},l))})})]})},F=(e,l)=>{switch(l){case"number":return e?(0,b.jG)(e):e;case"date":return e?(0,b.yc)(e):e;case"time":return e?(0,b.JG)(e):e;case"string":return e;default:return""}},R=e=>{let{dataArray:l=[],columns:t=[],onClickFun:o=null,isExpendable:a=!1,expandableComp:d=null,tableMaxHeight:s=550,initialPageCount:c=20,EnableSerialNumber:u=!1,CellSize:C="small",disablePagination:L=!1,title:R="",PDFPrintOption:V=!1,ExcelPrintOption:E=!1,maxHeightOption:B=!1,ButtonArea:z=null,MenuButtons:Q=[],bodyFontSizePx:G=13,headerFontSizePx:M=13}=e;const[H,W]=(0,r.useState)(0),[U,J]=(0,r.useState)(c),[Z,q]=(0,r.useState)([]),[K,X]=(0,r.useState)(!0),Y=K&&B?" max-content ":s,$=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],ee=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],le=(e=>{if(!Z.length)return e;return[...e].sort((e,l)=>{for(const t of Z){const{columnId:i,direction:r}=t,o=e[i],n=l[i];if(o!==n)return"asc"===r?o>n?1:-1:o<n?1:-1}return 0})})(l),te=H*U,ie=te+U,re=le.slice(te,ie),oe=e=>{let{row:l,index:i}=e;const[s,c]=(0,r.useState)(!1),h="20px";return(0,O.jsxs)(r.Fragment,{children:[(0,O.jsxs)(v.A,{children:[!0===a&&d&&(0,O.jsx)(m.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(G,"px")},children:(0,O.jsx)(n.A,{size:"small",onClick:()=>c(e=>!e),children:s?(0,O.jsx)(f.A,{sx:{fontSize:h}}):(0,O.jsx)(j.A,{sx:{fontSize:h}})})}),!0===u&&(0,O.jsx)(m.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(G,"px")},children:U*H+i+1}),null===t||void 0===t?void 0:t.map((e,t)=>{var r,n;const a=(0,b.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,b.id)(null===e||void 0===e?void 0:e.isVisible,1),d=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,s=!d,c=(l,t,i)=>null!==e&&void 0!==e&&e.tdClass?" ".concat(null===e||void 0===e?void 0:e.tdClass({row:l,Field_Name:t,index:i})," "):"",u=e.align?null===(r=$.find(l=>l.type===String(e.align).toLowerCase()))||void 0===r?void 0:r.class:"",v=e.verticalAlign?null===(n=ee.find(l=>l.type===String(e.verticalAlign).toLowerCase()))||void 0===n?void 0:n.class:" vctr ";if(a&&s){const r=Object.entries(l).find(l=>{let[t]=l;return t===e.Field_Name});return(0,O.jsx)(m.A,{className:"border-end ".concat(u," ").concat(v," ").concat(c(l,e.Field_Name,i)),sx:{fontSize:"".concat(G,"px")},onClick:()=>o?o(l):console.log("Function not supplied"),children:r?F(r[1],null===e||void 0===e?void 0:e.Fied_Data):"-"},t)}return a&&d?(0,O.jsx)(m.A,{className:"border-end ".concat(u," ").concat(v," ").concat(c(l,e.Field_Name,i)),sx:{fontSize:"".concat(G,"px")},children:e.Cell({row:l,Field_Name:e.Field_Name,index:i})},t):(0,O.jsx)(m.A,{sx:{fontSize:"".concat(G,"px")},className:"border-end ".concat(u," ").concat(v),children:"-"},t)})]}),!0===a&&d&&s&&(0,O.jsx)(v.A,{children:(0,O.jsx)(m.A,{colSpan:Number(null===t||void 0===t?void 0:t.length)+(!0===u?2:1),children:d({row:l,index:i})})})]})};return(0,O.jsxs)(h.A,{className:"rounded-3 bg-white overflow-hidden",component:x.A,children:[(0,O.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(V||E||Q.length>0||B)&&(0,O.jsx)(w,{ToolTipText:"Table Options",buttonsData:[...B?[{name:"Max Height",icon:K?(0,O.jsx)(N.A,{fontSize:"small",color:"primary"}):(0,O.jsx)(I.A,{fontSize:"small"}),onclick:()=>X(e=>!e),disabled:(0,b.id)(null===l||void 0===l?void 0:l.length,0)}]:[],...V?[{name:"PDF Print",icon:(0,O.jsx)(S.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,l)=>{try{const t=new P.default,r=k(e,l),o=l.filter(e=>e.isVisible||e.Defult_Display).map(e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase()),n=r.map(e=>o.map(l=>e[l])).map((e,l)=>(0,i.A)((0,i.A)({},e),{},{Sno:l+1}));t.autoTable({head:[o],body:n}),t.save("table.pdf")}catch(t){console.error(t)}})(l,t),disabled:(0,b.id)(null===l||void 0===l?void 0:l.length,0)}]:[],...E?[{name:"Excel Print",icon:(0,O.jsx)(S.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,l)=>{try{const t=k(e,l),i=T.Wp.json_to_sheet(t),r=T.Wp.book_new();T.Wp.book_append_sheet(r,i,"Data"),T._h(r,"table.xlsx")}catch(t){console.error(t)}})(l,t),disabled:(0,b.id)(null===l||void 0===l?void 0:l.length,0)}]:[],...Q]}),z&&z,R&&(0,O.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:R})]}),(0,O.jsx)(p.A,{sx:{maxHeight:Y},children:(0,O.jsxs)(y.A,{stickyHeader:!0,size:C,children:[(0,O.jsx)(g.A,{children:(0,O.jsxs)(v.A,{children:[a&&d&&(0,O.jsx)(m.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(M,"px"),backgroundColor:"#EDF0F7"},children:"#"}),u&&(0,O.jsx)(m.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(M,"px"),backgroundColor:"#EDF0F7"},children:"SNo"}),t.map((e,l)=>{const t=(0,b.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,b.id)(null===e||void 0===e?void 0:e.isVisible,1),r=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,o=Z.find(l=>l.columnId===e.Field_Name),n=o?o.direction:"asc";var a,d,s,c;return t?r?(0,O.jsx)(m.A,{className:"fw-bold border-end border-top "+(e.align?null===(a=$.find(l=>l.type===String(e.align).toLowerCase()))||void 0===a?void 0:a.class:""),sx:{fontSize:"".concat(M,"px"),backgroundColor:"#EDF0F7"},sortDirection:!!o&&n,children:(0,O.jsx)(A.A,{active:!!o,direction:n,onClick:()=>(e=>{const l=Z.find(l=>l.columnId===e);if(l){const t="asc"===l.direction;q(Z.map(l=>l.columnId===e?(0,i.A)((0,i.A)({},l),{},{direction:t?"desc":"asc"}):l))}else q([...Z,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(d=e.Field_Name)||void 0===d?void 0:d.replace(/_/g," "))})},l):(0,O.jsx)(m.A,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(s=$.find(l=>l.type===String(e.align).toLowerCase()))||void 0===s?void 0:s.class:""),sx:{fontSize:"".concat(M,"px"),backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(c=e.Field_Name)||void 0===c?void 0:c.replace(/_/g," "))},l):null})]})}),(0,O.jsxs)(_.A,{children:[(L?le:re).map((e,l)=>(0,O.jsx)(oe,{row:e,index:l},l)),0===l.length&&(0,O.jsx)(v.A,{children:(0,O.jsx)(m.A,{colSpan:t.length+(!0===a&&d?1:0)+(!0===u?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!L&&0!==re.length&&(0,O.jsx)("div",{className:"p-2 pb-0",children:(0,O.jsx)(D.A,{component:"div",count:l.length,page:H,onPageChange:(e,l)=>{W(l)},rowsPerPage:U,onRowsPerPageChange:e=>{J(parseInt(e.target.value,10)),W(0)},rowsPerPageOptions:Array.from(new Set([c,5,20,50,100,200,500,1e3,2e3])).sort((e,l)=>e-l),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};R.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const V=R}}]);
//# sourceMappingURL=8800.d10c3fb0.chunk.js.map