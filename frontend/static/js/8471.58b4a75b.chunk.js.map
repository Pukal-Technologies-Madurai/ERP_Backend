{"version":3,"file":"static/js/8471.58b4a75b.chunk.js","mappings":"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","sources":["Components/tasktype/addEditTaskType.jsx"],"sourcesContent":["// // import React, { useEffect } from \"react\";\r\n// // import { Dialog, DialogActions, DialogContent, DialogTitle } from \"@mui/material\";\r\n\r\n// // const AddEditTaskType = ({ open, onClose, existingTaskType, onCreate, onUpdate }) => {\r\n// //     const [inputValue, setInputValue] = React.useState({\r\n// //         Task_Type: \"\",\r\n// //         Task_Type_Id: \"\",\r\n// //     });\r\n\r\n// //     useEffect(() => {\r\n// //         if (existingTaskType) {\r\n// //             setInputValue(existingTaskType);\r\n// //         } else {\r\n// //             setInputValue({ Task_Type: \"\", Task_Type_Id: \"\" });\r\n// //         }\r\n// //     }, [existingTaskType]);\r\n\r\n// //     const handleSubmit = (event) => {\r\n// //         event.preventDefault(); \r\n// //         if (existingTaskType) {\r\n// //             onUpdate(inputValue); \r\n// //         } else {\r\n// //             onCreate(inputValue.Task_Type);\r\n// //         }\r\n// //         onClose();\r\n// //     };\r\n\r\n// //     return (\r\n// //         <Dialog open={open} onClose={onClose}>\r\n// //             <DialogTitle className=\"bg-primary text-white mb-2 px-3 py-2\">\r\n// //                 {existingTaskType ? \"Edit Task Type\" : \"Create Task Type\"}\r\n// //             </DialogTitle>\r\n// //             <DialogContent>\r\n// //                 <form onSubmit={handleSubmit}>\r\n// //                     <div className=\"p-2\">\r\n// //                         <label>Task Type</label>\r\n// //                         <input\r\n// //                             type=\"text\"\r\n// //                             onChange={(event) => setInputValue({ ...inputValue, Task_Type: event.target.value })}\r\n// //                             value={inputValue.Task_Type}\r\n// //                             className=\"cus-inpt\"\r\n// //                         />\r\n// //                     </div>\r\n// //                     <DialogActions>\r\n// //                         <button\r\n// //                             className=\"btn btn-light rounded-5 px-3\"\r\n// //                             type=\"button\"\r\n// //                             onClick={onClose}>\r\n// //                             Cancel\r\n// //                         </button>\r\n// //                         <button\r\n// //                             className=\"btn btn-primary rounded-5 px-3\"\r\n// //                             type=\"submit\">\r\n// //                             {existingTaskType ? \"Update\" : \"Create\"}\r\n// //                         </button>\r\n// //                     </DialogActions>\r\n// //                 </form>\r\n// //             </DialogContent>\r\n// //         </Dialog>\r\n// //     );\r\n// // };\r\n\r\n// // export default AddEditTaskType;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import React, { useEffect, useState } from \"react\";\r\n// import { \r\n//     Dialog, \r\n//     DialogActions, \r\n//     DialogContent, \r\n//     DialogTitle,\r\n//     Button,\r\n//     TextField\r\n// } from \"@mui/material\";\r\n// import { fetchLink } from \"../../Components/fetchComponent\";\r\n\r\n// const AddEditTaskType = ({ open, onClose, existingTaskType, onCreate, onUpdate }) => {\r\n  \r\n//     const [inputValue, setInputValue] = useState({\r\n//         Task_Type: \"\",\r\n//         Task_Type_Id: \"\",\r\n//         ProjectId: \"\",\r\n//         ProjectName: \"\",\r\n//         Est_StartDate: new Date().toISOString().split('T')[0],\r\n//         Est_EndDate: new Date().toISOString().split('T')[0],\r\n//         Status: \"1\"\r\n//     });\r\n\r\n//     const [projects, setProjects] = useState([]);\r\n//     const [loading, setLoading] = useState(false);\r\n\r\n//     // Fetch projects from API\r\n//     useEffect(() => {\r\n//         const fetchProjects = async () => {\r\n//             setLoading(true);\r\n//             try {\r\n//                 const companyId = JSON.parse(localStorage.getItem(\"user\"))?.Company_id || 1;\r\n//                 const data = await fetchLink({\r\n//                     address: `taskManagement/project/Abstract?Company_id=${companyId}`\r\n//                 });\r\n                \r\n//                 if (data.success) {\r\n//                     setProjects(data.data || []);\r\n//                 } else {\r\n//                     console.error(\"Failed to fetch projects:\", data.message);\r\n//                 }\r\n//             } catch (error) {\r\n//                 console.error(\"Error fetching projects:\", error);\r\n//             } finally {\r\n//                 setLoading(false);\r\n//             }\r\n//         };\r\n\r\n//         if (open) {\r\n//             fetchProjects();\r\n//         }\r\n//     }, [open]);\r\n\r\n//     useEffect(() => {\r\n      \r\n//         if (existingTaskType && existingTaskType.ProjectId) {\r\n\r\n//             const formattedData = {\r\n//                 ...existingTaskType,\r\n//                 ProjectId: existingTaskType.ProjectId.toString(),\r\n//                 Est_StartDate: existingTaskType.Est_StartDate \r\n//                     ? new Date(existingTaskType.Est_StartDate).toISOString().split('T')[0]\r\n//                     : new Date().toISOString().split('T')[0],\r\n//                 Est_EndDate: existingTaskType.Est_EndDate \r\n//                     ? new Date(existingTaskType.Est_EndDate).toISOString().split('T')[0]\r\n//                     : new Date().toISOString().split('T')[0]\r\n//             };\r\n        \r\n//             setInputValue(formattedData);\r\n//         } else {\r\n          \r\n//             setInputValue({ \r\n//                 Task_Type: \"\", \r\n//                 Task_Type_Id: \"\",\r\n//                 ProjectId: \"\",\r\n//                 ProjectName: \"\",\r\n//                 Est_StartDate: new Date().toISOString().split('T')[0],\r\n//                 Est_EndDate: new Date().toISOString().split('T')[0],\r\n//                 Status: \"1\"\r\n//             });\r\n//         }\r\n//     }, [existingTaskType, open, projects]); \r\n\r\n// const handleSubmit = (e) => {\r\n//     e.preventDefault();\r\n    \r\n//     if (!inputValue.Task_Type.trim()) {\r\n//         alert(\"Please enter a Task Type\");\r\n//         return;\r\n//     }\r\n    \r\n//     if (!inputValue.ProjectId) {\r\n//         alert(\"Please select a Project\");\r\n//         return;\r\n//     }\r\n\r\n//     if (new Date(inputValue.Est_StartDate) > new Date(inputValue.Est_EndDate)) {\r\n//         alert(\"End date cannot be before start date\");\r\n//         return;\r\n//     }\r\n\r\n//     // Prepare data for API - ensure proper types\r\n//     const submitData = {\r\n//         ...inputValue,\r\n//         ProjectId: inputValue.ProjectId, // Keep as string for dropdown, will be parsed in API call\r\n//         Status: inputValue.Status // Keep as string for dropdown, will be parsed in API call\r\n//     };\r\n\r\n//     if (existingTaskType && existingTaskType.Task_Type_Id) {\r\n//         onUpdate(submitData); \r\n//     } else {\r\n//         onCreate(submitData);\r\n//     }\r\n//     onClose();\r\n// };\r\n\r\n//     const handleProjectChange = (e) => {\r\n//         const selectedProjectId = e.target.value;\r\n//         const selectedProject = projects.find(project => project.Project_Id.toString() === selectedProjectId);\r\n        \r\n//         setInputValue(prev => ({\r\n//             ...prev,\r\n//             ProjectId: selectedProjectId,\r\n//             ProjectName: selectedProject ? selectedProject.Project_Name : \"\",\r\n//             Est_StartDate: selectedProject?.Est_Start_Dt ? new Date(selectedProject.Est_Start_Dt).toISOString().split('T')[0] : prev.Est_StartDate,\r\n//             Est_EndDate: selectedProject?.Est_End_Dt ? new Date(selectedProject.Est_End_Dt).toISOString().split('T')[0] : prev.Est_EndDate\r\n//         }));\r\n//     };\r\n\r\n//     const handleClose = () => {\r\n//         setInputValue({ \r\n//             Task_Type: \"\", \r\n//             Task_Type_Id: \"\",\r\n//             ProjectId: \"\",\r\n//             ProjectName: \"\",\r\n//             Est_StartDate: new Date().toISOString().split('T')[0],\r\n//             Est_EndDate: new Date().toISOString().split('T')[0],\r\n//             Status: \"1\"\r\n//         });\r\n//         onClose();\r\n//     };\r\n\r\n//     // Check if project dropdown should be disabled\r\n//     const isProjectDisabled = existingTaskType && existingTaskType.ProjectId;\r\n\r\n//     return (\r\n//         <Dialog\r\n//             open={open}\r\n//             onClose={handleClose}\r\n//             fullWidth\r\n//             maxWidth=\"sm\">\r\n//             <DialogTitle>\r\n//                 {existingTaskType && existingTaskType.Task_Type_Id ? \"UPDATE TASK TYPE\" : \"CREATE TASK TYPE\"}\r\n//             </DialogTitle>\r\n//             <form onSubmit={handleSubmit}>\r\n//                 <DialogContent>\r\n//                     {/* Project Dropdown */}\r\n//                     <label>Project</label>\r\n//                     <select\r\n//                         value={inputValue.ProjectId || \"\"}\r\n//                         onChange={handleProjectChange}\r\n//                         className=\"cus-inpt\"\r\n//                         required\r\n//                         disabled={isProjectDisabled}\r\n//                     >\r\n//                         <option value=\"\" disabled>\r\n//                             {loading ? \"Loading projects...\" : \"Select Project\"}\r\n//                         </option>\r\n//                         {projects.map((project) => (\r\n//                             <option key={project.Project_Id} value={project.Project_Id.toString()}>\r\n//                                 {project.Project_Name}\r\n//                             </option>\r\n//                         ))}\r\n//                     </select>\r\n\r\n                    \r\n//                     {/* {inputValue.ProjectName && (\r\n//                         <div style={{ marginTop: '8px', marginBottom: '16px', padding: '8px', backgroundColor: '#f5f5f5', borderRadius: '4px' }}>\r\n//                             <strong>Selected Project:</strong> {inputValue.ProjectName}\r\n//                         </div>\r\n//                     )} */}\r\n\r\n//                     {/* Task Type */}\r\n//                     <label>Task Type</label>\r\n//                     <TextField\r\n//                         value={inputValue.Task_Type}\r\n//                         onChange={e => setInputValue({\r\n//                             ...inputValue,\r\n//                             Task_Type: e.target.value\r\n//                         })}\r\n//                         fullWidth\r\n//                         margin=\"dense\"\r\n//                         variant=\"outlined\"\r\n//                         required\r\n//                         placeholder=\"Enter task type (e.g., Development, Testing)\"\r\n//                     />\r\n\r\n//                     {/* Estimated Start Date */}\r\n//                     <label>Estimated Start Date</label>\r\n//                     <input\r\n//                         type=\"date\"\r\n//                         value={inputValue.Est_StartDate}\r\n//                         onChange={e => setInputValue({\r\n//                             ...inputValue,\r\n//                             Est_StartDate: e.target.value\r\n//                         })}\r\n//                         className=\"cus-inpt\"\r\n//                         required\r\n//                     />\r\n\r\n//                     {/* Estimated End Date */}\r\n//                     <label>Estimated End Date</label>\r\n//                     <input\r\n//                         type=\"date\"\r\n//                         value={inputValue.Est_EndDate}\r\n//                         onChange={e => setInputValue({\r\n//                             ...inputValue,\r\n//                             Est_EndDate: e.target.value\r\n//                         })}\r\n//                         className=\"cus-inpt\"\r\n//                         required\r\n//                     />\r\n\r\n//                     {/* Status Dropdown */}\r\n//                     <label>Status</label>\r\n//                     <select\r\n//                         className=\"cus-inpt\"\r\n//                         value={inputValue.Status}\r\n//                         onChange={e => setInputValue({\r\n//                             ...inputValue,\r\n//                             Status: e.target.value\r\n//                         })}\r\n//                         required>\r\n//                         <option value=\"\" disabled>Select Status</option>\r\n//                         <option value=\"1\">Active</option>\r\n//                         <option value=\"0\">Inactive</option>\r\n//                         <option value=\"2\">Pending</option>\r\n//                         <option value=\"3\">Completed</option>\r\n//                     </select>\r\n//                 </DialogContent>\r\n//                 <DialogActions>\r\n//                     <Button onClick={handleClose}>\r\n//                         Cancel\r\n//                     </Button>\r\n//                     <Button type=\"submit\" variant=\"contained\">\r\n//                         {existingTaskType && existingTaskType.Task_Type_Id ? \"Update\" : \"Save\"}\r\n//                     </Button>\r\n//                 </DialogActions>\r\n//             </form>\r\n//         </Dialog>\r\n//     );\r\n// };\r\n\r\n// export default AddEditTaskType;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import React, { useEffect, useState } from \"react\";\r\n// import { \r\n//     Dialog, \r\n//     DialogActions, \r\n//     DialogContent, \r\n//     DialogTitle,\r\n//     Button,\r\n//     TextField\r\n// } from \"@mui/material\";\r\n// import { fetchLink } from \"../../Components/fetchComponent\";\r\n// import { toast } from 'react-toastify';\r\n\r\n\r\n\r\n// const AddEditTaskType = ({ open, onClose, existingTaskType, onCreate, onUpdate }) => {\r\n   \r\n//     const [inputValue, setInputValue] = useState({\r\n//         Task_Type: \"\",\r\n//         Task_Type_Id: \"\",\r\n//         Project_Id: \"\",\r\n//         ProjectName: \"\",\r\n//         Est_StartDate: new Date().toISOString().split('T')[0],\r\n//         Est_EndDate: new Date().toISOString().split('T')[0],\r\n//         Status: \"1\"\r\n//     });\r\n\r\n//     const [projects, setProjects] = useState([]);\r\n//     const [loading, setLoading] = useState(false);\r\n\r\n\r\n//     useEffect(() => {\r\n//         const fetchProjects = async () => {\r\n//             setLoading(true);\r\n//             try {\r\n//                 const companyId = JSON.parse(localStorage.getItem(\"user\"))?.Company_id || 1;\r\n//                 const data = await fetchLink({\r\n//                     address: `taskManagement/project/Abstract?Company_id=${companyId}`\r\n//                 });\r\n                \r\n//                 if (data.success) {\r\n//                     setProjects(data.data || []);\r\n//                 } else {\r\n//                     console.error(\"Failed to fetch projects:\", data.message);\r\n//                 }\r\n//             } catch (error) {\r\n//                 console.error(\"Error fetching projects:\", error);\r\n//             } finally {\r\n//                 setLoading(false);\r\n//             }\r\n//         };\r\n\r\n//         if (open) {\r\n//             fetchProjects();\r\n//         }\r\n//     }, [open]);\r\n\r\n//     useEffect(() => {\r\n//         if (existingTaskType && open && projects.length > 0) {\r\n       \r\n//             const project = projects.find(proj => \r\n//                 proj.Project_Id.toString() == existingTaskType.ProjectId?.toString()\r\n//             );\r\n            \r\n//             const formattedData = {\r\n//                 ...existingTaskType,\r\n//                 Project_Id: existingTaskType.ProjectId?.toString() || existingTaskType.Project_Id?.toString(),\r\n//                 ProjectName: project ? project.Project_Name : existingTaskType.ProjectName || \"\",\r\n//                 Est_StartDate: existingTaskType.Est_StartDate \r\n//                     ? new Date(existingTaskType.Est_StartDate).toISOString().split('T')[0]\r\n//                     : new Date().toISOString().split('T')[0],\r\n//                 Est_EndDate: existingTaskType.Est_EndDate \r\n//                     ? new Date(existingTaskType.Est_EndDate).toISOString().split('T')[0]\r\n//                     : new Date().toISOString().split('T')[0],\r\n//                 Status: existingTaskType.Status?.toString() || \"1\"\r\n//             };\r\n        \r\n//             setInputValue(formattedData);\r\n//         } else if (!existingTaskType && open) {\r\n     \r\n//             setInputValue({ \r\n//                 Task_Type: \"\", \r\n//                 Task_Type_Id: \"\",\r\n//                 Project_Id: \"\",\r\n//                 ProjectName: \"\",\r\n//                 Est_StartDate: new Date().toISOString().split('T')[0],\r\n//                 Est_EndDate: new Date().toISOString().split('T')[0],\r\n//                 Status: \"1\"\r\n//             });\r\n//         }\r\n//     }, [existingTaskType, open, projects]); \r\n\r\n//     const handleSubmit = (e) => {\r\n//         e.preventDefault();\r\n        \r\n//         if (!inputValue.Task_Type.trim()) {\r\n//             toast.error(\"Please enter a Task Type\");\r\n//             return;\r\n//         }\r\n        \r\n//         if (!inputValue.Project_Id) {\r\n//             toast.error(\"Please select a Project\");\r\n//             return;\r\n//         }\r\n    \r\n//         console.log(\"inputvalue\",inputValue)\r\n//         if (new Date(inputValue.Est_StartDate) > new Date(inputValue.Est_EndDate)) {\r\n//             alert(\"End date cannot be before start date\");\r\n//             return;\r\n//         }\r\n\r\n\r\n//         const submitData = {\r\n//             ...inputValue,\r\n//             Project_Id: parseInt(inputValue.Project_Id), \r\n//             Status: parseInt(inputValue.Status)\r\n//         };\r\n\r\n//         console.log(\"submitedData\",submitData)\r\n\r\n//         if (existingTaskType && existingTaskType.Task_Type_Id) {\r\n//             onUpdate(submitData); \r\n//         } else {\r\n//             onCreate(submitData);\r\n//         }\r\n//         onClose();\r\n//     };\r\n\r\n//     const handleProjectChange = (e) => {\r\n//         const selectedProjectId = e.target.value;\r\n//         console.log(\"Project_Id\",selectedProjectId)\r\n//         const selectedProject = projects.find(project => project.Project_Id.toString() === selectedProjectId);\r\n        \r\n//         setInputValue(prev => ({\r\n//             ...prev,\r\n//             Project_Id: selectedProjectId,\r\n//             ProjectName: selectedProject ? selectedProject.Project_Name : \"\",\r\n//             Est_StartDate: selectedProject?.Est_Start_Dt ? new Date(selectedProject.Est_Start_Dt).toISOString().split('T')[0] : prev.Est_StartDate,\r\n//             Est_EndDate: selectedProject?.Est_End_Dt ? new Date(selectedProject.Est_End_Dt).toISOString().split('T')[0] : prev.Est_EndDate\r\n//         }));\r\n//     };\r\n\r\n//     const handleClose = () => {\r\n//         setInputValue({ \r\n//             Task_Type: \"\", \r\n//             Task_Type_Id: \"\",\r\n//             Project_Id: \"\",\r\n//             ProjectName: \"\",\r\n//             Est_StartDate: new Date().toISOString().split('T')[0],\r\n//             Est_EndDate: new Date().toISOString().split('T')[0],\r\n//             Status: \"1\"\r\n//         });\r\n//         onClose();\r\n//     };\r\n\r\n//     const isProjectDisabled = existingTaskType && existingTaskType.ProjectId;\r\n// const handleDaysChange = (e) => {\r\n//     const { value } = e.target;\r\n//     setInputValue(prev => ({\r\n//         ...prev,\r\n//         Days_Duration: value\r\n//     }));\r\n// };\r\n//     return (\r\n//         <Dialog\r\n//             open={open}\r\n//             onClose={handleClose}\r\n//             fullWidth\r\n//             maxWidth=\"sm\">\r\n//             <DialogTitle className=\"bg-primary text-white mb-2 px-3 py-2\">\r\n//                 {existingTaskType && existingTaskType.Task_Type_Id ? \"UPDATE TASK TYPE\" : \"CREATE TASK TYPE\"}\r\n//             </DialogTitle>\r\n//             <form onSubmit={handleSubmit}>\r\n//                 <DialogContent>\r\n            \r\n//                     <div className=\"p-2\">\r\n//                         <label>Project</label>\r\n//                         <select\r\n//                             value={inputValue.Project_Id || \"\"}\r\n//                             onChange={handleProjectChange}\r\n//                             className=\"cus-inpt\"\r\n//                             required\r\n//                             disabled={isProjectDisabled}\r\n//                             style={{ width: '100%', padding: '8px', marginBottom: '16px' }}\r\n//                         >\r\n//                             <option value=\"\" disabled>\r\n//                                 {loading ? \"Loading projects...\" : \"Select Project\"}\r\n//                             </option>\r\n//                             {projects.map((project) => (\r\n//                                 <option key={project.Project_Id} value={project.Project_Id.toString()}>\r\n//                                     {project.Project_Name}\r\n//                                 </option>\r\n//                             ))}\r\n//                         </select>\r\n//                     </div>\r\n\r\n         \r\n//                     <div className=\"p-2\">\r\n//                         <label>Task Type</label>\r\n//                         <input\r\n//                             type=\"text\"\r\n//                             value={inputValue.Task_Type}\r\n//                             onChange={e => setInputValue({\r\n//                                 ...inputValue,\r\n//                                 Task_Type: e.target.value\r\n//                             })}\r\n//                             className=\"cus-inpt\"\r\n//                             required\r\n//                             placeholder=\"Enter task type (e.g., Development, Testing)\"\r\n//                             style={{ width: '100%', padding: '8px', marginBottom: '16px' }}\r\n//                         />\r\n//                     </div>\r\n\r\n                  \r\n//                     <div className=\"p-2\">\r\n//     <label>Number Of Days</label>\r\n//     <input\r\n//         type=\"number\"\r\n//         value={inputValue.Days_Duration || \"\"}\r\n//         onChange={handleDaysChange}\r\n//         className=\"cus-inpt\"\r\n//         required\r\n//         min=\"1\"\r\n//         placeholder=\"Enter number of days\"\r\n//         style={{ width: '100%', padding: '8px', marginBottom: '16px' }}\r\n//     />\r\n// </div>\r\n\r\n//                     <div className=\"p-2\">\r\n//                         <label>Estimated Start Date</label>\r\n//                         <input\r\n//                             type=\"date\"\r\n//                             value={inputValue.Est_StartDate}\r\n//                             onChange={e => setInputValue({\r\n//                                 ...inputValue,\r\n//                                 Est_StartDate: e.target.value\r\n//                             })}\r\n//                             className=\"cus-inpt\"\r\n//                             required\r\n//                             style={{ width: '100%', padding: '8px', marginBottom: '16px' }}\r\n//                         />\r\n//                     </div>\r\n\r\n//                     {/* Estimated End Date */}\r\n//                     <div className=\"p-2\">\r\n//                         <label>Estimated End Date</label>\r\n//                         <input\r\n//                             type=\"date\"\r\n//                             value={inputValue.Est_EndDate}\r\n//                             onChange={e => setInputValue({\r\n//                                 ...inputValue,\r\n//                                 Est_EndDate: e.target.value\r\n//                             })}\r\n//                             className=\"cus-inpt\"\r\n//                             required\r\n//                             style={{ width: '100%', padding: '8px', marginBottom: '16px' }}\r\n//                         />\r\n//                     </div>\r\n\r\n              \r\n//                     <div className=\"p-2\">\r\n//                         <label>Status</label>\r\n//                         <select\r\n//                             className=\"cus-inpt\"\r\n//                             value={inputValue.Status}\r\n//                             onChange={e => setInputValue({\r\n//                                 ...inputValue,\r\n//                                 Status: e.target.value\r\n//                             })}\r\n//                             required\r\n//                             style={{ width: '100%', padding: '8px', marginBottom: '16px' }}>\r\n//                             <option value=\"\" disabled>Select Status</option>\r\n//                             <option value=\"1\">Active</option>\r\n//                             <option value=\"0\">Inactive</option>\r\n//                             <option value=\"2\">Pending</option>\r\n//                             <option value=\"3\">Completed</option>\r\n//                         </select>\r\n//                     </div>\r\n//                 </DialogContent>\r\n//                 <DialogActions>\r\n//                     <Button onClick={handleClose} className=\"btn btn-light rounded-5 px-3\">\r\n//                         Cancel\r\n//                     </Button>\r\n//                     <Button type=\"submit\" variant=\"contained\" className=\"btn btn-primary rounded-5 px-3\">\r\n//                         {existingTaskType && existingTaskType.Task_Type_Id ? \"Update\" : \"Save\"}\r\n//                     </Button>\r\n//                 </DialogActions>\r\n//             </form>\r\n//         </Dialog>\r\n//     );\r\n// };\r\n\r\n// export default AddEditTaskType;\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { \r\n    Dialog, \r\n    DialogActions, \r\n    DialogContent, \r\n    DialogTitle,\r\n    Button,\r\n    TextField\r\n} from \"@mui/material\";\r\nimport { fetchLink } from \"../../Components/fetchComponent\";\r\nimport { toast } from 'react-toastify';\r\n\r\nconst AddEditTaskType = ({ open, onClose, existingTaskType, onCreate, onUpdate }) => {\r\n   \r\n    const [inputValue, setInputValue] = useState({\r\n        Task_Type: \"\",\r\n        Task_Type_Id: \"\",\r\n        Project_Id: \"\",\r\n        ProjectName: \"\",\r\n        Day_Duration: \"\",\r\n        Status: \"1\"\r\n    });\r\n\r\n    const [projects, setProjects] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchProjects = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const companyId = JSON.parse(localStorage.getItem(\"user\"))?.Company_id || 1;\r\n                const data = await fetchLink({\r\n                    address: `taskManagement/project/Abstract?Company_id=${companyId}`\r\n                });\r\n                \r\n                if (data.success) {\r\n                    setProjects(data.data || []);\r\n                } else {\r\n                    console.error(\"Failed to fetch projects:\", data.message);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error fetching projects:\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        if (open) {\r\n            fetchProjects();\r\n        }\r\n    }, [open]);\r\n\r\n    useEffect(() => {\r\n        if (existingTaskType && open && projects.length > 0) {\r\n            const project = projects.find(proj => \r\n                proj.Project_Id.toString() == existingTaskType.ProjectId?.toString()\r\n            );\r\n            \r\n            const formattedData = {\r\n                ...existingTaskType,\r\n                Project_Id: existingTaskType.ProjectId?.toString() || existingTaskType.Project_Id?.toString(),\r\n                ProjectName: project ? project.Project_Name : existingTaskType.ProjectName || \"\",\r\n                Day_Duration: existingTaskType.Day_Duration?.toString() || \"\",\r\n                Status: existingTaskType.Status?.toString() || \"1\"\r\n            };\r\n        \r\n            setInputValue(formattedData);\r\n        } else if (!existingTaskType && open) {\r\n            setInputValue({ \r\n                Task_Type: \"\", \r\n                Task_Type_Id: \"\",\r\n                Project_Id: \"\",\r\n                ProjectName: \"\",\r\n                Day_Duration: \"\",\r\n                Status: \"1\"\r\n            });\r\n        }\r\n    }, [existingTaskType, open, projects]); \r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        \r\n        if (!inputValue.Task_Type.trim()) {\r\n            toast.error(\"Please enter a Task Type\");\r\n            return;\r\n        }\r\n        \r\n        if (!inputValue.Project_Id) {\r\n            toast.error(\"Please select a Project\");\r\n            return;\r\n        }\r\n\r\n        if (!inputValue.Day_Duration || parseInt(inputValue.Day_Duration) < 1) {\r\n            toast.error(\"Please enter a valid number of days\");\r\n            return;\r\n        }\r\n        console.log(\"inputvalue\",inputValue)\r\n\r\n        const submitData = {\r\n            ...inputValue,\r\n            Project_Id: parseInt(inputValue.Project_Id), \r\n            Day_Duration: inputValue.Day_Duration,\r\n            Status: parseInt(inputValue.Status),\r\n            // Add current date automatically\r\n            Created_Date: new Date().toISOString().split('T')[0],\r\n            // You can also calculate estimated dates based on days duration if needed\r\n            Est_StartDate: new Date().toISOString().split('T')[0],\r\n            Est_EndDate: new Date(Date.now() + (inputValue.Day_Duration * 24 * 60 * 60 * 1000)).toISOString().split('T')[0]\r\n        };\r\n\r\n\r\n\r\n        if (existingTaskType && existingTaskType.Task_Type_Id) {\r\n            onUpdate(submitData); \r\n        } else {\r\n            onCreate(submitData);\r\n        }\r\n        onClose();\r\n    };\r\n\r\n    const handleProjectChange = (e) => {\r\n        const selectedProjectId = e.target.value;\r\n        const selectedProject = projects.find(project => project.Project_Id.toString() === selectedProjectId);\r\n        \r\n        setInputValue(prev => ({\r\n            ...prev,\r\n            Project_Id: selectedProjectId,\r\n            ProjectName: selectedProject ? selectedProject.Project_Name : \"\"\r\n        }));\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setInputValue({ \r\n            Task_Type: \"\", \r\n            Task_Type_Id: \"\",\r\n            Project_Id: \"\",\r\n            ProjectName: \"\",\r\n            Day_Duration: \"\",\r\n            Status: \"1\"\r\n        });\r\n        onClose();\r\n    };\r\n\r\n    const handleDaysChange = (e) => {\r\n        const { value } = e.target;\r\n        setInputValue(prev => ({\r\n            ...prev,\r\n            Day_Duration: value\r\n        }));\r\n    };\r\n\r\n    const isProjectDisabled = existingTaskType && existingTaskType.ProjectId;\r\n\r\n    return (\r\n        <Dialog\r\n            open={open}\r\n            onClose={handleClose}\r\n            fullWidth\r\n            maxWidth=\"sm\">\r\n            <DialogTitle className=\"bg-primary text-white mb-2 px-3 py-2\">\r\n                {existingTaskType && existingTaskType.Task_Type_Id ? \"UPDATE TASK TYPE\" : \"CREATE TASK TYPE\"}\r\n            </DialogTitle>\r\n            <form onSubmit={handleSubmit}>\r\n                <DialogContent>\r\n                    {/* Project Selection */}\r\n                    <div className=\"p-2\">\r\n                        <label>Project</label>\r\n                        <select\r\n                            value={inputValue.Project_Id || \"\"}\r\n                            onChange={handleProjectChange}\r\n                            className=\"cus-inpt\"\r\n                            required\r\n                            disabled={isProjectDisabled}\r\n                            style={{ width: '100%', padding: '8px', marginBottom: '16px' }}\r\n                        >\r\n                            <option value=\"\" disabled>\r\n                                {loading ? \"Loading projects...\" : \"Select Project\"}\r\n                            </option>\r\n                            {projects.map((project) => (\r\n                                <option key={project.Project_Id} value={project.Project_Id.toString()}>\r\n                                    {project.Project_Name}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    {/* Task Type Input */}\r\n                    <div className=\"p-2\">\r\n                        <label>Task Type</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={inputValue.Task_Type}\r\n                            onChange={e => setInputValue({\r\n                                ...inputValue,\r\n                                Task_Type: e.target.value\r\n                            })}\r\n                            className=\"cus-inpt\"\r\n                            required\r\n                            placeholder=\"Enter task type (e.g., Development, Testing)\"\r\n                            style={{ width: '100%', padding: '8px', marginBottom: '16px' }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Number Of Days Input */}\r\n                    <div className=\"p-2\">\r\n                        <label>Number Of Days</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            value={inputValue.Day_Duration || \"\"}\r\n                            onChange={handleDaysChange}\r\n                            className=\"cus-inpt\"\r\n                            required\r\n                            min=\"1\"\r\n                            placeholder=\"Enter number of days\"\r\n                            style={{ width: '100%', padding: '8px', marginBottom: '16px' }}\r\n                        />\r\n                    </div>\r\n                   <div className=\"p-2\">\r\n                         <label>Estimated Start Date</label>\r\n                         <input\r\n                            type=\"date\"\r\n                            value={inputValue.Est_StartDate}\r\n                            onChange={e => setInputValue({\r\n                                ...inputValue,\r\n                                Est_StartDate: e.target.value\r\n                            })}\r\n                            className=\"cus-inpt\"\r\n                            required\r\n                            style={{ width: '100%', padding: '8px', marginBottom: '16px' }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Estimated End Date */}\r\n                    <div className=\"p-2\">\r\n                        <label>Estimated End Date</label>\r\n                        <input\r\n                            type=\"date\"\r\n                            value={inputValue.Est_EndDate}\r\n                            onChange={e => setInputValue({\r\n                                ...inputValue,\r\n                                Est_EndDate: e.target.value\r\n                            })}\r\n                            className=\"cus-inpt\"\r\n                            required\r\n                            style={{ width: '100%', padding: '8px', marginBottom: '16px' }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Status Selection */}\r\n                    <div className=\"p-2\">\r\n                        <label>Status</label>\r\n                        <select\r\n                            className=\"cus-inpt\"\r\n                            value={inputValue.Status}\r\n                            onChange={e => setInputValue({\r\n                                ...inputValue,\r\n                                Status: e.target.value\r\n                            })}\r\n                            required\r\n                            style={{ width: '100%', padding: '8px', marginBottom: '16px' }}>\r\n                            <option value=\"\" disabled>Select Status</option>\r\n                            <option value=\"1\">Active</option>\r\n                            <option value=\"0\">Inactive</option>\r\n                            <option value=\"2\">Pending</option>\r\n                            <option value=\"3\">Completed</option>\r\n                        </select>\r\n                    </div>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose} className=\"btn btn-light rounded-5 px-3\">\r\n                        Cancel\r\n                    </Button>\r\n                    <Button type=\"submit\" variant=\"contained\" className=\"btn btn-primary rounded-5 px-3\">\r\n                        {existingTaskType && existingTaskType.Task_Type_Id ? \"Update\" : \"Save\"}\r\n                    </Button>\r\n                </DialogActions>\r\n            </form>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default AddEditTaskType;"],"names":["_ref","open","onClose","existingTaskType","onCreate","onUpdate","inputValue","setInputValue","useState","Task_Type","Task_Type_Id","Project_Id","ProjectName","Day_Duration","Status","projects","setProjects","loading","setLoading","useEffect","async","_JSON$parse","companyId","JSON","parse","localStorage","getItem","Company_id","data","fetchLink","address","concat","success","console","error","message","fetchProjects","length","_existingTaskType$Pro2","_existingTaskType$Pro3","_existingTaskType$Day","_existingTaskType$Sta","project","find","proj","_existingTaskType$Pro","toString","ProjectId","formattedData","_objectSpread","Project_Name","handleClose","isProjectDisabled","_jsxs","Dialog","fullWidth","maxWidth","children","_jsx","DialogTitle","className","onSubmit","e","preventDefault","trim","toast","parseInt","log","submitData","Created_Date","Date","toISOString","split","Est_StartDate","Est_EndDate","now","DialogContent","value","onChange","selectedProjectId","target","selectedProject","prev","required","disabled","style","width","padding","marginBottom","map","type","placeholder","min","DialogActions","Button","onClick","variant"],"sourceRoot":""}