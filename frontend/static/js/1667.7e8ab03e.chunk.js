"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1667],{63406:(e,a,s)=>{s.d(a,{zU:()=>r,ex:()=>n,MR:()=>d,Ap:()=>o,FX:()=>i});var t=s(89379);const l=s.p+"static/media/smt.aa4d4f940bbebff07a57.png",o={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},d={menu:(e,a)=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,a)=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:a.isSelected?"#2684FF":a.isFocused?"#E2ECF9":"white",color:a.isSelected?"white":"#333",padding:"10px 12px"})},r=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],n=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:l,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],i=[{name:"PURCHASE_ORDER",alias:"Purchase Order",moduleCode:"PO"},{name:"PURCHASE_INVOICE",alias:"Purchase Invoice",moduleCode:"PI"},{name:"SALE_ORDER",alias:"Sale Order",moduleCode:"SO"},{name:"SALE_INVOICE",alias:"Sale Invoice",moduleCode:"SI"},{name:"JOURNAL",alias:"Journal",moduleCode:"JO"},{name:"STOCK_JOURNAL",alias:"Stock Journal",moduleCode:"SJ"},{name:"PAYMENT",alias:"Payment",moduleCode:"PAY"},{name:"RECEIPT",alias:"Receipt",moduleCode:"REC"},{name:"CONTRA",alias:"Contra",moduleCode:"CON"}]},79963:(e,a,s)=>{s.r(a),s.d(a,{default:()=>j});var t=s(89379),l=s(65043),o=s(83462),d=s(26600),r=s(35316),n=s(29347),i=s(11906),c=(s(92342),s(27285)),m=s(34625),p=s(3805),h=s(7807),u=s(83806),v=s(20656),g=s(63406),x=s(65074),N=s(70579);const j=()=>{var e,a,s,j,b;const _=localStorage.getItem("user"),k=JSON.parse(_),T={Emp_Id:"",Project_Id:0,Task_Id:0,Process_Id:0,from:(new Date).toISOString().split("T")[0],to:(new Date).toISOString().split("T")[0],EmpGet:"All Employee",ProjectGet:"All Project",TaskGet:"All Task",ProcessGet:"All Process"},[f,y]=(0,l.useState)([]),[D,S]=(0,l.useState)([]),[E,A]=(0,l.useState)([]),[C,P]=(0,l.useState)({}),[I,w]=(0,l.useState)({}),[M,R]=(0,l.useState)(""),[W,O]=(0,l.useState)(!1),[G,F]=(0,l.useState)(!1),[L,B]=(0,l.useState)(T),[z,J]=(0,l.useState)([]),[U,V]=(0,l.useState)([]),[H,Z]=(0,l.useState)([]),[K,Q]=(0,l.useState)("task"),[Y,X]=(0,l.useState)([]),q=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e)return a;try{const s=new Date(e);return isNaN(s.getTime())?a:s}catch(s){return a}},$=e=>{try{return q(e).toISOString().split("T")[0]}catch(a){return(new Date).toISOString().split("T")[0]}},ee=e=>{const a=((e,a)=>{const s=[],t=q(e),l=q(a);if(isNaN(l.getTime()))return[$(t)];const o=new Date(t);for(;o<=l;)s.push($(new Date(o))),o.setDate(o.getDate()+1);return s})(e.Est_Start_Dt||e.Task_Assign_dt,e.Est_End_Dt||e.Est_Start_Dt||e.Task_Assign_dt);return a.filter(e=>0!==new Date(e).getDay()).map(a=>(0,t.A)((0,t.A)({},e),{},{workType:"assigned",Work_Dt:a,Task_Name:e.Task_Name,EmployeeName:e.EmployeeName,Emp_Id:e.Emp_Id||e.Assigned_Emp_Id,Process_Name:e.Process_Name||"Not Specified",Project_Name:e.Project_Name,Start_Time:e.Sch_Time||"08:00:00",End_Time:e.EN_Time||"17:00:00",Tot_Minutes:e.Tot_Minutes||60,Work_Done:e.Task_Desc||"Assigned Task",WorkStatus:"Assigned",AN_No:e.AN_No,Sch_Period:e.Sch_Period,Est_Start_Dt:e.Est_Start_Dt,Est_End_Dt:e.Est_End_Dt,isDateRangeEvent:!0,originalStartDate:e.Est_Start_Dt,originalEndDate:e.Est_End_Dt}))};(0,l.useEffect)(()=>{let e="taskManagement/task/work?Emp_Id=".concat(L.Emp_Id,"&Project_Id=").concat(L.Project_Id,"&from=").concat(L.from,"&to=").concat(L.to,"&Task_Id=").concat(L.Task_Id);"process"===K&&(e+="&Process_Id=".concat(L.Process_Id)),(0,x.z)({address:e}).then(e=>{if(e.success){console.log("Completed work raw data:",e.data);const a=e.data.map(e=>{return a=e,(0,t.A)((0,t.A)({},a),{},{workType:"completed",Work_Dt:a.Work_Dt,Task_Name:a.Task_Name,EmployeeName:a.EmployeeName,Emp_Id:a.Emp_Id,Process_Name:a.Process_Name,Project_Name:a.Project_Name,Start_Time:a.Start_Time,End_Time:a.End_Time,Tot_Minutes:a.Tot_Minutes,Work_Done:a.Work_Done,WorkStatus:a.WorkStatus,Work_Param:a.Work_Param||[],isDateRangeEvent:!1});var a});y(a)}}).catch(e=>console.error(e))},[L,K]),(0,l.useEffect)(()=>{let e="taskManagement/tasks/assignedTask?Emp_Id=".concat(L.Emp_Id,"&startDate=").concat(L.from,"&endDate=").concat(L.to);"process"===K&&(e+="&Process_Id=".concat(L.Process_Id)),(0,x.z)({address:e}).then(e=>{if(e.success){console.log("Assigned tasks raw data:",e.data);const a=e.data.flatMap(e=>ee(e));X(a)}}).catch(e=>console.error(e))},[L,K]),(0,l.useEffect)(()=>{if(f.length>0||Y.length>0){const e=[...f,...Y];console.log("Combined data for grouping:",e);const a=ae(e);S(a)}},[f,Y]);const ae=e=>{const a={};return e.forEach(e=>{const s=$(e.Work_Dt);if(a[s]||(a[s]={date:s,processes:[],totalMinutes:0,totalTasks:0,employees:new Set,employeeDetails:{},processCount:{},assignedTasks:0,completedTasks:0,assignedMinutes:0,completedMinutes:0}),e.Process_Name&&(a[s].processCount[e.Process_Name]||(a[s].processCount[e.Process_Name]=0),a[s].processCount[e.Process_Name]++),a[s].processes.push(e),"completed"===e.workType)a[s].completedTasks++,a[s].completedMinutes+=parseInt(e.Tot_Minutes)||0,a[s].totalMinutes+=parseInt(e.Tot_Minutes)||0;else{a[s].assignedTasks++;const t=parseInt(e.Tot_Minutes)||60;a[s].assignedMinutes+=t,a[s].totalMinutes+=t}if(a[s].totalTasks++,e.EmployeeName&&e.Emp_Id){a[s].employees.add(e.EmployeeName);const t=e.Emp_Id.toString();a[s].employeeDetails[t]||(a[s].employeeDetails[t]={id:t,name:e.EmployeeName,tasks:[],totalMinutes:0,assignedTasks:0,completedTasks:0}),a[s].employeeDetails[t].tasks.push(e),"completed"===e.workType?(a[s].employeeDetails[t].totalMinutes+=parseInt(e.Tot_Minutes)||0,a[s].employeeDetails[t].completedTasks++):(a[s].employeeDetails[t].assignedTasks++,a[s].employeeDetails[t].totalMinutes+=parseInt(e.Tot_Minutes)||60)}}),Object.values(a).map(e=>(0,t.A)((0,t.A)({},e),{},{employeeCount:e.employees.size,topProcesses:Object.entries(e.processCount).sort((e,a)=>a[1]-e[1]).slice(0,3).map(e=>{let[a,s]=e;return"".concat(a," (").concat(s,")")}).join(", "),employeesList:Object.values(e.employeeDetails)}))},se=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"08:00:00";if(!e||"string"!==typeof e)return a;const s=e.split(":");if(s.length>=2){const e=s[0].padStart(2,"0"),a=s[1].padStart(2,"0");return"".concat(e,":").concat(a,":00")}return a},te=e=>{if(!e)return"N/A";try{const a=e.split(":"),s=parseInt(a[0]),t=parseInt(a[1]);if(isNaN(s)||isNaN(t))return"N/A";let l=s%12;l=l||12;const o=s<12?"AM":"PM",d=t<10?"0"+t:t;return"".concat(l<10?"0"+l:l,":").concat(d," ").concat(o)}catch(a){return"N/A"}},le=()=>I&&I.processes?M?I.processes.filter(e=>e.Emp_Id&&e.Emp_Id.toString()===M.toString()):I.processes:[];function oe(e){const a=Math.floor(e/60),s=e%60;return a>0?"".concat(a,"h ").concat(s,"m"):"".concat(s,"m")}(0,l.useEffect)(()=>{(0,x.z)({address:"taskManagement/project/dropDown?Company_id=".concat(null===k||void 0===k?void 0:k.Company_id)}).then(e=>{e.success&&J(e.data)}).catch(e=>console.error(e)),(0,x.z)({address:"masters/users/employee/dropDown?BranchId=".concat(null===k||void 0===k?void 0:k.BranchId,"&Company_id=").concat(null===k||void 0===k?void 0:k.Company_id)}).then(e=>{var a;e.success&&V(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.sort((e,a)=>String(null===e||void 0===e?void 0:e.Name).localeCompare(null===a||void 0===a?void 0:a.Name)))}).catch(e=>console.error(e)),(0,x.z)({address:"taskManagement/task/assignEmployee/task/dropDown"}).then(e=>{var a;e.success&&Z(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.sort((e,a)=>String(null===e||void 0===e?void 0:e.Task_Name).localeCompare(null===a||void 0===a?void 0:a.Task_Name)))}).catch(e=>console.error(e)),(0,x.z)({address:"taskManagement/processMaster/dropDown"}).then(e=>{e.success&&A(e.data)}).catch(e=>console.error(e))},[null===k||void 0===k?void 0:k.BranchId,null===k||void 0===k?void 0:k.Company_id]);le().reduce((e,a)=>e+(parseInt(a.Tot_Minutes)||("assigned"===a.workType?60:0)),0);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"row mb-3",children:(0,N.jsx)("div",{className:"col-12 d-flex justify-content-center",children:(0,N.jsxs)("div",{className:"toggle-container bg-light rounded-pill p-1 d-flex",children:[(0,N.jsx)("button",{className:"btn rounded-pill px-4 ".concat("task"===K?"btn-primary":"btn-light"),onClick:()=>Q("task"),children:"Task View"}),(0,N.jsx)("button",{className:"btn rounded-pill px-4 ".concat("process"===K?"btn-primary":"btn-light"),onClick:()=>Q("process"),children:"Process View"})]})})}),(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,N.jsx)(v.Ay,{value:{value:null===L||void 0===L?void 0:L.Emp_Id,label:null===L||void 0===L?void 0:L.EmpGet},onChange:e=>B((0,t.A)((0,t.A)({},L),{},{Emp_Id:e.value,EmpGet:e.label})),options:[{value:"",label:"All Employee"},...U.map(e=>({value:e.UserId,label:e.Name}))],styles:g.MR,isSearchable:!0,placeholder:"Employee Name"})}),(0,N.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,N.jsx)(v.Ay,{value:{value:null===L||void 0===L?void 0:L.Project_Id,label:null===L||void 0===L?void 0:L.ProjectGet},onChange:e=>B((0,t.A)((0,t.A)({},L),{},{Project_Id:e.value,ProjectGet:e.label})),options:[...z.map(e=>({value:e.Project_Id,label:0===Number(e.Project_Id)?"All Project":e.Project_Name}))],styles:g.MR,isSearchable:!0,placeholder:"Project Title"})}),"task"===K&&(0,N.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,N.jsx)(v.Ay,{value:{value:null===L||void 0===L?void 0:L.Task_Id,label:null===L||void 0===L?void 0:L.TaskGet},onChange:e=>B((0,t.A)((0,t.A)({},L),{},{Task_Id:e.value,TaskGet:e.label})),options:[{value:0,label:"All Task"},...H.map(e=>({value:e.Task_Id,label:e.Task_Name}))],styles:g.MR,isSearchable:!0,placeholder:"Select Task"})}),"process"===K&&(0,N.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,N.jsx)(v.Ay,{value:{value:null===L||void 0===L?void 0:L.Process_Id,label:null===L||void 0===L?void 0:L.ProcessGet},onChange:e=>B((0,t.A)((0,t.A)({},L),{},{Process_Id:e.value,ProcessGet:e.label})),options:[{value:0,label:"All Process"},...E.map(e=>({value:e.Id,label:e.Process_Name}))],styles:g.MR,isSearchable:!0,placeholder:"Select Process"})})]}),(0,N.jsxs)("div",{className:"px-3 py-2 calendar",children:[(0,N.jsx)("h4",{className:"mb-3 text-center text-primary",children:"task"===K?"Task Calendar - Parallel View (Green: Assigned, Red: Completed)":"Process Timeline (Green: More Assigned, Red: More Completed)"}),(0,N.jsx)(c.A,{plugins:[p.A,u.A,m.A,h.Ay],initialView:"dayGridMonth",initialDate:new Date,events:"task"===K?(()=>{const e=[],a={};return f.forEach(e=>{const s=$(e.Work_Dt);a[s]||(a[s]={date:s,assigned:[],completed:[]}),a[s].completed.push(e)}),Y.forEach(e=>{const s=$(e.Work_Dt);a[s]||(a[s]={date:s,assigned:[],completed:[]}),a[s].assigned.push(e)}),Object.values(a).forEach(a=>{const{date:s,assigned:t,completed:l}=a;if(t.length>0){const a=t.reduce((e,a)=>e+(parseInt(a.Tot_Minutes)||60),0);e.push({start:s,allDay:!0,display:"background",backgroundColor:"#28a745",borderColor:"#28a745",textColor:"white",extendedProps:{type:"assigned-summary",date:s,tasks:t,count:t.length,totalMinutes:a},classNames:["assigned-column"]})}if(l.length>0){const a=l.reduce((e,a)=>e+(parseInt(a.Tot_Minutes)||0),0);e.push({start:s,allDay:!0,display:"background",backgroundColor:"#dc3545",borderColor:"#dc3545",textColor:"white",extendedProps:{type:"completed-summary",date:s,tasks:l,count:l.length,totalMinutes:a},classNames:["completed-column"]})}t.forEach(a=>{const s=$(a.Work_Dt),t=se(a.Start_Time,"08:00:00"),l=se(a.End_Time,"17:00:00");e.push({title:"\ud83d\udccb ".concat(a.Task_Name),start:"".concat(s,"T").concat(t),end:"".concat(s,"T").concat(l),objectData:a,backgroundColor:"#28a745",borderColor:"#28a745",textColor:"white",extendedProps:{objectData:a,isDateRangeEvent:a.isDateRangeEvent,type:"assigned-detail"}})}),l.forEach(a=>{const s=$(a.Work_Dt),t=se(a.Start_Time,"08:00:00"),l=se(a.End_Time,"17:00:00");e.push({title:"\u2705 ".concat(a.Task_Name),start:"".concat(s,"T").concat(t),end:"".concat(s,"T").concat(l),objectData:a,backgroundColor:"#dc3545",borderColor:"#dc3545",textColor:"white",extendedProps:{objectData:a,isDateRangeEvent:a.isDateRangeEvent,type:"completed-detail"}})})}),e})():D.map(e=>{const a=$(e.date);return{title:"".concat(e.assignedTasks,"A/").concat(e.completedTasks,"C | ").concat(e.totalMinutes,"m | ").concat(e.employeeCount," emp"),start:a,allDay:!0,objectData:e,backgroundColor:e.assignedTasks>e.completedTasks?"#28a745":"#dc3545",borderColor:e.assignedTasks>e.completedTasks?"#28a745":"#dc3545"}}),headerToolbar:{left:"prev next",center:"title",right:"timeGridDay, timeGridWeek, dayGridMonth, listMonth"},slotDuration:"00:20:00",slotMinTime:"08:00:00",slotMaxTime:"22:00:00",showNonCurrentDates:!1,editable:!1,selectMirror:!0,eventClick:e=>{if("task"===K){const a=e.event.extendedProps;if("assigned-summary"===a.type||"completed-summary"===a.type){const e=a.date,s=[...f,...Y].filter(a=>$(a.Work_Dt)===e),t={date:e,processes:s,assignedTasks:"assigned-summary"===a.type?a.tasks:[],completedTasks:"completed-summary"===a.type?a.tasks:[],totalTasks:s.length,employeeCount:new Set(s.map(e=>e.Emp_Id)).size};w(t),R(""),F(!0)}else{const e=a.objectData;P(e),O(!0)}}else{const a=e.event.extendedProps.objectData;w(a),R(""),F(!0)}},dateClick:e=>{if("process"===K){const a=e.dateStr,s=D.find(e=>e.date===a);s&&(w(s),R(""),F(!0))}},datesSet:e=>{B(a=>(0,t.A)((0,t.A)({},a),{},{from:e.startStr.split("T")[0],to:e.endStr.split("T")[0]}))},height:1200,eventDisplay:"block",eventOrder:"start,-duration,allDay"})]}),(0,N.jsxs)(o.A,{open:W,maxWidth:"sm",fullWidth:!0,onClose:()=>{O(!1),P({})},children:[(0,N.jsxs)(d.A,{className:"fa-18",children:["Task Details - ","assigned"===(null===C||void 0===C?void 0:C.workType)?"Assigned Task":"Completed Work",(null===C||void 0===C?void 0:C.isDateRangeEvent)&&" (Date Range)"]}),(0,N.jsx)(r.A,{className:"pb-0",children:(0,N.jsx)("div",{className:"table-responsive pb-0",children:(0,N.jsx)("table",{className:"table mb-0",children:(0,N.jsxs)("tbody",{children:[(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Work Type"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(0,N.jsxs)("span",{className:"badge ".concat("assigned"===(null===C||void 0===C?void 0:C.workType)?"bg-success":"bg-danger"),children:["assigned"===(null===C||void 0===C?void 0:C.workType)?"Assigned":"Completed",(null===C||void 0===C?void 0:C.isDateRangeEvent)&&" (Date Range)"]})})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Employee Name"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:null===C||void 0===C?void 0:C.EmployeeName})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Task"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:null===C||void 0===C?void 0:C.Task_Name})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Process Name"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:null===C||void 0===C?void 0:C.Process_Name})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Project"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:null===C||void 0===C?void 0:C.Project_Name})]}),"assigned"===(null===C||void 0===C?void 0:C.workType)?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Display Date"}),(0,N.jsxs)("td",{className:"border-1 fa-14",children:[(null===C||void 0===C?void 0:C.Work_Dt)&&new Date(null===C||void 0===C?void 0:C.Work_Dt).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),(null===C||void 0===C?void 0:C.isDateRangeEvent)&&" (Part of Date Range)"]})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Date Range"}),(0,N.jsxs)("td",{className:"border-1 fa-14",children:[(null===C||void 0===C?void 0:C.originalStartDate)&&new Date(null===C||void 0===C?void 0:C.originalStartDate).toLocaleDateString("en-IN")," to ",(null===C||void 0===C?void 0:C.originalEndDate)&&new Date(null===C||void 0===C?void 0:C.originalEndDate).toLocaleDateString("en-IN")]})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Scheduled Time"}),(0,N.jsxs)("td",{className:"border-1 fa-14",children:[(null===C||void 0===C?void 0:C.Sch_Time)&&te(null===C||void 0===C?void 0:C.Sch_Time)," - ",(null===C||void 0===C?void 0:C.EN_Time)&&te(null===C||void 0===C?void 0:C.EN_Time)]})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Task Description"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(null===C||void 0===C?void 0:C.Task_Desc)||"N/A"})]})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Date"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(null===C||void 0===C?void 0:C.Work_Dt)&&new Date(null===C||void 0===C?void 0:C.Work_Dt).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Start Time"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(null===C||void 0===C?void 0:C.Start_Time)&&te(null===C||void 0===C?void 0:C.Start_Time)})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"End Time"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(null===C||void 0===C?void 0:C.End_Time)&&te(null===C||void 0===C?void 0:C.End_Time)})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Work Done"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(null===C||void 0===C?void 0:C.Work_Done)||"N/A"})]})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Duration"}),(0,N.jsxs)("td",{className:"border-1 fa-14",children:[(null===C||void 0===C?void 0:C.Tot_Minutes)||("assigned"===(null===C||void 0===C?void 0:C.workType)?"60 (Estimated)":"0")," Minutes"]})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Status"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(null===C||void 0===C?void 0:C.WorkStatus)||("assigned"===(null===C||void 0===C?void 0:C.workType)?"Assigned":"Completed")})]}),"assigned"===(null===C||void 0===C?void 0:C.workType)&&(null===C||void 0===C?void 0:C.AN_No)&&(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"AN Number"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:null===C||void 0===C?void 0:C.AN_No})]}),"completed"===(null===C||void 0===C?void 0:C.workType)&&(null===C||void 0===C||null===(e=C.Work_Param)||void 0===e?void 0:e.length)>0&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:2,className:"border-1 fa-14 text-center text-uppercase fw-bold",children:"Work Parameters"})}),null===C||void 0===C||null===(a=C.Work_Param)||void 0===a?void 0:a.map((e,a)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:null===e||void 0===e?void 0:e.Paramet_Name}),(0,N.jsx)("td",{className:"border-1 fa-14",children:null===e||void 0===e?void 0:e.Current_Value})]},a))]})]})})})}),(0,N.jsx)(n.A,{children:(0,N.jsx)(i.A,{onClick:()=>{O(!1),P({})},children:"close"})})]}),(0,N.jsxs)(o.A,{open:G,maxWidth:"lg",fullWidth:!0,onClose:()=>{F(!1),w({}),R("")},children:[(0,N.jsxs)(d.A,{className:"fa-18",children:["Daily Summary - ",(null===I||void 0===I?void 0:I.date)&&new Date(I.date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})]}),(0,N.jsxs)(r.A,{className:"pb-0",children:[(0,N.jsx)("div",{className:"row mb-3",children:(0,N.jsxs)("div",{className:"col-md-6",children:[(0,N.jsx)("label",{className:"form-label fw-bold",children:"Select Employee:"}),(0,N.jsx)(v.Ay,{value:M?{value:M,label:(null===(s=I.employeeDetails)||void 0===s||null===(j=s[M])||void 0===j?void 0:j.name)||"Unknown Employee"}:{value:"",label:"All Employees"},onChange:e=>R(e.value),options:[{value:"",label:"All Employees"},...(null===(b=I.employeesList)||void 0===b?void 0:b.map(e=>({value:e.id,label:"".concat(e.name," (").concat(e.assignedTasks||0,"A/").concat(e.completedTasks||0,"C)")})))||[]],styles:g.MR,isSearchable:!0,placeholder:"Select Employee"})]})}),(0,N.jsxs)("div",{className:"row mb-3",children:[(0,N.jsx)("div",{className:"col-md-4",children:(0,N.jsx)("div",{className:"card bg-light",children:(0,N.jsxs)("div",{className:"card-body text-center p-2",children:[(0,N.jsx)("h6",{className:"card-title mb-1",children:"Total Tasks"}),(0,N.jsx)("p",{className:"card-text h4 text-primary mb-0",children:le().length})]})})}),(0,N.jsx)("div",{className:"col-md-4",children:(0,N.jsx)("div",{className:"card bg-light",children:(0,N.jsxs)("div",{className:"card-body text-center p-2",children:[(0,N.jsx)("h6",{className:"card-title mb-1",children:"Assigned Tasks"}),(0,N.jsx)("p",{className:"card-text h4 text-success mb-0",children:le().filter(e=>"assigned"===e.workType).length})]})})}),(0,N.jsx)("div",{className:"col-md-4",children:(0,N.jsx)("div",{className:"card bg-light",children:(0,N.jsxs)("div",{className:"card-body text-center p-2",children:[(0,N.jsx)("h6",{className:"card-title mb-1",children:"Completed Tasks"}),(0,N.jsx)("p",{className:"card-text h4 text-danger mb-0",children:le().filter(e=>"completed"===e.workType).length})]})})})]}),(0,N.jsxs)("div",{className:"row mb-3",children:[(0,N.jsx)("div",{className:"col-md-6",children:(0,N.jsx)("div",{className:"card bg-success bg-opacity-10",children:(0,N.jsxs)("div",{className:"card-body text-center p-2",children:[(0,N.jsx)("h6",{className:"card-title mb-1 text-success",children:"Assigned Duration"}),(0,N.jsx)("p",{className:"card-text h4 text-success mb-0",children:oe(le().filter(e=>"assigned"===e.workType).reduce((e,a)=>e+(parseInt(a.Tot_Minutes)||60),0))}),(0,N.jsxs)("small",{className:"text-muted",children:[le().filter(e=>"assigned"===e.workType).length," tasks"]})]})})}),(0,N.jsx)("div",{className:"col-md-6",children:(0,N.jsx)("div",{className:"card bg-danger bg-opacity-10",children:(0,N.jsxs)("div",{className:"card-body text-center p-2",children:[(0,N.jsx)("h6",{className:"card-title mb-1 text-danger",children:"Completed Duration"}),(0,N.jsx)("p",{className:"card-text h4 text-danger mb-0",children:oe(le().filter(e=>"completed"===e.workType).reduce((e,a)=>e+(parseInt(a.Tot_Minutes)||0),0))}),(0,N.jsxs)("small",{className:"text-muted",children:[le().filter(e=>"completed"===e.workType).length," tasks"]})]})})})]}),(0,N.jsx)("div",{className:"table-responsive pb-0",children:(0,N.jsxs)("table",{className:"table table-bordered mb-0",children:[(0,N.jsx)("thead",{className:"bg-light",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"fa-14",children:"#"}),(0,N.jsx)("th",{className:"fa-14",children:"Type"}),(0,N.jsx)("th",{className:"fa-14",children:"Employee"}),(0,N.jsx)("th",{className:"fa-14",children:"Task"}),(0,N.jsx)("th",{className:"fa-14",children:"Process"}),(0,N.jsx)("th",{className:"fa-14",children:"Project"}),(0,N.jsx)("th",{className:"fa-14",children:"Time"}),(0,N.jsx)("th",{className:"fa-14",children:"Duration"}),(0,N.jsx)("th",{className:"fa-14",children:"Description"})]})}),(0,N.jsx)("tbody",{children:0===le().length?(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:"9",className:"text-center fa-14 py-3",children:"No tasks found for the selected criteria"})}):le().map((e,a)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"fa-13",children:a+1}),(0,N.jsx)("td",{className:"fa-13",children:(0,N.jsxs)("span",{className:"badge ".concat("assigned"===e.workType?"bg-success":"bg-danger"),children:["assigned"===e.workType?"Assigned":"Completed",e.isDateRangeEvent&&" \ud83d\udcc5"]})}),(0,N.jsx)("td",{className:"fa-13",children:e.EmployeeName}),(0,N.jsx)("td",{className:"fa-13",children:e.Task_Name}),(0,N.jsx)("td",{className:"fa-13",children:e.Process_Name}),(0,N.jsx)("td",{className:"fa-13",children:e.Project_Name}),(0,N.jsx)("td",{className:"fa-13",children:"completed"===e.workType?(0,N.jsxs)(N.Fragment,{children:[e.Start_Time&&te(e.Start_Time)," - ",e.End_Time&&te(e.End_Time)]}):(0,N.jsxs)(N.Fragment,{children:[e.Sch_Time&&te(e.Sch_Time)," - ",e.EN_Time&&te(e.EN_Time),e.isDateRangeEvent&&" (Range)"]})}),(0,N.jsxs)("td",{className:"fa-13",children:[e.Tot_Minutes||("assigned"===e.workType?"60":"0")," mins"]}),(0,N.jsxs)("td",{className:"fa-13",children:["completed"===e.workType?e.Work_Done:e.Task_Desc,e.isDateRangeEvent&&" (Date Range: ".concat(e.originalStartDate&&new Date(e.originalStartDate).toLocaleDateString("en-IN")," to ").concat(e.originalEndDate&&new Date(e.originalEndDate).toLocaleDateString("en-IN"),")")]})]},a))})]})})]}),(0,N.jsx)(n.A,{children:(0,N.jsx)(i.A,{onClick:()=>{F(!1),w({}),R("")},children:"close"})})]})]})}}}]);
//# sourceMappingURL=1667.7e8ab03e.chunk.js.map