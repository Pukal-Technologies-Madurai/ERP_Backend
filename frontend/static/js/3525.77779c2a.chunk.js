"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3525],{24651:(e,l,s)=>{s.d(l,{A:()=>t});var a=s(89379),d=s(65043),i=s(97707),n=s(14844),o=s(70579);const r=function(){var e;let l=arguments.length>1?arguments[1]:void 0;return null!==(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(e=>(0,i.id)(e.Product_Id,l)))&&void 0!==e?e:{}},t=e=>{let{invoiceProducts:l=[],invoiceExpences:s=[],isNotTaxableBill:t,isInclusive:c,IS_IGST:u,products:v=[],invoiceInfo:m={},setInvoiceInfo:h}=e;const x=(0,d.useMemo)(()=>(0,i.$r)(s).reduce((e,l)=>(0,i.Lr)(e,null===l||void 0===l?void 0:l.Expence_Value),0),[s]),p=(0,d.useMemo)(()=>{const e=l.reduce((e,l)=>{const s=(0,i.e3)(null===l||void 0===l?void 0:l.Amount);if(t)return(0,i.Lr)(e,s);const a=r(v,l.Item_Id),d=u?a.Igst_P:a.Gst_P;return c?(0,i.Lr)(e,(0,n.v)(s,d,"remove").with_tax):(0,i.Lr)(e,(0,n.v)(s,d,"add").with_tax)},0);return(0,i.Lr)(e,x)},[l,t,v,u,c,x]),j=(0,d.useMemo)(()=>{if(!l||0===l.length)return{};let e=0,s=0;l.forEach(l=>{const a=(0,i.e3)((null===l||void 0===l?void 0:l.Amount)||0);if(t)return void(e=(0,i.Lr)(e,a));const d=r(v,l.Item_Id),o=(0,i.id)(u,1)?d.Igst_P:d.Gst_P,m=(0,n.v)(a,o,c?"remove":"add");e=(0,i.Lr)(e,parseFloat(m.without_tax)),s=(0,i.Lr)(s,parseFloat(m.tax_amount))});const a=(0,i.Lr)(e,s),d=(0,i.Lr)(a,x),o=Math.round(d),m=(0,i.e3)(o-d),h=(0,i.id)(u,1)?0:(0,i.e3)(s/2),p=(0,i.id)(u,1)?0:(0,i.e3)(s/2),j=(0,i.id)(u,1)?(0,i.e3)(s):0;return{totalTaxable:(0,i.e3)(e),totalTax:(0,i.e3)(s),cgst:h,sgst:p,igst:j,roundOff:m,invoiceTotal:o}},[l,v,u,t,c,x]);return(0,d.useMemo)(()=>{void 0!==j.roundOff&&j.roundOff!==m.Round_off&&h(e=>(0,a.A)((0,a.A)({},e),{},{Round_off:j.roundOff}))},[j.roundOff]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("table",{className:"table",children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsxs)("td",{className:"border p-2",rowSpan:u?5:6,children:["Total in words: ",(0,i.GF)(parseInt(p))]}),(0,o.jsx)("td",{className:"border p-2",children:"Total Taxable Amount"}),(0,o.jsx)("td",{className:"border p-2",children:j.totalTaxable})]}),u?(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"border p-2",children:"IGST"}),(0,o.jsx)("td",{className:"border p-2",children:j.igst})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"border p-2",children:"CGST"}),(0,o.jsx)("td",{className:"border p-2",children:j.cgst})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"border p-2",children:"SGST"}),(0,o.jsx)("td",{className:"border p-2",children:j.sgst})]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"border p-2",children:"Total Expences"}),(0,o.jsx)("td",{className:"border p-2",children:(0,i.e3)(x)})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"border p-2",children:"Round Off"}),(0,o.jsx)("td",{className:"border p-0",children:(0,o.jsx)("input",{value:m.Round_off||j.roundOff||0,className:"cus-inpt p-2 m-0 border-0",onInput:i.rV,onChange:e=>h(l=>(0,a.A)((0,a.A)({},l),{},{Round_off:parseFloat(e.target.value)||0}))})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"border p-2",children:"Total"}),(0,o.jsx)("td",{className:"border p-2",children:(0,i.jG)(Math.round(p))})]})]})})})}},33438:(e,l,s)=>{s.d(l,{A:()=>i});var a=s(59662),d=s(70579);const i=(0,a.A)((0,d.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},35786:(e,l,s)=>{s.d(l,{A:()=>h});var a=s(89379),d=s(12110),i=s(11906),n=s(17392),o=(s(48471),s(97707)),r=s(97280),t=(s(65043),s(63406)),c=s(51387),u=s(20656),v=s(14844),m=s(70579);const h=e=>{let{invoiceExpences:l=[],setInvoiceExpences:s,expenceMaster:h=[],IS_IGST:x,taxType:p}=e;return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(d.A,{children:[(0,m.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-wrap px-3 py-2",children:[(0,m.jsx)("h5",{className:"m-0",children:"Expenses"}),(0,m.jsx)(i.A,{variant:"outlined",type:"button",onClick:()=>{s(e=>[...e,(0,a.A)((0,a.A)({},r.ju),{},{Sno:e.length})])},children:"Add"})]}),(0,m.jsx)("div",{className:"table-responsive",children:(0,m.jsxs)("table",{className:"table table-bordered m-0",children:[(0,m.jsx)("thead",{className:"table-light",children:(0,m.jsx)("tr",{children:["S.No","Expense","Expense Value","Action"].map((e,l)=>(0,m.jsx)("th",{className:"fa-13 bg-light",children:e},l))})}),(0,m.jsxs)("tbody",{style:{fontSize:"13px"},children:[l.map((e,d)=>{var i;const r=(null===(i=h.find(l=>(0,o.id)(l.Id,null===e||void 0===e?void 0:e.Expense_Id)))||void 0===i?void 0:i.Expence_Name)||"";return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:d+1}),(0,m.jsx)("td",{className:"p-0 vctr",style:{minWidth:"180px"},children:(0,m.jsx)(u.Ay,{value:{value:null===e||void 0===e?void 0:e.Expense_Id,label:r},onChange:e=>((e,l)=>{const d=h.find(e=>(0,o.id)(e.Id,l.value))||{};s(l=>l.map((l,s)=>s!==e?l:(0,a.A)((0,a.A)({},l),{},{Expense_Id:d.Id,Expence_Value:0})))})(d,e),options:h.filter(s=>!!(0,o.id)(s.Id,null===e||void 0===e?void 0:e.Expense_Id)||!l.some((e,l)=>l!==d&&(0,o.id)(e.Expense_Id,s.Id))).map(e=>({value:e.Id,label:e.Expence_Name})),styles:t.MR,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Expense",filterOption:o.GI})}),(0,m.jsx)("td",{className:"p-0 vctr",children:(0,m.jsx)("input",{onInput:o.rV,className:"cus-inpt p-2 border-0",value:e.Expence_Value||"",disabled:!(0,o.IQ)(e.Expense_Id),onChange:e=>{((e,l,d)=>{s(s=>s.map((s,i)=>{if(i!==e)return s;const n=(0,a.A)((0,a.A)({},s),{},{[l]:d});if("Expence_Value"===l){const e=s.Cgst?(0,o.Ro)(s.Cgst):0,l=s.Sgst?(0,o.Ro)(s.Sgst):0,a=s.Igst?(0,o.Ro)(s.Igst):0,i=(0,o.Ro)(d),r=x?a:(0,o.Lr)(e,l),t=(0,v.v)(i,r,p);n.Cgst_Amo=e>0&&!x?t.cgst_amount:0,n.Sgst_Amo=l>0&&!x?t.sgst_amount:0,n.Igst_Amo=a>0&&x?t.igst_amount:0}if("Igst"===l){const e=x?(0,o.Ro)(d):0,l=x?0:(0,o.SX)((0,o.Ro)(d),2),a=x?0:(0,o.SX)((0,o.Ro)(d),2),i=(0,o.Ro)(s.Expence_Value),r=x?e:(0,o.Lr)(l,a),t=(0,v.v)(i,r,p);n.Cgst=l,n.Sgst=a,n.Cgst_Amo=l>0?t.cgst_amount:0,n.Sgst_Amo=a>0?t.sgst_amount:0,n.Igst_Amo=e>0?t.igst_amount:0}return n}))})(d,"Expence_Value",e.target.value)}})}),(0,m.jsx)("td",{className:"p-0 vctr  text-center ",children:(0,m.jsx)(n.A,{onClick:()=>(e=>{s(l=>l.filter((l,s)=>s!==e))})(d),size:"small",children:(0,m.jsx)(c.A,{color:"error",fontSize:"small"})})})]},d)}),0===l.length&&(0,m.jsx)("tr",{children:(0,m.jsx)("td",{className:"text-center",colSpan:6,children:"No rows"})})]})]})})]})})}},38641:(e,l,s)=>{s.d(l,{A:()=>u});var a=s(89379),d=s(20656),i=s(63406),n=s(97707),o=s(14792),r=s(97280),t=s(65043),c=s(70579);const u=e=>{var l;let{invoiceInfo:s={},setInvoiceInfo:u,retailers:v=[],voucherType:m=[],branches:h=[],onChangeRetailer:x,stockItemLedgerName:p=[],retailerDeliveryAddress:j=r.zA,setRetailerDeliveryAddress:N}=e;const g="cus-inpt p-2",b=(0,n.IQ)(null===s||void 0===s?void 0:s.Retailer_Id)&&!(0,n.id)(null===s||void 0===s?void 0:s.Retailer_Id,0),_=(0,t.useMemo)(()=>v.find(e=>(0,n.id)(e.Retailer_Id,null===s||void 0===s?void 0:s.Retailer_Id))||{},[null===s||void 0===s?void 0:s.Retailer_Id]),A=(e,l)=>{const s=null===_||void 0===_?void 0:_.deliveryAddresses.find(s=>s[e]===l);N(s?e=>(0,a.A)((0,a.A)({},e),{},{deliveryName:null===s||void 0===s?void 0:s.deliveryName,phoneNumber:null===s||void 0===s?void 0:s.phoneNumber,cityName:null===s||void 0===s?void 0:s.cityName,deliveryAddress:null===s||void 0===s?void 0:s.deliveryAddress,id:s.id}):s=>(0,a.A)((0,a.A)({},s),{},{[e]:l,id:null}))};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"row",children:[(0,c.jsxs)("div",{className:"col-sm-8 p-2",children:[(0,c.jsx)("label",{className:"fa-13",children:"Party Name"}),(0,c.jsx)(d.Ay,{value:{value:null===s||void 0===s?void 0:s.Retailer_Id,label:null===s||void 0===s?void 0:s.Retailer_Name},onChange:e=>{var l;const s=(null===(l=v.find(l=>(0,n.id)(l.Retailer_Id,e.value)))||void 0===l?void 0:l.Gstno)||"";u(l=>(0,a.A)((0,a.A)({},l),{},{Retailer_Id:e.value,Retailer_Name:e.label,gstNumber:s})),N(r.zA)},options:[{value:"",label:"Search",isDisabled:!0},...(0,n.$r)(v).map(e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name}))],styles:i.MR,isSearchable:!0,placeholder:"Select Vendor",maxMenuHeight:300,filterOption:n.GI})]}),(0,c.jsxs)("div",{className:"col-sm-4 p-2",children:[(0,c.jsx)("label",{className:"fa-13",children:"Voucher Type"}),(0,c.jsx)(d.Ay,{value:{value:s.Voucher_Type,label:null===(l=(0,n.$r)(m).find(e=>(0,n.id)(e.Vocher_Type_Id,s.Voucher_Type)))||void 0===l?void 0:l.Voucher_Type},onChange:e=>u(l=>(0,a.A)((0,a.A)({},l),{},{Voucher_Type:e.value})),options:[{value:"",label:"Search",isDisabled:!0},...(0,n.$r)(m).filter(e=>"SALES"===(null===e||void 0===e?void 0:e.Type)).map(e=>({value:null===e||void 0===e?void 0:e.Vocher_Type_Id,label:null===e||void 0===e?void 0:e.Voucher_Type}))],styles:i.MR,isSearchable:!0,required:!0,placeholder:"Select Voucher Type",maxMenuHeight:300,filterOption:n.GI})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsx)("label",{children:"GSTNO"}),(0,c.jsx)("input",{value:(null===s||void 0===s?void 0:s.gstNumber)||"",className:g,placeholder:"ex: 15-CHAR-STRING",onChange:e=>u(l=>(0,a.A)((0,a.A)({},l),{},{gstNumber:e.target.value}))})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsx)("label",{htmlFor:"nameInput",children:"Mailing Name"}),(0,c.jsx)("input",{id:"nameInput",list:"deliveryName",value:(null===j||void 0===j?void 0:j.deliveryName)||"",className:g,placeholder:"ex: Party name / Other",onChange:e=>A("deliveryName",e.target.value),disabled:!b}),(0,c.jsx)("datalist",{id:"deliveryName",children:(0,n.$r)(null===_||void 0===_?void 0:_.deliveryAddresses).map((e,l)=>(0,c.jsx)("option",{value:null===e||void 0===e?void 0:e.deliveryName,children:null===e||void 0===e?void 0:e.deliveryName},l))})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsx)("label",{htmlFor:"phoneInput",children:"Phone Number"}),(0,c.jsx)("input",{id:"phoneInput",list:"phoneNumber",value:(null===j||void 0===j?void 0:j.phoneNumber)||"",className:g,placeholder:"ex: 9876543210",onChange:e=>A("phoneNumber",e.target.value),disabled:!b}),(0,c.jsx)("datalist",{id:"phoneNumber",children:(0,n.$r)(null===_||void 0===_?void 0:_.deliveryAddresses).map((e,l)=>(0,c.jsx)("option",{value:null===e||void 0===e?void 0:e.phoneNumber,children:null===e||void 0===e?void 0:e.phoneNumber},l))})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsx)("label",{htmlFor:"cityInput",children:"City Name"}),(0,c.jsx)("input",{id:"cityInput",list:"cityName",value:(null===j||void 0===j?void 0:j.cityName)||"",className:g,placeholder:"ex: Madurai",onChange:e=>A("cityName",e.target.value),disabled:!b}),(0,c.jsx)("datalist",{id:"cityName",children:(0,n.$r)(null===_||void 0===_?void 0:_.deliveryAddresses).map((e,l)=>(0,c.jsx)("option",{value:null===e||void 0===e?void 0:e.cityName,children:null===e||void 0===e?void 0:e.cityName},l))})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsx)("label",{htmlFor:"addressInput",children:"Address"}),(0,c.jsx)("input",{id:"addressInput",list:"deliveryAddress",value:(null===j||void 0===j?void 0:j.deliveryAddress)||"",className:g,placeholder:"ex: 123, ABC Street",onChange:e=>A("deliveryAddress",e.target.value),disabled:!b}),(0,c.jsx)("datalist",{id:"deliveryAddress",children:(0,n.$r)(null===_||void 0===_?void 0:_.deliveryAddresses).map((e,l)=>(0,c.jsx)("option",{value:null===e||void 0===e?void 0:e.deliveryAddress,children:null===e||void 0===e?void 0:e.deliveryAddress},l))})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsxs)("label",{className:"fa-13",children:["Entry Date ",(0,c.jsx)(o.A,{})]}),(0,c.jsx)("input",{value:(null===s||void 0===s?void 0:s.Do_Date)||"",type:"date",required:!0,className:g,onChange:e=>u(l=>(0,a.A)((0,a.A)({},l),{},{Do_Date:e.target.value}))})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsxs)("label",{className:"fa-13",children:["Branch ",(0,c.jsx)(o.A,{})]}),(0,c.jsxs)("select",{className:g,value:null===s||void 0===s?void 0:s.Branch_Id,required:!0,onChange:e=>u(l=>(0,a.A)((0,a.A)({},l),{},{Branch_Id:e.target.value})),children:[(0,c.jsx)("option",{value:"",children:"select"}),h.map((e,l)=>(0,c.jsx)("option",{value:null===e||void 0===e?void 0:e.BranchId,children:null===e||void 0===e?void 0:e.BranchName},l))]})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsxs)("label",{className:"fa-13",children:["GST Type ",(0,c.jsx)(o.A,{})]}),(0,c.jsxs)("select",{className:g,onChange:e=>u(l=>(0,a.A)((0,a.A)({},l),{},{GST_Inclusive:Number(e.target.value)})),value:s.GST_Inclusive,required:!0,children:[(0,c.jsx)("option",{value:1,children:"Inclusive Tax"}),(0,c.jsx)("option",{value:0,children:"Exclusive Tax"}),(0,c.jsx)("option",{value:2,children:"Not Taxable"})]})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsx)("label",{className:"fa-13",children:"Tax Type"}),(0,c.jsxs)("select",{className:g,onChange:e=>u(l=>(0,a.A)((0,a.A)({},l),{},{IS_IGST:Number(e.target.value)})),value:s.IS_IGST,children:[(0,c.jsx)("option",{value:"0",children:"GST"}),(0,c.jsx)("option",{value:"1",children:"IGST"})]})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsx)("label",{className:"fa-13",children:"Stock Item Ledger Name"}),(0,c.jsx)(d.Ay,{value:{value:s.Stock_Item_Ledger_Name,label:s.Stock_Item_Ledger_Name},onChange:e=>u(l=>(0,a.A)((0,a.A)({},l),{},{Stock_Item_Ledger_Name:e.value})),options:[{value:"",label:"Search",isDisabled:!0},...p.map(e=>({value:null===e||void 0===e?void 0:e.Stock_Item_Ledger_Name,label:null===e||void 0===e?void 0:e.Stock_Item_Ledger_Name}))],styles:i.MR,menuPortalTarget:document.body,required:!0,isSearchable:!0,placeholder:"Select",maxMenuHeight:300,filterOption:n.GI})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsx)("label",{className:"fa-13",children:"Purchase Ref"}),(0,c.jsx)("input",{value:null===s||void 0===s?void 0:s.Ref_Inv_Number,className:g,onChange:e=>u(l=>(0,a.A)((0,a.A)({},l),{},{Ref_Inv_Number:String(e.target.value).trim()}))})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsx)("label",{className:"fa-13",children:"Status"}),(0,c.jsxs)("select",{value:null===s||void 0===s?void 0:s.Cancel_status,className:g,onChange:e=>u(l=>(0,a.A)((0,a.A)({},l),{},{Cancel_status:e.target.value})),children:[(0,c.jsx)("option",{value:"",disabled:!0,children:"Select"}),(0,c.jsx)("option",{value:"1",children:"New"}),(0,c.jsx)("option",{value:"2",children:"Progess"}),(0,c.jsx)("option",{value:"3",children:"Completed"}),(0,c.jsx)("option",{value:"0",children:"Canceled"})]})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsx)("label",{className:"fa-13",children:"Delivery Status"}),(0,c.jsxs)("select",{className:"cus-inpt p-2",onChange:e=>u((0,a.A)((0,a.A)({},s),{},{Delivery_Status:(0,n.Ro)(e.target.value)})),value:(0,n.Ro)(s.Delivery_Status),children:[(0,c.jsx)("option",{value:0,children:"Select"}),(0,c.jsx)("option",{value:5,children:"Pending"}),(0,c.jsx)("option",{value:7,children:"Delivered"}),(0,c.jsx)("option",{value:6,children:"Return"})]})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsx)("label",{className:"fa-13",children:"Payment Status"}),(0,c.jsxs)("select",{className:"cus-inpt p-2",onChange:e=>u((0,a.A)((0,a.A)({},s),{},{Payment_Status:(0,n.Ro)(e.target.value)})),value:(0,n.Ro)(s.Payment_Status),children:[(0,c.jsx)("option",{value:0,children:"Select"}),(0,c.jsx)("option",{value:1,children:"Pending"}),(0,c.jsx)("option",{value:3,children:"Complete"})]})]}),(0,c.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,c.jsx)("label",{className:"fa-13",children:"Payment Mode"}),(0,c.jsxs)("select",{className:"cus-inpt p-2",onChange:e=>u((0,a.A)((0,a.A)({},s),{},{Payment_Mode:(0,n.Ro)(e.target.value)})),value:(0,n.Ro)(s.Payment_Mode),children:[(0,c.jsx)("option",{value:0,children:"Select"}),(0,c.jsx)("option",{value:1,children:"Cash"}),(0,c.jsx)("option",{value:3,children:"QR-Pay"}),(0,c.jsx)("option",{value:2,children:"G-Pay"})]})]})]}),(0,c.jsx)("label",{className:"fa-13",children:"Narration"}),(0,c.jsx)("textarea",{className:"cus-inpt fa-14",rows:2,value:s.Narration,onChange:e=>u(l=>(0,a.A)((0,a.A)({},l),{},{Narration:e.target.value}))})]})}}}]);
//# sourceMappingURL=3525.77779c2a.chunk.js.map