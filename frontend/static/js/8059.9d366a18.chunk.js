"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8059],{98059:(e,s,l)=>{l.r(s),l.d(s,{default:()=>w});var d=l(89379),a=l(65043),t=l(11906),o=l(79958),r=l(81e3),n=l(24056),i=l(83462),c=l(26600),u=l(35316),v=l(29347),m=l(22016),_=l(15710),h=l(86506),x=l(32973),j=l(91036),N=(l(92342),l(27285)),k=l(3805),p=l(83806),T=l(12110),I=l(26494),b=l(97707),g=l(65074),D=l(70579);const f=e=>["bg-dark","bg-info","bg-warning","bg-success","bg-danger"][Number(e)],S=e=>{const[s,l]=e.split(":").map(Number);let d=s%12;d=d||12;const a=s<12?"AM":"PM",t=l<10?"0"+l:l;return"".concat(d<10?"0"+d:d,":").concat(t," ").concat(a)},A=e=>{const s=Math.floor(e/1e3),l=Math.floor(s/60),d=Math.floor(l/60),a=e=>e<10?"0".concat(e):e;return"".concat(a(d),":").concat(a(l%60),":").concat(a(s%60))};function P(e){const[s,l]=e.split(":").map(Number);return 6e4*(60*s+l)}function W(e){const s=new Date(e),l=s.getHours(),d=s.getMinutes();return(l<10?"0"+l:l)+":"+(d<10?"0"+d:d)}function y(e,s){const[l,d]=e.split(":").map(Number),[a,t]=s.split(":").map(Number);let o=l+a,r=d+t;r>=60&&(o+=Math.floor(r/60),r%=60);return(o<10?"0"+o:o)+":"+(r<10?"0"+r:r)}function E(e){if(!e||!Array.isArray(e)||0===e.length)return null;try{let s="<DocumentElement>";for(let l of e)l&&l.Param_Id&&(s+="<Data>",s+="<Task_Id>".concat(null!==l&&void 0!==l&&l.Task_Id?String(l.Task_Id):0,"</Task_Id>"),s+="<Param_Id>".concat(String(l.Param_Id),"</Param_Id>"),s+="<Default_Value>".concat(null!==l&&void 0!==l&&l.Default_Value?C(String(l.Default_Value)):"","</Default_Value>"),s+="<Current_Value>".concat(null!==l&&void 0!==l&&l.Current_Value?C(String(l.Current_Value)):"","</Current_Value>"),s+="</Data>");return s+="</DocumentElement>","<DocumentElement></DocumentElement>"===s?null:s}catch(s){return console.error("Error generating XML:",s),null}}function C(e){return e?e.replace(/[<>&'"]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return e}}):""}const w=()=>{var e,s,l,C,w,M,V;const L=localStorage.getItem("user"),U=JSON.parse(L),R={Work_Id:"",Project_Id:"",Sch_Id:"",Task_Levl_Id:"",Task_Id:"",AN_No:"",Emp_Id:null===U||void 0===U?void 0:U.UserId,Work_Done:"",Start_Time:"",End_Time:"",Work_Status:2,Work_Dt:(0,b.ny)(),Process_Id:0,Det_string:[]},q={Work_Id:"",Project_Id:1,Sch_Id:1,Task_Levl_Id:1,Task_Id:1,AN_No:0,Emp_Id:null===U||void 0===U?void 0:U.UserId,Work_Done:"",Start_Time:"12:00",End_Time:"14:00",Work_Status:3,Work_Dt:(0,b.ny)(),Process_Id:0,Det_string:[]},[z,O]=(0,a.useState)([]),[H,B]=(0,a.useState)([]),[G,F]=(0,a.useState)({myTaskDate:(0,b.ny)(),executedTaskDate:(0,b.ny)()}),[Y,X]=(0,a.useState)(!1),[J,K]=(0,a.useState)("1"),[Q,Z]=(0,a.useState)(!1),[$,ee]=(0,a.useState)(!1),[se,le]=(0,a.useState)(!1),[de,ae]=(0,a.useState)(!1),[te,oe]=(0,a.useState)({}),[re,ne]=(0,a.useState)(0),[ie,ce]=(0,a.useState)(!1),[ue,ve]=(0,a.useState)(null),[me,_e]=(0,a.useState)(0),[he,xe]=(0,a.useState)(!1),[je,Ne]=(0,a.useState)(R),[ke,pe]=(0,a.useState)(q),[Te,Ie]=(0,a.useState)((0,d.A)((0,d.A)({},R),{},{Process_Id:0,Start_Time:"10:00",End_Time:"11:00"})),[be,ge]=(0,a.useState)([]);(0,a.useEffect)(()=>{(0,g.z)({address:"taskManagement/tasks/myTasks?Emp_Id=".concat(null===U||void 0===U?void 0:U.UserId,"&reqDate=").concat(G.myTaskDate)}).then(e=>{O(e.success?e.data:[])}).catch(e=>console.error(e))},[Y,G.myTaskDate,null===U||void 0===U?void 0:U.UserId]),(0,a.useEffect)(()=>{(0,g.z)({address:"taskManagement/processMaster/dropDown"}).then(e=>{ge(e.success?e.data:[])}).catch(e=>console.error(e))},[Y]),(0,a.useEffect)(()=>{(0,g.z)({address:"taskManagement/task/work?Emp_Id=".concat(null===U||void 0===U?void 0:U.UserId,"&from=").concat(G.executedTaskDate,"&to=").concat(G.executedTaskDate)}).then(e=>{B(e.success?e.data:[])}).catch(e=>console.error(e))},[Y,G.executedTaskDate,null===U||void 0===U?void 0:U.UserId]),(0,a.useEffect)(()=>{(0,g.z)({address:"taskManagement/task/startTask?Emp_Id=".concat(null===U||void 0===U?void 0:U.UserId)}).then(e=>{if(e.success){var s,l;const d=e.data[0].Time?Number(e.data[0].Time):null,a=null!==e&&void 0!==e&&null!==(s=e.data[0])&&void 0!==s&&s.Task_Id?Number(null===e||void 0===e||null===(l=e.data[0])||void 0===l?void 0:l.Task_Id):0;ve(d),ne(a)}else ve(null)}).catch(e=>console.error(e))},[Y,null===U||void 0===U?void 0:U.UserId]),(0,a.useEffect)(()=>{const e=setInterval(()=>{if(ue){const e=(new Date).getTime()-parseInt(ue);_e(e)}},1e3);return()=>clearInterval(e)},[ue]),(0,a.useEffect)(()=>{if(ue&&z.length>0){const e=z.find(e=>Number(e.Task_Levl_Id)===Number(re));oe(e)}},[ue,z,Y,re]);const De=()=>{(0,g.z)({address:"taskManagement/task/startTask",method:"DELETE",bodyData:{Emp_Id:U.UserId,Mode:1}}).then(e=>{e.success?(j.oR.success(e.message),ve(null),xe(!1),_e(0),oe({})):j.oR.error(e.message)}).catch(e=>console.error(e))},fe=e=>{const s=(new Date).getTime()-parseInt(ue);return s&&e&&s<e?s/e*100:s&&e&&s>=e?100:0};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(j.N9,{}),ue&&(0,D.jsxs)("div",{className:"cus-card rounded-2 shadow-none px-3 py-1 mb-3",children:[(0,D.jsx)("h5",{className:"mb-0 pt-2",children:"Running Task"}),(0,D.jsxs)("div",{className:"cus-card bg-light p-3 shadow-none rounded-1",children:[(0,D.jsx)("p",{className:"mb-0 fa-16 fw-bold pb-1 border-bottom",children:(0,D.jsx)("span",{className:"flex-grow-1",children:(null===te||void 0===te?void 0:te.Task_Name)||" No Active Task "})}),(0,D.jsxs)("div",{className:"row mt-2 flex-row-reverse",children:[(0,D.jsx)("div",{className:"col-md-6",children:(0,D.jsxs)("div",{className:"p-2 pb-0",children:[(0,D.jsxs)("p",{className:"fa-20 d-flex mb-1",children:[(0,D.jsx)("span",{className:"flex-grow-1",children:"Duration : "}),(0,D.jsx)("span",{className:"text-primary",children:A(me)})]}),(0,D.jsxs)("p",{className:"mb-0 d-flex",children:[(0,D.jsx)("span",{className:"flex-grow-1",children:"Progress : "}),(null===(e=fe(null!==te&&void 0!==te&&te.Sch_Period?P(null===te||void 0===te?void 0:te.Sch_Period):0))||void 0===e?void 0:e.toFixed(2))+" %"]}),(0,D.jsxs)("span",{className:"p-2 w-100",children:[(0,D.jsx)("div",{style:{backgroundColor:"#ddd"},className:"rounded-4 overflow-hidden",children:(0,D.jsx)("div",{style:{width:"".concat(fe(null!==te&&void 0!==te&&te.Sch_Period?P(null===te||void 0===te?void 0:te.Sch_Period):0),"%"),backgroundColor:"#007bff",height:"14px"}})}),(0,D.jsxs)("p",{className:"mb-0 d-flex justify-content-between fa-12",children:[(0,D.jsx)("span",{children:"0%"}),(0,D.jsx)("span",{children:"100%"})]})]})]})}),(0,D.jsxs)("div",{className:"col-md-6 d-flex",children:[(0,D.jsxs)("div",{className:"p-2 flex-grow-1",children:[(0,D.jsxs)("p",{className:"fa-14 mt-1 mb-0 d-flex",children:[(0,D.jsx)("span",{className:" flex-grow-1",children:"Scheduled Time"}),(0,D.jsxs)("span",{children:[(null===te||void 0===te?void 0:te.Sch_Time)&&S(null===te||void 0===te?void 0:te.Sch_Time),"\xa0 - \xa0",(null===te||void 0===te?void 0:te.EN_Time)&&S(null===te||void 0===te?void 0:te.EN_Time)]})]}),(0,D.jsxs)("p",{className:"fa-14 mt-1 mb-0 d-flex",children:[(0,D.jsx)("span",{className:" flex-grow-1",children:"Total Hour"}),(0,D.jsxs)("span",{className:"text-primary",children:[null===te||void 0===te?void 0:te.Sch_Period," Hrs"]})]}),(0,D.jsxs)("p",{className:"fa-14 mt-1 mb-0 d-flex",children:[(0,D.jsx)("span",{className:" flex-grow-1",children:"Project"}),(0,D.jsxs)("span",{className:"text-primary",children:[null===te||void 0===te||null===(s=te.Project_Name)||void 0===s?void 0:s.slice(0,25),(null===te||void 0===te||null===(l=te.Project_Name)||void 0===l?void 0:l.length)>25&&"..."]})]}),(0,D.jsxs)("p",{className:"fa-14 mt-1 mb-0 d-flex",children:[(0,D.jsx)("span",{className:" flex-grow-1",children:"Project Head"}),(0,D.jsx)("span",{className:"text-primary",children:null===te||void 0===te?void 0:te.Project_Head_Name})]})]}),(0,D.jsx)("div",{className:" d-md-block vr",style:{display:"none"}})]})]})]}),(0,D.jsxs)("div",{className:"text-end mt-2 mb-1",children:[(0,D.jsx)(t.A,{onClick:De,color:"error",variant:"outlined",sx:{marginRight:"10px"},children:"cancel"}),(0,D.jsx)(t.A,{onClick:e=>{Ne(R),ee(!0)},color:"success",variant:"contained",children:"Save"})]})]}),(0,D.jsx)(T.A,{variant:"elevation",children:(0,D.jsxs)(I.A,{className:"p-1",children:[(0,D.jsxs)("div",{className:" d-lg-flex",children:[(0,D.jsxs)("div",{className:"flex-grow-1 p-2",children:[(0,D.jsx)(o.A,{title:"Assigned Task",className:"text-center text-decoration-underline"}),(0,D.jsx)(N.A,{plugins:[k.A,p.A],initialView:"timeGridDay",initialDate:new Date,events:z.map(e=>({title:null===e||void 0===e?void 0:e.Task_Name,start:G.myTaskDate+"T"+(null===e||void 0===e?void 0:e.Sch_Time),end:G.myTaskDate+"T"+(null===e||void 0===e?void 0:e.EN_Time),objectData:e})),headerToolbar:{left:"prev next",center:"title",right:"timeGridDay, listDay"},slotDuration:"00:20:00",slotMinTime:"08:00:00",slotMaxTime:"22:00:00",showNonCurrentDates:!1,editable:!1,selectable:!0,selectMirror:!0,eventClick:e=>{if(ue||0!==me)j.oR.warn("Complete running task");else{var s;const l=null===(s=e.event.extendedProps)||void 0===s?void 0:s.objectData;3!==Number(null===l||void 0===l?void 0:l.Work_Status)&&1===Number(null===l||void 0===l?void 0:l.Timer_Based)?(oe(l),Z(!0),Ne({Work_Id:null===l||void 0===l?void 0:l.Work_Id,Project_Id:null===l||void 0===l?void 0:l.Project_Id,Sch_Id:null===l||void 0===l?void 0:l.Sch_Id,Task_Levl_Id:null===l||void 0===l?void 0:l.Task_Levl_Id,Task_Id:null===l||void 0===l?void 0:l.Task_Id,AN_No:null===l||void 0===l?void 0:l.AN_No,Emp_Id:null===U||void 0===U?void 0:U.UserId,Work_Done:null===l||void 0===l?void 0:l.Work_Done,Start_Time:null===l||void 0===l?void 0:l.Start_Time,End_Time:null===l||void 0===l?void 0:l.End_Time,Work_Status:null===l||void 0===l?void 0:l.Work_Status,Work_Dt:(0,b.ny)(null===l||void 0===l?void 0:l.Work_Dt),Process_Id:Number(null===l||void 0===l?void 0:l.Process_Id),Det_string:null===l||void 0===l?void 0:l.Param_Dts})):3!==Number(null===l||void 0===l?void 0:l.Work_Status)?(oe(l),le(!0),Ie({Work_Id:null!==l&&void 0!==l&&l.Work_Id?null===l||void 0===l?void 0:l.Work_Id:"",Project_Id:null!==l&&void 0!==l&&l.Project_Id?null===l||void 0===l?void 0:l.Project_Id:"",Sch_Id:null!==l&&void 0!==l&&l.Sch_Id?null===l||void 0===l?void 0:l.Sch_Id:"",Task_Levl_Id:null!==l&&void 0!==l&&l.Task_Levl_Id?null===l||void 0===l?void 0:l.Task_Levl_Id:"",Task_Id:null!==l&&void 0!==l&&l.Task_Id?null===l||void 0===l?void 0:l.Task_Id:"",AN_No:null!==l&&void 0!==l&&l.AN_No?null===l||void 0===l?void 0:l.AN_No:"",Emp_Id:null===U||void 0===U?void 0:U.UserId,Work_Done:null!==l&&void 0!==l&&l.Work_Done?null===l||void 0===l?void 0:l.Work_Done:"",Start_Time:null!==l&&void 0!==l&&l.Start_Time?null===l||void 0===l?void 0:l.Start_Time:"10:00",End_Time:null!==l&&void 0!==l&&l.End_Time?null===l||void 0===l?void 0:l.End_Time:"11:00",Work_Status:null!==l&&void 0!==l&&l.Work_Status?null===l||void 0===l?void 0:l.Work_Status:2,Work_Dt:null!==l&&void 0!==l&&l.Work_Dt?(0,b.ny)(null===l||void 0===l?void 0:l.Work_Dt):(0,b.ny)(),Process_Id:Number(null===l||void 0===l?void 0:l.Process_Id)?Number(null===l||void 0===l?void 0:l.Process_Id):"",Det_string:null!==l&&void 0!==l&&l.Param_Dts?null===l||void 0===l?void 0:l.Param_Dts:[]})):j.oR.warn("This task is already completed")}},eventContent:e=>{const s=e.event.extendedProps.objectData,l=s.Work_Status?Number(s.Work_Status):0,d=[{color:"bg-warning",message:"New",text:"text-dark"},{color:"bg-warning",message:"New",text:"text-dark"},{color:"bg-primary",message:"on Progress",text:"text-white"},{color:"bg-success",message:"Completed",text:"text-white"}];return(0,D.jsx)("div",{style:{cursor:"pointer"},children:(0,D.jsxs)("p",{className:"mb-0",children:[(0,D.jsxs)("span",{children:[e.event.title," "]}),(0,D.jsxs)("span",{children:[S(null===s||void 0===s?void 0:s.Sch_Time)+" - "+S(null===s||void 0===s?void 0:s.EN_Time)," "]}),(0,D.jsx)("span",{className:"badge text-dark ".concat(d[l].color," ").concat(d[l].text," mx-1"),children:d[l].message})]})})},datesSet:e=>F((0,d.A)((0,d.A)({},G),{},{myTaskDate:(0,b.ny)(e.endStr)})),height:1200})]}),(0,D.jsxs)("div",{className:"flex-grow-1 p-2",children:[(0,D.jsx)(o.A,{title:"Executed",className:"text-center text-decoration-underline"}),(0,D.jsx)(N.A,{plugins:[k.A,p.A],initialView:"timeGridDay",initialDate:G.executedTaskDate,events:H.map(e=>({title:null===e||void 0===e?void 0:e.Task_Name,start:G.executedTaskDate+"T"+(null===e||void 0===e?void 0:e.Start_Time),end:G.executedTaskDate+"T"+(null===e||void 0===e?void 0:e.End_Time),objectData:e})),headerToolbar:{left:"prev next",center:"title",right:"timeGridDay, listWeek"},slotDuration:"00:20:00",slotMinTime:"08:00:00",slotMaxTime:"22:00:00",showNonCurrentDates:!1,editable:!1,selectable:!0,selectMirror:!0,datesSet:e=>F((0,d.A)((0,d.A)({},G),{},{executedTaskDate:(0,b.ny)(e.endStr)})),eventClick:e=>{if(ue||0!==me)j.oR.warn("Complete running task");else{var s;const l=null===(s=e.event.extendedProps)||void 0===s?void 0:s.objectData;(0,b.ny)(null===l||void 0===l?void 0:l.Entry_Date)===(0,b.ny)()?(ce(!0),0===Number(null===l||void 0===l?void 0:l.Timer_Based)?(oe(l),le(!0),Ie({Work_Id:null===l||void 0===l?void 0:l.Work_Id,Project_Id:null===l||void 0===l?void 0:l.Project_Id,Sch_Id:null===l||void 0===l?void 0:l.Sch_Id,Task_Levl_Id:null===l||void 0===l?void 0:l.Task_Levl_Id,Task_Id:null===l||void 0===l?void 0:l.Task_Id,AN_No:null===l||void 0===l?void 0:l.AN_No,Emp_Id:null===U||void 0===U?void 0:U.UserId,Work_Done:null===l||void 0===l?void 0:l.Work_Done,Start_Time:null!==l&&void 0!==l&&l.Start_Time?null===l||void 0===l?void 0:l.Start_Time:"10:00",End_Time:null!==l&&void 0!==l&&l.End_Time?null===l||void 0===l?void 0:l.End_Time:"11:00",Work_Status:null!==l&&void 0!==l&&l.Work_Status?null===l||void 0===l?void 0:l.Work_Status:2,Work_Dt:null!==l&&void 0!==l&&l.Work_Dt?(0,b.ny)(null===l||void 0===l?void 0:l.Work_Dt):(0,b.ny)(),Process_Id:Number(null===l||void 0===l?void 0:l.Process_Id)?Number(null===l||void 0===l?void 0:l.Process_Id):"",Det_string:null!==l&&void 0!==l&&l.Param_Dts?null===l||void 0===l?void 0:l.Param_Dts:[]})):(oe(l),ee(!0),Ne({Work_Id:null===l||void 0===l?void 0:l.Work_Id,Project_Id:null===l||void 0===l?void 0:l.Project_Id,Sch_Id:null===l||void 0===l?void 0:l.Sch_Id,Task_Levl_Id:null===l||void 0===l?void 0:l.Task_Levl_Id,Task_Id:null===l||void 0===l?void 0:l.Task_Id,AN_No:null===l||void 0===l?void 0:l.AN_No,Emp_Id:null===U||void 0===U?void 0:U.UserId,Work_Done:null===l||void 0===l?void 0:l.Work_Done,Start_Time:null!==l&&void 0!==l&&l.Start_Time?null===l||void 0===l?void 0:l.Start_Time:"10:00",End_Time:null!==l&&void 0!==l&&l.End_Time?null===l||void 0===l?void 0:l.End_Time:"11:00",Work_Status:null!==l&&void 0!==l&&l.Work_Status?null===l||void 0===l?void 0:l.Work_Status:2,Work_Dt:null!==l&&void 0!==l&&l.Work_Dt?(0,b.ny)(null===l||void 0===l?void 0:l.Work_Dt):(0,b.ny)(),Process_Id:Number(null===l||void 0===l?void 0:l.Process_Id)?Number(null===l||void 0===l?void 0:l.Process_Id):"",Det_string:null!==l&&void 0!==l&&l.Param_Dts?null===l||void 0===l?void 0:l.Param_Dts:[]}))):j.oR.warn("You can only modify today works")}},height:1200})]})]}),(0,D.jsxs)("div",{className:"table-responsive mt-3",children:[(0,D.jsxs)("div",{className:"d-flex justify-content-between border align-items-center p-2 rounded-3 mb-3",onClick:()=>{pe(q),ae(!0)},children:[(0,D.jsxs)("span",{className:"ps-2",children:["Work Done At: ",new Date(null===G||void 0===G?void 0:G.executedTaskDate).toLocaleDateString("en-IN")]}),(0,D.jsx)("button",{className:"btn btn-primary fa-14",children:" Add Additional Work Details"})]}),(0,D.jsxs)("table",{className:"table mb-1",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{className:"fa-13 border",children:"SNo"}),(0,D.jsx)("th",{className:"fa-13 border",children:"Task"}),(0,D.jsx)("th",{className:"fa-13 border",children:"Timer Based"}),(0,D.jsx)("th",{className:"fa-13 border",children:"Start - End"}),(0,D.jsx)("th",{className:"fa-13 border",children:"Total Minutes"}),(0,D.jsx)("th",{className:"fa-13 border",children:"Status"}),(0,D.jsx)("th",{className:"fa-13 border",children:"Discription"})]})}),(0,D.jsx)("tbody",{children:H.map((e,s)=>(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"fa-13 border",children:s+1}),(0,D.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Task_Name}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,D.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(f(1===Number(null===e||void 0===e?void 0:e.Timer_Based)?3:1)),children:1===Number(null===e||void 0===e?void 0:e.Timer_Based)?"Yes":"No"})}),(0,D.jsxs)("td",{className:"fa-13 border text-center",children:[null===e||void 0===e?void 0:e.Start_Time," - ",null===e||void 0===e?void 0:e.End_Time]}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:null===e||void 0===e?void 0:e.Tot_Minutes}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,D.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(f(null===e||void 0===e?void 0:e.Work_Status)),children:null===e||void 0===e?void 0:e.WorkStatus})}),(0,D.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Work_Done})]},s))})]})]}),(0,D.jsxs)(m.Ay,{value:J,children:[(0,D.jsx)(r.A,{sx:{borderBottom:1,borderColor:"divider",display:"none"},children:(0,D.jsxs)(_.A,{indicatorColor:"secondary",textColor:"secondary",onChange:(e,s)=>K(s),"aria-label":"",children:[(0,D.jsx)(n.A,{sx:"1"===J?{backgroundColor:"#c6d7eb"}:{},label:"TODAY TASKS (".concat(z.length,")"),value:"1"}),(0,D.jsx)(n.A,{sx:"2"===J?{backgroundColor:"#c6d7eb"}:{},label:"EXECUTED (".concat(H.length,")"),value:"2"})]})}),(0,D.jsx)(h.A,{value:"1",sx:{p:0,pt:2}}),(0,D.jsx)(h.A,{value:"2",sx:{p:0,pt:2}})]})]})}),(0,D.jsxs)(i.A,{open:Q,onClose:()=>{Z(!1),oe({})},children:[(0,D.jsxs)(c.A,{className:"fa-18",children:["Start Task",(0,D.jsxs)("span",{className:"text-primary fw-bold",children:[" ",null===te||void 0===te?void 0:te.Task_Name]})]}),(0,D.jsxs)(u.A,{sx:{minWidth:"330px"},children:[(0,D.jsxs)("div",{className:" pb-3",children:[(0,D.jsx)("p",{className:"mb-0 text-center",children:(0,D.jsx)(x.A,{sx:{fontSize:"50px"}})}),(0,D.jsx)("p",{className:"mb-0 text-center",children:"Allocated Time"}),(0,D.jsxs)("p",{className:"my-2 text-center text-primary",children:[null===te||void 0===te?void 0:te.Sch_Period," Hrs"]})]}),(0,D.jsxs)("p",{className:"fa-16  mt-1 mb-0 d-flex",children:[(0,D.jsx)("span",{className:" flex-grow-1",children:"Schedule"}),(0,D.jsxs)("span",{children:[(null===te||void 0===te?void 0:te.Sch_Time)&&S(null===te||void 0===te?void 0:te.Sch_Time),"\xa0-\xa0",(null===te||void 0===te?void 0:te.EN_Time)&&S(null===te||void 0===te?void 0:te.EN_Time)]})]}),(0,D.jsxs)("p",{className:"fa-16  mt-1 mb-0 d-flex",children:[(0,D.jsx)("span",{className:" flex-grow-1",children:"Project"}),(0,D.jsxs)("span",{children:[null===te||void 0===te||null===(C=te.Project_Name)||void 0===C?void 0:C.slice(0,25),(null===te||void 0===te||null===(w=te.Project_Name)||void 0===w?void 0:w.length)>25&&"..."]})]}),(0,D.jsxs)("p",{className:"fa-16  mt-1 mb-0 d-flex",children:[(0,D.jsx)("span",{className:" flex-grow-1",children:"Project Head"}),(0,D.jsx)("span",{children:null===te||void 0===te?void 0:te.Project_Head_Name})]}),(0,D.jsx)("div",{className:" text-center",children:(0,D.jsx)("button",{onClick:he?De:()=>{(0,g.z)({address:"taskManagement/task/startTask",method:"POST",bodyData:{Emp_Id:U.UserId,Time:(new Date).getTime(),Task_Id:null===te||void 0===te?void 0:te.Task_Levl_Id,ForcePost:0}}).then(e=>{e.success?(j.oR.success(e.message),X(!Y),xe(!0),Z(!1)):j.oR.error(e.message)}).catch(e=>console.error(e))},className:"clock-btn cus-shadow",style:he?{backgroundColor:"#D8BFD8"}:{backgroundColor:"#b5e6dd"},children:he?"Stop":"Start"})})]}),(0,D.jsx)(v.A,{children:(0,D.jsx)(t.A,{onClick:()=>{Z(!1),oe({})},children:"close"})})]}),(0,D.jsxs)(i.A,{open:$,onClose:()=>{ee(!1),Ne(R),ce(!1)},fullWidth:!0,maxWidth:"sm",children:[(0,D.jsx)(c.A,{children:"Save Work"}),(0,D.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{console.log("isedut",ie);const e=null!==je&&void 0!==je&&je.Det_string&&je.Det_string.length>0?E(je.Det_string):null;(0,g.z)({address:"taskManagement/task/work",method:"POST",bodyData:{Mode:ie?2:1,Work_Id:ie?null===je||void 0===je?void 0:je.Work_Id:0,Project_Id:null===te||void 0===te?void 0:te.Project_Id,Sch_Id:null===te||void 0===te?void 0:te.Sch_Id,Task_Levl_Id:null===te||void 0===te?void 0:te.Task_Levl_Id,Task_Id:null===te||void 0===te?void 0:te.Task_Id,AN_No:null===te||void 0===te?void 0:te.AN_No,Emp_Id:null===U||void 0===U?void 0:U.UserId,Work_Done:null===je||void 0===je?void 0:je.Work_Done,Process_Id:Number(null===je||void 0===je?void 0:je.Process_Id)||0,Start_Time:ie?je.Start_Time:W(ue),End_Time:ie?je.End_Time:y(W(ue),A(me)),Work_Status:null===je||void 0===je?void 0:je.Work_Status,Det_string:e}}).then(e=>{e.success?(oe({}),j.oR.success(e.message),ee(!1),ce(!1),X(!Y),_e(0),xe(!1),ve(null)):(console.log(e.message),j.oR.error(e.message))}).catch(e=>console.error(e))})()},children:[(0,D.jsxs)(u.A,{children:[(0,D.jsx)("label",{className:"my-2",children:"Process"}),(0,D.jsxs)("select",{className:"cus-inpt",value:je.Process_Id||"",onChange:e=>Ne((0,d.A)((0,d.A)({},je),{},{Process_Id:e.target.value})),children:[(0,D.jsx)("option",{value:"",children:"Select Process"}),be.map(e=>(0,D.jsx)("option",{value:e.Id,children:e.Process_Name},e.Id))]}),(0,D.jsx)("label",{className:"my-2",children:"Work Status"}),(0,D.jsxs)("select",{className:"cus-inpt",value:je.Work_Status,required:!0,onChange:e=>Ne((0,d.A)((0,d.A)({},je),{},{Work_Status:e.target.value})),children:[(0,D.jsx)("option",{value:2,children:"PENDING"}),(0,D.jsx)("option",{value:3,children:"COMPLETED"})]}),(0,D.jsx)("label",{className:"my-2",children:"Work Summary"}),(0,D.jsx)("textarea",{rows:"4",className:"cus-inpt",required:!0,value:je.Work_Done,onChange:e=>Ne((0,d.A)((0,d.A)({},je),{},{Work_Done:e.target.value}))}),null===te||void 0===te||null===(M=te.Param_Dts)||void 0===M?void 0:M.map((e,s)=>{var l,a;return(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e?void 0:e.Paramet_Name}),(0,D.jsx)("input",{type:(null===e||void 0===e?void 0:e.Paramet_Data_Type)||"text",className:"cus-inpt",onChange:s=>((e,s)=>{const l=e.target.value;Ne(e=>{var a;const t=null===e||void 0===e||null===(a=e.Det_string)||void 0===a?void 0:a.findIndex(e=>Number(e.Param_Id)===Number(s.Param_Id));if(-1!==t){const a=[...e.Det_string];return a[t]=(0,d.A)((0,d.A)({},a[t]),{},{Current_Value:l,Param_Id:s.Param_Id,Default_Value:s.Default_Value,Task_Id:null===s||void 0===s?void 0:s.Task_Id}),(0,d.A)((0,d.A)({},e),{},{Det_string:a})}return(0,d.A)((0,d.A)({},e),{},{Det_string:[...e.Det_string,{Current_Value:l,Param_Id:s.Param_Id,Default_Value:s.Default_Value,Task_Id:null===te||void 0===te?void 0:te.Task_Id}]})})})(s,e),value:(null===je||void 0===je||null===(l=je.Det_string)||void 0===l||null===(a=l.find(s=>Number(null===s||void 0===s?void 0:s.Param_Id)===Number(null===e||void 0===e?void 0:e.Param_Id)))||void 0===a?void 0:a.Current_Value)||"",placeholder:null===e||void 0===e?void 0:e.Paramet_Data_Type})]},s)})]}),(0,D.jsxs)(v.A,{children:[(0,D.jsx)(t.A,{variant:"outlined",type:"button",onClick:()=>{ee(!1),Ne(R),ce(!1)},children:"close"}),(0,D.jsx)(t.A,{color:"success",type:"submit",variant:"contained",children:"Save"})]})]})]}),(0,D.jsxs)(i.A,{open:se,maxWidth:"sm",fullWidth:!0,onClose:()=>{le(!1),Ie(R),ce(!1)},children:[(0,D.jsx)(c.A,{children:"Save Task Progress"}),(0,D.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=null!==Te&&void 0!==Te&&Te.Det_string&&Te.Det_string.length>0?E(Te.Det_string):null;(0,g.z)({address:"taskManagement/task/work",method:"POST",bodyData:{Mode:ie?2:1,Work_Id:ie?null===Te||void 0===Te?void 0:Te.Work_Id:0,Project_Id:null===te||void 0===te?void 0:te.Project_Id,Sch_Id:null===te||void 0===te?void 0:te.Sch_Id,Task_Levl_Id:null===te||void 0===te?void 0:te.Task_Levl_Id,Task_Id:null===te||void 0===te?void 0:te.Task_Id,AN_No:null===te||void 0===te?void 0:te.AN_No,Emp_Id:null===U||void 0===U?void 0:U.UserId,Process_Id:Number(null===Te||void 0===Te?void 0:Te.Process_Id)||0,Work_Dt:null===Te||void 0===Te?void 0:Te.Work_Dt,Work_Done:null===Te||void 0===Te?void 0:Te.Work_Done,Start_Time:null===Te||void 0===Te?void 0:Te.Start_Time,End_Time:null===Te||void 0===Te?void 0:Te.End_Time,Work_Status:null===Te||void 0===Te?void 0:Te.Work_Status,Det_string:s}}).then(e=>{e.success?(oe({}),j.oR.success(e.message),le(!1),X(!Y),ce(!1),ve(null)):j.oR.error(e.message)}).catch(e=>console.error(e))},children:[(0,D.jsx)(u.A,{className:"table-responsive",children:(0,D.jsx)("table",{className:"table",children:(0,D.jsxs)("tbody",{children:[(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Completed Date"}),(0,D.jsx)("td",{className:"border-0 fa-14",children:(0,D.jsx)("input",{type:"date",onChange:e=>Ie((0,d.A)((0,d.A)({},Te),{},{Work_Dt:e.target.value})),value:(0,b.ny)(null===Te||void 0===Te?void 0:Te.Work_Dt),className:"cus-inpt",required:!0})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Start Time"}),(0,D.jsx)("td",{className:"border-0 fa-14",children:(0,D.jsx)("input",{type:"time",onChange:e=>Ie((0,d.A)((0,d.A)({},Te),{},{Start_Time:e.target.value})),value:null===Te||void 0===Te?void 0:Te.Start_Time,className:"cus-inpt",required:!0})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"End Time"}),(0,D.jsx)("td",{className:"border-0 fa-14",children:(0,D.jsx)("input",{type:"time",min:null===Te||void 0===Te?void 0:Te.Start_Time,onChange:e=>Ie((0,d.A)((0,d.A)({},Te),{},{End_Time:e.target.value})),value:null===Te||void 0===Te?void 0:Te.End_Time,required:!0,className:"cus-inpt"})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Work Status"}),(0,D.jsx)("td",{className:"border-0 fa-14",children:(0,D.jsxs)("select",{className:"cus-inpt",value:null===Te||void 0===Te?void 0:Te.Work_Status,onChange:e=>Ie((0,d.A)((0,d.A)({},Te),{},{Work_Status:e.target.value})),children:[(0,D.jsx)("option",{value:2,children:"PENDING"}),(0,D.jsx)("option",{value:3,children:"COMPLETED"})]})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Process"}),(0,D.jsx)("td",{className:"border-0 fa-14",children:(0,D.jsxs)("select",{className:"cus-inpt",value:Te.Process_Id||"",onChange:e=>Ie((0,d.A)((0,d.A)({},Te),{},{Process_Id:e.target.value})),children:[(0,D.jsx)("option",{value:"",children:"Select Process"}),be.map(e=>(0,D.jsx)("option",{value:e.Id,children:e.Process_Name},e.Id))]})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14 pt-3",children:"Work Summary"}),(0,D.jsx)("td",{className:"border-0 fa-14",children:(0,D.jsx)("textarea",{rows:"4",className:"cus-inpt",required:!0,value:null===Te||void 0===Te?void 0:Te.Work_Done,onChange:e=>Ie((0,d.A)((0,d.A)({},Te),{},{Work_Done:e.target.value}))})})]}),null===te||void 0===te||null===(V=te.Param_Dts)||void 0===V?void 0:V.map((e,s)=>{var l,a;return(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14 pt-3",children:null===e||void 0===e?void 0:e.Paramet_Name}),(0,D.jsx)("td",{className:"border-0 fa-14",children:(0,D.jsx)("input",{type:(null===e||void 0===e?void 0:e.Paramet_Data_Type)||"text",className:"cus-inpt",onChange:s=>((e,s)=>{const l=e.target.value;Ie(e=>{var a;const t=null===e||void 0===e||null===(a=e.Det_string)||void 0===a?void 0:a.findIndex(e=>Number(e.Param_Id)===Number(s.Param_Id));if(-1!==t){const a=[...e.Det_string];return a[t]=(0,d.A)((0,d.A)({},a[t]),{},{Current_Value:l,Param_Id:null===s||void 0===s?void 0:s.Param_Id,Default_Value:null===s||void 0===s?void 0:s.Default_Value,Task_Id:null===s||void 0===s?void 0:s.Task_Id}),(0,d.A)((0,d.A)({},e),{},{Det_string:a})}return(0,d.A)((0,d.A)({},e),{},{Det_string:[...e.Det_string,{Current_Value:l,Param_Id:null===s||void 0===s?void 0:s.Param_Id,Default_Value:null===s||void 0===s?void 0:s.Default_Value,Task_Id:null===s||void 0===s?void 0:s.Task_Id}]})})})(s,e),value:(null===Te||void 0===Te||null===(l=Te.Det_string)||void 0===l||null===(a=l.find(s=>Number(null===s||void 0===s?void 0:s.Param_Id)===Number(null===e||void 0===e?void 0:e.Param_Id)))||void 0===a?void 0:a.Current_Value)||"",placeholder:null===e||void 0===e?void 0:e.Paramet_Data_Type})})]},s)})]})})}),(0,D.jsxs)(v.A,{children:[(0,D.jsx)(t.A,{variant:"outlined",color:"error",type:"button",onClick:()=>{le(!1),Ie(R),ce(!1)},children:"cancel"}),(0,D.jsx)(t.A,{variant:"contained",color:"success",type:"submit",children:"Save"})]})]})]}),(0,D.jsxs)(i.A,{open:de,maxWidth:"sm",fullWidth:!0,onClose:()=>{ae(!1),ce(!1)},children:[(0,D.jsx)(c.A,{children:"Additional Tasks"}),(0,D.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=null!==ke&&void 0!==ke&&ke.Det_string&&ke.Det_string.length>0?E(ke.Det_string):null;(0,g.z)({address:"taskManagement/task/work",method:"POST",bodyData:(0,d.A)((0,d.A)({},ke),{},{Mode:1,Process_Id:Number(null===ke||void 0===ke?void 0:ke.Process_Id),Det_string:s})}).then(e=>{e.success?(j.oR.success(e.message),ae(!1),X(!Y),ce(!1)):j.oR.error(e.message)}).catch(e=>console.error(e))},children:[(0,D.jsx)(u.A,{className:"table-responsive",children:(0,D.jsx)("table",{className:"table",children:(0,D.jsxs)("tbody",{children:[(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Process"}),(0,D.jsx)("td",{className:"border-0 fa-14",children:(0,D.jsxs)("select",{className:"cus-inpt",value:ke.Process_Id||"",onChange:e=>pe((0,d.A)((0,d.A)({},ke),{},{Process_Id:e.target.value})),children:[(0,D.jsx)("option",{value:"",children:"Select Process"}),be.map(e=>(0,D.jsx)("option",{value:e.Id,children:e.Process_Name},e.Id))]})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Completed Date"}),(0,D.jsx)("td",{className:"border-0 fa-14",children:(0,D.jsx)("input",{type:"date",onChange:e=>pe((0,d.A)((0,d.A)({},ke),{},{Work_Dt:e.target.value})),value:(0,b.ny)(null===ke||void 0===ke?void 0:ke.Work_Dt),className:"cus-inpt",required:!0})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Start Time"}),(0,D.jsx)("td",{className:"border-0 fa-14",children:(0,D.jsx)("input",{type:"time",onChange:e=>pe((0,d.A)((0,d.A)({},ke),{},{Start_Time:e.target.value})),value:null===ke||void 0===ke?void 0:ke.Start_Time,className:"cus-inpt",required:!0})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"End Time"}),(0,D.jsx)("td",{className:"border-0 fa-14",children:(0,D.jsx)("input",{type:"time",min:null===ke||void 0===ke?void 0:ke.Start_Time,onChange:e=>pe((0,d.A)((0,d.A)({},ke),{},{End_Time:e.target.value})),value:null===ke||void 0===ke?void 0:ke.End_Time,required:!0,className:"cus-inpt"})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Work Status"}),(0,D.jsx)("td",{className:"border-0 fa-14",children:(0,D.jsxs)("select",{className:"cus-inpt",value:null===ke||void 0===ke?void 0:ke.Work_Status,onChange:e=>pe((0,d.A)((0,d.A)({},ke),{},{Work_Status:e.target.value})),children:[(0,D.jsx)("option",{value:2,children:"PENDING"}),(0,D.jsx)("option",{value:3,children:"COMPLETED"})]})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border-0 fa-14 pt-3",children:"Work Summary"}),(0,D.jsx)("td",{className:"border-0 fa-14",children:(0,D.jsx)("textarea",{rows:"4",className:"cus-inpt",required:!0,value:null===ke||void 0===ke?void 0:ke.Work_Done,onChange:e=>pe((0,d.A)((0,d.A)({},ke),{},{Work_Done:e.target.value}))})})]})]})})}),(0,D.jsxs)(v.A,{children:[(0,D.jsx)(t.A,{variant:"outlined",color:"error",type:"button",onClick:()=>{ae(!1),ce(!1)},children:"cancel"}),(0,D.jsx)(t.A,{variant:"contained",color:"success",type:"submit",children:"Save"})]})]})]})]})}}}]);
//# sourceMappingURL=8059.9d366a18.chunk.js.map