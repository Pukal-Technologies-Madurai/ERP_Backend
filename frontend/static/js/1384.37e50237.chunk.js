"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1384],{3044:(e,l,a)=>{var t=a(24994);l.A=void 0;var r=t(a(40039)),o=a(70579);l.A=(0,r.default)((0,o.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"}),"PictureAsPdf")},8846:(e,l,a)=>{a.d(l,{A:()=>o});var t=a(59662),r=a(70579);const o=(0,t.A)((0,r.jsx)("path",{d:"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41z"}),"FilterAltOff")},33438:(e,l,a)=>{a.d(l,{A:()=>o});var t=a(59662),r=a(70579);const o=(0,t.A)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},37141:(e,l,a)=>{a.d(l,{A:()=>o});var t=a(59662),r=a(70579);const o=(0,t.A)((0,r.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")},47968:(e,l,a)=>{a.d(l,{A:()=>o});var t=a(59662),r=a(70579);const o=(0,t.A)((0,r.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download")},51387:(e,l,a)=>{a.d(l,{A:()=>o});var t=a(59662),r=a(70579);const o=(0,t.A)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},59383:(e,l,a)=>{a.d(l,{A:()=>o});var t=a(59662),r=a(70579);const o=(0,t.A)((0,r.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")},63406:(e,l,a)=>{a.d(l,{zU:()=>s,ex:()=>n,MR:()=>i,Ap:()=>o,FX:()=>d});var t=a(89379);const r=a.p+"static/media/smt.aa4d4f940bbebff07a57.png",o={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},i={menu:(e,l)=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,l)=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:l.isSelected?"#2684FF":l.isFocused?"#E2ECF9":"white",color:l.isSelected?"white":"#333",padding:"10px 12px"})},s=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],n=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:r,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:r,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:r,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],d=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},67784:(e,l,a)=>{a.d(l,{A:()=>F});var t=a(58168),r=a(98587),o=a(65043),i=a(58387),s=a(68606),n=a(20992),d=a(34535),c=a(6431),h=a(43360),g=a(95516),u=a(74050),A=a(79190),x=a(53193),m=a(81673),p=a(72221),y=a(57056),j=a(32400);function v(e){return(0,j.Ay)("MuiTextField",e)}(0,y.A)("MuiTextField",["root"]);var b=a(70579);const k=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],f={standard:h.A,filled:g.A,outlined:u.A},_=(0,d.Ay)(x.A,{name:"MuiTextField",slot:"Root",overridesResolver:(e,l)=>l.root})({}),F=o.forwardRef(function(e,l){const a=(0,c.b)({props:e,name:"MuiTextField"}),{autoComplete:o,autoFocus:d=!1,children:h,className:g,color:u="primary",defaultValue:x,disabled:y=!1,error:j=!1,FormHelperTextProps:F,fullWidth:N=!1,helperText:C,id:T,InputLabelProps:R,inputProps:D,InputProps:B,inputRef:I,label:S,maxRows:w,minRows:P,multiline:V=!1,name:E,onBlur:L,onChange:z,onFocus:Q,placeholder:M,required:O=!1,rows:G,select:W=!1,SelectProps:H,type:Y,value:K,variant:U="outlined"}=a,Z=(0,r.A)(a,k),X=(0,t.A)({},a,{autoFocus:d,color:u,disabled:y,error:j,fullWidth:N,multiline:V,required:O,select:W,variant:U}),q=(e=>{const{classes:l}=e;return(0,s.A)({root:["root"]},v,l)})(X);const J={};"outlined"===U&&(R&&"undefined"!==typeof R.shrink&&(J.notched=R.shrink),J.label=S),W&&(H&&H.native||(J.id=void 0),J["aria-describedby"]=void 0);const $=(0,n.A)(T),ee=C&&$?"".concat($,"-helper-text"):void 0,le=S&&$?"".concat($,"-label"):void 0,ae=f[U],te=(0,b.jsx)(ae,(0,t.A)({"aria-describedby":ee,autoComplete:o,autoFocus:d,defaultValue:x,fullWidth:N,multiline:V,name:E,rows:G,maxRows:w,minRows:P,type:Y,value:K,id:$,inputRef:I,onBlur:L,onChange:z,onFocus:Q,placeholder:M,inputProps:D},J,B));return(0,b.jsxs)(_,(0,t.A)({className:(0,i.A)(q.root,g),disabled:y,error:j,fullWidth:N,ref:l,required:O,color:u,variant:U,ownerState:X},Z,{children:[null!=S&&""!==S&&(0,b.jsx)(A.A,(0,t.A)({htmlFor:$,id:le},R,{children:S})),W?(0,b.jsx)(p.A,(0,t.A)({"aria-describedby":ee,id:$,labelId:le,value:K,input:te},H,{children:h})):te,C&&(0,b.jsx)(m.A,(0,t.A)({id:ee},F,{children:C}))]}))})},68826:(e,l,a)=>{a.r(l),a.d(l,{default:()=>J});var t=a(89379),r=a(65043),o=a(65074),i=a(97707),s=a(67784),n=a(81e3),d=a(63336),c=a(68903),h=a(85865),g=a(11906),u=a(59395),A=a(24056),x=a(79650),m=a(71806),p=a(84882),y=a(28076),j=a(39652),v=a(73460),b=a(31159),k=a(17392),f=a(77739),_=a(30279),F=a(83462),N=a(35316),C=a(29347),T=a(26600),R=a(98533),D=a(59383),B=a(37141),I=a(8737),S=a(692),w=a(91794),P=a(83560),V=a(8846),E=a(20656),L=a(63406),z=a(91036),Q=a(3044),M=a(78218),O=a(33438),G=a(47968),W=a(93141),H=a(70579);const Y=e=>{var l,a,t;let{open:o,onClose:s,brokerData:n,transactionType:d,fromDate:c,toDate:h}=e;const u=(0,r.useRef)(null),A=(0,W.useReactToPrint)({content:()=>u.current}),x=(null===n||void 0===n?void 0:n.Items)||[];let m=0;m="salesNagal"===d?x.reduce((e,l)=>e+parseFloat(l.Brok_Amt||0),0):x.reduce((e,l)=>e+parseFloat(l.Brokerage||0),0);const p=x.reduce((e,l)=>e+parseFloat(l.Coolie_Amt||0),0),y=parseFloat((null===n||void 0===n?void 0:n.Total_Amount)||0),j=parseFloat((null===n||void 0===n?void 0:n.VilaiVasi)||0),v=y-m+p-j,b=Math.round(v),f=b-v,_=(()=>{const e=x.reduce((e,l)=>{const a=Math.round(parseFloat(l.KGS)/parseFloat(l.QTY));return isNaN(a)||(e[a]=(e[a]||0)+parseFloat(l.QTY)),e},{});return e?Object.entries(e).sort((e,l)=>{let[a]=e,[t]=l;return a-t}).map(e=>{let[l,a]=e;return"".concat(l,"kg - ").concat(a)}).join(" & "):null})();return(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)(F.A,{open:o,onClose:s,fullWidth:!0,maxWidth:"lg",children:[(0,H.jsxs)(T.A,{children:["salesNagal"===d?"Sales Nakal Report":"Delivery Nakal Report"," : ",null===n||void 0===n?void 0:n.Broker_Name,(0,H.jsx)(k.A,{"aria-label":"close",onClick:s,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,H.jsx)(O.A,{})})]}),(0,H.jsxs)(N.A,{ref:u,children:["salesNagal"===d?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("div",{className:"text-center mb-3",children:[(0,H.jsx)("h4",{children:"Broker Report Page"}),(0,H.jsxs)("p",{className:"mb-0",children:["Date: ",null===n||void 0===n||null===(l=n.Items)||void 0===l||null===(a=l[0])||void 0===a?void 0:a.Date]}),(0,H.jsxs)("p",{className:"mb-0",children:["Broker: ",null===n||void 0===n?void 0:n.Broker_Name]}),_&&(0,H.jsxs)("p",{className:"mb-0",children:["Pack Sizes: ",_]})]}),(0,H.jsxs)("table",{className:"table table-bordered",style:{fontSize:"12px"},children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{children:[(0,H.jsx)("th",{children:"PARTY NAME"}),(0,H.jsx)("th",{children:"ALIAS NAME"}),(0,H.jsx)("th",{className:"text-end",children:"BILL RATE"}),(0,H.jsx)("th",{className:"text-end",children:"BROKER EXP"}),(0,H.jsx)("th",{className:"text-end",children:"QTY"}),(0,H.jsx)("th",{className:"text-end",children:"KGS"}),(0,H.jsx)("th",{className:"text-end",children:"AMOUNT"}),(0,H.jsx)("th",{className:"text-end",children:"VILAIVAASI"})]})}),(0,H.jsxs)("tbody",{children:[x.map((e,l)=>(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{children:e.Retailer_Name||e.Ledger_Name}),(0,H.jsx)("td",{children:e.Short_Name}),(0,H.jsx)("td",{className:"text-end",children:e.Item_Rate}),(0,H.jsx)("td",{className:"text-end",children:(0,i.jG)(e.Brok_Amt||0)}),(0,H.jsx)("td",{className:"text-end",children:e.QTY}),(0,H.jsx)("td",{className:"text-end",children:e.KGS}),(0,H.jsx)("td",{className:"text-end",children:(0,i.jG)(e.Amount)}),(0,H.jsx)("td",{className:"text-end",children:(0,i.jG)(e.Vilaivasi_Rate)})]},l)),(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{colSpan:"4",className:"text-end fw-bold",children:"TOTAL"}),(0,H.jsx)("td",{className:"text-end fw-bold",children:(null===n||void 0===n?void 0:n.Total_Qty)||0}),(0,H.jsx)("td",{className:"text-end fw-bold",children:(null===n||void 0===n?void 0:n.Total_KGS)||0}),(0,H.jsx)("td",{className:"text-end fw-bold",children:(0,i.jG)((null===n||void 0===n?void 0:n.Total_Amount)||0)}),(0,H.jsx)("td",{className:"text-end fw-bold",children:(0,i.jG)((null===n||void 0===n?void 0:n.VilaiVasi)||0)})]}),(0,H.jsx)("tr",{children:(0,H.jsx)("td",{className:"text-end fw-bold",children:_})})]})]}),(0,H.jsx)("div",{className:"row mt-3",children:(0,H.jsx)("div",{className:"col-6 offset-6",children:(0,H.jsx)("table",{className:"table table-bordered",style:{fontSize:"12px"},children:(0,H.jsxs)("tbody",{children:[(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{className:"fw-bold",children:"COOLIE"}),(0,H.jsx)("td",{className:"text-end fw-bold",children:(0,i.jG)(p)})]}),(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{className:"fw-bold",children:"BROKERAGE"}),(0,H.jsxs)("td",{className:"text-end fw-bold",children:["- ",(0,i.jG)(m)]})]}),(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{className:"fw-bold",children:"VILAIVAASI"}),(0,H.jsxs)("td",{className:"text-end fw-bold",children:["- ",(0,i.jG)(j)]})]}),(0,H.jsxs)("tr",{children:[(0,H.jsx)("td",{className:"fw-bold",children:"ROUNDOFF"}),(0,H.jsx)("td",{className:"text-end fw-bold",children:function(e){const l=Number(e)||0;return"".concat(l>=0?"+":"").concat((0,i.jG)(l))}(f)})]}),(0,H.jsxs)("tr",{className:"bg-light",children:[(0,H.jsx)("td",{className:"fw-bold",children:"NET TOTAL"}),(0,H.jsx)("td",{className:"text-end fw-bold",children:(0,i.jG)(b)})]})]})})})})]}):(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)("div",{style:{fontFamily:"Arial"},children:[(0,H.jsxs)("div",{style:{textAlign:"center",marginBottom:"20px"},children:[(0,H.jsx)("h3",{style:{marginBottom:"5px"},children:null===n||void 0===n?void 0:n.Broker_Name}),(0,H.jsx)("p",{style:{margin:"5px 0"},children:(null===n||void 0===n||null===(t=n.Items)||void 0===t?void 0:t.length)>0?(0,H.jsxs)(H.Fragment,{children:[c," "," TO "," ",h]}):"No date range available"})]}),(0,H.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[(0,H.jsx)("thead",{children:(0,H.jsxs)("tr",{style:{borderBottom:"1px solid #000"},children:[(0,H.jsx)("th",{style:{textAlign:"left",padding:"5px",width:"40%"},children:"NAME"}),(0,H.jsx)("th",{style:{textAlign:"left",padding:"5px",width:"10%"},children:"DATE"}),(0,H.jsx)("th",{style:{textAlign:"left",padding:"5px",width:"20%"},children:"ALIAS NAME"}),(0,H.jsx)("th",{style:{textAlign:"right",padding:"5px",width:"10%"},children:"BAGS"}),(0,H.jsx)("th",{style:{textAlign:"right",padding:"5px",width:"10%"},children:"QTY"}),"sales"===d?(0,H.jsx)("th",{style:{textAlign:"right",padding:"5px",width:"10%"},children:"AMOUNT"}):"","sales"===d?(0,H.jsx)("th",{style:{textAlign:"right",padding:"5px",width:"10%"},children:"ITEM.RATE"}):"",(0,H.jsx)("th",{style:{textAlign:"right",padding:"5px",width:"10%"},children:"BROKERAGE EXP"})]})}),(0,H.jsxs)("tbody",{children:[x.map((e,l)=>{var a;return(0,H.jsxs)("tr",{style:{borderBottom:"1px solid #ddd"},children:[(0,H.jsx)("td",{style:{padding:"5px"},children:e.Retailer_Name||e.Ledger_Name}),(0,H.jsx)("td",{style:{padding:"5px"},children:(null===(a=e.Date)||void 0===a?void 0:a.split("T")[0])||""}),(0,H.jsx)("td",{style:{padding:"5px"},children:e.Short_Name}),(0,H.jsx)("td",{style:{padding:"5px",textAlign:"right"},children:e.QTY}),(0,H.jsx)("td",{style:{padding:"5px",textAlign:"right"},children:e.KGS}),"sales"===d?(0,H.jsx)("td",{style:{padding:"5px",textAlign:"right"},children:e.TotaL_Invoice_value}):"","sales"===d?(0,H.jsx)("td",{style:{padding:"5px",textAlign:"right"},children:e.Item_Rate}):"",(0,H.jsx)("td",{style:{padding:"5px",textAlign:"right"},children:(0,i.jG)(e.Brokerage||0)})]},l)}),(0,H.jsxs)("tr",{style:{fontWeight:"bold",borderTop:"2px solid #000"},children:[(0,H.jsx)("td",{colSpan:"3",style:{padding:"5px",textAlign:"right"},children:"TOTAL"}),(0,H.jsx)("td",{style:{padding:"5px",textAlign:"right"},children:(null===n||void 0===n?void 0:n.Total_Qty)||0}),(0,H.jsx)("td",{style:{padding:"5px",textAlign:"right"},children:(null===n||void 0===n?void 0:n.Total_KGS)||0}),(0,H.jsx)("td",{style:{padding:"5px",textAlign:"right"},children:(0,i.jG)(m)})]})]})]})]})}),(0,H.jsx)("div",{className:"text-center mt-3 small",children:(0,H.jsx)("p",{children:"This is a computer generated report"})})]}),(0,H.jsxs)(C.A,{children:[(0,H.jsx)(g.A,{startIcon:(0,H.jsx)(O.A,{}),variant:"outlined",color:"error",onClick:s,children:"Close"}),(0,H.jsx)(g.A,{startIcon:(0,H.jsx)(G.A,{}),variant:"contained",color:"primary",onClick:A,children:"Download"})]})]})})};var K=a(69223),U=a.n(K),Z=a(72450);const X=e=>{let{open:l,onClose:a,brokerData:o,transactionType:i,fromDate:s,toDate:n}=e;const d=(null===o||void 0===o?void 0:o.Items)||[];let c;c="salesNagal"===i?d.reduce((e,l)=>e+parseFloat(l.Brok_Amt||0),0):d.reduce((e,l)=>e+parseInt(l.Brokerage||0),0);const h=d.reduce((e,l)=>e+parseFloat(l.Coolie_Amt||0),0),g=parseFloat((null===o||void 0===o?void 0:o.Total_Amount)||0),u=parseFloat((null===o||void 0===o?void 0:o.VilaiVasi)||0),A=g-c+h-u,x=Math.round(A),m=x-A,p=e=>{const l=Number(e)||0;return(l>=0?"+":"")+l.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})},y=()=>{const e=d.reduce((e,l)=>{const a=Math.round(parseFloat(l.KGS)/parseFloat(l.QTY));return isNaN(a)||(e[a]=(e[a]||0)+parseFloat(l.QTY)),e},{});return Object.entries(e).sort((e,l)=>{let[a]=e,[t]=l;return a-t}).map(e=>{let[l,a]=e;return"".concat(l,"kg - ").concat(a)}).join(" & ")},j=async()=>{try{var e;const l=new(U().Workbook),a=l.addWorksheet("Brokerage Report");l.created=new Date,l.modified=new Date;const t=a.addRow([(null===o||void 0===o?void 0:o.Broker_Name)||""]);t.font={bold:!0,size:14},t.alignment={horizontal:"center"},a.mergeCells("A1:F1");const r=a.addRow([(null===o||void 0===o||null===(e=o.Items)||void 0===e?void 0:e.length)>0?"".concat(s," TO ").concat(n):"No date range available"]);r.font={bold:!0},r.alignment={horizontal:"center"},a.mergeCells("A2:F2"),a.addRow([]);const h=[{header:"NAME",width:50},{header:"DATE",width:10},{header:"ALIAS NAME",width:40},{header:"BAGS",width:10},{header:"QTY",width:10},..."sales"===i?[{header:"Item_Rate",width:10}]:[],{header:"BROKERAGE EXP",width:15}];a.addRow(h.map(e=>e.header)).eachCell(e=>{e.font={bold:!0},e.border={top:{style:"thin",color:{argb:"FF000000"}},left:{style:"thin",color:{argb:"FF000000"}},bottom:{style:"thin",color:{argb:"FF000000"}},right:{style:"thin",color:{argb:"FF000000"}}}}),h.forEach((e,l)=>{a.getColumn(l+1).width=e.width}),d.forEach(e=>{var l;const t=a.addRow([e.Retailer_Name||e.Ledger_Name,(null===(l=e.Date)||void 0===l?void 0:l.split("T")[0])||"",e.Short_Name,e.QTY,e.KGS,..."sales"===i?[e.Item_Rate]:[],Number(e.Brokerage||0)]);t.eachCell(e=>{e.font={bold:!0},e.border={top:{style:"thin",color:{argb:"FF000000"}},left:{style:"thin",color:{argb:"FF000000"}},bottom:{style:"thin",color:{argb:"FF000000"}},right:{style:"thin",color:{argb:"FF000000"}}}}),t.getCell(4).alignment={horizontal:"right"},t.getCell(5).alignment={horizontal:"right"},t.getCell(6).alignment={horizontal:"right"}});const g=a.addRow(["","","TOTAL",Number(null===o||void 0===o?void 0:o.Total_Qty)||0,Number(null===o||void 0===o?void 0:o.Total_KGS)||0,c]);g.eachCell(e=>{e.font={bold:!0},e.border={top:{style:"medium",color:{argb:"FF000000"}},left:{style:"thin",color:{argb:"FF000000"}},bottom:{style:"thin",color:{argb:"FF000000"}},right:{style:"thin",color:{argb:"FF000000"}}}}),g.getCell(4).alignment={horizontal:"right"},g.getCell(5).alignment={horizontal:"right"},g.getCell(6).alignment={horizontal:"right"};const u=await l.xlsx.writeBuffer(),A=new Blob([u],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),x=URL.createObjectURL(A),m=document.createElement("a");m.href=x,m.download="".concat(null===o||void 0===o?void 0:o.Broker_Name,"_").concat(s,"_to_").concat(n,".xlsx"),m.click(),setTimeout(()=>{URL.revokeObjectURL(x)},100)}catch(l){console.error("Error exporting to Excel:",l)}};return(0,r.useEffect)(()=>{l&&("salesNagal"===i?(async()=>{var e,l,a,r;const i=new(U().Workbook),s=i.addWorksheet("Broker Report"),n={style:"thick",color:{argb:"FF000000"}},g={border:{top:n,bottom:n,left:n,right:n}},A=s.addRow(["Broker Report: ".concat((null===o||void 0===o?void 0:o.Broker_Name)||""," - Date: ").concat(null===o||void 0===o||null===(e=o.Items)||void 0===e||null===(l=e[0])||void 0===l?void 0:l.Date)]);s.mergeCells("A".concat(A.number,":H").concat(A.number)),A.eachCell(e=>{e.style=(0,t.A)((0,t.A)({},g),{},{font:{bold:!0,size:14},alignment:{horizontal:"center"},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFD9D9D9"}}})}),s.addRow([]);const j=s.addRow(["PARTY NAME","ALIAS NAME","BILL RATE","BROKER EXP","QTY","KGS","AMOUNT","VILAIVAASI"]);s.columns=[{width:50},{width:30},{width:15},{width:15},{width:10},{width:10},{width:15},{width:15}],j.eachCell(e=>{e.style=(0,t.A)((0,t.A)({},g),{},{font:{bold:!0,color:{argb:"FFFFFFFF"},size:12},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF2F5496"}},alignment:{horizontal:"center",vertical:"middle"}})}),d.forEach((e,l)=>{const a=s.addRow([e.Retailer_Name||e.Ledger_Name||"",e.Short_Name||"",e.Item_Rate||"",e.Brok_Amt||"",e.QTY||"",e.KGS||"",Number(e.Amount||0),Number(e.Vilaivasi_Rate||0)]);a.eachCell(e=>{e.style=(0,t.A)((0,t.A)({},g),{},{font:{size:11},alignment:{vertical:"middle"},fill:l%2===1?{type:"pattern",pattern:"solid",fgColor:{argb:"FFF2F2F2"}}:void 0})}),a.getCell(7).numFmt="#,##0.00",a.getCell(8).numFmt="#,##0.00"}),s.addRow(["","","","TOTAL",Number((null===o||void 0===o?void 0:o.Total_Qty)||0),Number((null===o||void 0===o?void 0:o.Total_KGS)||0),Number((null===o||void 0===o?void 0:o.Total_Amount)||0),Number((null===o||void 0===o?void 0:o.VilaiVasi)||0)]).eachCell((e,l)=>{l>=4?(e.style=(0,t.A)((0,t.A)({},g),{},{font:{bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF70AD47"}}}),l>=5&&(e.numFmt=5===l||6===l?"0.00":"#,##0.00")):e.style=g}),s.addRow([]);const v=s.addRow(["Pack Sizes: ".concat(y())]);s.mergeCells("A".concat(v.number,":H").concat(v.number)),v.eachCell(e=>{e.style=(0,t.A)((0,t.A)({},g),{},{font:{italic:!0},alignment:{horizontal:"left"}})}),s.addRow([]),[{label:"COOLIE",value:Number(h)},{label:"BROKERAGE",value:Number(-c)},{label:"VILAIVAASI",value:Number(-u)},{label:"ROUNDOFF",value:p(m)},{label:"NET TOTAL",value:Number(x)}].forEach(e=>{const l=s.addRow(["","","","","",e.label,e.value,""]);l.getCell(6).style=(0,t.A)((0,t.A)({},g),{},{font:{bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF4472C4"}},alignment:{horizontal:"right"}}),l.getCell(7).style=(0,t.A)((0,t.A)({},g),{},{font:{bold:!0,color:{argb:"FF000000"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFFC000"}},alignment:{horizontal:"right"},numFmt:"#,##0.00"})}),s.addRow([]),s.addRow([]);const b=await i.xlsx.writeBuffer();(0,Z.saveAs)(new Blob([b]),"Broker_Report_".concat((null===o||void 0===o?void 0:o.Broker_Name)||"Export","_").concat(null===o||void 0===o||null===(a=o.Items)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.Date,".xlsx"))})().then(()=>{"function"===typeof a&&a()}):("purchase"===i||"sales"===i)&&j().then(()=>{"function"===typeof a&&a()}))},[l,i]),null};var q=a(51387);const J=e=>{let{loadingOn:l,loadingOff:a}=e;const[O,G]=(0,r.useState)("salesNagal"),[W,K]=(0,r.useState)({page:0,rowsPerPage:10}),[U,Z]=(0,r.useState)({page:0,rowsPerPage:10}),[J,$]=(0,r.useState)(0),[ee,le]=(0,r.useState)({broker:[]}),[ae,te]=(0,r.useState)({deliveryReport:[],brokerageValues:{},filters:{FromDate:(new Date).toISOString().split("T")[0],ToDate:(new Date).toISOString().split("T")[0],Broker:{value:"",label:"ALL Brokers"},refresh:!1,filterDialog:!1},headerVilaiVasi:""}),[re,oe]=(0,r.useState)({deliveryReport:[],brokerageValues:{},filters:{FromDate:(new Date).toISOString().split("T")[0],ToDate:(new Date).toISOString().split("T")[0],Broker:{value:"",label:"ALL Brokers"},refresh:!1,filterDialog:!1},headerVilaiVasi:""}),[ie,se]=(0,r.useState)({deliveryReport:[],brokerageValues:{},filters:{FromDate:(new Date).toISOString().split("T")[0],ToDate:(new Date).toISOString().split("T")[0],Broker:{value:"",label:"ALL Brokers"},refresh:!1,filterDialog:!1},headerBrokerage:""}),[ne,de]=(0,r.useState)({FromDate:(new Date).toISOString().split("T")[0],ToDate:(new Date).toISOString().split("T")[0],Broker:{value:"",label:"ALL Brokers"},Ledger:{value:"",label:"All Ledger"},Item:{value:"",label:"All Item"},VilaiVasiZero:{value:"",label:"All"},refresh:!1,filterDialog:!1}),[ce,he]=(0,r.useState)([]),[ge,ue]=(0,r.useState)({ledgers:[],items:[]}),[Ae,xe]=(0,r.useState)({}),[me,pe]=(0,r.useState)(!1),ye=JSON.parse(localStorage.getItem("user")),[je,ve]=(0,r.useState)(!1),[be,ke]=(0,r.useState)(!1),[fe,_e]=(0,r.useState)(null),[Fe,Ne]=(0,r.useState)(null),[Ce,Te]=(0,r.useState)(null),[Re,De]=(0,r.useState)(!1),[Be,Ie]=(0,r.useState)(!1),[Se,we]=(0,r.useState)(null),[Pe,Ve]=(0,r.useState)(null),[Ee,Le]=(0,r.useState)(!1),ze="salesNagal"===O?ae:"sales"===O?re:ie,Qe="salesNagal"===O?te:"sales"===O?oe:se;(0,r.useEffect)(()=>{(0,o.z)({address:"reports/brokerageReport/getInvolvedBroker"}).then(e=>{e.success&&le(l=>(0,t.A)((0,t.A)({},l),{},{broker:(0,i.$r)(e.data)}))}).catch(console.error)},[]),(0,r.useEffect)(()=>{(async()=>{try{l();const e="salesNagal"===O?"brokerageNakalReport/sales":"sales"===O?"brokerageNakalReport/salesEntry":"brokerageNakalReport/purchase",a=await(0,o.z)({address:"reports/".concat(e,"?FromDate=").concat(ze.filters.FromDate,"&ToDate=").concat(ze.filters.ToDate,"&broker=").concat(ze.filters.Broker.value)});if(a.success){const e=(0,i.$r)(a.data),l={};e.forEach(e=>{const a="".concat(e.Do_Id,"-").concat(e.Product_Id);l[a]=e.brokerage||""}),Qe(a=>(0,t.A)((0,t.A)({},a),{},{deliveryReport:e,brokerageValues:l}))}else Qe(e=>(0,t.A)((0,t.A)({},e),{},{deliveryReport:[],brokerageValues:{}}))}catch(e){console.error(e),Qe(e=>(0,t.A)((0,t.A)({},e),{},{deliveryReport:[],brokerageValues:{}}))}finally{a()}})()},[O,ze.filters.refresh]);const Me={salesNagal:{dataEntryColumns:[{label:"Date",key:"Date",align:"left",render:e=>{var l;return(null===(l=e.Date)||void 0===l?void 0:l.split("T")[0])||"N/A"}},{label:"Do No",key:"Do_Inv_No"},{label:"Product",key:"Product_Name"},{label:"Ledger_Name",key:"Retailer_Name"},{label:"Broker",key:"CostCenterGet"},{label:"Act_Qty",key:"Act_Qty",align:"right"},{label:"Qty",key:"displayQuantity",align:"right"},{label:"Rate",key:"Rate",align:"right",render:e=>e.Rate||e.Item_Rate},{label:"Pack",key:"Pack",align:"right"},{label:"Amount",key:"Amount",align:"right"},{label:"Brok.Rate",key:"Brokerage",align:"right",render:(e,l,a)=>(0,H.jsx)(s.A,{size:"small",type:"number",value:e.Brokerage,onChange:e=>a(l,"Brokerage",e.target.value),sx:{width:"80px"},inputProps:{step:"0.01"}})},{label:"Brokerage",key:"BrokerageAmount",align:"right",render:e=>(e.Brokerage*e.displayQuantity).toFixed(2)},{label:"Coolie.Rate",key:"Coolie",align:"right",render:(e,l,a)=>(0,H.jsx)(s.A,{size:"small",type:"number",value:e.Coolie,onChange:e=>a(l,"Coolie",e.target.value),sx:{width:"80px"},inputProps:{step:"0.01"}})},{label:"Coolie.Amt",key:"CoolieAmount",align:"right",render:e=>(e.Coolie*e.displayQuantity).toFixed(2)},{label:"VilaiVasi",key:"VilaiVasi",align:"right",render:(e,l,a,t,r)=>(0,H.jsx)(s.A,{size:"small",type:"number",value:t,onChange:r(e.Do_Id,e.Product_Id),sx:{width:"120px"},inputProps:{step:"0.01"}})},{label:"Narration",key:"Narration",align:"right"},{label:"Vilai Amt",key:"VilaiAmt",align:"right",render:(e,l,a,t,r,o)=>(+o(t,e.Act_Qty)).toFixed(2)}],listingColumns:[{label:"Broker",key:"Broker_Name"},{label:"Total KGS",key:"Total_KGS",align:"right"},{label:"Total Bill Qty",key:"Total_Qty",align:"right"},{label:"Total_Amount",key:"Total_Amount",align:"right"},{label:"Total_Broker_Exp",key:"Broker_Exp",align:"right"},{label:"Total_VilaiVasi",key:"VilaiVasi",align:"right"},{label:"Total_Bags",key:"Total_Bags",align:"right"}]},sales:{dataEntryColumns:[{label:"Date",key:"Date",align:"left",render:e=>{var l;return(null===(l=e.Date)||void 0===l?void 0:l.split("T")[0])||"N/A"}},{label:"Do No",key:"Do_Inv_No"},{label:"Product",key:"Product_Name"},{label:"Ledger_Name",key:"Retailer_Name"},{label:"Broker",key:"CostCenterGet"},{label:"Act_Qty",key:"Act_Qty",align:"right"},{label:"Qty",key:"displayQuantity",align:"right"},{label:"Rate",key:"Rate",align:"right",render:e=>e.Rate||e.Item_Rate},{label:"Pack",key:"Pack",align:"right"},{label:"Amount",key:"Amount",align:"right"},{label:"Brokerage",key:"Brokerage",align:"right",render:(e,l,a,t,r)=>(0,H.jsx)(s.A,{size:"small",type:"number",value:t,onChange:r(e.Do_Id,e.Product_Id),sx:{width:"120px"},inputProps:{step:"0.01"}})},{label:"Brokerage Amt",key:"BrokerageAmount",align:"right",render:(e,l,a,t)=>((parseFloat(t)||0)*(parseFloat(e.Act_Qty)||0)/100).toFixed(2)}],listingColumns:[{label:"Broker",key:"Broker_Name"},{label:"Total KGS",key:"Total_KGS",align:"right"},{label:"Total Bill Qty",key:"Total_Qty",align:"right"},{label:"Total_Amount",key:"Total_Amount",align:"right"},{label:"Total_Broker_Exp",key:"Broker_Exp",align:"right"},{label:"Total_Bags",key:"Total_Bags",align:"right"}]},purchase:{dataEntryColumns:[{label:"Date",key:"Date",align:"left",render:e=>{var l;return(null===(l=e.Po_Entry_Date)||void 0===l?void 0:l.split("T")[0])||"N/A"}},{label:"Invoice No",key:"Po_Inv_No"},{label:"Retailer",key:"Retailer_Name"},{label:"Broker",key:"CostCenterGet",align:"right"},{label:"Product",key:"Product_Name"},{label:"Act_Qty",key:"Act_Qty",align:"right"},{label:"Pack",key:"Pack",align:"right"},{label:"Qty",key:"displayQuantity",align:"right",render:e=>Number(e.displayQuantity).toFixed(2)},{label:"Rate",key:"Item_Rate",align:"right"},{label:"Amount",key:"Total_Invoice_value",align:"right"},{label:"Brokerage",key:"Brokerage",align:"right",render:(e,l,a,t,r)=>(0,H.jsx)(s.A,{size:"small",type:"number",value:t,onChange:r(e.Do_Id,e.Product_Id,e.PIN_Id),sx:{width:"120px"},inputProps:{step:"0.01"}})},{label:"Brokerage Amt",key:"BrokerageAmount",align:"right",render:(e,l,a,t)=>((parseFloat(t)||0)*(parseFloat(e.Act_Qty)||0)/100).toFixed(2)}],listingColumns:[{label:"Supplier",key:"Supplier_Name"},{label:"Total KGS",key:"Total_KGS",align:"right"},{label:"Total Bill Qty",key:"Total_Qty",align:"right"},{label:"Total_Amount",key:"Total_Amount",align:"right"},{label:"Total_Broker_Exp",key:"Broker_Exp",align:"right"},{label:"Total_Bags",key:"Total_Bags",align:"right"}]}};(0,r.useEffect)(()=>{(async()=>{try{l();let e="";"salesNagal"===O?e="reports/brokerageNagal/list?FromDate=".concat(ne.FromDate,"&ToDate=").concat(ne.ToDate):"purchase"===O?e="reports/brokerageNagalDelivery/list?FromDate=".concat(ne.FromDate,"&ToDate=").concat(ne.ToDate):"sales"===O&&(e="reports//brokerageNagalSales/list?FromDate=".concat(ne.FromDate,"&ToDate=").concat(ne.ToDate)),ne.Broker.value&&(e+="&broker=".concat(ne.Broker.value)),ne.Ledger.value&&(e+="&ledger=".concat(ne.Ledger.value)),ne.Item.value&&(e+="&item=".concat(ne.Item.value)),ne.VilaiVasiZero.value&&(e+="&vilaivasiFilter=".concat(ne.VilaiVasiZero.value));const a=await(0,o.z)({address:e});if(a.success){const e=(0,i.$r)(a.data);he(e);const l=e.flatMap(e=>e.Items||[]),t=Array.from(new Map(l.map(e=>[e.Ledger_Tally_Id,{value:e.Ledger_Tally_Id,label:e.Ledger_Name}])).values()),r=Array.from(new Map(l.map(e=>[e.Product_Id,{value:e.Product_Id,label:e.Product_Name}])).values());ue({ledgers:t,items:r})}}catch(e){console.error(e)}finally{a()}})()},[ne.refresh,O]);const Oe=async()=>{try{l();const e=(0,t.A)((0,t.A)({},Ce),{},{TransactionType:O,Updated_By:null===ye||void 0===ye?void 0:ye.UserId});console.log("w",Ce),"salesNagal"===O?(e.Brok_Amt=(parseFloat(Ce.Brok_Rate)||0)*(parseFloat(Ce.QTY)||0),e.Coolie_Amt=(parseFloat(Ce.Coolie_Rate)||0)*(parseFloat(Ce.QTY)||0),e.Vilai_Vasi=parseFloat(Ce.Vilai_Vasi)||0,e.Vilaivasi_Rate=(parseFloat(Ce.Vilai_Vasi)||0)*(parseFloat(Ce.QTY)||0)/100):"sales"!==O&&"purchase"!==O||(e.Brokerage_Amt=(parseFloat(Ce.Brokerage)||0)*(parseFloat(Ce.Act_Qty)||0)/100,e.Brokerage=parseFloat(null===Ce||void 0===Ce?void 0:Ce.Act_Qty)/100*Ce.Brokerage_Amt);const a=await(0,o.z)({address:"reports/brokerageNagalPurchase/list",method:"PUT",bodyData:e,headers:{"Content-Type":"application/json"}});a.success?(z.oR.success("Item updated successfully!"),de(e=>(0,t.A)((0,t.A)({},e),{},{refresh:!e.refresh})),Te(null)):z.oR.error(a.message||"Update failed")}catch(e){z.oR.error("Update failed due to an error")}finally{a()}},Ge=(e,l,a)=>r=>{const o=r.target.value,i="salesNagal"===O||"sales"===O?"".concat(e,"-").concat(l):"".concat(a,"-").concat(l);Qe(e=>(0,t.A)((0,t.A)({},e),{},{brokerageValues:(0,t.A)((0,t.A)({},e.brokerageValues),{},{[i]:o})}))},We=()=>Qe(e=>(0,t.A)((0,t.A)({},e),{},{filters:(0,t.A)((0,t.A)({},e.filters),{},{filterDialog:!1})})),He=()=>de(e=>(0,t.A)((0,t.A)({},e),{},{filterDialog:!1})),Ye=(e,l,a)=>{const r=[...ze.deliveryReport];r[e][l]=parseFloat(a)||0,Qe(e=>(0,t.A)((0,t.A)({},e),{},{deliveryReport:r}))},Ke=e=>{G(e),K({page:0,rowsPerPage:10})},Ue=(0,r.useMemo)(()=>ze.deliveryReport.reduce((e,l)=>(0,i.Lr)(e,l.displayQuantity||l.Qty||0),0),[ze.deliveryReport]),Ze=(0,r.useMemo)(()=>ce.reduce((e,l)=>(0,i.Lr)(e,l.Total_Bags||0),0),[ce]),Xe=(e,l)=>(parseFloat(e)||0)/100*(parseFloat(l)||0),qe=(0,r.useMemo)(()=>ce&&0!==ce.length?ce.reduce((e,l)=>{const a=l.Broker_Name||l.Supplier_Name||"Unknown";return e[a]||(e[a]=[]),e[a].push(l),e},{}):{},[ce]),Je=(0,r.useMemo)(()=>Object.keys(qe),[qe]),$e=(e,l)=>!!e&&(e.Product_Id===l.Product_Id&&e.Do_Inv_No===l.Do_Inv_No&&(e.Ledger_Tally_Id?e.Ledger_Tally_Id===l.Ledger_Tally_Id:e.Ledger_Name===l.Ledger_Name));return(0,H.jsxs)(n.A,{children:[(0,H.jsxs)(d.A,{sx:{p:3,mb:3},children:[(0,H.jsxs)(c.Ay,{container:!0,justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,H.jsx)(h.A,{variant:"h5",component:"h2",children:"Brokerage Nagal Report"}),(0,H.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,children:[(0,H.jsxs)(n.A,{display:"flex",gap:1,children:[(0,H.jsx)(g.A,{variant:"salesNagal"===O?"contained":"outlined",onClick:()=>Ke("salesNagal"),children:"SalesNagal"}),(0,H.jsx)(g.A,{variant:"purchase"===O?"contained":"outlined",onClick:()=>Ke("purchase"),children:"Purchase"}),(0,H.jsx)(g.A,{variant:"sales"===O?"contained":"outlined",onClick:()=>Ke("sales"),children:"Sales"})]}),(0,H.jsx)(g.A,{variant:"outlined",startIcon:(0,H.jsx)(D.A,{}),onClick:()=>{0===J?Qe(e=>(0,t.A)((0,t.A)({},e),{},{filters:(0,t.A)((0,t.A)({},e.filters),{},{filterDialog:!0})})):de(e=>(0,t.A)((0,t.A)({},e),{},{filterDialog:!0}))},children:"Filters"}),(0,H.jsxs)(h.A,{component:"span",variant:"body1",children:["Total Bags:"," ",(0,H.jsx)("strong",{children:0===J?Ue:Ze})]})]})]}),(0,H.jsxs)(u.A,{value:J,onChange:(e,l)=>$(l),sx:{mb:3},children:[(0,H.jsx)(A.A,{label:"Data Entry"}),(0,H.jsx)(A.A,{label:"Listing"})]}),0===J&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(n.A,{mb:1,sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:2},children:[(0,H.jsx)(h.A,{sx:{fontWeight:"bold"},children:"salesNagal"===O?"VilaiVasi (All):":"Brokerage (All):"}),(0,H.jsx)(s.A,{type:"number",size:"small",value:ze.headerVilaiVasi,inputProps:{step:"1"},onChange:e=>{const l=e.target.value;Qe(e=>{const a=(0,t.A)({},e.brokerageValues);return e.deliveryReport.forEach(e=>{const t="salesNagal"===O||"sales"===O?"".concat(e.Do_Id,"-").concat(e.Product_Id):"".concat(e.PIN_Id,"-").concat(e.Product_Id);a[t]=l}),(0,t.A)((0,t.A)({},e),{},{headerVilaiVasi:l,brokerageValues:a})})},placeholder:"Set ".concat("salesNagal"===O?"VilaiVasi":"Brokerage"," for all"),sx:{"& .MuiInputBase-input":{height:40,boxSizing:"border-box"}}}),(0,H.jsx)(g.A,{variant:"outlined",size:"small",onClick:()=>{Qe(e=>{const l=(0,t.A)({},e.brokerageValues);return e.deliveryReport.forEach(e=>{const a="salesNagal"===O||"sales"===O?"".concat(e.Do_Id,"-").concat(e.Product_Id):"".concat(e.PIN_Id,"-").concat(e.Product_Id);l[a]=""}),(0,t.A)((0,t.A)({},e),{},{headerVilaiVasi:"",brokerageValues:l})})},children:"Clear All"})]}),(0,H.jsxs)(x.A,{component:d.A,children:[(0,H.jsxs)(m.A,{size:"small",children:[(0,H.jsx)(p.A,{children:(0,H.jsx)(y.A,{sx:{backgroundColor:"primary.main"},children:Me[O].dataEntryColumns.map(e=>(0,H.jsx)(j.A,{sx:{color:"white",fontWeight:"bold"},align:e.align||"left",children:e.label},e.key))})}),(0,H.jsx)(v.A,{children:ze.deliveryReport.length>0?ze.deliveryReport.slice(W.page*W.rowsPerPage,W.page*W.rowsPerPage+W.rowsPerPage).map((e,l)=>{const a=ze.brokerageValues["salesNagal"===O||"sales"===O?"".concat(e.Do_Id,"-").concat(e.Product_Id):"".concat(e.PIN_Id,"-").concat(e.Product_Id)]||"";return(0,H.jsx)(y.A,{hover:!0,children:Me[O].dataEntryColumns.map(t=>(0,H.jsx)(j.A,{align:t.align||"left",children:t.render?t.render(e,l,Ye,a,Ge,Xe):e[t.key]},t.key))},l)}):(0,H.jsx)(y.A,{children:(0,H.jsx)(j.A,{colSpan:Me[O].dataEntryColumns.length,align:"center",children:"No data found"})})})]}),(0,H.jsx)(b.A,{rowsPerPageOptions:[10,25,50,100],component:"div",count:ze.deliveryReport.length,rowsPerPage:W.rowsPerPage,page:W.page,onPageChange:(e,l)=>K((0,t.A)((0,t.A)({},W),{},{page:l})),onRowsPerPageChange:e=>K({page:0,rowsPerPage:parseInt(e.target.value,10)})})]}),(0,H.jsx)(n.A,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:(0,H.jsx)(g.A,{variant:"contained",color:"primary",startIcon:(0,H.jsx)(B.A,{}),onClick:async()=>{l();try{pe(!0);const e=ze.deliveryReport.map(e=>{const l="salesNagal"===O||"sales"===O?"".concat(e.Do_Id,"-").concat(e.Product_Id):"".concat(e.PIN_Id,"-").concat(e.Product_Id),a=ze.brokerageValues[l]||e.Brokerage||0;return"salesNagal"===O?(0,t.A)((0,t.A)({},e),{},{brokerage:parseFloat(a)||0,Vilai_Vasi:parseFloat(a)||0,Vilaivasi_Rate:(parseFloat(a)||0)/100*(parseFloat(e.Act_Qty)||0),Brok_Rate:(null===e||void 0===e?void 0:e.Brokerage)||0,Brok_Amt:((null===e||void 0===e?void 0:e.Brokerage)||0)*((null===e||void 0===e?void 0:e.displayQuantity)||0),Coolie_Rate:(null===e||void 0===e?void 0:e.Coolie)||0,Coolie_Amt:((null===e||void 0===e?void 0:e.Coolie)||0)*((null===e||void 0===e?void 0:e.displayQuantity)||0),Amount:(null===e||void 0===e?void 0:e.Amount)||0,Created_By:null===ye||void 0===ye?void 0:ye.UserId}):(0,t.A)((0,t.A)({},e),{},{brokerage:(parseFloat(a)||0)*(parseFloat(e.Act_Qty)||0)/100,Created_By:null===ye||void 0===ye?void 0:ye.UserId})});let l;l="salesNagal"===O?"reports/brokerageNagal/create":"sales"===O?"reports/brokerageNagal/createSales":"reports/brokerageNakal/deliveryCreate";const a=await(0,o.z)({address:l,method:"POST",bodyData:e,headers:{"Content-Type":"application/json"}});if(a.success){let e;e="salesNagal"===O?"Sales Nagal created successfully!":"sales"===O?"Sales brokerage created successfully!":"Purchase nakal created successfully!",z.oR.success(e),Qe(e=>(0,t.A)((0,t.A)({},e),{},{filters:(0,t.A)((0,t.A)({},e.filters),{},{refresh:!e.filters.refresh})}))}else z.oR.error(a.message||"Save operation failed")}catch(e){console.error("Save error:",e),z.oR.error("Save failed due to an error")}finally{pe(!1),a()}},disabled:me,size:"large",children:me?"Saving...":"Save ".concat("salesNagal"===O?"sales"===O?"Sales":"Purchase":"Sales Nagal"," Brokerage")})})]}),1===J&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(n.A,{sx:{mb:2,display:"flex",justifyContent:"flex-end"},children:(0,H.jsx)(g.A,{variant:"outlined",color:"error",startIcon:(0,H.jsx)(q.A,{}),onClick:()=>Le(!0),disabled:0===ce.length,children:"Delete All"})}),(0,H.jsxs)(x.A,{component:d.A,children:[(0,H.jsxs)(m.A,{size:"small",children:[(0,H.jsx)(p.A,{children:(0,H.jsxs)(y.A,{sx:{backgroundColor:"primary.main"},children:[Me[O].listingColumns.map(e=>(0,H.jsx)(j.A,{sx:{color:"white",fontWeight:"bold"},align:e.align||"left",children:e.label},e.key)),(0,H.jsx)(j.A,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Actions"})]})}),(0,H.jsx)(v.A,{children:Je.length>0?Je.slice(U.page*U.rowsPerPage,U.page*U.rowsPerPage+U.rowsPerPage).map((e,l)=>{const a=qe[e][0];return(0,H.jsxs)(r.Fragment,{children:[(0,H.jsxs)(y.A,{hover:!0,children:[(0,H.jsxs)(j.A,{children:[(0,H.jsx)(k.A,{size:"small",onClick:()=>(e=>xe(l=>(0,t.A)((0,t.A)({},l),{},{[e]:!l[e]})))(e),children:Ae[e]?(0,H.jsx)(I.A,{}):(0,H.jsx)(S.A,{})}),e]}),Me[O].listingColumns.slice(1).map(e=>(0,H.jsx)(j.A,{align:e.align||"left",children:a[e.key]||"0.00"},e.key)),(0,H.jsx)(j.A,{align:"right",children:(0,H.jsxs)(n.A,{display:"flex",gap:1,justifyContent:"flex-end",children:[(0,H.jsx)(f.A,{title:"Preview PDF",children:(0,H.jsx)(k.A,{color:"primary",onClick:()=>{_e(a),ve(!0)},children:(0,H.jsx)(Q.A,{})})}),(0,H.jsx)(f.A,{title:"Preview Excel",children:(0,H.jsx)(k.A,{color:"primary",onClick:()=>{Ne(a),ke(!0)},children:(0,H.jsx)(M.A,{})})}),(0,H.jsx)(f.A,{title:"Delete",children:(0,H.jsx)(k.A,{color:"error",onClick:e=>{e.stopPropagation(),Ve(a),De(!0)},children:(0,H.jsx)(q.A,{})})})]})})]}),(0,H.jsx)(y.A,{children:(0,H.jsx)(j.A,{style:{padding:0},colSpan:Me[O].listingColumns.length+1,children:(0,H.jsx)(_.A,{in:Ae[e],timeout:"auto",unmountOnExit:!0,children:(0,H.jsxs)(n.A,{margin:1,children:[(0,H.jsxs)(h.A,{variant:"h6",gutterBottom:!0,component:"div",children:["Details for ",e]}),(0,H.jsxs)(m.A,{size:"small",children:[(0,H.jsx)(p.A,{children:(0,H.jsxs)(y.A,{children:[(0,H.jsx)(j.A,{children:"Date"}),(0,H.jsx)(j.A,{children:"Do/Inv No"}),(0,H.jsx)(j.A,{children:"salesNagal"===O||"sales"===O?"Retailer":"Supplier"}),(0,H.jsx)(j.A,{children:"Product"}),(0,H.jsx)(j.A,{children:"Short Name"}),(0,H.jsx)(j.A,{align:"right",children:"QTY"}),(0,H.jsx)(j.A,{align:"right",children:"KGS"}),(0,H.jsx)(j.A,{align:"right",children:"Amount"}),(0,H.jsx)(j.A,{align:"right",children:"Act Qty"}),(0,H.jsx)(j.A,{align:"right",children:"sales"===O?"Item_Rate":""}),(0,H.jsx)(j.A,{align:"right",children:"salesNagal"===O?"Broker Amt":"Brok.Amt"}),"salesNagal"===O&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(j.A,{align:"right",children:"Brok.Rate"}),(0,H.jsx)(j.A,{align:"right",children:"Coolie.Amt"}),(0,H.jsx)(j.A,{align:"right",children:"Coolie.Rate"}),(0,H.jsx)(j.A,{align:"right",children:"Vilai_Vasi"}),(0,H.jsx)(j.A,{align:"right",children:"Vilaiva.Rat"})]}),Ce&&("sales"===O||"purchase"===O)&&(0,H.jsx)(j.A,{align:"right",children:"Brokerage"}),(0,H.jsx)(j.A,{align:"right",children:"Actions"})]})}),(0,H.jsx)(v.A,{children:qe[e].flatMap(e=>{var l;return null===(l=e.Items)||void 0===l?void 0:l.map((e,l)=>(0,H.jsxs)(y.A,{children:[(0,H.jsx)(j.A,{children:e.Date}),(0,H.jsx)(j.A,{children:e.Do_Inv_No||e.Po_Inv_No}),(0,H.jsx)(j.A,{children:e.Retailer_Name||e.Supplier_Name}),(0,H.jsx)(j.A,{children:e.Product_Name}),(0,H.jsx)(j.A,{children:e.Short_Name}),(0,H.jsx)(j.A,{align:"right",children:e.QTY}),(0,H.jsx)(j.A,{align:"right",children:e.KGS}),(0,H.jsx)(j.A,{align:"right",children:"salesNagal"===O||"sales"===O?e.Amount:e.Total_Invoice_value}),(0,H.jsx)(j.A,{align:"right",children:"salesNagal"===O?e.QTY:e.Act_Qty}),(0,H.jsx)(j.A,{align:"right",children:"sales"===O?e.Item_Rate:""}),$e(Ce,e)?(0,H.jsxs)(H.Fragment,{children:["salesNagal"===O?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(j.A,{align:"right",children:((Ce.Brok_Rate||0)*(Ce.QTY||0)).toFixed(2)}),(0,H.jsx)(j.A,{align:"right",sx:{minWidth:120},children:(0,H.jsx)(s.A,{size:"small",type:"number",value:Ce.Brok_Rate||"",onChange:e=>{const l=parseFloat(e.target.value)||0;Te((0,t.A)((0,t.A)({},Ce),{},{Brok_Rate:l,Brok_Amt:(l*(Ce.QTY||0)).toFixed(2)}))},inputProps:{step:"0.01",style:{textAlign:"right"}}})}),(0,H.jsx)(j.A,{align:"right",children:((Ce.Coolie_Rate||0)*(Ce.QTY||0)).toFixed(2)}),(0,H.jsx)(j.A,{align:"right",sx:{minWidth:120},children:(0,H.jsx)(s.A,{size:"small",type:"number",value:Ce.Coolie_Rate||"",onChange:e=>{const l=parseFloat(e.target.value)||0;Te((0,t.A)((0,t.A)({},Ce),{},{Coolie_Rate:l,Coolie_Amt:(l*(Ce.QTY||0)).toFixed(2)}))},inputProps:{step:"0.01",style:{textAlign:"right"}}})}),(0,H.jsx)(j.A,{align:"right",sx:{minWidth:120},children:(0,H.jsx)(s.A,{size:"small",type:"number",value:Ce.Vilai_Vasi||"",onChange:e=>{const l=parseFloat(e.target.value)||0;Te((0,t.A)((0,t.A)({},Ce),{},{Vilai_Vasi:l,Vilaivasi_Rate:(l/100*(Ce.QTY||0)).toFixed(2)}))},inputProps:{step:"1",style:{textAlign:"right"}}})}),(0,H.jsx)(j.A,{align:"right",children:((Ce.Vilai_Vasi||0)*(Ce.QTY||0)/100).toFixed(2)})]}):"sales"===O?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(j.A,{align:"right",children:Ce.Brokerage_Amt&&Ce.Act_Qty?(Ce.Brokerage_Amt*Ce.Act_Qty/100).toFixed(2):"0.00"}),(0,H.jsx)(j.A,{align:"right",sx:{minWidth:120},children:(0,H.jsx)(s.A,{size:"small",type:"number",value:Ce.Brokerage_Amt||"",onChange:e=>{const l=parseFloat(e.target.value)||0,a=Ce.Act_Qty?100*l/Ce.Act_Qty:0;Te((0,t.A)((0,t.A)({},Ce),{},{Brokerage_Amt:l,Brokerage:a.toFixed(2)}))},inputProps:{step:"0.01",style:{textAlign:"right"}}})})]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(j.A,{align:"right",children:Ce.Brokerage_Amt&&Ce.Act_Qty?(Ce.Brokerage_Amt*Ce.Act_Qty/100).toFixed(2):"0.00"}),(0,H.jsx)(j.A,{align:"right",sx:{minWidth:120},children:(0,H.jsx)(s.A,{size:"small",type:"number",value:Ce.Brokerage_Amt||"",onChange:e=>{const l=parseFloat(e.target.value)||0,a=Ce.Act_Qty?100*l/Ce.Act_Qty:0;Te((0,t.A)((0,t.A)({},Ce),{},{Brokerage_Amt:l,Brokerage:a.toFixed(2)}))},inputProps:{step:"0.01",style:{textAlign:"right"}}})})]}),(0,H.jsx)(j.A,{align:"right",children:(0,H.jsxs)(n.A,{display:"flex",gap:1,justifyContent:"flex-end",children:[(0,H.jsx)(f.A,{title:"Save changes",children:(0,H.jsx)(k.A,{color:"primary",size:"small",onClick:Oe,children:(0,H.jsx)(B.A,{fontSize:"small"})})}),(0,H.jsx)(f.A,{title:"Cancel editing",children:(0,H.jsx)(k.A,{color:"secondary",size:"small",onClick:()=>Te(null),children:(0,H.jsx)(w.A,{fontSize:"small"})})})]})})]}):(0,H.jsxs)(H.Fragment,{children:["salesNagal"===O?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(j.A,{align:"right",children:e.Brok_Amt||"0.00"}),(0,H.jsx)(j.A,{align:"right",children:e.Brok_Rate||"0.00"}),(0,H.jsx)(j.A,{align:"right",children:e.Coolie_Amt||"0.00"}),(0,H.jsx)(j.A,{align:"right",children:e.Coolie_Rate||"0.00"}),(0,H.jsx)(j.A,{align:"right",children:e.Vilai_Vasi||"0.00"}),(0,H.jsx)(j.A,{align:"right",children:e.Vilaivasi_Rate||"0.00"})]}):(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(j.A,{align:"right",children:e.Brokerage||"0.00"})}),(0,H.jsx)(j.A,{align:"right",children:(0,H.jsxs)(n.A,{display:"flex",gap:1,justifyContent:"flex-end",children:[(0,H.jsx)(f.A,{title:"Delete this item",children:(0,H.jsx)(k.A,{color:"error",size:"small",onClick:l=>{l.stopPropagation(),we(e),Ie(!0)},children:(0,H.jsx)(q.A,{fontSize:"small"})})}),(0,H.jsx)(f.A,{title:"Edit this item",children:(0,H.jsx)(k.A,{color:"primary",size:"small",onClick:()=>(e=>{var l,a,r,o,i,s,n,d,c,h,g,u,A,x,m;(0,t.A)((0,t.A)({},e),{},{Created_By:null===ye||void 0===ye?void 0:ye.UserId,Updated_By:null===ye||void 0===ye?void 0:ye.UserId}),"salesNagal"===O?Te((0,t.A)((0,t.A)({},e),{},{Brok_Rate:null!==(l=null!==(a=null!==(r=e.Brok_Rate)&&void 0!==r?r:e.Brokerage_Rate)&&void 0!==a?a:e.Brokerage)&&void 0!==l?l:"",Brok_Amt:null!==(o=e.Brok_Amt)&&void 0!==o?o:((null!==(i=e.Brok_Rate)&&void 0!==i?i:0)*(null!==(s=e.QTY)&&void 0!==s?s:0)).toFixed(2),Coolie_Rate:null!==(n=null!==(d=e.Coolie_Rate)&&void 0!==d?d:e.Coolie)&&void 0!==n?n:"",Coolie_Amt:null!==(c=e.Coolie_Amt)&&void 0!==c?c:((null!==(h=e.Coolie_Rate)&&void 0!==h?h:0)*(null!==(g=e.QTY)&&void 0!==g?g:0)).toFixed(2),Vilai_Vasi:null!==(u=e.Vilai_Vasi)&&void 0!==u?u:"",Vilaivasi_Rate:null!==(A=e.Vilaivasi_Rate)&&void 0!==A?A:((null!==(x=e.Vilai_Vasi)&&void 0!==x?x:0)*(null!==(m=e.Act_Qty)&&void 0!==m?m:0)/100).toFixed(2),Id:e.Id})):"sales"!==O&&"purchase"!==O||Te(e)})(e),children:(0,H.jsx)(P.A,{fontSize:"small"})})})]})})]})]},l))})})]})]})})})})]},l)}):(0,H.jsx)(y.A,{children:(0,H.jsx)(j.A,{colSpan:Me[O].listingColumns.length+1,align:"center",children:"No data found"})})})]}),(0,H.jsx)(b.A,{rowsPerPageOptions:[10,25,50,100],component:"div",count:Je.length,rowsPerPage:U.rowsPerPage,page:U.page,onPageChange:(e,l)=>Z((0,t.A)((0,t.A)({},U),{},{page:l})),onRowsPerPageChange:e=>Z({page:0,rowsPerPage:parseInt(e.target.value,10)})})]})]}),(0,H.jsx)(Y,{open:je,onClose:()=>ve(!1),brokerData:fe,transactionType:O,fromDate:ne.FromDate,toDate:ne.ToDate}),(0,H.jsx)(X,{open:be,onClose:()=>ke(!1),brokerData:Fe,transactionType:O,fromDate:ne.FromDate,toDate:ne.ToDate})]}),(0,H.jsxs)(F.A,{open:ze.filters.filterDialog&&0===J,onClose:We,maxWidth:"sm",fullWidth:!0,children:[(0,H.jsxs)(N.A,{children:[(0,H.jsxs)(n.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,H.jsxs)(h.A,{variant:"h6",children:["sales"===O?"Sales":"salesNagal"===O?"SalesNagal":"Purchase"," Data Entry Filters"]}),(0,H.jsx)(k.A,{onClick:We,children:(0,H.jsx)(V.A,{})})]}),(0,H.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,H.jsx)(c.Ay,{item:!0,xs:12,children:(0,H.jsx)(s.A,{fullWidth:!0,type:"date",label:"From Date",value:ze.filters.FromDate,onChange:e=>Qe(l=>(0,t.A)((0,t.A)({},l),{},{filters:(0,t.A)((0,t.A)({},l.filters),{},{FromDate:e.target.value})})),InputLabelProps:{shrink:!0}})}),(0,H.jsx)(c.Ay,{item:!0,xs:12,children:(0,H.jsx)(s.A,{fullWidth:!0,type:"date",label:"To Date",value:ze.filters.ToDate,onChange:e=>Qe(l=>(0,t.A)((0,t.A)({},l),{},{filters:(0,t.A)((0,t.A)({},l.filters),{},{ToDate:e.target.value})})),InputLabelProps:{shrink:!0}})}),(0,H.jsx)(c.Ay,{item:!0,xs:12,children:(0,H.jsx)(E.Ay,{fullWidth:!0,label:"Brokers",value:ze.filters.Broker,onChange:e=>Qe(l=>(0,t.A)((0,t.A)({},l),{},{filters:(0,t.A)((0,t.A)({},l.filters),{},{Broker:e})})),options:[{value:"",label:"ALL Brokers"},...ee.broker],styles:L.MR,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Broker"})})]})]}),(0,H.jsxs)(C.A,{children:[(0,H.jsx)(g.A,{onClick:We,children:"Cancel"}),(0,H.jsx)(g.A,{variant:"contained",onClick:()=>{Qe(e=>(0,t.A)((0,t.A)({},e),{},{headerVilaiVasi:"",brokerageValues:{},filters:(0,t.A)((0,t.A)({},e.filters),{},{refresh:!e.filters.refresh,filterDialog:!1})}))},children:"Apply Filters"})]})]}),(0,H.jsxs)(F.A,{open:ne.filterDialog&&1===J,onClose:He,maxWidth:"sm",fullWidth:!0,children:[(0,H.jsxs)(N.A,{children:[(0,H.jsxs)(n.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,H.jsx)(h.A,{variant:"h6",children:"Listing Filters"}),(0,H.jsx)(k.A,{onClick:He,children:(0,H.jsx)(V.A,{})})]}),(0,H.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,H.jsx)(c.Ay,{item:!0,xs:5,children:(0,H.jsx)(s.A,{fullWidth:!0,type:"date",label:"From Date",value:ne.FromDate,onChange:e=>de(l=>(0,t.A)((0,t.A)({},l),{},{FromDate:e.target.value})),InputLabelProps:{shrink:!0}})}),(0,H.jsx)(c.Ay,{item:!0,xs:5,children:(0,H.jsx)(s.A,{fullWidth:!0,type:"date",label:"To Date",value:ne.ToDate,onChange:e=>de(l=>(0,t.A)((0,t.A)({},l),{},{ToDate:e.target.value})),InputLabelProps:{shrink:!0}})}),(0,H.jsx)(c.Ay,{item:!0,xs:2,style:{display:"flex",alignItems:"flex-end"},children:(0,H.jsx)(g.A,{variant:"contained",color:"primary",onClick:()=>{de(e=>(0,t.A)((0,t.A)({},e),{},{refresh:!e.refresh}))},style:{height:"30px",width:"100%"},children:"Search"})}),"salesNagal"===O?(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(c.Ay,{item:!0,xs:12,children:(0,H.jsx)(E.Ay,{fullWidth:!0,value:ne.VilaiVasiZero,onChange:e=>de(l=>(0,t.A)((0,t.A)({},l),{},{VilaiVasiZero:e})),options:[{value:"",label:"All"},{value:"zero",label:"VilaiVasi Zero"},{value:"nonzero",label:"VilaiVasi Non-Zero"}],styles:L.MR,menuPortalTarget:document.body,placeholder:"VilaiVasi Zero/Non-Zero"})})}):(0,H.jsx)(H.Fragment,{}),(0,H.jsx)(c.Ay,{item:!0,xs:12,children:(0,H.jsx)(E.Ay,{fullWidth:!0,label:"Brokers",value:ne.Broker,onChange:e=>de(l=>(0,t.A)((0,t.A)({},l),{},{Broker:e})),options:[{value:"",label:"ALL Brokers"},...ee.broker],styles:L.MR,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Broker"})}),(0,H.jsx)(c.Ay,{item:!0,xs:12,children:(0,H.jsx)(E.Ay,{fullWidth:!0,label:"Ledger",value:ne.Ledger,onChange:e=>de(l=>(0,t.A)((0,t.A)({},l),{},{Ledger:e})),options:[{value:"",label:"ALL Ledger"},...ge.ledgers],styles:L.MR,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Ledger"})}),(0,H.jsx)(c.Ay,{item:!0,xs:12,children:(0,H.jsx)(E.Ay,{fullWidth:!0,label:"Item",value:ne.Item,onChange:e=>de(l=>(0,t.A)((0,t.A)({},l),{},{Item:e})),options:[{value:"",label:"ALL Item"},...ge.items],styles:L.MR,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Item"})})]})]}),(0,H.jsxs)(C.A,{children:[(0,H.jsx)(g.A,{onClick:He,children:"Cancel"}),(0,H.jsx)(g.A,{variant:"contained",onClick:()=>{de(e=>(0,t.A)((0,t.A)({},e),{},{refresh:!e.refresh,filterDialog:!1}))},children:"Apply Filters"})]})]}),(0,H.jsxs)(F.A,{open:Re,onClose:()=>De(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,H.jsx)(T.A,{id:"alert-dialog-title",children:"Confirm Deletion"}),(0,H.jsx)(N.A,{children:(0,H.jsxs)(N.A,{id:"alert-dialog-description",children:["Are you sure you want to delete ",(null===Pe||void 0===Pe?void 0:Pe.Broker_Name)||(null===Pe||void 0===Pe?void 0:Pe.Supplier_Name),"'s records?"]})}),(0,H.jsxs)(C.A,{children:[(0,H.jsx)(g.A,{onClick:()=>De(!1),children:"Cancel"}),(0,H.jsx)(g.A,{onClick:async()=>{try{l();const e=await(0,o.z)({address:"reports/brokerageNagalPurchase/list",method:"DELETE",bodyData:{TransactionType:O,Broker:Pe.Broker_Id||Pe.Supplier_Id,FromDate:ne.FromDate,ToDate:ne.ToDate},headers:{"Content-Type":"application/json"}});e.success&&(z.oR.success(e.message||"Deleted successfully!"),de(e=>(0,t.A)((0,t.A)({},e),{},{refresh:!e.refresh})))}catch(e){z.oR.error("Delete failed due to an error")}finally{a(),De(!1)}},color:"error",autoFocus:!0,children:"Delete"})]})]}),(0,H.jsxs)(F.A,{open:Be,onClose:()=>Ie(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,H.jsx)(T.A,{id:"alert-dialog-title",children:"Confirm Item Deletion"}),(0,H.jsx)(N.A,{children:(0,H.jsxs)(R.A,{id:"alert-dialog-description",children:["Are you sure you want to delete this ",null===Se||void 0===Se?void 0:Se.Product_Name," item?"]})}),(0,H.jsxs)(C.A,{children:[(0,H.jsx)(g.A,{onClick:()=>Ie(!1),children:"Cancel"}),(0,H.jsx)(g.A,{onClick:async()=>{try{l();const e=await(0,o.z)({address:"reports/brokerageNagalPurchase/list",method:"DELETE",bodyData:{Id:Se.Id,Do_Id:Se.Do_Id,Product_Id:Se.Product_Id,PIN_Id:Se.PIN_Id,FromDate:ne.FromDate,ToDate:ne.ToDate,TransactionType:O},headers:{"Content-Type":"application/json"}});e.success&&(z.oR.success(e.message||"Item deleted successfully!"),de(e=>(0,t.A)((0,t.A)({},e),{},{refresh:!e.refresh})))}catch(e){z.oR.error("Item delete failed due to an error")}finally{a(),Ie(!1)}},color:"error",autoFocus:!0,children:"Delete"})]})]}),(0,H.jsxs)(F.A,{open:Ee,onClose:()=>Le(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,H.jsx)(T.A,{id:"alert-dialog-title",children:"Confirm Bulk Deletion"}),(0,H.jsx)(N.A,{children:(0,H.jsx)(R.A,{id:"alert-dialog-description",children:"Are you sure you want to delete ALL filtered records? This action cannot be undone."})}),(0,H.jsxs)(C.A,{children:[(0,H.jsx)(g.A,{onClick:()=>Le(!1),children:"Cancel"}),(0,H.jsx)(g.A,{onClick:async()=>{try{l();const e=await(0,o.z)({address:"reports/brokerageNagalPurchase/list",method:"DELETE",bodyData:{FromDate:ne.FromDate,ToDate:ne.ToDate,Broker:ne.Broker.value,Ledger:ne.Ledger.value,Item:ne.Item.value,TransactionType:O}});e.success&&(z.oR.success(e.message||"All records deleted successfully!"),de(e=>(0,t.A)((0,t.A)({},e),{},{refresh:!e.refresh})))}catch(e){z.oR.error("Bulk delete failed due to an error")}finally{a(),Le(!1)}},color:"error",autoFocus:!0,children:"Delete All"})]})]})]})}},78218:(e,l,a)=>{var t=a(24994);l.A=void 0;var r=t(a(40039)),o=a(70579);l.A=(0,r.default)((0,o.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"FileDownload")},83560:(e,l,a)=>{a.d(l,{A:()=>o});var t=a(59662),r=a(70579);const o=(0,t.A)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},91794:(e,l,a)=>{a.d(l,{A:()=>o});var t=a(59662),r=a(70579);const o=(0,t.A)((0,r.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},98533:(e,l,a)=>{a.d(l,{A:()=>y});var t=a(98587),r=a(58168),o=a(65043),i=a(58387),s=a(68606),n=a(34535),d=a(61475),c=a(6431),h=a(85865),g=a(57056),u=a(32400);function A(e){return(0,u.Ay)("MuiDialogContentText",e)}(0,g.A)("MuiDialogContentText",["root"]);var x=a(70579);const m=["children","className"],p=(0,n.Ay)(h.A,{shouldForwardProp:e=>(0,d.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,l)=>l.root})({}),y=o.forwardRef(function(e,l){const a=(0,c.b)({props:e,name:"MuiDialogContentText"}),{className:o}=a,n=(0,t.A)(a,m),d=(e=>{const{classes:l}=e,a=(0,s.A)({root:["root"]},A,l);return(0,r.A)({},l,a)})(n);return(0,x.jsx)(p,(0,r.A)({component:"p",variant:"body1",color:"text.secondary",ref:l,ownerState:n,className:(0,i.A)(d.root,o)},a,{classes:d}))})}}]);
//# sourceMappingURL=1384.37e50237.chunk.js.map