"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1614],{11614:(e,l,t)=>{t.r(l),t.d(l,{default:()=>C});var n=t(89379),a=t(65043),o=t(81e3),r=t(85865),s=t(68903),d=t(12110),i=t(11906),c=t(26494),u=t(77739),m=t(83462),b=t(26600),p=t(35316),h=t(29347),x=t(38463),v=t(65829),N=t(55434),y=t(37141),g=t(22520),A=t(91036),f=t(73216),I=t(45777),j=t(65074),S=t(20656),_=t(70579);const C=()=>{const e=JSON.parse(localStorage.getItem("user")),l=(0,f.Zp)(),{contextObj:t}=(0,a.useContext)(I.i),C=(0,f.zy)().state,T={Report_Type_Id:"",reportName:"",tables:[],tableJoins:[],currentTab:"",createdBy:null===e||void 0===e?void 0:e.UserId},[L,F]=(0,a.useState)(T),[R,w]=(0,a.useState)([]),[k,E]=(0,a.useState)([]),[M,B]=(0,a.useState)(!1),[D,O]=(0,a.useState)([]),[z,G]=(0,a.useState)([{slot:1,enabled:!1,tableId:null,columnName:null,type:1},{slot:2,enabled:!1,tableId:null,columnName:null,type:2},{slot:3,enabled:!1,tableId:null,columnName:null,type:3}]),[U,W]=(0,a.useState)([{slot:1,enabled:!1,tableId:null,columnName:null,type:4},{slot:2,enabled:!1,tableId:null,columnName:null,type:5},{slot:3,enabled:!1,tableId:null,columnName:null,type:6}]),[V,P]=(0,a.useState)([{slot:1,enabled:!1,tableId:null,columnName:null,type:7},{slot:2,enabled:!1,tableId:null,columnName:null,type:8},{slot:3,enabled:!1,tableId:null,columnName:null,type:9}]),[H,J]=(0,a.useState)([]),[K,q]=(0,a.useState)(!1),Z=R.filter(e=>{var l,t;return(null===(l=e.Table_Name)||void 0===l?void 0:l.toLowerCase().includes("los"))||(null===(t=e.AliasName)||void 0===t?void 0:t.toLowerCase().includes("los"))});(0,a.useEffect)(()=>{Q()},[]);const Q=async()=>{try{B(!0);const e=await(0,j.z)({address:"reports/templateMobile",method:"GET"});if(null!==e&&void 0!==e&&e.success){const l=(null===e||void 0===e?void 0:e.data)||[],t=[...new Set(l.map(e=>e.Report_Name).filter(e=>e))];E(t);const n=t.map(e=>({value:e,label:e}));O(n)}}catch(e){console.error("Error fetching existing reports:",e),A.oR.error("Failed to load existing reports")}finally{B(!1)}};(0,a.useEffect)(()=>{const l=null===C||void 0===C?void 0:C.ReportState;if((0,g.aF)(l)){var t;const a=null!==(t=null===l||void 0===l?void 0:l.reportName)&&void 0!==t?t:"";if(F(t=>{var o,r;return(0,n.A)((0,n.A)({},t),{},{Report_Type_Id:null!==(o=null===l||void 0===l?void 0:l.Report_Type_Id)&&void 0!==o?o:"",reportName:a,tables:[...(null===l||void 0===l?void 0:l.tables)||[]],createdBy:null!==(r=null===l||void 0===l?void 0:l.createdBy)&&void 0!==r?r:null===e||void 0===e?void 0:e.UserId})}),a&&!D.some(e=>e.value===a)){const e={value:a,label:a};O(l=>[...l,e]),E(e=>[...e,a])}const o=(null===l||void 0===l?void 0:l.GroupFilter)||[];o.length>0&&P(e=>{const l=[...e];return o.forEach((e,t)=>{if(t<l.length){let a=e.Type||7+t;e.Level_Id&&(1===e.Level_Id?a=7:2===e.Level_Id?a=8:3===e.Level_Id&&(a=9)),l[t]=(0,n.A)((0,n.A)({},l[t]),{},{enabled:!0,tableId:e.Table_Id?Number(e.Table_Id):null,columnName:e.Column_Name,type:a})}}),l})}},[null===C||void 0===C?void 0:C.ReportState,null===e||void 0===e?void 0:e.UserId]),(0,a.useEffect)(()=>{(0,j.z)({address:"reports/tablesAndColumnsMobile"}).then(e=>{null!==e&&void 0!==e&&e.success&&w((null===e||void 0===e?void 0:e.data)||[])}).catch(e=>console.error(e))},[]),(0,a.useEffect)(()=>{if(!L.tables||0===L.tables.length)return;const e=[],l=new Set;L.tables.forEach(t=>{var n;null===(n=t.columns)||void 0===n||n.forEach(n=>{if(n.Type){(Array.isArray(n.Type)?n.Type:[n.Type]).forEach(a=>{if(a&&(e.push({type:Number(a),tableId:t.Table_Id,columnName:n.Column_Name,listType:n.List_Type,level:n.Level}),n.List_Type)){String(n.List_Type).split(",").map(e=>Number(e.trim())).filter(e=>!isNaN(e)).forEach(e=>l.add(e))}})}})});const t=e.filter(e=>1===e.level||e.type>=1&&e.type<=3),a=e.filter(e=>2===e.level||e.type>=4&&e.type<=6),o=e.filter(e=>7===e.type||8===e.type||9===e.type);t.length>0&&G(e=>{const l=e.map(e=>(0,n.A)((0,n.A)({},e),{},{enabled:!1,tableId:null,columnName:null}));return t.forEach(e=>{const t=l.findIndex(l=>l.type===e.type);-1!==t&&(l[t]=(0,n.A)((0,n.A)({},l[t]),{},{enabled:!0,tableId:e.tableId,columnName:e.columnName}))}),l}),a.length>0&&W(e=>{const l=e.map(e=>(0,n.A)((0,n.A)({},e),{},{enabled:!1,tableId:null,columnName:null}));return a.forEach(e=>{const t=l.findIndex(l=>l.type===e.type);-1!==t&&(l[t]=(0,n.A)((0,n.A)({},l[t]),{},{enabled:!0,tableId:e.tableId,columnName:e.columnName}))}),l}),o.length>0&&P(e=>{const l=e.map(e=>(0,n.A)((0,n.A)({},e),{},{enabled:!1,tableId:null,columnName:null}));return o.forEach(e=>{const t=l.findIndex(l=>l.type===e.type);-1!==t&&(l[t]=(0,n.A)((0,n.A)({},l[t]),{},{enabled:!0,tableId:e.tableId,columnName:e.columnName}))}),l}),l.size>0?J(Array.from(l)):J([1])},[L.tables]);const X=e=>{if(!e)return[];const l=L.tables.find(l=>String(l.Table_Id)===String(e));if(l&&Array.isArray(l.columns)&&l.columns.length)return l.columns;const t=R.find(l=>String(l.Table_Id)===String(e));return t&&Array.isArray(t.Columns)?t.Columns.map(e=>{var l,t,n,a,o,r;return{Column_Name:e.Column_Name,Column_Data_Type:null!==(l=null!==(t=e.Column_Data_Type)&&void 0!==t?t:null===e||void 0===e?void 0:e.Column_Data_Type)&&void 0!==l?l:"string",IS_Default:null!==(n=null!==(a=e.IS_Default)&&void 0!==a?a:null===e||void 0===e?void 0:e.IS_Default)&&void 0!==n?n:0,IS_Join_Key:null!==(o=null!==(r=e.IS_Join_Key)&&void 0!==r?r:null===e||void 0===e?void 0:e.IS_Join_Key)&&void 0!==o?o:0}}):[]},Y=z.reduce((e,l)=>e+(l.enabled&&l.tableId?1:0),0),$=z.reduce((e,l)=>e+(l.enabled&&l.columnName?1:0),0),ee=U.reduce((e,l)=>e+(l.enabled&&l.tableId?1:0),0),le=U.reduce((e,l)=>e+(l.enabled&&l.columnName?1:0),0),te=V.reduce((e,l)=>e+(l.enabled&&l.tableId?1:0),0),ne=Y+ee+te,ae=$+le+V.reduce((e,l)=>e+(l.enabled&&l.columnName?1:0),0),oe=async()=>{const t=(()=>{const e=z.filter(e=>e.enabled&&e.tableId&&e.columnName),l=new Set;for(const a of e){const e="".concat(a.tableId,"_").concat(a.columnName);if(l.has(e)){const e=R.find(e=>String(e.Table_Id)===String(a.tableId)),l=e?e.AliasName||e.Table_Name:"Table ".concat(a.tableId);return{isValid:!1,message:'Column "'.concat(a.columnName,'" from "').concat(l,'" is used in multiple Level 1 filters')}}l.add(e)}const t=U.filter(e=>e.enabled&&e.tableId&&e.columnName),n=new Set;for(const a of t){const e="".concat(a.tableId,"_").concat(a.columnName);if(n.has(e)){const e=R.find(e=>String(e.Table_Id)===String(a.tableId)),l=e?e.AliasName||e.Table_Name:"Table ".concat(a.tableId);return{isValid:!1,message:'Column "'.concat(a.columnName,'" from "').concat(l,'" is used in multiple Level 2 filters')}}n.add(e)}for(const a of e)for(const e of t)if(String(a.tableId)===String(e.tableId)&&String(a.columnName)===String(e.columnName)){const e=R.find(e=>String(e.Table_Id)===String(a.tableId)),l=e?e.AliasName||e.Table_Name:"Table ".concat(a.tableId);return{isValid:!1,message:'Column "'.concat(a.columnName,'" from "').concat(l,'" cannot be used in both Level 1 and Level 2 filters')}}return{isValid:!0}})();if(!t.isValid)return void A.oR.error(t.message);const{details:a,groupFilterDetails:o}=(()=>{const e=[],l=[];return z.forEach(l=>{if(!l.enabled)return;if(!l.tableId||!l.columnName)return;const t=0===H.length?"1":H.join(",");e.push({Type:Number(l.type),Table_Id:Number(l.tableId),Column_Name:l.columnName,List_Type:t,Level:1})}),U.forEach(l=>{if(!l.enabled)return;if(!l.tableId||!l.columnName)return;const t=0===H.length?"1":H.join(",");e.push({Type:Number(l.type),Table_Id:Number(l.tableId),Column_Name:l.columnName,List_Type:t,Level:2})}),V.forEach(e=>{if(!e.enabled)return;if(!e.tableId||!e.columnName)return;const t=0===H.length?"1":H.join(",");let n=3;7===e.type?n=1:8===e.type?n=2:9===e.type&&(n=3),l.push({Type:Number(e.type),Table_Id:Number(e.tableId),Column_Name:e.columnName,List_Type:t,Level:3,Level_Id:n})}),{details:e,groupFilterDetails:l}})();if(0===a.length&&0===o.length)return void A.oR.error("Assign at least one filter slot (table + column) before saving");if(!L.reportName||""===String(L.reportName).trim())return void A.oR.error("Report name is required");const r=(0,n.A)({Report_Type_Id:(null===L||void 0===L?void 0:L.Report_Type_Id)||null,reportName:L.reportName,createdBy:L.createdBy,updatedBy:null===e||void 0===e?void 0:e.UserId,details:a},o.length>0&&{GroupFilter:o});try{const e=await(0,j.z)({address:"reports/templateMobile",method:null!==L&&void 0!==L&&L.Report_Type_Id?"PUT":"POST",bodyData:r});null!==e&&void 0!==e&&e.success?(A.oR.success(e.message),F(T),G([{slot:1,enabled:!1,tableId:null,columnName:null,type:1},{slot:2,enabled:!1,tableId:null,columnName:null,type:2},{slot:3,enabled:!1,tableId:null,columnName:null,type:3}]),W([{slot:1,enabled:!1,tableId:null,columnName:null,type:4},{slot:2,enabled:!1,tableId:null,columnName:null,type:5},{slot:3,enabled:!1,tableId:null,columnName:null,type:6}]),P([{slot:1,enabled:!1,tableId:null,columnName:null,type:7},{slot:2,enabled:!1,tableId:null,columnName:null,type:8},{slot:3,enabled:!1,tableId:null,columnName:null,type:9}]),J([]),l(-1)):A.oR.error((null===e||void 0===e?void 0:e.message)||"Failed to save")}catch(s){console.error(s),A.oR.error("Error saving template")}},re=z.some(e=>e.enabled&&e.tableId&&e.columnName)||U.some(e=>e.enabled&&e.tableId&&e.columnName)||V.some(e=>e.enabled&&e.tableId&&e.columnName);if(!(0,g.id)(null===t||void 0===t?void 0:t.Add_Rights,1))return null;const se=(e,l,t)=>(0,_.jsxs)(o.A,{className:"mt-3 p-3 border rounded",sx:{background:"#FBFCFD"},children:[(0,_.jsx)(r.A,{variant:"subtitle1",fontWeight:700,gutterBottom:!0,children:e}),(0,_.jsx)(s.Ay,{container:!0,spacing:3,children:l.map((e,l)=>{var a,d;const i="group"===t?"Group Filter ".concat(e.slot):"Filter ".concat(e.slot),c="group"===t?Z:R;return(0,_.jsxs)(s.Ay,{item:!0,xs:4,children:[(0,_.jsx)(o.A,{sx:{display:"flex",alignItems:"center",p:1.5,mb:1,borderRadius:1,background:"#fff",border:"1px solid #e0e0e0",minHeight:"60px"},children:(0,_.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:10,width:"100%"},children:[(0,_.jsx)("input",{type:"checkbox",checked:e.enabled,onChange:()=>((e,l)=>{"level1"===l?G(l=>{const t=[...l],a=!t[e].enabled;return t[e]=(0,n.A)((0,n.A)({},t[e]),{},{enabled:a,tableId:a?t[e].tableId:null,columnName:a?t[e].columnName:null}),t}):"level2"===l?W(l=>{const t=[...l],a=!t[e].enabled;return t[e]=(0,n.A)((0,n.A)({},t[e]),{},{enabled:a,tableId:a?t[e].tableId:null,columnName:a?t[e].columnName:null}),t}):P(l=>{const t=[...l],a=!t[e].enabled;return t[e]=(0,n.A)((0,n.A)({},t[e]),{},{enabled:a,tableId:a?t[e].tableId:null,columnName:a?t[e].columnName:null}),t})})(l,t),style:{width:"18px",height:"18px"}}),(0,_.jsx)(r.A,{variant:"subtitle1",fontWeight:600,children:i})]})}),e.enabled?(0,_.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:[(0,_.jsxs)(o.A,{children:[(0,_.jsx)(r.A,{variant:"caption",color:"textSecondary",sx:{mb:.5,display:"block"},children:"Table"}),(0,_.jsxs)("select",{className:"cus-inpt",value:null!==(a=e.tableId)&&void 0!==a?a:"",onChange:e=>{const a=e.target.value||null;"level1"===t?G(e=>{const t=[...e];return t[l]=(0,n.A)((0,n.A)({},t[l]),{},{tableId:a,columnName:null}),t}):"level2"===t?W(e=>{const t=[...e];return t[l]=(0,n.A)((0,n.A)({},t[l]),{},{tableId:a,columnName:null}),t}):P(e=>{const t=[...e];return t[l]=(0,n.A)((0,n.A)({},t[l]),{},{tableId:a,columnName:null}),t})},style:{width:"100%"},children:[(0,_.jsx)("option",{value:"",children:"Select table"}),c.map((e,l)=>(0,_.jsxs)("option",{value:e.Table_Id,children:[e.AliasName||e.Table_Name,"group"===t&&" (LOS)"]},l)),"group"===t&&0===c.length&&(0,_.jsx)("option",{value:"",disabled:!0,children:"No LOS tables found"})]}),"group"===t&&(0,_.jsx)(r.A,{variant:"caption",color:"textSecondary",sx:{mt:.5,display:"block"},children:"Only LOS tables are shown for group filter"})]}),(0,_.jsxs)(o.A,{children:[(0,_.jsx)(r.A,{variant:"caption",color:"textSecondary",sx:{mb:.5,display:"block"},children:"Column"}),(0,_.jsxs)("select",{className:"cus-inpt",value:null!==(d=e.columnName)&&void 0!==d?d:"",disabled:!e.tableId,onChange:e=>{const a=e.target.value||null;"level1"===t?G(e=>{const t=[...e];return t[l]=(0,n.A)((0,n.A)({},t[l]),{},{columnName:a}),t}):"level2"===t?W(e=>{const t=[...e];return t[l]=(0,n.A)((0,n.A)({},t[l]),{},{columnName:a}),t}):P(e=>{const t=[...e];return t[l]=(0,n.A)((0,n.A)({},t[l]),{},{columnName:a}),t})},style:{width:"100%"},children:[(0,_.jsx)("option",{value:"",children:"Select column"}),e.tableId&&X(e.tableId).map((n,a)=>{let o=!1,r="";if("group"===t)o=!1;else if("level1"===t){const t=z.some((t,a)=>!!(t.enabled&&t.tableId&&t.columnName)&&(a!==l&&(String(t.tableId)===String(e.tableId)&&String(t.columnName)===String(n.Column_Name)))),a=U.some(l=>!!(l.enabled&&l.tableId&&l.columnName)&&(String(l.tableId)===String(e.tableId)&&String(l.columnName)===String(n.Column_Name)));o=t||a,t?r=" (Used in another Level 1 filter)":a&&(r=" (Used in Level 2 filter)")}else if("level2"===t){const t=U.some((t,a)=>!!(t.enabled&&t.tableId&&t.columnName)&&(a!==l&&(String(t.tableId)===String(e.tableId)&&String(t.columnName)===String(n.Column_Name)))),a=z.some(l=>!!(l.enabled&&l.tableId&&l.columnName)&&(String(l.tableId)===String(e.tableId)&&String(l.columnName)===String(n.Column_Name)));o=t||a,t?r=" (Used in another Level 2 filter)":a&&(r=" (Used in Level 1 filter)")}const s=!(e.columnName===n.Column_Name)&&o;return(0,_.jsxs)("option",{value:n.Column_Name,disabled:s,style:{color:s?"#999":"inherit",backgroundColor:s?"#f5f5f5":"inherit",fontStyle:s?"italic":"normal"},children:[n.Column_Name,n.Column_Data_Type?" (".concat(n.Column_Data_Type,")"):"",s?r:""]},a)})]}),"group"===t&&(0,_.jsx)(r.A,{variant:"caption",color:"textSecondary",sx:{mt:.5,display:"block",fontSize:"0.75rem"},children:"Note: All columns are enabled in Group Filter, even if used in Level 1/2 filters."})]})]}):(0,_.jsx)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",p:3,borderRadius:1,background:"#f8f9fa",border:"1px dashed #dee2e6",color:"#6c757d",textAlign:"center",minHeight:"120px"},children:(0,_.jsxs)(r.A,{variant:"body2",children:["Enable ",i," to configure"]})})]},e.type)})})]});return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(d.A,{children:[(0,_.jsxs)("div",{className:"p-2 border-bottom fa-16 fw-bold d-flex justify-content-between align-items-center",children:[(0,_.jsx)("span",{className:"text-primary text-uppercase ps-3",children:null!==L&&void 0!==L&&L.Report_Type_Id?"Modify Mobile Template":"Mobile Template Creation"}),(0,_.jsx)(i.A,{variant:"outlined",onClick:()=>l(-1),startIcon:(0,_.jsx)(v.A,{}),children:"Back"})]}),(0,_.jsxs)(c.A,{children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{className:"w-100",children:"Report Name"}),(0,_.jsx)(S.Ay,{value:L.reportName?{value:L.reportName,label:L.reportName}:null,onChange:e=>{F((0,n.A)((0,n.A)({},L),{},{reportName:e?e.value:""}))},options:D,placeholder:M?"Loading reports...":"Select or type to search...",isClearable:!0,isSearchable:!0,isLoading:M,noOptionsMessage:e=>{let{inputValue:l}=e;return l?'Press Enter to create "'.concat(l,'"'):"No options available"},formatCreateLabel:e=>'Create "'.concat(e,'"'),onCreateOption:e=>{if(!D.some(l=>l.value.toLowerCase()===e.toLowerCase())){const l={value:e,label:e};O(e=>[...e,l]),E(l=>[...l,e])}F((0,n.A)((0,n.A)({},L),{},{reportName:e}))},styles:{control:e=>(0,n.A)((0,n.A)({},e),{},{width:"600px",border:"1px solid #ccc",borderRadius:"4px",minHeight:"36px"}),menu:e=>(0,n.A)((0,n.A)({},e),{},{width:"300px"})}})]}),(0,_.jsx)("div",{className:"p-2 mt-3 border rounded-3 d-inline-block",children:(0,_.jsx)("table",{children:(0,_.jsxs)("tbody",{children:[(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{className:"border-end",children:"Total Filters Assigned"}),(0,_.jsx)("td",{className:"px-2 blue-text",children:ne})]}),(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{className:"border-end",children:"Total Columns Assigned"}),(0,_.jsx)("td",{className:"px-2 blue-text",children:ae})]}),(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{className:"border-end",children:"Level 1 Filters"}),(0,_.jsx)("td",{className:"px-2 blue-text",children:Y})]}),(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{className:"border-end",children:"Level 2 Filters"}),(0,_.jsx)("td",{className:"px-2 blue-text",children:ee})]}),(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{className:"border-end",children:"Group Filters"}),(0,_.jsx)("td",{className:"px-2 blue-text",children:te})]})]})})}),se("Level 1 Filters",z,"level1"),se("Level 2 Filters",U,"level2"),se("Group Filters",V,"group"),(0,_.jsxs)(o.A,{className:"mt-3 d-flex align-items-center",sx:{gap:2},children:[(0,_.jsx)(r.A,{fontWeight:700,children:"List Type:"}),(0,_.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,_.jsx)("input",{type:"checkbox",checked:H.includes(1),onChange:e=>{e.target.checked?J(e=>[...e,1]):J(e=>e.filter(e=>1!==e))}}),(0,_.jsx)("span",{children:"Sum"})]}),(0,_.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,_.jsx)("input",{type:"checkbox",checked:H.includes(2),onChange:e=>{e.target.checked?J(e=>[...e,2]):J(e=>e.filter(e=>2!==e))}}),(0,_.jsx)("span",{children:"Avg"})]})]}),(0,_.jsxs)(o.A,{className:"mt-4 d-flex justify-content-end",sx:{gap:2},children:[(0,_.jsx)(i.A,{variant:"outlined",onClick:()=>{G([{slot:1,enabled:!1,tableId:null,columnName:null,type:1},{slot:2,enabled:!1,tableId:null,columnName:null,type:2},{slot:3,enabled:!1,tableId:null,columnName:null,type:3}]),W([{slot:1,enabled:!1,tableId:null,columnName:null,type:4},{slot:2,enabled:!1,tableId:null,columnName:null,type:5},{slot:3,enabled:!1,tableId:null,columnName:null,type:6}]),P([{slot:1,enabled:!1,tableId:null,columnName:null,type:7},{slot:2,enabled:!1,tableId:null,columnName:null,type:8},{slot:3,enabled:!1,tableId:null,columnName:null,type:9}]),J([])},children:"Reset All"}),(0,_.jsx)(u.A,{title:re?"":"Assign at least one slot to Preview",children:(0,_.jsx)("span",{children:(0,_.jsx)(i.A,{variant:"outlined",startIcon:(0,_.jsx)(N.A,{}),disabled:!re,onClick:()=>q(!0),children:"Preview"})})}),(0,_.jsx)(i.A,{variant:"contained",startIcon:(0,_.jsx)(y.A,{}),onClick:oe,children:"Submit"})]})]})]}),(0,_.jsxs)(m.A,{open:K,onClose:()=>q(!1),fullWidth:!0,maxWidth:"md",children:[(0,_.jsx)(b.A,{children:"Preview - Template Configuration"}),(0,_.jsxs)(p.A,{dividers:!0,children:[(0,_.jsxs)(r.A,{variant:"subtitle1",fontWeight:700,gutterBottom:!0,children:["Report: ",L.reportName||"\u2014"]}),(0,_.jsxs)(o.A,{sx:{mb:2},children:[0===z.filter(e=>e.enabled&&e.tableId&&e.columnName).length&&0===U.filter(e=>e.enabled&&e.tableId&&e.columnName).length&&0===V.filter(e=>e.enabled&&e.tableId&&e.columnName).length&&(0,_.jsx)(r.A,{children:"No filter assigned yet."}),z.filter(e=>e.enabled&&e.tableId&&e.columnName).length>0&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r.A,{variant:"subtitle2",fontWeight:700,sx:{mt:2,mb:1},children:"Level 1 Filters:"}),z.filter(e=>e.enabled&&e.tableId&&e.columnName).map((e,l)=>{const t=R.find(l=>String(l.Table_Id)===String(e.tableId)),n=t?t.AliasName||t.Table_Name:"Table ".concat(e.tableId),a=0===H.length?"\u2014":2===H.length?"Sum & Avg":1===H[0]?"Sum":"Avg",r="Filter ".concat(e.slot);return(0,_.jsx)(o.A,{sx:{p:1,borderRadius:1,background:"#F7F9FB",mb:1},children:(0,_.jsxs)(s.Ay,{container:!0,alignItems:"center",children:[(0,_.jsx)(s.Ay,{item:!0,xs:12,md:3,children:(0,_.jsx)("strong",{children:r})}),(0,_.jsx)(s.Ay,{item:!0,xs:12,md:4,children:n}),(0,_.jsx)(s.Ay,{item:!0,xs:12,md:3,children:e.columnName}),(0,_.jsx)(s.Ay,{item:!0,xs:12,md:2,style:{textAlign:"right"},children:a})]})},e.type)})]}),U.filter(e=>e.enabled&&e.tableId&&e.columnName).length>0&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r.A,{variant:"subtitle2",fontWeight:700,sx:{mt:2,mb:1},children:"Level 2 Filters:"}),U.filter(e=>e.enabled&&e.tableId&&e.columnName).map((e,l)=>{const t=R.find(l=>String(l.Table_Id)===String(e.tableId)),n=t?t.AliasName||t.Table_Name:"Table ".concat(e.tableId),a=0===H.length?"\u2014":2===H.length?"Sum & Avg":1===H[0]?"Sum":"Avg",r="Filter ".concat(e.slot);return(0,_.jsx)(o.A,{sx:{p:1,borderRadius:1,background:"#F7F9FB",mb:1},children:(0,_.jsxs)(s.Ay,{container:!0,alignItems:"center",children:[(0,_.jsx)(s.Ay,{item:!0,xs:12,md:3,children:(0,_.jsx)("strong",{children:r})}),(0,_.jsx)(s.Ay,{item:!0,xs:12,md:4,children:n}),(0,_.jsx)(s.Ay,{item:!0,xs:12,md:3,children:e.columnName}),(0,_.jsx)(s.Ay,{item:!0,xs:12,md:2,style:{textAlign:"right"},children:a})]})},e.type)})]}),V.filter(e=>e.enabled&&e.tableId&&e.columnName).length>0&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r.A,{variant:"subtitle2",fontWeight:700,sx:{mt:2,mb:1},children:"Group Filters:"}),V.filter(e=>e.enabled&&e.tableId&&e.columnName).map((e,l)=>{var t,n;const a=R.find(l=>String(l.Table_Id)===String(e.tableId)),r=a?a.AliasName||a.Table_Name:"Table ".concat(e.tableId),d=0===H.length?"\u2014":2===H.length?"Sum & Avg":1===H[0]?"Sum":"Avg",i=7===e.type?1:8===e.type?2:3;return(0,_.jsx)(o.A,{sx:{p:1,borderRadius:1,background:"#F7F9FB",mb:1},children:(0,_.jsxs)(s.Ay,{container:!0,alignItems:"center",children:[(0,_.jsx)(s.Ay,{item:!0,xs:12,md:3,children:(0,_.jsxs)("strong",{children:["Group Filter ",e.slot," (Level ",i,")"]})}),(0,_.jsxs)(s.Ay,{item:!0,xs:12,md:4,children:[r," ",a&&((null===(t=a.Table_Name)||void 0===t?void 0:t.toLowerCase().includes("los"))||(null===(n=a.AliasName)||void 0===n?void 0:n.toLowerCase().includes("los")))&&"(LOS)"]}),(0,_.jsx)(s.Ay,{item:!0,xs:12,md:3,children:e.columnName}),(0,_.jsx)(s.Ay,{item:!0,xs:12,md:2,style:{textAlign:"right"},children:d})]})},e.type)})]})]}),(0,_.jsx)(r.A,{variant:"caption",color:"textSecondary",children:"Note: Columns already used in other filter slots are disabled to prevent duplicates. Group Filters can use any column."})]}),(0,_.jsxs)(h.A,{children:[(0,_.jsx)(i.A,{onClick:()=>q(!1),startIcon:(0,_.jsx)(x.A,{}),children:"Back"}),(0,_.jsx)(i.A,{variant:"contained",onClick:()=>{q(!1),oe()},children:"Submit"})]})]})]})}},12110:(e,l,t)=>{t.d(l,{A:()=>v});var n=t(58168),a=t(98587),o=t(65043),r=t(58387),s=t(68606),d=t(34535),i=t(6431),c=t(63336),u=t(57056),m=t(32400);function b(e){return(0,m.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var p=t(70579);const h=["className","raised"],x=(0,d.Ay)(c.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,l)=>l.root})(()=>({overflow:"hidden"})),v=o.forwardRef(function(e,l){const t=(0,i.b)({props:e,name:"MuiCard"}),{className:o,raised:d=!1}=t,c=(0,a.A)(t,h),u=(0,n.A)({},t,{raised:d}),m=(e=>{const{classes:l}=e;return(0,s.A)({root:["root"]},b,l)})(u);return(0,p.jsx)(x,(0,n.A)({className:(0,r.A)(m.root,o),elevation:d?8:void 0,ref:l,ownerState:u},c))})},26494:(e,l,t)=>{t.d(l,{A:()=>x});var n=t(58168),a=t(98587),o=t(65043),r=t(58387),s=t(68606),d=t(34535),i=t(6431),c=t(57056),u=t(32400);function m(e){return(0,u.Ay)("MuiCardContent",e)}(0,c.A)("MuiCardContent",["root"]);var b=t(70579);const p=["className","component"],h=(0,d.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,l)=>l.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),x=o.forwardRef(function(e,l){const t=(0,i.b)({props:e,name:"MuiCardContent"}),{className:o,component:d="div"}=t,c=(0,a.A)(t,p),u=(0,n.A)({},t,{component:d}),x=(e=>{const{classes:l}=e;return(0,s.A)({root:["root"]},m,l)})(u);return(0,b.jsx)(h,(0,n.A)({as:d,className:(0,r.A)(x.root,o),ownerState:u,ref:l},c))})},37141:(e,l,t)=>{t.d(l,{A:()=>o});var n=t(59662),a=t(70579);const o=(0,n.A)((0,a.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")},38463:(e,l,t)=>{t.d(l,{A:()=>o});var n=t(59662),a=t(70579);const o=(0,n.A)((0,a.jsx)("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNewOutlined")},55434:(e,l,t)=>{t.d(l,{A:()=>o});var n=t(59662),a=t(70579);const o=(0,n.A)((0,a.jsx)("path",{d:"M12 6.5c3.79 0 7.17 2.13 8.82 5.5-1.65 3.37-5.02 5.5-8.82 5.5S4.83 15.37 3.18 12C4.83 8.63 8.21 6.5 12 6.5m0-2C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5m0 5c1.38 0 2.5 1.12 2.5 2.5s-1.12 2.5-2.5 2.5-2.5-1.12-2.5-2.5 1.12-2.5 2.5-2.5m0-2c-2.48 0-4.5 2.02-4.5 4.5s2.02 4.5 4.5 4.5 4.5-2.02 4.5-4.5-2.02-4.5-4.5-4.5"}),"RemoveRedEyeOutlined")},65829:(e,l,t)=>{t.d(l,{A:()=>o});var n=t(59662),a=t(70579);const o=(0,n.A)((0,a.jsx)("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"}),"KeyboardArrowLeft")}}]);
//# sourceMappingURL=1614.6b231871.chunk.js.map