{"version":3,"file":"static/js/3524.eedd9ae3.chunk.js","mappings":"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","sources":["Pages/Discussions/chats.jsx"],"sourcesContent":["import React, { Fragment, useEffect, useState, useRef } from 'react';\r\nimport api from '../../API';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { IconButton, Tooltip, Dialog, DialogTitle, DialogContent, DialogActions, Button } from '@mui/material';\r\nimport { Send, ArrowBackIos, Replay, Attachment, Download, ArticleOutlined } from '@mui/icons-material';\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport axios from 'axios';\r\nimport { fetchLink } from \"../../Components/fetchComponent\";\r\n\r\nconst ChatsDisplayer = () => {\r\n    const localData = localStorage.getItem(\"user\");\r\n    const parseData = JSON.parse(localData);\r\n    const location = useLocation();\r\n    const locationData = location.state;\r\n    const navigate = useNavigate();\r\n    const [messageData, setMessageData] = useState([]);\r\n    const [documents, setDocuments] = useState([]);\r\n    const chatBodyRef = useRef(null);\r\n    const [messageInput, setMessageInput] = useState('');\r\n    const [reload, setReload] = useState(false);\r\n\r\n    const [uploadDialog, setUploadDialog] = useState(false);\r\n    const [uploadFile, setUploadFile] = useState('');\r\n    const [uploadPercentage, setUploadPercentage] = useState(0);\r\n\r\n    const [documentsDialog, setDocumentsDialog] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (!locationData) {\r\n            return navigate('/taskManagement/discussions')\r\n        }\r\n        fetchLink({\r\n            address: `discussionForum/messages?Topic_Id=${locationData?.Id}`,\r\n        }).then(data => {\r\n            if (data.success) {\r\n                const groupedData = data.data.reduce((acc, message) => {\r\n                    const date = new Date(message.CreatedAt).toDateString();\r\n                    if (!acc[date]) {\r\n                        acc[date] = [];\r\n                    }\r\n                    acc[date].push(message);\r\n                    return acc;\r\n                }, {});\r\n                setMessageData(groupedData);\r\n            }\r\n        }).catch(e => console.log(e))\r\n        \r\n        fetchLink({\r\n            address: `discussionForum/files?Topic_Id=${locationData?.Id}`,\r\n        }).then(data => {\r\n            if (data.success) {\r\n                setDocuments(data.data);\r\n            }\r\n        }).catch(e => console.log(e))\r\n    }, [reload])\r\n\r\n    useEffect(() => {\r\n        if (chatBodyRef.current) {\r\n            const { scrollHeight, clientHeight } = chatBodyRef.current;\r\n            chatBodyRef.current.scrollTop = scrollHeight - clientHeight;\r\n        }\r\n    }, [messageData]);\r\n\r\n    const handleFormSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (messageInput.trim() === '') {\r\n            toast.warn('Enter a message');\r\n            setMessageInput('')\r\n            return;\r\n        }\r\n\r\n        fetchLink({\r\n            address: `discussionForum/messages`,\r\n            method: 'POST',\r\n            bodyData: {\r\n                Topic_Id: locationData?.Id,\r\n                User_Id: parseData?.UserId,\r\n                Message: messageInput\r\n            }\r\n        }).then(data => {\r\n            if (data.success) {\r\n                setReload(!reload);\r\n                setMessageInput('');\r\n            } else {\r\n                toast.error(data.message);\r\n            }\r\n        }).catch(e => console.log(e))\r\n    };\r\n\r\n    const closeFileUploadDialog = () => {\r\n        setUploadDialog(false);\r\n        setUploadFile('')\r\n    }\r\n\r\n    const uploadFileFun = (e) => {\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append('files', uploadFile);\r\n        formData.append('User_Id', parseData?.UserId);\r\n        formData.append('Project_Id', locationData?.Project_Id);\r\n        formData.append('Topic_Id', locationData?.Id);\r\n\r\n        try {\r\n            axios.post(`${api}discussionForum/files`, formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                    \"Authorization\": parseData?.Autheticate_Id\r\n                },\r\n                onUploadProgress: progressEvent => {\r\n                    let percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n                    setUploadPercentage(percentCompleted);\r\n                },\r\n            }).then((data) => {\r\n                toast.success(data.data.message);\r\n                setReload(!reload)\r\n            }).catch(e => {\r\n                toast.error('Failed to upload')\r\n                console.error(e)\r\n            }).finally(() => {\r\n                closeFileUploadDialog();\r\n                setUploadPercentage(0);\r\n            })\r\n        } catch (error) {\r\n            console.error('Error uploading file:', error);\r\n        }\r\n    }\r\n\r\n    const downloadFile = async (id) => {\r\n        try {\r\n            const response = await fetchLink({\r\n                address: `discussionForum/files/download?FileId=${id}`,\r\n                headers: {\r\n                    \"Content-Type\": \"application/octet-stream\",  \r\n                    \"Authorization\": parseData.Autheticate_Id\r\n                }\r\n            });\r\n    \r\n            const blob = await response.blob();\r\n            const downloadUrl = window.URL.createObjectURL(blob);\r\n            const link = document.createElement('a');\r\n            link.href = downloadUrl;\r\n            link.setAttribute('download', `file_${id}`);  \r\n            document.body.appendChild(link);\r\n            link.click();\r\n            link.parentNode.removeChild(link);  \r\n        } catch (e) {\r\n            console.error('Download Error', e);\r\n        }\r\n    };\r\n    \r\n\r\n    return (\r\n        <>\r\n            <ToastContainer />\r\n            <div className=\"chat-header d-flex align-items-center\">\r\n                <p className='mb-0 fa-14 text-white text-uppercase fw-bold flex-grow-1'>{locationData?.Topic}</p>\r\n                <Tooltip title=\"Back\">\r\n                    <IconButton size='small' onClick={() => navigate('/taskManagement/discussions')}><ArrowBackIos className='fa-18' /></IconButton>\r\n                </Tooltip>\r\n                <Tooltip title=\"Refresh Chat\">\r\n                    <IconButton size='small' onClick={() => setReload(!reload)}><Replay className='fa-18' /></IconButton>\r\n                </Tooltip>\r\n                <Tooltip title=\"Documnets Shared\">\r\n                    <IconButton size='small' onClick={() => setDocumentsDialog(true)}><ArticleOutlined /></IconButton>\r\n                </Tooltip>\r\n                <Dropdown>\r\n                    <Dropdown.Toggle\r\n                        variant=\"success\"\r\n                        id=\"actions\"\r\n                        className=\"rounded-5 bg-transparent text-muted fa-18 border-0 btn\"\r\n                    >\r\n                    </Dropdown.Toggle>\r\n                    <Dropdown.Menu>\r\n                        <h5 className='mb-1 text-primary px-3 fa-18 border-bottom'> Teams</h5>\r\n                        {locationData?.InvolvedUsers.map((o, i) => (\r\n                            <p key={i} className='fw-bold text-muted fa-13 mb-0 px-3 py-1 '>{o.Name}</p>\r\n                        ))}\r\n                    </Dropdown.Menu>\r\n                </Dropdown>\r\n            </div>\r\n            <div className=\"chat-body\" ref={chatBodyRef}>\r\n                {Object.entries(messageData).map(([date, messages]) => (\r\n                    <Fragment key={date}>\r\n                        <div className=\"badge rounded-3 bg-light text-center text-dark mx-auto my-2\">\r\n                            {new Date().toDateString() === date ? 'Today' : date}\r\n                        </div>\r\n                        {messages.map((message) => (\r\n                            <div\r\n                                key={message.Id}\r\n                                className={`messages ${Number(message?.User_Id) === Number(parseData?.UserId) ? 'message-right' : 'message-left'}`}\r\n                            >\r\n                                <p className={'fw-bold mb-1 text-primary fa-12'}>\r\n                                    {Number(message?.User_Id) === Number(parseData?.UserId) ? \"You\" : message.Name}\r\n                                </p>\r\n                                <div className='fa-16 mb-2'>{message.Message}</div>\r\n                                <p className={`fa-11 mb-0 fw-bold ${Number(message?.User_Id) === Number(parseData?.UserId) && 'text-end'} `}>\r\n                                    {new Date(message.CreatedAt).toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' })}\r\n                                </p>\r\n                            </div>\r\n                        ))}\r\n                    </Fragment>\r\n                ))}\r\n            </div>\r\n            <form onSubmit={handleFormSubmit}>\r\n                <div className=\"chat-footer\">\r\n                    <div className=\"input-icon-container\">\r\n                        <input\r\n                            className='cus-inpt rounded-5 border-0 outline-none px-3'\r\n                            placeholder=\"Type a message\"\r\n                            autoFocus required\r\n                            value={messageInput}\r\n                            onChange={e => setMessageInput(e.target.value)}\r\n                            onInvalid={e => e.target.setCustomValidity('Type a message')}\r\n                            onInput={e => e.target.setCustomValidity('')}\r\n                        />\r\n                        <Tooltip title=\"Upload Files\">\r\n                            <IconButton onClick={() => setUploadDialog(true)} type='button' >\r\n                                <Attachment />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title=\"Send Message\">\r\n                            <IconButton type='submit'>\r\n                                <Send />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n\r\n            <Dialog\r\n                open={uploadDialog}\r\n                onClose={closeFileUploadDialog}\r\n                fullWidth\r\n                maxWidth=\"sm\" >\r\n                <DialogTitle>Share Files</DialogTitle>\r\n                <form onSubmit={uploadFileFun}>\r\n                    <DialogContent>\r\n                        <input\r\n                            type='file'\r\n                            className='cus-inpt ' required\r\n                            onChange={e => setUploadFile(e.target.files[0])} />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={closeFileUploadDialog} type='button'>close</Button>\r\n                        <Button onClick={uploadFileFun} disabled={uploadPercentage !== 0} type='submit'>Upload</Button>\r\n                    </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n\r\n            <Dialog\r\n                open={documentsDialog}\r\n                onClose={() => setDocumentsDialog(false)}\r\n                fullWidth\r\n                maxWidth={documents.length > 0 ? \"lg\" : 'sm'} >\r\n                <DialogTitle>Shared Documents</DialogTitle>\r\n                <DialogContent>\r\n                    {documents.length > 0 ? (\r\n                        <div className=\"table-responsive\">\r\n                            <table className=\"table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th className='fa-14'>S.No</th>\r\n                                        <th className='fa-14'>File Name</th>\r\n                                        <th className='fa-14'>Size</th>\r\n                                        <th className='fa-14'>Type</th>\r\n                                        <th className='fa-14'>Date</th>\r\n                                        <th className='fa-14'></th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {documents.map((o, i) => (\r\n                                        <tr key={i}>\r\n                                            <td className='fa-14'>{i + 1}</td>\r\n                                            <td className='fa-14'>{o?.FileName}</td>\r\n                                            <td className='fa-14'>{o?.FileSize ? (o?.FileSize / 1024 / 1024).toFixed(2) : 0} MB</td>\r\n                                            <td className='fa-14'>{o?.FileType}</td>\r\n                                            <td className='fa-14'>{o?.SendDate}</td>\r\n                                            <td className='fa-14'>\r\n                                                <IconButton className='text-primary' size=\"small\" onClick={() => downloadFile(o.FileId)}><Download /></IconButton>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    ) : (\r\n                        <h5 className='text-center text-muted my-5'>No Documents Available</h5>\r\n                    )}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => setDocumentsDialog(false)}>Close</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ChatsDisplayer;"],"names":["ChatsDisplayer","localData","localStorage","getItem","parseData","JSON","parse","locationData","useLocation","state","navigate","useNavigate","messageData","setMessageData","useState","documents","setDocuments","chatBodyRef","useRef","messageInput","setMessageInput","reload","setReload","uploadDialog","setUploadDialog","uploadFile","setUploadFile","uploadPercentage","setUploadPercentage","documentsDialog","setDocumentsDialog","useEffect","fetchLink","address","concat","Id","then","data","success","groupedData","reduce","acc","message","date","Date","CreatedAt","toDateString","push","catch","e","console","log","current","scrollHeight","clientHeight","scrollTop","closeFileUploadDialog","uploadFileFun","preventDefault","formData","FormData","append","UserId","Project_Id","axios","post","api","headers","Autheticate_Id","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","toast","error","finally","_jsxs","_Fragment","children","_jsx","ToastContainer","className","Topic","Tooltip","title","IconButton","size","onClick","ArrowBackIos","Replay","ArticleOutlined","Dropdown","Toggle","variant","id","Menu","InvolvedUsers","map","o","i","Name","ref","Object","entries","_ref","messages","Fragment","Number","User_Id","Message","toLocaleTimeString","hour","minute","onSubmit","async","trim","warn","method","bodyData","Topic_Id","placeholder","autoFocus","required","value","onChange","target","onInvalid","setCustomValidity","onInput","type","Attachment","Send","Dialog","open","onClose","fullWidth","maxWidth","DialogTitle","DialogContent","files","DialogActions","Button","disabled","length","FileName","FileSize","toFixed","FileType","SendDate","response","blob","downloadUrl","window","URL","createObjectURL","link","document","createElement","href","setAttribute","body","appendChild","click","parentNode","removeChild","downloadFile","FileId","Download"],"sourceRoot":""}