"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3053],{83053:(e,i,s)=>{s.r(i),s.d(i,{default:()=>k});var t=s(65043),n=s(83462),l=s(35316),d=s(29347),a=s(11906),o=s(28076),h=s(39652),r=s(51962),c=s(17392),g=s(79650),x=s(63336),u=s(71806),A=s(84882),j=s(73460),m=s(24509),R=s(91036),v=(s(92342),s(20656)),S=s(45777),f=s(63406),p=s(65074),z=s(70579);const C=(e,i,s,t,n)=>{t&&t(),(0,p.z)({address:"authorization/userRights",method:"POST",bodyData:{MenuId:i,User:Number(s),ReadRights:!0===e.readRights?1:0,AddRights:!0===e.addRights?1:0,EditRights:!0===e.editRights?1:0,DeleteRights:!0===e.deleteRights?1:0,PrintRights:!0===e.printRights?1:0},headers:{"Content-Type":"application/json"}}).then(e=>{e.success||R.oR.error(e.message)}).catch(e=>console.error(e)).finally(()=>{n&&n()})},b=e=>{var i,s;let{UserId:R,data:v,loadingOn:S,loadingOff:p}=e;const[b,I]=(0,t.useState)(!1),[k,M]=(0,t.useState)(1===v.Read_Rights),[w,O]=(0,t.useState)(1===v.Add_Rights),[y,U]=(0,t.useState)(1===v.Edit_Rights),[E,D]=(0,t.useState)(1===v.Delete_Rights),[H,N]=(0,t.useState)(1===v.Print_Rights),[P,B]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{M(1===v.Read_Rights),O(1===v.Add_Rights),U(1===v.Edit_Rights),D(1===v.Delete_Rights),N(1===v.Print_Rights),B(!1)},[v]),(0,t.useEffect)(()=>{!0===P&&C({readRights:k,addRights:w,editRights:y,deleteRights:E,printRights:H},v.id,R,S,p)},[k,w,y,E,H]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(o.A,{hover:!0,children:[(0,z.jsx)(h.A,{children:v.id}),(0,z.jsx)(h.A,{children:v.name}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:k,size:"small",onChange:()=>{B(!0),M(!k)}})}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:w,size:"small",onChange:()=>{B(!0),O(!w)}})}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:y,size:"small",onChange:()=>{B(!0),U(!y)}})}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:E,size:"small",onChange:()=>{B(!0),D(!E)}})}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:H,size:"small",onChange:()=>{B(!0),N(!H)}})}),(0,z.jsx)(h.A,{children:(null===v||void 0===v||null===(i=v.SubMenu)||void 0===i?void 0:i.length)>0&&(0,z.jsx)(c.A,{"aria-label":"expand row",size:"small",onClick:()=>I(!b),children:(0,z.jsx)(m.A,{})})})]}),(0,z.jsxs)(n.A,{open:b,onClose:()=>I(!b),maxWidth:"lg",fullWidth:!0,children:[(0,z.jsxs)(l.A,{children:[(0,z.jsx)("h3",{style:{paddingBottom:"0.5em"},children:"Sub Menu"}),(0,z.jsx)(g.A,{component:x.A,sx:{maxHeight:650},children:(0,z.jsxs)(u.A,{stickyHeader:!0,"aria-label":"simple table",children:[(0,z.jsx)(A.A,{children:(0,z.jsx)(o.A,{children:f.zU.map(e=>(0,z.jsx)(h.A,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Action"===e.headname?"Child Menu":e.headname},e.id))})}),(0,z.jsx)(j.A,{children:null===v||void 0===v||null===(s=v.SubMenu)||void 0===s?void 0:s.map((e,i)=>(0,z.jsx)(_,{data:e,UserId:R,loadingOn:S,loadingOff:p},i))})]})})]}),(0,z.jsx)(d.A,{children:(0,z.jsx)(a.A,{onClick:()=>I(!b),color:"primary",children:"Close"})})]})]})},_=e=>{var i,s;let{data:R,UserId:v,loadingOn:S,loadingOff:p}=e;const[b,_]=(0,t.useState)(!1),[k,M]=(0,t.useState)(1===R.Read_Rights),[w,O]=(0,t.useState)(1===R.Add_Rights),[y,U]=(0,t.useState)(1===R.Edit_Rights),[E,D]=(0,t.useState)(1===R.Delete_Rights),[H,N]=(0,t.useState)(1===R.Print_Rights),[P,B]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{M(1===R.Read_Rights),O(1===R.Add_Rights),U(1===R.Edit_Rights),D(1===R.Delete_Rights),N(1===R.Print_Rights),B(!1)},[R]),(0,t.useEffect)(()=>{!0===P&&C({readRights:k,addRights:w,editRights:y,deleteRights:E,printRights:H},R.id,v,S,p)},[k,w,y,E,H]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(o.A,{hover:!0,children:[(0,z.jsx)(h.A,{children:R.id}),(0,z.jsx)(h.A,{children:R.name}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:k,size:"small",onChange:()=>{B(!0),M(!k)}})}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:w,size:"small",onChange:()=>{B(!0),O(!w)}})}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:y,size:"small",onChange:()=>{B(!0),U(!y)}})}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:E,size:"small",onChange:()=>{B(!0),D(!E)}})}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:H,size:"small",onChange:()=>{B(!0),N(!H)}})}),(0,z.jsx)(h.A,{children:(null===R||void 0===R||null===(i=R.ChildMenu)||void 0===i?void 0:i.length)>0&&(0,z.jsx)(c.A,{"aria-label":"expand row",size:"small",onClick:()=>_(!b),children:(0,z.jsx)(m.A,{})})})]}),(0,z.jsxs)(n.A,{open:b,onClose:()=>_(!b),maxWidth:"lg",fullWidth:!0,children:[(0,z.jsxs)(l.A,{children:[(0,z.jsx)("h3",{style:{paddingBottom:"0.5em"},children:"Child Menu"}),(0,z.jsx)(g.A,{component:x.A,sx:{maxHeight:650},children:(0,z.jsxs)(u.A,{stickyHeader:!0,"aria-label":"simple table",children:[(0,z.jsx)(A.A,{children:(0,z.jsx)(o.A,{children:f.zU.map(e=>(0,z.jsx)(h.A,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:e.headname},e.id))})}),(0,z.jsx)(j.A,{children:null===R||void 0===R||null===(s=R.ChildMenu)||void 0===s?void 0:s.map((e,i)=>(0,z.jsx)(I,{data:e,UserId:v},i))})]})})]}),(0,z.jsx)(d.A,{children:(0,z.jsx)(a.A,{onClick:()=>_(!b),color:"primary",children:"Close"})})]})]})},I=e=>{let{data:i,UserId:s,loadingOn:n,loadingOff:l}=e;const[d,a]=(0,t.useState)(1===i.Read_Rights),[c,g]=(0,t.useState)(1===i.Add_Rights),[x,u]=(0,t.useState)(1===i.Edit_Rights),[A,j]=(0,t.useState)(1===i.Delete_Rights),[m,R]=(0,t.useState)(1===i.Print_Rights),[v,S]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{a(1===i.Read_Rights),g(1===i.Add_Rights),u(1===i.Edit_Rights),j(1===i.Delete_Rights),R(1===i.Print_Rights),S(!1)},[i]),(0,t.useEffect)(()=>{!0===v&&C({readRights:d,addRights:c,editRights:x,deleteRights:A,printRights:m},i.id,s,n,l)},[d,c,x,A,m]),(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(o.A,{hover:!0,children:[(0,z.jsx)(h.A,{children:i.id}),(0,z.jsx)(h.A,{children:i.name}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:d,size:"small",onChange:()=>{S(!0),a(!d)}})}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:c,size:"small",onChange:()=>{S(!0),g(!c)}})}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:x,size:"small",onChange:()=>{S(!0),u(!x)}})}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:A,size:"small",onChange:()=>{S(!0),j(!A)}})}),(0,z.jsx)(h.A,{children:(0,z.jsx)(r.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:m,size:"small",onChange:()=>{S(!0),R(!m)}})}),(0,z.jsx)(h.A,{})]})})},k=e=>{const[i,s]=(0,t.useState)([]),[n,l]=(0,t.useState)([]),[d,a]=(0,t.useState)([]),r=localStorage.getItem("user"),c=JSON.parse(r),[m,R]=(0,t.useState)({value:null===c||void 0===c?void 0:c.Autheticate_Id,label:null===c||void 0===c?void 0:c.Name}),[C,_]=(0,t.useState)(null===c||void 0===c?void 0:c.UserId),{contextObj:k}=(0,t.useContext)(S.i);(0,t.useEffect)(()=>{(0,p.z)({address:"authorization/userRights",headers:{Authorization:m.value}}).then(e=>{e.success&&(s(e.data),l(e.others.subRoutings))})},[m]),(0,t.useEffect)(()=>{(0,p.z)({address:"masters/users?Company_id=".concat(null===c||void 0===c?void 0:c.Company_id)}).then(e=>{e.success&&a(e.data)}).catch(e=>console.log(e))},[null===c||void 0===c?void 0:c.Company_id]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"row",children:(0,z.jsx)("div",{className:"col-sm-4 pt-1",children:(0,z.jsx)(v.Ay,{value:m,onChange:e=>(e=>{if(e){const i=d.find(i=>i.Autheticate_Id===e.value);R({value:null===i||void 0===i?void 0:i.Autheticate_Id,label:i.Name}||{value:null===c||void 0===c?void 0:c.Autheticate_Id,label:null===c||void 0===c?void 0:c.Name}),_((null===i||void 0===i?void 0:i.UserId)||c.UserId)}})(e),options:[...d.map(e=>({value:e.Autheticate_Id,label:e.Name}))],styles:f.MR,isSearchable:!0,placeholder:"Select User"})})}),(0,z.jsx)("br",{}),(0,z.jsx)("h6",{style:{marginBottom:"0.5em",borderBottom:"2px solid blue",width:"fit-content"},children:"Menu Access Control"}),(0,z.jsx)(g.A,{component:x.A,sx:{maxHeight:650},title:"Menu Access Control",children:(0,z.jsxs)(u.A,{stickyHeader:!0,"aria-label":"simple table",children:[(0,z.jsx)(A.A,{children:(0,z.jsx)(o.A,{children:f.zU.map(e=>(0,z.jsx)(h.A,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Action"===e.headname?"Sub Menu":e.headname},e.id))})}),(0,z.jsx)(j.A,{children:i.map((i,s)=>(0,z.jsx)(b,{data:i,UserId:C,loadingOn:e.loadingOn,loadingOff:e.loadingOff},s))})]})}),(0,z.jsx)("br",{}),(0,z.jsx)("h6",{style:{marginBottom:"0.5em",borderBottom:"2px solid blue",width:"fit-content"},children:"Sub-Routings Access Control"}),n.length>0&&(0,z.jsx)(g.A,{component:x.A,sx:{maxHeight:650},title:"Sub-Routings Access Control",children:(0,z.jsxs)(u.A,{stickyHeader:!0,"aria-label":"simple table",size:"small",children:[(0,z.jsx)(A.A,{children:(0,z.jsx)(o.A,{children:f.zU.map(e=>(0,z.jsx)(h.A,{variant:e.variant,align:e.align,width:e.width,sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Action"===e.headname?"Sub Menu":e.headname},e.id))})}),(0,z.jsx)(j.A,{children:n.map((i,s)=>(0,z.jsx)(I,{data:i,UserId:C,loadingOn:e.loadingOn,loadingOff:e.loadingOff},s))})]})})]})}}}]);
//# sourceMappingURL=3053.e1ad76a3.chunk.js.map