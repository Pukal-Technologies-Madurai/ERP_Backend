"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3450],{3450:(e,l,a)=>{a.r(l),a.d(l,{default:()=>H});var d=a(89379),i=a(65043),n=a(12412),t=a(51962),o=a(67784),r=a(12110),s=a(74605),c=a(4598),u=a(77739),v=a(17392),m=a(81e3),x=a(24056),h=a(83462),p=a(35316),j=a(29347),g=a(11906),b=a(12249),f=a(5793),y=a(59383),A=a(8846),N=a(22016),_=a(15710),F=a(86506),C=a(29978),S=a(97707),w=a(30279),D=a(70579);const I=e=>{let{dataArray:l}=e;const[a,d]=(0,i.useState)([]);(0,i.useEffect)(()=>{const e=[{min:0,max:5e3,data:[]},{min:5e3,max:1e4,data:[]},{min:1e4,max:2e4,data:[]},{min:2e4,max:5e4,data:[]},{min:5e4,max:1e5,data:[]},{min:1e5,max:2e5,data:[]},{min:2e5,max:5e5,data:[]},{min:5e5,max:1e6,data:[]},{min:1e6,max:15e5,data:[]},{min:15e5,max:2e6,data:[]},{min:2e6,max:1e15,data:[]}];l.forEach(l=>{const a=Number(l.Sales_Amount),d=e.findIndex(e=>a>e.min&&a<=e.max);-1!==d&&e[d].data.push(l)}),d(e)},[l]);const n=e=>{var d,n,t,o;let{o:r,i:s}=e;const[c,u]=(0,i.useState)(!1);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("tr",{onClick:()=>u(e=>!e),className:"hov",children:[(0,D.jsx)("td",{className:"fa-13 border text-center hov-bg",children:s+1}),(0,D.jsx)("td",{className:"fa-13 border text-center hov-bg",children:a[s+1]?(0,S.jG)(null===r||void 0===r?void 0:r.min)+" - "+(0,S.jG)(null===r||void 0===r?void 0:r.max):"< "+(null===r||void 0===r?void 0:r.min.toString())}),(0,D.jsx)("td",{className:"fa-13 border text-center hov-bg blue-text",children:null===r||void 0===r||null===(d=r.data)||void 0===d?void 0:d.length}),(0,D.jsxs)("td",{className:"fa-13 border text-center hov-bg",children:[(0,S.jG)((null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.length)/(null===l||void 0===l?void 0:l.length)*100),"%"]}),(0,D.jsx)("td",{className:"fa-13 border text-center hov-bg",children:0===r.data.length?0:((null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.reduce((e,l)=>e+l.Sales_Count||0,0))/r.data.length).toFixed(2)}),(0,D.jsx)("td",{className:"fa-13 border text-center hov-bg",children:0===r.data.length?0:((null===r||void 0===r||null===(o=r.data)||void 0===o?void 0:o.reduce((e,l)=>e+l.Freq_Days||0,0))/r.data.length).toFixed(2)})]}),(0,D.jsx)(w.A,{in:c,unmountOnExit:!0,children:(0,D.jsx)("tr",{children:(0,D.jsx)("td",{colSpan:6})})})]})};return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)("div",{className:"px-3 d-flex align-items-center justify-content-center flex-column py-2",children:[(0,D.jsx)(C.E,{xAxis:[{scaleType:"band",data:null===a||void 0===a?void 0:a.map((e,l)=>a[l+1]?"> "+(0,S.jG)(null===e||void 0===e?void 0:e.max):"< "+(null===e||void 0===e?void 0:e.min))}],series:[{data:null===a||void 0===a?void 0:a.map(e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.length}),label:"Parties",color:"skyblue"}],height:400,barLabel:"value",borderRadius:6}),(0,D.jsx)("div",{className:"table-responsive w-100",children:(0,D.jsxs)("table",{className:"table",children:[(0,D.jsx)("thead",{children:(0,D.jsx)("tr",{children:["Sno","Amount-Range","Parties","Percentage","Sales Count (Avg)","Frequency Days (Avg)"].map(e=>(0,D.jsx)("th",{className:"border fa-14 text-center",style:{backgroundColor:"#EDF0F7"},children:e},e))})}),(0,D.jsxs)("tbody",{children:[a.map((e,l)=>(0,D.jsx)(n,{o:e,i:l},l)),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border"}),(0,D.jsx)("td",{className:"border"}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,S.jG)(null===a||void 0===a?void 0:a.reduce((e,l)=>{var a;return e+(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.length)},0))}),(0,D.jsxs)("td",{className:"fa-13 border text-center",children:[(0,S.jG)(null===a||void 0===a?void 0:a.reduce((e,a)=>{var d;return e+(null===a||void 0===a||null===(d=a.data)||void 0===d?void 0:d.length)/(null===l||void 0===l?void 0:l.length)*100},0)),"%"]}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,S.jG)((null===l||void 0===l?void 0:l.length)/(null===l||void 0===l?void 0:l.reduce((e,l)=>e+(Number(null===l||void 0===l?void 0:l.Sales_Count)||0),0))*100)}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,S.jG)((null===l||void 0===l?void 0:l.length)/(null===l||void 0===l?void 0:l.reduce((e,l)=>e+(Number(null===l||void 0===l?void 0:l.Freq_Days)||0),0))*100)})]})]})]})})]})})};var k=a(54996);const P=e=>{let{dataArray:l,columns:a,filters:n}=e;const[t,o]=(0,i.useState)([]),[r,s]=(0,i.useState)(!1),[c,u]=(0,i.useState)([]),[v,m]=(0,i.useState)({group:localStorage.getItem("qPayGroup")||""}),x=e=>e?e.trim().toLowerCase():"";(0,i.useEffect)(()=>{const e=Array.isArray(n[v.group])?n[v.group]:[];u(e)},[n,v.group]),(0,i.useEffect)(()=>{const e=[{min:0,max:5,data:[]},{min:5,max:10,data:[]},{min:10,max:15,data:[]},{min:15,max:20,data:[]},{min:20,max:30,data:[]},{min:30,max:40,data:[]},{min:40,max:60,data:[]},{min:60,max:1e4,data:[]}];l.forEach(l=>{const a=Number(l.Q_Pay_Days),d=e.findIndex(e=>a>e.min&&a<=e.max);-1!==d&&e[d].data.push(l)}),o(e)},[l,r]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"col-xxl-3 col-lg-4 col-md-6 col-sm-8",children:(0,D.jsxs)("select",{className:"cus-inpt w-auto border",value:v.group,onChange:e=>{m(l=>(0,d.A)((0,d.A)({},l),{},{group:e.target.value})),localStorage.setItem("qPayGroup",e.target.value)},children:[(0,D.jsx)("option",{value:"",children:"Select Group By"}),null===a||void 0===a?void 0:a.map((e,l)=>{var a;return"string"===(null===e||void 0===e?void 0:e.Fied_Data)&&(0,D.jsx)("option",{value:null===e||void 0===e?void 0:e.Field_Name,children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")},l)})]})}),""===(null===v||void 0===v?void 0:v.group)||0===c.length?(0,D.jsxs)("div",{className:"d-flex justify-content-around align-items-center flex-wrap px-3 py-2",children:[(0,D.jsx)("div",{className:"table-responsive",children:(0,D.jsxs)("table",{className:"table",children:[(0,D.jsx)("thead",{children:(0,D.jsx)("tr",{children:["Sno","Day-Range","Parties","Percentage"].map(e=>(0,D.jsx)("th",{className:"border fa-15",style:{backgroundColor:"#EDF0F7"},children:e},e))})}),(0,D.jsxs)("tbody",{children:[t.map((e,a)=>{var d,i,n,o;return(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"fa-15 border text-center",children:a+1}),(0,D.jsx)("td",{className:"fa-15 border text-center",children:t[a+1]?(null===(d=(null===e||void 0===e?void 0:e.min)+1)||void 0===d?void 0:d.toString())+" - "+(null===e||void 0===e||null===(i=e.max)||void 0===i?void 0:i.toString()):"< "+(null===e||void 0===e?void 0:e.min.toString())}),(0,D.jsx)("td",{className:"fa-15 border text-center",children:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.length}),(0,D.jsx)("td",{className:"fa-15 border text-center",children:(0,S.jG)((null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.length)/(null===l||void 0===l?void 0:l.length)*100)})]},a)}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"border"}),(0,D.jsx)("td",{className:"border"}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,S.jG)(null===t||void 0===t?void 0:t.reduce((e,l)=>{var a;return e+(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.length)},0))}),(0,D.jsx)("td",{className:"fa-13 border text-center",children:(0,S.jG)(null===t||void 0===t?void 0:t.reduce((e,a)=>{var d;return e+(null===a||void 0===a||null===(d=a.data)||void 0===d?void 0:d.length)/(null===l||void 0===l?void 0:l.length)*100},0))})]})]})]})}),(0,D.jsxs)("div",{className:"d-flex align-items-center flex-column overflow-scroll",children:[(0,D.jsx)("h5",{children:"Q-Pay Days"}),(0,D.jsx)(k.r,{series:[{data:null===t||void 0===t?void 0:t.map((e,a)=>{var d,i,n;return{label:t[a+1]?(0,S.jG)(null===e||void 0===e?void 0:e.min)+"-"+(0,S.jG)(null===e||void 0===e?void 0:e.max)+"("+(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.length)+")":"< "+(0,S.jG)(null===e||void 0===e?void 0:e.min)+"("+(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.length)+")",value:((null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.length)/(null===l||void 0===l?void 0:l.length)*100).toFixed(2),color:(0,S.NP)()}}),arcLabel:e=>"".concat(e.label),arcLabelMinAngle:35}],width:570,height:400,title:"QPay Days"}),(0,D.jsx)(g.A,{onClick:()=>s(e=>!e),children:"Change color"})]})]}):(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("div",{className:"cus-grid mt-3",children:c.map((e,l)=>{var a;return(0,D.jsxs)("div",{className:"table-responsive grid-card bg-white border",children:[(0,D.jsxs)("h6",{className:"fw-bold text-muted d-flex justify-content-between",children:[null===(a=String(e))||void 0===a?void 0:a.toUpperCase(),(0,D.jsx)("span",{children:(0,S.jG)(null===t||void 0===t?void 0:t.reduce((l,a)=>{var d;return l+(null===a||void 0===a||null===(d=a.data)||void 0===d?void 0:d.reduce((l,a)=>x(a[v.group])===x(e)?l+1:l,0))},0))})]}),(0,D.jsxs)("table",{className:"table",children:[(0,D.jsx)("thead",{children:(0,D.jsx)("tr",{children:["Sno","Day-Range","Parties","Percentage"].map(e=>(0,D.jsx)("th",{className:"border fa-14",style:{backgroundColor:"#EDF0F7"},children:e},e))})}),(0,D.jsx)("tbody",{children:t.map((l,a)=>{var d,i,n,o;return(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"fa-15 border text-center",children:a+1}),(0,D.jsx)("td",{className:"fa-15 border text-center",children:t[a+1]?(null===(d=(null===l||void 0===l?void 0:l.min)+1)||void 0===d?void 0:d.toString())+" - "+(null===l||void 0===l||null===(i=l.max)||void 0===i?void 0:i.toString()):"< "+(null===l||void 0===l?void 0:l.min.toString())}),(0,D.jsx)("td",{className:"fa-15 border text-center",children:null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.reduce((l,a)=>x(a[v.group])===x(e)?l+1:l,0)}),(0,D.jsx)("td",{className:"fa-15 border text-center",children:(0,S.jG)((null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.reduce((l,a)=>x(a[v.group])===x(e)?l+1:l,0))/(null===t||void 0===t?void 0:t.reduce((l,a)=>{var d;return l+(null===a||void 0===a||null===(d=a.data)||void 0===d?void 0:d.reduce((l,a)=>x(a[v.group])===x(e)?l+1:l,0))},0))*100)})]},a)})})]})]},l)})})})]})};var E=a(74961),G=a(17039),B=a(54815);const O=(e,l)=>{switch(l){case"number":return(0,S.jG)(e);case"date":return(0,S.yc)(e);case"string":return e;default:return""}},L=e=>{let{dataArray:l,columns:a}=e;const[n,t]=(0,i.useState)([]);(0,i.useEffect)(()=>{const e=[...a].filter(e=>(0,S.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,S.id)(null===e||void 0===e?void 0:e.isVisible,1)).map(e=>{var l,a;return(0,d.A)({header:null===e||void 0===e||null===(l=e.Field_Name)||void 0===l?void 0:l.replace(/_/g," "),accessorKey:null===e||void 0===e?void 0:e.Field_Name,sortable:!0,size:150,aggregationFn:null!==e&&void 0!==e&&null!==(a=e.Field_Name)&&void 0!==a&&a.includes("mount")?"sum":"number"===(null===e||void 0===e?void 0:e.Fied_Data)?"mean":"uniqueCount",AggregatedCell:e=>{let{cell:l}=e;return(0,D.jsx)("div",{className:"blue-text text-center float-end w-100",children:(0,S.jG)(l.getValue())})},Cell:l=>{let{cell:a}=l;return(0,D.jsx)("p",{className:"m-0 text-center fa-14 w-100 ",children:O(a.getValue(),null===e||void 0===e?void 0:e.Fied_Data)})}},((e,l)=>{switch(l){case"number":return{filterVariant:"range",filterFn:"between"};case"date":case"string":return{filterVariant:"text"};default:return""}})(null===e||void 0===e||e.Field_Name,null===e||void 0===e?void 0:e.Fied_Data))});t(e)},[a]);const o=(0,B.Up)({columns:n,data:l||[],enableColumnResizing:!0,enableGrouping:!0,enableStickyHeader:!0,enableStickyFooter:!0,enableColumnOrdering:!0,enableRowNumbers:!1,initialState:{density:"compact",pagination:{pageIndex:0,pageSize:100},sorting:[{id:"Q_Pay_Days"}]},muiToolbarAlertBannerChipProps:{color:"primary"},muiTableContainerProps:{sx:{maxHeight:"64vh",minHeight:"56vh"}}});return(0,D.jsx)(B.zp,{table:o})};var R=a(91036),z=a(73216),V=a(32620),T=a(65074);const q=(0,D.jsx)(b.A,{fontSize:"small"}),Q=(0,D.jsx)(f.A,{fontSize:"small"}),H=()=>{const e=(0,z.Zp)(),l=["LIST","Q-PAY BASED","SALES VALUE BASED"],[a,b]=(0,i.useState)([]),[f,C]=(0,i.useState)([]),[w,k]=(0,i.useState)(!1),[B,O]=(0,i.useState)({zeros:!1,company:2,consolidate:1,view:"LIST",filterDialog:!1,displayGrouping:!1}),[H,M]=(0,i.useState)([]),[U,W]=(0,i.useState)([]),[Y,Z]=(0,i.useState)({}),[K,J]=(0,i.useState)(f),[X,$]=(0,i.useState)([]);(0,i.useEffect)(()=>{W(null===H||void 0===H?void 0:H.sort((e,l)=>null!==e&&void 0!==e&&e.OrderBy&&null!==l&&void 0!==l&&l.OrderBy?(null===e||void 0===e?void 0:e.OrderBy)-(null===l||void 0===l?void 0:l.OrderBy):(null===l||void 0===l?void 0:l.OrderBy)-(null===e||void 0===e?void 0:e.OrderBy)))},[H]),(0,i.useEffect)(()=>{b([]),(0,T.z)({address:"reports/tallyReports/qPay?Company_Id=".concat(null===B||void 0===B?void 0:B.company,"&Consolidate=").concat(null===B||void 0===B?void 0:B.consolidate)}).then(e=>{e.success&&b(e.data)}).catch(e=>console.error(e))},[null===B||void 0===B?void 0:B.company,null===B||void 0===B?void 0:B.consolidate,w]),(0,i.useEffect)(()=>{const e=[...a],l=B.zeros?e:e.filter(e=>null===e||void 0===e?void 0:e.Q_Pay_Days);C(l)},[a,B.zeros]),(0,i.useEffect)(()=>{(0,T.z)({address:"reports/tallyReports/qpay/columnVisiblity?CompanyId=".concat(B.company,"&Report_Type_Id=").concat(Boolean(null===B||void 0===B?void 0:B.consolidate)?1:2)}).then(e=>{var l;e.success&&(null===e||void 0===e||null===(l=e.data)||void 0===l||l.sort((e,l)=>{var a;return null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.localeCompare(null===l||void 0===l?void 0:l.Field_Name)}),M(e.data))}).catch(e=>console.error(e))},[B.company,null===B||void 0===B?void 0:B.consolidate,w]),(0,i.useEffect)(()=>{de()},[Y]),(0,i.useEffect)(()=>{const e=Object.keys(Y).length>0?K:f,l=null===e||void 0===e?void 0:e.reduce((e,l)=>null!==l&&void 0!==l&&l.Ledger_Tally_Id?[...e,null===l||void 0===l?void 0:l.Ledger_Tally_Id]:e,[]);$(l)},[Y,f,K]);const ee=l=>{if(Array.isArray(l)&&null!==l&&void 0!==l&&l.length){const a=null===l||void 0===l?void 0:l.reduce((e,l)=>l?e?"".concat(e,",").concat(l):"".concat(l):e,"");e("transaction",{state:{Ledger_Tally_Id:a,isObj:!1,rowDetails:l,company:B.company,preFilters:Y}})}else(0,S.Gv)(l)&&(0,S.IQ)(l.Ledger_Tally_Id)?e("transaction",{state:{Ledger_Tally_Id:l.Ledger_Tally_Id,isObj:!0,rowDetails:l,company:B.company,preFilters:Y}}):R.oR.error("Ledger Id not available")},le=e=>{const l=Object.keys(Y).length>0?K:f;switch(e){case"LIST":return(0,D.jsx)(E.A,{dataArray:l,columns:U,onClickFun:ee});case"Q-PAY BASED":return(0,D.jsx)(P,{dataArray:l,columns:U,filters:Y});case"SALES VALUE BASED":return(0,D.jsx)(I,{dataArray:l});default:D.Fragment}},ae=(e,l)=>{Z(a=>(0,d.A)((0,d.A)({},a),{},{[e]:l}))},de=()=>{let e=[...f];for(const a of U)if(Y[a.Field_Name])if("range"===Y[a.Field_Name].type){const{min:l,max:d}=Y[a.Field_Name];e=e.filter(e=>{const i=e[a.Field_Name];return(void 0===l||i>=l)&&(void 0===d||i<=d)})}else if("date"===Y[a.Field_Name].type){const{start:l,end:d}=Y[a.Field_Name].value;e=e.filter(e=>{const i=new Date(e[a.Field_Name]);return(void 0===l||i>=new Date(l))&&(void 0===d||i<=new Date(d))})}else if(Array.isArray(Y[a.Field_Name])){var l;e=(null===(l=Y[a.Field_Name])||void 0===l?void 0:l.length)>0?e.filter(e=>Y[a.Field_Name].includes(e[a.Field_Name].toLowerCase().trim())):e}J(e)},ie=e=>{const{Field_Name:l,Fied_Data:a}=e;var i,r,s,c,u,v,m,x,h,p;if("number"===a)return(0,D.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,D.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(i=null===(r=Y[l])||void 0===r?void 0:r.min)&&void 0!==i?i:"",onChange:e=>ae(l,(0,d.A)((0,d.A)({type:"range"},Y[l]),{},{min:e.target.value?parseFloat(e.target.value):void 0}))}),(0,D.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(s=null===(c=Y[l])||void 0===c?void 0:c.max)&&void 0!==s?s:"",onChange:e=>ae(l,(0,d.A)((0,d.A)({type:"range"},Y[l]),{},{max:e.target.value?parseFloat(e.target.value):void 0}))})]});if("date"===a)return(0,D.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,D.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(u=null===(v=Y[l])||void 0===v||null===(m=v.value)||void 0===m?void 0:m.start)&&void 0!==u?u:"",onChange:e=>{var a;return ae(l,{type:"date",value:(0,d.A)((0,d.A)({},null===(a=Y[l])||void 0===a?void 0:a.value),{},{start:e.target.value||void 0})})}}),(0,D.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(x=null===(h=Y[l])||void 0===h||null===(p=h.value)||void 0===p?void 0:p.end)&&void 0!==x?x:"",onChange:e=>{var a;return ae(l,{type:"date",value:(0,d.A)((0,d.A)({},null===(a=Y[l])||void 0===a?void 0:a.value),{},{end:e.target.value||void 0})})}})]});if("string"===a){const e=[...new Set(f.map(e=>{var a,d;return null===(a=e[l])||void 0===a||null===(d=a.toLowerCase())||void 0===d?void 0:d.trim()}))];return(0,D.jsx)(n.A,{multiple:!0,id:"".concat(l,"-filter"),options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:Y[l]||[],onChange:(e,a)=>ae(l,a),renderOption:(e,l,a)=>{let{selected:i}=a;return(0,D.jsxs)("li",(0,d.A)((0,d.A)({},e),{},{children:[(0,D.jsx)(t.A,{icon:q,checkedIcon:Q,style:{marginRight:8},checked:i}),l]}))},isOptionEqualToValue:(e,l)=>e===l,renderInput:e=>(0,D.jsx)(o.A,(0,d.A)((0,d.A)({},e),{},{label:l,placeholder:"Select ".concat(null===l||void 0===l?void 0:l.replace(/_/g," "))}))})}};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(r.A,{children:[(0,D.jsx)("div",{className:"p-2 border-bottom fa-16 fw-bold",children:(0,D.jsx)("span",{className:"text-uppercase ps-3",children:"Q-Pay Report"})}),(0,D.jsxs)("div",{className:"d-flex flex-wrap justify-content-between p-2",children:[(0,D.jsxs)("span",{children:[(0,D.jsx)(s.A,{control:(0,D.jsx)(c.A,{checked:!B.zeros,onChange:e=>O(l=>(0,d.A)((0,d.A)({},l),{},{zeros:!e.target.checked}))}),label:"Remove Zeros",labelPlacement:"start",className:" fw-bold text-primary"}),(0,D.jsx)(s.A,{control:(0,D.jsx)(c.A,{checked:1===B.consolidate,onChange:e=>O(l=>(0,d.A)((0,d.A)({},l),{},{consolidate:e.target.checked?1:0}))}),label:"Consolidate",labelPlacement:"start",className:" fw-bold text-primary"}),(0,D.jsx)(s.A,{control:(0,D.jsx)(c.A,{checked:B.displayGrouping,onChange:e=>O(l=>(0,d.A)((0,d.A)({},l),{},{displayGrouping:e.target.checked}))}),label:"Grouping",labelPlacement:"start",className:" fw-bold text-primary"})]}),(0,D.jsxs)("span",{children:[(0,D.jsx)(G.A,{CompanyId:B.company,columns:U,refresh:()=>{k(e=>!e)},ReportId:Boolean(null===B||void 0===B?void 0:B.consolidate)?1:2}),(0,D.jsx)(u.A,{title:"Open Sales List",children:(0,D.jsx)(v.A,{onClick:()=>ee(X),size:"small",children:(0,D.jsx)(V.sNT,{})})}),(0,D.jsx)(u.A,{title:"Filters",children:(0,D.jsx)(v.A,{onClick:()=>O(e=>(0,d.A)((0,d.A)({},e),{},{filterDialog:!0})),size:"small",className:"d-md-none d-inline",children:(0,D.jsx)(y.A,{})})})]})]}),B.displayGrouping?(0,D.jsx)(L,{dataArray:f,columns:U}):(0,D.jsxs)("div",{className:"row ",children:[(0,D.jsx)("div",{className:"col-xxl-10 col-lg-9 col-md-8",children:(0,D.jsx)("div",{className:"p-2",children:(0,D.jsxs)(N.Ay,{value:B.view,children:[(0,D.jsx)(m.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,D.jsx)(_.A,{indicatorColor:"transparant",onChange:(e,l)=>O(e=>(0,d.A)((0,d.A)({},e),{},{view:l})),variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,children:l.map(e=>(0,D.jsx)(x.A,{sx:B.view===e?{backgroundColor:"#c6d7eb"}:{},label:e,value:e},e))})}),l.map(e=>(0,D.jsx)(F.A,{value:e,sx:{px:0,py:2},children:le(B.view)},e))]})})}),(0,D.jsxs)("div",{className:"col-xxl-2 col-lg-3 col-md-4 d-none d-md-block",children:[(0,D.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:["Filters",(0,D.jsx)(u.A,{title:"Clear Filters",children:(0,D.jsx)(v.A,{size:"small",onClick:()=>Z({}),children:(0,D.jsx)(A.A,{})})})]}),(0,D.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[H.map((e,l)=>{var a;return((0,S.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,S.id)(null===e||void 0===e?void 0:e.isVisible,1))&&(0,D.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,D.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),ie(e)]},l)}),(0,D.jsx)("br",{})]})]})]})]}),(0,D.jsxs)(h.A,{open:null===B||void 0===B?void 0:B.filterDialog,onClose:()=>O(e=>(0,d.A)((0,d.A)({},e),{},{filterDialog:!1})),fullWidth:!0,maxWidth:"sm",children:[(0,D.jsxs)(p.A,{children:[(0,D.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:["Filters",(0,D.jsx)(u.A,{title:"Clear Filters",children:(0,D.jsx)(v.A,{size:"small",onClick:()=>Z({}),children:(0,D.jsx)(A.A,{})})})]}),(0,D.jsxs)("div",{className:"border rounded-3 ",style:{maxHeight:"70vh",overflow:"auto"},children:[H.map((e,l)=>{var a;return((0,S.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,S.id)(null===e||void 0===e?void 0:e.isVisible,1))&&(0,D.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,D.jsx)("label",{className:"mt-2 mb-1",children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")}),ie(e)]},l)}),(0,D.jsx)("br",{})]})]}),(0,D.jsx)(j.A,{children:(0,D.jsx)(g.A,{onClick:()=>O(e=>(0,d.A)((0,d.A)({},e),{},{filterDialog:!1})),color:"error",children:"close"})})]})]})}},17039:(e,l,a)=>{a.d(l,{A:()=>b});var d=a(89379),i=a(65043),n=a(17392),t=a(83462),o=a(26600),r=a(35316),s=a(12110),c=a(63336),u=a(4598),v=a(29347),m=a(11906),x=a(70998),h=a(32069),p=a(91036),j=a(65074),g=a(70579);const b=e=>{let{CompanyId:l,refresh:a,columns:b,ReportId:f}=e;const[y,A]=(0,i.useState)([]),[N,_]=(0,i.useState)(!1),[F,C]=(0,i.useState)(!1);(0,i.useEffect)(()=>{A([...b])},[b,N]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n.A,{size:"small",onClick:()=>C(e=>!e),children:(0,g.jsx)(h.A,{})}),(0,g.jsxs)(t.A,{open:F,onClose:()=>C(!1),fullWidth:!0,maxWidth:"lg",children:[(0,g.jsx)(o.A,{children:"Column Visiblity Settings"}),(0,g.jsx)(r.A,{children:(0,g.jsx)("div",{className:"row",children:null===y||void 0===y?void 0:y.map((e,l)=>(0,g.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,g.jsxs)(s.A,{component:c.A,className:"p-2 d-flex justify-content-between align-items-center flex-wrap ".concat(l%2!==0?"bg-light":""),children:[(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,g.jsx)(u.A,{checked:Boolean(null===e||void 0===e?void 0:e.Defult_Display)||Boolean(null===e||void 0===e?void 0:e.isVisible),disabled:Boolean(null===e||void 0===e?void 0:e.Defult_Display),onChange:l=>A(a=>a.map(a=>a.Field_Id===(null===e||void 0===e?void 0:e.Field_Id)?(0,d.A)((0,d.A)({},a),{},{isVisible:l.target.checked?1:0}):a))}),(0,g.jsx)("h6",{className:"fa-13 mb-0 fw-bold ",children:null===e||void 0===e?void 0:e.Field_Name})]}),(0,g.jsx)("input",{type:"number",value:Number(null===e||void 0===e?void 0:e.OrderBy)?null===e||void 0===e?void 0:e.OrderBy:"",onChange:l=>A(a=>a.map(a=>a.Field_Id===(null===e||void 0===e?void 0:e.Field_Id)?(0,d.A)((0,d.A)({},a),{},{OrderBy:l.target.value}):a)),label:"Order Value",className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},l))})}),(0,g.jsxs)(v.A,{className:"d-flex justify-content-between",children:[(0,g.jsx)(m.A,{onClick:()=>_(e=>!e),variant:"outlined",startIcon:(0,g.jsx)(x.A,{}),children:"reset"}),(0,g.jsxs)("span",{children:[(0,g.jsx)(m.A,{onClick:()=>C(!1),color:"error",children:"Cancel"}),(0,g.jsx)(m.A,{onClick:()=>{C(!1),(0,j.z)({address:"reports/tallyReports/qpay/columnVisiblity",method:"POST",bodyData:{dataArray:y,CompanyId:l,ReportId:f||1}}).then(e=>{e.success?p.oR.success(e.message):p.oR.error(e.message)}).catch(e=>console.error(e)).finally(()=>{a&&a()})},variant:"outlined",children:"Save"})]})]})]})]})}},74961:(e,l,a)=>{a.d(l,{A:()=>p});var d=a(89379),i=a(65043),n=a(79650),t=a(63336),o=a(71806),r=a(84882),s=a(28076),c=a(39652),u=a(58093),v=a(73460),m=a(31159),x=a(97707),h=a(70579);const p=e=>{let{dataArray:l,columns:a,onClickFun:p}=e;const[j,g]=(0,i.useState)(0),[b,f]=(0,i.useState)(20),[y,A]=(0,i.useState)([]),N=j*b,_=N+b,F=(e=>{if(!y.length)return e;return[...e].sort((e,l)=>{for(const a of y){const{columnId:d,direction:i}=a,n=e[d],t=l[d];if(n!==t)return"asc"===i?n>t?1:-1:n<t?1:-1}return 0})})(l).slice(N,_),C=(e,l)=>{switch(l){case"number":return(0,x.jG)(e);case"date":return(0,x.yc)(e);case"string":return e;default:return""}};return(0,h.jsxs)("div",{children:[(0,h.jsx)(n.A,{component:t.A,sx:{maxHeight:550},children:(0,h.jsxs)(o.A,{stickyHeader:!0,size:"small",children:[(0,h.jsx)(r.A,{children:(0,h.jsx)(s.A,{children:a.map((e,l)=>{var a;return((0,x.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,x.id)(null===e||void 0===e?void 0:e.isVisible,1))&&(0,h.jsx)(c.A,{className:"fa-13 fw-bold border-end border-top",style:{backgroundColor:"#EDF0F7"},sortDirection:!!y.some(l=>l.columnId===e.Field_Name)&&y.find(l=>l.columnId===e.Field_Name).direction,children:(0,h.jsx)(u.A,{active:y.some(l=>l.columnId===e.Field_Name),direction:y.some(l=>l.columnId===e.Field_Name)?y.find(l=>l.columnId===e.Field_Name).direction:"asc",onClick:()=>(e=>{const l=y.find(l=>l.columnId===e);if(l){const a="asc"===l.direction;A(y.map(l=>l.columnId===e?(0,d.A)((0,d.A)({},l),{},{direction:a?"desc":"asc"}):l))}else A([...y,{columnId:e,direction:"asc"}])})(e.Field_Name),children:null===e||void 0===e||null===(a=e.Field_Name)||void 0===a?void 0:a.replace(/_/g," ")})},l)})})}),(0,h.jsx)(v.A,{children:F.map((e,l)=>(0,h.jsx)(s.A,{children:a.map(a=>Object.entries(e).map(d=>{let[i,n]=d;return a.Field_Name===i&&((0,x.id)(null===a||void 0===a?void 0:a.Defult_Display,1)||(0,x.id)(null===a||void 0===a?void 0:a.isVisible,1))&&(0,h.jsx)(c.A,{className:"fa-13 border-end",onClick:()=>p?p(e):console.log("Function not supplied"),children:C(n,null===a||void 0===a?void 0:a.Fied_Data)},a+l)}))},l))})]})}),(0,h.jsx)("div",{className:"p-2",children:(0,h.jsx)(m.A,{component:"div",count:l.length,page:j,onPageChange:(e,l)=>{g(l)},rowsPerPage:b,onRowsPerPageChange:e=>{f(parseInt(e.target.value,10)),g(0)},rowsPerPageOptions:[20,50,100,200,500],labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})}}}]);
//# sourceMappingURL=3450.81bfff6a.chunk.js.map