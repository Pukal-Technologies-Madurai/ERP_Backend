"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[973],{3632:(e,l,a)=>{a.d(l,{A:()=>d});var s=a(59662),t=a(70579);const d=(0,s.A)((0,t.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},10204:(e,l,a)=>{a.d(l,{T:()=>s,X:()=>t});const s=[{id:0,label:"New",color:" bg-info text-white "},{id:1,label:"Verified",color:" bg-warning text-white "},{id:2,label:"Converted",color:" bg-success text-white "},{id:3,label:"Canceled",color:" bg-danger text-white "}],t=[{id:1,label:"New",color:" bg-info text-white "},{id:2,label:"Progess",color:" bg-warning text-white "},{id:3,label:"Completed",color:" bg-success text-white "},{id:4,label:"Canceled",color:" bg-danger text-white "}]},13479:(e,l,a)=>{a.d(l,{A:()=>d});var s=a(59662),t=a(70579);const d=(0,s.A)((0,t.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync")},13899:(e,l,a)=>{a.d(l,{A:()=>b});var s=a(89379),t=a(65043),d=a(83462),r=a(26600),n=a(35316),i=a(29347),o=a(11906),c=a(33438),x=a(47968),h=a(97707),u=a(93141),v=a(65074),m=a(70579);const j=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1){case 0:return(0,h.e3)(e*(l/100));case 1:return(0,h.e3)(e-e*(100/(100+l)));default:return 0}},b=e=>{let{orderDetails:l,orderProducts:a,download:b,actionOpen:g,clearDetails:p,children:N,TitleText:f}=e;const T=JSON.parse(localStorage.getItem("user")),[A,S]=(0,t.useState)(!1),[_,y]=(0,t.useState)({}),[I,C]=(0,t.useState)({}),G=(0,t.useRef)(null),w=(0,h.id)(l.GST_Inclusive,0),V=(0,h.id)(l.GST_Inclusive,1),R=(0,h.id)(l.GST_Inclusive,2),O=(0,h.id)(l.IS_IGST,1);(0,t.useEffect)(()=>{(0,v.z)({address:"masters/company?Company_id=".concat(null===T||void 0===T?void 0:T.Company_id)}).then(e=>{e.success&&C(null!==e&&void 0!==e&&e.data[0]?null===e||void 0===e?void 0:e.data[0]:{})}).catch(e=>console.error(e))},[null===T||void 0===T?void 0:T.Company_id]),(0,t.useEffect)(()=>{g&&S(!0)},[g]),(0,t.useEffect)(()=>{null!==l&&void 0!==l&&l.Retailer_Id&&(0,v.z)({address:"masters/retailers/info?Retailer_Id=".concat(null===l||void 0===l?void 0:l.Retailer_Id)}).then(e=>{e.success&&y(null!==e&&void 0!==e&&e.data[0]?null===e||void 0===e?void 0:e.data[0]:{})}).catch(e=>console.error(e))},[null===l||void 0===l?void 0:l.Retailer_Id]);const D=()=>{S(!1),p&&p()},L=a.filter(e=>(0,h.D)(null===e||void 0===e?void 0:e.Bill_Qty,0)),P=a.reduce((e,l)=>{const a=(0,h.e3)(null===l||void 0===l?void 0:l.Item_Rate),s=parseInt(null===l||void 0===l?void 0:l.Bill_Qty)||0;if(R)return e.TotalValue+=(0,h.JH)(s,a),e;const t=O?null===l||void 0===l?void 0:l.Igst:(0,h.Lr)(null===l||void 0===l?void 0:l.Sgst,null===l||void 0===l?void 0:l.Cgst);if(V){const l=j(1,a,t),d=(0,h.DG)(a,l);e.TotalTax+=(0,h.JH)(s,l),e.TotalValue+=(0,h.JH)(s,d)}if(w){const l=j(0,a,t);e.TotalTax+=(0,h.JH)(s,l),e.TotalValue+=(0,h.JH)(s,a)}return e},{TotalValue:0,TotalTax:0}),B=(0,u.useReactToPrint)({content:()=>G.current}),F=[{labelOne:"Invoice No",dataOne:null===l||void 0===l?void 0:l.So_Id,labelTwo:"Dated",dataTwo:(0,h.yc)(null===l||void 0===l?void 0:l.So_Date)},{labelOne:"Delivery Note",dataOne:"",labelTwo:"Mode/Terms of Payment",dataTwo:""},{labelOne:"Reference No. & Date",dataOne:"",labelTwo:"Other References",dataTwo:""},{labelOne:"Buyer's Order No",dataOne:"",labelTwo:"Dated",dataTwo:""},{labelOne:"Dispatch Doc No",dataOne:"",labelTwo:"Delivery Note Date",dataTwo:""},{labelOne:"Dispatched through",dataOne:"",labelTwo:"Destination",dataTwo:""},{labelOne:"Bill of Lading/LR-RR No",dataOne:"",labelTwo:"Motor Vehicle No",dataTwo:""}],k=null===a||void 0===a?void 0:a.reduce((e,a)=>{const t=e.findIndex(e=>e.hsnCode==a.HSN_Code),{Taxable_Amount:d,Cgst_Amo:r,Sgst_Amo:n,Igst_Amo:i,HSN_Code:o,Cgst:c,Sgst:x,Igst:u}=a;if(-1!==t){const a=e[t],o=(0,s.A)((0,s.A)({},a),{},{taxableValue:a.taxableValue+d,cgst:(0,h.Lr)(a.cgst,r),sgst:(0,h.Lr)(a.sgst,n),igst:(0,h.Lr)(a.igst,i),totalTax:a.totalTax+Number(l.IS_IGST?i:(0,h.Lr)(r,n))});return e[t]=o,e}const v={hsnCode:o,taxableValue:d,cgst:r,cgstPercentage:c,sgst:n,sgstPercentage:x,igst:i,igstPercentage:u,totalTax:l.IS_IGST?Number(i):(0,h.Lr)(r,n)};return[...e,v]},[]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{onClick:()=>{S(!0)},children:N}),(0,m.jsxs)(d.A,{open:A,onClose:D,fullWidth:!0,maxWidth:"lg",children:[(0,m.jsx)(r.A,{children:"Order Preview"}),(0,m.jsxs)(n.A,{ref:G,children:[(0,m.jsx)("h3",{className:"text-center mb-2",children:null!==f&&void 0!==f?f:"Invoice Details"}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-6 p-0 border border-bottom-0 border-end-0",children:[(0,m.jsxs)("div",{className:"border-bottom p-2",children:[(0,m.jsx)("p",{className:"m-0 fa-17",children:null===I||void 0===I?void 0:I.Company_Name}),(0,m.jsxs)("p",{className:"m-0 fa-14",children:["Address: ",null===I||void 0===I?void 0:I.Company_Address]}),(0,m.jsxs)("p",{className:"m-0 fa-14",children:["City: ",null===I||void 0===I?void 0:I.Region," - ",null===I||void 0===I?void 0:I.Pincode]}),(0,m.jsx)("p",{className:"m-0 fa-14",children:null!==I&&void 0!==I&&I.Gst_Number||null!==I&&void 0!==I&&I.VAT_TIN_Number?(0,m.jsxs)(m.Fragment,{children:["GSTIN / UIN:",null!==I&&void 0!==I&&I.Gst_Number?" ".concat(I.Gst_Number):"",null!==I&&void 0!==I&&I.Gst_Number&&null!==I&&void 0!==I&&I.VAT_TIN_Number?" || ":"",null!==I&&void 0!==I&&I.VAT_TIN_Number?" ".concat(I.VAT_TIN_Number):""]}):(0,m.jsx)(m.Fragment,{children:"GSTIN / UIN: Not Available"})}),(0,m.jsxs)("p",{className:"m-0 fa-14",children:["State: ",null===I||void 0===I?void 0:I.State]}),(0,m.jsx)("p",{className:"m-0 fa-14",children:"Code: "})]}),(0,m.jsxs)("div",{className:"p-2",children:[" ",(0,m.jsx)("p",{className:"m-0 fa-12",children:"Buyer (Bill to)"}),(0,m.jsx)("p",{className:"m-0 fa-15",children:null===_||void 0===_?void 0:_.Retailer_Name}),(0,m.jsx)("p",{className:"m-0 fa-14",children:(null===_||void 0===_?void 0:_.Mobile_No)+" - "+(null===_||void 0===_?void 0:_.Reatailer_Address)}),(0,m.jsxs)("p",{className:"m-0 fa-14",children:[null===_||void 0===_?void 0:_.Reatailer_City," - ",null===_||void 0===_?void 0:_.PinCode]}),(0,m.jsxs)("p",{className:"m-0 fa-14",children:["GSTIN / UIN: ",null===_||void 0===_?void 0:_.Gstno]}),(0,m.jsxs)("p",{className:"m-0 fa-14",children:["State Name: ",null===_||void 0===_?void 0:_.StateGet]}),(0,m.jsx)("p",{className:"m-0 fa-14",children:"Code: "})]})]}),(0,m.jsx)("div",{className:"col-6 p-0 border border-bottom-0",children:(0,m.jsx)("table",{className:"table m-0",children:(0,m.jsxs)("tbody",{children:[F.map((e,l)=>(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{className:"border-end fa-12 p-0 px-1",children:[(0,m.jsx)("p",{className:"m-0",children:e.labelOne}),(0,m.jsxs)("p",{className:"m-0",children:["\u2003",e.dataOne]})]}),(0,m.jsxs)("td",{className:"fa-12 p-0 px-1",children:[(0,m.jsx)("p",{className:"m-0",children:e.labelTwo}),(0,m.jsxs)("p",{className:"m-0",children:["\u2003",e.dataTwo]})]})]},l)),(0,m.jsx)("tr",{children:(0,m.jsxs)("td",{colSpan:2,className:"border-0 fa-12 p-0",children:[(0,m.jsx)("p",{className:"m-0",children:"Terms of Delivery"}),(0,m.jsx)("p",{className:"m-0"}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{})]})})]})})})]}),(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col-12 p-0",children:(0,m.jsxs)("table",{className:"table m-0",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border bg-light fa-14",children:"Sno"}),(0,m.jsx)("td",{className:"border bg-light fa-14",children:"Product"}),(0,m.jsx)("td",{className:"border bg-light fa-14",children:"HSN/SAC"}),(0,m.jsx)("td",{className:"border bg-light fa-14 text-end",children:"Quantity"}),(0,m.jsx)("td",{className:"border bg-light fa-14 text-end",children:"Rate"}),(0,m.jsxs)("td",{className:"border bg-light fa-14 text-end",children:[(0,m.jsx)("p",{className:"m-2 ",children:"Rate"}),(0,m.jsxs)("p",{className:"m-0 ",children:[(0,h.id)(l.GST_Inclusive,1)&&"(Incl. of Tax)",(0,h.id)(l.GST_Inclusive,2)&&"(Tax not applicable)",(0,h.id)(l.GST_Inclusive,0)&&"(Excl. of Tax)"]})]}),(0,m.jsx)("td",{className:"border bg-light fa-14 text-end",children:"Amount"})]})}),(0,m.jsxs)("tbody",{children:[L.map((e,a)=>{var s;const t=null!==(s=O?null===e||void 0===e?void 0:e.Igst_P:(null===e||void 0===e?void 0:e.Cgst)+(null===e||void 0===e?void 0:e.Sgst))&&void 0!==s?s:0,d=Number((null===e||void 0===e?void 0:e.Bill_Qty)||0),r=Number((null===e||void 0===e?void 0:e.Item_Rate)||0),n=j(l.GST_Inclusive,r,t);return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border fa-13",children:a+1}),(0,m.jsx)("td",{className:"border fa-13",children:null===e||void 0===e?void 0:e.Product_Name}),(0,m.jsx)("td",{className:"border fa-13",children:null===e||void 0===e?void 0:e.HSN_Code}),(0,m.jsxs)("td",{className:"border fa-13 text-end",children:[(0,h.jG)(d),(null===e||void 0===e?void 0:e.UOM)&&" ("+(null===e||void 0===e?void 0:e.UOM)+") "]}),(0,m.jsxs)("td",{className:"border fa-13 text-end",children:[" ",(0,h.jG)((0,h.id)(l.GST_Inclusive,1)?r-n:r)]}),(0,m.jsxs)("td",{className:"border fa-13 text-end",children:[" ",(0,h.jG)((0,h.id)(l.GST_Inclusive,1)?r:r+n)]}),(0,m.jsxs)("td",{className:"border fa-13 text-end",children:[" ",(0,h.jG)(null===e||void 0===e?void 0:e.Taxable_Amount)]})]},a)}),(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{className:"border p-2",rowSpan:O?4:5,colSpan:4,children:[(0,m.jsx)("p",{className:"m-0",children:"Amount Chargeable (in words):"}),(0,m.jsxs)("p",{className:"m-0",children:["\u2003 INR ",(0,h.GF)(parseInt(null===l||void 0===l?void 0:l.Total_Invoice_value))," Only."]})]}),(0,m.jsx)("td",{className:"border p-2 fa-14",colSpan:2,children:"Total Taxable Amount"}),(0,m.jsx)("td",{className:"border p-2 text-end fa-14",children:(0,h.jG)(P.TotalValue)})]}),O?(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border p-2 fa-14",colSpan:2,children:"IGST"}),(0,m.jsx)("td",{className:"border p-2 fa-14 text-end",children:(0,h.jG)(l.IGST_Total)})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border p-2 fa-14",colSpan:2,children:"CGST"}),(0,m.jsx)("td",{className:"border p-2 text-end fa-14",children:(0,h.jG)(null===l||void 0===l?void 0:l.CSGT_Total)})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border p-2 fa-14",colSpan:2,children:"SGST"}),(0,m.jsx)("td",{className:"border p-2 fa-14 text-end",children:(0,h.jG)(null===l||void 0===l?void 0:l.SGST_Total)})]})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border p-2 fa-14",colSpan:2,children:"Round Off"}),(0,m.jsx)("td",{className:"border p-2 fa-14 text-end",children:(0,h.jG)(null===l||void 0===l?void 0:l.Round_off)})]}),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border p-2 fa-14",colSpan:2,children:"Total"}),(0,m.jsx)("td",{className:"border p-2 fa-14 text-end fw-bold",children:(0,h.jG)(null===l||void 0===l?void 0:l.Total_Invoice_value)})]})]})]})})}),(0,m.jsxs)("table",{className:"table",children:[(0,m.jsxs)("thead",{children:[(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border bg-light fa-14 text-center",rowSpan:2,style:{verticalAlign:"middle"},children:"HSN / SAC"}),(0,m.jsx)("td",{className:"border bg-light fa-14 text-center",rowSpan:2,style:{verticalAlign:"middle"},children:"Taxable Value"}),(0,h.id)(l.IS_IGST,1)?(0,m.jsx)("td",{className:"border bg-light fa-14 text-center",colSpan:2,children:"IGST Tax"}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("td",{className:"border bg-light fa-14 text-center",colSpan:2,children:"Central Tax"}),(0,m.jsx)("td",{className:"border bg-light fa-14 text-center",colSpan:2,children:"State Tax"})]}),(0,m.jsx)("td",{className:"border bg-light fa-14 text-center",children:"Total"})]}),(0,m.jsxs)("tr",{children:[(0,h.id)(l.IS_IGST,1)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("td",{className:"border bg-light fa-14 text-center",children:"Rate"}),(0,m.jsx)("td",{className:"border bg-light fa-14 text-center",children:"Amount"})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("td",{className:"border bg-light fa-14 text-center",children:"Rate"}),(0,m.jsx)("td",{className:"border bg-light fa-14 text-center",children:"Amount"}),(0,m.jsx)("td",{className:"border bg-light fa-14 text-center",children:"Rate"}),(0,m.jsx)("td",{className:"border bg-light fa-14 text-center",children:"Amount"})]}),(0,m.jsx)("td",{className:"border bg-light fa-14 text-center",children:"Tax Amount"})]})]}),(0,m.jsxs)("tbody",{children:[k.map((e,a)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border fa-13 text-end",children:null===e||void 0===e?void 0:e.hsnCode}),(0,m.jsx)("td",{className:"border fa-13 text-end",children:(0,h.jG)(null===e||void 0===e?void 0:e.taxableValue)}),l.IS_IGST?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("td",{className:"border fa-13 text-end",children:(0,h.jG)(null===e||void 0===e?void 0:e.igstPercentage)}),(0,m.jsx)("td",{className:"border fa-13 text-end",children:(0,h.jG)(null===e||void 0===e?void 0:e.igst)})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("td",{className:"border fa-13 text-end",children:(0,h.jG)(null===e||void 0===e?void 0:e.cgstPercentage)}),(0,m.jsx)("td",{className:"border fa-13 text-end",children:(0,h.jG)(null===e||void 0===e?void 0:e.cgst)}),(0,m.jsx)("td",{className:"border fa-13 text-end",children:(0,h.jG)(null===e||void 0===e?void 0:e.sgstPercentage)}),(0,m.jsx)("td",{className:"border fa-13 text-end",children:(0,h.jG)(null===e||void 0===e?void 0:e.sgst)})]}),(0,m.jsx)("td",{className:"border fa-13 text-end",children:(0,h.jG)(null===e||void 0===e?void 0:e.totalTax)})]},a)),(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border fa-13 text-end",children:"Total"}),(0,m.jsx)("td",{className:"border fa-13 text-end fw-bold",children:(0,h.jG)(k.reduce((e,l)=>e+Number(l.taxableValue),0))}),l.IS_IGST?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("td",{className:"border fa-13 text-end"}),(0,m.jsx)("td",{className:"border fa-13 text-end fw-bold",children:(0,h.jG)(k.reduce((e,l)=>e+Number(l.igst),0))})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("td",{className:"border fa-13 text-end"}),(0,m.jsx)("td",{className:"border fa-13 text-end fw-bold",children:(0,h.jG)(k.reduce((e,l)=>e+Number(l.cgst),0))}),(0,m.jsx)("td",{className:"border fa-13 text-end"}),(0,m.jsx)("td",{className:"border fa-13 text-end fw-bold",children:(0,h.jG)(k.reduce((e,l)=>e+Number(l.sgst),0))})]}),(0,m.jsx)("td",{className:"border fa-13 text-end fw-bold",children:(0,h.jG)(k.reduce((e,l)=>e+Number(l.totalTax),0))})]}),(0,m.jsx)("tr",{children:(0,m.jsxs)("td",{colSpan:(0,h.id)(l.IS_IGST,1)?5:7,className:"border fa-13 fw-bold",children:["Tax Amount (in words) : INR \xa0",(0,h.GF)(parseInt(k.reduce((e,l)=>e+Number(l.totalTax),0)))," only."]})})]})]}),(0,m.jsx)("div",{className:"col-12 text-center",children:(0,m.jsx)("p",{children:"This is a Computer Generated Invoice"})})]}),(0,m.jsxs)(i.A,{children:[(0,m.jsx)(o.A,{startIcon:(0,m.jsx)(c.A,{}),variant:"outlined",color:"error",onClick:D,children:"Close"}),b&&(0,m.jsx)(o.A,{startIcon:(0,m.jsx)(x.A,{}),variant:"outlined",onClick:B,children:"Download"})]})]})]})}},33438:(e,l,a)=>{a.d(l,{A:()=>d});var s=a(59662),t=a(70579);const d=(0,s.A)((0,t.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},70141:(e,l,a)=>{a.d(l,{A:()=>d});var s=a(59662),t=a(70579);const d=(0,s.A)((0,t.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},80973:(e,l,a)=>{a.r(l),a.d(l,{default:()=>O});var s=a(89379),t=a(65043),d=a(11906),r=a(77739),n=a(17392),i=a(83462),o=a(26600),c=a(35316),x=a(29347),h=a(20656),u=a(63406),v=a(97707),m=a(13899),j=a(70141),b=a(83560),g=a(59383),p=a(79484),N=a(13479),f=a(3632),T=a(10204),A=a(65074),S=a(48471),_=a(73216),y=a(91036),I=a(90001),C=a(33438),G=a(30513),w=a(22240),V=a(70579);const R={Fromdate:(0,v.ny)(),Todate:(0,v.ny)(),Retailer:{value:"",label:"ALL"},CreatedBy:{value:"",label:"ALL"},SalesPerson:{value:"",label:"ALL"},VoucherType:{value:"",label:"ALL"},Cancel_status:""},O=e=>{let{loadingOn:l,loadingOff:a,AddRights:O,EditRights:D,pageID:L}=e;const P=sessionStorage.getItem("filterValues"),B=(0,_.Zp)(),[F,k]=(0,t.useState)([]),[M,z]=(0,t.useState)({voucherType:[],retailers:[],createdBy:[]}),[E,H]=(0,t.useState)({}),[W,Q]=(0,t.useState)(!1),[U,J]=(0,t.useState)(R),[$,X]=(0,t.useState)({filters:!1,orderDetails:!1,printInvoice:!1,deliverySlip:!1}),[Z,q]=(0,t.useState)(null);(0,t.useEffect)(()=>{const e=(0,v.vU)(L),{Fromdate:l,Todate:a,Retailer:t=R.Retailer,CreatedBy:d=R.CreatedBy,SalesPerson:r=R.SalesPerson,VoucherType:n=R.VoucherType,Cancel_status:i=R.Cancel_status}=e;J(e=>(0,s.A)((0,s.A)({},e),{},{Fromdate:l,Todate:a,Retailer:t,CreatedBy:d,SalesPerson:r,VoucherType:n,Cancel_status:i}))},[P,L]),(0,t.useEffect)(()=>{const e=(0,v.vU)(L),{Fromdate:s,Todate:t,Retailer:d=R.Retailer.value,CreatedBy:r=R.CreatedBy.value,VoucherType:n=R.VoucherType.value,Cancel_status:i=R.Cancel_status}=e;(0,A.z)({address:"sales/salesInvoice?\n            Fromdate=".concat(s,"&\n            Todate=").concat(t,"&\n            Retailer_Id=").concat(null===d||void 0===d?void 0:d.value,"&\n            Created_by=").concat(null===r||void 0===r?void 0:r.value,"&\n            VoucherType=").concat(null===n||void 0===n?void 0:n.value,"&\n            Cancel_status=").concat(i),loadingOn:l,loadingOff:a}).then(e=>{e.success&&k(null===e||void 0===e?void 0:e.data)}).catch(e=>console.error(e))},[P,L,W]),(0,t.useEffect)(()=>{(0,A.z)({address:"sales/salesInvoice/filterValues"}).then(e=>{var l,a,s;e.success&&z({voucherType:(0,v.$r)(null===e||void 0===e||null===(l=e.others)||void 0===l?void 0:l.voucherType),retailers:(0,v.$r)(null===e||void 0===e||null===(a=e.others)||void 0===a?void 0:a.retailers),createdBy:(0,v.$r)(null===e||void 0===e||null===(s=e.others)||void 0===s?void 0:s.createdBy)})}).catch(e=>console.error(e))},[]);const K=()=>{X((0,s.A)((0,s.A)({},$),{},{filters:!1,orderDetails:!1}))},Y=(0,t.useMemo)(()=>F.reduce((e,l)=>{const a=(0,v.Lr)(e.totalInvoiceValue,l.Total_Invoice_value),s=(0,v.$r)(l.Products_List).reduce((e,l)=>({tonnageValue:(0,v.Lr)(e.tonnageValue,null===l||void 0===l?void 0:l.Total_Qty),bagsValue:(0,v.Lr)(e.bagsValue,l.Alt_Bill_Qty)}),{tonnageValue:0,bagsValue:0});return{totalTonnage:(0,v.Lr)(e.totalTonnage,s.tonnageValue),totalBags:(0,v.Lr)(e.totalBags,s.bagsValue),totalInvoiceValue:a}},{totalTonnage:0,totalBags:0,totalInvoiceValue:0}),[F]);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(S.Ay,{title:"Sales Invoice",dataArray:F,EnableSerialNumber:!0,columns:[(0,S.Lj)("Do_Date","date","Date"),(0,S.Lj)("Do_Inv_No","string","ID"),(0,S.Lj)("Retailer_Name","string","Customer"),(0,S.Lj)("VoucherTypeGet","string","Voucher"),(0,S.Lj)("Total_Before_Tax","number","Before Tax"),(0,S.Lj)("Total_Tax","number","Tax"),(0,S.Lj)("Total_Invoice_value","number","Invoice Value"),{ColumnHeader:"Status",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{var l,a;let{row:s}=e;const t=T.X.find(e=>e.id===Number(null===s||void 0===s?void 0:s.Cancel_status));return(0,V.jsx)("span",{className:null!==(l="py-0 fw-bold px-2 rounded-4 fa-12 "+(null===t||void 0===t?void 0:t.color))&&void 0!==l?l:"bg-secondary text-white",children:null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:""})}},{Field_Name:"Action",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,V.jsx)(S.wF,{buttonsData:[{name:"View Order",onclick:()=>{H({orderDetails:l,orderProducts:null!==l&&void 0!==l&&l.Products_List?null===l||void 0===l?void 0:l.Products_List:[]})},icon:(0,V.jsx)(f.A,{fontSize:"small",color:"primary"})},{name:"Print Invoice",onclick:()=>{q(l),X(e=>(0,s.A)((0,s.A)({},e),{},{printInvoice:!0}))},icon:(0,V.jsx)(G.A,{fontSize:"small",color:"primary"})},{name:"Edit",onclick:()=>{B("create",{state:(0,s.A)((0,s.A)({},l),{},{isEdit:!0})})},icon:(0,V.jsx)(b.A,{fontSize:"small",color:"primary"}),disabled:!D},{name:"Delivery Slip",onclick:()=>{q(l),X(e=>(0,s.A)((0,s.A)({},e),{},{deliverySlip:!0}))},icon:(0,V.jsx)(G.A,{fontSize:"small",color:"primary"})}]})}}],ButtonArea:(0,V.jsxs)(V.Fragment,{children:[O&&(0,V.jsx)(d.A,{variant:"outlined",startIcon:(0,V.jsx)(j.A,{}),onClick:()=>B("create"),children:"NEW"}),O&&(0,V.jsx)(r.A,{title:"Sync tally data",children:(0,V.jsx)(d.A,{className:"mx-1",variant:"outlined",onClick:()=>{(0,A.z)({address:"sales/salesInvoice/tallySync",loadingOn:l,loadingOff:a}).then(e=>{y.oR.success(e.message),Q(e=>!e)}).catch(e=>console.error(e))},startIcon:(0,V.jsx)(N.A,{color:"primary"}),children:"Sync Tally"})}),(0,V.jsx)(r.A,{title:"Filters",children:(0,V.jsx)(n.A,{size:"small",onClick:()=>X((0,s.A)((0,s.A)({},$),{},{filters:!0})),children:(0,V.jsx)(g.A,{})})}),F.length>0&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("span",{children:[" Qty: ",(0,v.jG)(Y.totalTonnage)," "]}),(0,V.jsxs)("span",{children:[" Bag: ",(0,v.jG)(Y.totalBags)," \xa0 "]}),(0,V.jsxs)("span",{children:[" Worth: ",(0,v.jG)(Y.totalInvoiceValue)," \xa0 "]})]})]}),isExpendable:!0,tableMaxHeight:550,expandableComp:e=>{let{row:l}=e;return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)("table",{className:"table",children:(0,V.jsxs)("tbody",{children:[(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"border p-2 bg-light",children:"Branch"}),(0,V.jsx)("td",{className:"border p-2",children:l.Branch_Name}),(0,V.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,V.jsx)("td",{className:"border p-2",children:l.Sales_Person_Name}),(0,V.jsx)("td",{className:"border p-2 bg-light",children:"Round off"}),(0,V.jsx)("td",{className:"border p-2",children:l.Round_off})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"border p-2 bg-light",children:"Invoice Type"}),(0,V.jsxs)("td",{className:"border p-2",children:[(0,v.id)(l.GST_Inclusive,1)&&"Inclusive",(0,v.id)(l.GST_Inclusive,0)&&"Exclusive"]}),(0,V.jsx)("td",{className:"border p-2 bg-light",children:"Tax Type"}),(0,V.jsxs)("td",{className:"border p-2",children:[(0,v.id)(l.IS_IGST,1)&&"IGST",(0,v.id)(l.IS_IGST,0)&&"GST"]}),(0,V.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,V.jsx)("td",{className:"border p-2",children:l.Sales_Person_Name})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"border p-2 bg-light",children:"Narration"}),(0,V.jsx)("td",{className:"border p-2",colSpan:5,children:l.Narration})]})]})})})}}),Object.keys(E).length>0&&(0,V.jsx)(m.A,{orderDetails:null===E||void 0===E?void 0:E.orderDetails,orderProducts:null===E||void 0===E?void 0:E.orderProducts,download:!0,actionOpen:!0,clearDetails:()=>H({}),TitleText:"Sale Order"}),(0,V.jsxs)(i.A,{open:$.filters,onClose:K,fullWidth:!0,maxWidth:"sm",children:[(0,V.jsx)(o.A,{children:"Filters"}),(0,V.jsx)(c.A,{children:(0,V.jsx)("div",{className:"table-responsive pb-4",children:(0,V.jsx)("table",{className:"table",children:(0,V.jsxs)("tbody",{children:[(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,V.jsx)("td",{children:(0,V.jsx)("input",{type:"date",value:U.Fromdate,onChange:e=>J((0,s.A)((0,s.A)({},U),{},{Fromdate:e.target.value})),className:"cus-inpt"})})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,V.jsx)("td",{children:(0,V.jsx)("input",{type:"date",value:U.Todate,onChange:e=>J((0,s.A)((0,s.A)({},U),{},{Todate:e.target.value})),className:"cus-inpt"})})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{style:{verticalAlign:"middle"},children:"Retailer"}),(0,V.jsx)("td",{children:(0,V.jsx)(h.Ay,{value:null===U||void 0===U?void 0:U.Retailer,onChange:e=>J((0,s.A)((0,s.A)({},U),{},{Retailer:e})),options:[{value:"",label:"ALL"},...M.retailers],styles:u.MR,isSearchable:!0,placeholder:"Retailer Name",menuPortalTarget:document.body,filterOption:v.GI})})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{style:{verticalAlign:"middle"},children:"Voucher "}),(0,V.jsx)("td",{children:(0,V.jsx)(h.Ay,{value:null===U||void 0===U?void 0:U.VoucherType,onChange:e=>J((0,s.A)((0,s.A)({},U),{},{VoucherType:e})),options:[{value:"",label:"ALL"},...M.voucherType],styles:u.MR,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Voucher Name",filterOption:v.GI})})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{style:{verticalAlign:"middle"},children:"Canceled Order"}),(0,V.jsx)("td",{children:(0,V.jsxs)("select",{type:"date",value:U.Cancel_status,onChange:e=>J((0,s.A)((0,s.A)({},U),{},{Cancel_status:e.target.value})),className:"cus-inpt",children:[(0,V.jsx)("option",{value:"",children:"All"}),T.X.map((e,l)=>(0,V.jsx)("option",{value:e.id,children:e.label},l))]})})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{style:{verticalAlign:"middle"},children:"Created By"}),(0,V.jsx)("td",{children:(0,V.jsx)(h.Ay,{value:null===U||void 0===U?void 0:U.CreatedBy,onChange:e=>J(l=>(0,s.A)((0,s.A)({},l),{},{CreatedBy:e})),options:[{value:"",label:"ALL"},...M.createdBy],styles:u.MR,isSearchable:!0,placeholder:"Sales Person Name",menuPortalTarget:document.body,filterOption:v.GI})})]})]})})})}),(0,V.jsxs)(x.A,{children:[(0,V.jsx)(d.A,{onClick:K,children:"close"}),(0,V.jsx)(d.A,{onClick:()=>{K(),(0,v.Mb)({Fromdate:null===U||void 0===U?void 0:U.Fromdate,Todate:U.Todate,pageID:L,Retailer:U.Retailer,CreatedBy:U.CreatedBy,VoucherType:U.VoucherType,Cancel_status:U.Cancel_status})},startIcon:(0,V.jsx)(p.A,{}),variant:"outlined",children:"Search"})]})]}),(0,V.jsxs)(i.A,{open:$.printInvoice,onClose:()=>{X(e=>(0,s.A)((0,s.A)({},e),{},{printInvoice:!1})),q(null)},maxWidth:"lg",fullWidth:!0,scroll:"paper",children:[(0,V.jsxs)(o.A,{children:["Print Invoice #",null===Z||void 0===Z?void 0:Z.Do_Inv_No,(0,V.jsx)(n.A,{onClick:()=>{X(e=>(0,s.A)((0,s.A)({},e),{},{printInvoice:!1})),q(null)},style:{position:"absolute",right:8,top:8},children:(0,V.jsx)(C.A,{})})]}),(0,V.jsx)(c.A,{children:(null===Z||void 0===Z?void 0:Z.Do_Id)&&(0,V.jsx)(I.A,{Do_Id:Z.Do_Id,loadingOn:l,loadingOff:a})}),(0,V.jsx)(x.A,{children:(0,V.jsx)(d.A,{onClick:()=>{X(e=>(0,s.A)((0,s.A)({},e),{},{printInvoice:!1})),q(null)},children:"Close"})})]}),(0,V.jsxs)(i.A,{open:$.deliverySlip,onClose:()=>{X(e=>(0,s.A)((0,s.A)({},e),{},{deliverySlip:!1})),q(null)},maxWidth:"lg",fullWidth:!0,scroll:"paper",children:[(0,V.jsxs)(o.A,{children:["Print Delivery Slip #",null===Z||void 0===Z?void 0:Z.Do_Inv_No,(0,V.jsx)(n.A,{onClick:()=>{X(e=>(0,s.A)((0,s.A)({},e),{},{deliverySlip:!1})),q(null)},style:{position:"absolute",right:8,top:8},children:(0,V.jsx)(C.A,{})})]}),(0,V.jsx)(c.A,{children:(null===Z||void 0===Z?void 0:Z.Do_Id)&&(0,V.jsx)(w.A,{Do_Id:Z.Do_Id,loadingOn:l,loadingOff:a})}),(0,V.jsx)(x.A,{children:(0,V.jsx)(d.A,{onClick:()=>{X(e=>(0,s.A)((0,s.A)({},e),{},{deliverySlip:!1})),q(null)},children:"Close"})})]})]})}},83560:(e,l,a)=>{a.d(l,{A:()=>d});var s=a(59662),t=a(70579);const d=(0,s.A)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=973.a45b6d7a.chunk.js.map