"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7486],{5793:(e,t,n)=>{n.d(t,{A:()=>a});var l=n(59662),o=n(70579);const a=(0,l.A)((0,o.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckBox")},12249:(e,t,n)=>{n.d(t,{A:()=>a});var l=n(59662),o=n(70579);const a=(0,l.A)((0,o.jsx)("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"CheckBoxOutlineBlank")},15626:(e,t,n)=>{n.d(t,{A:()=>a});var l=n(59662),o=n(70579);const a=(0,l.A)((0,o.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")},33064:(e,t,n)=>{n.d(t,{A:()=>y});var l=n(98587),o=n(58168),a=n(65043),s=n(58387),i=n(68606),r=n(6803),d=n(34535),c=n(61475),u=n(54516),m=n(85213),p=n(75429),h=n(57056),v=n(32400);function g(e){return(0,v.Ay)("PrivateSwitchBase",e)}(0,h.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var f=n(70579);const x=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],A=(0,d.Ay)(p.A)(e=>{let{ownerState:t}=e;return(0,o.A)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})}),j=(0,d.Ay)("input",{shouldForwardProp:c.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),y=a.forwardRef(function(e,t){const{autoFocus:n,checked:a,checkedIcon:d,className:c,defaultChecked:p,disabled:h,disableFocusRipple:v=!1,edge:y=!1,icon:C,id:I,inputProps:b,inputRef:_,name:D,onBlur:N,onChange:S,onFocus:k,readOnly:O,required:T=!1,tabIndex:w,type:z,value:R}=e,F=(0,l.A)(e,x),[E,P]=(0,u.A)({controlled:a,default:Boolean(p),name:"SwitchBase",state:"checked"}),L=(0,m.A)();let M=h;L&&"undefined"===typeof M&&(M=L.disabled);const B="checkbox"===z||"radio"===z,V=(0,o.A)({},e,{checked:E,disabled:M,disableFocusRipple:v,edge:y}),H=(e=>{const{classes:t,checked:n,disabled:l,edge:o}=e,a={root:["root",n&&"checked",l&&"disabled",o&&"edge".concat((0,r.A)(o))],input:["input"]};return(0,i.A)(a,g,t)})(V);return(0,f.jsxs)(A,(0,o.A)({component:"span",className:(0,s.A)(H.root,c),centerRipple:!0,focusRipple:!v,disabled:M,tabIndex:null,role:void 0,onFocus:e=>{k&&k(e),L&&L.onFocus&&L.onFocus(e)},onBlur:e=>{N&&N(e),L&&L.onBlur&&L.onBlur(e)},ownerState:V,ref:t},F,{children:[(0,f.jsx)(j,(0,o.A)({autoFocus:n,checked:a,defaultChecked:p,className:H.input,disabled:M,id:B?I:void 0,name:D,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;P(t),S&&S(e,t)},readOnly:O,ref:_,required:T,ownerState:V,tabIndex:w,type:z},"checkbox"===z&&void 0===R?{}:{value:R},b)),E?d:C]}))})},51962:(e,t,n)=>{n.d(t,{A:()=>S});var l=n(98587),o=n(58168),a=n(65043),s=n(58387),i=n(68606),r=n(67266),d=n(33064),c=n(59662),u=n(70579);const m=(0,c.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=(0,c.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,c.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var v=n(6803),g=n(6431),f=n(34535),x=n(61475),A=n(57056),j=n(32400);function y(e){return(0,j.Ay)("MuiCheckbox",e)}const C=(0,A.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),I=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],b=(0,f.Ay)(d.A,{shouldForwardProp:e=>(0,x.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t["size".concat((0,v.A)(n.size))],"default"!==n.color&&t["color".concat((0,v.A)(n.color))]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,o.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,r.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(C.checked,", &.").concat(C.indeterminate)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(C.disabled)]:{color:(t.vars||t).palette.action.disabled}})}),_=(0,u.jsx)(p,{}),D=(0,u.jsx)(m,{}),N=(0,u.jsx)(h,{}),S=a.forwardRef(function(e,t){var n,r;const d=(0,g.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:c=_,color:m="primary",icon:p=D,indeterminate:h=!1,indeterminateIcon:f=N,inputProps:x,size:A="medium",className:j}=d,C=(0,l.A)(d,I),S=h?f:p,k=h?f:c,O=(0,o.A)({},d,{color:m,indeterminate:h,size:A}),T=(e=>{const{classes:t,indeterminate:n,color:l,size:a}=e,s={root:["root",n&&"indeterminate","color".concat((0,v.A)(l)),"size".concat((0,v.A)(a))]},r=(0,i.A)(s,y,t);return(0,o.A)({},t,r)})(O);return(0,u.jsx)(b,(0,o.A)({type:"checkbox",inputProps:(0,o.A)({"data-indeterminate":h},x),icon:a.cloneElement(S,{fontSize:null!=(n=S.props.fontSize)?n:A}),checkedIcon:a.cloneElement(k,{fontSize:null!=(r=k.props.fontSize)?r:A}),ownerState:O,ref:t,className:(0,s.A)(T.root,j)},C,{classes:T}))})},87486:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var l=n(89379),o=n(65043),a=n(97707),s=n(65074),i=n(48471),r=n(12412),d=n(51962),c=n(67784),u=n(17392),m=n(83462),p=n(26600),h=n(35316),v=n(29347),g=n(11906),f=n(20656),x=n(63406),A=n(12249),j=n(5793),y=n(15626),C=n(30513),I=n(59383),b=n(79484),_=n(91036),D=n(93141),N=n(70579);const S=(e,t)=>{if(!Array.isArray(e))return"";const n=e.find(e=>String((null===e||void 0===e?void 0:e.empType)||"").toLowerCase()===String(t).toLowerCase());return(null===n||void 0===n?void 0:n.empName)||""},k=e=>{let{Do_Id:t,Do_Ids:n=[],loadingOn:l,loadingOff:i,isCombinedPrint:r=!1}=e;const[d,c]=(0,o.useState)([]),u=(0,o.useRef)(null),m=Array.isArray(n)&&n.length>0?n:t?[t]:[];(0,o.useEffect)(()=>{if(0===m.length)return;null===l||void 0===l||l();(async()=>{try{const e=m.map(e=>(0,s.z)({address:"sales/salesInvoice/printOuts/katchath?Do_Id=".concat(e),loadingOn:()=>{},loadingOff:()=>{}})),t=(await Promise.all(e)).filter(e=>{var t;return e.success&&(null===(t=e.data)||void 0===t?void 0:t[0])}).map(e=>e.data[0]);c(t)}catch(e){console.error("Error fetching katchath data:",e)}finally{null===i||void 0===i||i()}})()},[JSON.stringify(m)]);const p=(0,D.useReactToPrint)({content:()=>u.current});return r?(0,N.jsx)("div",{ref:u,className:"katchath-combined-print",children:d.map((e,t)=>(0,N.jsxs)("div",{className:"katchath-page",children:[(0,N.jsxs)("div",{style:{width:"calc(15cm)",height:"calc(10.5cm)",marginBottom:t<d.length-1?"20px":"0"},className:"border py-1 px-2",children:[(0,N.jsxs)("div",{className:"row",children:[(0,N.jsxs)("div",{className:"col-5 p-2",children:[(0,N.jsx)("h5",{className:"m-0",children:e.voucherTypeGet}),(0,N.jsx)("p",{className:"m-0",children:e.createdByGet}),(0,N.jsx)("p",{className:"m-0",children:(0,a.z5)(e.createdOn)}),(0,N.jsx)("br",{}),(0,N.jsx)("p",{className:"m-0",children:e.mailingName?"".concat(e.mailingName,","):" "}),(0,N.jsx)("p",{className:"m-0",children:e.mailingAddress?"".concat(e.mailingAddress,","):" "}),(0,N.jsx)("p",{className:"m-0",children:e.mailingCity?"".concat(e.mailingCity,","):" "}),(0,N.jsx)("p",{className:"m-0",children:e.mailingNumber?e.mailingNumber:" "})]}),(0,N.jsx)("div",{className:"col-7 p-2",children:(0,N.jsx)("div",{className:"table-responsive",children:(0,N.jsx)("table",{className:"table table-borderless",children:(0,N.jsxs)("tbody",{children:[(0,a.$r)(e.productDetails).map((e,t)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:e.itemName}),(0,N.jsx)("td",{children:e.quantity})]},t)),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border",children:"Total"}),(0,N.jsx)("td",{className:"border",children:(0,a.$r)(e.productDetails).reduce((e,t)=>e+t.quantity,0)})]})]})})})})]}),(0,N.jsx)("br",{}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("p",{className:"m-0",children:["Lorry: ",S(e.staffDetails,"Transport")]}),(0,N.jsxs)("p",{className:"m-0",children:["LoadMan: ",S(e.staffDetails,"Load Man")]})]})]}),t<d.length-1&&(0,N.jsx)("div",{className:"page-break",style:{pageBreakAfter:"always",breakAfter:"page"}})]},e.Do_Id||t))}):(0,N.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-center",children:[(0,N.jsx)("div",{className:"print-button-area",children:(0,N.jsx)(g.A,{onClick:p,startIcon:(0,N.jsx)(C.A,{}),children:"Print"})}),(0,N.jsx)("div",{ref:u,className:"katchath-multiple-print",children:d.map((e,t)=>(0,N.jsxs)("div",{className:"mb-4",children:[(0,N.jsxs)("div",{style:{width:"calc(15cm)",height:"calc(10.5cm)",transform:"scale(1.1)",position:"relative",boxSizing:"border-box"},className:"border py-4 px-4",children:[(0,N.jsxs)("div",{className:"row",children:[(0,N.jsxs)("div",{className:"col-5 p-2",children:[(0,N.jsx)("h5",{className:"m-0",children:e.voucherTypeGet}),(0,N.jsx)("p",{className:"m-0",children:e.createdByGet}),(0,N.jsx)("p",{className:"m-0",children:(0,a.z5)(e.createdOn)}),(0,N.jsx)("br",{}),(0,N.jsx)("p",{className:"m-0",children:e.mailingName?"".concat(e.mailingName,","):" "}),(0,N.jsx)("p",{className:"m-0",children:e.mailingAddress?"".concat(e.mailingAddress,","):" "}),(0,N.jsx)("p",{className:"m-0",children:e.mailingCity?"".concat(e.mailingCity,","):" "}),(0,N.jsx)("p",{className:"m-0",children:e.mailingNumber?e.mailingNumber:" "})]}),(0,N.jsx)("div",{className:"col-7 p-2",children:(0,N.jsx)("div",{className:"table-responsive",children:(0,N.jsx)("table",{className:"table table-borderless",children:(0,N.jsxs)("tbody",{children:[(0,a.$r)(e.productDetails).map((e,t)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:e.itemName}),(0,N.jsx)("td",{children:e.quantity})]},t)),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border",children:"Total"}),(0,N.jsx)("td",{className:"border",children:(0,a.$r)(e.productDetails).reduce((e,t)=>e+t.quantity,0)})]})]})})})})]}),(0,N.jsx)("br",{}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("p",{className:"m-0",children:["Lorry: ",S(e.staffDetails,"Transport")]}),(0,N.jsxs)("p",{className:"m-0",children:["LoadMan: ",S(e.staffDetails,"Load Man")]})]})]}),t<d.length-1&&(0,N.jsx)("hr",{className:"my-4"})]},e.Do_Id||t))})]})};var O=n(90001),T=n(22240);const w=(0,N.jsx)(A.A,{fontSize:"small"}),z=(0,N.jsx)(j.A,{fontSize:"small"}),R={CostCategory:{label:"",value:""},Do_Id:[],involvedStaffs:[]},F=e=>String(null!==e&&void 0!==e?e:"").toLowerCase().trim(),E=(e,t)=>(0,a.$r)(null===e||void 0===e?void 0:e.involvedStaffs).filter(e=>(0,a.id)(e.Emp_Type_Id,t)).map(e=>{var t;return String(null!==(t=e.Emp_Name)&&void 0!==t?t:"").trim()}).filter(Boolean),P=e=>{var t,n;let{loadingOn:A,loadingOff:j,AddRights:S,EditRights:P,PrintRights:L,pageID:M}=e;const[B,V]=(0,o.useState)([]),[H,W]=(0,o.useState)([]),[q,G]=(0,o.useState)([]),[$,U]=(0,o.useState)([]),[K,Y]=(0,o.useState)(R),[J,Q]=(0,o.useState)(!1),[X,Z]=(0,o.useState)({}),[ee,te]=(0,o.useState)([]),[ne,le]=(0,o.useState)({Do_Id:null,Do_Date:null,open:!1}),[oe,ae]=(0,o.useState)({Do_Id:null,open:!1}),[se,ie]=(0,o.useState)({Do_Id:null,Do_Date:null,open:!1}),[re,de]=(0,o.useState)({reqDate:(0,a.ny)(),assignDialog:!1,filterDialog:!1,selectedInvoice:null,multipleStaffUpdateDialog:!1,fetchTrigger:0,docType:"",staffStatus:0}),[ce,ue]=(0,o.useState)({open:!1,doIds:[],docType:""}),me=(0,o.useRef)(null),pe=(0,o.useMemo)(()=>[{Field_Name:"Do_Inv_No",Fied_Data:"string",ColumnHeader:"Invoice"},{Field_Name:"voucherTypeGet",Fied_Data:"string",ColumnHeader:"Voucher"},{Field_Name:"retailerNameGet",Fied_Data:"string",ColumnHeader:"Customer"}],[]);(0,o.useEffect)(()=>{if(ce.open){const e=setTimeout(()=>{me.current&&Q(!0)},300);return()=>clearTimeout(e)}Q(!1)},[ce.open,ce.doIds,ce.docType]),(0,o.useEffect)(()=>{(0,s.z)({address:"sales/salesInvoice/lrReport?reqDate=".concat(re.reqDate,"&staffStatus=").concat(re.staffStatus),loadingOn:A,loadingOff:j}).then(e=>{var t,n;V((0,a.$r)(e.data)),G((0,a.$r)(null===e||void 0===e||null===(t=e.others)||void 0===t?void 0:t.costTypes)),U((0,a.$r)(null===e||void 0===e||null===(n=e.others)||void 0===n?void 0:n.uniqeInvolvedStaffs))}).catch(console.error)},[re.fetchTrigger,re.staffStatus]),(0,o.useEffect)(()=>{(0,s.z)({address:"masters/erpCostCenter/dropDown"}).then(e=>W((0,a.$r)(e.data))).catch(console.error)},[]);const he=(0,o.useMemo)(()=>q.filter(e=>$.includes((0,a.Ro)(e.Cost_Category_Id))).map(e=>({Field_Name:"costType_".concat((0,a.Ro)(e.Cost_Category_Id)),Fied_Data:"string",isVisible:1,ColumnHeader:e.Cost_Category,isCustomCell:!0,getFilterValues:t=>E(t,e.Cost_Category_Id),Cell:t=>{let{row:n}=t;const l=E(n,e.Cost_Category_Id).join(", ");return(0,N.jsx)("span",{children:l||"-"})}})),[q,$]),ve=(0,o.useMemo)(()=>[...pe,...he],[pe,he]),ge=()=>de(e=>(0,l.A)((0,l.A)({},e),{},{fetchTrigger:e.fetchTrigger+1})),fe=()=>de(e=>(0,l.A)((0,l.A)({},e),{},{assignDialog:!1,selectedInvoice:null})),xe=()=>de(e=>(0,l.A)((0,l.A)({},e),{},{filterDialog:!1})),Ae=()=>{Y(R),de(e=>(0,l.A)((0,l.A)({},e),{},{multipleStaffUpdateDialog:!1}))},je=()=>le(e=>({Do_Id:null,Do_Date:null,open:!1})),ye=()=>ae(e=>({Do_Id:null,open:!1})),Ce=()=>ie(e=>({Do_Id:null,Do_Date:null,open:!1}));(0,o.useEffect)(()=>{be()},[X,B,ve]);const Ie=(e,t)=>{Z(n=>(0,l.A)((0,l.A)({},n),{},{[e]:t}))},be=()=>{let e=[...B];for(const t of ve){const n=t.Field_Name,l=X[n];if(l){if("range"===l.type){const{min:t,max:o}=l;e=e.filter(e=>{const l=e[n];return(void 0===t||l>=t)&&(void 0===o||l<=o)});continue}if("date"===l.type){const{start:t,end:o}=l.value||{};e=e.filter(e=>{const l=new Date(e[n]);return(void 0===t||l>=new Date(t))&&(void 0===o||l<=new Date(o))});continue}if(Array.isArray(l)){const o=l.map(F).filter(Boolean);if(!o.length)continue;e="function"===typeof t.getFilterValues?e.filter(e=>{const n=(t.getFilterValues(e)||[]).map(F).filter(Boolean);return o.some(e=>n.includes(e))}):e.filter(e=>o.includes(F(e[n])))}}}te(e)},_e=(0,D.useReactToPrint)({content:()=>me.current,documentTitle:"Multiple Documents",pageStyle:"\n    @page {\n      margin: 0;\n      size: auto;\n    }\n\n    html, body {\n      margin: 0;\n      padding: 0;\n    }\n\n    body {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n    }\n\n    /* Center everything */\n    @media print {\n      body > * {\n        margin-left: auto !important;\n        margin-right: auto !important;\n      }\n      \n      .no-print {\n        display: none !important;\n      }\n    }\n  "}),De=e=>{const{Field_Name:t,Fied_Data:n,ColumnHeader:o}=e;var a,s,i,u,m,p,h,v,g,f;if("number"===n)return(0,N.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,N.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(a=null===(s=X[t])||void 0===s?void 0:s.min)&&void 0!==a?a:"",onChange:e=>Ie(t,(0,l.A)((0,l.A)({type:"range"},X[t]),{},{min:e.target.value?parseFloat(e.target.value):void 0}))}),(0,N.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(i=null===(u=X[t])||void 0===u?void 0:u.max)&&void 0!==i?i:"",onChange:e=>Ie(t,(0,l.A)((0,l.A)({type:"range"},X[t]),{},{max:e.target.value?parseFloat(e.target.value):void 0}))})]});if("date"===n)return(0,N.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,N.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(m=null===(p=X[t])||void 0===p||null===(h=p.value)||void 0===h?void 0:h.start)&&void 0!==m?m:"",onChange:e=>{var n;return Ie(t,{type:"date",value:(0,l.A)((0,l.A)({},null===(n=X[t])||void 0===n?void 0:n.value),{},{start:e.target.value||void 0})})}}),(0,N.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(v=null===(g=X[t])||void 0===g||null===(f=g.value)||void 0===f?void 0:f.end)&&void 0!==v?v:"",onChange:e=>{var n;return Ie(t,{type:"date",value:(0,l.A)((0,l.A)({},null===(n=X[t])||void 0===n?void 0:n.value),{},{end:e.target.value||void 0})})}})]});if("string"===n){const n=(e=>{const t=new Map;for(const n of e){const e=String(null!==n&&void 0!==n?n:"").trim();if(!e)continue;const l=e.toLowerCase();t.has(l)||t.set(l,e)}return Array.from(t.values())})("function"===typeof e.getFilterValues?B.flatMap(t=>e.getFilterValues(t)||[]):B.map(e=>e[t]));return(0,N.jsx)(r.A,{multiple:!0,id:"".concat(t,"-filter"),options:n,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:X[t]||[],onChange:(e,n)=>Ie(t,n),renderOption:(e,t,n)=>{let{selected:o}=n;return(0,N.jsxs)("li",(0,l.A)((0,l.A)({},e),{},{children:[(0,N.jsx)(d.A,{icon:w,checkedIcon:z,style:{marginRight:8},checked:o}),t]}))},isOptionEqualToValue:(e,t)=>e===t,renderInput:e=>(0,N.jsx)(c.A,(0,l.A)((0,l.A)({},e),{},{label:o||t,placeholder:"Select ".concat((o||t).replace(/_/g," "))}))})}return null},Ne=(0,o.useMemo)(()=>{const e=K.Do_Id.length>0,t=K.involvedStaffs.length>0,n=(0,a.IQ)(K.CostCategory.value)&&!(0,a.id)(K.CostCategory.value,0);return e&&t&&n},[K]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i.Ay,{title:"Sales Invoice",columns:[{Field_Name:"Select",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;const n=K.Do_Id.includes((0,a.Ro)(t.Do_Id));return(0,N.jsx)(d.A,{checked:n,onChange:()=>{Y(n?e=>(0,l.A)((0,l.A)({},e),{},{Do_Id:e.Do_Id.filter(e=>!(0,a.id)(e,t.Do_Id))}):e=>(0,l.A)((0,l.A)({},e),{},{Do_Id:[...e.Do_Id,(0,a.Ro)(t.Do_Id)]}))}})}},(0,i.Lj)("Do_Inv_No","string","Invoice"),(0,i.Lj)("createdOn","time","Created"),(0,i.Lj)("voucherTypeGet","string","Voucher"),(0,i.Lj)("retailerNameGet","string","Customer"),(0,i.Lj)("Narration","string","Narration"),...he,{Field_Name:"Action",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,N.jsx)(i.wF,{buttonsData:[{name:"Add Employee",onclick:()=>de(e=>(0,l.A)((0,l.A)({},e),{},{assignDialog:!0,selectedInvoice:t})),icon:(0,N.jsx)(y.A,{fontSize:"small",color:"primary"}),disabled:!S&&!P},{name:"Print Invoice",onclick:()=>{le({Do_Id:t.Do_Id,Do_Date:t.Do_Date,open:!0})},icon:(0,N.jsx)(C.A,{fontSize:"small",color:"primary"}),disabled:!L},{name:"Delivery Slip",onclick:()=>{ie({Do_Id:t.Do_Id,Do_Date:t.Do_Date,open:!0})},icon:(0,N.jsx)(C.A,{fontSize:"small",color:"primary"}),disabled:!L},{name:"Katchath Copy",onclick:()=>{ae({Do_Id:t.Do_Id,open:!0})},icon:(0,N.jsx)(C.A,{fontSize:"small",color:"primary"}),disabled:!L}]})}}],dataArray:ee,EnableSerialNumber:!0,ButtonArea:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(u.A,{size:"small",onClick:()=>de(e=>(0,l.A)((0,l.A)({},e),{},{multipleStaffUpdateDialog:!0})),disabled:!K.Do_Id.length,children:(0,N.jsx)(y.A,{fontSize:"small"})}),(0,N.jsx)(u.A,{size:"small",onClick:()=>de(e=>(0,l.A)((0,l.A)({},e),{},{filterDialog:!0})),children:(0,N.jsx)(I.A,{})}),(0,N.jsx)(u.A,{size:"small",onClick:ge,children:(0,N.jsx)(b.A,{})}),(0,N.jsx)("input",{type:"date",className:"cus-inpt w-auto",value:re.reqDate,onChange:e=>de(t=>(0,l.A)((0,l.A)({},t),{},{reqDate:e.target.value}))}),(0,N.jsx)(u.A,{size:"small",disabled:!re.docType||!K.Do_Id.length,onClick:()=>{ue({open:!0,doIds:K.Do_Id,docType:re.docType})},children:(0,N.jsx)(C.A,{})}),(0,N.jsxs)("select",{className:"cus-inpt w-auto rounded-5 border-0",disabled:!K.Do_Id.length,value:re.docType,onChange:e=>{const t=e.target.selectedIndex,n=e.target.options[t].text;de(t=>(0,l.A)((0,l.A)({},t),{},{docType:e.target.value,docTypeLabel:n}))},children:[(0,N.jsx)("option",{value:"",children:"SELECT TYPE"}),(0,N.jsx)("option",{value:"sales_invoice",children:"SALES INVOICE"}),(0,N.jsx)("option",{value:"katchath",children:"KATCHATH"}),(0,N.jsx)("option",{value:"delivery_slip",children:"DELIVERY SLIP"})]}),(0,N.jsxs)("select",{className:"cus-inpt w-auto rounded-5 border-0",value:re.staffStatus,onChange:e=>{de(t=>(0,l.A)((0,l.A)({},t),{},{staffStatus:Number(e.target.value)}))},children:[(0,N.jsx)("option",{value:"1",children:"ALL INVOICES"}),(0,N.jsx)("option",{value:"0",children:"INCOMPLETED INVOICES"})]})]})}),(0,N.jsxs)(m.A,{open:re.assignDialog,onClose:fe,maxWidth:"lg",fullWidth:!0,children:[(0,N.jsxs)(p.A,{children:["Assign Cost Centers: ",(0,N.jsx)("span",{className:"text-primary",children:null===(t=re.selectedInvoice)||void 0===t?void 0:t.Do_Inv_No})]}),(0,N.jsxs)("form",{onSubmit:async e=>{var t,n,l;e.preventDefault(),(0,s.z)({address:"sales/salesInvoice/lrReport",method:"POST",bodyData:{Do_Id:null===(t=re.selectedInvoice)||void 0===t?void 0:t.Do_Id,involvedStaffs:null===(n=re.selectedInvoice)||void 0===n?void 0:n.involvedStaffs,staffInvolvedStatus:(0,a.Ro)(null===(l=re.selectedInvoice)||void 0===l?void 0:l.staffInvolvedStatus)},loadingOn:A,loadingOff:j}).then(e=>{e.success?(_.oR.success(e.message),fe(),ge()):_.oR.error(e.message)}).catch(e=>console.log(e))},children:[(0,N.jsx)(h.A,{children:(0,N.jsxs)("div",{className:"row",children:[q.filter(e=>!["Broker","Transport"].some(t=>String(null===e||void 0===e?void 0:e.Cost_Category).includes(t))).map((e,t)=>{var n;const o=(0,a.$r)(null===(n=re.selectedInvoice)||void 0===n?void 0:n.involvedStaffs).filter(t=>(0,a.id)(t.Emp_Type_Id,e.Cost_Category_Id)).map(e=>({value:e.Emp_Id,label:e.Emp_Name}));return(0,N.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,N.jsx)("label",{children:e.Cost_Category}),(0,N.jsx)(f.Ay,{value:o,isMulti:!0,styles:x.MR,options:H,onChange:t=>{const n=t.map(t=>{var n;return{Do_Id:null===re||void 0===re||null===(n=re.selectedInvoice)||void 0===n?void 0:n.Do_Id,Emp_Id:t.value,Emp_Name:t.label,Emp_Type_Id:e.Cost_Category_Id,Involved_Emp_Type:e.Cost_Category}});((e,t,n)=>{de(o=>{var s;const i=(0,a.$r)(null===(s=o.selectedInvoice)||void 0===s?void 0:s.involvedStaffs).filter(e=>!(0,a.id)(e.Emp_Type_Id,n.Cost_Category_Id)).concat(t);return(0,l.A)((0,l.A)({},o),{},{selectedInvoice:(0,l.A)((0,l.A)({},e),{},{involvedStaffs:i})})})})(re.selectedInvoice,n,e)},placeholder:"Select ".concat(e.Cost_Category),filterOption:a.GI,menuPortalTarget:document.body})]},t)}),(0,N.jsxs)("div",{className:"col-lg-4 col-md-6 p-2 d-flex align-items-end",children:[(0,N.jsx)("input",{className:"form-check-input shadow-none pointer mx-2",style:{padding:"0.7em"},type:"checkbox",id:"removeFromList",checked:(0,a.id)(null===(n=re.selectedInvoice)||void 0===n?void 0:n.staffInvolvedStatus,1),onChange:()=>{de(e=>{var t;return(0,l.A)((0,l.A)({},e),{},{selectedInvoice:(0,l.A)((0,l.A)({},e.selectedInvoice),{},{staffInvolvedStatus:(0,a.id)(null===(t=e.selectedInvoice)||void 0===t?void 0:t.staffInvolvedStatus,1)?0:1})})})}}),(0,N.jsx)("label",{htmlFor:"removeFromList",className:"fw-bold",children:"Remove invoice from this page"})]})]})}),(0,N.jsxs)(v.A,{children:[(0,N.jsx)(g.A,{onClick:fe,variant:"outlined",children:"Close"}),(0,N.jsx)(g.A,{variant:"contained",type:"submit",children:"Save"})]})]})]}),(0,N.jsxs)(m.A,{open:re.filterDialog,onClose:xe,maxWidth:"sm",fullWidth:!0,children:[(0,N.jsx)(p.A,{children:"Filter Options"}),(0,N.jsx)(h.A,{children:(0,N.jsx)("div",{className:"row",children:ve.map((e,t)=>(0,N.jsx)("div",{className:"col-12 p-2",children:De(e)},t))})}),(0,N.jsx)(v.A,{children:(0,N.jsx)(g.A,{onClick:xe,variant:"outlined",children:"Close"})})]}),(0,N.jsxs)(m.A,{open:re.multipleStaffUpdateDialog,onClose:Ae,maxWidth:"sm",fullWidth:!0,children:[(0,N.jsx)(p.A,{children:"Update Cost Category"}),(0,N.jsxs)(h.A,{children:[(0,N.jsxs)("div",{className:"py-2",children:[(0,N.jsx)("label",{children:"Cost Category"}),(0,N.jsx)(f.Ay,{value:K.CostCategory,styles:x.MR,options:q.filter(e=>!["Broker","Transport"].some(t=>String(null===e||void 0===e?void 0:e.Cost_Category).includes(t))).map(e=>({value:e.Cost_Category_Id,label:e.Cost_Category})),onChange:e=>Y(t=>(0,l.A)((0,l.A)({},t),{},{CostCategory:e})),placeholder:"Select Cost Category",filterOption:a.GI,menuPortalTarget:document.body})]}),(0,N.jsxs)("div",{className:"py-2",children:[(0,N.jsx)("label",{children:"Staff"}),(0,N.jsx)(f.Ay,{value:K.involvedStaffs,isMulti:!0,styles:x.MR,options:H,onChange:e=>Y(t=>(0,l.A)((0,l.A)({},t),{},{involvedStaffs:e})),placeholder:"Select Staff",filterOption:a.GI,menuPortalTarget:document.body,closeMenuOnSelect:!1})]})]}),(0,N.jsxs)(v.A,{children:[(0,N.jsx)(g.A,{onClick:Ae,variant:"outlined",children:"Close"}),(0,N.jsx)(g.A,{variant:"contained",onClick:async()=>{(0,s.z)({address:"sales/salesInvoice/lrReport/multiple",method:"POST",bodyData:{CostCategory:(0,a.Ro)(K.CostCategory.value),Do_Id:K.Do_Id,involvedStaffs:K.involvedStaffs.map(e=>(0,a.Ro)(e.value))},loadingOn:A,loadingOff:j}).then(e=>{e.success?(_.oR.success(e.message),Ae(),ge()):_.oR.error(e.message)}).catch(e=>console.log(e))},disabled:!Ne,children:"Save"})]})]}),(0,N.jsxs)(m.A,{open:ne.open,onClose:je,maxWidth:"lg",fullWidth:!0,children:[(0,N.jsx)(p.A,{children:"Bill Print Preview"}),(0,N.jsx)(h.A,{children:(0,N.jsx)(O.A,{Do_Id:ne.Do_Id,Do_Date:ne.Do_Date,loadingOn:A,loadingOff:j})}),(0,N.jsx)(v.A,{children:(0,N.jsx)(g.A,{variant:"outlined",onClick:je,children:"Close"})})]}),(0,N.jsxs)(m.A,{open:oe.open,onClose:ye,maxWidth:"lg",fullWidth:!0,children:[(0,N.jsx)(p.A,{children:"Bill Print Preview"}),(0,N.jsx)(h.A,{children:(0,N.jsx)(k,{Do_Id:oe.Do_Id,loadingOn:A,loadingOff:j})}),(0,N.jsx)(v.A,{children:(0,N.jsx)(g.A,{variant:"outlined",onClick:ye,children:"Close"})})]}),(0,N.jsxs)(m.A,{open:se.open,onClose:Ce,maxWidth:"lg",fullWidth:!0,children:[(0,N.jsx)(p.A,{children:"Delivery Slip Preview"}),(0,N.jsx)(h.A,{children:(0,N.jsx)(T.A,{Do_Id:se.Do_Id,loadingOn:A,loadingOff:j})}),(0,N.jsx)(v.A,{children:(0,N.jsx)(g.A,{variant:"outlined",onClick:Ce,children:"Close"})})]}),(0,N.jsxs)(m.A,{open:ce.open,onClose:()=>ue({open:!1,doIds:[],docType:""}),maxWidth:"lg",fullWidth:!0,children:[(0,N.jsx)(h.A,{children:ce.doIds.map(e=>"sales_invoice"===ce.docType?(0,N.jsx)(O.A,{Do_Id:e,loadingOn:A,loadingOff:j},e):"katchath"===ce.docType?(0,N.jsx)(k,{Do_Id:e,loadingOn:A,loadingOff:j},e):"delivery_slip"===ce.docType?(0,N.jsx)(T.A,{Do_Id:e,loadingOn:A,loadingOff:j},e):null)}),(0,N.jsx)(v.A,{children:(0,N.jsx)(g.A,{variant:"outlined",onClick:()=>ue({open:!1,doIds:[],docType:""}),children:"Close"})})]}),(0,N.jsxs)(m.A,{open:ce.open,onClose:()=>ue({open:!1,doIds:[],docType:""}),maxWidth:"lg",fullWidth:!0,children:[(0,N.jsx)(h.A,{dividers:!0,children:(0,N.jsxs)("div",{ref:me,children:["sales_invoice"===ce.docType&&(0,N.jsx)(O.A,{Do_Ids:ce.doIds,loadingOn:A,loadingOff:j,isCombinedPrint:!0}),"katchath"===ce.docType&&(0,N.jsx)(k,{Do_Ids:ce.doIds,loadingOn:A,loadingOff:j,isCombinedPrint:!0}),"delivery_slip"===ce.docType&&(0,N.jsx)(T.A,{Do_Ids:ce.doIds,loadingOn:A,loadingOff:j,isCombinedPrint:!0})]})}),(0,N.jsxs)(v.A,{className:"no-print",children:[(0,N.jsx)(g.A,{variant:"contained",onClick:_e,startIcon:(0,N.jsx)(C.A,{}),children:"Print All"}),(0,N.jsx)(g.A,{variant:"outlined",onClick:()=>ue({open:!1,doIds:[],docType:""}),children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=7486.18890815.chunk.js.map