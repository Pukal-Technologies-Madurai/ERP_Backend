"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8962],{63406:(e,r,i)=>{i.d(r,{zU:()=>o,ex:()=>n,MR:()=>d,Ap:()=>l,FX:()=>s});var t=i(89379);const a=i.p+"static/media/smt.aa4d4f940bbebff07a57.png",l={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},d={menu:(e,r)=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,r)=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:r.isSelected?"#2684FF":r.isFocused?"#E2ECF9":"white",color:r.isSelected?"white":"#333",padding:"10px 12px"})},o=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],n=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:a,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:a,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:a,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],s=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},79484:(e,r,i)=>{i.d(r,{A:()=>l});var t=i(59662),a=i(70579);const l=(0,t.A)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},81972:(e,r,i)=>{i.r(r),i.d(r,{default:()=>L});var t=i(89379),a=i(65043),l=i(48471),d=i(65074),o=i(97707),n=i(11906),s=i(17392),v=i(83462),u=i(26600),c=i(35316),m=i(29347),D=i(73216),y=i(59383),I=i(79484),A=i(77739),C=i(3632),h=i(20846),O=i(83560),g=i(51387),p=i(70579);const f=e=>Array.isArray(e),S=e=>{let{data:r=[],status:i="ITEMS"}=e;switch(i){case"ITEMS":case"PO-Vendor-Wise":case"PO-Item-Wise":return null===r||void 0===r?void 0:r.reduce((e,r)=>{if(!Array.isArray(null===r||void 0===r?void 0:r.ItemDetails))return e;const i=r.ItemDetails.map(e=>{var i,a,l;return(0,t.A)((0,t.A)({},e),{},{OrderDetails:{Id:null===r||void 0===r?void 0:r.Id,Sno:null===r||void 0===r?void 0:r.Sno,PoYear:null===r||void 0===r?void 0:r.PoYear,PO_ID:null===r||void 0===r?void 0:r.PO_ID,BranchId:null===r||void 0===r?void 0:r.BranchId,BrokerId:null!==(i=r.BrokerId)&&void 0!==i?i:"",BrokerName:r.BrokerName,CreatedBy:r.CreatedBy,CreatedAt:r.CreatedAt,ItemDetails:null===r||void 0===r?void 0:r.ItemDetails,OrderStatus:null===r||void 0===r?void 0:r.OrderStatus,StaffDetails:f(r.StaffDetails)?r.StaffDetails:[],TranspoterDetails:f(r.TranspoterDetails)?r.TranspoterDetails:[],DeliveryDetails:f(r.DeliveryDetails)?r.DeliveryDetails:[],ConvertedAsInvoices:f(r.ConvertedAsInvoices)?r.ConvertedAsInvoices:[],LoadingDate:r.LoadingDate,OwnerId:null!==(a=r.OwnerId)&&void 0!==a?a:"",OwnerName:r.OwnerName,PartyAddress:r.PartyAddress,PartyId:null!==(l=r.PartyId)&&void 0!==l?l:"",PartyName:r.PartyName,PaymentCondition:r.PaymentCondition,Remarks:r.Remarks,TradeConfirmDate:r.TradeConfirmDate,Ledger_Name:r.Ledger_Name,Party_District:r.Party_District,isConvertableArrivalExist:(0,o.Ro)(null===r||void 0===r?void 0:r.isConvertableArrivalExist),IsConvertedAsInvoice:(0,o.Ro)(null===r||void 0===r?void 0:r.IsConvertedAsInvoice),Discount:null===r||void 0===r?void 0:r.Discount,QualityCondition:null===r||void 0===r?void 0:r.QualityCondition,PaymentDays:null===r||void 0===r?void 0:r.PaymentDays}})});return e.concat(i)},[]);case"ITEMS PENDING":case"PO-Pending-Only":return null===r||void 0===r?void 0:r.reduce((e,r)=>{var i;if(!Array.isArray(null===r||void 0===r?void 0:r.ItemDetails))return e;const a=null===r||void 0===r||null===(i=r.ItemDetails)||void 0===i?void 0:i.filter(e=>{var i;const t=(null===r||void 0===r||null===(i=r.DeliveryDetails)||void 0===i?void 0:i.filter(r=>(0,o.id)(r.ItemId,null===e||void 0===e?void 0:e.ItemId))).reduce((e,r)=>(0,o.Lr)(e,null===r||void 0===r?void 0:r.Weight),0);return Number(t)<Number(null===e||void 0===e?void 0:e.Weight)&&(0,o.iw)(r.OrderStatus)!==(0,o.iw)("Canceled")}).map(e=>{var i,a,l;return(0,t.A)((0,t.A)({},e),{},{OrderDetails:{Id:null===r||void 0===r?void 0:r.Id,Sno:null===r||void 0===r?void 0:r.Sno,PoYear:null===r||void 0===r?void 0:r.PoYear,PO_ID:null===r||void 0===r?void 0:r.PO_ID,BranchId:null===r||void 0===r?void 0:r.BranchId,BrokerId:null!==(i=r.BrokerId)&&void 0!==i?i:"",BrokerName:r.BrokerName,CreatedBy:r.CreatedBy,CreatedAt:r.CreatedAt,ItemDetails:null===r||void 0===r?void 0:r.ItemDetails,OrderStatus:null===r||void 0===r?void 0:r.OrderStatus,StaffDetails:f(r.StaffDetails)?r.StaffDetails:[],TranspoterDetails:f(r.TranspoterDetails)?r.TranspoterDetails:[],DeliveryDetails:f(r.DeliveryDetails)?r.DeliveryDetails:[],ConvertedAsInvoices:f(r.ConvertedAsInvoices)?r.ConvertedAsInvoices:[],LoadingDate:r.LoadingDate,OwnerId:null!==(a=r.OwnerId)&&void 0!==a?a:"",OwnerName:r.OwnerName,PartyAddress:r.PartyAddress,PartyId:null!==(l=r.PartyId)&&void 0!==l?l:"",PartyName:r.PartyName,PaymentCondition:r.PaymentCondition,Remarks:r.Remarks,TradeConfirmDate:r.TradeConfirmDate,Ledger_Name:r.Ledger_Name,Party_District:r.Party_District,isConvertableArrivalExist:(0,o.Ro)(null===r||void 0===r?void 0:r.isConvertableArrivalExist),IsConvertedAsInvoice:(0,o.Ro)(null===r||void 0===r?void 0:r.IsConvertedAsInvoice),Discount:null===r||void 0===r?void 0:r.Discount,QualityCondition:null===r||void 0===r?void 0:r.QualityCondition,PaymentDays:null===r||void 0===r?void 0:r.PaymentDays}})});return e.concat(a)},[]);case"ITEMS ARRIVED":return null===r||void 0===r?void 0:r.reduce((e,r)=>{var i;if(!Array.isArray(null===r||void 0===r?void 0:r.ItemDetails))return e;const a=null===r||void 0===r||null===(i=r.ItemDetails)||void 0===i?void 0:i.filter(e=>{var i;const t=(null===r||void 0===r||null===(i=r.DeliveryDetails)||void 0===i?void 0:i.filter(r=>(0,o.id)(r.ItemId,null===e||void 0===e?void 0:e.ItemId))).reduce((e,r)=>(0,o.Lr)(e,null===r||void 0===r?void 0:r.Weight),0);return Number(t)>=Number(null===e||void 0===e?void 0:e.Weight)}).map(e=>{var i,a,l;return(0,t.A)((0,t.A)({},e),{},{OrderDetails:{Id:null===r||void 0===r?void 0:r.Id,Sno:null===r||void 0===r?void 0:r.Sno,PoYear:null===r||void 0===r?void 0:r.PoYear,PO_ID:null===r||void 0===r?void 0:r.PO_ID,BranchId:null===r||void 0===r?void 0:r.BranchId,BrokerId:null!==(i=r.BrokerId)&&void 0!==i?i:"",BrokerName:r.BrokerName,CreatedBy:r.CreatedBy,CreatedAt:r.CreatedAt,ItemDetails:null===r||void 0===r?void 0:r.ItemDetails,OrderStatus:null===r||void 0===r?void 0:r.OrderStatus,StaffDetails:f(r.StaffDetails)?r.StaffDetails:[],TranspoterDetails:f(r.TranspoterDetails)?r.TranspoterDetails:[],DeliveryDetails:f(r.DeliveryDetails)?r.DeliveryDetails:[],ConvertedAsInvoices:f(r.ConvertedAsInvoices)?r.ConvertedAsInvoices:[],LoadingDate:r.LoadingDate,OwnerId:null!==(a=r.OwnerId)&&void 0!==a?a:"",OwnerName:r.OwnerName,PartyAddress:r.PartyAddress,PartyId:null!==(l=r.PartyId)&&void 0!==l?l:"",PartyName:r.PartyName,PaymentCondition:r.PaymentCondition,Remarks:r.Remarks,TradeConfirmDate:r.TradeConfirmDate,Ledger_Name:r.Ledger_Name,Party_District:r.Party_District,isConvertableArrivalExist:(0,o.Ro)(null===r||void 0===r?void 0:r.isConvertableArrivalExist),IsConvertedAsInvoice:(0,o.Ro)(null===r||void 0===r?void 0:r.IsConvertedAsInvoice),Discount:null===r||void 0===r?void 0:r.Discount,QualityCondition:null===r||void 0===r?void 0:r.QualityCondition,PaymentDays:null===r||void 0===r?void 0:r.PaymentDays}})});return e.concat(a)},[]);case"AR-Item-Based":case"AR-Vendor-Wise":return null===r||void 0===r?void 0:r.reduce((e,r)=>{if(!Array.isArray(null===r||void 0===r?void 0:r.DeliveryDetails))return e;const i=r.DeliveryDetails.map(e=>{var i,a,l;return(0,t.A)((0,t.A)({},e),{},{OrderDetails:{Id:null===r||void 0===r?void 0:r.Id,Sno:null===r||void 0===r?void 0:r.Sno,PoYear:null===r||void 0===r?void 0:r.PoYear,PO_ID:null===r||void 0===r?void 0:r.PO_ID,BranchId:null===r||void 0===r?void 0:r.BranchId,BrokerId:null!==(i=r.BrokerId)&&void 0!==i?i:"",BrokerName:r.BrokerName,CreatedBy:r.CreatedBy,CreatedAt:r.CreatedAt,ItemDetails:f(r.ItemDetails)?r.ItemDetails:[],StaffDetails:f(r.StaffDetails)?r.StaffDetails:[],TranspoterDetails:f(r.TranspoterDetails)?r.TranspoterDetails:[],DeliveryDetails:f(r.DeliveryDetails)?r.DeliveryDetails:[],ConvertedAsInvoices:f(r.ConvertedAsInvoices)?r.ConvertedAsInvoices:[],OrderStatus:null===r||void 0===r?void 0:r.OrderStatus,LoadingDate:r.LoadingDate,OwnerId:null!==(a=r.OwnerId)&&void 0!==a?a:"",OwnerName:r.OwnerName,PartyAddress:r.PartyAddress,PartyId:null!==(l=r.PartyId)&&void 0!==l?l:"",PartyName:r.PartyName,PaymentCondition:r.PaymentCondition,Remarks:r.Remarks,TradeConfirmDate:r.TradeConfirmDate,Ledger_Name:r.Ledger_Name,Party_District:r.Party_District,isConvertableArrivalExist:(0,o.Ro)(null===r||void 0===r?void 0:r.isConvertableArrivalExist),IsConvertedAsInvoice:(0,o.Ro)(null===r||void 0===r?void 0:r.IsConvertedAsInvoice),Discount:null===r||void 0===r?void 0:r.Discount,QualityCondition:null===r||void 0===r?void 0:r.QualityCondition,PaymentDays:null===r||void 0===r?void 0:r.PaymentDays}})});return e.concat(i)},[]);case"ORDERS":return r;case"ORDERS PENDING":return r.reduce((e,r)=>{var i;return!Array.isArray(null===r||void 0===r?void 0:r.DeliveryDetails)||(0,o.D)(null===r||void 0===r||null===(i=r.DeliveryDetails)||void 0===i?void 0:i.length,0)?e:e.concat(r)},[]);case"ORDERS ARRIVED":return r.reduce((e,r)=>{var i;return!Array.isArray(null===r||void 0===r?void 0:r.DeliveryDetails)||(0,o.id)(null===r||void 0===r||null===(i=r.DeliveryDetails)||void 0===i?void 0:i.length,0)?e:e.concat(r)},[]);case"COMPLETED ORDERS":return r.reduce((e,r)=>"Completed"!==(null===r||void 0===r?void 0:r.OrderStatus)?e:e.concat(r),[]);case"IN-COMPLETED ORDERS":return r.reduce((e,r)=>"Completed"===(null===r||void 0===r?void 0:r.OrderStatus)?e:e.concat(r),[]);default:return[]}},P=" bg-info fw-bold fa-11 px-2 py-1 rounded-3 ",R=" bg-warning fw-bold fa-11 px-2 py-1 rounded-3 ",E=" bg-success text-light fa-11 px-2 py-1 rounded-3 ",N=" bg-danger text-light fw-bold fa-11 px-2 py-1 rounded-3 ",x=e=>{switch(e){case"New Order":return P;case"On Process":return R;case"Completed":return E;case"Canceled":return N;default:return""}},T=(e,r,i)=>(0,t.A)({isVisible:1,Field_Name:e,Fied_Data:r},i&&{ColumnHeader:i}),b=e=>{let{OrderStatus:r="ITEMS",dialogs:i,setOrderPreview:a,navigation:l,products:d,EditRights:n,DeleteRights:v,AddRights:u}=e;T("OrderId","string","Order Id");const c={isVisible:1,ColumnHeader:"Owners",isCustomCell:!0,Cell:e=>{var r;let{row:i}=e;return null===i||void 0===i||null===(r=i.StaffDetails)||void 0===r?void 0:r.filter(e=>"Owners"===e.Cost_Category).map(e=>e.Emp_Name).join(", ")}},m={isVisible:1,ColumnHeader:"Brokers",isCustomCell:!0,Cell:e=>{var r;let{row:i}=e;return null===i||void 0===i||null===(r=i.StaffDetails)||void 0===r?void 0:r.filter(e=>"Broker"===e.Cost_Category).map(e=>e.Emp_Name).join(", ")}},D=T("PartyName","string","Party"),y=(T("PaymentCondition","string","Payment Condition"),T("Remarks","string")),I=T("TradeConfirmDate","date","Trade Confirm Date"),f=(T("LoadingDate","date","Loading Date"),T("QualityCondition","string","Condition"),{isVisible:1,ColumnHeader:"Party",isCustomCell:!0,Cell:e=>{var r;let{row:i}=e;return null===i||void 0===i||null===(r=i.OrderDetails)||void 0===r?void 0:r.PartyName}}),S={isVisible:1,ColumnHeader:"Action",isCustomCell:!0,Cell:e=>{let{row:r}=e;const d=r,{ItemDetails:v=[],DeliveryDetails:c=[],StaffDetails:m=[],TranspoterDetails:D=[],ConvertedAsInvoices:y=[]}=d,I=(0,o.id)(null===r||void 0===r?void 0:r.isConvertableArrivalExist,1),f=(0,o.id)(null===r||void 0===r?void 0:r.IsConvertedAsInvoice,1);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(A.A,{title:"Preview Order",children:(0,p.jsx)("span",{children:(0,p.jsx)(s.A,{size:"small",color:"primary",onClick:()=>a(e=>(0,t.A)((0,t.A)({},e),{},{OrderDetails:d,OrderItemsArray:v,DeliveryArray:c,TranspoterArray:D,StaffArray:m,display:!0})),children:(0,p.jsx)(C.A,{className:"fa-16"})})})}),l&&I&&"Completed"===(null===d||void 0===d?void 0:d.OrderStatus)&&u&&(0,p.jsx)(A.A,{title:"Convert to invoice",children:(0,p.jsx)(s.A,{size:"small",onClick:()=>{l({page:"/erp/purchase/invoice/create",stateToTransfer:{invoiceInfo:{Branch_Id:null===d||void 0===d?void 0:d.BranchId,Po_Inv_Date:(0,o.ny)(),Po_Entry_Date:null!==d&&void 0!==d&&d.LoadingDate?(0,o.ny)(null===d||void 0===d?void 0:d.LoadingDate):(0,o.ny)(),Retailer_Id:null===d||void 0===d?void 0:d.PartyId,Retailer_Name:null===d||void 0===d?void 0:d.PartyName,Discount:null===d||void 0===d?void 0:d.Discount,QualityCondition:null===d||void 0===d?void 0:d.QualityCondition,PaymentDays:null===d||void 0===d?void 0:d.PaymentDays},orderInfo:c.filter(e=>(0,o.Ro)(e.pendingInvoiceWeight)>0).map(e=>({POI_St_Id:"",DeliveryId:null===e||void 0===e?void 0:e.Trip_Item_SNo,OrderId:null===e||void 0===e?void 0:e.OrderId,Location_Id:null===e||void 0===e?void 0:e.LocationId,Item_Id:null===e||void 0===e?void 0:e.ItemId,Item_Name:(null===e||void 0===e?void 0:e.ItemName)||"not found",Bill_Qty:null===e||void 0===e?void 0:e.pendingInvoiceWeight,Act_Qty:null===e||void 0===e?void 0:e.Weight,Bill_Alt_Qty:null===e||void 0===e?void 0:e.Quantity,Item_Rate:null===e||void 0===e?void 0:e.BilledRate,Amount:(0,o.JH)(null===e||void 0===e?void 0:e.BilledRate,null===e||void 0===e?void 0:e.Weight),Free_Qty:0,Batch_No:null===e||void 0===e?void 0:e.BatchLocation})),staffInfo:m.map(e=>({Involved_Emp_Id:Number(e.EmployeeId),Involved_Emp_Name:e.Emp_Name,Cost_Center_Type_Id:Number(e.CostType)}))}})},children:(0,p.jsx)(h.A,{})})}),l&&!f&&n&&(0,p.jsx)(A.A,{title:"Edit",children:(0,p.jsx)("span",{children:(0,p.jsx)(s.A,{size:"small",onClick:()=>{l({page:"create",stateToTransfer:{OrderDetails:d,OrderItemsArray:v,DeliveryArray:c,TranspoterArray:D,StaffArray:m,editPage:"PurchaseOderWithDelivery"}})},children:(0,p.jsx)(O.A,{className:"fa-16"})})})}),I&&(0,p.jsx)(A.A,{title:"Delete Order",children:(0,p.jsx)("span",{children:(0,p.jsx)(s.A,{size:"small",onClick:()=>i(e=>(0,t.A)((0,t.A)({},e),{},{deleteOrderDialog:!0,deleteOrderId:null===r||void 0===r?void 0:r.Id})),color:"error",children:(0,p.jsx)(g.A,{className:"fa-16"})})})})]})}},P={isVisible:1,ColumnHeader:"Status",isCustomCell:!0,Cell:e=>{let{row:r}=e;const i=null===r||void 0===r?void 0:r.OrderStatus;return(0,p.jsx)("span",{className:x(i),children:String(i).replace(" ","")})}},R=T("PO_ID","string","Order ID"),E=T("Discount","number","Discount"),N=T("QualityCondition","string","Quality"),b=T("PaymentDays","number","Pay-Days"),j={isVisible:1,ColumnHeader:"Order ID",isCustomCell:!0,Cell:e=>{var r,i;let{row:t}=e;return null!==(r=null===t||void 0===t||null===(i=t.OrderDetails)||void 0===i?void 0:i.PO_ID)&&void 0!==r?r:""}},_=T("ItemName","string","Item"),w=T("Rate","number"),k={isVisible:1,ColumnHeader:"Weight",isCustomCell:!0,Cell:e=>{let{row:r}=e;return(0,o.IQ)(null===r||void 0===r?void 0:r.Weight)?(0,o.jG)(null===r||void 0===r?void 0:r.Weight):0}},B={isVisible:1,ColumnHeader:"Arrived Quantity",isCustomCell:!0,Cell:e=>{var r,i;let{row:t}=e;return(null===t||void 0===t||null===(r=t.OrderDetails)||void 0===r||null===(i=r.DeliveryDetails)||void 0===i?void 0:i.filter(e=>(0,o.id)(e.ItemId,null===t||void 0===t?void 0:t.ItemId))).reduce((e,r)=>(0,o.Lr)(e,null===r||void 0===r?void 0:r.Weight),0)}},L={isVisible:1,ColumnHeader:"Pending-Quantity",isCustomCell:!0,Cell:e=>{var r,i;let{row:t}=e;const a=(null===t||void 0===t||null===(r=t.OrderDetails)||void 0===r||null===(i=r.DeliveryDetails)||void 0===i?void 0:i.filter(e=>(0,o.id)(e.ItemId,null===t||void 0===t?void 0:t.ItemId))).reduce((e,r)=>(0,o.Lr)(e,null===r||void 0===r?void 0:r.Weight),0);return(0,o.DG)(null===t||void 0===t?void 0:t.Weight,a)}},M={isVisible:1,isCustomCell:!0,ColumnHeader:"Date",Cell:e=>{var r;let{row:i}=e;return(0,o.yc)(null===i||void 0===i||null===(r=i.OrderDetails)||void 0===r?void 0:r.TradeConfirmDate)}},F={isVisible:1,ColumnHeader:"Owners",isCustomCell:!0,Cell:e=>{let{row:r}=e;const i=null===r||void 0===r?void 0:r.OrderDetails,{StaffDetails:t}=i;return null===t||void 0===t?void 0:t.filter(e=>"Owners"===e.Cost_Category).map(e=>e.Emp_Name).join(", ")}},V={isVisible:1,ColumnHeader:"Brokers",isCustomCell:!0,Cell:e=>{let{row:r}=e;const i=null===r||void 0===r?void 0:r.OrderDetails,{StaffDetails:t}=i;return null===t||void 0===t?void 0:t.filter(e=>"Broker"===e.Cost_Category).map(e=>e.Emp_Name).join(", ")}},H={isVisible:1,ColumnHeader:"Action",isCustomCell:!0,Cell:e=>{let{row:r}=e;const i=null===r||void 0===r?void 0:r.OrderDetails,{ItemDetails:d,DeliveryDetails:v,TranspoterDetails:u,StaffDetails:c}=i,m=(0,o.id)(null===r||void 0===r?void 0:r.IsConvertedAsInvoice,1);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(A.A,{title:"Preview Order",children:(0,p.jsx)("span",{children:(0,p.jsx)(s.A,{size:"small",color:"primary",onClick:()=>a(e=>(0,t.A)((0,t.A)({},e),{},{OrderDetails:i,OrderItemsArray:d,DeliveryArray:v,TranspoterArray:u,StaffArray:c,display:!0})),children:(0,p.jsx)(C.A,{className:"fa-16"})})})}),l&&!m&&n&&(0,p.jsx)(A.A,{title:"Edit",children:(0,p.jsx)("span",{children:(0,p.jsx)(s.A,{size:"small",onClick:()=>l({page:"create",stateToTransfer:{OrderDetails:i,OrderItemsArray:d,DeliveryArray:v,TranspoterArray:u,StaffArray:c,editPage:"PurchaseOderWithDelivery"}}),children:(0,p.jsx)(O.A,{className:"fa-16"})})})})]})}},W={isVisible:1,isCustomCell:!0,ColumnHeader:"Arrived Date",Cell:e=>{let{row:r}=e;return null!==r&&void 0!==r&&r.ArrivalDate?(0,o.yc)(null===r||void 0===r?void 0:r.ArrivalDate):""}},Q=T("Location","string"),z={isVisible:1,ColumnHeader:"Rate",isCustomCell:!0,Cell:e=>{var r,i,t,a;let{row:l}=e;const d=null!==(t=null===(a=(Array.isArray(null===l||void 0===l||null===(r=l.OrderDetails)||void 0===r?void 0:r.ItemDetails)?null===l||void 0===l||null===(i=l.OrderDetails)||void 0===i?void 0:i.ItemDetails:[]).find(e=>(0,o.id)(null===e||void 0===e?void 0:e.ItemId,null===l||void 0===l?void 0:l.ItemId)))||void 0===a?void 0:a.Rate)&&void 0!==t?t:0,n=Number(null===l||void 0===l?void 0:l.BilledRate);return"".concat(n," (").concat((0,o.D)(n,d)?"+"+(n-d):"-"+(d-n),")")}},G=(T("Ledger_Name","string","LOL Ledger Name"),T("Party_District","string","LOL Party District"),{isVisible:1,ColumnHeader:"LOL Ledger Name",isCustomCell:!0,Cell:e=>{var r;let{row:i}=e;return null===i||void 0===i||null===(r=i.OrderDetails)||void 0===r?void 0:r.Ledger_Name}}),U={isVisible:1,ColumnHeader:"LOL Party District",isCustomCell:!0,Cell:e=>{var r;let{row:i}=e;return null===i||void 0===i||null===(r=i.OrderDetails)||void 0===r?void 0:r.Party_District}},Y=T("Stock_Item","string","Stock Item"),J=T("Stock_Group","string","Stock Group");switch(r){case"ITEMS":case"ITEMS PENDING":case"ITEMS ARRIVED":return[j,f,M,_,k,B,L,w,F,V,H];case"ORDERS":case"COMPLETED ORDERS":case"IN-COMPLETED ORDERS":return[R,I,D,m,E,N,b,y,P,S];case"ORDERS PENDING":case"ORDERS ARRIVED":return[R,I,D,m,c,y,S];case"PO-Vendor-Wise":return[j,M,G,U,J,k,w,L,H];case"PO-Item-Wise":case"PO-Pending-Only":return[j,M,J,Y,k,w,L,G,U,H];case"AR-Item-Based":return[j,W,Q,J,Y,k,z,G,U,H];case"AR-Vendor-Wise":return[j,W,Q,G,U,J,z,k,L,H];default:return[]}};var j=i(91036),_=i(93709),w=i(20656),k=i(63406);const B={Fromdate:(0,o.ny)(),Todate:(0,o.ny)(),OrderStatus:"ITEMS PENDING",vendorId:"",vendor:""},L=e=>{let{loadingOn:r,loadingOff:i,AddRights:A,EditRights:C,DeleteRights:h}=e;const[O,g]=(0,a.useState)([]),[f,P]=(0,a.useState)({OrderDetails:{},OrderItemsArray:[],DeliveryArray:[],TranspoterArray:[],StaffArray:[],display:!1}),[R,E]=(0,a.useState)([]),[N,x]=(0,a.useState)([]),T=(0,D.Zp)(),L=(0,D.zy)(),M=L.state,F=new URLSearchParams((0,D.zy)().search),[V,H]=(0,a.useState)((0,t.A)((0,t.A)({},B),{},{FilterDialog:!1,deleteOrderDialog:!1,deleteOrderId:"",refresh:!1,view:"PURCHASE ORDERS"}));(0,a.useEffect)(()=>{(0,d.z)({address:"masters/retailers/dropDown"}).then(e=>{if(e.success){const r=(0,o.$r)(null===e||void 0===e?void 0:e.data).sort((e,r)=>String(null===e||void 0===e?void 0:e.Retailer_Name).localeCompare(null===r||void 0===r?void 0:r.Retailer_Name));E(r)}}).catch(e=>console.error(e)),(0,d.z)({address:"masters/products"}).then(e=>{e.success?x(e.data):x([])}).catch(e=>console.error(e))},[]),(0,a.useEffect)(()=>{r&&r(),(0,d.z)({address:"dataEntry/purchaseOrderEntry?Fromdate=".concat(V.Fromdate,"&Todate=").concat(V.Todate)}).then(e=>{e.success&&g(e.data)}).catch(e=>console.error(e)).finally(()=>{i&&i()})},[V.refresh]),(0,a.useEffect)(()=>{const e={Fromdate:F.get("Fromdate")&&(0,o.vd)(F.get("Fromdate"))?F.get("Fromdate"):B.Fromdate,Todate:F.get("Todate")&&(0,o.vd)(F.get("Todate"))?F.get("Todate"):B.Todate,OrderStatus:F.get("OrderStatus")||B.OrderStatus,vendorId:F.get("vendorId")||B.vendorId,vendor:F.get("vendor")||B.vendor};H(r=>(0,t.A)((0,t.A)({},r),e))},[L.search]),(0,a.useEffect)(()=>{const e=null!==M&&void 0!==M&&M.Fromdate&&(0,o.vd)(null===M||void 0===M?void 0:M.Fromdate)?(0,o.ny)(null===M||void 0===M?void 0:M.Fromdate):null,r=null!==M&&void 0!==M&&M.Todate&&(0,o.vd)(null===M||void 0===M?void 0:M.Todate)?(0,o.ny)(null===M||void 0===M?void 0:M.Todate):null;e&&r&&W({Fromdate:e,Todate:r})},[M]);const W=e=>{const r=new URLSearchParams;Object.keys(e).forEach(i=>{e[i]&&r.set(i,e[i])}),T("?".concat(r.toString()),{replace:!0})},Q=e=>{const r=(0,t.A)((0,t.A)({},V),e);H(r),W(r)};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l.Ay,{dataArray:S({data:(0,o.IQ)(V.vendorId)?O.filter(e=>(0,o.id)(e.PartyId,V.vendorId)):O,status:V.OrderStatus}),columns:b({OrderStatus:V.OrderStatus,dialogs:H,setOrderPreview:P,navigation:e=>{let{page:r="",stateToTransfer:i={}}=e;T(r,{state:i})},products:N,EditRights:C,DeleteRights:h,AddRights:A}),tableMaxHeight:650,EnableSerialNumber:!0,title:"Purchase Order - "+V.OrderStatus,maxHeightOption:!0,ExcelPrintOption:!0,PDFPrintOption:!0,ButtonArea:(0,p.jsxs)(p.Fragment,{children:[A&&(0,p.jsx)(n.A,{variant:"outlined",onClick:()=>T("create"),children:"Add"}),(0,p.jsx)(s.A,{size:"small",className:"me-2",onClick:()=>H(e=>(0,t.A)((0,t.A)({},e),{},{FilterDialog:!0})),children:(0,p.jsx)(y.A,{})})]})}),f.display&&(0,p.jsx)(_.A,{OrderDetails:f.OrderDetails,OrderItemsArray:f.OrderItemsArray,DeliveryArray:f.DeliveryArray,TranspoterArray:f.TranspoterArray,StaffArray:f.StaffArray,display:f.display,onCloseDialog:()=>{P({OrderDetails:{},OrderItemsArray:[],DeliveryArray:[],TranspoterArray:[],display:!1})}}),(0,p.jsxs)(v.A,{open:V.FilterDialog,onClose:()=>H(e=>(0,t.A)((0,t.A)({},e),{},{FilterDialog:!1})),maxWidth:"sm",fullWidth:!0,children:[(0,p.jsx)(u.A,{children:"Filters"}),(0,p.jsx)(c.A,{children:(0,p.jsx)("table",{className:"table m-0 border-0",children:(0,p.jsxs)("tbody",{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"border-0 vctr",children:"Vendor"}),(0,p.jsx)("td",{className:"border-0 vctr",children:(0,p.jsx)(w.Ay,{value:{value:V.vendorId,label:V.vendor},onChange:e=>Q({vendorId:e.value,vendor:e.label}),options:[{value:"",label:"Search",isDisabled:!0},...R.map(e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name}))],styles:k.MR,isSearchable:!0,placeholder:"Select Vendor",maxMenuHeight:300,filterOption:o.GI})})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"border-0 vctr",children:"Fromdate"}),(0,p.jsx)("td",{className:"border-0 vctr",children:(0,p.jsx)("input",{type:"date",onChange:e=>Q({Fromdate:e.target.value}),value:V.Fromdate,className:"cus-inpt p-2"})})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"border-0 vctr",children:"Todate"}),(0,p.jsx)("td",{className:"border-0 vctr",children:(0,p.jsx)("input",{type:"date",onChange:e=>Q({Todate:e.target.value}),value:V.Todate,className:"cus-inpt p-2"})})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"border-0 vctr",children:"Order Status"}),(0,p.jsx)("td",{className:"border-0 vctr",children:(0,p.jsxs)("select",{className:"cus-inpt p-2",value:V.OrderStatus,onChange:e=>Q({OrderStatus:e.target.value}),children:[(0,p.jsxs)("optgroup",{label:"ITEM BASED",children:[(0,p.jsx)("option",{value:"ITEMS",children:"ITEMS"}),(0,p.jsx)("option",{value:"ITEMS PENDING",children:"ITEMS - PENDING"}),(0,p.jsx)("option",{value:"ITEMS ARRIVED",children:"ITEMS - ARRIVED"})]}),(0,p.jsxs)("optgroup",{label:"ORDER BASED",children:[(0,p.jsx)("option",{value:"ORDERS",children:"ORDERS"}),(0,p.jsx)("option",{value:"COMPLETED ORDERS",children:"COMPLETED ORDERS"}),(0,p.jsx)("option",{value:"IN-COMPLETED ORDERS",children:"IN-COMPLETED ORDERS"})]})]})})]})]})})}),(0,p.jsxs)(m.A,{children:[(0,p.jsx)(n.A,{onClick:()=>H(e=>(0,t.A)((0,t.A)({},e),{},{FilterDialog:!1})),variant:"outlined",children:"Close"}),(0,p.jsx)(n.A,{onClick:()=>H(e=>(0,t.A)((0,t.A)({},e),{},{refresh:!e.refresh})),variant:"outlined",startIcon:(0,p.jsx)(I.A,{}),children:"Search"})]})]}),(0,p.jsxs)(v.A,{open:V.deleteOrderDialog,onClose:()=>H(e=>(0,t.A)((0,t.A)({},e),{},{deleteOrderDialog:!1,deleteOrderId:""})),maxWidth:"sm",children:[(0,p.jsx)(u.A,{children:"Confirmation"}),(0,p.jsx)(c.A,{children:(0,p.jsx)("h6",{children:"Do you want to delete the order permanently?"})}),(0,p.jsxs)(m.A,{children:[(0,p.jsx)(n.A,{onClick:()=>H(e=>(0,t.A)((0,t.A)({},e),{},{deleteOrderDialog:!1,deleteOrderId:""})),children:"Cancel"}),(0,p.jsx)(n.A,{color:"error",variant:"outlined",onClick:()=>{return e=V.deleteOrderId,void((0,o.IQ)(e)&&(0,d.z)({address:"dataEntry/purchaseOrderEntry",method:"DELETE",bodyData:{OrderId:e}}).then(e=>{e.success?(H(e=>(0,t.A)((0,t.A)({},e),{},{deleteOrderDialog:!1,deleteOrderId:"",refresh:!e.refresh})),j.oR.success(e.message)):(H(e=>(0,t.A)((0,t.A)({},e),{},{deleteOrderDialog:!1,deleteOrderId:""})),j.oR.error(e.message))}).catch(e=>console.error(e)));var e},children:"Delete"})]})]})]})}}}]);
//# sourceMappingURL=8962.b5424580.chunk.js.map