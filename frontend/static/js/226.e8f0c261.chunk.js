"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[226],{38340:(e,r,a)=>{a.r(r),a.d(r,{default:()=>f});var t=a(89379),d=a(65043),s=a(48471),l=a(65074),o=a(97707),n=a(11906),i=a(17392),c=a(83462),h=a(26600),u=a(35316),A=a(29347),m=a(73216),v=a(59383),p=a(79484),g=a(10774),S=a(91036),O=a(93709),x=a(20656),E=a(63406),R=a(70579);const D={Fromdate:(0,o.ny)(),Todate:(0,o.ny)(),OrderStatus:"ITEMS PENDING",vendorId:"",vendor:""},f=e=>{let{loadingOn:r,loadingOff:a,AddRights:f,EditRights:y,DeleteRights:j}=e;const[b,I]=(0,d.useState)([]),[C,T]=(0,d.useState)({OrderDetails:{},OrderItemsArray:[],DeliveryArray:[],TranspoterArray:[],StaffArray:[],display:!1}),[F,N]=(0,d.useState)([]),[M,P]=(0,d.useState)([]),k=(0,m.Zp)(),L=(0,m.zy)(),w=L.state,B=new URLSearchParams((0,m.zy)().search),[z,H]=(0,d.useState)((0,t.A)((0,t.A)({},D),{},{FilterDialog:!1,deleteOrderDialog:!1,deleteOrderId:"",refresh:!1,view:"PURCHASE ORDERS"}));(0,d.useEffect)(()=>{(0,l.z)({address:"masters/retailers/dropDown"}).then(e=>{if(e.success){const r=(0,o.$r)(null===e||void 0===e?void 0:e.data).sort((e,r)=>String(null===e||void 0===e?void 0:e.Retailer_Name).localeCompare(null===r||void 0===r?void 0:r.Retailer_Name));N(r)}}).catch(e=>console.error(e)),(0,l.z)({address:"masters/products"}).then(e=>{e.success?P(e.data):P([])}).catch(e=>console.error(e))},[]),(0,d.useEffect)(()=>{r&&r(),(0,l.z)({address:"dataEntry/purchaseOrderEntry?Fromdate=".concat(z.Fromdate,"&Todate=").concat(z.Todate)}).then(e=>{e.success&&I(e.data)}).catch(e=>console.error(e)).finally(()=>{a&&a()})},[z.refresh]),(0,d.useEffect)(()=>{const e={Fromdate:B.get("Fromdate")&&(0,o.vd)(B.get("Fromdate"))?B.get("Fromdate"):D.Fromdate,Todate:B.get("Todate")&&(0,o.vd)(B.get("Todate"))?B.get("Todate"):D.Todate,OrderStatus:B.get("OrderStatus")||D.OrderStatus,vendorId:B.get("vendorId")||D.vendorId,vendor:B.get("vendor")||D.vendor};H(r=>(0,t.A)((0,t.A)({},r),e))},[L.search]),(0,d.useEffect)(()=>{const e=null!==w&&void 0!==w&&w.Fromdate&&(0,o.vd)(null===w||void 0===w?void 0:w.Fromdate)?(0,o.ny)(null===w||void 0===w?void 0:w.Fromdate):null,r=null!==w&&void 0!==w&&w.Todate&&(0,o.vd)(null===w||void 0===w?void 0:w.Todate)?(0,o.ny)(null===w||void 0===w?void 0:w.Todate):null;e&&r&&U({Fromdate:e,Todate:r})},[w]);const U=e=>{const r=new URLSearchParams;Object.keys(e).forEach(a=>{e[a]&&r.set(a,e[a])}),k("?".concat(r.toString()),{replace:!0})},_=e=>{const r=(0,t.A)((0,t.A)({},z),e);H(r),U(r)};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(s.Ay,{dataArray:(0,g.j)({data:(0,o.IQ)(z.vendorId)?b.filter(e=>(0,o.id)(e.PartyId,z.vendorId)):b,status:z.OrderStatus}),columns:(0,g.C)({OrderStatus:z.OrderStatus,dialogs:H,setOrderPreview:T,navigation:e=>{let{page:r="",stateToTransfer:a={}}=e;k(r,{state:a})},products:M,EditRights:y,DeleteRights:j,AddRights:f}),tableMaxHeight:650,EnableSerialNumber:!0,title:"Purchase Order - "+z.OrderStatus,maxHeightOption:!0,ExcelPrintOption:!0,PDFPrintOption:!0,ButtonArea:(0,R.jsxs)(R.Fragment,{children:[f&&(0,R.jsx)(n.A,{variant:"outlined",onClick:()=>k("create"),children:"Add"}),(0,R.jsx)(i.A,{size:"small",className:"me-2",onClick:()=>H(e=>(0,t.A)((0,t.A)({},e),{},{FilterDialog:!0})),children:(0,R.jsx)(v.A,{})})]})}),C.display&&(0,R.jsx)(O.A,{OrderDetails:C.OrderDetails,OrderItemsArray:C.OrderItemsArray,DeliveryArray:C.DeliveryArray,TranspoterArray:C.TranspoterArray,StaffArray:C.StaffArray,display:C.display,onCloseDialog:()=>{T({OrderDetails:{},OrderItemsArray:[],DeliveryArray:[],TranspoterArray:[],display:!1})}}),(0,R.jsxs)(c.A,{open:z.FilterDialog,onClose:()=>H(e=>(0,t.A)((0,t.A)({},e),{},{FilterDialog:!1})),maxWidth:"sm",fullWidth:!0,children:[(0,R.jsx)(h.A,{children:"Filters"}),(0,R.jsx)(u.A,{children:(0,R.jsx)("table",{className:"table m-0 border-0",children:(0,R.jsxs)("tbody",{children:[(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 vctr",children:"Vendor"}),(0,R.jsx)("td",{className:"border-0 vctr",children:(0,R.jsx)(x.Ay,{value:{value:z.vendorId,label:z.vendor},onChange:e=>_({vendorId:e.value,vendor:e.label}),options:[{value:"",label:"Search",isDisabled:!0},...F.map(e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name}))],styles:E.MR,isSearchable:!0,placeholder:"Select Vendor",maxMenuHeight:300,filterOption:o.GI})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 vctr",children:"Fromdate"}),(0,R.jsx)("td",{className:"border-0 vctr",children:(0,R.jsx)("input",{type:"date",onChange:e=>_({Fromdate:e.target.value}),value:z.Fromdate,className:"cus-inpt p-2"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 vctr",children:"Todate"}),(0,R.jsx)("td",{className:"border-0 vctr",children:(0,R.jsx)("input",{type:"date",onChange:e=>_({Todate:e.target.value}),value:z.Todate,className:"cus-inpt p-2"})})]}),(0,R.jsxs)("tr",{children:[(0,R.jsx)("td",{className:"border-0 vctr",children:"Order Status"}),(0,R.jsx)("td",{className:"border-0 vctr",children:(0,R.jsxs)("select",{className:"cus-inpt p-2",value:z.OrderStatus,onChange:e=>_({OrderStatus:e.target.value}),children:[(0,R.jsxs)("optgroup",{label:"ITEM BASED",children:[(0,R.jsx)("option",{value:"ITEMS",children:"ITEMS"}),(0,R.jsx)("option",{value:"ITEMS PENDING",children:"ITEMS - PENDING"}),(0,R.jsx)("option",{value:"ITEMS ARRIVED",children:"ITEMS - ARRIVED"})]}),(0,R.jsxs)("optgroup",{label:"ORDER BASED",children:[(0,R.jsx)("option",{value:"ORDERS",children:"ORDERS"}),(0,R.jsx)("option",{value:"COMPLETED ORDERS",children:"COMPLETED ORDERS"}),(0,R.jsx)("option",{value:"IN-COMPLETED ORDERS",children:"IN-COMPLETED ORDERS"})]})]})})]})]})})}),(0,R.jsxs)(A.A,{children:[(0,R.jsx)(n.A,{onClick:()=>H(e=>(0,t.A)((0,t.A)({},e),{},{FilterDialog:!1})),variant:"outlined",children:"Close"}),(0,R.jsx)(n.A,{onClick:()=>H(e=>(0,t.A)((0,t.A)({},e),{},{refresh:!e.refresh})),variant:"outlined",startIcon:(0,R.jsx)(p.A,{}),children:"Search"})]})]}),(0,R.jsxs)(c.A,{open:z.deleteOrderDialog,onClose:()=>H(e=>(0,t.A)((0,t.A)({},e),{},{deleteOrderDialog:!1,deleteOrderId:""})),maxWidth:"sm",children:[(0,R.jsx)(h.A,{children:"Confirmation"}),(0,R.jsx)(u.A,{children:(0,R.jsx)("h6",{children:"Do you want to delete the order permanently?"})}),(0,R.jsxs)(A.A,{children:[(0,R.jsx)(n.A,{onClick:()=>H(e=>(0,t.A)((0,t.A)({},e),{},{deleteOrderDialog:!1,deleteOrderId:""})),children:"Cancel"}),(0,R.jsx)(n.A,{color:"error",variant:"outlined",onClick:()=>{return e=z.deleteOrderId,void((0,o.IQ)(e)&&(0,l.z)({address:"dataEntry/purchaseOrderEntry",method:"DELETE",bodyData:{OrderId:e}}).then(e=>{e.success?(H(e=>(0,t.A)((0,t.A)({},e),{},{deleteOrderDialog:!1,deleteOrderId:"",refresh:!e.refresh})),S.oR.success(e.message)):(H(e=>(0,t.A)((0,t.A)({},e),{},{deleteOrderDialog:!1,deleteOrderId:""})),S.oR.error(e.message))}).catch(e=>console.error(e)));var e},children:"Delete"})]})]})]})}},63406:(e,r,a)=>{a.d(r,{zU:()=>o,ex:()=>n,MR:()=>l,Ap:()=>s,FX:()=>i});var t=a(89379);const d=a.p+"static/media/smt.aa4d4f940bbebff07a57.png",s={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},l={menu:(e,r)=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,r)=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:r.isSelected?"#2684FF":r.isFocused?"#E2ECF9":"white",color:r.isSelected?"white":"#333",padding:"10px 12px"})},o=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],n=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:d,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:d,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:d,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],i=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},79484:(e,r,a)=>{a.d(r,{A:()=>s});var t=a(59662),d=a(70579);const s=(0,t.A)((0,d.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")}}]);
//# sourceMappingURL=226.e8f0c261.chunk.js.map