"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[6598],{14140:(e,t,a)=>{a.d(t,{Am:()=>n,Ay:()=>l});var s=a(65043),r=a(70579);const o=["as","disabled"];function n(e){let{tagName:t,disabled:a,href:s,target:r,rel:o,role:n,onClick:i,tabIndex:l=0,type:c}=e;t||(t=null!=s||null!=r||null!=o?"a":"button");const d={tagName:t};if("button"===t)return[{type:c||"button",disabled:a},d];const p=e=>{(a||"a"===t&&function(e){return!e||"#"===e.trim()}(s))&&e.preventDefault(),a?e.stopPropagation():null==i||i(e)};return"a"===t&&(s||(s="#"),a&&(s=void 0)),[{role:null!=n?n:"button",disabled:void 0,tabIndex:a?void 0:l,href:s,target:"a"===t?r:void 0,"aria-disabled":a||void 0,rel:"a"===t?o:void 0,onClick:p,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),p(e))}},d]}const i=s.forwardRef((e,t)=>{let{as:a,disabled:s}=e,i=function(e,t){if(null==e)return{};var a,s,r={},o=Object.keys(e);for(s=0;s<o.length;s++)a=o[s],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,o);const[l,{tagName:c}]=n(Object.assign({tagName:a,disabled:s},i));return(0,r.jsx)(c,Object.assign({},i,l,{ref:t}))});i.displayName="Button";const l=i},14282:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(89379),r=a(80045),o=a(98139),n=a.n(o),i=a(65043),l=a(14140),c=a(67852),d=a(70579);const p=["as","bsPrefix","variant","size","active","disabled","className"],u=i.forwardRef((e,t)=>{let{as:a,bsPrefix:o,variant:i="primary",size:u,active:h=!1,disabled:m=!1,className:x}=e,y=(0,r.A)(e,p);const A=(0,c.oU)(o,"btn"),[v,{tagName:T}]=(0,l.Am)((0,s.A)({tagName:a,disabled:m},y)),j=T;return(0,d.jsx)(j,(0,s.A)((0,s.A)((0,s.A)({},v),y),{},{ref:t,disabled:m,className:n()(x,A,h&&"active",i&&"".concat(A,"-").concat(i),u&&"".concat(A,"-").concat(u),y.href&&m&&"disabled")}))});u.displayName="Button";const h=u},51387:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(59662),r=a(70579);const o=(0,s.A)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},56598:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var s=a(89379),r=a(65043),o=a(91036),n=a(14282),i=a(79650),l=a(71806),c=a(84882),d=a(28076),p=a(39652),u=a(58093),h=a(73460),m=a(17392),x=a(83462),y=a(26600),A=a(35316),v=a(29347),T=a(51387),j=a(83560),b=a(65074),f=a(58471),S=a(70579);const g=()=>{const[e,t]=(0,r.useState)([]),[a,g]=(0,r.useState)(!1),[_,k]=(0,r.useState)(!1),[D,E]=(0,r.useState)(null),[I,w]=(0,r.useState)(!1),[P,C]=(0,r.useState)("asc"),[N,R]=(0,r.useState)("Task_Type_Id");(0,r.useEffect)(()=>{(async()=>{try{const e=await(0,b.z)({address:"masters/taskType"});e.success?t(e.data):o.oR.error("Failed to fetch task types: "+e.message)}catch(e){console.error(e),o.oR.error("Error fetching task types.")}})()},[a]);const F=()=>{k(!1)},O=[...e].sort((e,t)=>{const a=e[N],s=t[N];return"asc"===P?a<s?-1:1:a>s?-1:1});return(0,S.jsxs)(r.Fragment,{children:[(0,S.jsxs)("div",{className:"card",children:[(0,S.jsxs)("div",{className:"card-header bg-white fw-bold d-flex align-items-center justify-content-between",children:["Task Types",(0,S.jsx)(n.A,{className:"rounded-5 px-3 py-1 fa-13 shadow",onClick:()=>{E(null),w(!0)},children:"Create Task Type"})]}),(0,S.jsx)("div",{className:"card-body overflow-scroll",style:{maxHeight:"78vh"},children:(0,S.jsx)(i.A,{children:(0,S.jsxs)(l.A,{children:[(0,S.jsx)(c.A,{children:(0,S.jsx)(d.A,{children:[{id:"index",label:"Id No",sort:!1},{id:"Task_Type",label:"Task Type",sort:!0},{id:"actions",label:"Actions",sort:!1}].map(e=>(0,S.jsx)(p.A,{sx:{padding:"4px 8px"},children:e.sort?(0,S.jsx)(u.A,{active:N===e.id,direction:N===e.id?P:"asc",onClick:()=>{return t=e.id,C(N===t&&"asc"===P?"desc":"asc"),void R(t);var t},children:e.label}):e.label},e.id))})}),(0,S.jsx)(h.A,{children:O.map((e,t)=>(0,S.jsxs)(d.A,{children:[(0,S.jsx)(p.A,{sx:{padding:"4px 8px"},children:t+1}),(0,S.jsx)(p.A,{sx:{padding:"4px 8px"},children:e.Task_Type}),(0,S.jsxs)(p.A,{sx:{padding:"4px 8px"},children:[(0,S.jsx)(m.A,{onClick:()=>(E(e),void w(!0)),size:"small",children:(0,S.jsx)(j.A,{})}),(0,S.jsx)(m.A,{onClick:()=>(E(e),void k(!0)),sx:{color:"#FF6865"},children:(0,S.jsx)(T.A,{})})]})]},e.Task_Type_Id))})]})})})]}),(0,S.jsx)(f.A,{open:I,onClose:()=>w(!1),existingTaskType:D,onCreate:async e=>{try{const t=await(0,b.z)({address:"masters/taskType",method:"POST",headers:{"Content-Type":"application/json"},bodyData:{Task_Type:e}});t.success?(g(!a),o.oR.success("Task type created successfully!"),w(!1)):o.oR.error("Failed to create task type: "+t.message)}catch(t){console.error(t),o.oR.error("Error creating task type.")}},onUpdate:async e=>{try{const t=await(0,b.z)({address:"masters/taskType",method:"PUT",headers:{"Content-Type":"application/json"},bodyData:(0,s.A)({},e)});t.success?(g(!a),o.oR.success("Task type updated successfully!"),w(!1)):o.oR.error("Failed to update task type: "+t.message)}catch(t){console.error(t),o.oR.error("Error updating task type.")}}}),(0,S.jsxs)(x.A,{open:_,onClose:F,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,S.jsx)(y.A,{className:"bg-primary text-white mb-4 px-3 py-2",children:"Confirmation"}),(0,S.jsxs)(A.A,{className:"p-4",children:["Do you want to delete the Task Type",(0,S.jsx)("span",{className:"text-primary",children:" "+(null===D||void 0===D?void 0:D.Task_Type)+" "}),"?"]}),(0,S.jsxs)(v.A,{children:[(0,S.jsx)(n.A,{className:"btn btn-light rounded-5 px-3 me-1",onClick:F,children:"Cancel"}),(0,S.jsx)(n.A,{className:"btn btn-primary rounded-5 px-3",onClick:async()=>{try{const e=await(0,b.z)({address:"masters/taskType",method:"DELETE",headers:{"Content-Type":"application/json"},bodyData:{Task_Type_Id:D.Task_Type_Id}});e.success?(g(!a),k(!1),o.oR.success("Task type deleted successfully!")):o.oR.error("Failed to delete task type: "+e.message)}catch(e){console.error(e),o.oR.error("Error deleting task type.")}},children:"Delete"})]})]})]})}},58093:(e,t,a)=>{a.d(t,{A:()=>f});var s=a(98587),r=a(58168),o=a(68606),n=a(58387),i=a(65043),l=a(75429),c=a(59662),d=a(70579);const p=(0,c.A)((0,d.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");var u=a(34535),h=a(6431),m=a(6803),x=a(57056),y=a(32400);function A(e){return(0,y.Ay)("MuiTableSortLabel",e)}const v=(0,x.A)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),T=["active","children","className","direction","hideSortIcon","IconComponent"],j=(0,u.Ay)(l.A,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.active&&t.active]}})(e=>{let{theme:t}=e;return{cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,["& .".concat(v.icon)]:{opacity:.5}},["&.".concat(v.active)]:{color:(t.vars||t).palette.text.primary,["& .".concat(v.icon)]:{opacity:1,color:(t.vars||t).palette.text.secondary}}}}),b=(0,u.Ay)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.icon,t["iconDirection".concat((0,m.A)(a.direction))]]}})(e=>{let{theme:t,ownerState:a}=e;return(0,r.A)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none"},"desc"===a.direction&&{transform:"rotate(0deg)"},"asc"===a.direction&&{transform:"rotate(180deg)"})}),f=i.forwardRef(function(e,t){const a=(0,h.b)({props:e,name:"MuiTableSortLabel"}),{active:i=!1,children:l,className:c,direction:u="asc",hideSortIcon:x=!1,IconComponent:y=p}=a,v=(0,s.A)(a,T),f=(0,r.A)({},a,{active:i,direction:u,hideSortIcon:x,IconComponent:y}),S=(e=>{const{classes:t,direction:a,active:s}=e,r={root:["root",s&&"active"],icon:["icon","iconDirection".concat((0,m.A)(a))]};return(0,o.A)(r,A,t)})(f);return(0,d.jsxs)(j,(0,r.A)({className:(0,n.A)(S.root,c),component:"span",disableRipple:!0,ownerState:f,ref:t},v,{children:[l,x&&!i?null:(0,d.jsx)(b,{as:y,className:(0,n.A)(S.icon),ownerState:f})]}))})},58471:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(89379),r=a(65043),o=a(83462),n=a(26600),i=a(35316),l=a(67784),c=a(29347),d=a(11906),p=a(65074),u=a(70579);const h=e=>{let{open:t,onClose:a,existingTaskType:h,onCreate:m,onUpdate:x}=e;const[y,A]=(0,r.useState)({Task_Type:"",Task_Type_Id:"",ProjectId:"",ProjectName:"",Est_StartDate:(new Date).toISOString().split("T")[0],Est_EndDate:(new Date).toISOString().split("T")[0],Status:"1"}),[v,T]=(0,r.useState)([]),[j,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(async()=>{b(!0);try{var e;const t=(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.Company_id)||1,a=await(0,p.z)({address:"taskManagement/project/Abstract?Company_id=".concat(t)});a.success?T(a.data||[]):console.error("Failed to fetch projects:",a.message)}catch(t){console.error("Error fetching projects:",t)}finally{b(!1)}})()},[t]),(0,r.useEffect)(()=>{if(h&&h.ProjectId){const e=(0,s.A)((0,s.A)({},h),{},{ProjectId:h.ProjectId.toString(),Est_StartDate:h.Est_StartDate?new Date(h.Est_StartDate).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],Est_EndDate:h.Est_EndDate?new Date(h.Est_EndDate).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0]});A(e)}else A({Task_Type:"",Task_Type_Id:"",ProjectId:"",ProjectName:"",Est_StartDate:(new Date).toISOString().split("T")[0],Est_EndDate:(new Date).toISOString().split("T")[0],Status:"1"})},[h,t,v]);const f=()=>{A({Task_Type:"",Task_Type_Id:"",ProjectId:"",ProjectName:"",Est_StartDate:(new Date).toISOString().split("T")[0],Est_EndDate:(new Date).toISOString().split("T")[0],Status:"1"}),a()},S=h&&h.ProjectId;return(0,u.jsxs)(o.A,{open:t,onClose:f,fullWidth:!0,maxWidth:"sm",children:[(0,u.jsx)(n.A,{children:h&&h.Task_Type_Id?"UPDATE TASK TYPE":"CREATE TASK TYPE"}),(0,u.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!y.Task_Type.trim())return void alert("Please enter a Task Type");if(!y.ProjectId)return void alert("Please select a Project");if(new Date(y.Est_StartDate)>new Date(y.Est_EndDate))return void alert("End date cannot be before start date");const t=(0,s.A)((0,s.A)({},y),{},{ProjectId:y.ProjectId,Status:y.Status});h&&h.Task_Type_Id?x(t):m(t),a()},children:[(0,u.jsxs)(i.A,{children:[(0,u.jsx)("label",{children:"Project"}),(0,u.jsxs)("select",{value:y.ProjectId||"",onChange:e=>{const t=e.target.value,a=v.find(e=>e.Project_Id.toString()===t);A(e=>(0,s.A)((0,s.A)({},e),{},{ProjectId:t,ProjectName:a?a.Project_Name:"",Est_StartDate:null!==a&&void 0!==a&&a.Est_Start_Dt?new Date(a.Est_Start_Dt).toISOString().split("T")[0]:e.Est_StartDate,Est_EndDate:null!==a&&void 0!==a&&a.Est_End_Dt?new Date(a.Est_End_Dt).toISOString().split("T")[0]:e.Est_EndDate}))},className:"cus-inpt",required:!0,disabled:S,children:[(0,u.jsx)("option",{value:"",disabled:!0,children:j?"Loading projects...":"Select Project"}),v.map(e=>(0,u.jsx)("option",{value:e.Project_Id.toString(),children:e.Project_Name},e.Project_Id))]}),(0,u.jsx)("label",{children:"Task Type"}),(0,u.jsx)(l.A,{value:y.Task_Type,onChange:e=>A((0,s.A)((0,s.A)({},y),{},{Task_Type:e.target.value})),fullWidth:!0,margin:"dense",variant:"outlined",required:!0,placeholder:"Enter task type (e.g., Development, Testing)"}),(0,u.jsx)("label",{children:"Estimated Start Date"}),(0,u.jsx)("input",{type:"date",value:y.Est_StartDate,onChange:e=>A((0,s.A)((0,s.A)({},y),{},{Est_StartDate:e.target.value})),className:"cus-inpt",required:!0}),(0,u.jsx)("label",{children:"Estimated End Date"}),(0,u.jsx)("input",{type:"date",value:y.Est_EndDate,onChange:e=>A((0,s.A)((0,s.A)({},y),{},{Est_EndDate:e.target.value})),className:"cus-inpt",required:!0}),(0,u.jsx)("label",{children:"Status"}),(0,u.jsxs)("select",{className:"cus-inpt",value:y.Status,onChange:e=>A((0,s.A)((0,s.A)({},y),{},{Status:e.target.value})),required:!0,children:[(0,u.jsx)("option",{value:"",disabled:!0,children:"Select Status"}),(0,u.jsx)("option",{value:"1",children:"Active"}),(0,u.jsx)("option",{value:"0",children:"Inactive"}),(0,u.jsx)("option",{value:"2",children:"Pending"}),(0,u.jsx)("option",{value:"3",children:"Completed"})]})]}),(0,u.jsxs)(c.A,{children:[(0,u.jsx)(d.A,{onClick:f,children:"Cancel"}),(0,u.jsx)(d.A,{type:"submit",variant:"contained",children:h&&h.Task_Type_Id?"Update":"Save"})]})]})]})}},67784:(e,t,a)=>{a.d(t,{A:()=>_});var s=a(58168),r=a(98587),o=a(65043),n=a(58387),i=a(68606),l=a(20992),c=a(34535),d=a(6431),p=a(43360),u=a(95516),h=a(74050),m=a(79190),x=a(53193),y=a(81673),A=a(72221),v=a(57056),T=a(32400);function j(e){return(0,T.Ay)("MuiTextField",e)}(0,v.A)("MuiTextField",["root"]);var b=a(70579);const f=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],S={standard:p.A,filled:u.A,outlined:h.A},g=(0,c.Ay)(x.A,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),_=o.forwardRef(function(e,t){const a=(0,d.b)({props:e,name:"MuiTextField"}),{autoComplete:o,autoFocus:c=!1,children:p,className:u,color:h="primary",defaultValue:x,disabled:v=!1,error:T=!1,FormHelperTextProps:_,fullWidth:k=!1,helperText:D,id:E,InputLabelProps:I,inputProps:w,InputProps:P,inputRef:C,label:N,maxRows:R,minRows:F,multiline:O=!1,name:M,onBlur:z,onChange:L,onFocus:q,placeholder:W,required:U=!1,rows:V,select:B=!1,SelectProps:H,type:K,value:Y,variant:J="outlined"}=a,G=(0,r.A)(a,f),Q=(0,s.A)({},a,{autoFocus:c,color:h,disabled:v,error:T,fullWidth:k,multiline:O,required:U,select:B,variant:J}),X=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"]},j,t)})(Q);const Z={};"outlined"===J&&(I&&"undefined"!==typeof I.shrink&&(Z.notched=I.shrink),Z.label=N),B&&(H&&H.native||(Z.id=void 0),Z["aria-describedby"]=void 0);const $=(0,l.A)(E),ee=D&&$?"".concat($,"-helper-text"):void 0,te=N&&$?"".concat($,"-label"):void 0,ae=S[J],se=(0,b.jsx)(ae,(0,s.A)({"aria-describedby":ee,autoComplete:o,autoFocus:c,defaultValue:x,fullWidth:k,multiline:O,name:M,rows:V,maxRows:R,minRows:F,type:K,value:Y,id:$,inputRef:C,onBlur:z,onChange:L,onFocus:q,placeholder:W,inputProps:w},Z,P));return(0,b.jsxs)(g,(0,s.A)({className:(0,n.A)(X.root,u),disabled:v,error:T,fullWidth:k,ref:t,required:U,color:h,variant:J,ownerState:Q},G,{children:[null!=N&&""!==N&&(0,b.jsx)(m.A,(0,s.A)({htmlFor:$,id:te},I,{children:N})),B?(0,b.jsx)(A.A,(0,s.A)({"aria-describedby":ee,id:$,labelId:te,value:Y,input:se},H,{children:p})):se,D&&(0,b.jsx)(y.A,(0,s.A)({id:ee},_,{children:D}))]}))})},83560:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(59662),r=a(70579);const o=(0,s.A)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=6598.b357a53d.chunk.js.map