"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7913],{10489:(e,t,a)=>{a.d(t,{A:()=>d});a(65043);var i=a(83462),l=a(26600),r=a(35316),n=a(29347),s=a(11906),o=a(70579);const d=e=>{let{open:t=!1,onClose:a,children:d,title:c,onSubmit:m,submitText:u="Submit",closeText:h="Close",maxWidth:b="sm",fullWidth:p=!0,isSubmit:g=!1,startAction:N}=e;return(0,o.jsxs)(i.A,{open:t,onClose:a,fullWidth:p,maxWidth:b,children:[c&&(0,o.jsx)(l.A,{children:c}),(0,o.jsx)(r.A,{children:d}),(0,o.jsxs)(n.A,{className:"".concat(N?"d-flex justify-content-between":""),children:[N&&(0,o.jsx)("div",{children:N}),(0,o.jsxs)("div",{children:[(0,o.jsx)(s.A,{onClick:a,children:h}),m&&(0,o.jsx)(s.A,{variant:"contained",onClick:m,type:g?"submit":"button",className:"ms-2",children:u})]})]})]})}},14585:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var i=a(89379),l=a(65043),r=a(65074),n=a(69223),s=a.n(n),o=a(72450),d=a(22520),c=a(8002),m=a(17392),u=a(10489),h=a(59662),b=a(70579);const p=(0,h.A)((0,b.jsx)("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2zm1-9h1V4H2v1h1zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2zm5-6v2h14V5zm0 14h14v-2H7zm0-6h14v-2H7z"}),"FormatListNumbered");var g=a(59383),N=a(51387);a(9715),a(67854),a(75936),a(1989);var A=a(73216),f=a(20656),x=a(63406);const v=e=>{let t=[];return e.forEach((e,a)=>{const i=e.product||[],l=(e.invoiceValue||0)-(e.totalReference||0);t.push({SNo:a+1,invoiceDate:e.invoiceDate||"",invoiceNumber:e.invoiceNumber||"",voucherType:e.voucherTypeGet||"",Con:e.branchNameGet||"",DueDate:e.paymentDueDate,RetailerName:e.retailerNameGet||"",KGS:"",Bags:"",Rate:"",DIS:e.discountValue||"",BillAmt:e.invoiceValue||0,Paid:e.totalReference||0,Pending:l,Remarks:"",_isHeader:!0}),i.forEach(e=>{t.push({SNo:"",Con:"",invoiceDate:"",invoiceNumber:"",voucherType:"",DueDate:"",RetailerName:e.productNameGet||"",KGS:e.kgsValue||"",Bags:e.bagsValue||"",Rate:e.rateValue||"",DIS:"",BillAmt:"",Paid:"",Pending:"",Remarks:"",_isHeader:!1})})}),t},F={Fromdate:(0,d.ny)(),Todate:(0,d.ny)(),Retailer:{value:"",label:"ALL"},VoucherType:{value:"",label:"ALL"},filterItems:{value:"",label:"ALL"}},C=e=>{let{loadingOn:t,loadingOff:a,pageID:n}=e;const[h,C]=(0,l.useState)([]),[y,D]=(0,l.useState)([]),[_,S]=(0,l.useState)(!1),j=(0,A.zy)(),R=sessionStorage.getItem("filterValues"),[T,V]=(0,l.useState)({voucherType:[],created_by:[]}),[O,H]=(0,l.useState)((0,i.A)((0,i.A)({},F),{},{refreshCount:0,filterDialog:!1})),[w,E]=(0,l.useState)([]),[B,k]=(0,l.useState)([]);(0,l.useEffect)(()=>{(0,r.z)({address:"purchase/invoice/filterValues"}).then(e=>{var t,a;e.success&&V({voucherType:null===(t=e.others)||void 0===t?void 0:t.voucherType,created_by:null===(a=e.others)||void 0===a?void 0:a.created_by})}).catch(e=>console.error(e))},[]),(0,l.useEffect)(()=>{const{Fromdate:e,Todate:l,VoucherType:n}=O;(0,r.z)({address:"purchase/invoice/paymentDue?Fromdate=".concat(e,"&Todate=").concat(l,"&VoucherType=").concat(n.value),loadingOff:a,loadingOn:t}).then(e=>{if(e.success){const t=e.data.map(e=>(0,i.A)((0,i.A)({},e),{},{customOrder:""}));D(t),C(v(t))}}).catch(e=>console.error(e))},[O.refreshCount,j]),(0,l.useEffect)(()=>{const{Fromdate:e,Todate:t,VoucherType:a=F.VoucherType}=(0,d.vU)(n);H(l=>(0,i.A)((0,i.A)({},l),{},{Fromdate:e,Todate:t,VoucherType:a,refreshCount:l.refreshCount+1}))},[R,n,j]);const P=e=>null!==e&&void 0!==e&&e._isHeader?" fw-bold  ":"";return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.A,{dataArray:h,columns:(I=[{Field_Name:"SNo",ColumnHeader:"No",Fied_Data:"string",isVisible:1,tdClass:e=>{let{row:t}=e;return P(t)}},{Field_Name:"Con",ColumnHeader:"Con",Fied_Data:"string",isVisible:1,tdClass:e=>{let{row:t}=e;return P(t)}},{Field_Name:"invoiceDate",ColumnHeader:"Entry Date",Fied_Data:"date",isVisible:0,tdClass:e=>{let{row:t}=e;return P(t)}},{Field_Name:"DueDate",ColumnHeader:"Due Date",Fied_Data:"date",isVisible:1,tdClass:e=>{let{row:t}=e;return P(t)}},{Field_Name:"invoiceNumber",ColumnHeader:"Voucher No",Fied_Data:"string",isVisible:0,tdClass:e=>{let{row:t}=e;return P(t)}},{Field_Name:"voucherType",ColumnHeader:"Voucher Type",Fied_Data:"string",isVisible:0,tdClass:e=>{let{row:t}=e;return P(t)}},{Field_Name:"RetailerName",ColumnHeader:"Vendor",Fied_Data:"string",isVisible:1,tdClass:e=>{let{row:t}=e;return P(t)},FooterCell:()=>""},{Field_Name:"KGS",ColumnHeader:"KGS",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:t}=e;return P(t)}},{Field_Name:"Bags",ColumnHeader:"Bags",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:t}=e;return P(t)}},{Field_Name:"Rate",ColumnHeader:"Rate",Fied_Data:"number",isVisible:1,Aggregation:"mean",tdClass:e=>{let{row:t}=e;return P(t)}},{Field_Name:"DIS",ColumnHeader:"DIS",Fied_Data:"string",isVisible:1,Aggregation:"mean",tdClass:e=>{let{row:t}=e;return P(t)}},{Field_Name:"BillAmt",ColumnHeader:"Bill Amt",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:t}=e;return P(t)}},{Field_Name:"Paid",ColumnHeader:"Paid",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:t}=e;return P(t)}},{Field_Name:"Pending",ColumnHeader:"Pending",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:t}=e;return P(t)}},{Field_Name:"Remarks",ColumnHeader:"Remarks",Fied_Data:"string",isVisible:1,tdClass:e=>{let{row:t}=e;return P(t)}}],I.map((e,t)=>{var a;return(0,i.A)((0,i.A)({},e),{},{OrderBy:null!==(a=e.OrderBy)&&void 0!==a?a:t+1})})),title:"Payment Due",stateUrl:"purchase/invoice/paymentDue",stateGroup:"paymentDue",PDFPrintOption:!0,ExcelPrintOption:()=>(async(e,t)=>{if(!e||0===e.length)return void alert("No data to export");const a=[...t||[]].filter(e=>1===e.isVisible||!0===e.isVisible).sort((e,t)=>(e.OrderBy||0)-(t.OrderBy||0));if(0===a.length)return void alert("No columns visible to export");const i=new(s().Workbook),l=i.addWorksheet("Payment Due"),r=a.map(e=>e.ColumnHeader||e.Field_Name);l.addRow(r),l.getRow(1).eachCell(e=>{e.font={bold:!0},e.alignment={horizontal:"center",vertical:"middle"},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},e.border={top:{style:"thin"},left:{style:"thin"},right:{style:"thin"},bottom:{style:"thin"}}});let n=0,d=0,c=0,m=0,u=0;e.forEach(e=>{e._isHeader?(n+=Number(e.BillAmt||0),d+=Number(e.Paid||0),c+=Number(e.Pending||0)):(m+=Number(e.KGS||0),u+=Number(e.Bags||0));const t=a.map(t=>{const a=e[t.Field_Name];return"date"===t.Fied_Data&&a?new Date(a).toLocaleDateString("en-GB"):void 0!==a&&null!==a?a:""});l.addRow(t).eachCell((i,l)=>{let r=t[l-1];i.border={top:{style:"thin"},left:{style:"thin"},right:{style:"thin"},bottom:{style:"thin"}},i.alignment={vertical:"middle",horizontal:"number"===typeof r||"number"===a[l-1].Fied_Data&&!isNaN(Number(r))?"right":"left"},e._isHeader?i.font={bold:!0,color:{argb:"1F4E79"}}:i.font={color:{argb:"000000"}}})});const h=a.map(e=>"KGS"===e.Field_Name?m:"Bags"===e.Field_Name?u:"BillAmt"===e.Field_Name?n:"Paid"===e.Field_Name?d:"Pending"===e.Field_Name?c:""),b=a.findIndex(e=>"RetailerName"===e.Field_Name);if(-1!==b)h[b]="OVERALL TOTAL";else{const e=a.findIndex(e=>["KGS","Bags","BillAmt"].includes(e.Field_Name));e>0?h[e-1]="OVERALL TOTAL":h[0]="OVERALL TOTAL"}l.addRow(h).eachCell(e=>{e.font={bold:!0},e.alignment={horizontal:"center",vertical:"middle"},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"C6E0B4"}},e.border={top:{style:"thin"},left:{style:"thin"},right:{style:"thin"},bottom:{style:"thin"}}}),l.columns=a.map(e=>{let t=15;return"SNo"===e.Field_Name&&(t=6),"Con"===e.Field_Name&&(t=15),"DueDate"!==e.Field_Name&&"invoiceDate"!==e.Field_Name||(t=12),"RetailerName"===e.Field_Name&&(t=45),"KGS"!==e.Field_Name&&"Bags"!==e.Field_Name&&"Rate"!==e.Field_Name&&"DIS"!==e.Field_Name||(t=10),"invoiceNumber"!==e.Field_Name&&"voucherType"!==e.Field_Name||(t=18),"Remarks"===e.Field_Name&&(t=20),{width:t}});const p=await i.xlsx.writeBuffer();(0,o.saveAs)(new Blob([p]),"Payment_Due.xlsx")})(w,B),MenuButtons:[],initialPageCount:20,CellSize:"small",maxHeightOption:!0,bodyFontSizePx:12,headerFontSizePx:12,enableGlobalSearch:!0,loadingOn:t,loadingOff:a,onFilteredDataChange:(e,t)=>{E(e),t&&k(t)},ButtonArea:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.A,{onClick:()=>S(!0),title:"Custom Order",children:(0,b.jsx)(p,{})}),(0,b.jsx)(m.A,{onClick:()=>H((0,i.A)((0,i.A)({},O),{},{filterDialog:!0})),children:(0,b.jsx)(g.A,{})})]})}),(0,b.jsx)(u.A,{open:_,onClose:()=>S(!1),title:"Custom Order Invoices",maxWidth:"lg",fullWidth:!0,onSubmit:()=>{const e=[...y].sort((e,t)=>(parseInt(e.customOrder)||Number.MAX_SAFE_INTEGER)-(parseInt(t.customOrder)||Number.MAX_SAFE_INTEGER));D(e),C(v(e)),S(!1)},children:(0,b.jsx)("div",{className:"table-responsive",style:{maxHeight:"60vh"},children:(0,b.jsxs)("table",{className:"table table-bordered table-sm text-center align-middle",children:[(0,b.jsx)("thead",{className:"table-light sticky-top",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"fa-12",children:"Invoice Number"}),(0,b.jsx)("th",{className:"fa-12",children:"Date"}),(0,b.jsx)("th",{className:"fa-12",children:"Retailer"}),(0,b.jsx)("th",{className:"fa-12",children:"Value"}),(0,b.jsx)("th",{className:"fa-12",style:{width:"100px"},children:"Order"}),(0,b.jsx)("th",{className:"fa-12",style:{width:"50px"},children:"Action"})]})}),(0,b.jsxs)("tbody",{children:[y.map((e,t)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"fa-12",children:e.invoiceNumber}),(0,b.jsx)("td",{className:"fa-12",children:new Date(e.invoiceDate).toLocaleDateString("en-GB")}),(0,b.jsx)("td",{className:"fa-12",children:e.retailerNameGet}),(0,b.jsx)("td",{className:"fa-12",children:(0,d.jG)(e.invoiceValue)}),(0,b.jsx)("td",{className:"fa-12",children:(0,b.jsx)("input",{type:"number",className:"cus-inpt text-center p-2",value:e.customOrder,onChange:e=>{const a=e.target.value;D(e=>{const i=[...e];return i[t].customOrder=a,i})}})}),(0,b.jsx)("td",{children:(0,b.jsx)(m.A,{color:"error",size:"small",onClick:()=>{D(e=>e.filter((e,a)=>a!==t))},children:(0,b.jsx)(N.A,{fontSize:"small"})})})]},e.invoiceId||t)),0===y.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:"6",children:"No invoices found"})})]})]})})}),(0,b.jsx)(u.A,{open:O.filterDialog,onClose:()=>H((0,i.A)((0,i.A)({},O),{},{filterDialog:!1})),title:"Filter",maxWidth:"sm",fullWidth:!0,onSubmit:()=>{(0,d.Mb)({Fromdate:null===O||void 0===O?void 0:O.Fromdate,Todate:O.Todate,VoucherType:O.VoucherType,pageID:n}),H(e=>(0,i.A)((0,i.A)({},e),{},{filterDialog:!1}))},children:(0,b.jsx)("div",{className:"table-responsive",children:(0,b.jsx)("table",{className:"table",children:(0,b.jsxs)("tbody",{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"From Date"}),(0,b.jsx)("td",{children:(0,b.jsx)("input",{type:"date",className:"cus-inpt",value:O.Fromdate,onChange:e=>H((0,i.A)((0,i.A)({},O),{},{Fromdate:e.target.value}))})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"To Date"}),(0,b.jsx)("td",{children:(0,b.jsx)("input",{type:"date",className:"cus-inpt",value:O.Todate,onChange:e=>H((0,i.A)((0,i.A)({},O),{},{Todate:e.target.value}))})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Voucher Type"}),(0,b.jsx)("td",{children:(0,b.jsx)(f.Ay,{value:O.VoucherType,onChange:e=>H((0,i.A)((0,i.A)({},O),{},{VoucherType:e})),options:[{value:"",label:"ALL"},...T.voucherType],styles:x.MR,menuPortalTarget:document.body,isSearchable:!0,filterOption:d.GI})})]})]})})})})]});var I}},51387:(e,t,a)=>{a.d(t,{A:()=>r});var i=a(59662),l=a(70579);const r=(0,i.A)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},63406:(e,t,a)=>{a.d(t,{zU:()=>s,ex:()=>o,MR:()=>n,Ap:()=>r,FX:()=>d});var i=a(89379);const l=a.p+"static/media/smt.aa4d4f940bbebff07a57.png",r={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},n={menu:(e,t)=>(0,i.A)((0,i.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,i.A)((0,i.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,i.A)((0,i.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,t)=>(0,i.A)((0,i.A)({},e),{},{backgroundColor:t.isSelected?"#2684FF":t.isFocused?"#E2ECF9":"white",color:t.isSelected?"white":"#333",padding:"10px 12px"})},s=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],o=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:l,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],d=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]}}]);
//# sourceMappingURL=7913.d7559317.chunk.js.map