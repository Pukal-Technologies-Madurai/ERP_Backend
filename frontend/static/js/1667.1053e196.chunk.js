"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1667],{63406(e,s,a){a.d(s,{zU:()=>n,ex:()=>r,MR:()=>d,Ap:()=>o,FX:()=>i});var t=a(89379);const l=a.p+"static/media/smt.aa4d4f940bbebff07a57.png",o={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},d={menu:(e,s)=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,s)=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:s.isSelected?"#2684FF":s.isFocused?"#E2ECF9":"white",color:s.isSelected?"white":"#333",padding:"10px 12px"})},n=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],r=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:l,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],i=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},79963(e,s,a){a.r(s),a.d(s,{default:()=>j});var t=a(89379),l=a(65043),o=a(83462),d=a(26600),n=a(35316),r=a(29347),i=a(11906),c=(a(92342),a(27285)),m=a(34625),p=a(3805),h=a(7807),u=a(83806),v=a(7204),g=a(63406),x=a(65074),N=a(70579);const j=()=>{var e,s,a,j,b;const _=localStorage.getItem("user"),k=JSON.parse(_),T={Emp_Id:"",Project_Id:0,Task_Id:0,Process_Id:0,from:(new Date).toISOString().split("T")[0],to:(new Date).toISOString().split("T")[0],EmpGet:"All Employee",ProjectGet:"All Project",TaskGet:"All Task",ProcessGet:"All Process"},[f,y]=(0,l.useState)([]),[D,E]=(0,l.useState)([]),[S,A]=(0,l.useState)([]),[C,I]=(0,l.useState)({}),[P,w]=(0,l.useState)({}),[M,R]=(0,l.useState)(""),[W,O]=(0,l.useState)(!1),[G,F]=(0,l.useState)(!1),[L,B]=(0,l.useState)(T),[z,U]=(0,l.useState)([]),[V,H]=(0,l.useState)([]),[J,Z]=(0,l.useState)([]),[K,Q]=(0,l.useState)("task"),[X,Y]=(0,l.useState)([]),q=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e)return s;try{const a=new Date(e);return isNaN(a.getTime())?s:a}catch(a){return s}},$=e=>{try{return q(e).toISOString().split("T")[0]}catch(s){return(new Date).toISOString().split("T")[0]}},ee=e=>{const s=((e,s)=>{const a=[],t=q(e),l=q(s);if(isNaN(l.getTime()))return[$(t)];const o=new Date(t);for(;o<=l;)a.push($(new Date(o))),o.setDate(o.getDate()+1);return a})(e.Est_Start_Dt||e.Task_Assign_dt,e.Est_End_Dt||e.Est_Start_Dt||e.Task_Assign_dt);return s.filter(e=>0!==new Date(e).getDay()).map(s=>(0,t.A)((0,t.A)({},e),{},{workType:"assigned",Work_Dt:s,Task_Name:e.Task_Name,EmployeeName:e.EmployeeName,Emp_Id:e.Emp_Id||e.Assigned_Emp_Id,Process_Name:e.Process_Name||"Not Specified",Project_Name:e.Project_Name,Start_Time:e.Sch_Time||"08:00:00",End_Time:e.EN_Time||"17:00:00",Tot_Minutes:e.Tot_Minutes||60,Work_Done:e.Task_Desc||"Assigned Task",WorkStatus:"Assigned",AN_No:e.AN_No,Sch_Period:e.Sch_Period,Est_Start_Dt:e.Est_Start_Dt,Est_End_Dt:e.Est_End_Dt,isDateRangeEvent:!0,originalStartDate:e.Est_Start_Dt,originalEndDate:e.Est_End_Dt}))};(0,l.useEffect)(()=>{let e="taskManagement/task/work?Emp_Id=".concat(L.Emp_Id,"&Project_Id=").concat(L.Project_Id,"&from=").concat(L.from,"&to=").concat(L.to,"&Task_Id=").concat(L.Task_Id);"process"===K&&(e+="&Process_Id=".concat(L.Process_Id)),(0,x.z)({address:e}).then(e=>{if(e.success){console.log("Completed work raw data:",e.data);const s=e.data.map(e=>{return s=e,(0,t.A)((0,t.A)({},s),{},{workType:"completed",Work_Dt:s.Work_Dt,Task_Name:s.Task_Name,EmployeeName:s.EmployeeName,Emp_Id:s.Emp_Id,Process_Name:s.Process_Name,Project_Name:s.Project_Name,Start_Time:s.Start_Time,End_Time:s.End_Time,Tot_Minutes:s.Tot_Minutes,Work_Done:s.Work_Done,WorkStatus:s.WorkStatus,Work_Param:s.Work_Param||[],isDateRangeEvent:!1});var s});y(s)}}).catch(e=>console.error(e))},[L,K]),(0,l.useEffect)(()=>{let e="taskManagement/tasks/assignedTask?Emp_Id=".concat(L.Emp_Id,"&startDate=").concat(L.from,"&endDate=").concat(L.to);"process"===K&&(e+="&Process_Id=".concat(L.Process_Id)),(0,x.z)({address:e}).then(e=>{if(e.success){console.log("Assigned tasks raw data:",e.data);const s=e.data.flatMap(e=>ee(e));Y(s)}}).catch(e=>console.error(e))},[L,K]),(0,l.useEffect)(()=>{if(f.length>0||X.length>0){const e=[...f,...X];console.log("Combined data for grouping:",e);const s=se(e);E(s)}},[f,X]);const se=e=>{const s={};return e.forEach(e=>{const a=$(e.Work_Dt);if(s[a]||(s[a]={date:a,processes:[],totalMinutes:0,totalTasks:0,employees:new Set,employeeDetails:{},processCount:{},assignedTasks:0,completedTasks:0,assignedMinutes:0,completedMinutes:0}),e.Process_Name&&(s[a].processCount[e.Process_Name]||(s[a].processCount[e.Process_Name]=0),s[a].processCount[e.Process_Name]++),s[a].processes.push(e),"completed"===e.workType)s[a].completedTasks++,s[a].completedMinutes+=parseInt(e.Tot_Minutes)||0,s[a].totalMinutes+=parseInt(e.Tot_Minutes)||0;else{s[a].assignedTasks++;const t=parseInt(e.Tot_Minutes)||60;s[a].assignedMinutes+=t,s[a].totalMinutes+=t}if(s[a].totalTasks++,e.EmployeeName&&e.Emp_Id){s[a].employees.add(e.EmployeeName);const t=e.Emp_Id.toString();s[a].employeeDetails[t]||(s[a].employeeDetails[t]={id:t,name:e.EmployeeName,tasks:[],totalMinutes:0,assignedTasks:0,completedTasks:0}),s[a].employeeDetails[t].tasks.push(e),"completed"===e.workType?(s[a].employeeDetails[t].totalMinutes+=parseInt(e.Tot_Minutes)||0,s[a].employeeDetails[t].completedTasks++):(s[a].employeeDetails[t].assignedTasks++,s[a].employeeDetails[t].totalMinutes+=parseInt(e.Tot_Minutes)||60)}}),Object.values(s).map(e=>(0,t.A)((0,t.A)({},e),{},{employeeCount:e.employees.size,topProcesses:Object.entries(e.processCount).sort((e,s)=>s[1]-e[1]).slice(0,3).map(e=>{let[s,a]=e;return"".concat(s," (").concat(a,")")}).join(", "),employeesList:Object.values(e.employeeDetails)}))},ae=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"08:00:00";if(!e||"string"!==typeof e)return s;const a=e.split(":");if(a.length>=2){const e=a[0].padStart(2,"0"),s=a[1].padStart(2,"0");return"".concat(e,":").concat(s,":00")}return s},te=e=>{if(!e)return"N/A";try{const s=e.split(":"),a=parseInt(s[0]),t=parseInt(s[1]);if(isNaN(a)||isNaN(t))return"N/A";let l=a%12;l=l||12;const o=a<12?"AM":"PM",d=t<10?"0"+t:t;return"".concat(l<10?"0"+l:l,":").concat(d," ").concat(o)}catch(s){return"N/A"}},le=()=>P&&P.processes?M?P.processes.filter(e=>e.Emp_Id&&e.Emp_Id.toString()===M.toString()):P.processes:[];function oe(e){const s=Math.floor(e/60),a=e%60;return s>0?"".concat(s,"h ").concat(a,"m"):"".concat(a,"m")}(0,l.useEffect)(()=>{(0,x.z)({address:"taskManagement/project/dropDown?Company_id=".concat(null===k||void 0===k?void 0:k.Company_id)}).then(e=>{e.success&&U(e.data)}).catch(e=>console.error(e)),(0,x.z)({address:"masters/users/employee/dropDown?BranchId=".concat(null===k||void 0===k?void 0:k.BranchId,"&Company_id=").concat(null===k||void 0===k?void 0:k.Company_id)}).then(e=>{var s;e.success&&H(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.sort((e,s)=>String(null===e||void 0===e?void 0:e.Name).localeCompare(null===s||void 0===s?void 0:s.Name)))}).catch(e=>console.error(e)),(0,x.z)({address:"taskManagement/task/assignEmployee/task/dropDown"}).then(e=>{var s;e.success&&Z(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.sort((e,s)=>String(null===e||void 0===e?void 0:e.Task_Name).localeCompare(null===s||void 0===s?void 0:s.Task_Name)))}).catch(e=>console.error(e)),(0,x.z)({address:"taskManagement/processMaster/dropDown"}).then(e=>{e.success&&A(e.data)}).catch(e=>console.error(e))},[null===k||void 0===k?void 0:k.BranchId,null===k||void 0===k?void 0:k.Company_id]);le().reduce((e,s)=>e+(parseInt(s.Tot_Minutes)||("assigned"===s.workType?60:0)),0);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"row mb-3",children:(0,N.jsx)("div",{className:"col-12 d-flex justify-content-center",children:(0,N.jsxs)("div",{className:"toggle-container bg-light rounded-pill p-1 d-flex",children:[(0,N.jsx)("button",{className:"btn rounded-pill px-4 ".concat("task"===K?"btn-primary":"btn-light"),onClick:()=>Q("task"),children:"Task View"}),(0,N.jsx)("button",{className:"btn rounded-pill px-4 ".concat("process"===K?"btn-primary":"btn-light"),onClick:()=>Q("process"),children:"Process View"})]})})}),(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,N.jsx)(v.Ay,{value:{value:null===L||void 0===L?void 0:L.Emp_Id,label:null===L||void 0===L?void 0:L.EmpGet},onChange:e=>B((0,t.A)((0,t.A)({},L),{},{Emp_Id:e.value,EmpGet:e.label})),options:[{value:"",label:"All Employee"},...V.map(e=>({value:e.UserId,label:e.Name}))],styles:g.MR,isSearchable:!0,placeholder:"Employee Name"})}),(0,N.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,N.jsx)(v.Ay,{value:{value:null===L||void 0===L?void 0:L.Project_Id,label:null===L||void 0===L?void 0:L.ProjectGet},onChange:e=>B((0,t.A)((0,t.A)({},L),{},{Project_Id:e.value,ProjectGet:e.label})),options:[...z.map(e=>({value:e.Project_Id,label:0===Number(e.Project_Id)?"All Project":e.Project_Name}))],styles:g.MR,isSearchable:!0,placeholder:"Project Title"})}),"task"===K&&(0,N.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,N.jsx)(v.Ay,{value:{value:null===L||void 0===L?void 0:L.Task_Id,label:null===L||void 0===L?void 0:L.TaskGet},onChange:e=>B((0,t.A)((0,t.A)({},L),{},{Task_Id:e.value,TaskGet:e.label})),options:[{value:0,label:"All Task"},...J.map(e=>({value:e.Task_Id,label:e.Task_Name}))],styles:g.MR,isSearchable:!0,placeholder:"Select Task"})}),"process"===K&&(0,N.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,N.jsx)(v.Ay,{value:{value:null===L||void 0===L?void 0:L.Process_Id,label:null===L||void 0===L?void 0:L.ProcessGet},onChange:e=>B((0,t.A)((0,t.A)({},L),{},{Process_Id:e.value,ProcessGet:e.label})),options:[{value:0,label:"All Process"},...S.map(e=>({value:e.Id,label:e.Process_Name}))],styles:g.MR,isSearchable:!0,placeholder:"Select Process"})})]}),(0,N.jsxs)("div",{className:"px-3 py-2 calendar",children:[(0,N.jsx)("h4",{className:"mb-3 text-center text-primary",children:"task"===K?"Task Calendar - Parallel View (Green: Assigned, Red: Completed)":"Process Timeline (Green: More Assigned, Red: More Completed)"}),(0,N.jsx)(c.A,{plugins:[p.A,u.A,m.A,h.Ay],initialView:"dayGridMonth",initialDate:new Date,events:"task"===K?(()=>{const e=[],s={};return f.forEach(e=>{const a=$(e.Work_Dt);s[a]||(s[a]={date:a,assigned:[],completed:[]}),s[a].completed.push(e)}),X.forEach(e=>{const a=$(e.Work_Dt);s[a]||(s[a]={date:a,assigned:[],completed:[]}),s[a].assigned.push(e)}),Object.values(s).forEach(s=>{const{date:a,assigned:t,completed:l}=s;if(t.length>0){const s=t.reduce((e,s)=>e+(parseInt(s.Tot_Minutes)||60),0);e.push({start:a,allDay:!0,display:"background",backgroundColor:"#28a745",borderColor:"#28a745",textColor:"white",extendedProps:{type:"assigned-summary",date:a,tasks:t,count:t.length,totalMinutes:s},classNames:["assigned-column"]})}if(l.length>0){const s=l.reduce((e,s)=>e+(parseInt(s.Tot_Minutes)||0),0);e.push({start:a,allDay:!0,display:"background",backgroundColor:"#dc3545",borderColor:"#dc3545",textColor:"white",extendedProps:{type:"completed-summary",date:a,tasks:l,count:l.length,totalMinutes:s},classNames:["completed-column"]})}t.forEach(s=>{const a=$(s.Work_Dt),t=ae(s.Start_Time,"08:00:00"),l=ae(s.End_Time,"17:00:00");e.push({title:"\ud83d\udccb ".concat(s.Task_Name),start:"".concat(a,"T").concat(t),end:"".concat(a,"T").concat(l),objectData:s,backgroundColor:"#28a745",borderColor:"#28a745",textColor:"white",extendedProps:{objectData:s,isDateRangeEvent:s.isDateRangeEvent,type:"assigned-detail"}})}),l.forEach(s=>{const a=$(s.Work_Dt),t=ae(s.Start_Time,"08:00:00"),l=ae(s.End_Time,"17:00:00");e.push({title:"\u2705 ".concat(s.Task_Name),start:"".concat(a,"T").concat(t),end:"".concat(a,"T").concat(l),objectData:s,backgroundColor:"#dc3545",borderColor:"#dc3545",textColor:"white",extendedProps:{objectData:s,isDateRangeEvent:s.isDateRangeEvent,type:"completed-detail"}})})}),e})():D.map(e=>{const s=$(e.date);return{title:"".concat(e.assignedTasks,"A/").concat(e.completedTasks,"C | ").concat(e.totalMinutes,"m | ").concat(e.employeeCount," emp"),start:s,allDay:!0,objectData:e,backgroundColor:e.assignedTasks>e.completedTasks?"#28a745":"#dc3545",borderColor:e.assignedTasks>e.completedTasks?"#28a745":"#dc3545"}}),headerToolbar:{left:"prev next",center:"title",right:"timeGridDay, timeGridWeek, dayGridMonth, listMonth"},slotDuration:"00:20:00",slotMinTime:"08:00:00",slotMaxTime:"22:00:00",showNonCurrentDates:!1,editable:!1,selectMirror:!0,eventClick:e=>{if("task"===K){const s=e.event.extendedProps;if("assigned-summary"===s.type||"completed-summary"===s.type){const e=s.date,a=[...f,...X].filter(s=>$(s.Work_Dt)===e),t={date:e,processes:a,assignedTasks:"assigned-summary"===s.type?s.tasks:[],completedTasks:"completed-summary"===s.type?s.tasks:[],totalTasks:a.length,employeeCount:new Set(a.map(e=>e.Emp_Id)).size};w(t),R(""),F(!0)}else{const e=s.objectData;I(e),O(!0)}}else{const s=e.event.extendedProps.objectData;w(s),R(""),F(!0)}},dateClick:e=>{if("process"===K){const s=e.dateStr,a=D.find(e=>e.date===s);a&&(w(a),R(""),F(!0))}},datesSet:e=>{B(s=>(0,t.A)((0,t.A)({},s),{},{from:e.startStr.split("T")[0],to:e.endStr.split("T")[0]}))},height:1200,eventDisplay:"block",eventOrder:"start,-duration,allDay"})]}),(0,N.jsxs)(o.A,{open:W,maxWidth:"sm",fullWidth:!0,onClose:()=>{O(!1),I({})},children:[(0,N.jsxs)(d.A,{className:"fa-18",children:["Task Details - ","assigned"===(null===C||void 0===C?void 0:C.workType)?"Assigned Task":"Completed Work",(null===C||void 0===C?void 0:C.isDateRangeEvent)&&" (Date Range)"]}),(0,N.jsx)(n.A,{className:"pb-0",children:(0,N.jsx)("div",{className:"table-responsive pb-0",children:(0,N.jsx)("table",{className:"table mb-0",children:(0,N.jsxs)("tbody",{children:[(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Work Type"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(0,N.jsxs)("span",{className:"badge ".concat("assigned"===(null===C||void 0===C?void 0:C.workType)?"bg-success":"bg-danger"),children:["assigned"===(null===C||void 0===C?void 0:C.workType)?"Assigned":"Completed",(null===C||void 0===C?void 0:C.isDateRangeEvent)&&" (Date Range)"]})})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Employee Name"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:null===C||void 0===C?void 0:C.EmployeeName})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Task"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:null===C||void 0===C?void 0:C.Task_Name})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Process Name"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:null===C||void 0===C?void 0:C.Process_Name})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Project"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:null===C||void 0===C?void 0:C.Project_Name})]}),"assigned"===(null===C||void 0===C?void 0:C.workType)?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Display Date"}),(0,N.jsxs)("td",{className:"border-1 fa-14",children:[(null===C||void 0===C?void 0:C.Work_Dt)&&new Date(null===C||void 0===C?void 0:C.Work_Dt).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),(null===C||void 0===C?void 0:C.isDateRangeEvent)&&" (Part of Date Range)"]})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Date Range"}),(0,N.jsxs)("td",{className:"border-1 fa-14",children:[(null===C||void 0===C?void 0:C.originalStartDate)&&new Date(null===C||void 0===C?void 0:C.originalStartDate).toLocaleDateString("en-IN")," to ",(null===C||void 0===C?void 0:C.originalEndDate)&&new Date(null===C||void 0===C?void 0:C.originalEndDate).toLocaleDateString("en-IN")]})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Scheduled Time"}),(0,N.jsxs)("td",{className:"border-1 fa-14",children:[(null===C||void 0===C?void 0:C.Sch_Time)&&te(null===C||void 0===C?void 0:C.Sch_Time)," - ",(null===C||void 0===C?void 0:C.EN_Time)&&te(null===C||void 0===C?void 0:C.EN_Time)]})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Task Description"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(null===C||void 0===C?void 0:C.Task_Desc)||"N/A"})]})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Date"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(null===C||void 0===C?void 0:C.Work_Dt)&&new Date(null===C||void 0===C?void 0:C.Work_Dt).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Start Time"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(null===C||void 0===C?void 0:C.Start_Time)&&te(null===C||void 0===C?void 0:C.Start_Time)})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"End Time"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(null===C||void 0===C?void 0:C.End_Time)&&te(null===C||void 0===C?void 0:C.End_Time)})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Work Done"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(null===C||void 0===C?void 0:C.Work_Done)||"N/A"})]})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Duration"}),(0,N.jsxs)("td",{className:"border-1 fa-14",children:[(null===C||void 0===C?void 0:C.Tot_Minutes)||("assigned"===(null===C||void 0===C?void 0:C.workType)?"60 (Estimated)":"0")," Minutes"]})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"Status"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:(null===C||void 0===C?void 0:C.WorkStatus)||("assigned"===(null===C||void 0===C?void 0:C.workType)?"Assigned":"Completed")})]}),"assigned"===(null===C||void 0===C?void 0:C.workType)&&(null===C||void 0===C?void 0:C.AN_No)&&(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:"AN Number"}),(0,N.jsx)("td",{className:"border-1 fa-14",children:null===C||void 0===C?void 0:C.AN_No})]}),"completed"===(null===C||void 0===C?void 0:C.workType)&&(null===C||void 0===C||null===(e=C.Work_Param)||void 0===e?void 0:e.length)>0&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:2,className:"border-1 fa-14 text-center text-uppercase fw-bold",children:"Work Parameters"})}),null===C||void 0===C||null===(s=C.Work_Param)||void 0===s?void 0:s.map((e,s)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"border-1 fa-14",children:null===e||void 0===e?void 0:e.Paramet_Name}),(0,N.jsx)("td",{className:"border-1 fa-14",children:null===e||void 0===e?void 0:e.Current_Value})]},s))]})]})})})}),(0,N.jsx)(r.A,{children:(0,N.jsx)(i.A,{onClick:()=>{O(!1),I({})},children:"close"})})]}),(0,N.jsxs)(o.A,{open:G,maxWidth:"lg",fullWidth:!0,onClose:()=>{F(!1),w({}),R("")},children:[(0,N.jsxs)(d.A,{className:"fa-18",children:["Daily Summary - ",(null===P||void 0===P?void 0:P.date)&&new Date(P.date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})]}),(0,N.jsxs)(n.A,{className:"pb-0",children:[(0,N.jsx)("div",{className:"row mb-3",children:(0,N.jsxs)("div",{className:"col-md-6",children:[(0,N.jsx)("label",{className:"form-label fw-bold",children:"Select Employee:"}),(0,N.jsx)(v.Ay,{value:M?{value:M,label:(null===(a=P.employeeDetails)||void 0===a||null===(j=a[M])||void 0===j?void 0:j.name)||"Unknown Employee"}:{value:"",label:"All Employees"},onChange:e=>R(e.value),options:[{value:"",label:"All Employees"},...(null===(b=P.employeesList)||void 0===b?void 0:b.map(e=>({value:e.id,label:"".concat(e.name," (").concat(e.assignedTasks||0,"A/").concat(e.completedTasks||0,"C)")})))||[]],styles:g.MR,isSearchable:!0,placeholder:"Select Employee"})]})}),(0,N.jsxs)("div",{className:"row mb-3",children:[(0,N.jsx)("div",{className:"col-md-4",children:(0,N.jsx)("div",{className:"card bg-light",children:(0,N.jsxs)("div",{className:"card-body text-center p-2",children:[(0,N.jsx)("h6",{className:"card-title mb-1",children:"Total Tasks"}),(0,N.jsx)("p",{className:"card-text h4 text-primary mb-0",children:le().length})]})})}),(0,N.jsx)("div",{className:"col-md-4",children:(0,N.jsx)("div",{className:"card bg-light",children:(0,N.jsxs)("div",{className:"card-body text-center p-2",children:[(0,N.jsx)("h6",{className:"card-title mb-1",children:"Assigned Tasks"}),(0,N.jsx)("p",{className:"card-text h4 text-success mb-0",children:le().filter(e=>"assigned"===e.workType).length})]})})}),(0,N.jsx)("div",{className:"col-md-4",children:(0,N.jsx)("div",{className:"card bg-light",children:(0,N.jsxs)("div",{className:"card-body text-center p-2",children:[(0,N.jsx)("h6",{className:"card-title mb-1",children:"Completed Tasks"}),(0,N.jsx)("p",{className:"card-text h4 text-danger mb-0",children:le().filter(e=>"completed"===e.workType).length})]})})})]}),(0,N.jsxs)("div",{className:"row mb-3",children:[(0,N.jsx)("div",{className:"col-md-6",children:(0,N.jsx)("div",{className:"card bg-success bg-opacity-10",children:(0,N.jsxs)("div",{className:"card-body text-center p-2",children:[(0,N.jsx)("h6",{className:"card-title mb-1 text-success",children:"Assigned Duration"}),(0,N.jsx)("p",{className:"card-text h4 text-success mb-0",children:oe(le().filter(e=>"assigned"===e.workType).reduce((e,s)=>e+(parseInt(s.Tot_Minutes)||60),0))}),(0,N.jsxs)("small",{className:"text-muted",children:[le().filter(e=>"assigned"===e.workType).length," tasks"]})]})})}),(0,N.jsx)("div",{className:"col-md-6",children:(0,N.jsx)("div",{className:"card bg-danger bg-opacity-10",children:(0,N.jsxs)("div",{className:"card-body text-center p-2",children:[(0,N.jsx)("h6",{className:"card-title mb-1 text-danger",children:"Completed Duration"}),(0,N.jsx)("p",{className:"card-text h4 text-danger mb-0",children:oe(le().filter(e=>"completed"===e.workType).reduce((e,s)=>e+(parseInt(s.Tot_Minutes)||0),0))}),(0,N.jsxs)("small",{className:"text-muted",children:[le().filter(e=>"completed"===e.workType).length," tasks"]})]})})})]}),(0,N.jsx)("div",{className:"table-responsive pb-0",children:(0,N.jsxs)("table",{className:"table table-bordered mb-0",children:[(0,N.jsx)("thead",{className:"bg-light",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"fa-14",children:"#"}),(0,N.jsx)("th",{className:"fa-14",children:"Type"}),(0,N.jsx)("th",{className:"fa-14",children:"Employee"}),(0,N.jsx)("th",{className:"fa-14",children:"Task"}),(0,N.jsx)("th",{className:"fa-14",children:"Process"}),(0,N.jsx)("th",{className:"fa-14",children:"Project"}),(0,N.jsx)("th",{className:"fa-14",children:"Time"}),(0,N.jsx)("th",{className:"fa-14",children:"Duration"}),(0,N.jsx)("th",{className:"fa-14",children:"Description"})]})}),(0,N.jsx)("tbody",{children:0===le().length?(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:"9",className:"text-center fa-14 py-3",children:"No tasks found for the selected criteria"})}):le().map((e,s)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"fa-13",children:s+1}),(0,N.jsx)("td",{className:"fa-13",children:(0,N.jsxs)("span",{className:"badge ".concat("assigned"===e.workType?"bg-success":"bg-danger"),children:["assigned"===e.workType?"Assigned":"Completed",e.isDateRangeEvent&&" \ud83d\udcc5"]})}),(0,N.jsx)("td",{className:"fa-13",children:e.EmployeeName}),(0,N.jsx)("td",{className:"fa-13",children:e.Task_Name}),(0,N.jsx)("td",{className:"fa-13",children:e.Process_Name}),(0,N.jsx)("td",{className:"fa-13",children:e.Project_Name}),(0,N.jsx)("td",{className:"fa-13",children:"completed"===e.workType?(0,N.jsxs)(N.Fragment,{children:[e.Start_Time&&te(e.Start_Time)," - ",e.End_Time&&te(e.End_Time)]}):(0,N.jsxs)(N.Fragment,{children:[e.Sch_Time&&te(e.Sch_Time)," - ",e.EN_Time&&te(e.EN_Time),e.isDateRangeEvent&&" (Range)"]})}),(0,N.jsxs)("td",{className:"fa-13",children:[e.Tot_Minutes||("assigned"===e.workType?"60":"0")," mins"]}),(0,N.jsxs)("td",{className:"fa-13",children:["completed"===e.workType?e.Work_Done:e.Task_Desc,e.isDateRangeEvent&&" (Date Range: ".concat(e.originalStartDate&&new Date(e.originalStartDate).toLocaleDateString("en-IN")," to ").concat(e.originalEndDate&&new Date(e.originalEndDate).toLocaleDateString("en-IN"),")")]})]},s))})]})})]}),(0,N.jsx)(r.A,{children:(0,N.jsx)(i.A,{onClick:()=>{F(!1),w({}),R("")},children:"close"})})]})]})}}}]);
//# sourceMappingURL=1667.1053e196.chunk.js.map