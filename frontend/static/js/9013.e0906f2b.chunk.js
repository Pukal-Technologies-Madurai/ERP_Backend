"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[9013],{36225(e,s,t){t.r(s),t.d(s,{default:()=>X});var l=t(65043),a=t(85051),d=t(78973),r=t(17962),n=t(92021),o=t(60397),i=t(49804),c=t(83005),h=t(74605),m=t(4598),u=t(12110),x=t(26494),v=t(79958),j=t(63336),N=t(89379),b=t(67929),p=t(83462),f=t(26600),g=t(11906),S=t(35316),y=t(29347),A=t(93141),C=t(11238);const T=t.p+"static/media/ic_launcher.aa4d4f940bbebff07a57.png";var _=t(65074),I=t(70579);const D=()=>{var e,s,t,a,d,r,n,o,i,c;const h=JSON.parse(localStorage.getItem("user")),[m,u]=(0,l.useState)(!1),[x,v]=(0,l.useState)([]),j=null===h||void 0===h?void 0:h.UserId,[D,k]=(0,l.useState)(0),[w,L]=(0,l.useState)(!1),[E,z]=(0,l.useState)([]),[R,U]=(0,l.useState)({}),O=new Date,P=new Date(O.getFullYear(),O.getMonth(),2),[B,V]=(0,l.useState)({from:P.toISOString().split("T")[0],to:(new Date).toISOString().split("T")[0]}),M=T,[F,W]=(0,l.useState)({debit:0,credit:0}),J=(0,l.useRef)();(0,l.useEffect)(()=>{(0,_.z)({address:"userModule/customer/getBalance?UserId=".concat(j)}).then(e=>{if("Success"===e.status){var s;v(e.data);let t=0;null===(s=e.data)||void 0===s||s.forEach(e=>{t+=Number(e.Bal_Amount)}),k(t)}null!==e&&void 0!==e&&e.isCustomer?u(!0):u(!1)}).catch(e=>console.error(e))},[]);const K=(e,s)=>{var t,l,a;let d;d=s&&1===s?R:e,U(d),L(!0),(0,_.z)({address:"userModule/customer/StatementOfAccound?Cust_Id=".concat(null===(t=d)||void 0===t?void 0:t.Cust_Id,"&Acc_Id=").concat(null===(l=d)||void 0===l?void 0:l.tally_id,"&Company_Id=").concat(null===(a=d)||void 0===a?void 0:a.Company_Id,"&Fromdate=").concat(null===B||void 0===B?void 0:B.from,"&Todate=").concat(null===B||void 0===B?void 0:B.to)}).then(e=>{var s;z(e.data);let t={debit:0,credit:0};null===e||void 0===e||null===(s=e.data)||void 0===s||s.forEach(e=>{t.debit+=Number(e.Debit_Amt),t.credit+=Number(e.Credit_Amt)}),W(t)}).catch(e=>console.error(e))},q=()=>{L(!1),z([]),U({}),V({from:P.toISOString().split("T")[0],to:(new Date).toISOString().split("T")[0]})},H=(0,A.useReactToPrint)({content:()=>J.current});return m?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"card",children:[(0,I.jsx)("div",{className:"card-header py-3 bg-white",children:(0,I.jsxs)("p",{className:"mb-0 fw-bold",children:[(0,I.jsxs)("span",{children:["Balance of ",null===h||void 0===h?void 0:h.Name]}),(0,I.jsxs)("span",{className:D>0?"text-primary":"text-danger",children:[" \xa0( ",D.toLocaleString("en-IN")+(D<0?" CR":" DR")," )"]})]})}),(0,I.jsx)("div",{className:"card-body p-0 table-responsive",children:(0,I.jsxs)("table",{className:"table",children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{style:{fontSize:"13px"},children:"S.No"}),(0,I.jsx)("th",{style:{fontSize:"13px"},children:" - "}),(0,I.jsx)("th",{style:{fontSize:"13px"},children:"Company"}),(0,I.jsx)("th",{style:{fontSize:"13px"},children:"Ledger"}),(0,I.jsx)("th",{style:{fontSize:"13px"},children:"Balance"}),(0,I.jsx)("th",{style:{fontSize:"13px"},children:"Dr/Cr"})]})}),(0,I.jsx)("tbody",{children:x.map((e,s)=>{var t;return(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{style:{fontSize:"13px"},children:s+1}),(0,I.jsx)("td",{style:{fontSize:"13px"},children:(0,I.jsx)("button",{className:"icon-btn",onClick:()=>{K(e)},children:(0,I.jsx)(b.A,{sx:{fontSize:"inherit"}})})}),(0,I.jsx)("td",{style:{fontSize:"13px"},children:null===e||void 0===e?void 0:e.Company_Name}),(0,I.jsx)("td",{style:{fontSize:"13px"},children:null===e||void 0===e?void 0:e.ledger_name}),(0,I.jsx)("td",{style:{fontSize:"13px"},children:null===e||void 0===e||null===(t=e.Bal_Amount)||void 0===t?void 0:t.toLocaleString("en-IN")}),(0,I.jsx)("td",{style:{fontSize:"13px"},children:null===e||void 0===e?void 0:e.CR_DR})]},s)})})]})})]}),(0,I.jsxs)(p.A,{open:w,onClose:q,fullScreen:!0,fullWidth:!0,children:[(0,I.jsxs)(f.A,{className:"border-bottom text-primary d-flex align-items-center fa-18",children:[(0,I.jsxs)("span",{className:"flex-grow-1",children:["Transaction Report of ",null===R||void 0===R?void 0:R.Customer_name]}),(0,I.jsx)(g.A,{className:"fw-bold",onClick:H,children:"PDF"}),(0,I.jsx)(g.A,{className:"ms-1 fw-bold",onClick:()=>{(e=>{const s=C.Wp.json_to_sheet(e),t=C.Wp.book_new();C.Wp.book_append_sheet(t,s,"Sheet1"),(0,C._h)(t,"erpsmt_SOA_".concat((new Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),".xlsx"))})(E.map((e,s)=>({Sno:s+1,Date:new Date(null===e||void 0===e?void 0:e.Ledger_Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),Purticular:null===e||void 0===e?void 0:e.Ledger_Desc,InvoiceNo:null===e||void 0===e?void 0:e.invoice_no,Debit:Boolean(Number(e.Debit_Amt))?e.Debit_Amt.toLocaleString("en-IN"):"",Credit:Boolean(Number(e.Credit_Amt))?e.Credit_Amt.toLocaleString("en-IN"):"",Company:null===e||void 0===e?void 0:e.Company_Name,Ledger:null===e||void 0===e?void 0:e.Ledger_Name,Mobile_Number:null===e||void 0===e?void 0:e.Mobile_no})))},children:"excel"})]}),(0,I.jsxs)(S.A,{className:"rounded-2 shadow m-4 mb-2 p-0",children:[(0,I.jsxs)("div",{className:"row align-content-center",children:[(0,I.jsx)("div",{className:"col-lg-1",children:(0,I.jsx)("img",{src:M,alt:"Company Logo",className:"smtlogo"})}),(0,I.jsx)("div",{className:"col-lg-4 p-2 ps-3",children:(0,I.jsx)("table",{className:"table border-0",children:(0,I.jsxs)("tbody",{children:[(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0",children:"Company"}),(0,I.jsx)("td",{className:"border-0",children:null===R||void 0===R?void 0:R.Company_Name})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0",children:"Ledger Name"}),(0,I.jsx)("td",{className:"border-0",children:null===R||void 0===R?void 0:R.ledger_name})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0",children:"Contact Person"}),(0,I.jsx)("td",{className:"border-0",children:null===(e=E[0])||void 0===e?void 0:e.Contact_Person})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0",children:"Mobile"}),(0,I.jsx)("td",{className:"border-0",children:null===(s=E[0])||void 0===s?void 0:s.Mobile_no})]})]})})}),(0,I.jsx)("div",{className:"col-lg-4 p-2",children:(0,I.jsx)("table",{className:"table",children:(0,I.jsxs)("tbody",{children:[(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0",children:"Opening Balnce"}),(0,I.jsx)("td",{className:"border-0 text-primary",children:(null===(t=E[0])||void 0===t?void 0:t.Debit_Amt)>0?(null===(a=E[0])||void 0===a?void 0:a.Debit_Amt.toLocaleString("en-IN"))+" DR":(null===(d=E[0])||void 0===d?void 0:d.Credit_Amt.toLocaleString("en-IN"))+" CR"})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0",children:"Closing Balance"}),(0,I.jsx)("td",{className:"border-0 text-primary",children:(null===F||void 0===F?void 0:F.debit)-(null===F||void 0===F?void 0:F.credit)<0?((null===F||void 0===F?void 0:F.debit)-(null===F||void 0===F?void 0:F.credit)).toLocaleString("en-IN")+" CR":((null===F||void 0===F?void 0:F.debit)-(null===F||void 0===F?void 0:F.credit)).toLocaleString("en-IN")+" DR"})]})]})})}),(0,I.jsx)("div",{className:"col-lg-3 p-2",children:(0,I.jsx)("table",{className:"table border-0",children:(0,I.jsxs)("tbody",{children:[(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0",children:"From :"}),(0,I.jsx)("td",{className:"p-0 border-0",children:(0,I.jsx)("input",{type:"date",className:"form-control w-auto ms-2",onChange:e=>V((0,N.A)((0,N.A)({},B),{},{from:e.target.value})),value:B.from})})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0",children:"To :"}),(0,I.jsx)("td",{className:"p-0 border-0",children:(0,I.jsx)("input",{type:"date",className:"form-control w-auto ms-2",onChange:e=>{B.from&&B.from<=e.target.value?V((0,N.A)((0,N.A)({},B),{},{to:e.target.value})):window.alert("Invald Date Range")},value:B.to,disabled:!B.from})})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0"}),(0,I.jsx)("td",{className:"border-0",children:(0,I.jsx)("button",{className:"btn text-white",style:{backgroundColor:"rgb(66, 34, 225)"},onClick:()=>{K("",1)},children:"Search"})})]})]})})})]}),(0,I.jsx)("div",{className:"p-2 table-responsive",children:(0,I.jsxs)("table",{className:"table",children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{className:"fa-13 tble-hed-stick",children:"-"}),(0,I.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Date"}),(0,I.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Particulars"}),(0,I.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Invoice No"}),(0,I.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Dr"}),(0,I.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Cr"})]})}),(0,I.jsx)("tbody",{children:E.map((e,s)=>(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"fa-13 bg-light",children:s+1}),(0,I.jsx)("td",{className:"fa-13 bg-light",children:new Date(null===e||void 0===e?void 0:e.Ledger_Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}),(0,I.jsx)("td",{className:"fa-13 bg-light",children:e.Ledger_Desc}),(0,I.jsx)("td",{className:"fa-13",children:e.invoice_no}),(0,I.jsx)("td",{className:"fa-13",children:e.Debit_Amt.toLocaleString("en-IN")}),(0,I.jsx)("td",{className:"fa-13 bg-light",children:e.Credit_Amt.toLocaleString("en-IN")})]},s))})]})}),(0,I.jsx)("div",{className:"d-none",children:(0,I.jsxs)("div",{className:"d-block px-5 py-2",ref:J,children:[(0,I.jsx)("img",{src:M,alt:"smtlogo",className:"smtlogo"}),(0,I.jsx)("table",{className:"table",children:(0,I.jsxs)("tbody",{children:[(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",children:"Company"}),(0,I.jsx)("td",{className:"border-0 fa-14 fw-bold",children:null===R||void 0===R?void 0:R.Company_Name})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",children:"Ledger Name"}),(0,I.jsx)("td",{className:"border-0 fa-14 fw-bold",children:null===R||void 0===R?void 0:R.ledger_name})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",children:"Contact Person"}),(0,I.jsx)("td",{className:"border-0 fa-14 fw-bold",children:null===(r=E[0])||void 0===r?void 0:r.Contact_Person})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",children:"Mobile"}),(0,I.jsx)("td",{className:"border-0 fa-14 fw-bold",children:null===(n=E[0])||void 0===n?void 0:n.Mobile_no})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",children:"From"}),(0,I.jsx)("td",{className:"border-0 fa-14 fw-bold",children:B.from})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",children:"To"}),(0,I.jsx)("td",{className:"border-0 fa-14 fw-bold",children:B.to})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",children:"Opening Balance"}),(0,I.jsx)("td",{className:"border-0 fa-14 fw-bold",children:(null===(o=E[0])||void 0===o?void 0:o.Debit_Amt)>0?(null===(i=E[0])||void 0===i?void 0:i.Debit_Amt.toLocaleString("en-IN"))+" DR":(null===(c=E[0])||void 0===c?void 0:c.Credit_Amt.toLocaleString("en-IN"))+" CR"})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"border-0 fa-14",children:"Closing Balance"}),(0,I.jsx)("td",{className:"border-0 fa-14 fw-bold",children:(null===F||void 0===F?void 0:F.debit)-(null===F||void 0===F?void 0:F.credit)<0?((null===F||void 0===F?void 0:F.debit)-(null===F||void 0===F?void 0:F.credit)).toLocaleString("en-IN")+" CR":((null===F||void 0===F?void 0:F.debit)-(null===F||void 0===F?void 0:F.credit)).toLocaleString("en-IN")+" DR"})]})]})}),(0,I.jsx)("div",{className:"p-2 table-responsive",children:(0,I.jsxs)("table",{className:"table",children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{className:"fa-13 tble-hed-stick",children:"-"}),(0,I.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Date"}),(0,I.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Particulars"}),(0,I.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Invoice No"}),(0,I.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Dr"}),(0,I.jsx)("th",{className:"fa-13 tble-hed-stick",children:"Cr"})]})}),(0,I.jsx)("tbody",{children:E.map((e,s)=>(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"fa-13 bg-light",children:s+1}),(0,I.jsx)("td",{className:"fa-13 bg-light",children:new Date(null===e||void 0===e?void 0:e.Ledger_Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}),(0,I.jsx)("td",{className:"fa-13 bg-light",children:e.Ledger_Desc}),(0,I.jsx)("td",{className:"fa-13",children:e.invoice_no}),(0,I.jsx)("td",{className:"fa-13",children:Boolean(Number(e.Debit_Amt))&&e.Debit_Amt.toLocaleString("en-IN")}),(0,I.jsx)("td",{className:"fa-13 bg-light",children:Boolean(Number(e.Credit_Amt))&&e.Credit_Amt.toLocaleString("en-IN")})]},s))})]})})]})})]}),(0,I.jsx)(y.A,{children:(0,I.jsx)(g.A,{onClick:q,variant:"contained",color:"error",children:"Close"})})]})]}):(0,I.jsx)(I.Fragment,{})};var k=t(97707),w=t(91036);const L=()=>{const e=JSON.parse(localStorage.getItem("user")),s={Latitude:null,Longitude:null,error:null,UserId:e.UserId,Description:"",dialog:!1},[t,a]=(0,l.useState)({}),[d,r]=(0,l.useState)(!1),[n,o]=(0,l.useState)(s);(0,l.useEffect)(()=>{a({}),(0,_.z)({address:"empAttendance/attendance?UserId=".concat(null===e||void 0===e?void 0:e.UserId)}).then(e=>{var s;null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.length)>0&&a(null===e||void 0===e?void 0:e.data[0])}).catch(e=>console.error(e))},[null===e||void 0===e?void 0:e.UserId,d]);const i=()=>{o(s)};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(u.A,{className:"col-xl-4    col-lg-6 col-md-6",children:[(0,I.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 border-bottom",children:[(0,I.jsx)("h5",{className:"mb-0",children:"Attendance"}),(0,I.jsx)(g.A,{variant:"outlined",onClick:()=>{(async()=>{try{const e=await new Promise((e,s)=>{navigator.geolocation.getCurrentPosition(e,s)}),{latitude:s,longitude:t}=e.coords;return o(e=>(0,N.A)((0,N.A)({},e),{},{Latitude:s,Longitude:t,error:null})),!0}catch(e){return e.code===e.PERMISSION_DENIED?(o(e=>(0,N.A)((0,N.A)({},e),{},{Latitude:null,Longitude:null,error:"Location access denied"})),w.oR.warn("Allow Location Access")):o(s=>(0,N.A)((0,N.A)({},s),{},{Latitude:null,Longitude:null,error:e.message})),!1}})().then(e=>{e?null!==n&&void 0!==n&&n.Latitude&&null!==n&&void 0!==n&&n.Longitude?(0,_.z)({address:"empAttendance/attendance",method:"POST",bodyData:{UserId:null===n||void 0===n?void 0:n.UserId,Latitude:null===n||void 0===n?void 0:n.Latitude,Longitude:null===n||void 0===n?void 0:n.Longitude}}).then(e=>{r(!d),e.success?w.oR.success(e.message):w.oR.error(e.message)}):w.oR.warn("Please Retry"):w.oR.error("There is a problem in get location")})},disabled:Boolean(null===t||void 0===t?void 0:t.Active_Status),children:"START Day"})]}),Boolean(null===t||void 0===t?void 0:t.Active_Status)&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(x.A,{children:(0,I.jsxs)("div",{className:"fw-bold text-muted",children:[(0,I.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,I.jsx)("span",{children:"Start Date"}),(0,I.jsx)("br",{}),(0,I.jsx)("span",{children:null!==t&&void 0!==t&&t.Start_Date?(0,k.yc)(null===t||void 0===t?void 0:t.Start_Date):" --:--:-- "})]}),(0,I.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,I.jsx)("span",{children:"In Time"}),(0,I.jsx)("span",{children:null!==t&&void 0!==t&&t.Start_Date?(0,k.JG)(null===t||void 0===t?void 0:t.Start_Date):" --:--:-- "})]})]})}),(0,I.jsx)("div",{className:"border-top p-3 d-flex justify-content-end",children:(0,I.jsx)(g.A,{variant:"outlined",onClick:()=>o(e=>(0,N.A)((0,N.A)({},e),{},{dialog:!0})),children:"End Day"})})]})]}),(0,I.jsxs)(p.A,{open:null===n||void 0===n?void 0:n.dialog,onClose:i,fullWidth:!0,maxWidth:"md",children:[(0,I.jsx)(f.A,{children:"Cloase Attendance"}),(0,I.jsxs)(S.A,{children:[(0,I.jsx)("label",{className:"mb-3",children:"Work Summary"}),(0,I.jsx)("textarea",{value:null===n||void 0===n?void 0:n.Description,className:"cus-inpt",rows:5,onChange:e=>o(s=>(0,N.A)((0,N.A)({},s),{},{Description:e.target.value})),placeholder:"Narrate the today's work summary"})]}),(0,I.jsxs)(y.A,{children:[(0,I.jsx)(g.A,{onClick:i,children:"Cancel"}),(0,I.jsx)(g.A,{variant:"outlined",onClick:()=>{(0,_.z)({address:"empAttendance/attendance",method:"PUT",bodyData:{Id:null===t||void 0===t?void 0:t.Id,Description:null===n||void 0===n?void 0:n.Description}}).then(e=>{e.success?(r(!d),w.oR.success(e.message),i()):w.oR.error(e.message)})},children:"Confirm"})]})]})]})};var E=t(15337),z=t(44676),R=t(16056),U=t(43283),O=t(68754),P=t(67957),B=t(45278),V=t(92874),M=t(32039),F=t(13479),W=t(17392),J=t(83002),K=t(23156);const q=[{actualName:"STOCKVALUE",str:"STOCKVALUE",icon:(0,I.jsx)(K.lHt,{style:{fontSize:"80px"}}),orderBy:1},{actualName:"SaleOrder",str:"SALE ORDER",icon:(0,I.jsx)(E.A,{style:{fontSize:"80px"}}),orderBy:2},{actualName:"SalesInvoice",str:"SALES INVOICE",icon:(0,I.jsx)(z.A,{style:{fontSize:"80px"}}),orderBy:3},{actualName:"PurchaseOrder",str:"PURCHASE ORDER",icon:(0,I.jsx)(R.A,{style:{fontSize:"80px"}}),orderBy:4},{actualName:"PurchaseInvoice",str:"PURCHASE INVOICE",icon:(0,I.jsx)(U.A,{style:{fontSize:"80px"}}),orderBy:5},{actualName:"EXPENCES",str:"EXPENCES",icon:(0,I.jsx)(J.Gne,{style:{fontSize:"80px"}}),orderBy:6},{actualName:"Payment",str:"PAYMENT",icon:(0,I.jsx)(O.A,{style:{fontSize:"80px"}}),orderBy:7},{actualName:"Receipt",str:"RECEIPT",icon:(0,I.jsx)(P.A,{style:{fontSize:"80px"}}),orderBy:8},{actualName:"Journal",str:"JOURNAL",icon:(0,I.jsx)(B.A,{style:{fontSize:"80px"}}),orderBy:9},{actualName:"StockJournal",str:"STOCK JOURNAL",icon:(0,I.jsx)(V.A,{style:{fontSize:"80px"}}),orderBy:10},{actualName:"Contra",str:"CONTRA",icon:(0,I.jsx)(M.A,{style:{fontSize:"80px"}}),orderBy:11}],H=()=>{const e=JSON.parse(localStorage.getItem("user")),s=2===Number(null===e||void 0===e?void 0:e.UserTypeId)||0===Number(null===e||void 0===e?void 0:e.UserTypeId)||1===Number(null===e||void 0===e?void 0:e.UserTypeId),[t,a]=(0,l.useState)([]),[d,r]=(0,l.useState)({EXPENCES:0,STOCKVALUE:0}),n="vctr text-white bg-transparent p-0",[o,i]=(0,l.useState)({date:(0,k.ny)(),reload:!1});return(0,l.useEffect)(()=>{s&&e.Company_id&&(a([]),(0,_.z)({address:"dashboard/dayBook?Fromdate=".concat(o.date,"&Todate=").concat(o.date),headers:{Db:e.Company_id}}).then(e=>{e.success&&a(e.data)}).catch(e=>console.error(e)))},[o.reload]),(0,l.useEffect)(()=>{s&&e.Company_id&&(0,_.z)({address:"dashboard/erp/dashboardData?Fromdate=".concat(null===o||void 0===o?void 0:o.date,"&Company_Id=").concat(e.Company_id)}).then(e=>{if(e.success){var s,t;const l=(0,k.Ro)(null===e||void 0===e||null===(s=e.data[1][0])||void 0===s?void 0:s.Total_Cost_Vlaue),a=(0,k.Ro)(null===e||void 0===e||null===(t=e.data[2][0])||void 0===t?void 0:t.Stock_Value);r(e=>(0,N.A)((0,N.A)({},e),{},{EXPENCES:l,STOCKVALUE:a}))}else r(e=>(0,N.A)((0,N.A)({},e),{},{EXPENCES:0,STOCKVALUE:0}))}).catch(e=>console.error(e))},[s,o.date]),s&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"d-flex align-items-center flex-wrap ",children:[(0,I.jsx)("input",{type:"date",className:"cus-inpt w-auto m-1",value:o.date,onChange:e=>i(s=>(0,N.A)((0,N.A)({},s),{},{date:e.target.value}))}),(0,I.jsx)(W.A,{size:"small",onClick:()=>i(e=>(0,N.A)((0,N.A)({},e),{},{reload:!e.reload})),children:(0,I.jsx)(F.A,{})})]}),(0,I.jsx)("div",{className:"p-1 row",children:q.map((e,s)=>{const l=(0,k.xL)(e.actualName,"EXPENCES")||(0,k.xL)(e.actualName,"STOCKVALUE")?{ModuleName:e.actualName,groupedData:[{VoucherBreakUpCount:0,Voucher_Type:"",ModuleName:e.actualName,Amount:d[e.str],navLink:"",dataSource:"TALLY"}]}:t.find(s=>s.ModuleName===e.actualName)||{ModuleName:e.actualName,groupedData:[]},a=(0,k.$r)(l.groupedData),r=a.filter(e=>(0,k.xL)(e.dataSource,"ERP")),o=a.filter(e=>(0,k.xL)(e.dataSource,"TALLY")),i=r.reduce((e,s)=>(0,k.Lr)(e,(null===s||void 0===s?void 0:s.Amount)||0),0),c=r.reduce((e,s)=>(0,k.Lr)(e,(null===s||void 0===s?void 0:s.VoucherBreakUpCount)||0),0),h=o.reduce((e,s)=>(0,k.Lr)(e,(null===s||void 0===s?void 0:s.Amount)||0),0),m=o.reduce((e,s)=>(0,k.Lr)(e,(null===s||void 0===s?void 0:s.VoucherBreakUpCount)||0),0);return(0,I.jsx)("div",{className:"col-xxl-3 col-lg-4 col-md-6 col-sm-12 p-2",children:(0,I.jsxs)("div",{className:"coloredDiv d-flex align-items-center text-light cus-shadow coloredDiv"+(s+7),children:[(0,I.jsxs)("div",{className:"flex-grow-1 p-3 table-responsive",children:[(0,I.jsx)("h5",{style:{fontSize:"18px"},children:e.str}),(0,I.jsx)("table",{className:"table table-borderless text-white",children:(0,I.jsxs)("tbody",{children:[(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"".concat(n," fa-13"),children:"ERP"}),(0,I.jsxs)("td",{className:"".concat(n," text-end"),children:[(0,I.jsx)("span",{className:"fa-19 me-1",children:(0,k.jG)(parseInt(i))}),(0,I.jsxs)("span",{className:"fa-11",children:["/ ",(0,k.jG)(parseInt(c))]})]})]}),(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"".concat(n," fa-13"),children:"TALLY"}),(0,I.jsxs)("td",{className:"".concat(n," text-end"),children:[(0,I.jsx)("span",{className:"fa-19 me-1",children:(0,k.jG)(parseInt(h))}),(0,I.jsxs)("span",{className:"fa-11",children:["/ ",(0,k.jG)(parseInt(m))]})]})]})]})})]}),e.icon]})},e.actualName)})})]})},G=e=>{let{loadingOn:s,loadingOff:t,reqDate:a=(0,k.ny)()}=e;const{user:d}=(0,k.aN)(),[r,n]=(0,l.useState)([]),[o,i]=(0,l.useState)({fetchReqDate:a});return(0,l.useEffect)(()=>{(0,k.vd)(o.fetchReqDate)&&(0,k.IQ)(d.UserId)&&(n([]),s&&s(),(0,_.z)({address:"dataEntry/costCenter/report/employee?userid=".concat(d.UserId,"&reqDate=").concat(o.fetchReqDate)}).then(e=>{e.success&&n(e.data)}).catch(e=>console.error(e)).finally(()=>{t&&t()}))},[o.fetchReqDate,d.UserId]),(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(u.A,{children:[(0,I.jsxs)("div",{className:"d-flex flex-wrap align-items-center border-bottom px-3 py-2",children:[(0,I.jsx)("span",{className:"flex-grow-1 fa-16",children:"ERP Activity"}),(0,I.jsx)("input",{type:"date",value:o.fetchReqDate,onChange:e=>i(s=>(0,N.A)((0,N.A)({},s),{},{fetchReqDate:e.target.value})),className:"cus-inpt w-auto p-2"})]}),(0,I.jsxs)("div",{className:"d-flex flex-wrap align-items-center px-3 py-2 fa-15",children:[(0,I.jsx)(u.A,{className:"mx-2",style:{minWidth:200},children:(0,I.jsxs)(x.A,{className:"d-flex flex-column align-items-center",children:[(0,I.jsx)("h4",{children:r.reduce((e,s)=>(0,k.Lr)(e,s.StockJournalTotal),0)}),(0,I.jsx)("h6",{children:"Stock Handled KGs"})]})}),(0,I.jsx)(u.A,{className:"mx-2",style:{minWidth:200},children:(0,I.jsxs)(x.A,{className:"d-flex flex-column align-items-center",children:[(0,I.jsx)("h4",{children:r.reduce((e,s)=>{var t;return(0,k.Lr)(e,null===s||void 0===s||null===(t=s.Stock_Journals)||void 0===t?void 0:t.length)},0)}),(0,I.jsx)("h6",{children:"Movement Activity"})]})}),(0,I.jsx)(u.A,{className:"mx-2",style:{minWidth:200},children:(0,I.jsxs)(x.A,{className:"d-flex flex-column align-items-center",children:[(0,I.jsx)("h4",{children:r.reduce((e,s)=>(0,k.Lr)(e,s.TripSheetTotal),0)}),(0,I.jsx)("h6",{children:"Trip Sheet KGs"})]})}),(0,I.jsx)(u.A,{className:"mx-2",style:{minWidth:200},children:(0,I.jsxs)(x.A,{className:"d-flex flex-column align-items-center",children:[(0,I.jsx)("h4",{children:r.reduce((e,s)=>{var t;return(0,k.Lr)(e,null===s||void 0===s||null===(t=s.Trip_Sheet)||void 0===t?void 0:t.length)},0)}),(0,I.jsx)("h6",{children:"Total Trips"})]})})]})]})})},X=e=>{let{loadingOn:s,loadingOff:t}=e;const N=JSON.parse(localStorage.getItem("user")),[b,p]=(0,l.useState)({}),[f,g]=(0,l.useState)([]),[S,y]=(0,l.useState)([]),[A,C]=(0,l.useState)([]),T=0===Number(null===N||void 0===N?void 0:N.UserTypeId)||1===Number(null===N||void 0===N?void 0:N.UserTypeId),w=2===Number(null===N||void 0===N?void 0:N.UserTypeId),E=6===Number(null===N||void 0===N?void 0:N.UserTypeId)||3===Number(null===N||void 0===N?void 0:N.UserTypeId),z=4===Number(null===N||void 0===N?void 0:N.UserTypeId)||5===Number(null===N||void 0===N?void 0:N.UserTypeId),[R,U]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(T||E||w)&&(0,_.z)({address:"dashboard/dashboardData?UserType=".concat(null===N||void 0===N?void 0:N.UserTypeId,"&Emp_Id=").concat(null===N||void 0===N?void 0:N.UserId)}).then(e=>{e.success?p(e.data[0]):p({})}).catch(e=>{console.error(e)})},[null===N||void 0===N?void 0:N.UserId,null===N||void 0===N?void 0:N.UserTypeId,T,w,E]),(0,l.useEffect)(()=>{E&&(0,_.z)({address:"dashboard/getTallyData?UserId=".concat(null===N||void 0===N?void 0:N.UserId)}).then(e=>{e.success?C(e.data):C([])}).catch(e=>console.error(e))},[E]),(0,l.useEffect)(()=>{E&&((0,_.z)({address:"taskManagement/task/work?Emp_Id=".concat(null===N||void 0===N?void 0:N.UserId,"&from=").concat((0,k.ny)(),"&to=").concat((0,k.ny)())}).then(e=>{e.success?g(e.data):C([])}).catch(e=>console.error(e)),(0,_.z)({address:"taskManagement/tasks/myTasks?Emp_Id=".concat(null===N||void 0===N?void 0:N.UserId,"&reqDate=").concat((0,k.ny)())}).then(e=>{e.success?(e.data.sort((e,s)=>{const[t,l]=null===e||void 0===e?void 0:e.Sch_Time.split(":").map(Number),[a,d]=null===s||void 0===s?void 0:s.Sch_Time.split(":").map(Number);return t!==a?t-a:l-d}),y(e.data)):y([])}).catch(e=>console.error(e)))},[E,null===N||void 0===N?void 0:N.UserId]);const O=e=>{let{title:s,icon:t,firstVal:l,secondVal:a,classCount:d}=e;return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("div",{className:"".concat((T||w)&&"col-xxl-3"," col-lg-4 col-md-6 col-sm-12 p-2"),children:(0,I.jsxs)("div",{className:"coloredDiv d-flex align-items-center text-light cus-shadow coloredDiv"+d,children:[(0,I.jsxs)("div",{className:"flex-grow-1 p-3",children:[(0,I.jsx)("h5",{className:"text-uppercase",children:s}),(0,I.jsxs)("h3",{className:"fa-16 text-end pe-3",children:[(0,I.jsxs)("span",{style:{fontSize:"30px"},children:[l||0," "]}),a&&"/"+a]})]}),t]})})})},P=e=>{const s=Math.floor(Number(e)/60),t=Number(e)%60,l=s<10?"0"+s:s,a=t<10?"0"+t:t;return l&&a?l+":"+a:"00:00"},B=e=>["bg-dark","bg-info","bg-warning","bg-success","bg-danger"][Number(e)];return(0,I.jsxs)(I.Fragment,{children:[z&&(0,I.jsx)(D,{}),(w||T)&&(0,I.jsx)(H,{}),(T||w)&&(0,I.jsx)(h.A,{control:(0,I.jsx)(m.A,{checked:R,onChange:e=>U(e.target.checked)}),label:"Show Task Management",className:" fw-bold text-primary"}),(0,I.jsxs)("div",{className:"px-1",children:[(T||w)&&R&&(0,I.jsxs)("div",{className:"row",children:[(0,I.jsx)(O,{title:"Projects",icon:(0,I.jsx)(o.vQK,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.ActiveProjects,secondVal:null===b||void 0===b?void 0:b.AllProjects,classCount:"1"}),(0,I.jsx)(O,{title:"Schedule",icon:(0,I.jsx)(a.Nb0,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.ActiveSchedule,secondVal:null===b||void 0===b?void 0:b.AllSchedule,classCount:"2"}),(0,I.jsx)(O,{title:"Completed Tasks",icon:(0,I.jsx)(i.bZV,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.TaskCompleted,classCount:"3"}),(0,I.jsx)(O,{title:"Employee",icon:(0,I.jsx)(r.ccC,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.EmployeeCounts,secondVal:Number(null===b||void 0===b?void 0:b.EmployeeCounts)+(null===b||void 0===b?void 0:b.OtherUsers),classCount:"4"}),(0,I.jsx)(O,{title:"Worked Hours",icon:(0,I.jsx)(n.$Lh,{style:{fontSize:"80px"}}),firstVal:P(null===b||void 0===b?void 0:b.TotalMinutes),classCount:"5"}),(0,I.jsx)(O,{title:"Today Tasks",icon:(0,I.jsx)(d.Thc,{style:{fontSize:"80px"}}),firstVal:null===b||void 0===b?void 0:b.TodayTaskCompleted,secondVal:null===b||void 0===b?void 0:b.TodayTasks,classCount:"6"})]}),E&&(0,I.jsxs)("div",{className:"row",children:[(0,I.jsx)(O,{title:"Completed Tasks",firstVal:null===b||void 0===b?void 0:b.TaskCompleted,secondVal:null===b||void 0===b?void 0:b.TotalTasks,icon:(0,I.jsx)(i.bZV,{style:{fontSize:"80px"}}),classCount:"1"}),(0,I.jsx)(O,{title:"Today Tasks",firstVal:null===b||void 0===b?void 0:b.TodayTaskCompleted,secondVal:null===b||void 0===b?void 0:b.TodayTasks,icon:(0,I.jsx)(d.Thc,{style:{fontSize:"80px"}}),classCount:"2"}),(0,I.jsx)(O,{title:"Total Work Hours",firstVal:P(null===b||void 0===b?void 0:b.WorkedMinutes),icon:(0,I.jsx)(d.Thc,{style:{fontSize:"80px"}}),classCount:"3"})]})]}),(0,I.jsx)("br",{}),E&&(0,I.jsx)(L,{}),(0,I.jsx)("br",{}),E&&f.length>0&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(u.A,{children:(0,I.jsxs)(x.A,{sx:{pb:2},children:[(0,I.jsx)("h5",{children:"Today Activity"}),(0,I.jsx)(c.A,{TasksArray:f}),(0,I.jsx)("br",{})]})}),(0,I.jsx)("br",{})]}),(0,I.jsx)(G,{loadingOn:s,loadingOff:t}),E&&S.length>0&&(0,I.jsxs)(u.A,{children:[(0,I.jsx)(v.A,{title:"Today Tasks:"+S.length,sx:{pb:0}}),(0,I.jsx)(x.A,{children:(0,I.jsx)("div",{className:"table-responsive",children:(0,I.jsxs)("table",{className:"table mb-1 ",children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{className:"fa-13 border",children:"SNo"}),(0,I.jsx)("th",{className:"fa-13 border",children:"Task"}),(0,I.jsx)("th",{className:"fa-13 border",children:"Timer Based"}),(0,I.jsx)("th",{className:"fa-13 border",children:"Schedule"}),(0,I.jsx)("th",{className:"fa-13 border",children:"Duration"}),(0,I.jsx)("th",{className:"fa-13 border",children:"Status"})]})}),(0,I.jsx)("tbody",{children:S.map((e,s)=>(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"fa-13 border",children:s+1}),(0,I.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Task_Name}),(0,I.jsx)("td",{className:"fa-13 border text-center",children:(0,I.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(B(1===Number(null===e||void 0===e?void 0:e.Timer_Based)?3:1)),children:1===Number(null===e||void 0===e?void 0:e.Timer_Based)?"Yes":"No"})}),(0,I.jsxs)("td",{className:"fa-13 border text-center",children:[null===e||void 0===e?void 0:e.Sch_Time," - ",null===e||void 0===e?void 0:e.EN_Time]}),(0,I.jsx)("td",{className:"fa-13 border text-center",children:null===e||void 0===e?void 0:e.Sch_Period}),(0,I.jsx)("td",{className:"fa-13 border text-center",children:(0,I.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(B(null!==e&&void 0!==e&&e.Work_Id?3:1)),children:null!==e&&void 0!==e&&e.Work_Id?"Completed":"Pending"})})]},s))})]})})})]}),(0,I.jsx)("br",{}),E&&(null===A||void 0===A?void 0:A.length)>0&&(0,I.jsxs)(u.A,{component:j.A,children:[(0,I.jsx)(v.A,{title:"Tally Entries",sx:{pb:0}}),(0,I.jsx)(x.A,{children:(0,I.jsx)("div",{className:"table-responsive",children:(0,I.jsxs)("table",{className:"table",children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{className:"fa-13 border",children:"Sno"}),(0,I.jsx)("th",{className:"fa-13 border",children:"Particulars"}),(0,I.jsx)("th",{className:"fa-13 border",children:"Value"})]})}),(0,I.jsx)("tbody",{children:null===A||void 0===A?void 0:A.map((e,s)=>(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:"fa-13 border",children:s+1}),(0,I.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Particulars}),(0,I.jsx)("td",{className:"fa-13 border",children:null===e||void 0===e?void 0:e.Tally_Count})]},s))})]})})})]})]})}},83005(e,s,t){t.d(s,{A:()=>r});var l=t(65043),a=t(5351),d=(t(59042),t(70579));const r=e=>{let{TasksArray:s}=e;const[t,r]=(0,l.useState)(null),[n,o]=(0,l.useState)(null),[i,c]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(s.length>0){const e=s.reduce((e,s)=>{const t=new Date((new Date).toISOString().split("T")[0]+"T"+s.Start_Time);return e+(new Date((new Date).toISOString().split("T")[0]+"T"+s.End_Time)-t)},0),t=new Date((new Date).toISOString().split("T")[0]+"T"+s[0].Start_Time),l=new Date((new Date).toISOString().split("T")[0]+"T"+s[s.length-1].End_Time)-t,a=l-e,d=Math.floor(l/1e3),n=Math.floor(d/3600),o=Math.floor(d%3600/60),i=d%60;c("".concat(String(n).padStart(2,"0"),":").concat(String(o).padStart(2,"0"),":").concat(String(i).padStart(2,"0")));const m=s.map(e=>{const s=new Date((new Date).toISOString().split("T")[0]+"T"+e.Start_Time),t=new Date((new Date).toISOString().split("T")[0]+"T"+e.End_Time)-s;return{label:"".concat(e.Task_Name," (").concat(e.Start_Time," - ").concat(e.End_Time,")"),duration:t,backgroundColor:h()}}),u={labels:m.map(e=>e.label),datasets:[{data:m.map(e=>e.duration),backgroundColor:m.map(e=>e.backgroundColor),borderColor:"rgba(255, 255, 255, 1)",borderWidth:1}]};u.labels.push("Free Time"),u.datasets[0].data.push(a),u.datasets[0].backgroundColor.push("#ADD8E6"),r(u)}},[s]),(0,l.useEffect)(()=>{if(t){n&&n.destroy();const e=document.getElementById("empWokHours"),s=new a.Ay(e,{type:"pie",data:t,options:{responsive:!0,plugins:{tooltip:{callbacks:{label:function(e){const s=e.parsed||0,t=e.dataset.data.reduce((e,s)=>e+s,0),l=Math.round(s/t*100),a=Math.round(s/6e4);return"".concat(a," minutes (").concat(l,"%)")}}},datalabels:{color:"#fff",formatter:(e,s)=>{const t=s.chart.data.labels[s.dataIndex],l=s.parsed||0,a=s.dataset.data.reduce((e,s)=>e+s,0),d=Math.round(l/a*100);return"".concat(t,": ").concat(e," (").concat(d,"%)")}}}}});o(s)}},[t]);const h=()=>{let e="#";for(let s=0;s<6;s++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};return s.length>0?(0,d.jsxs)("div",{className:"d-flex flex-column align-items-center my-3",style:{maxHeight:"500px"},children:[i&&(0,d.jsxs)("p",{className:"my-2",children:["Total Time: ",i]}),(0,d.jsx)("canvas",{id:"empWokHours",width:"400",height:"100"})]}):(0,d.jsx)("h5",{className:"text-center my-5",children:"No Data For PieChart!"})}}}]);
//# sourceMappingURL=9013.e0906f2b.chunk.js.map