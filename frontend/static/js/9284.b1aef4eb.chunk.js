"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[9284],{48471:(e,a,n)=>{n.d(a,{Ay:()=>I,JT:()=>B,Lj:()=>P,wF:()=>z});var t=n(89379),l=n(65043),o=n(77739),i=n(17392),r=n(41020),s=n(30922),d=n(32143),m=n(2050),c=n(48734),u=n(28076),_=n(39652),p=n(12110),x=n(63336),h=n(79650),v=n(71806),g=n(84882),N=n(58093),y=n(73460),b=n(31159),j=n(22520),C=n(47968),A=n(692),f=n(8737),D=n(58558),F=n(30599),T=n(433),S=n(37762),w=(n(20557),n(11238)),k=n(70579);const O=(e,a)=>e.map(e=>{const n={};return a.forEach((a,t)=>{if(a.isVisible||a.Defult_Display)if(a.isCustomCell&&a.Cell){const l=a.Cell({row:e}),o=a.ColumnHeader?String(a.ColumnHeader).replace(/\s+/g,"_").toLowerCase():"field_".concat(t+1);"string"!==typeof l&&"number"!==typeof l&&"bigint"!==typeof l||(n[o]=l)}else{let t=a.Field_Name;n[t]=e[t]||""}}),n}),P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,t.A)({isVisible:i,Field_Name:e,Fied_Data:a,align:l,verticalAlign:o},n&&{ColumnHeader:n})},z=e=>{let{buttonsData:a=[],ToolTipText:n="Options"}=e;const[t,u]=(0,l.useState)(null),_=Boolean(t);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o.A,{title:n,children:(0,k.jsx)(i.A,{"aria-describedby":_,onClick:e=>{u(e.currentTarget)},className:"ms-2",size:"small",children:(0,k.jsx)(D.A,{})})}),(0,k.jsx)(r.Ay,{open:_,anchorEl:t,onClose:()=>{u(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,k.jsx)(s.A,{children:a.map((e,a)=>(0,k.jsxs)(d.A,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,k.jsx)(m.A,{children:null===e||void 0===e?void 0:e.icon}),(0,k.jsx)(c.A,{children:null===e||void 0===e?void 0:e.name})]},a))})})]})},B=(e,a)=>{switch(a){case"number":return e?(0,j.jG)(e):e;case"date":return e?(0,j.yc)(e):e;case"time":return e?(0,j.JG)(e):e;case"string":return e;default:return""}},E=e=>{let{dataArray:a=[],columns:n=[],onClickFun:o=null,isExpendable:r=!1,expandableComp:s=null,tableMaxHeight:d=550,initialPageCount:m=20,EnableSerialNumber:c=!1,CellSize:D="small",disablePagination:P=!1,title:E="",PDFPrintOption:I=!1,ExcelPrintOption:Q=!1,maxHeightOption:G=!1,ButtonArea:L=null,MenuButtons:R=[],bodyFontSizePx:V=13,headerFontSizePx:H=13}=e;const[W,M]=(0,l.useState)(0),[$,J]=(0,l.useState)(m),[U,Y]=(0,l.useState)([]),[q,K]=(0,l.useState)(!0),X=q&&G?" max-content ":d,Z=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],ee=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],ae=(e=>{if(!U.length)return e;return[...e].sort((e,a)=>{for(const n of U){const{columnId:t,direction:l}=n,o=e[t],i=a[t];if(o!==i)return"asc"===l?o>i?1:-1:o<i?1:-1}return 0})})(a),ne=W*$,te=ne+$,le=ae.slice(ne,te),oe=e=>{let{row:a,index:t}=e;const[d,m]=(0,l.useState)(!1),p="20px";return(0,k.jsxs)(l.Fragment,{children:[(0,k.jsxs)(u.A,{children:[!0===r&&s&&(0,k.jsx)(_.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(V,"px")},children:(0,k.jsx)(i.A,{size:"small",onClick:()=>m(e=>!e),children:d?(0,k.jsx)(f.A,{sx:{fontSize:p}}):(0,k.jsx)(A.A,{sx:{fontSize:p}})})}),!0===c&&(0,k.jsx)(_.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(V,"px")},children:$*W+t+1}),null===n||void 0===n?void 0:n.map((e,n)=>{var l,i;const r=(0,j.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,j.id)(null===e||void 0===e?void 0:e.isVisible,1),s=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,d=!s,m=(a,n,t)=>null!==e&&void 0!==e&&e.tdClass?" ".concat(null===e||void 0===e?void 0:e.tdClass({row:a,Field_Name:n,index:t})," "):"",c=e.align?null===(l=Z.find(a=>a.type===String(e.align).toLowerCase()))||void 0===l?void 0:l.class:"",u=e.verticalAlign?null===(i=ee.find(a=>a.type===String(e.verticalAlign).toLowerCase()))||void 0===i?void 0:i.class:" vctr ";if(r&&d){const l=Object.entries(a).find(a=>{let[n]=a;return n===e.Field_Name});return(0,k.jsx)(_.A,{className:"border-end ".concat(c," ").concat(u," ").concat(m(a,e.Field_Name,t)),sx:{fontSize:"".concat(V,"px")},onClick:()=>o?o(a):console.log("Function not supplied"),children:l?B(l[1],null===e||void 0===e?void 0:e.Fied_Data):"-"},n)}return r&&s?(0,k.jsx)(_.A,{className:"border-end ".concat(c," ").concat(u," ").concat(m(a,e.Field_Name,t)),sx:{fontSize:"".concat(V,"px")},children:e.Cell({row:a,Field_Name:e.Field_Name,index:t})},n):(0,k.jsx)(_.A,{sx:{fontSize:"".concat(V,"px")},className:"border-end ".concat(c," ").concat(u),children:"-"},n)})]}),!0===r&&s&&d&&(0,k.jsx)(u.A,{children:(0,k.jsx)(_.A,{colSpan:Number(null===n||void 0===n?void 0:n.length)+(!0===c?2:1),children:s({row:a,index:t})})})]})};return(0,k.jsxs)(p.A,{className:"rounded-3 bg-white overflow-hidden",component:x.A,children:[(0,k.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(I||Q||R.length>0||G)&&(0,k.jsx)(z,{ToolTipText:"Table Options",buttonsData:[...G?[{name:"Max Height",icon:q?(0,k.jsx)(T.A,{fontSize:"small",color:"primary"}):(0,k.jsx)(F.A,{fontSize:"small"}),onclick:()=>K(e=>!e),disabled:(0,j.id)(null===a||void 0===a?void 0:a.length,0)}]:[],...I?[{name:"PDF Print",icon:(0,k.jsx)(C.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,a)=>{try{const n=new S.default,l=O(e,a),o=a.filter(e=>e.isVisible||e.Defult_Display).map(e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase()),i=l.map(e=>o.map(a=>e[a])).map((e,a)=>(0,t.A)((0,t.A)({},e),{},{Sno:a+1}));n.autoTable({head:[o],body:i}),n.save("table.pdf")}catch(n){console.error(n)}})(a,n),disabled:(0,j.id)(null===a||void 0===a?void 0:a.length,0)}]:[],...Q?[{name:"Excel Print",icon:(0,k.jsx)(C.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,a)=>{try{const n=O(e,a),t=w.Wp.json_to_sheet(n),l=w.Wp.book_new();w.Wp.book_append_sheet(l,t,"Data"),w._h(l,"table.xlsx")}catch(n){console.error(n)}})(a,n),disabled:(0,j.id)(null===a||void 0===a?void 0:a.length,0)}]:[],...R]}),L&&L,E&&(0,k.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:E})]}),(0,k.jsx)(h.A,{sx:{maxHeight:X},children:(0,k.jsxs)(v.A,{stickyHeader:!0,size:D,children:[(0,k.jsx)(g.A,{children:(0,k.jsxs)(u.A,{children:[r&&s&&(0,k.jsx)(_.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(H,"px"),backgroundColor:"#EDF0F7"},children:"#"}),c&&(0,k.jsx)(_.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(H,"px"),backgroundColor:"#EDF0F7"},children:"SNo"}),n.map((e,a)=>{const n=(0,j.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,j.id)(null===e||void 0===e?void 0:e.isVisible,1),l=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,o=U.find(a=>a.columnId===e.Field_Name),i=o?o.direction:"asc";var r,s,d,m;return n?l?(0,k.jsx)(_.A,{className:"fw-bold border-end border-top "+(e.align?null===(r=Z.find(a=>a.type===String(e.align).toLowerCase()))||void 0===r?void 0:r.class:""),sx:{fontSize:"".concat(H,"px"),backgroundColor:"#EDF0F7"},sortDirection:!!o&&i,children:(0,k.jsx)(N.A,{active:!!o,direction:i,onClick:()=>(e=>{const a=U.find(a=>a.columnId===e);if(a){const n="asc"===a.direction;Y(U.map(a=>a.columnId===e?(0,t.A)((0,t.A)({},a),{},{direction:n?"desc":"asc"}):a))}else Y([...U,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(s=e.Field_Name)||void 0===s?void 0:s.replace(/_/g," "))})},a):(0,k.jsx)(_.A,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(d=Z.find(a=>a.type===String(e.align).toLowerCase()))||void 0===d?void 0:d.class:""),sx:{fontSize:"".concat(H,"px"),backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(m=e.Field_Name)||void 0===m?void 0:m.replace(/_/g," "))},a):null})]})}),(0,k.jsxs)(y.A,{children:[(P?ae:le).map((e,a)=>(0,k.jsx)(oe,{row:e,index:a},a)),0===a.length&&(0,k.jsx)(u.A,{children:(0,k.jsx)(_.A,{colSpan:n.length+(!0===r&&s?1:0)+(!0===c?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!P&&0!==le.length&&(0,k.jsx)("div",{className:"p-2 pb-0",children:(0,k.jsx)(b.A,{component:"div",count:a.length,page:W,onPageChange:(e,a)=>{M(a)},rowsPerPage:$,onRowsPerPageChange:e=>{J(parseInt(e.target.value,10)),M(0)},rowsPerPageOptions:Array.from(new Set([m,5,20,50,100,200,500,1e3,2e3])).sort((e,a)=>e-a),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};E.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const I=E},59284:(e,a,n)=>{n.r(a),n.d(a,{default:()=>$});var t=n(89379),l=n(22016),o=n(15710),i=n(86506),r=n(17392),s=n(81e3),d=n(24056),m=n(65043),c=n(22520),u=n(79484),_=n(65074),p=n(48471),x=n(12412),h=n(51962),v=n(67784),g=n(11906),N=n(77739),y=n(83462),b=n(35316),j=n(29347),C=n(26600),A=n(12110),f=n(63336),D=n(4598),F=n(85865),T=n(79650),S=n(71806),w=n(84882),k=n(28076),O=n(39652),P=n(73460),z=n(12249),B=n(5793),E=n(32069),I=n(8846),Q=n(59383),G=n(91036),L=n(33438),R=n(70579);const V=(0,R.jsx)(z.A,{fontSize:"small"}),H=(0,R.jsx)(B.A,{fontSize:"small"}),W=e=>{let{loadingOn:a,loadingOff:n,Fromdate:l,Todate:o,api:i="itemWise",defaultGrouping:s="",storageStockColumns:d=[],groupingOption:u=!0,reportName:z="",url:B=""}=e;const[W,M]=(0,m.useState)([]),[$,J]=(0,m.useState)({}),[U,Y]=(0,m.useState)(s),[q,K]=(0,m.useState)([]),[X,Z]=(0,m.useState)(!1),[ee,ae]=(0,m.useState)(!1),[ne,te]=(0,m.useState)([]),[le,oe]=(0,m.useState)([]),[ie,re]=(0,m.useState)(!1),[se,de]=(0,m.useState)([]),[me,ce]=(0,m.useState)({}),ue=d.map((e,a)=>{const n=le.find(a=>(0,c.xL)(a.columnName,null===e||void 0===e?void 0:e.Column_Name))||{};return{isVisible:1,Field_Name:null===e||void 0===e?void 0:e.Column_Name,Fied_Data:null===e||void 0===e?void 0:e.Data_Type,OrderBy:(null===n||void 0===n?void 0:n.orderNum)||a+1,isEnabled:!0}}),[_e,pe]=(0,m.useState)(ue);(0,m.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")),t=null===e||void 0===e?void 0:e.Company_id;a(),Promise.all([(0,_.z)({address:"reports/storageStock/".concat(i,"?Fromdate=").concat(l,"&Todate=").concat(o)}),(0,_.z)({address:"reports/reportState/columnVisiblity?reportName=".concat(z,"&reportUrl=").concat(B)}),(0,_.z)({address:"masters/displayLosColumn?company_id=".concat(t)})]).then(e=>{let[a,n,t]=e;a.success&&M((0,c.$r)(a.data));const l=n.success?(0,c.$r)(n.data):[];oe(l);const o=t.success?(0,c.$r)(t.data):[];te(o);const i=d.map((e,a)=>{const n=l.find(a=>(0,c.xL)(a.columnName,null===e||void 0===e?void 0:e.Column_Name)),t=o.find(a=>(0,c.xL)(a.Column_Name,null===e||void 0===e?void 0:e.Column_Name));return{Field_Name:null===e||void 0===e?void 0:e.Column_Name,Fied_Data:null===e||void 0===e?void 0:e.Data_Type,OrderBy:(null===n||void 0===n?void 0:n.orderNum)||a+1,isEnabled:!0,isVisible:n?1:0,Alias_Name:(null===t||void 0===t?void 0:t.Alias_Name)||(null===e||void 0===e?void 0:e.Alias_Name)}});pe(i)}).catch(e=>console.error("Fetch error:",e)).finally(()=>n())},[l,o,i,z,B,a,n]);const xe=(0,m.useMemo)(()=>[..._e].sort((e,a)=>(null===e||void 0===e?void 0:e.OrderBy)-(null===a||void 0===a?void 0:a.OrderBy)),[_e]),he=(0,m.useMemo)(()=>xe.filter(e=>(0,c.id)(e.isVisible,1)&&e.isEnabled),[xe]),ve=(0,m.useMemo)(()=>{const e=Object.keys($).length>0,a=!!U,n=e?q:W,l=a?(0,c.Sq)(n,U):[],o=he.filter(e=>"number"===(0,c.iw)(e.Fied_Data)).map(e=>e.Field_Name),i=l.map(e=>(0,t.A)((0,t.A)({},e),Object.fromEntries(o.map(a=>{var n;return[a,null===e||void 0===e||null===(n=e.groupedData)||void 0===n?void 0:n.reduce((e,n)=>(0,c.Lr)(e,(0,c.Ro)(n[a])||0),0)]}))));return a?i:n},[$,W,q,U,he]),ge=e=>{if(!e)return"";const a=ne.find(a=>{var n,t;return(null===(n=a.Column_Name)||void 0===n?void 0:n.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())||(null===(t=a.ColumnName)||void 0===t?void 0:t.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())});if(null!==a&&void 0!==a&&a.Alias_Name)return a.Alias_Name;const n=d.find(a=>{var n;return(null===(n=a.Column_Name)||void 0===n?void 0:n.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())});return null!==n&&void 0!==n&&n.Alias_Name?n.Alias_Name:null===e||void 0===e?void 0:e.replace(/_/g," ")};(0,m.useEffect)(()=>{ye()},[$]);const Ne=(e,a)=>{J(n=>(0,t.A)((0,t.A)({},n),{},{[e]:a}))},ye=()=>{let e=[...W];for(const n of xe)if($[n.Field_Name])if("range"===$[n.Field_Name].type){const{min:a,max:t}=$[n.Field_Name];e=e.filter(e=>{const l=e[n.Field_Name];return(void 0===a||l>=a)&&(void 0===t||l<=t)})}else if("date"===$[n.Field_Name].type){const{start:a,end:t}=$[n.Field_Name].value;e=e.filter(e=>{const l=new Date(e[n.Field_Name]);return(void 0===a||l>=new Date(a))&&(void 0===t||l<=new Date(t))})}else if(Array.isArray($[n.Field_Name])){var a;e=(null===(a=$[n.Field_Name])||void 0===a?void 0:a.length)>0?e.filter(e=>{var a;return $[n.Field_Name].includes(null===(a=e[n.Field_Name])||void 0===a?void 0:a.toLowerCase().trim())}):e}K(e)},be=e=>{let t=null,r=null,s="",d="";var m,u,p,x;(console.log("row",e),e.groupedData&&e.groupedData.length>0)?(t=null===(m=e.groupedData[0])||void 0===m?void 0:m.Product_Id,r=null===(u=e.groupedData[0])||void 0===u?void 0:u.Godown_Id,s=(null===(p=e.groupedData[0])||void 0===p?void 0:p.stock_item_name)||"",d=(null===(x=e.groupedData[0])||void 0===x?void 0:x.Godown_Name)||e[U]||""):(t=e.Product_Id,r=e.Godown_Id,s=e.stock_item_name||"",d=e.Godown_Name||"");if(!t)return void G.oR.error("Product ID is not available for this item");const h="godownWise"===i;a();let v="",g="?Fromdate=".concat(l,"&Todate=").concat(o,"&Product_Id=").concat(t);h&&r?(g+="&Godown_Id=".concat(r),v="reports/godownexpenseReport"):v="reports/itemexpenseReport",(0,_.z)({address:"".concat(v).concat(g)}).then(e=>{e.success?(de((0,c.$r)(e.data)),ce({productId:t,productName:s,godownId:r,godownName:d,fromDate:l,toDate:o,reportType:h?"godownWise":"itemWise"}),re(!0)):G.oR.error(e.message||"Failed to fetch expense report")}).catch(e=>{console.error("Error fetching expense report:",e),G.oR.error("Error fetching expense report")}).finally(()=>n())},je=e=>{const{Field_Name:a,Fied_Data:n}=e;var l,o,i,r,s,d,m,c,u,_;if("number"===n)return(0,R.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,R.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(l=null===(o=$[a])||void 0===o?void 0:o.min)&&void 0!==l?l:"",onChange:e=>Ne(a,(0,t.A)((0,t.A)({type:"range"},$[a]),{},{min:e.target.value?parseFloat(e.target.value):void 0}))}),(0,R.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(i=null===(r=$[a])||void 0===r?void 0:r.max)&&void 0!==i?i:"",onChange:e=>Ne(a,(0,t.A)((0,t.A)({type:"range"},$[a]),{},{max:e.target.value?parseFloat(e.target.value):void 0}))})]});if("date"===n)return(0,R.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,R.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(s=null===(d=$[a])||void 0===d||null===(m=d.value)||void 0===m?void 0:m.start)&&void 0!==s?s:"",onChange:e=>{var n;return Ne(a,{type:"date",value:(0,t.A)((0,t.A)({},null===(n=$[a])||void 0===n?void 0:n.value),{},{start:e.target.value||void 0})})}}),(0,R.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(c=null===(u=$[a])||void 0===u||null===(_=u.value)||void 0===_?void 0:_.end)&&void 0!==c?c:"",onChange:e=>{var n;return Ne(a,{type:"date",value:(0,t.A)((0,t.A)({},null===(n=$[a])||void 0===n?void 0:n.value),{},{end:e.target.value||void 0})})}})]});if("string"===n){const e=[...new Set(W.map(e=>{var n,t;return null===(n=e[a])||void 0===n||null===(t=n.toLowerCase())||void 0===t?void 0:t.trim()}))];return(0,R.jsx)(x.A,{multiple:!0,id:"".concat(a,"-filter"),options:e,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:$[a]||[],onChange:(e,n)=>Ne(a,n),renderOption:(e,a,n)=>{let{selected:l}=n;return(0,R.jsxs)("li",(0,t.A)((0,t.A)({},e),{},{children:[(0,R.jsx)(h.A,{icon:V,checkedIcon:H,style:{marginRight:8},checked:l}),a]}))},isOptionEqualToValue:(e,a)=>e===a,renderInput:e=>(0,R.jsx)(v.A,(0,t.A)((0,t.A)({},e),{},{label:ge(a),placeholder:"Select ".concat(ge(a))}))})}},Ce=()=>{Z(!1),ae(!1)},Ae={Field_Name:"__action__",ColumnHeader:"Action",isVisible:1,isEnabled:!0,isCustomCell:!0,align:"center",Cell:e=>{let{row:a}=e;return(0,R.jsx)(g.A,{size:"small",variant:"outlined",onClick:e=>{e.stopPropagation(),be(a)},children:"View"})}},fe=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})},De=(()=>{const e={inQty:0,outQty:0,amount:0};return se.forEach(a=>{e.inQty+=Number(a.In_Qty)||0,e.outQty+=Number(a.Out_Qty)||0,e.amount+=Number(a.Amount)||0}),e})(),Fe={Field_Name:"__godown_action__",ColumnHeader:"Action",isVisible:1,isEnabled:!0,isCustomCell:!0,align:"center",Cell:e=>{let{row:a}=e;return(0,R.jsx)(g.A,{size:"small",variant:"outlined",onClick:e=>{e.stopPropagation(),be(a)},children:"View"})}},Te=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return new Intl.NumberFormat("en-IN",{minimumFractionDigits:a,maximumFractionDigits:a}).format(Number(e||0))};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(p.Ay,{title:"godownWise"===i?"Godown Wise":"Item Wise",EnableSerialNumber:!0,headerFontSizePx:12,bodyFontSizePx:12,maxHeightOption:!0,ButtonArea:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(N.A,{title:"Column Visibility",children:(0,R.jsx)(r.A,{size:"small",onClick:()=>Z(!0),children:(0,R.jsx)(E.A,{})})}),(0,R.jsx)(N.A,{title:"Clear Filters",children:(0,R.jsx)(r.A,{size:"small",onClick:()=>J({}),children:(0,R.jsx)(I.A,{})})}),(0,R.jsx)(N.A,{title:"Filters",children:(0,R.jsx)(r.A,{onClick:()=>ae(!0),size:"small",children:(0,R.jsx)(Q.A,{})})}),u&&(0,R.jsxs)("div",{className:"d-flex align-items-center flex-wrap",children:[(0,R.jsx)("span",{children:"Group-By:"}),(0,R.jsxs)("select",{className:"cus-inpt p-2 w-auto m-1",value:U,onChange:e=>Y(e.target.value),children:[(0,R.jsx)("option",{value:"",children:"select group"}),he.filter(e=>"string"===(0,c.iw)(e.Fied_Data)&&"Ledger_Name"!==e.Field_Name&&e.isEnabled).map((e,a)=>(0,R.jsx)("option",{value:e.Field_Name,children:ge(e.Field_Name)},a))]})]})]}),ExcelPrintOption:!0,dataArray:ve,columns:[...(U?he.filter(e=>ve.length>0&&Object.keys(ve[0]).includes(e.Field_Name)&&e.isEnabled):he.filter(e=>e.isEnabled)).map(e=>(0,t.A)((0,t.A)({},e),{},{ColumnHeader:ge(e.Field_Name)})),..."itemWise"===i?[Ae]:[]],isExpendable:Boolean(U),expandableComp:e=>{let{row:a}=e;return(0,R.jsx)(p.Ay,{EnableSerialNumber:!0,headerFontSizePx:12,bodyFontSizePx:12,dataArray:(0,c.$r)(null===a||void 0===a?void 0:a.groupedData),columns:[...he.filter(e=>!(0,c.xL)(e.Field_Name,U)&&e.isEnabled).map(e=>(0,t.A)((0,t.A)({},e),{},{ColumnHeader:ge(e.Field_Name)})),..."godownWise"===i?[Fe]:[]]})}}),(0,R.jsxs)(y.A,{open:ee,onClose:Ce,maxWidth:"sm",fullWidth:!0,children:[(0,R.jsxs)(b.A,{children:[(0,R.jsxs)("h5",{className:"d-flex justify-content-between px-2",children:[(0,R.jsx)("span",{children:"Filters"}),(0,R.jsxs)("span",{children:[(0,R.jsx)(N.A,{title:"Column Visibility",children:(0,R.jsx)(r.A,{size:"small",onClick:()=>Z(!0),children:(0,R.jsx)(E.A,{})})}),(0,R.jsx)(N.A,{title:"Clear Filters",children:(0,R.jsx)(r.A,{size:"small",onClick:()=>J({}),children:(0,R.jsx)(I.A,{})})})]})]}),(0,R.jsxs)("div",{className:"border rounded-3",children:[he.filter(e=>e.isEnabled).map((e,a)=>(0,R.jsxs)("div",{className:"py-3 px-3 hov-bg border-bottom",children:[(0,R.jsx)("label",{className:"mt-2 mb-1",children:ge(null===e||void 0===e?void 0:e.Field_Name)}),je(e)]},a)),(0,R.jsx)("br",{})]})]}),(0,R.jsx)(j.A,{children:(0,R.jsx)(g.A,{onClick:Ce,color:"error",children:"Close"})})]}),(0,R.jsxs)(y.A,{open:X,onClose:()=>Z(!1),maxWidth:"lg",fullWidth:!0,children:[(0,R.jsx)(C.A,{children:"Column Settings"}),(0,R.jsx)(b.A,{children:(0,R.jsx)("div",{className:"row",children:_e.map((e,a)=>(0,R.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:(0,R.jsxs)(A.A,{component:f.A,className:"p-2 d-flex justify-content-between align-items-center flex-wrap ".concat(a%2!==0?"bg-light":""," ").concat(e.isEnabled?"":"opacity-50"),children:[(0,R.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,R.jsx)(D.A,{checked:Boolean(null===e||void 0===e?void 0:e.isVisible)&&e.isEnabled,onChange:a=>e.isEnabled&&pe(n=>n.map(n=>n.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?(0,t.A)((0,t.A)({},n),{},{isVisible:a.target.checked?1:0}):n))}),(0,R.jsxs)("h6",{className:"fa-13 mb-0 fw-bold",children:[ge(e.Field_Name),!e.isEnabled&&(0,R.jsx)("span",{className:"text-muted small"})]})]}),(0,R.jsx)("input",{type:"number",value:(0,c.IQ)(null===e||void 0===e?void 0:e.OrderBy)?null===e||void 0===e?void 0:e.OrderBy:"",onChange:a=>e.isEnabled&&pe(n=>n.map(n=>n.Field_Name===(null===e||void 0===e?void 0:e.Field_Name)?(0,t.A)((0,t.A)({},n),{},{OrderBy:a.target.value}):n)),disabled:!e.isEnabled,className:"mt-2 p-1 border-0 cus-inpt",style:{width:"80px"},placeholder:"Order"})]})},a))})}),(0,R.jsxs)(j.A,{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,R.jsx)(g.A,{onClick:()=>{const e=_e.filter(e=>(0,c.id)(e.isVisible,1));(0,_.z)({address:"reports/reportState/columnVisiblity",method:"POST",bodyData:{visibleColumns:e.map(e=>({ColumnName:e.Field_Name,ColumnOrder:e.OrderBy})),reportName:z,reportUrl:B}}).then(a=>{a.success?(G.oR.success(a.message),oe(e.map(e=>({columnName:e.Field_Name,orderNum:e.OrderBy})))):G.oR.error(a.message)}).catch(e=>console.error(e))},variant:"outlined",children:"Save State"}),(0,R.jsxs)("span",{children:[(0,R.jsx)(g.A,{onClick:()=>{const e=ue.map(e=>{const a=le.find(a=>(0,c.xL)(a.columnName,e.Field_Name));return(0,t.A)((0,t.A)({},e),{},{isVisible:a?1:0,OrderBy:(null===a||void 0===a?void 0:a.orderNum)||e.OrderBy})});pe(e)},variant:"outlined",children:"Reset"}),(0,R.jsx)(g.A,{onClick:()=>Z(!1),color:"error",children:"Close"})]})]})]}),(0,R.jsxs)(y.A,{open:ie,onClose:()=>re(!1),maxWidth:"lg",fullWidth:!0,maxHeight:"90vh",children:[(0,R.jsxs)(C.A,{children:[(0,R.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,R.jsx)(F.A,{variant:"h6",children:me.productName}),(0,R.jsx)(r.A,{onClick:()=>re(!1),children:(0,R.jsx)(L.A,{})})]}),(0,R.jsxs)(F.A,{variant:"body2",color:"textSecondary",children:["Period: ",fe(me.fromDate)," to ",fe(me.toDate)]})]}),(0,R.jsx)(b.A,{dividers:!0,children:0===se.length?(0,R.jsx)(F.A,{align:"center",color:"textSecondary",children:"No expense data found for this product"}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(T.A,{component:f.A,style:{maxHeight:500},children:(0,R.jsxs)(S.A,{stickyHeader:!0,size:"small",children:[(0,R.jsx)(w.A,{children:(0,R.jsxs)(k.A,{children:[(0,R.jsx)(O.A,{children:(0,R.jsx)("strong",{children:"Invoice No"})}),(0,R.jsx)(O.A,{children:(0,R.jsx)("strong",{children:"Date"})}),(0,R.jsx)(O.A,{children:(0,R.jsx)("strong",{children:"Particulars"})}),(0,R.jsx)(O.A,{children:(0,R.jsx)("strong",{children:"Month/Year"})}),(0,R.jsx)(O.A,{align:"right",children:(0,R.jsx)("strong",{children:"In Qty"})}),(0,R.jsx)(O.A,{align:"right",children:(0,R.jsx)("strong",{children:"Out Qty"})}),(0,R.jsx)(O.A,{align:"right",children:(0,R.jsx)("strong",{children:"Rate"})}),(0,R.jsx)(O.A,{align:"right",children:(0,R.jsx)("strong",{children:"Amount"})}),(0,R.jsx)(O.A,{children:(0,R.jsx)("strong",{children:"Retailer"})}),(0,R.jsx)(O.A,{children:(0,R.jsx)("strong",{children:"Voucher"})})]})}),(0,R.jsx)(P.A,{children:se.map((e,a)=>(0,R.jsxs)(k.A,{children:[(0,R.jsx)(O.A,{children:e.invoice_no||""}),(0,R.jsx)(O.A,{children:fe(e.Ledger_Date)}),(0,R.jsx)(O.A,{children:e.Particulars||""}),(0,R.jsx)(O.A,{children:e.Month_Year||""}),(0,R.jsx)(O.A,{align:"right",children:Te(e.In_Qty)}),(0,R.jsx)(O.A,{align:"right",children:Te(e.Out_Qty)}),(0,R.jsx)(O.A,{align:"right",children:Te(e.Rate)}),(0,R.jsx)(O.A,{align:"right",children:Te(e.Amount)}),(0,R.jsx)(O.A,{children:e.Retailer_Name||"-"}),(0,R.jsx)(O.A,{children:e.voucher_name||"-"})]},a))})]})}),(0,R.jsxs)("div",{className:"mt-4 p-3 border rounded bg-light",children:[(0,R.jsx)(F.A,{variant:"h6",gutterBottom:!0,children:"Summary"}),(0,R.jsxs)("div",{className:"row",children:[(0,R.jsx)("div",{className:"col-md-4",children:(0,R.jsxs)(F.A,{children:[(0,R.jsx)("strong",{children:"Total In Quantity:"})," ",Te(De.inQty)]})}),(0,R.jsx)("div",{className:"col-md-4",children:(0,R.jsxs)(F.A,{children:[(0,R.jsx)("strong",{children:"Total Out Quantity:"})," ",Te(De.outQty)]})}),(0,R.jsx)("div",{className:"col-md-4",children:(0,R.jsxs)(F.A,{children:[(0,R.jsx)("strong",{children:"Total Amount:"})," ","\u20b9",Te(De.amount)]})})]}),(0,R.jsx)("div",{className:"mt-2",children:(0,R.jsxs)(F.A,{variant:"body2",color:"textSecondary",children:[(0,R.jsx)("strong",{children:"Net Quantity:"})," ",Te(De.inQty-De.outQty)]})})]})]})}),(0,R.jsx)(j.A,{children:(0,R.jsx)(g.A,{onClick:()=>re(!1),color:"primary",variant:"contained",children:"Close"})})]})]})};var M=n(68052);const $=e=>{let{loadingOn:a,loadingOff:n}=e;const[_,p]=(0,m.useState)(1),[x,h]=(0,m.useState)({Fromdate:(0,c.ny)(),Todate:(0,c.ny)(),FilterFromDate:(0,c.ny)(),FilterTodate:(0,c.ny)()}),v=[{name:"Item Wise",component:(0,R.jsx)(W,{loadingOn:a,loadingOff:n,Fromdate:x.Fromdate,Todate:x.Todate,api:"itemWise",defaultGrouping:"",storageStockColumns:M.fN,reportName:"stockInHand_itemWise",url:"/erp/reports/stockInHand"})},{name:"Godown Wise",component:(0,R.jsx)(W,{loadingOn:a,loadingOff:n,Fromdate:x.Fromdate,Todate:x.Todate,api:"godownWise",defaultGrouping:"Godown_Name",storageStockColumns:M.uM,groupingOption:!1,reportName:"stockInHand_GodownWise",url:"/erp/reports/stockInHand"})}];return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{className:"d-flex align-items-center flex-wrap mb-3",children:[(0,R.jsx)("label",{htmlFor:"from",className:"me-1 fw-bold ",children:"Fromdate: "}),(0,R.jsx)("input",{type:"date",id:"from",className:"cus-inpt p-2 w-auto me-2",value:x.FilterFromDate,onChange:e=>h(a=>(0,t.A)((0,t.A)({},a),{},{FilterFromDate:e.target.value}))}),(0,R.jsx)("label",{htmlFor:"to",className:"me-1 fw-bold ",children:"Todate: "}),(0,R.jsx)("input",{type:"date",id:"to",className:"cus-inpt p-2 w-auto",value:x.FilterTodate,onChange:e=>h(a=>(0,t.A)((0,t.A)({},a),{},{FilterTodate:e.target.value}))}),(0,R.jsx)(r.A,{size:"small",onClick:()=>h(e=>(0,t.A)((0,t.A)({},e),{},{Fromdate:e.FilterFromDate?e.FilterFromDate:e.Fromdate,Todate:e.FilterTodate?e.FilterTodate:e.Todate})),children:(0,R.jsx)(u.A,{})})]}),(0,R.jsxs)(l.Ay,{value:_,children:[(0,R.jsx)(s.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,R.jsx)(o.A,{indicatorColor:"transparant",onChange:(e,a)=>p(a),variant:"scrollable",scrollButtons:"auto",children:v.map((e,a)=>(0,R.jsx)(d.A,{sx:_===a+1?{backgroundColor:"#c6d7eb"}:{},label:e.name,value:a+1},a))})}),v.map((e,a)=>(0,R.jsx)(i.A,{value:a+1,sx:{p:0,pt:2},children:e.component},a))]})]})}},68052:(e,a,n)=>{n.d(a,{fN:()=>t,gY:()=>o,uM:()=>l});const t=[{Column_Name:"Trans_Date",Data_Type:"date"},{Column_Name:"Group_Name",Data_Type:"string"},{Column_Name:"stock_item_name",Data_Type:"string"},{Column_Name:"OB_Bal_Qty",Data_Type:"number"},{Column_Name:"OB_Act_Qty",Data_Type:"number"},{Column_Name:"Pur_Qty",Data_Type:"number"},{Column_Name:"Sal_Qty",Data_Type:"number"},{Column_Name:"Bal_Qty",Data_Type:"number"},{Column_Name:"Bal_Act_Qty",Data_Type:"number"},{Column_Name:"Pur_Act_Qty",Data_Type:"number"},{Column_Name:"Sal_Act_Qty",Data_Type:"number"},{Column_Name:"Stock_Item",Data_Type:"string"},{Column_Name:"Group_ST",Data_Type:"string"},{Column_Name:"Bag",Data_Type:"string"},{Column_Name:"Stock_Group",Data_Type:"string"},{Column_Name:"Product_Rate",Data_Type:"number"},{Column_Name:"S_Sub_Group_1",Data_Type:"string"},{Column_Name:"Grade_Item_Group",Data_Type:"string"},{Column_Name:"Item_Name_Modified",Data_Type:"string"}],l=[{Column_Name:"Godown_Name",Data_Type:"string"},{Column_Name:"stock_item_name",Data_Type:"string"},{Column_Name:"Bal_Qty",Data_Type:"number"},{Column_Name:"CL_Value",Data_Type:"number"},{Column_Name:"OB_Bal_Qty",Data_Type:"number"},{Column_Name:"OB_Act_Qty",Data_Type:"number"},{Column_Name:"Pur_Qty",Data_Type:"number"},{Column_Name:"Sal_Qty",Data_Type:"number"},{Column_Name:"Act_Bal_Qty",Data_Type:"number"},{Column_Name:"Pur_Act_Qty",Data_Type:"number"},{Column_Name:"Sal_Act_Qty",Data_Type:"number"},{Column_Name:"Stock_Item",Data_Type:"string"},{Column_Name:"Group_ST",Data_Type:"string"},{Column_Name:"Bag",Data_Type:"string"},{Column_Name:"Stock_Group",Data_Type:"string"},{Column_Name:"Product_Rate",Data_Type:"number"},{Column_Name:"S_Sub_Group_1",Data_Type:"string"},{Column_Name:"Grade_Item_Group",Data_Type:"string"},{Column_Name:"Item_Name_Modified",Data_Type:"string"},{Column_Name:"CL_Rate",Data_Type:"number"}],o=[{Column_Name:"Group_Name",Data_Type:"string"},{Column_Name:"Brand",Data_Type:"string"},{Column_Name:"Group_ST",Data_Type:"string"},{Column_Name:"Stock_Group",Data_Type:"string"},{Column_Name:"S_Sub_Group_1",Data_Type:"string"},{Column_Name:"Grade_Item_Group",Data_Type:"string"},{Column_Name:"Trans_Date",Data_Type:"date"},{Column_Name:"OB_Bal_Qty",Data_Type:"number"},{Column_Name:"OB_Rate",Data_Type:"number"},{Column_Name:"OB_Value",Data_Type:"number"},{Column_Name:"Pur_Qty",Data_Type:"number"},{Column_Name:"Pur_Rate",Data_Type:"number"},{Column_Name:"Pur_value",Data_Type:"number"},{Column_Name:"Adj_Pur_Qty",Data_Type:"number"},{Column_Name:"Adj_Pur_Rate",Data_Type:"number"},{Column_Name:"Adj_Pur_value",Data_Type:"number"},{Column_Name:"IN_Qty",Data_Type:"number"},{Column_Name:"IN_Rate",Data_Type:"number"},{Column_Name:"IN_Value",Data_Type:"number"},{Column_Name:"Sal_Qty",Data_Type:"number"},{Column_Name:"Sal_Rate",Data_Type:"number"},{Column_Name:"Sal_value",Data_Type:"number"},{Column_Name:"Adj_Sal_Qty",Data_Type:"number"},{Column_Name:"Adj_Sal_Rate",Data_Type:"number"},{Column_Name:"Adj_Sal_value",Data_Type:"number"},{Column_Name:"OUT_Qty",Data_Type:"number"},{Column_Name:"Out_Rate",Data_Type:"number"},{Column_Name:"Out_Value",Data_Type:"number"},{Column_Name:"Expense_value",Data_Type:"number"},{Column_Name:"Act_Expense",Data_Type:"number"},{Column_Name:"Bal_Qty",Data_Type:"number"},{Column_Name:"CL_Rate",Data_Type:"number"},{Column_Name:"CL_Value",Data_Type:"number"},{Column_Name:"CR_CL_Rate",Data_Type:"number"},{Column_Name:"Pre_Qty",Data_Type:"number"},{Column_Name:"Pre_Rate",Data_Type:"number"},{Column_Name:"Pre_CL_Value",Data_Type:"number"}]}}]);
//# sourceMappingURL=9284.b1aef4eb.chunk.js.map