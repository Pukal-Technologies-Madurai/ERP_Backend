"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8471],{58471:(e,t,a)=>{a.d(t,{A:()=>j});var s=a(89379),r=a(65043),n=a(83462),i=a(26600),o=a(35316),d=a(29347),l=a(11906),c=a(65074),p=a(91036),u=a(70579);const j=e=>{let{open:t,onClose:a,existingTaskType:j,onCreate:m,onUpdate:_}=e;const[h,v]=(0,r.useState)({Task_Type:"",Task_Type_Id:"",Project_Id:"",ProjectName:"",Day_Duration:"",Status:"1"}),[x,y]=(0,r.useState)([]),[g,D]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(async()=>{D(!0);try{var e;const t=(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.Company_id)||1,a=await(0,c.z)({address:"taskManagement/project/Abstract?Company_id=".concat(t)});a.success?y(a.data||[]):console.error("Failed to fetch projects:",a.message)}catch(t){console.error("Error fetching projects:",t)}finally{D(!1)}})()},[t]),(0,r.useEffect)(()=>{if(j&&t&&x.length>0){var e,a,r,n;const t=x.find(e=>{var t;return e.Project_Id.toString()==(null===(t=j.ProjectId)||void 0===t?void 0:t.toString())}),i=(0,s.A)((0,s.A)({},j),{},{Project_Id:(null===(e=j.ProjectId)||void 0===e?void 0:e.toString())||(null===(a=j.Project_Id)||void 0===a?void 0:a.toString()),ProjectName:t?t.Project_Name:j.ProjectName||"",Day_Duration:(null===(r=j.Day_Duration)||void 0===r?void 0:r.toString())||"",Status:(null===(n=j.Status)||void 0===n?void 0:n.toString())||"1"});v(i)}else!j&&t&&v({Task_Type:"",Task_Type_Id:"",Project_Id:"",ProjectName:"",Day_Duration:"",Status:"1"})},[j,t,x]);const S=()=>{v({Task_Type:"",Task_Type_Id:"",Project_Id:"",ProjectName:"",Day_Duration:"",Status:"1"}),a()},T=j&&j.ProjectId;return(0,u.jsxs)(n.A,{open:t,onClose:S,fullWidth:!0,maxWidth:"sm",children:[(0,u.jsx)(i.A,{className:"bg-primary text-white mb-2 px-3 py-2",children:j&&j.Task_Type_Id?"UPDATE TASK TYPE":"CREATE TASK TYPE"}),(0,u.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!h.Task_Type.trim())return void p.oR.error("Please enter a Task Type");if(!h.Project_Id)return void p.oR.error("Please select a Project");if(!h.Day_Duration||parseInt(h.Day_Duration)<1)return void p.oR.error("Please enter a valid number of days");console.log("inputvalue",h);const t=(0,s.A)((0,s.A)({},h),{},{Project_Id:parseInt(h.Project_Id),Day_Duration:h.Day_Duration,Status:parseInt(h.Status),Created_Date:(new Date).toISOString().split("T")[0],Est_StartDate:(new Date).toISOString().split("T")[0],Est_EndDate:new Date(Date.now()+24*h.Day_Duration*60*60*1e3).toISOString().split("T")[0]});j&&j.Task_Type_Id?_(t):m(t),a()},children:[(0,u.jsxs)(o.A,{children:[(0,u.jsxs)("div",{className:"p-2",children:[(0,u.jsx)("label",{children:"Project"}),(0,u.jsxs)("select",{value:h.Project_Id||"",onChange:e=>{const t=e.target.value,a=x.find(e=>e.Project_Id.toString()===t);v(e=>(0,s.A)((0,s.A)({},e),{},{Project_Id:t,ProjectName:a?a.Project_Name:""}))},className:"cus-inpt",required:!0,disabled:T,style:{width:"100%",padding:"8px",marginBottom:"16px"},children:[(0,u.jsx)("option",{value:"",disabled:!0,children:g?"Loading projects...":"Select Project"}),x.map(e=>(0,u.jsx)("option",{value:e.Project_Id.toString(),children:e.Project_Name},e.Project_Id))]})]}),(0,u.jsxs)("div",{className:"p-2",children:[(0,u.jsx)("label",{children:"Task Type"}),(0,u.jsx)("input",{type:"text",value:h.Task_Type,onChange:e=>v((0,s.A)((0,s.A)({},h),{},{Task_Type:e.target.value})),className:"cus-inpt",required:!0,placeholder:"Enter task type (e.g., Development, Testing)",style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,u.jsxs)("div",{className:"p-2",children:[(0,u.jsx)("label",{children:"Number Of Days"}),(0,u.jsx)("input",{type:"number",value:h.Day_Duration||"",onChange:e=>{const{value:t}=e.target;v(e=>(0,s.A)((0,s.A)({},e),{},{Day_Duration:t}))},className:"cus-inpt",required:!0,min:"1",placeholder:"Enter number of days",style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,u.jsxs)("div",{className:"p-2",children:[(0,u.jsx)("label",{children:"Estimated Start Date"}),(0,u.jsx)("input",{type:"date",value:h.Est_StartDate,onChange:e=>v((0,s.A)((0,s.A)({},h),{},{Est_StartDate:e.target.value})),className:"cus-inpt",required:!0,style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,u.jsxs)("div",{className:"p-2",children:[(0,u.jsx)("label",{children:"Estimated End Date"}),(0,u.jsx)("input",{type:"date",value:h.Est_EndDate,onChange:e=>v((0,s.A)((0,s.A)({},h),{},{Est_EndDate:e.target.value})),className:"cus-inpt",required:!0,style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,u.jsxs)("div",{className:"p-2",children:[(0,u.jsx)("label",{children:"Status"}),(0,u.jsxs)("select",{className:"cus-inpt",value:h.Status,onChange:e=>v((0,s.A)((0,s.A)({},h),{},{Status:e.target.value})),required:!0,style:{width:"100%",padding:"8px",marginBottom:"16px"},children:[(0,u.jsx)("option",{value:"",disabled:!0,children:"Select Status"}),(0,u.jsx)("option",{value:"1",children:"Active"}),(0,u.jsx)("option",{value:"0",children:"Inactive"}),(0,u.jsx)("option",{value:"2",children:"Pending"}),(0,u.jsx)("option",{value:"3",children:"Completed"})]})]})]}),(0,u.jsxs)(d.A,{children:[(0,u.jsx)(l.A,{onClick:S,className:"btn btn-light rounded-5 px-3",children:"Cancel"}),(0,u.jsx)(l.A,{type:"submit",variant:"contained",className:"btn btn-primary rounded-5 px-3",children:j&&j.Task_Type_Id?"Update":"Save"})]})]})]})}}}]);
//# sourceMappingURL=8471.58b4a75b.chunk.js.map