{"version":3,"file":"static/js/2821.93eeae84.chunk.js","mappings":"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","sources":["Pages/Purchase/PurchaseInvoice/variable.js","Pages/Purchase/PurchaseInvoice/addToCart.jsx","Pages/Purchase/PurchaseInvoice/StaffInfoComp.jsx","Pages/Purchase/PurchaseInvoice/generalInfoComp.jsx","Pages/Purchase/PurchaseInvoice/manageExpences.jsx","Pages/Purchase/PurchaseInvoice/purchaseInvoiceCreate.jsx"],"sourcesContent":["import { ISOString, isValidJSON } from \"../../../Components/functions\";\r\n\r\nconst user = localStorage.getItem('user');\r\nconst storage = isValidJSON(user) ? JSON.parse(user) : {};\r\n\r\nexport const initialInvoiceValue = {\r\n    PIN_Id: '',\r\n    Po_Inv_No: '',\r\n    Branch_Id: '',\r\n    Voucher_Type: 0,\r\n    Ref_Po_Inv_No: '',\r\n    Po_Inv_Date: ISOString(),\r\n    Po_Entry_Date: ISOString(),\r\n    Retailer_Id: '',\r\n    Retailer_Name: '',\r\n    GST_Inclusive: 2,\r\n    IS_IGST: 0,\r\n    Narration: '',\r\n    isConverted: '',\r\n    CSGT_Total: 0,\r\n    SGST_Total: 0,\r\n    IGST_Total: 0,\r\n    Round_off: 0,\r\n    Total_Before_Tax: 0,\r\n    Total_Tax: 0,\r\n    Total_Invoice_value: 0,\r\n    Cancel_status: 0,\r\n    Stock_Item_Ledger_Name: '',\r\n    Created_by: storage.UserId,\r\n    Altered_by: storage.UserId,\r\n    Created_on: '',\r\n    Alterd_on: '',\r\n    Trans_Type: '',\r\n    Alter_Id: '',\r\n    Approved_By: '',\r\n    Approve_Status: '',\r\n    Discount: 0,\r\n    QualityCondition: '',\r\n    PaymentDays: 0,\r\n}\r\n\r\nexport const itemsRowDetails = {\r\n    Trip_Id: '',\r\n    Trip_Item_SNo: '',\r\n    POI_St_Id: '',\r\n    DeliveryId: '',\r\n    OrderId: '',\r\n    PIN_Id: '',\r\n    Po_Inv_Date: '',\r\n    S_No: '',\r\n    Location_Id: '',\r\n    Item_Id: '',\r\n    Item_Name: '',\r\n    Bill_Qty: 0,\r\n    Act_Qty: 0,\r\n    Item_Rate: 0,\r\n    Bill_Alt_Qty: 0,\r\n    Alt_Act_Qty: 0,\r\n    Free_Qty: 0,\r\n    Unit_Id: '',\r\n    Unit_Name: '',\r\n    Batch_No: '',\r\n    Taxable_Rate: 0,\r\n    Amount: 0,\r\n    Total_Qty: 0,\r\n    Taxble: 0,\r\n    HSN_Code: '',\r\n    Taxable_Amount: 0,\r\n    Tax_Rate: 0,\r\n    Cgst: 0,\r\n    Cgst_Amo: 0,\r\n    Sgst: 0,\r\n    Sgst_Amo: 0,\r\n    Igst: 0,\r\n    Igst_Amo: 0,\r\n    Final_Amo: 0,\r\n    Created_on: '',\r\n}\r\n\r\nexport const staffRowDetails = {\r\n    Id: '',\r\n    PIN_Id: '',\r\n    Involved_Emp_Id: '',\r\n    Involved_Emp_Name: 'select',\r\n    Cost_Center_Type_Id: '',\r\n}\r\n\r\nexport const purchaseExpenceInfo = {\r\n    PA_Id: '',\r\n    PIN_Id: '',\r\n    Expense_Id: '',\r\n    Amount_value_DR: 0,\r\n    Amount_value_CR: 0,\r\n}","import { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle } from \"@mui/material\";\r\nimport { checkIsNumber, Division, isEqualNumber, isValidNumber, isValidObject, Multiplication, onlynum, reactSelectFilterLogic, toArray } from \"../../../Components/functions\";\r\nimport { ClearAll } from \"@mui/icons-material\";\r\nimport RequiredStar from \"../../../Components/requiredStar\";\r\nimport { calculateGSTDetails } from \"../../../Components/taxCalculator\";\r\nimport Select from \"react-select\";\r\nimport { customSelectStyles } from \"../../../Components/tablecolumn\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst AddItemsDialog = ({\r\n    children,\r\n    orderProducts = [],\r\n    setOrderProducts,\r\n    open = false,\r\n    onClose,\r\n    products = [],\r\n    brands = [],\r\n    uom = [],\r\n    godowns = [],\r\n    GST_Inclusive,\r\n    IS_IGST,\r\n    editValues = null,\r\n    initialValue = {},\r\n}) => {\r\n\r\n    const [productDetails, setProductDetails] = useState(initialValue);\r\n\r\n    const isInclusive = isEqualNumber(GST_Inclusive, 1);\r\n    const isNotTaxableBill = isEqualNumber(GST_Inclusive, 2);\r\n\r\n    const lastEditedRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (isValidObject(editValues) && open) {\r\n            setProductDetails(pre => (\r\n                Object.fromEntries(\r\n                    Object.entries(pre).map(([key, value]) => [key, editValues[key] ? editValues[key] : value])\r\n                )\r\n            ))\r\n        }\r\n    }, [editValues])\r\n\r\n    const findProductDetails = (productid) => products?.find(obj => isEqualNumber(obj?.Product_Id, productid)) ?? {};\r\n\r\n    const productInfo = useMemo(() => {\r\n        const currentProduct = findProductDetails(productDetails.Item_Id);\r\n        return productDetails.Item_Id ? currentProduct : {};\r\n    }, [products, productDetails.Item_Id]);\r\n\r\n    const onRateChange = (value) => {\r\n        lastEditedRef.current = 'RATE';\r\n        setProductDetails(prev => ({ ...prev, Item_Rate: value }));\r\n    };\r\n\r\n    const onAmountChange = (value) => {\r\n        lastEditedRef.current = 'AMOUNT';\r\n        setProductDetails(prev => ({ ...prev, Amount: value }));\r\n    };\r\n\r\n    useEffect(() => {\r\n        const { Item_Rate, Amount, Bill_Qty } = productDetails;\r\n\r\n        if (!isValidNumber(Bill_Qty) || Bill_Qty === 0) return;\r\n\r\n        if ((lastEditedRef.current === 'RATE' || lastEditedRef.current === 'QTY') && isValidNumber(Item_Rate)) {\r\n            const amount = Multiplication(Item_Rate, Bill_Qty);\r\n            setProductDetails(prev =>\r\n                prev.Amount === amount\r\n                    ? prev\r\n                    : { ...prev, Amount: amount }\r\n            );\r\n        }\r\n\r\n        if (lastEditedRef.current === 'AMOUNT' && isValidNumber(Amount)) {\r\n            const rate = Division(Amount, Bill_Qty);\r\n            setProductDetails(prev =>\r\n                prev.Item_Rate === rate\r\n                    ? prev\r\n                    : { ...prev, Item_Rate: rate }\r\n            );\r\n        }\r\n    }, [productDetails.Item_Rate, productDetails.Amount, productDetails.Bill_Qty, productDetails.Act_Qty]);\r\n\r\n    const closeDialog = () => {\r\n        setProductDetails(initialValue);\r\n        onClose();\r\n    }\r\n\r\n    const handleProductInputChange = () => {\r\n\r\n        setOrderProducts(pre => {\r\n            const existingProducts = pre.filter(ordered => !isEqualNumber(ordered.Item_Id, productDetails.Item_Id));\r\n\r\n            const currentProductDetails = Object.fromEntries(\r\n                Object.entries(initialValue).map(([key, value]) => {\r\n                    const productMaster = findProductDetails(productDetails.Item_Id);\r\n                    const gstPercentage = IS_IGST ? productMaster.Igst_P : productMaster.Gst_P;\r\n                    const isTaxable = gstPercentage > 0;\r\n\r\n                    const { Bill_Qty, Item_Rate, Amount } = productDetails;\r\n\r\n                    const taxType = isNotTaxableBill ? 'zerotax' : isInclusive ? 'remove' : 'add';\r\n                    const itemRateGst = calculateGSTDetails(Item_Rate, gstPercentage, taxType);\r\n                    const gstInfo = calculateGSTDetails(Amount, gstPercentage, taxType);\r\n\r\n                    const cgstPer = !IS_IGST ? gstInfo.cgst_per : 0;\r\n                    const igstPer = IS_IGST ? gstInfo.igst_per : 0;\r\n                    const Cgst_Amo = !IS_IGST ? gstInfo.cgst_amount : 0;\r\n                    const Igst_Amo = IS_IGST ? gstInfo.igst_amount : 0;\r\n\r\n                    switch (key) {\r\n                        case 'Item_Name': return [key, productMaster.Product_Name]\r\n                        case 'Taxable_Rate': return [key, itemRateGst.base_amount]\r\n                        case 'Total_Qty': return [key, Bill_Qty]\r\n                        case 'Taxble': return [key, isTaxable ? 1 : 0]\r\n                        case 'Taxable_Amount': return [key, gstInfo.base_amount]\r\n                        case 'Tax_Rate': return [key, gstPercentage]\r\n                        case 'Cgst':\r\n                        case 'Sgst': return [key, cgstPer ?? 0]\r\n                        case 'Cgst_Amo':\r\n                        case 'Sgst_Amo': return [key, isNotTaxableBill ? 0 : Cgst_Amo]\r\n                        case 'Igst': return [key, igstPer ?? 0]\r\n                        case 'Igst_Amo': return [key, isNotTaxableBill ? 0 : Igst_Amo]\r\n                        case 'Final_Amo': return [key, gstInfo.with_tax]\r\n\r\n                        default: return [key, productDetails[key] || value]\r\n                    }\r\n                })\r\n            );\r\n\r\n            return [...existingProducts, currentProductDetails];\r\n        });\r\n\r\n        closeDialog();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {children}\r\n\r\n            <Dialog\r\n                open={open}\r\n                onClose={closeDialog}\r\n                maxWidth='md' fullWidth\r\n            >\r\n                <DialogTitle className=\"border-bottom\">\r\n                    <span>Add Products Details</span>\r\n                </DialogTitle>\r\n                <form onSubmit={e => {\r\n                    e.preventDefault();\r\n                    if (productDetails.Item_Id) {\r\n                        handleProductInputChange();\r\n                    } else {\r\n                        toast.warn('Select Product');\r\n                    }\r\n                }}>\r\n                    <DialogContent>\r\n                        <div className=\"row pb-5\">\r\n\r\n                            {/* brand */}\r\n                            <div className=\"col-6 p-2\">\r\n                                <label>Brand</label>\r\n                                <Select\r\n                                    value={{ value: productDetails.BrandID, label: productDetails.Brand }}\r\n                                    onChange={(e) => setProductDetails(pre => ({ ...pre, BrandID: e.value, Brand: e.label }))}\r\n                                    options={[\r\n                                        { value: '', label: 'select', isDisabled: true },\r\n                                        ...brands.map(obj => ({ value: obj?.Brand, label: obj?.Brand_Name }))\r\n                                    ]}\r\n                                    styles={customSelectStyles}\r\n                                    menuPortalTarget={document.body}\r\n                                    isSearchable={true}\r\n                                    placeholder={\"Select Brand\"}\r\n                                    maxMenuHeight={200}\r\n                                    filterOption={reactSelectFilterLogic}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* group */}\r\n                            <div className=\"col-6 p-2\">\r\n                                <label>Group</label>\r\n                                <Select\r\n                                    value={{ value: productDetails.GroupID, label: productDetails.Group }}\r\n                                    onChange={(e) =>\r\n                                        setProductDetails((pre) => ({ ...pre, GroupID: e.value, Group: e.label }))\r\n                                    }\r\n                                    options={[\r\n                                        { value: '', label: 'select', isDisabled: true },\r\n                                        ...products\r\n                                            .filter(\r\n                                                (pro) =>\r\n                                                    productDetails.BrandID\r\n                                                        ? isEqualNumber(pro.Brand, productDetails.BrandID)\r\n                                                        : true\r\n                                            )\r\n                                            .reduce((acc, pro) => {\r\n                                                if (\r\n                                                    !acc.some((grp) => grp.value === pro.Product_Group)\r\n                                                ) {\r\n                                                    acc.push({\r\n                                                        value: pro.Product_Group,\r\n                                                        label: pro.Pro_Group,\r\n                                                    });\r\n                                                }\r\n                                                return acc;\r\n                                            }, []),\r\n                                    ]}\r\n                                    styles={customSelectStyles}\r\n                                    menuPortalTarget={document.body}\r\n                                    isSearchable={true}\r\n                                    placeholder={\"Select Group\"}\r\n                                    maxMenuHeight={200}\r\n                                    filterOption={reactSelectFilterLogic}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* item name */}\r\n                            <div className={'col-md-8 p-2'}>\r\n                                <label>Item Name <RequiredStar /></label>\r\n                                <Select\r\n                                    value={{\r\n                                        value: productDetails.Item_Id,\r\n                                        label: (\r\n                                            findProductDetails(productDetails.Item_Id)?.Product_Name\r\n                                        )\r\n                                    }}\r\n                                    isDisabled={checkIsNumber(productDetails.Pre_Id)}\r\n                                    menuPortalTarget={document.body}\r\n                                    onChange={e => {\r\n                                        const productInfo = findProductDetails(e.value);\r\n                                        setProductDetails(pre => ({\r\n                                            ...pre,\r\n\r\n                                            Group: productInfo.Pro_Group ?? pre.Group,\r\n                                            GroupID: productInfo.Product_Group ?? pre.GroupID,\r\n                                            Brand: productInfo.Brand_Name ?? pre.Brand,\r\n                                            BrandID: productInfo.Brand ?? pre.BrandID,\r\n\r\n                                            Item_Id: e.value,\r\n                                            Item_Rate: productInfo.Item_Rate ?? 0,\r\n                                            Bill_Qty: 0,\r\n                                            Amount: 0,\r\n                                            Unit_Id: productInfo.UOM_Id ?? pre.Unit_Id,\r\n                                            Unit_Name: productInfo.Units ?? pre.Unit_Name,\r\n                                            HSN_Code: productInfo?.HSN_Code\r\n                                        }));\r\n                                    }}\r\n                                    options={[\r\n                                        { value: '', label: 'select', isDisabled: true },\r\n                                        ...[\r\n                                            ...products\r\n                                                .filter(pro => productDetails.BrandID ? isEqualNumber(pro.Brand, productDetails.BrandID) : true)\r\n                                                .filter(pro => productDetails.GroupID ? isEqualNumber(pro.Product_Group, productDetails.GroupID) : true)\r\n                                        ].map(obj => ({\r\n                                            value: obj?.Product_Id,\r\n                                            label: obj?.Product_Name,\r\n                                            isDisabled: (\r\n                                                orderProducts.findIndex(ind => isEqualNumber(\r\n                                                    ind?.Item_Id, obj?.Product_Id\r\n                                                ))\r\n                                            ) === -1 ? false : true\r\n                                        }))\r\n                                    ]}\r\n                                    styles={customSelectStyles}\r\n                                    isSearchable={true}\r\n                                    required\r\n                                    placeholder={\"Select Product\"}\r\n                                    maxMenuHeight={200}\r\n                                    filterOption={reactSelectFilterLogic}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* godown  */}\r\n                            <div className=\"col-md-4 p-2\">\r\n                                <label>Godown</label>\r\n                                <Select\r\n                                    value={{\r\n                                        value: productDetails?.Location_Id,\r\n                                        label: godowns.find(\r\n                                            g => isEqualNumber(g.Godown_Id, productDetails?.Location_Id)\r\n                                        )?.Godown_Name || ''\r\n                                    }}\r\n                                    onChange={(e) => setProductDetails(pre => ({ ...pre, Location_Id: e.value }))}\r\n                                    options={[\r\n                                        { value: '', label: 'select', isDisabled: true },\r\n                                        ...toArray(godowns).map(obj => ({\r\n                                            value: obj?.Godown_Id,\r\n                                            label: obj?.Godown_Name\r\n                                        }))\r\n                                    ]}\r\n                                    styles={customSelectStyles}\r\n                                    isDisabled={!checkIsNumber(productDetails?.Item_Id)}\r\n                                    menuPortalTarget={document.body}\r\n                                    isSearchable={true}\r\n                                    placeholder={\"Select Godown\"}\r\n                                    filterOption={reactSelectFilterLogic}\r\n                                // maxMenuHeight={200}  \r\n                                />\r\n                            </div>\r\n\r\n                            {/* act qty */}\r\n                            <div className=\"col-md-6 p-2\">\r\n                                <label>Actual Quantity </label>\r\n                                <input\r\n                                    value={productDetails.Act_Qty ? productDetails.Act_Qty : ''}\r\n                                    onInput={onlynum}\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                    onChange={e => {\r\n                                        lastEditedRef.current = 'QTY';\r\n                                        const pack = productInfo?.PackGet;\r\n                                        const alterQuantity = Division(e.target.value, pack);\r\n                                        setProductDetails(pre => ({\r\n                                            ...pre,\r\n                                            Act_Qty: e.target.value,\r\n                                            Bill_Qty: e.target.value,\r\n                                            Alt_Act_Qty: alterQuantity,\r\n                                            Alt_Bill_Qty: alterQuantity\r\n                                        }))\r\n                                    }}\r\n                                    required\r\n                                    className=\"cus-inpt\"\r\n                                />\r\n                            </div>\r\n\r\n                            {/* alter actual quantity */}\r\n                            <div className=\"col-md-6 p-2\">\r\n                                <label>Alt Act Quantity</label>\r\n                                <input\r\n                                    value={productDetails.Alt_Act_Qty || ''}\r\n                                    className=\"cus-inpt\"\r\n                                    type=\"number\"\r\n                                    onChange={e => {\r\n                                        lastEditedRef.current = 'QTY';\r\n                                        const pack = productInfo?.PackGet;\r\n                                        const qty = Multiplication(e.target.value, pack)\r\n                                        setProductDetails(pre => ({\r\n                                            ...pre,\r\n                                            Alt_Act_Qty: e.target.value,\r\n                                            Alt_Bill_Qty: e.target.value,\r\n                                            Act_Qty: qty,\r\n                                            Bill_Qty: qty,\r\n                                        }));\r\n                                    }}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* bill quantity */}\r\n                            <div className=\"col-md-6 p-2\">\r\n                                <label>Bill Quantity <RequiredStar /></label>\r\n                                <input\r\n                                    required\r\n                                    value={productDetails.Bill_Qty ? productDetails.Bill_Qty : ''}\r\n                                    onInput={onlynum}\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                    onChange={e => {\r\n                                        lastEditedRef.current = 'QTY';\r\n                                        const pack = productInfo?.PackGet;\r\n                                        const alterQuantity = Division(e.target.value, pack);\r\n                                        setProductDetails(pre => ({\r\n                                            ...pre,\r\n                                            Bill_Qty: e.target.value,\r\n                                            Alt_Bill_Qty: alterQuantity,\r\n                                        }));\r\n                                    }}\r\n                                    className=\"cus-inpt\"\r\n                                    min={1}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* alt bill qty */}\r\n                            <div className=\"col-md-6 p-2\">\r\n                                <label>Alt Bill Quantity</label>\r\n                                <input\r\n                                    value={productDetails.Alt_Bill_Qty || ''}\r\n                                    className=\"cus-inpt\"\r\n                                    type=\"number\"\r\n                                    onChange={e => {\r\n                                        lastEditedRef.current = 'QTY';\r\n                                        const pack = productInfo?.PackGet;\r\n                                        setProductDetails(pre => ({\r\n                                            ...pre,\r\n                                            Alt_Bill_Qty: e.target.value,\r\n                                            Bill_Qty: Multiplication(e.target.value, pack),\r\n                                        }));\r\n                                    }}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Rate */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>Rate </label>\r\n                                <input\r\n                                    value={productDetails.Item_Rate || ''}\r\n                                    onInput={onlynum}\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                    onChange={e => onRateChange(e.target.value)}\r\n                                    required\r\n                                    className=\"cus-inpt\"\r\n                                />\r\n                            </div>\r\n\r\n                            {/* UOM */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>UOM</label>\r\n                                <select\r\n                                    value={\r\n                                        Object.hasOwn(productDetails, 'UOM') ? productDetails.UOM :\r\n                                            Object.hasOwn(productDetails, 'Unit_Id') ? productDetails.Unit_Id : ''\r\n                                    }\r\n                                    onChange={e => {\r\n                                        const selectedIndex = e.target.selectedIndex;\r\n                                        const label = e.target.options[selectedIndex].text;\r\n                                        const value = e.target.value;\r\n                                        setProductDetails(pre => ({\r\n                                            ...pre,\r\n                                            UOM: value,\r\n                                            Unit_Id: value,\r\n                                            Units: label,\r\n                                            Unit_Name: label,\r\n                                        }));\r\n                                    }}\r\n                                    className=\"cus-inpt\"\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                >\r\n                                    <option value=\"\" disabled>select</option>\r\n                                    {uom.map((o, i) => (\r\n                                        <option value={o.Unit_Id} key={i} >{o.Units}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n\r\n                            {/* Amount */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>Amount</label>\r\n                                <input\r\n                                    required\r\n                                    value={productDetails.Amount || ''}\r\n                                    onInput={onlynum}\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                    onChange={e => onAmountChange(e.target.value)}\r\n                                    className=\"cus-inpt\"\r\n                                    min={1}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Batch */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>Batch</label>\r\n                                <input\r\n                                    value={productDetails.Batch_No ? productDetails.Batch_No : ''}\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                    onChange={e => setProductDetails(pre => ({\r\n                                        ...pre,\r\n                                        Batch_No: e.target.value\r\n                                    }))}\r\n                                    className=\"cus-inpt\"\r\n                                />\r\n                            </div>\r\n                            \r\n                        </div>\r\n\r\n                    </DialogContent>\r\n                    <DialogActions className=\"d-flex justify-content-between align-items-center\">\r\n                        <Button onClick={() => setProductDetails(initialValue)} type='button' startIcon={<ClearAll />}>Clear</Button>\r\n                        <span>\r\n                            <Button type=\"button\" onClick={closeDialog}>cancel</Button>\r\n                            <Button type='submit' variant=\"outlined\">Add</Button>\r\n                        </span>\r\n                    </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddItemsDialog;","import { Button, IconButton } from \"@mui/material\";\r\nimport { checkIsNumber, isEqualNumber, reactSelectFilterLogic } from \"../../../Components/functions\";\r\nimport { customSelectStyles } from \"../../../Components/tablecolumn\";\r\nimport Select from 'react-select';\r\nimport { Delete } from \"@mui/icons-material\";\r\n\r\nconst PurchaseInvoiceStaffInvolved = ({\r\n    baseData,\r\n    StaffArray,\r\n    setStaffArray,\r\n    staffRowDetails\r\n}) => {\r\n    return (\r\n        <>\r\n\r\n            {/* staff info */}\r\n            <div className=\"col-xxl-3 col-lg-4 col-md-5 p-2\">\r\n                <div className=\"border p-2\" style={{ minHeight: '30vh', height: '100%' }}>\r\n                    <div className=\"d-flex align-items-center flex-wrap mb-2 border-bottom pb-2\">\r\n                        <h6 className=\"flex-grow-1 m-0\">Staff Involved</h6>\r\n                        <Button\r\n                            variant=\"outlined\"\r\n                            color=\"primary\"\r\n                            type=\"button\"\r\n                            onClick={() => setStaffArray([...StaffArray, { ...staffRowDetails }])}\r\n                        >Add</Button>\r\n                    </div>\r\n                    <table className=\"table table-bordered\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th className=\"fa-13\">Sno</th>\r\n                                <th className=\"fa-13\">Staff Name</th>\r\n                                <th className=\"fa-13\">Category</th>\r\n                                <th className=\"fa-13\">#</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {StaffArray.map((row, index) => (\r\n                                <tr key={index}>\r\n                                    <td className='fa-13 vctr text-center'>{index + 1}</td>\r\n                                    <td className='fa-13 w-100 p-0'>\r\n                                        <Select\r\n                                            value={{\r\n                                                value: row?.Involved_Emp_Id,\r\n                                                label: row?.Involved_Emp_Name,\r\n                                            }}\r\n                                            onChange={e => setStaffArray((prev) => {\r\n                                                return prev.map((item, ind) => {\r\n                                                    if (isEqualNumber(ind, index)) {\r\n                                                        const staff = baseData.staff.find(c => isEqualNumber(c.Cost_Center_Id, e.value))\r\n                                                        return {\r\n                                                            ...item,\r\n                                                            Cost_Center_Type_Id:\r\n                                                                checkIsNumber(item.Cost_Center_Type_Id)\r\n                                                                    ? Number(item.Cost_Center_Type_Id)\r\n                                                                    : checkIsNumber(staff.User_Type)\r\n                                                                        ? Number(staff.User_Type)\r\n                                                                        : 0,\r\n                                                            Involved_Emp_Id: Number(e.value),\r\n                                                            Involved_Emp_Name: e.label\r\n                                                        }\r\n                                                    }\r\n                                                    return item;\r\n                                                });\r\n                                            })}\r\n                                            options={\r\n                                                [...baseData.staff.filter(fil => (\r\n                                                    !StaffArray.some(st => (\r\n                                                        isEqualNumber(st.Involved_Emp_Id, fil.Cost_Center_Id)\r\n                                                    ))\r\n                                                ))].map(st => ({\r\n                                                    value: st.Cost_Center_Id,\r\n                                                    label: st.Cost_Center_Name\r\n                                                }))\r\n                                            }\r\n                                            styles={customSelectStyles}\r\n                                            isSearchable={true}\r\n                                            placeholder={\"Select Staff\"}\r\n                                            filterOption={reactSelectFilterLogic}\r\n                                        />\r\n                                    </td>\r\n                                    <td className='fa-13 vctr p-0' style={{ maxWidth: '130px', minWidth: '100px' }}>\r\n                                        <select\r\n                                            value={row?.Cost_Center_Type_Id}\r\n                                            onChange={e => setStaffArray((prev) => {\r\n                                                return prev.map((item, ind) => {\r\n                                                    if (isEqualNumber(ind, index)) {\r\n                                                        return {\r\n                                                            ...item,\r\n                                                            Cost_Center_Type_Id: e.target.value\r\n                                                        }\r\n                                                    }\r\n                                                    return item;\r\n                                                });\r\n                                            })}\r\n                                            className=\"cus-inpt p-2 border-0\"\r\n                                        >\r\n                                            <option value=\"\">Select</option>\r\n                                            {baseData.staffType.map((st, sti) =>\r\n                                                <option value={st?.Cost_Category_Id} key={sti}>{st?.Cost_Category}</option>\r\n                                            )}\r\n                                        </select>\r\n                                    </td>\r\n                                    <td className='fa-13 vctr p-0'>\r\n                                        <IconButton\r\n                                            onClick={() => {\r\n                                                setStaffArray(prev => {\r\n                                                    return prev.filter((_, filIndex) => index !== filIndex);\r\n                                                });\r\n                                            }}\r\n                                            size='small'\r\n                                        >\r\n                                            <Delete color='error' />\r\n                                        </IconButton>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default PurchaseInvoiceStaffInvolved;","import { reactSelectFilterLogic, stringCompare } from \"../../../Components/functions\";\r\nimport RequiredStar from \"../../../Components/requiredStar\";\r\nimport { customSelectStyles } from \"../../../Components/tablecolumn\";\r\nimport Select from 'react-select';\r\n\r\n\r\nconst PurchaseInvoiceGeneralInfo = ({\r\n    invoiceDetails,\r\n    setInvoiceDetails,\r\n    baseData,\r\n    selectedItems,\r\n    setSelectedItems,\r\n    searchFromArrival,\r\n    inputStyle,\r\n}) => {\r\n\r\n    return (\r\n        <>\r\n            <div className=\"col-xxl-9 col-lg-8 col-md-7 py-2 px-0\">\r\n                <div className=\"border px-3 py-1\" style={{ minHeight: '30vh', height: '100%' }}>\r\n                    <div className=\"row\">\r\n\r\n                        <div className=\"col-sm-8 p-2\">\r\n                            <label className='fa-13'>Vendor</label>\r\n                            <Select\r\n                                value={{\r\n                                    value: invoiceDetails?.Retailer_Id,\r\n                                    label: invoiceDetails?.Retailer_Name\r\n                                }}\r\n                                onChange={e => {\r\n                                    setInvoiceDetails(pre => ({\r\n                                        ...pre,\r\n                                        Retailer_Id: e.value,\r\n                                        Retailer_Name: e.label\r\n                                    }));\r\n                                    setSelectedItems([]);\r\n                                    searchFromArrival(e.value)\r\n                                }}\r\n                                options={[\r\n                                    { value: '', label: 'Search', isDisabled: true },\r\n                                    ...baseData.retailers.map(obj => ({\r\n                                        value: obj?.Retailer_Id,\r\n                                        label: obj?.Retailer_Name\r\n                                    }))\r\n                                ]}\r\n                                styles={customSelectStyles}\r\n                                isSearchable={true}\r\n                                placeholder={\"Select Vendor\"}\r\n                                maxMenuHeight={300}\r\n                                filterOption={reactSelectFilterLogic}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"col-sm-4 p-2\">\r\n                            <label className='fa-13'>Voucher Type</label>\r\n                            <select\r\n                                value={invoiceDetails.Voucher_Type}\r\n                                onChange={e => setInvoiceDetails(pre => ({ ...pre, Voucher_Type: e.target.value }))}\r\n                                className={inputStyle}\r\n                                required\r\n                            >\r\n                                <option value=\"\">Select</option>\r\n                                {baseData.voucherType.filter(\r\n                                    fil => stringCompare(fil.Type, 'PURCHASE_INVOICE')\r\n                                ).map((vou, vind) =>\r\n                                    <option\r\n                                        value={vou.Vocher_Type_Id}\r\n                                        key={vind}\r\n                                    >{vou.Voucher_Type}</option>\r\n                                )}\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div className=\"col-xl-3 col-md-4 col-sm-6 p-2\">\r\n                            <label className='fa-13'>Branch <RequiredStar /></label>\r\n                            <select\r\n                                className={inputStyle}\r\n                                value={invoiceDetails?.Branch_Id}\r\n                                required\r\n                                onChange={e => setInvoiceDetails(pre => ({ ...pre, Branch_Id: e.target.value }))}\r\n                            >\r\n                                <option value=\"\">select</option>\r\n                                {baseData.branch.map((o, i) => (\r\n                                    <option value={o?.BranchId} key={i}>{o?.BranchName}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div className=\"col-xl-3 col-md-4 col-sm-6 p-2\">\r\n                            <label className='fa-13'>Entry Date <RequiredStar /></label>\r\n                            <input\r\n                                value={invoiceDetails?.Po_Entry_Date}\r\n                                type=\"date\"\r\n                                required\r\n                                className={inputStyle}\r\n                                onChange={e => setInvoiceDetails(pre => ({ ...pre, Po_Entry_Date: e.target.value }))}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"col-xl-3 col-md-4 col-sm-6 p-2\">\r\n                            <label className='fa-13'>Bill Date <RequiredStar /></label>\r\n                            <input\r\n                                value={invoiceDetails?.Po_Inv_Date}\r\n                                type=\"date\"\r\n                                required\r\n                                className={inputStyle}\r\n                                onChange={e => setInvoiceDetails(pre => ({ ...pre, Po_Inv_Date: e.target.value }))}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"col-xl-3 col-md-4 col-sm-6 p-2\">\r\n                            <label className='fa-13'>Ref Number</label>\r\n                            <input\r\n                                value={invoiceDetails?.Ref_Po_Inv_No}\r\n                                className={inputStyle}\r\n                                onChange={e => setInvoiceDetails(pre => ({ ...pre, Ref_Po_Inv_No: e.target.value }))}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"col-xl-3 col-md-4 col-sm-6 p-2\">\r\n                            <label className='fa-13'>GST Type <RequiredStar /></label>\r\n                            <select\r\n                                className={inputStyle}\r\n                                onChange={e => setInvoiceDetails(pre => ({ ...pre, GST_Inclusive: Number(e.target.value) }))}\r\n                                value={invoiceDetails.GST_Inclusive}\r\n                                required\r\n                            >\r\n                                <option value={1}>Inclusive Tax</option>\r\n                                <option value={0}>Exclusive Tax</option>\r\n                                <option value={2}>Not Taxable</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div className=\"col-xl-3 col-md-4 col-sm-6 p-2\">\r\n                            <label className='fa-13'>Tax Type</label>\r\n                            <select\r\n                                className={inputStyle}\r\n                                onChange={e => setInvoiceDetails(pre => ({ ...pre, IS_IGST: Number(e.target.value) }))}\r\n                                value={invoiceDetails.IS_IGST}\r\n                            >\r\n                                <option value='0'>GST</option>\r\n                                <option value='1'>IGST</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div className=\"col-sm-6 p-2\">\r\n                            <label className='fa-13'>Stock Item Ledger Name</label>\r\n                            <Select\r\n                                value={{ value: invoiceDetails.Stock_Item_Ledger_Name, label: invoiceDetails.Stock_Item_Ledger_Name }}\r\n                                onChange={e => setInvoiceDetails(pre => ({ ...pre, Stock_Item_Ledger_Name: e.label }))}\r\n                                options={[\r\n                                    { value: '', label: 'Search', isDisabled: true },\r\n                                    ...baseData.stockItemLedgerName.map(obj => ({\r\n                                        value: obj?.Stock_Item_Ledger_Name,\r\n                                        label: obj?.Stock_Item_Ledger_Name\r\n                                    }))\r\n                                ]}\r\n                                styles={customSelectStyles}\r\n                                required={true}\r\n                                isSearchable={true}\r\n                                placeholder={\"Select\"}\r\n                                maxMenuHeight={300}\r\n                                filterOption={reactSelectFilterLogic}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"col-xl-3 col-md-4 col-sm-6 p-2\">\r\n                            <label className='fa-13'>Discount (% or Amount)</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                className={inputStyle}\r\n                                value={invoiceDetails.Discount}\r\n                                onChange={e => setInvoiceDetails(pre => ({ ...pre, Discount: e.target.value }))}\r\n                                placeholder='ex: 10%, 20% || 250, 300'\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"col-xl-3 col-md-4 col-sm-6 p-2\">\r\n                            <label className='fa-13'>Quality Condition</label>\r\n                            <input\r\n                                className={inputStyle}\r\n                                value={invoiceDetails.QualityCondition}\r\n                                onChange={e => setInvoiceDetails(pre => ({ ...pre, QualityCondition: e.target.value }))}\r\n                                placeholder='discribe the quality'\r\n                                maxLength={150}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"col-xl-3 col-md-4 col-sm-6 p-2\">\r\n                            <label className='fa-13'>Payment Days (in count)</label>\r\n                            <input\r\n                                type=\"number\"\r\n                                className={inputStyle}\r\n                                value={invoiceDetails.PaymentDays}\r\n                                onChange={e => setInvoiceDetails(pre => ({ ...pre, PaymentDays: e.target.value }))}\r\n                                placeholder='ex: 30, 12'\r\n                            />\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <label className='fa-13'>Narration</label>\r\n                    <textarea\r\n                        className=\"cus-inpt fa-14\"\r\n                        rows={2}\r\n                        value={invoiceDetails.Narration}\r\n                        onChange={e => setInvoiceDetails(pre => ({ ...pre, Narration: e.target.value }))}\r\n                    />\r\n\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default PurchaseInvoiceGeneralInfo;","import { Button, Card, IconButton } from \"@mui/material\";\r\nimport { Addition, checkIsNumber, Division, getPercentage, isEqualNumber, isValidNumber, onlynumAndNegative, reactSelectFilterLogic, RoundNumber, toNumber } from \"../../../Components/functions\";\r\nimport { purchaseExpenceInfo } from \"./variable\";\r\nimport { customSelectStyles } from \"../../../Components/tablecolumn\";\r\nimport { Delete } from \"@mui/icons-material\";\r\nimport Select from \"react-select\";\r\nimport { calculateGSTDetails } from \"../../../Components/taxCalculator\";\r\n\r\nconst ExpencesOfPurchaseInvoice = ({\r\n    invoiceExpences = [],\r\n    setInvoiceExpences,\r\n    expenceMaster = [],\r\n    IS_IGST,\r\n    taxType,\r\n    Total_Invoice_value = 0,\r\n}) => {\r\n\r\n    const handleInputChange = (index, field, value) => {\r\n\r\n        setInvoiceExpences(prev =>\r\n            prev.map((item, i) => {\r\n                if (i !== index) return item;\r\n\r\n                const updated = { ...item, [field]: value };\r\n\r\n                if (field === 'Expence_Value') {\r\n                    const\r\n                        Cgst = item.Cgst ? toNumber(item.Cgst) : 0,\r\n                        Sgst = item.Sgst ? toNumber(item.Sgst) : 0,\r\n                        Igst = item.Igst ? toNumber(item.Igst) : 0,\r\n                        expVal = toNumber(value),\r\n                        taxPercentage = IS_IGST ? Igst : Addition(Cgst, Sgst);\r\n\r\n                    const taxAmount = calculateGSTDetails(expVal, taxPercentage, taxType);\r\n\r\n                    updated.Cgst_Amo = (Cgst > 0 && !IS_IGST)\r\n                        ? taxAmount.cgst_amount\r\n                        : 0;\r\n                    updated.Sgst_Amo = (Sgst > 0 && !IS_IGST)\r\n                        ? taxAmount.sgst_amount\r\n                        : 0;\r\n                    updated.Igst_Amo = (Igst > 0 && IS_IGST)\r\n                        ? taxAmount.igst_amount\r\n                        : 0;\r\n                }\r\n\r\n                if (field === 'Igst') {\r\n                    const\r\n                        Igst = IS_IGST ? toNumber(value) : 0,\r\n                        Cgst = !IS_IGST ? Division(toNumber(value), 2) : 0,\r\n                        Sgst = !IS_IGST ? Division(toNumber(value), 2) : 0;\r\n\r\n                    const expVal = toNumber(item.Expence_Value), taxPercentage = IS_IGST ? Igst : Addition(Cgst, Sgst);\r\n                    const taxAmount = calculateGSTDetails(expVal, taxPercentage, taxType);\r\n\r\n                    updated.Cgst = Cgst;\r\n                    updated.Sgst = Sgst;\r\n                    updated.Cgst_Amo = Cgst > 0 ? taxAmount.cgst_amount : 0;\r\n                    updated.Sgst_Amo = Sgst > 0 ? taxAmount.sgst_amount : 0;\r\n                    updated.Igst_Amo = Igst > 0 ? taxAmount.igst_amount : 0;\r\n                }\r\n\r\n                return updated;\r\n            })\r\n        );\r\n    };\r\n\r\n    const handleSelectChange = (index, selectedOption) => {\r\n        const selected = expenceMaster.find(exp => isEqualNumber(exp.Id, selectedOption.value)) || {};\r\n\r\n        const getInvoicedAmountInPercentage = isValidNumber(selected?.percentageValue)\r\n            ? getPercentage(Total_Invoice_value, selected.percentageValue)\r\n            : 0;\r\n\r\n        setInvoiceExpences(prev =>\r\n            prev.map((item, i) => {\r\n                if (i !== index) return item;\r\n                return {\r\n                    ...item,\r\n                    Expense_Id: selected.Id,\r\n                    Expence_Value: RoundNumber(getInvoicedAmountInPercentage)\r\n                };\r\n            })\r\n        );\r\n    };\r\n\r\n    const addNewRow = () => {\r\n        setInvoiceExpences(prev => [...prev, { ...purchaseExpenceInfo, Sno: prev.length }]);\r\n    };\r\n\r\n    const removeRow = index => {\r\n        setInvoiceExpences(prev => prev.filter((_, i) => i !== index));\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Card >\r\n                <div className=\"d-flex align-items-center justify-content-between flex-wrap px-3 py-2\">\r\n                    <h5 className=\"m-0\">Expenses</h5>\r\n                    <Button variant=\"outlined\" type=\"button\" onClick={addNewRow}>Add</Button>\r\n                </div>\r\n                <div className=\"table-responsive\">\r\n                    <table className=\"table table-bordered m-0\">\r\n                        <thead className=\"table-light\">\r\n                            <tr>\r\n                                {[\r\n                                    'S.No', 'Expense',\r\n                                    'Expense Value', 'Action'\r\n                                ].map(\r\n                                    (o, i) => <th className=\"fa-13 bg-light\" key={i}>{o}</th>\r\n                                )}\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody style={{ fontSize: '13px' }}>\r\n                            {invoiceExpences.map((row, index) => {\r\n                                const currentExpenseName = expenceMaster.find(\r\n                                    exp => isEqualNumber(exp.Id, row?.Expense_Id)\r\n                                )?.Expence_Name || '';\r\n\r\n                                return (\r\n                                    <tr key={index}>\r\n                                        <td>{index + 1}</td>\r\n                                        <td className=\"p-0 vctr\" style={{ minWidth: '180px' }}>\r\n                                            <Select\r\n                                                value={{\r\n                                                    value: row?.Expense_Id,\r\n                                                    label: currentExpenseName,\r\n                                                }}\r\n                                                onChange={e => handleSelectChange(index, e)}\r\n                                                options={expenceMaster\r\n                                                    .filter(exp => {\r\n                                                        if (isEqualNumber(exp.Id, row?.Expense_Id)) return true;\r\n                                                        return !invoiceExpences.some(\r\n                                                            (inv, idx) => idx !== index && isEqualNumber(inv.Expense_Id, exp.Id)\r\n                                                        );\r\n                                                    })\r\n                                                    .map(exp => ({ value: exp.Id, label: exp.Expence_Name }))\r\n                                                }\r\n                                                styles={customSelectStyles}\r\n                                                menuPortalTarget={document.body}\r\n                                                isSearchable={true}\r\n                                                placeholder=\"Select Expense\"\r\n                                                filterOption={reactSelectFilterLogic}\r\n                                            />\r\n                                        </td>\r\n                                        <td className=\"p-0 vctr\">\r\n                                            <input\r\n                                                onInput={onlynumAndNegative}\r\n                                                className=\"cus-inpt p-2 border-0\"\r\n                                                value={row.Expence_Value || ''}\r\n                                                disabled={!checkIsNumber(row.Expense_Id)}\r\n                                                onChange={e => {\r\n                                                    handleInputChange(index, 'Expence_Value', e.target.value)\r\n                                                }}\r\n                                            />\r\n                                        </td>\r\n                                        <td className=\"p-0 vctr  text-center \">\r\n                                            <IconButton onClick={() => removeRow(index)} size=\"small\">\r\n                                                <Delete color=\"error\" fontSize=\"small\" />\r\n                                            </IconButton>\r\n                                        </td>\r\n                                    </tr>\r\n                                );\r\n                            })}\r\n                            {invoiceExpences.length === 0 && (\r\n                                <tr><td className=\"text-center\" colSpan={6}>No rows</td></tr>\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </Card>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ExpencesOfPurchaseInvoice;","import { useEffect, useMemo, useState } from \"react\";\r\nimport { fetchLink } from \"../../../Components/fetchComponent\";\r\nimport { Button, Card, CardContent, Dialog, DialogContent, DialogTitle, IconButton, Switch } from \"@mui/material\";\r\nimport { Add, Delete } from \"@mui/icons-material\";\r\nimport { Addition, checkIsNumber, Division, getUniqueData, isEqualNumber, ISOString, isValidObject, Multiplication, NumberFormat, numberToWords, onlynumAndNegative, RoundNumber, stringCompare, toNumber } from \"../../../Components/functions\";\r\nimport FilterableTable, { createCol } from \"../../../Components/filterableTable2\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { calculateGSTDetails } from '../../../Components/taxCalculator';\r\nimport { initialInvoiceValue, itemsRowDetails, staffRowDetails } from \"./variable\";\r\nimport AddItemsDialog from \"./addToCart\";\r\nimport PurchaseInvoiceStaffInvolved from \"./StaffInfoComp\";\r\nimport PurchaseInvoiceGeneralInfo from \"./generalInfoComp\";\r\nimport ExpencesOfPurchaseInvoice from \"./manageExpences\";\r\n\r\nconst findProductDetails = (arr = [], productid) => arr.find(obj => isEqualNumber(obj.Product_Id, productid)) ?? {};\r\n\r\nconst dialogs = {\r\n    addProductDialog: false,\r\n    selectArrivalDialog: false\r\n}\r\n\r\nconst PurchaseInvoiceManagement = ({ loadingOn, loadingOff }) => {\r\n    const location = useLocation();\r\n    const navigation = useNavigate();\r\n    const stateDetails = location.state;\r\n\r\n    const [invoiceDetails, setInvoiceDetails] = useState(initialInvoiceValue);\r\n    const [selectedItems, setSelectedItems] = useState([]);\r\n    const [StaffArray, setStaffArray] = useState([]);\r\n    const [invoiceExpences, setInvoiceExpences] = useState([]);\r\n\r\n    const [deliveryDetails, setDeliveryDetails] = useState([]);\r\n    const [selectedProductToEdit, setSelectedProductToEdit] = useState(null);\r\n\r\n    const tdStyle = 'border fa-14 vctr';\r\n    const inputStyle = 'cus-inpt p-2';\r\n    const isInclusive = isEqualNumber(invoiceDetails?.GST_Inclusive, 1);\r\n    const isNotTaxableBill = isEqualNumber(invoiceDetails?.GST_Inclusive, 2);\r\n    const IS_IGST = isEqualNumber(invoiceDetails?.IS_IGST, 1);\r\n\r\n    const taxType = isNotTaxableBill ? 'zerotax' : isInclusive ? 'remove' : 'add';\r\n\r\n    const [dialog, setDialog] = useState(dialogs);\r\n    const [manualInvoice, setManualInvoice] = useState(false)\r\n\r\n    const [baseData, setBaseData] = useState({\r\n        retailers: [],\r\n        branch: [],\r\n        uom: [],\r\n        products: [],\r\n        voucherType: [],\r\n        stockItemLedgerName: [],\r\n        godown: [],\r\n        staff: [],\r\n        staffType: [],\r\n        brand: [],\r\n        defaultAccounts: []\r\n    });\r\n\r\n    const Total_Invoice_value = useMemo(() => {\r\n        return selectedItems.reduce((acc, item) => {\r\n            const Amount = RoundNumber(item?.Amount);\r\n\r\n            if (isNotTaxableBill) return Addition(acc, Amount);\r\n\r\n            const product = findProductDetails(baseData.products, item.Item_Id);\r\n            const gstPercentage = IS_IGST ? product.Igst_P : product.Gst_P;\r\n\r\n            if (isInclusive) {\r\n                return Addition(acc, calculateGSTDetails(Amount, gstPercentage, 'remove').with_tax);\r\n            } else {\r\n                return Addition(acc, calculateGSTDetails(Amount, gstPercentage, 'add').with_tax);\r\n            }\r\n        }, 0);\r\n    }, [selectedItems, isNotTaxableBill, baseData.products, IS_IGST, isInclusive])\r\n\r\n    const taxSplitUp = useMemo(() => {\r\n        if (!selectedItems || selectedItems.length === 0) return {};\r\n\r\n        let totalTaxable = 0;\r\n        let totalTax = 0;\r\n\r\n        selectedItems.forEach(item => {\r\n            const Amount = RoundNumber(item?.Amount || 0);\r\n\r\n            if (isNotTaxableBill) {\r\n                totalTaxable = Addition(totalTaxable, Amount);\r\n                return;\r\n            }\r\n\r\n            const product = findProductDetails(baseData.products, item.Item_Id);\r\n            const gstPercentage = isEqualNumber(IS_IGST, 1) ? product.Igst_P : product.Gst_P;\r\n\r\n            const taxInfo = calculateGSTDetails(Amount, gstPercentage, isInclusive ? 'remove' : 'add');\r\n\r\n            totalTaxable = Addition(totalTaxable, parseFloat(taxInfo.without_tax));\r\n            totalTax = Addition(totalTax, parseFloat(taxInfo.tax_amount));\r\n        });\r\n\r\n        const totalWithTax = Addition(totalTaxable, totalTax);\r\n        const roundedTotal = Math.round(totalWithTax);\r\n        const roundOff = RoundNumber(roundedTotal - totalWithTax);\r\n\r\n        const cgst = isEqualNumber(IS_IGST, 1) ? 0 : RoundNumber(totalTax / 2);\r\n        const sgst = isEqualNumber(IS_IGST, 1) ? 0 : RoundNumber(totalTax / 2);\r\n        const igst = isEqualNumber(IS_IGST, 1) ? RoundNumber(totalTax) : 0;\r\n\r\n        return {\r\n            totalTaxable: RoundNumber(totalTaxable),\r\n            totalTax: RoundNumber(totalTax),\r\n            cgst,\r\n            sgst,\r\n            igst,\r\n            roundOff,\r\n            invoiceTotal: roundedTotal\r\n        };\r\n\r\n    }, [selectedItems, baseData.products, IS_IGST, isNotTaxableBill, isInclusive]);\r\n\r\n    useEffect(() => {\r\n\r\n        const fetchData = async () => {\r\n            try {\r\n                if (loadingOn) loadingOn();\r\n\r\n                const [\r\n                    retailerResponse,\r\n                    branchResponse,\r\n                    uomResponse,\r\n                    productsResponse,\r\n                    voucherTypeResponse,\r\n                    stockItemLedgerNameResponse,\r\n                    godownLocationsResponse,\r\n                    staffResponse,\r\n                    staffCategory,\r\n                    defaultAccountMasterResponse\r\n                ] = await Promise.all([\r\n                    fetchLink({ address: `masters/retailers/dropDown` }),\r\n                    fetchLink({ address: `masters/branch/dropDown` }),\r\n                    fetchLink({ address: `masters/uom` }),\r\n                    fetchLink({ address: `masters/products` }),\r\n                    fetchLink({ address: `masters/voucher?module=PURCHASE_INVOICE` }),\r\n                    fetchLink({ address: `purchase/stockItemLedgerName?type=PURCHASE_INVOICE` }),\r\n                    fetchLink({ address: `dataEntry/godownLocationMaster` }),\r\n                    fetchLink({ address: `dataEntry/costCenter` }),\r\n                    fetchLink({ address: `dataEntry/costCenter/category` }),\r\n                    fetchLink({ address: `masters/defaultAccountMaster?Type=PURCHASE_INVOICE` })\r\n                ]);\r\n\r\n                const retailersData = (retailerResponse.success ? retailerResponse.data : []).sort(\r\n                    (a, b) => String(a?.Retailer_Name).localeCompare(b?.Retailer_Name)\r\n                );\r\n                const branchData = (branchResponse.success ? branchResponse.data : []).sort(\r\n                    (a, b) => String(a?.BranchName).localeCompare(b?.BranchName)\r\n                );\r\n                const uomData = (uomResponse.success ? uomResponse.data : []).sort(\r\n                    (a, b) => String(a.Units).localeCompare(b.Units)\r\n                );\r\n                const productsData = (productsResponse.success ? productsResponse.data : []).sort(\r\n                    (a, b) => String(a?.Product_Name).localeCompare(b?.Product_Name)\r\n                );\r\n                const voucherType = (voucherTypeResponse.success ? voucherTypeResponse.data : []).sort(\r\n                    (a, b) => String(a?.Voucher_Type).localeCompare(b?.Voucher_Type)\r\n                );\r\n                const stockItemLedgerName = (stockItemLedgerNameResponse.success ? stockItemLedgerNameResponse.data : []).sort(\r\n                    (a, b) => String(a?.Stock_Item_Ledger_Name).localeCompare(b?.Stock_Item_Ledger_Name)\r\n                );\r\n                const godownLocations = (godownLocationsResponse.success ? godownLocationsResponse.data : []).sort(\r\n                    (a, b) => String(a?.Godown_Name).localeCompare(b?.Godown_Name)\r\n                );\r\n                const staffData = (staffResponse.success ? staffResponse.data : []).sort(\r\n                    (a, b) => String(a?.Cost_Center_Name).localeCompare(b?.Cost_Center_Name)\r\n                );\r\n                const staffCategoryData = (staffCategory.success ? staffCategory.data : []).sort(\r\n                    (a, b) => String(a?.Cost_Category).localeCompare(b?.Cost_Category)\r\n                );\r\n                const defaultAccountMasterData = (defaultAccountMasterResponse.success ? defaultAccountMasterResponse.data : []).sort(\r\n                    (a, b) => String(a?.Account_Name).localeCompare(b?.Account_Name)\r\n                );\r\n\r\n                setBaseData((pre) => ({\r\n                    ...pre,\r\n                    retailers: retailersData,\r\n                    branch: branchData,\r\n                    uom: uomData,\r\n                    products: productsData,\r\n                    voucherType: voucherType,\r\n                    stockItemLedgerName: stockItemLedgerName,\r\n                    godown: godownLocations,\r\n                    staff: staffData,\r\n                    staffType: staffCategoryData,\r\n                    brand: getUniqueData(productsData, 'Brand', ['Brand_Name']),\r\n                    defaultAccounts: defaultAccountMasterData.map(exp => ({\r\n                        Id: exp.Acc_Id,\r\n                        Expence_Name: exp.Account_Name,\r\n                        percentageValue: exp.percentageValue\r\n                    }))\r\n                }));\r\n            } catch (e) {\r\n                console.error(\"Error fetching data:\", e);\r\n            } finally {\r\n                if (loadingOff) loadingOff();\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (\r\n            isValidObject(stateDetails) &&\r\n            Array.isArray(stateDetails?.orderInfo) &&\r\n            Array.isArray(stateDetails?.staffInfo) &&\r\n            isValidObject(stateDetails?.invoiceInfo)\r\n        ) {\r\n            const { invoiceInfo, orderInfo, staffInfo } = stateDetails;\r\n            searchFromArrival(invoiceInfo.Retailer_Id);\r\n            setInvoiceDetails(\r\n                Object.fromEntries(\r\n                    Object.entries(initialInvoiceValue).map(([key, value]) => {\r\n                        if (key === 'Po_Inv_Date') return [key, invoiceInfo[key] ? ISOString(invoiceInfo[key]) : value]\r\n                        if (key === 'Po_Entry_Date') return [key, invoiceInfo[key] ? ISOString(invoiceInfo[key]) : value]\r\n                        return [key, invoiceInfo[key] ?? value]\r\n                    })\r\n                )\r\n            );\r\n            setSelectedItems(\r\n                orderInfo.map(item => Object.fromEntries(\r\n                    Object.entries(itemsRowDetails).map(([key, value]) => {\r\n                        if (key === 'Item_Name') return [key, item['Product_Name'] || value]\r\n                        return [key, item[key] ?? value]\r\n                    })\r\n                ))\r\n            );\r\n            setStaffArray(\r\n                staffInfo.map(item => Object.fromEntries(\r\n                    Object.entries(staffRowDetails).map(([key, value]) => {\r\n                        return [key, item[key] ?? value]\r\n                    })\r\n                ))\r\n            );\r\n            setManualInvoice(!invoiceInfo.isFromPurchaseOrder)\r\n        }\r\n        console.log(stateDetails)\r\n    }, [stateDetails])\r\n\r\n    const searchFromArrival = (vendor) => {\r\n        if (checkIsNumber(vendor)) {\r\n            if (loadingOn) loadingOn();\r\n            // setSelectedItems([]);\r\n            setDeliveryDetails([]);\r\n            fetchLink({\r\n                address: `dataEntry/purchaseOrderEntry/delivery/partyBased?VendorId=${vendor}`\r\n            }).then(data => {\r\n                if (data.success) setDeliveryDetails(data.data)\r\n            }).catch(e => console.error(e)).finally(() => {\r\n                if (loadingOff) loadingOff()\r\n            })\r\n        }\r\n    }\r\n\r\n    const changeItems = (itemDetail, deleteOption) => {\r\n        setSelectedItems((prev) => {\r\n            const preItems = prev.filter(o => !(\r\n                isEqualNumber(o?.OrderId, itemDetail?.OrderId)\r\n                && isEqualNumber(o?.Item_Id, itemDetail?.ItemId)\r\n                && isEqualNumber(o?.DeliveryId, itemDetail?.Trip_Item_SNo)\r\n            ));\r\n            if (deleteOption) {\r\n                return preItems;\r\n            } else {\r\n                const currentOrders = deliveryDetails.filter(item => (\r\n                    isEqualNumber(item.OrderId, itemDetail.OrderId)\r\n                    && isEqualNumber(itemDetail?.ItemId, item?.ItemId)\r\n                    && isEqualNumber(itemDetail?.Trip_Item_SNo, item?.Trip_Item_SNo)\r\n                ));\r\n\r\n                const notInStaffList = [...new Map(\r\n                    currentOrders.flatMap(ordr => ordr.EmployeesInvolved)\r\n                        .filter(staff => !StaffArray.some(arrObj => isEqualNumber(arrObj.Involved_Emp_Id, staff.EmployeeId)))\r\n                        .map(staff => [staff.EmployeeId, staff])\r\n                ).values()];\r\n\r\n                if (notInStaffList.length > 0) {\r\n                    setStaffArray(prevStaffArray => [\r\n                        ...prevStaffArray,\r\n                        ...notInStaffList.map(staff => Object.fromEntries(\r\n                            Object.entries(staffRowDetails).map(([key, value]) => {\r\n                                switch (key) {\r\n                                    case 'Involved_Emp_Id': return [key, staff?.EmployeeId];\r\n                                    case 'Involved_Emp_Name': return [key, staff?.EmployeeName];\r\n                                    case 'Cost_Center_Type_Id': return [key, staff?.CostType];\r\n                                    default: return [key, value];\r\n                                }\r\n                            })\r\n                        ))\r\n                    ]);\r\n                }\r\n\r\n                const reStruc = currentOrders.map(item => {\r\n                    const productDetails = findProductDetails(baseData.products, item.ItemId);\r\n                    const gstPercentage = IS_IGST ? productDetails.Igst_P : productDetails.Gst_P;\r\n                    const isTaxable = gstPercentage > 0;\r\n\r\n                    const Bill_Qty = parseFloat(item.Weight) ?? 0;\r\n                    const Item_Rate = RoundNumber(item.BilledRate) ?? 0;\r\n                    const Amount = Multiplication(Bill_Qty, Item_Rate);\r\n\r\n                    const itemRateGst = calculateGSTDetails(Item_Rate, gstPercentage, taxType);\r\n                    const gstInfo = calculateGSTDetails(Amount, gstPercentage, taxType);\r\n\r\n                    const cgstPer = !IS_IGST ? gstInfo.cgst_per : 0;\r\n                    const igstPer = IS_IGST ? gstInfo.igst_per : 0;\r\n                    const Cgst_Amo = !IS_IGST ? gstInfo.cgst_amount : 0;\r\n                    const Igst_Amo = IS_IGST ? gstInfo.igst_amount : 0;\r\n\r\n                    const pack = productDetails?.PackGet;\r\n                    const Alt_Act_Qty = parseInt(Division(item?.pendingInvoiceWeight, pack));\r\n\r\n                    // console.log(productDetails)\r\n\r\n                    return Object.fromEntries(\r\n                        Object.entries(itemsRowDetails).map(([key, value]) => {\r\n                            switch (key) {\r\n                                case 'DeliveryId': return [key, Number(item?.Trip_Item_SNo)]\r\n                                case 'OrderId': return [key, Number(item?.OrderId)]\r\n                                case 'Po_Inv_Date': return [key, invoiceDetails?.Po_Inv_Date]\r\n                                case 'Location_Id': return [key, Number(item?.LocationId) ?? '']\r\n                                case 'Item_Id': return [key, Number(item?.ItemId)]\r\n                                case 'Item_Name': return [key, productDetails?.Product_Name]\r\n                                case 'Unit_Id': return [key, productDetails?.UOM_Id]\r\n                                case 'Unit_Name': return [key, productDetails?.Units]\r\n                                case 'Bill_Qty': return [key, item?.pendingInvoiceWeight]\r\n                                case 'Act_Qty': return [key, Bill_Qty]\r\n                                case 'Item_Rate': return [key, Item_Rate]\r\n                                case 'Bill_Alt_Qty': return [key, Number(item?.Quantity)]\r\n                                case 'Alt_Act_Qty': return [key, Alt_Act_Qty]\r\n                                case 'Batch_No': return [key, item?.BatchLocation]\r\n                                case 'Amount': return [key, Amount]\r\n                                case 'Taxable_Rate': return [key, itemRateGst.base_amount]\r\n                                case 'Total_Qty': return [key, Bill_Qty]\r\n                                case 'Taxble': return [key, isTaxable ? 1 : 0]\r\n                                case 'HSN_Code': return [key, productDetails.HSN_Code]\r\n                                case 'Taxable_Amount': return [key, gstInfo.base_amount]\r\n                                case 'Tax_Rate': return [key, gstPercentage]\r\n                                case 'Cgst':\r\n                                case 'Sgst': return [key, cgstPer ?? 0]\r\n                                case 'Cgst_Amo':\r\n                                case 'Sgst_Amo': return [key, isNotTaxableBill ? 0 : Cgst_Amo]\r\n                                case 'Igst': return [key, igstPer ?? 0]\r\n                                case 'Igst_Amo': return [key, isNotTaxableBill ? 0 : Igst_Amo]\r\n                                case 'Final_Amo': return [key, gstInfo.with_tax]\r\n\r\n                                default: return [key, value]\r\n                            }\r\n                        })\r\n                    )\r\n\r\n                });\r\n                return preItems.concat(reStruc);\r\n            }\r\n        });\r\n    };\r\n\r\n    const closeDialogs = () => {\r\n        setDialog(dialogs);\r\n    }\r\n\r\n    const changeSelectedObjects = (indexValue, key, value) => {\r\n        setSelectedItems((prev) => {\r\n            return prev.map((item, sIndex) => {\r\n                if (isEqualNumber(sIndex, indexValue)) {\r\n                    switch (key) {\r\n                        case 'Bill_Qty': {\r\n                            const updatedValue = parseFloat(value || 0);\r\n                            const newItem = { ...item, Bill_Qty: updatedValue };\r\n                            if (item.Item_Rate) {\r\n                                newItem.Amount = Multiplication(item.Item_Rate, updatedValue);\r\n                            } else if (item.Amount) {\r\n                                newItem.Item_Rate = Division(item.Amount, updatedValue);\r\n                            }\r\n                            return newItem;\r\n                        }\r\n                        case 'Item_Rate': {\r\n                            const updatedValue = parseFloat(value || 0);\r\n                            const newItem = { ...item, Item_Rate: updatedValue };\r\n                            if (item.Bill_Qty) {\r\n                                newItem.Amount = Multiplication(updatedValue, item.Bill_Qty);\r\n                            }\r\n                            return newItem;\r\n                        }\r\n                        case 'Amount': {\r\n                            const updatedValue = parseFloat(value || 0);\r\n                            const newItem = { ...item, Amount: updatedValue };\r\n                            if (item.Bill_Qty) {\r\n                                newItem.Item_Rate = Division(updatedValue, item.Bill_Qty);\r\n                            }\r\n                            return newItem;\r\n                        }\r\n                        default:\r\n                            return { ...item, [key]: value };\r\n                    }\r\n                }\r\n                return item;\r\n            });\r\n        });\r\n    };\r\n\r\n    const resetData = () => {\r\n        setSelectedItems([]);\r\n        setInvoiceDetails(initialInvoiceValue);\r\n        setDeliveryDetails([]);\r\n        setStaffArray([]);\r\n        setInvoiceExpences([]);\r\n    }\r\n\r\n    const postOrder = () => {\r\n        if (loadingOn) loadingOn();\r\n        fetchLink({\r\n            address: 'purchase/purchaseOrder',\r\n            method: checkIsNumber(invoiceDetails?.PIN_Id) ? 'PUT' : 'POST',\r\n            bodyData: {\r\n                Product_Array: selectedItems,\r\n                StaffArray: StaffArray,\r\n                Expence_Array: invoiceExpences,\r\n                ...invoiceDetails\r\n            }\r\n        }).then(data => {\r\n            if (data.success) {\r\n                resetData();\r\n                toast.success(data?.message || 'Saved');\r\n                if ((Array.isArray(stateDetails?.orderInfo) || isValidObject(stateDetails?.invoiceInfo)) && window.history.length > 1) {\r\n                    navigation(-1);\r\n                } else {\r\n                    navigation(location.pathname, { replace: true, state: null });\r\n                }\r\n            } else {\r\n                toast.error(data?.message || 'Request Failed')\r\n            }\r\n        }).catch(e => console.error(e)).finally(() => {\r\n            if (loadingOff) loadingOff();\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <AddItemsDialog\r\n                orderProducts={selectedItems}\r\n                setOrderProducts={setSelectedItems}\r\n                open={dialog.addProductDialog}\r\n                onClose={() => {\r\n                    setDialog(pre => ({ ...pre, addProductDialog: false }))\r\n                    setSelectedProductToEdit(null);\r\n                }}\r\n                products={baseData.products}\r\n                brands={baseData.brand}\r\n                uom={baseData.uom}\r\n                godowns={baseData.godown}\r\n                GST_Inclusive={isInclusive}\r\n                IS_IGST={IS_IGST}\r\n                editValues={selectedProductToEdit}\r\n                initialValue={itemsRowDetails}\r\n                stockInGodown={[]}\r\n            />\r\n\r\n            <form onSubmit={e => {\r\n                e.preventDefault();\r\n                postOrder();\r\n            }}>\r\n                <Card>\r\n\r\n                    <div className='d-flex flex-wrap align-items-center border-bottom py-2 px-3'>\r\n                        <span className=\"flex-grow-1 fa-16 fw-bold\">Purchase Invoice Creation</span>\r\n                        <span>\r\n\r\n                            <label htmlFor=\"\">Manual Invoice</label>\r\n                            <Switch\r\n                                checked={manualInvoice}\r\n                                onChange={e => {\r\n                                    setManualInvoice(e.target.checked);\r\n                                    setSelectedItems([])\r\n                                }}\r\n                            />\r\n\r\n                            <Button type='button' onClick={() => {\r\n                                if ((Array.isArray(stateDetails?.orderInfo) || isValidObject(stateDetails?.invoiceInfo)) && window.history.length > 1) {\r\n                                    navigation(-1);\r\n                                } else {\r\n                                    navigation('/erp/purchase/invoice');\r\n                                }\r\n                            }}>Cancel</Button>\r\n\r\n                            <Button type='submit' variant=\"contained\">submit</Button>\r\n                        </span>\r\n                    </div>\r\n\r\n                    <CardContent>\r\n\r\n                        <div className=\"row\">\r\n\r\n                            <PurchaseInvoiceStaffInvolved\r\n                                baseData={baseData}\r\n                                StaffArray={StaffArray}\r\n                                setStaffArray={setStaffArray}\r\n                                staffRowDetails={staffRowDetails}\r\n                            />\r\n\r\n                            {/* general info */}\r\n                            <PurchaseInvoiceGeneralInfo\r\n                                invoiceDetails={invoiceDetails}\r\n                                setInvoiceDetails={setInvoiceDetails}\r\n                                baseData={baseData}\r\n                                selectedItems={selectedItems}\r\n                                setSelectedItems={setSelectedItems}\r\n                                searchFromArrival={searchFromArrival}\r\n                                inputStyle={inputStyle}\r\n                            />\r\n\r\n                        </div>\r\n\r\n                        {/* product info */}\r\n                        <div className=\"table-responsive\">\r\n                            <div className=\"d-flex p-2 justify-content-end\">\r\n\r\n                                <Button type=\"button\" onClick={() => setSelectedItems([])}>clear selected</Button>\r\n\r\n                                <Button\r\n                                    onClick={() => {\r\n                                        if (manualInvoice) {\r\n                                            setSelectedProductToEdit(null);\r\n                                            setDialog(pre => ({ ...pre, addProductDialog: true }));\r\n                                        } else {\r\n                                            setDialog(pre => ({ ...pre, selectArrivalDialog: true }))\r\n                                        }\r\n                                    }}\r\n                                    variant='outlined'\r\n                                    type=\"button\"\r\n                                    startIcon={<Add />}\r\n                                    disabled={!checkIsNumber(invoiceDetails.Retailer_Id)}\r\n                                >Add Product</Button>\r\n                            </div>\r\n                            <table className=\"table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <td className={tdStyle}>SNo</td>\r\n                                        <td className={tdStyle}>Item</td>\r\n                                        <td className={tdStyle}>Rate</td>\r\n                                        <td className={tdStyle}>Bill Quantity</td>\r\n                                        <td className={tdStyle}>Acl Quantity</td>\r\n                                        <td className={tdStyle}>Unit</td>\r\n                                        <td className={tdStyle}>Amount</td>\r\n                                        <td className={tdStyle}>Godown Location</td>\r\n                                        <td className={tdStyle}>Batch</td>\r\n                                        <td className={tdStyle}>#</td>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {selectedItems.map((row, i) => (\r\n                                        <tr key={i}>\r\n                                            <td className={tdStyle}>{i + 1}</td>\r\n                                            {/* <td className={tdStyle}>{findProductDetails(baseData.products, row.Item_Id)?.Product_Name ?? 'Not found'}</td> */}\r\n                                            <td className={tdStyle}>{row?.Item_Name || 'Not found'}</td>\r\n                                            <td className={tdStyle}>\r\n                                                <input\r\n                                                    value={row?.Item_Rate ? row?.Item_Rate : ''}\r\n                                                    type=\"number\"\r\n                                                    className={inputStyle}\r\n                                                    onChange={e => changeSelectedObjects(i, 'Item_Rate', e.target.value)}\r\n                                                    required\r\n                                                />\r\n                                            </td>\r\n                                            <td className={tdStyle}>\r\n                                                <input\r\n                                                    value={row?.Bill_Qty ? row?.Bill_Qty : ''}\r\n                                                    type=\"number\"\r\n                                                    className={inputStyle}\r\n                                                    onChange={e => changeSelectedObjects(i, 'Bill_Qty', e.target.value)}\r\n                                                    required\r\n                                                />\r\n                                            </td>\r\n                                            <td className={tdStyle}>\r\n                                                <input\r\n                                                    value={row?.Act_Qty ?? ''}\r\n                                                    type=\"number\"\r\n                                                    className={inputStyle}\r\n                                                    onChange={e => changeSelectedObjects(i, 'Act_Qty', e.target.value)}\r\n                                                    required\r\n                                                />\r\n                                            </td>\r\n                                            <td className={tdStyle}>\r\n                                                <select\r\n                                                    value={row?.Unit_Id}\r\n                                                    className={inputStyle}\r\n                                                    onChange={e => {\r\n                                                        const selectedIndex = e.target.selectedIndex;\r\n                                                        const label = e.target.options[selectedIndex].text;\r\n                                                        const value = e.target.value;\r\n                                                        changeSelectedObjects(i, 'Unit_Id', value);\r\n                                                        changeSelectedObjects(i, 'Unit_Name', label);\r\n                                                    }}\r\n                                                    required\r\n                                                >\r\n                                                    <option value=\"\">select</option>\r\n                                                    {baseData.uom.map((o, i) => (\r\n                                                        <option value={o.Unit_Id} key={i} >{o.Units}</option>\r\n                                                    ))}\r\n                                                </select>\r\n                                            </td>\r\n                                            <td className={tdStyle}>\r\n                                                <input\r\n                                                    value={row?.Amount ? row?.Amount : ''}\r\n                                                    type=\"number\"\r\n                                                    className={inputStyle}\r\n                                                    onChange={e => changeSelectedObjects(i, 'Amount', e.target.value)}\r\n                                                    required\r\n                                                />\r\n                                            </td>\r\n                                            <td className={tdStyle}>\r\n                                                <select\r\n                                                    value={row?.Location_Id}\r\n                                                    className={inputStyle}\r\n                                                    onChange={e => changeSelectedObjects(i, 'Location_Id', e.target.value)}\r\n                                                // disabled={toNumber(row?.DeliveryId)}\r\n                                                >\r\n                                                    <option value=\"\">select</option>\r\n                                                    {baseData.godown.map((o, i) => (\r\n                                                        <option value={o?.Godown_Id} key={i}>{o?.Godown_Name}</option>\r\n                                                    ))}\r\n                                                </select>\r\n                                            </td>\r\n                                            <td className={tdStyle}>\r\n                                                <input\r\n                                                    value={row?.Batch_No}\r\n                                                    className={inputStyle}\r\n                                                    onChange={e => changeSelectedObjects(i, 'Batch_No', e.target.value)}\r\n                                                    disabled={toNumber(row?.DeliveryId)}\r\n                                                />\r\n                                            </td>\r\n                                            <td className={tdStyle}>\r\n                                                <IconButton\r\n                                                    onClick={() => {\r\n                                                        setSelectedItems(prev => {\r\n                                                            return prev.filter((_, filIndex) => i !== filIndex);\r\n                                                        });\r\n                                                    }}\r\n                                                    size='small'\r\n                                                >\r\n                                                    <Delete color='error' />\r\n                                                </IconButton>\r\n                                            </td>\r\n\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n\r\n                            <br />\r\n\r\n                            <ExpencesOfPurchaseInvoice\r\n                                invoiceExpences={invoiceExpences}\r\n                                setInvoiceExpences={setInvoiceExpences}\r\n                                expenceMaster={baseData.defaultAccounts}\r\n                                IS_IGST={IS_IGST}\r\n                                taxType={taxType}\r\n                                Total_Invoice_value={Total_Invoice_value}\r\n                                invoiceProducts={selectedItems}\r\n                                findProductDetails={findProductDetails}\r\n                                products={baseData.products}\r\n                            />\r\n\r\n                            <br />\r\n\r\n                            <table className=\"table\">\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <td className=\"border p-2\" rowSpan={isEqualNumber(invoiceDetails.IS_IGST, 1) ? 4 : 5}>\r\n                                            Total in words: {numberToWords(parseInt(Total_Invoice_value))}\r\n                                        </td>\r\n                                        <td className=\"border p-2\">Total Taxable Amount</td>\r\n                                        <td className=\"border p-2\">\r\n                                            {/* {NumberFormat(totalValueBeforeTax.TotalValue)} */}\r\n                                            {taxSplitUp.totalTaxable}\r\n                                        </td>\r\n                                    </tr>\r\n                                    {!IS_IGST ? (\r\n                                        <>\r\n                                            <tr>\r\n                                                <td className=\"border p-2\">CGST</td>\r\n                                                <td className=\"border p-2\">\r\n                                                    {taxSplitUp.cgst}\r\n                                                </td>\r\n                                            </tr>\r\n                                            <tr>\r\n                                                <td className=\"border p-2\">SGST</td>\r\n                                                <td className=\"border p-2\">\r\n                                                    {taxSplitUp.sgst}\r\n                                                </td>\r\n                                            </tr>\r\n                                        </>\r\n                                    ) : (\r\n                                        <tr>\r\n                                            <td className=\"border p-2\">IGST</td>\r\n                                            <td className=\"border p-2\">\r\n                                                {taxSplitUp.igst}\r\n                                            </td>\r\n                                        </tr>\r\n                                    )}\r\n                                    <tr>\r\n                                        <td className=\"border p-2\">Round Off</td>\r\n                                        <td className=\"border p-2\">\r\n                                            <input\r\n                                                value={invoiceDetails.Round_off}\r\n                                                defaultValue={taxSplitUp.roundOff}\r\n                                                style={{ minWidth: '200px', maxWidth: '350px' }}\r\n                                                className=\"cus-inpt p-2\"\r\n                                                onInput={onlynumAndNegative}\r\n                                                onChange={e => setInvoiceDetails(pre => ({ ...pre, Round_off: e.target.value }))}\r\n                                            />\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td className=\"border p-2\">Total</td>\r\n                                        <td className=\"border p-2\">\r\n                                            {NumberFormat(Math.round(Total_Invoice_value))}\r\n                                        </td>\r\n                                    </tr>\r\n\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n\r\n                    </CardContent>\r\n\r\n                </Card>\r\n            </form>\r\n\r\n            <Dialog\r\n                open={dialog.selectArrivalDialog}\r\n                onClose={closeDialogs}\r\n                fullScreen\r\n            >\r\n                <DialogTitle className='d-flex flex-wrap align-items-center '>\r\n                    <span className=\"flex-grow-1\">Select Purchase Order</span>\r\n                    <span>\r\n                        <Button onClick={closeDialogs} type=\"button\" className='me-2'>close</Button>\r\n                    </span>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <FilterableTable\r\n                        dataArray={deliveryDetails}\r\n                        columns={[\r\n                            {\r\n                                isVisible: 1,\r\n                                ColumnHeader: '#',\r\n                                isCustomCell: true,\r\n                                Cell: ({ row }) => {\r\n                                    const isChecked = selectedItems.findIndex(o => isEqualNumber(o?.DeliveryId, row?.Trip_Item_SNo)) !== -1;\r\n\r\n                                    return (\r\n                                        <div>\r\n                                            <input\r\n                                                className=\"form-check-input shadow-none pointer\"\r\n                                                style={{ padding: '0.7em' }}\r\n                                                type=\"checkbox\"\r\n                                                checked={isChecked}\r\n                                                onChange={() => {\r\n                                                    if (isChecked) changeItems(row, true)\r\n                                                    else changeItems(row)\r\n                                                }}\r\n                                            />\r\n                                        </div>\r\n                                    )\r\n                                }\r\n                            },\r\n                            createCol('ArrivalDate', 'date'),\r\n                            createCol('ItemName', 'string'),\r\n                            createCol('BilledRate', 'string'),\r\n                            {\r\n                                isVisible: 1,\r\n                                ColumnHeader: 'Weight',\r\n                                isCustomCell: true,\r\n                                Cell: ({ row }) => (\r\n                                    row?.Weight ?? 0\r\n                                ) + ' ' + row?.Units\r\n                            },\r\n                            createCol('pendingInvoiceWeight', 'number', 'Pending Tonnage'),\r\n                            createCol('Quantity', 'number'),\r\n                            createCol('PO_ID', 'string'),\r\n                            createCol('Location', 'string'),\r\n                        ]}\r\n                        EnableSerialNumber\r\n                        disablePagination\r\n                        title={`Arrival Details of ${baseData.retailers?.find(ven =>\r\n                            isEqualNumber(ven?.Retailer_Id, invoiceDetails?.Retailer_Id)\r\n                        )?.Retailer_Name ?? 'Not available'}`}\r\n                        maxHeightOption\r\n                    />\r\n                </DialogContent>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default PurchaseInvoiceManagement;"],"names":["user","localStorage","getItem","storage","isValidJSON","JSON","parse","initialInvoiceValue","PIN_Id","Po_Inv_No","Branch_Id","Voucher_Type","Ref_Po_Inv_No","Po_Inv_Date","ISOString","Po_Entry_Date","Retailer_Id","Retailer_Name","GST_Inclusive","IS_IGST","Narration","isConverted","CSGT_Total","SGST_Total","IGST_Total","Round_off","Total_Before_Tax","Total_Tax","Total_Invoice_value","Cancel_status","Stock_Item_Ledger_Name","Created_by","UserId","Altered_by","Created_on","Alterd_on","Trans_Type","Alter_Id","Approved_By","Approve_Status","Discount","QualityCondition","PaymentDays","itemsRowDetails","Trip_Id","Trip_Item_SNo","POI_St_Id","DeliveryId","OrderId","S_No","Location_Id","Item_Id","Item_Name","Bill_Qty","Act_Qty","Item_Rate","Bill_Alt_Qty","Alt_Act_Qty","Free_Qty","Unit_Id","Unit_Name","Batch_No","Taxable_Rate","Amount","Total_Qty","Taxble","HSN_Code","Taxable_Amount","Tax_Rate","Cgst","Cgst_Amo","Sgst","Sgst_Amo","Igst","Igst_Amo","Final_Amo","staffRowDetails","Id","Involved_Emp_Id","Involved_Emp_Name","Cost_Center_Type_Id","purchaseExpenceInfo","PA_Id","Expense_Id","Amount_value_DR","Amount_value_CR","_ref","_findProductDetails","_godowns$find","children","orderProducts","setOrderProducts","open","onClose","products","brands","uom","godowns","editValues","initialValue","productDetails","setProductDetails","useState","isInclusive","isEqualNumber","isNotTaxableBill","lastEditedRef","useRef","useEffect","isValidObject","pre","Object","fromEntries","entries","map","_ref2","key","value","findProductDetails","productid","_products$find","find","obj","Product_Id","productInfo","useMemo","currentProduct","isValidNumber","current","amount","Multiplication","prev","_objectSpread","rate","Division","closeDialog","_jsxs","_Fragment","Dialog","maxWidth","fullWidth","_jsx","DialogTitle","className","onSubmit","e","preventDefault","filter","ordered","_ref3","productMaster","gstPercentage","Igst_P","Gst_P","isTaxable","taxType","itemRateGst","calculateGSTDetails","gstInfo","cgstPer","cgst_per","igstPer","igst_per","cgst_amount","igst_amount","Product_Name","base_amount","with_tax","toast","warn","DialogContent","Select","BrandID","label","Brand","onChange","options","isDisabled","Brand_Name","styles","customSelectStyles","menuPortalTarget","document","body","isSearchable","placeholder","maxMenuHeight","filterOption","reactSelectFilterLogic","GroupID","Group","pro","reduce","acc","some","grp","Product_Group","push","Pro_Group","RequiredStar","checkIsNumber","Pre_Id","_productInfo$Pro_Grou","_productInfo$Product_","_productInfo$Brand_Na","_productInfo$Brand","_productInfo$Item_Rat","_productInfo$UOM_Id","_productInfo$Units","UOM_Id","Units","findIndex","ind","required","g","Godown_Id","Godown_Name","toArray","onInput","onlynum","disabled","pack","PackGet","alterQuantity","target","Alt_Bill_Qty","type","qty","min","onRateChange","hasOwn","UOM","selectedIndex","text","o","i","onAmountChange","DialogActions","Button","onClick","startIcon","ClearAll","variant","baseData","StaffArray","setStaffArray","style","minHeight","height","color","row","index","item","staff","c","Cost_Center_Id","Number","User_Type","fil","st","Cost_Center_Name","minWidth","staffType","sti","Cost_Category_Id","Cost_Category","IconButton","_","filIndex","size","Delete","invoiceDetails","setInvoiceDetails","selectedItems","setSelectedItems","searchFromArrival","inputStyle","retailers","voucherType","stringCompare","Type","vou","vind","Vocher_Type_Id","branch","BranchId","BranchName","stockItemLedgerName","maxLength","rows","invoiceExpences","setInvoiceExpences","expenceMaster","Card","addNewRow","Sno","length","fontSize","_expenceMaster$find","currentExpenseName","exp","Expence_Name","handleSelectChange","selectedOption","selected","getInvoicedAmountInPercentage","percentageValue","getPercentage","Expence_Value","RoundNumber","inv","idx","onlynumAndNegative","handleInputChange","field","updated","toNumber","expVal","taxPercentage","Addition","taxAmount","sgst_amount","removeRow","colSpan","_arr$find","arguments","undefined","dialogs","addProductDialog","selectArrivalDialog","_baseData$retailers$f","_baseData$retailers","_baseData$retailers$f2","loadingOn","loadingOff","location","useLocation","navigation","useNavigate","stateDetails","state","deliveryDetails","setDeliveryDetails","selectedProductToEdit","setSelectedProductToEdit","tdStyle","dialog","setDialog","manualInvoice","setManualInvoice","setBaseData","godown","brand","defaultAccounts","product","taxSplitUp","totalTaxable","totalTax","forEach","taxInfo","parseFloat","without_tax","tax_amount","totalWithTax","roundedTotal","Math","round","roundOff","cgst","sgst","igst","invoiceTotal","async","retailerResponse","branchResponse","uomResponse","productsResponse","voucherTypeResponse","stockItemLedgerNameResponse","godownLocationsResponse","staffResponse","staffCategory","defaultAccountMasterResponse","Promise","all","fetchLink","address","retailersData","success","data","sort","a","b","String","localeCompare","branchData","uomData","productsData","godownLocations","staffData","staffCategoryData","defaultAccountMasterData","Account_Name","getUniqueData","Acc_Id","console","error","fetchData","Array","isArray","orderInfo","staffInfo","invoiceInfo","_invoiceInfo$key","_item$key","_ref4","_item$key2","isFromPurchaseOrder","log","vendor","concat","then","catch","finally","changeItems","itemDetail","deleteOption","preItems","ItemId","currentOrders","notInStaffList","Map","flatMap","ordr","EmployeesInvolved","arrObj","EmployeeId","values","prevStaffArray","_ref5","EmployeeName","CostType","reStruc","_parseFloat","_RoundNumber","Weight","BilledRate","parseInt","pendingInvoiceWeight","_ref6","_Number","LocationId","Quantity","BatchLocation","closeDialogs","changeSelectedObjects","indexValue","sIndex","updatedValue","newItem","postOrder","method","bodyData","Product_Array","Expence_Array","message","window","history","pathname","replace","AddItemsDialog","stockInGodown","htmlFor","Switch","checked","CardContent","PurchaseInvoiceStaffInvolved","PurchaseInvoiceGeneralInfo","Add","_row$Act_Qty","ExpencesOfPurchaseInvoice","invoiceProducts","rowSpan","numberToWords","defaultValue","NumberFormat","fullScreen","FilterableTable","dataArray","columns","isVisible","ColumnHeader","isCustomCell","Cell","_ref7","isChecked","padding","createCol","_ref8","_row$Weight","EnableSerialNumber","disablePagination","title","ven","maxHeightOption"],"sourceRoot":""}