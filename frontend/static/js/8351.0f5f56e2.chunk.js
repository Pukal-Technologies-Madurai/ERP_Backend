"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7789,8351],{12110:(e,l,a)=>{a.d(l,{A:()=>j});var t=a(58168),s=a(98587),r=a(65043),d=a(58387),i=a(68606),n=a(34535),o=a(6431),c=a(63336),h=a(57056),u=a(32400);function m(e){return(0,u.Ay)("MuiCard",e)}(0,h.A)("MuiCard",["root"]);var v=a(70579);const x=["className","raised"],p=(0,n.Ay)(c.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,l)=>l.root})(()=>({overflow:"hidden"})),j=r.forwardRef(function(e,l){const a=(0,o.b)({props:e,name:"MuiCard"}),{className:r,raised:n=!1}=a,c=(0,s.A)(a,x),h=(0,t.A)({},a,{raised:n}),u=(e=>{const{classes:l}=e;return(0,i.A)({root:["root"]},m,l)})(h);return(0,v.jsx)(p,(0,t.A)({className:(0,d.A)(u.root,r),elevation:n?8:void 0,ref:l,ownerState:h},c))})},14792:(e,l,a)=>{a.d(l,{A:()=>s});var t=a(70579);const s=()=>(0,t.jsx)("span",{style:{color:"red",fontWeight:"bold",fontSize:"1em"},children:" *"})},26494:(e,l,a)=>{a.d(l,{A:()=>p});var t=a(58168),s=a(98587),r=a(65043),d=a(58387),i=a(68606),n=a(34535),o=a(6431),c=a(57056),h=a(32400);function u(e){return(0,h.Ay)("MuiCardContent",e)}(0,c.A)("MuiCardContent",["root"]);var m=a(70579);const v=["className","component"],x=(0,n.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,l)=>l.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),p=r.forwardRef(function(e,l){const a=(0,o.b)({props:e,name:"MuiCardContent"}),{className:r,component:n="div"}=a,c=(0,s.A)(a,v),h=(0,t.A)({},a,{component:n}),p=(e=>{const{classes:l}=e;return(0,i.A)({root:["root"]},u,l)})(h);return(0,m.jsx)(x,(0,t.A)({as:n,className:(0,d.A)(p.root,r),ownerState:h,ref:l},c))})},33438:(e,l,a)=>{a.d(l,{A:()=>r});var t=a(59662),s=a(70579);const r=(0,t.A)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},34496:(e,l,a)=>{a.d(l,{A:()=>r});var t=a(59662),s=a(70579);const r=(0,t.A)((0,s.jsx)("path",{d:"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z"}),"ClearAll")},37141:(e,l,a)=>{a.d(l,{A:()=>r});var t=a(59662),s=a(70579);const r=(0,t.A)((0,s.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")},47968:(e,l,a)=>{a.d(l,{A:()=>r});var t=a(59662),s=a(70579);const r=(0,t.A)((0,s.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download")},51387:(e,l,a)=>{a.d(l,{A:()=>r});var t=a(59662),s=a(70579);const r=(0,t.A)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},63406:(e,l,a)=>{a.d(l,{zU:()=>i,ex:()=>n,MR:()=>d,Ap:()=>r,FX:()=>o});var t=a(89379);const s=a.p+"static/media/smt.aa4d4f940bbebff07a57.png",r={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},d={menu:(e,l)=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,l)=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:l.isSelected?"#2684FF":l.isFocused?"#E2ECF9":"white",color:l.isSelected?"white":"#333",padding:"10px 12px"})},i=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],n=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:s,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:s,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:s,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],o=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},70141:(e,l,a)=>{a.d(l,{A:()=>r});var t=a(59662),s=a(70579);const r=(0,t.A)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},79484:(e,l,a)=>{a.d(l,{A:()=>r});var t=a(59662),s=a(70579);const r=(0,t.A)((0,s.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},83560:(e,l,a)=>{a.d(l,{A:()=>r});var t=a(59662),s=a(70579);const r=(0,t.A)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},97087:(e,l,a)=>{a.r(l),a.d(l,{default:()=>V});var t=a(89379),s=a(12110),r=a(26494),d=a(11906),i=a(65043),n=a(65074),o=a(22520),c=a(34496),h=a(37141),u=a(73216),m=a(91036);const v=(0,o.aN)().user,x={Sno:"",Id:"",BranchId:"",PoYear:"",PO_ID:"",LoadingDate:"",TradeConfirmDate:"",OwnerName:"",OwnerId:"",BrokerName:"",BrokerId:"",PartyId:"select",PartyName:"",PartyAddress:"",PaymentCondition:"",Remarks:"",OrderStatus:"New Order",Discount:0,QualityCondition:"",PaymentDays:0,CreatedBy:(0,o.IQ)(null===v||void 0===v?void 0:v.UserId)?null===v||void 0===v?void 0:v.UserId:""},p={Id:"",Sno:"",OrderId:"",ItemId:"",ItemName:"",Weight:"",Units:"",Rate:"",DeliveryLocation:"",Discount:"",QualityCondition:""},j={indexValue:null,Id:"",Sno:"",OrderId:"",Trip_Id:"",Trip_Item_SNo:"",LocationId:"",Location:"",TransporterIndex:"",ArrivalDate:"",ItemId:"",ItemName:"",Concern:"",BillNo:"",BillDate:"",BilledRate:0,Quantity:"",Weight:"",Units:"",BatchLocation:"",PendingQuantity:"",CreatedBy:(0,o.IQ)(null===v||void 0===v?void 0:v.UserId)?null===v||void 0===v?void 0:v.UserId:""},N={indexValue:null,Id:"",OrderId:"",Loading_Load:"",Loading_Empty:"",Unloading_Load:"",Unloading_Empty:"",EX_SH:"",DriverName:"",VehicleNo:"",PhoneNumber:"",CreatedBy:(0,o.IQ)(null===v||void 0===v?void 0:v.UserId)?null===v||void 0===v?void 0:v.UserId:""},A={Id:"",OrderId:"",EmployeeId:"",CostType:""};var y=a(20656),g=a(63406),b=a(17392),I=a(51387),f=a(70579);const D=e=>{let{StaffArray:l=[],costCenterData:a=[],costCenterCategoryData:s=[],setStaffArray:r}=e;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"col-xxl-3 col-lg-4 col-md-5 p-2",children:(0,f.jsxs)("div",{className:"border p-2",style:{minHeight:"30vh",height:"100%"},children:[(0,f.jsxs)("div",{className:"d-flex align-items-center flex-wrap mb-2 border-bottom pb-2",children:[(0,f.jsx)("h6",{className:"flex-grow-1 m-0",children:"Staff Involved"}),(0,f.jsx)(d.A,{variant:"outlined",color:"primary",type:"button",onClick:()=>r([...l,(0,t.A)({},A)]),children:"Add"})]}),(0,f.jsxs)("table",{className:"table table-bordered",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:"fa-13",children:"Sno"}),(0,f.jsx)("th",{className:"fa-13",children:"Staff Name"}),(0,f.jsx)("th",{className:"fa-13",children:"Category"}),(0,f.jsx)("th",{className:"fa-13",children:"#"})]})}),(0,f.jsx)("tbody",{children:l.map((e,d)=>{var i;return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"fa-13 vctr text-center",children:d+1}),(0,f.jsx)("td",{className:"fa-13 w-100 p-0",children:(0,f.jsx)(y.Ay,{value:{value:null===e||void 0===e?void 0:e.EmployeeId,label:null===(i=a.find(l=>(0,o.id)(null===l||void 0===l?void 0:l.Cost_Center_Id,null===e||void 0===e?void 0:e.EmployeeId)))||void 0===i?void 0:i.Cost_Center_Name},onChange:e=>r(l=>l.map((l,s)=>{if((0,o.id)(s,d)){const s=a.find(l=>(0,o.id)(l.Cost_Center_Id,e.value));return(0,t.A)((0,t.A)({},l),{},{CostType:(0,o.IQ)(l.CostType)?Number(l.CostType):(0,o.IQ)(s.User_Type)?Number(s.User_Type):0,EmployeeId:Number(e.value)})}return l})),options:[...a.filter(e=>-1===l.findIndex(l=>(0,o.id)(l.EmployeeId,e.Cost_Center_Id)))].map(e=>({value:e.Cost_Center_Id,label:e.Cost_Center_Name})),styles:g.MR,isSearchable:!0,placeholder:"Select Staff",filterOption:o.GI})}),(0,f.jsx)("td",{className:"fa-13 vctr p-0",style:{maxWidth:"130px",minWidth:"100px"},children:(0,f.jsxs)("select",{value:null===e||void 0===e?void 0:e.CostType,onChange:e=>r(l=>l.map((l,a)=>(0,o.id)(a,d)?(0,t.A)((0,t.A)({},l),{},{CostType:e.target.value}):l)),className:"cus-inpt p-2 border-0",children:[(0,f.jsx)("option",{value:"",children:"Select"}),s.map((e,l)=>(0,f.jsx)("option",{value:null===e||void 0===e?void 0:e.Cost_Category_Id,children:null===e||void 0===e?void 0:e.Cost_Category},l))]})}),(0,f.jsx)("td",{className:"fa-13 vctr p-0",children:(0,f.jsx)(b.A,{onClick:()=>{r(e=>e.filter((e,l)=>d!==l))},size:"small",children:(0,f.jsx)(I.A,{color:"error"})})})]},d)})})]})]})})})};var C=a(83462),S=a(26600),O=a(35316),_=a(29347),T=a(70141),P=a(83560),E=a(14792);const L=e=>{var l;let{OrderItemsArray:a=[],setOrderItemArray:s,setOrderItemsInput:r,setDialogs:i,tdStyle:n,dialogs:c={},closeDialog:h,orderItemsInput:u,products:m=[]}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("table",{className:"table m-0",children:[(0,f.jsxs)("thead",{children:[(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:n+" text-primary fw-bold bg-light",colSpan:4,children:"ORDER ITEMS"}),(0,f.jsx)("td",{className:n+" text-end bg-light p-0",children:(0,f.jsx)(d.A,{startIcon:(0,f.jsx)(T.A,{}),varient:"outlined",onClick:()=>i(e=>(0,t.A)((0,t.A)({},e),{},{itemsDialog:!0})),children:"Add Product"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:n+" text-center",children:"SNo"}),(0,f.jsx)("th",{className:n+" text-center",children:"Item Name"}),(0,f.jsx)("th",{className:n+" text-center",children:"Tonnage"}),(0,f.jsxs)("th",{className:n+" text-center",children:["Rate ",(0,f.jsx)("br",{}),"Deliver/Spot"]}),(0,f.jsx)("th",{className:n+" text-center",children:"Action"})]})]}),(0,f.jsxs)("tbody",{children:[a.map((e,l)=>(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:n,children:l+1}),(0,f.jsx)("td",{className:n,children:null===e||void 0===e?void 0:e.ItemName}),(0,f.jsx)("td",{className:n,children:(null===e||void 0===e?void 0:e.Weight)+" "+(null===e||void 0===e?void 0:e.Units)}),(0,f.jsx)("td",{className:n,children:null===e||void 0===e?void 0:e.Rate}),(0,f.jsxs)("td",{className:n+" p-0 text-center",children:[(0,f.jsx)(b.A,{onClick:()=>{r(l=>Object.fromEntries(Object.entries(l).map(l=>{var a;let[t,s]=l;return[t,null!==(a=e[t])&&void 0!==a?a:s]}))),i(e=>(0,t.A)((0,t.A)({},e),{},{itemsDialog:!0}))},size:"small",children:(0,f.jsx)(P.A,{})}),(0,f.jsx)(b.A,{onClick:()=>{s(e=>e.filter((e,a)=>a!==l))},size:"small",children:(0,f.jsx)(I.A,{color:"error"})})]})]},l)),(0,f.jsx)("tr",{children:(0,f.jsx)("td",{className:"p-3",colSpan:7})})]})]}),(0,f.jsxs)(C.A,{open:c.itemsDialog,onClose:h,maxWidth:"sm",fullWidth:!0,children:[(0,f.jsx)(S.A,{children:"Add Items"}),(0,f.jsxs)("form",{onSubmit:e=>{var l;e.preventDefault(),l=u,s(e=>[...e.filter(e=>!(0,o.id)(null===e||void 0===e?void 0:e.ItemId,null===l||void 0===l?void 0:l.ItemId)),Object.fromEntries(Object.entries(p).map(e=>{var a;let[t,s]=e;return[t,null!==(a=l[t])&&void 0!==a?a:s]}))]),r(p),i(e=>(0,t.A)((0,t.A)({},e),{},{itemsDialog:!1}))},children:[(0,f.jsx)(O.A,{children:(0,f.jsx)("table",{className:"table m-0",children:(0,f.jsxs)("tbody",{children:[(0,f.jsxs)("tr",{children:[(0,f.jsxs)("td",{className:n,children:["Item Name ",(0,f.jsx)(E.A,{})]}),(0,f.jsx)("td",{className:n,children:(0,f.jsx)(y.Ay,{value:{value:u.ItemId,label:u.ItemName},onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{ItemId:e.value,ItemName:e.label})),options:[{value:"",label:"select",isDisabled:!0},...m.map(e=>({value:null===e||void 0===e?void 0:e.Product_Id,label:null===e||void 0===e?void 0:e.Product_Name,isDisabled:-1!==a.findIndex(l=>(0,o.id)(null===l||void 0===l?void 0:l.ItemId,null===e||void 0===e?void 0:e.Product_Id))}))],styles:g.MR,required:!0,isSearchable:!0,placeholder:"Select Product",menuPortalTarget:document.body,filterOption:o.GI})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:n,children:"Brand"}),(0,f.jsx)("td",{className:n,children:(0,f.jsx)("input",{className:"cus-inpt p-2",value:(0,o.IQ)(u.ItemId)?null!==(l=m.find(e=>(0,o.id)(e.Product_Id,u.ItemId)).Brand_Name)&&void 0!==l?l:"Not found":"",placeholder:"Product Brand",disabled:!0})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsxs)("td",{className:n,children:["Weight ",(0,f.jsx)(E.A,{})]}),(0,f.jsxs)("td",{className:n,children:[(0,f.jsx)("input",{type:"number",className:"cus-inpt p-2 w-auto",value:u.Weight,required:!0,placeholder:"Weight",onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{Weight:e.target.value}))}),(0,f.jsx)("input",{className:"cus-inpt p-2 w-auto",value:u.Units,placeholder:"Units ex: kg, l, ml...",onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{Units:e.target.value}))})]})]}),(0,f.jsxs)("tr",{children:[(0,f.jsxs)("td",{className:n,children:["Rate ",(0,f.jsx)(E.A,{})]}),(0,f.jsx)("td",{className:n,children:(0,f.jsx)("input",{type:"number",required:!0,className:"cus-inpt p-2",value:u.Rate,placeholder:"Rate",onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{Rate:e.target.value}))})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsxs)("td",{className:n,children:["Delivery Location ",(0,f.jsx)(E.A,{})]}),(0,f.jsx)("td",{className:n,children:(0,f.jsx)("input",{className:"cus-inpt p-2",required:!0,value:u.DeliveryLocation,placeholder:"Location ",onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{DeliveryLocation:e.target.value}))})})]})]})})}),(0,f.jsxs)(_.A,{className:"d-flex justify-content-between",children:[(0,f.jsx)("span",{children:(0,f.jsx)(d.A,{variant:"outlined",type:"button",onClick:()=>r(p),children:"clear"})}),(0,f.jsxs)("span",{children:[(0,f.jsx)(d.A,{variant:"outlined",className:"me-2",type:"button",onClick:h,children:"cancel"}),(0,f.jsx)(d.A,{variant:"contained",type:"submit",children:"submit"})]})]})]})]})]})},R=e=>{let{OrderDetails:l=[],retailers:a=[],branch:s=[],setOrderDetails:r,inputStyle:d=""}=e;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"col-xxl-9 col-lg-8 col-md-7 py-2 px-0",children:(0,f.jsx)("div",{className:"border p-2",style:{minHeight:"30vh",height:"100%"},children:(0,f.jsxs)("div",{className:"row py-2 px-3",children:[(0,f.jsxs)("div",{className:"col-md-3 col-sm-6 p-2",children:[(0,f.jsx)("label",{children:"Loading Date"}),(0,f.jsx)("input",{type:"date",className:d+" bg-light",value:l.LoadingDate,onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{LoadingDate:e.target.value}))})]}),(0,f.jsxs)("div",{className:"col-md-3 col-sm-6 p-2",children:[(0,f.jsx)("label",{children:"Trade Date"}),(0,f.jsx)("input",{type:"date",className:d+" bg-light",value:l.TradeConfirmDate,onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{TradeConfirmDate:e.target.value}))})]}),(0,f.jsxs)("div",{className:"col-md-3 col-sm-6 p-2",children:[(0,f.jsx)("label",{children:"Order Status"}),(0,f.jsxs)("select",{className:d+" bg-light",value:null===l||void 0===l?void 0:l.OrderStatus,onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{OrderStatus:e.target.value})),children:[(0,f.jsx)("option",{value:"New Order",children:"New Order"}),(0,f.jsx)("option",{value:"On Process",children:"On Process"}),(0,f.jsx)("option",{value:"Completed",children:"Completed"}),(0,f.jsx)("option",{value:"Canceled",children:"Canceled"})]})]}),(0,f.jsxs)("div",{className:"col-md-3 col-sm-6 p-2",children:[(0,f.jsx)("label",{children:"Branch"}),(0,f.jsxs)("select",{className:d+" bg-light",value:null===l||void 0===l?void 0:l.BranchId,onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{BranchId:e.target.value})),disabled:(0,o.IQ)(l.Sno),children:[(0,f.jsx)("option",{value:"",children:"Select Branch"}),s.map((e,l)=>(0,f.jsx)("option",{value:null===e||void 0===e?void 0:e.BranchId,children:null===e||void 0===e?void 0:e.BranchName},l))]})]}),(0,f.jsxs)("div",{className:"col-md-9 p-2",children:[(0,f.jsx)("label",{children:"Party Name"}),(0,f.jsx)(y.Ay,{value:{value:l.PartyId,label:l.PartyName},onChange:e=>{var l;const s=null!==(l=a.find(l=>(0,o.id)(l.Retailer_Id,e.value)))&&void 0!==l?l:{};r(e=>(0,t.A)((0,t.A)({},e),{},{PartyId:null===s||void 0===s?void 0:s.Retailer_Id,PartyName:null===s||void 0===s?void 0:s.Retailer_Name,PartyAddress:null===s||void 0===s?void 0:s.Reatailer_Address}))},options:[{value:"",label:"select",isDisabled:!0},...a.map(e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name}))],styles:g.MR,isSearchable:!0,placeholder:"Select Party",menuPortalTarget:document.body,filterOption:o.GI})]}),(0,f.jsxs)("div",{className:"col-md-4 p-2",children:[(0,f.jsx)("label",{children:"Party Address"}),(0,f.jsx)("textarea",{className:d+" mb-2",value:l.PartyAddress,onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{PartyAddress:e.target.value}))})]}),(0,f.jsxs)("div",{className:"col-md-4 p-2",children:[(0,f.jsx)("label",{children:"Payment Condition"}),(0,f.jsx)("textarea",{className:d,rows:2,value:l.PaymentCondition,onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{PaymentCondition:e.target.value}))})]}),(0,f.jsxs)("div",{className:"col-md-4 p-2",children:[(0,f.jsx)("label",{children:"Remarks"}),(0,f.jsx)("textarea",{className:d,rows:2,value:l.Remarks,onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{Remarks:e.target.value}))})]}),(0,f.jsxs)("div",{className:"col-md-4 p-2",children:[(0,f.jsx)("label",{children:"Discount (% or Amount)"}),(0,f.jsx)("input",{type:"number",className:d,value:l.Discount,onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{Discount:e.target.value})),placeholder:"ex: 10%, 20% || 250, 300"})]}),(0,f.jsxs)("div",{className:"col-md-4 p-2",children:[(0,f.jsx)("label",{children:"Quality Condition"}),(0,f.jsx)("input",{className:d,value:l.QualityCondition,onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{QualityCondition:e.target.value})),placeholder:"discribe the quality",maxLength:150})]}),(0,f.jsxs)("div",{className:"col-md-4 p-2",children:[(0,f.jsx)("label",{children:"Payment Days (in count)"}),(0,f.jsx)("input",{type:"number",className:d,value:l.PaymentDays,onChange:e=>r(l=>(0,t.A)((0,t.A)({},l),{},{PaymentDays:e.target.value})),placeholder:"ex: 30, 12"})]})]})})})})};var w=a(47968),B=a(33438),k=a(79484);const M=e=>{let{tdStyle:l,DeliveryArray:a,setDeliveryInput:s,setDialogs:r,TranspoterArray:i,setTransportInput:c,OrderItemsArray:h,setFilters:u,setDeliveryArray:m,deliveryInput:v,dialogs:x,transpoterInput:y,closeDialog:g,tripData:D,setTripData:T,filters:L,loadingOn:R,loadingOff:M,StaffArray:V,setStaffArray:F,products:U,setTranspoterArray:z,setOrderItemsInput:W,inputStyle:H}=e;const Q=function(e){var l;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=D.find(l=>(0,o.id)(l.Trip_Id,e.Trip_Id)),s=null===t||void 0===t?void 0:t.Trip_Date,r=s?(0,o.ny)(s):(0,o.ny)(),d=(null===t||void 0===t||null===(l=t.Employees_Involved)||void 0===l?void 0:l.filter(e=>!V.some(l=>(0,o.id)(l.EmployeeId,e.Involved_Emp_Id))))||[];d.length>0&&F(e=>[...e,...d.map(e=>Object.fromEntries(Object.entries(A).map(l=>{let[a,t]=l;switch(a){case"EmployeeId":return[a,null===e||void 0===e?void 0:e.Involved_Emp_Id];case"CostType":return[a,null===e||void 0===e?void 0:e.Cost_Center_Type_Id];default:return[a,t]}})))]),m(l=>{const s=l.filter(l=>!((0,o.id)(null===l||void 0===l?void 0:l.Trip_Id,null===e||void 0===e?void 0:e.Trip_Id)&&(0,o.id)(l.Trip_Item_SNo,e.Arrival_Id)));let d;if(a)d=s;else{var i,n,c;const l=(null===t||void 0===t||null===(i=t.Products_List)||void 0===i?void 0:i.find(l=>(0,o.id)(null===l||void 0===l?void 0:l.Trip_Id,null===e||void 0===e?void 0:e.Trip_Id)&&(0,o.id)(l.Arrival_Id,e.Arrival_Id)))||{},a=function(){var e;let l=arguments.length>1?arguments[1]:void 0;return null!==(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(e=>(0,o.id)(e.Product_Id,l)))&&void 0!==e?e:{}}(U,null===l||void 0===l?void 0:l.Product_Id),h=parseFloat(null!==(n=null===a||void 0===a?void 0:a.PackGet)&&void 0!==n?n:0),u=(0,o.SX)(null!==(c=null===l||void 0===l?void 0:l.QTY)&&void 0!==c?c:0,h||1),m=Object.fromEntries(Object.entries(j).map(e=>{var a,s,d,i,n,c,h,m;let[v,x]=e;switch(v){case"LocationId":return[v,null!==(a=Number(null===l||void 0===l?void 0:l.To_Location))&&void 0!==a?a:x];case"Location":return[v,null!==(s=null===l||void 0===l?void 0:l.ToLocation)&&void 0!==s?s:x];case"Trip_Id":return[v,null!==(d=null===l||void 0===l?void 0:l.Trip_Id)&&void 0!==d?d:null];case"Trip_Item_SNo":return[v,null!==(i=null===l||void 0===l?void 0:l.Arrival_Id)&&void 0!==i?i:null];case"TransporterIndex":return[v,(0,o.Ro)(null===t||void 0===t?void 0:t.Trip_Id)];case"ArrivalDate":case"BillDate":return[v,r];case"ItemId":return[v,Number(null===l||void 0===l?void 0:l.Product_Id)];case"ItemName":return[v,null===l||void 0===l?void 0:l.Product_Name];case"Concern":return[v,null!==(n=null===l||void 0===l?void 0:l.Concern)&&void 0!==n?n:x];case"BillNo":return[v,null!==(c=null===l||void 0===l?void 0:l.BillNo)&&void 0!==c?c:x];case"BilledRate":return[v,Number(null===l||void 0===l?void 0:l.Gst_Rate)];case"Quantity":return[v,u];case"Weight":return[v,null!==(h=Number(null===l||void 0===l?void 0:l.QTY))&&void 0!==h?h:0];case"BatchLocation":return[v,null!==(m=null===l||void 0===l?void 0:l.Batch_No)&&void 0!==m?m:""];default:return[v,x]}}));d=[...s,m]}return((e,l,a,t)=>{z(s=>{const r=s.find(e=>(0,o.id)(e.indexValue,a.Trip_Id)),d=e.some(e=>(0,o.id)(e.Trip_Id,a.Trip_Id));if(l)return d?s:s.filter(e=>!(0,o.id)(e.indexValue,a.Trip_Id));{const e=Object.fromEntries(Object.entries(N).map(e=>{let[l,a]=e;switch(l){case"indexValue":return[l,null===t||void 0===t?void 0:t.Trip_Id];case"Loading_Load":return[l,(0,o.Ro)(null===t||void 0===t?void 0:t.LoadingLoad)];case"Loading_Empty":return[l,(0,o.Ro)(null===t||void 0===t?void 0:t.LoadingEmpty)];case"Unloading_Load":return[l,(0,o.Ro)(null===t||void 0===t?void 0:t.UnloadingLoad)];case"Unloading_Empty":return[l,(0,o.Ro)(null===t||void 0===t?void 0:t.UnloadingEmpty)];case"EX_SH":return[l,r?r.EX_SH:0];case"VehicleNo":return[l,null===t||void 0===t?void 0:t.Vehicle_No];case"PhoneNumber":return[l,null===t||void 0===t?void 0:t.PhoneNumber];default:return[l,a]}}));return r?s.map(l=>(0,o.id)(l.indexValue,a.Trip_Id)?e:l):[...s,e].sort((e,l)=>e.indexValue-l.indexValue)}})})(d,a,e,t),d})};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("table",{className:"table m-0",children:[(0,f.jsxs)("thead",{children:[(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l+" text-primary fw-bold bg-light",colSpan:10,children:"DELIVERY DETAILS"}),(0,f.jsx)("td",{className:l+" text-end bg-light p-0",colSpan:2,children:(0,f.jsx)(d.A,{startIcon:(0,f.jsx)(w.A,{}),varient:"outlined",disabled:0===h.length,onClick:()=>u(e=>(0,t.A)((0,t.A)({},e),{},{tripSheetDialog:!0})),children:"From Trips"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:l+" text-center",children:"SNo"}),(0,f.jsx)("th",{className:l+" text-center",children:"Location"}),(0,f.jsx)("th",{className:l+" text-center",children:"Arrival Date"}),(0,f.jsx)("th",{className:l+" text-center",children:"Item Name"}),(0,f.jsx)("th",{className:l+" text-center",children:"Concern"}),(0,f.jsx)("th",{className:l+" text-center",children:"Bill No"}),(0,f.jsx)("th",{className:l+" text-center",children:"Bill Date"}),(0,f.jsx)("th",{className:l+" text-center",children:"Quantity"}),(0,f.jsx)("th",{className:l+" text-center",children:"Billed Rate"}),(0,f.jsx)("th",{className:l+" text-center",children:"Tonnage / KGs"}),(0,f.jsx)("th",{className:l+" text-center",children:"Batch / Location"}),(0,f.jsx)("th",{className:l+" text-center",children:"Action"})]})]}),(0,f.jsxs)("tbody",{children:[a.map((e,d)=>{var i;return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l,children:d+1}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.Location}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.ArrivalDate}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.ItemName}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.Concern}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.BillNo}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.BillDate}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.Quantity}),(0,f.jsx)("td",{className:l,children:null!==(i=null===e||void 0===e?void 0:e.BilledRate)&&void 0!==i?i:0}),(0,f.jsx)("td",{className:l,children:(null===e||void 0===e?void 0:e.Weight)+" "+(null===e||void 0===e?void 0:e.Units)}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.BatchLocation}),(0,f.jsxs)("td",{className:l+" p-0 text-center",children:[(0,f.jsx)(b.A,{onClick:()=>{s(l=>Object.fromEntries(Object.entries(l).map(l=>{var a;let[t,s]=l;return[t,null!==(a=e[t])&&void 0!==a?a:s]}))),r(e=>(0,t.A)((0,t.A)({},e),{},{deliveryDialog:!0}))},size:"small",children:(0,f.jsx)(P.A,{})}),(0,f.jsx)(b.A,{onClick:()=>{!function(e){const l=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(l=>!((0,o.id)(null===l||void 0===l?void 0:l.Trip_Id,null===e||void 0===e?void 0:e.Trip_Id)&&(0,o.id)(l.Trip_Item_SNo,null===e||void 0===e?void 0:e.Trip_Item_SNo)));m(l),z(e=>e.filter(e=>l.some(l=>(0,o.id)(l.Trip_Id,e.indexValue))))}(e,a)},size:"small",children:(0,f.jsx)(I.A,{color:"error"})})]})]},d)}),(0,f.jsx)("tr",{children:(0,f.jsx)("td",{className:"p-3",colSpan:12})})]})]}),(0,f.jsxs)("table",{className:"table m-0",children:[(0,f.jsxs)("thead",{children:[(0,f.jsx)("tr",{children:(0,f.jsx)("td",{className:l+" text-primary fw-bold bg-light",colSpan:10,children:"OTHER DETAILS"})}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:l+" text-center",rowSpan:2,children:"SNo"}),(0,f.jsx)("th",{className:l+" text-center",colSpan:2,children:"Loading Wt"}),(0,f.jsx)("th",{className:l+" text-center",colSpan:2,children:"Unloading Wt"}),(0,f.jsx)("th",{className:l+" text-center",children:"Weight"}),(0,f.jsx)("th",{className:l+" text-center",colSpan:3,children:"Transport Details"}),(0,f.jsx)("th",{className:l+" text-center",rowSpan:2,children:"Action"})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:l+" text-center",children:"Load"}),(0,f.jsx)("th",{className:l+" text-center",children:"Empty"}),(0,f.jsx)("th",{className:l+" text-center",children:"Load"}),(0,f.jsx)("th",{className:l+" text-center",children:"Empty"}),(0,f.jsx)("th",{className:l+" text-center",children:"EX / SH"}),(0,f.jsx)("th",{className:l+" text-center",children:"Name"}),(0,f.jsx)("th",{className:l+" text-center",children:"Vehicle No"}),(0,f.jsx)("th",{className:l+" text-center",children:"Phone Number"})]})]}),(0,f.jsxs)("tbody",{children:[i.map((e,a)=>(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l,children:a+1}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.Loading_Load}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.Loading_Empty}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.Unloading_Load}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.Unloading_Empty}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.EX_SH}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.DriverName}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.VehicleNo}),(0,f.jsx)("td",{className:l,children:null===e||void 0===e?void 0:e.PhoneNumber}),(0,f.jsx)("td",{className:l+" p-0 text-center",children:(0,f.jsx)(b.A,{onClick:()=>{c(l=>Object.fromEntries(Object.entries(l).map(l=>{var a;let[t,s]=l;return[t,null!==(a=e[t])&&void 0!==a?a:s]}))),r(e=>(0,t.A)((0,t.A)({},e),{},{transporterDialog:!0}))},size:"small",children:(0,f.jsx)(P.A,{})})})]},a)),(0,f.jsx)("tr",{children:(0,f.jsx)("td",{className:l+" p-3",colSpan:10})})]})]}),(0,f.jsxs)(C.A,{open:x.deliveryDialog,onClose:g,maxWidth:"md",fullWidth:!0,children:[(0,f.jsx)(S.A,{children:"Add Delivery Details"}),(0,f.jsxs)("form",{onSubmit:e=>{var l;e.preventDefault(),l=v,m(e=>[...e.filter(e=>!(0,o.id)(null===e||void 0===e?void 0:e.Trip_Item_SNo,null===l||void 0===l?void 0:l.Trip_Item_SNo)),Object.fromEntries(Object.entries(j).map(e=>{var a;let[t,s]=e;return[t,null!==(a=l[t])&&void 0!==a?a:s]}))]),s(j),r(e=>(0,t.A)((0,t.A)({},e),{},{deliveryDialog:!1}))},children:[(0,f.jsx)(O.A,{children:(0,f.jsx)("table",{className:"table mb-2",children:(0,f.jsxs)("tbody",{children:[(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l,children:"Location"}),(0,f.jsx)("td",{className:l,children:null===v||void 0===v?void 0:v.Location}),(0,f.jsx)("td",{className:"border-0"}),(0,f.jsx)("td",{className:l,children:"Arrival Date"}),(0,f.jsx)("td",{className:l,children:(0,o.yc)(null===v||void 0===v?void 0:v.ArrivalDate)})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l,children:"Item Name"}),(0,f.jsx)("td",{className:l,children:null===v||void 0===v?void 0:v.ItemName}),(0,f.jsx)("td",{className:"border-0"}),(0,f.jsx)("td",{className:l,children:"Concern"}),(0,f.jsx)("td",{className:l,children:(0,f.jsx)("input",{className:"cus-inpt p-2",value:null===v||void 0===v?void 0:v.Concern,onChange:e=>s(l=>(0,t.A)((0,t.A)({},l),{},{Concern:e.target.value})),placeholder:""})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l,children:"Bill No"}),(0,f.jsx)("td",{className:l,children:(0,f.jsx)("input",{className:"cus-inpt p-2",value:null===v||void 0===v?void 0:v.BillNo,onChange:e=>s(l=>(0,t.A)((0,t.A)({},l),{},{BillNo:e.target.value})),placeholder:""})}),(0,f.jsx)("td",{className:"border-0"}),(0,f.jsx)("td",{className:l,children:"Bill Date"}),(0,f.jsx)("td",{className:l,children:(0,f.jsx)("input",{type:"date",value:null===v||void 0===v?void 0:v.BillDate,className:"cus-inpt p-2",onChange:e=>s(l=>(0,t.A)((0,t.A)({},l),{},{BillDate:e.target.value}))})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l,children:"Quantity"}),(0,f.jsx)("td",{className:l,children:null===v||void 0===v?void 0:v.Quantity}),(0,f.jsx)("td",{className:"border-0"}),(0,f.jsxs)("td",{className:l,children:["Tonnage ",(0,f.jsx)(E.A,{})]}),(0,f.jsx)("td",{className:l,children:(null===v||void 0===v?void 0:v.Weight)+" "+(null===v||void 0===v?void 0:v.Units)})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l,children:"Billed Rate"}),(0,f.jsx)("td",{className:l,children:(0,f.jsx)("input",{type:"number",value:null===v||void 0===v?void 0:v.BilledRate,className:"cus-inpt p-2",onChange:e=>s(l=>(0,t.A)((0,t.A)({},l),{},{BilledRate:e.target.value}))})}),(0,f.jsx)("td",{className:"border-0"}),(0,f.jsx)("td",{className:l,children:"Batch / Location "}),(0,f.jsx)("td",{className:l,children:null===v||void 0===v?void 0:v.BatchLocation})]})]})})}),(0,f.jsxs)(_.A,{className:"d-flex justify-content-between",children:[(0,f.jsx)("span",{children:(0,f.jsx)(d.A,{variant:"outlined",type:"button",onClick:()=>W(p),children:"clear"})}),(0,f.jsxs)("span",{children:[(0,f.jsx)(d.A,{variant:"outlined",className:"me-2",type:"button",onClick:g,children:"cancel"}),(0,f.jsx)(d.A,{variant:"contained",type:"submit",children:"submit"})]})]})]})]}),(0,f.jsxs)(C.A,{open:x.transporterDialog,onClose:g,maxWidth:"sm",fullWidth:!0,children:[(0,f.jsx)(S.A,{children:"Add Transporter Details"}),(0,f.jsxs)("form",{onSubmit:e=>{var l;e.preventDefault(),l=y,(0,o.IQ)(l.indexValue)?z(e=>{const a=[...e];return a[l.indexValue]=(0,t.A)({},l),a}):z(e=>[...e,(0,t.A)((0,t.A)({},l),{},{indexValue:e.length})]),c(N),r(e=>(0,t.A)((0,t.A)({},e),{},{transporterDialog:!1}))},children:[(0,f.jsx)(O.A,{children:(0,f.jsx)("table",{className:"table m-0",children:(0,f.jsxs)("tbody",{children:[(0,f.jsx)("tr",{children:(0,f.jsx)("td",{className:l+" text-center bg-light",colSpan:4,children:"Loading Details"})}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l,children:"Load"}),(0,f.jsx)("td",{className:l+" p-0",children:(0,f.jsx)("input",{type:"number",disabled:!0,value:null===y||void 0===y?void 0:y.Loading_Load,className:H+" border-0 bg-white",onChange:e=>c(l=>(0,t.A)((0,t.A)({},l),{},{Loading_Load:e.target.value}))})}),(0,f.jsx)("td",{className:l,children:"Empty"}),(0,f.jsx)("td",{className:l+" p-0",children:(0,f.jsx)("input",{type:"number",disabled:!0,value:null===y||void 0===y?void 0:y.Loading_Empty,className:H+" border-0 bg-white",onChange:e=>c(l=>(0,t.A)((0,t.A)({},l),{},{Loading_Empty:e.target.value}))})})]}),(0,f.jsx)("tr",{children:(0,f.jsx)("td",{className:l+" text-center bg-light",colSpan:4,children:"Unloading Details"})}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l,children:"Load"}),(0,f.jsx)("td",{className:l+" p-0",children:(0,f.jsx)("input",{type:"number",disabled:!0,value:null===y||void 0===y?void 0:y.Unloading_Load,className:H+" border-0 bg-white",onChange:e=>c(l=>(0,t.A)((0,t.A)({},l),{},{Unloading_Load:e.target.value}))})}),(0,f.jsx)("td",{className:l,children:"Empty"}),(0,f.jsx)("td",{className:l+" p-0",children:(0,f.jsx)("input",{type:"number",disabled:!0,value:null===y||void 0===y?void 0:y.Unloading_Empty,className:H+" border-0 bg-white",onChange:e=>c(l=>(0,t.A)((0,t.A)({},l),{},{Unloading_Empty:e.target.value}))})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l,colSpan:2,children:"EX SH"}),(0,f.jsx)("td",{className:l+" p-0",colSpan:2,children:(0,f.jsx)("input",{disabled:!0,value:null===y||void 0===y?void 0:y.EX_SH,onChange:e=>c(l=>(0,t.A)((0,t.A)({},l),{},{EX_SH:e.target.value})),className:H+" border-0 bg-white"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l,colSpan:2,children:"Driver Name"}),(0,f.jsx)("td",{className:l+" p-0",colSpan:2,children:(0,f.jsx)("input",{value:null===y||void 0===y?void 0:y.DriverName,onChange:e=>c(l=>(0,t.A)((0,t.A)({},l),{},{DriverName:e.target.value})),className:H+" border-0 bg-white"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l,colSpan:2,children:"Vehicle No"}),(0,f.jsx)("td",{className:l+" p-0",colSpan:2,children:(0,f.jsx)("input",{value:null===y||void 0===y?void 0:y.VehicleNo,disabled:!0,onChange:e=>c(l=>(0,t.A)((0,t.A)({},l),{},{VehicleNo:e.target.value})),className:H+" border-0 bg-white"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:l,colSpan:2,children:"Phone Number"}),(0,f.jsx)("td",{className:l+" p-0",colSpan:2,children:(0,f.jsx)("input",{value:null===y||void 0===y?void 0:y.PhoneNumber,onChange:e=>{const l=(0,o.BE)(e);c(e=>(0,t.A)((0,t.A)({},e),{},{PhoneNumber:l}))},className:H+" border-0 bg-white",maxLength:10})})]})]})})}),(0,f.jsxs)(_.A,{className:"d-flex justify-content-between",children:[(0,f.jsx)("span",{children:(0,f.jsx)(d.A,{variant:"outlined",type:"button",onClick:()=>c(N),children:"clear"})}),(0,f.jsxs)("span",{children:[(0,f.jsx)(d.A,{variant:"outlined",className:"me-2",type:"button",onClick:g,children:"cancel"}),(0,f.jsx)(d.A,{variant:"contained",type:"submit",children:"submit"})]})]})]})]}),(0,f.jsxs)(C.A,{open:L.tripSheetDialog,onClose:()=>u(e=>(0,t.A)((0,t.A)({},e),{},{tripSheetDialog:!1})),fullScreen:!0,children:[(0,f.jsxs)(S.A,{className:"d-flex align-items-center",children:[(0,f.jsx)("span",{className:"flex-grow-1",children:"Import From Trip Sheet"}),(0,f.jsx)(b.A,{size:"small",color:"error",onClick:()=>u(e=>(0,t.A)((0,t.A)({},e),{},{tripSheetDialog:!1})),children:(0,f.jsx)(B.A,{})})]}),(0,f.jsxs)(O.A,{children:[(0,f.jsx)("form",{onSubmit:e=>{e.preventDefault(),(0,n.z)({address:"inventory/tripSheet?Fromdate=".concat(null===L||void 0===L?void 0:L.Fromdate,"&Todate=").concat(null===L||void 0===L?void 0:L.Todate),loadingOn:R,loadingOff:M}).then(e=>{e.success&&T(e.data)}).catch(e=>console.error(e))},children:(0,f.jsxs)("div",{className:"row",children:[(0,f.jsx)("div",{className:"col-lg-3 col-md-4 col-sm-6 p-2",children:(0,f.jsx)("input",{type:"date",value:L.Fromdate,className:"cus-inpt p-2",required:!0,max:L.Todate,onChange:e=>u(l=>(0,t.A)((0,t.A)({},l),{},{Fromdate:e.target.value}))})}),(0,f.jsx)("div",{className:"col-lg-3 col-md-4 col-sm-6 p-2",children:(0,f.jsx)("input",{type:"date",value:L.Todate,className:"cus-inpt p-2",min:L.Fromdate,required:!0,onChange:e=>u(l=>(0,t.A)((0,t.A)({},l),{},{Todate:e.target.value}))})}),(0,f.jsx)("div",{className:"col-lg-3 col-md-4 col-sm-6 p-2",children:(0,f.jsx)(d.A,{variant:"outlined",type:"submit",startIcon:(0,f.jsx)(k.A,{}),children:"Search"})})]})}),(0,f.jsx)("div",{className:"table-responsive",children:(0,f.jsxs)("table",{className:"table table-bordered",children:[(0,f.jsx)("thead",{children:(0,f.jsx)("tr",{children:["#","SNo","Date","Item","Rate","Quantity","From","To","Trip No","Challan No","Vehicle No","Branch"].map((e,l)=>(0,f.jsx)("th",{className:"fa-13",children:e},l))})}),(0,f.jsx)("tbody",{children:D.flatMap(e=>null===e||void 0===e?void 0:e.Products_List.map(l=>(0,t.A)((0,t.A)({},e),l))).filter(e=>h.some(l=>(0,o.id)(l.ItemId,e.Product_Id))&&!(0,o.IQ)(e.arrivalOrderId)).map((e,l)=>(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"fa-12",children:(()=>{const l=-1!==a.findIndex(l=>(0,o.id)(null===l||void 0===l?void 0:l.Trip_Id,e.Trip_Id)&&(0,o.id)(null===l||void 0===l?void 0:l.Trip_Item_SNo,e.Arrival_Id));return(0,f.jsx)("div",{children:(0,f.jsx)("input",{className:"form-check-input shadow-none pointer",style:{padding:"0.7em"},type:"checkbox",checked:l,onChange:()=>{l?Q(e,!0):Q(e)}})})})()}),(0,f.jsx)("td",{className:"fa-12",children:l+1}),(0,f.jsx)("td",{className:"fa-12",children:null!==e&&void 0!==e&&e.Trip_Date?(0,o.yc)(e.Trip_Date):""}),(0,f.jsx)("td",{className:"fa-12",children:null===e||void 0===e?void 0:e.Product_Name}),(0,f.jsx)("td",{className:"fa-12",children:null===e||void 0===e?void 0:e.Gst_Rate}),(0,f.jsx)("td",{className:"fa-12",children:null===e||void 0===e?void 0:e.QTY}),(0,f.jsx)("td",{className:"fa-12",children:null===e||void 0===e?void 0:e.FromLocation}),(0,f.jsx)("td",{className:"fa-12",children:null===e||void 0===e?void 0:e.ToLocation}),(0,f.jsx)("td",{className:"fa-12",children:null===e||void 0===e?void 0:e.Trip_No}),(0,f.jsx)("td",{className:"fa-12",children:null===e||void 0===e?void 0:e.Challan_No}),(0,f.jsx)("td",{className:"fa-12",children:null===e||void 0===e?void 0:e.Vehicle_No}),(0,f.jsx)("td",{className:"fa-12",children:null===e||void 0===e?void 0:e.Branch_Name})]},l))})]})})]}),(0,f.jsx)(_.A,{children:(0,f.jsx)(d.A,{size:"small",color:"error",onClick:()=>u(e=>(0,t.A)((0,t.A)({},e),{},{tripSheetDialog:!1})),children:"close"})})]})]})},V=e=>{let{loadingOn:l,loadingOff:a}=e;const v=JSON.parse(localStorage.getItem("user")),A=(0,u.Zp)(),y=(0,u.zy)().state,g="border fa-14 vctr",b="cus-inpt p-2",[I,C]=(0,i.useState)([]),[S,O]=(0,i.useState)([]),[_,T]=(0,i.useState)([]),[P,E]=(0,i.useState)([]),[w,B]=(0,i.useState)([]),[k,V]=(0,i.useState)([]),[F,U]=(0,i.useState)([]),[z,W]=(0,i.useState)([]),[H,Q]=(0,i.useState)([]),[G,X]=(0,i.useState)([]),[q,Y]=(0,i.useState)([]),[J,Z]=(0,i.useState)({FromGodown:"",FromGodownName:"Select From Location",ToGodown:"",ToGodownName:"Select To Location",Fromdate:(0,o.ny)(),Todate:(0,o.ny)(),search:!1,tripSheetDialog:!1}),[K,$]=(0,i.useState)(x),[ee,le]=(0,i.useState)(p),[ae,te]=(0,i.useState)(j),[se,re]=(0,i.useState)(N),de=!(null===K||void 0===K||!K.Id),[ie,ne]=(0,i.useState)({itemsDialog:!1,deliveryDialog:!1,transporterDialog:!1}),[oe,ce]=(0,i.useState)({PurchaseOrderOnly:!0,PurchaseOderWithDelivery:!1,DeliveryEntry:!1});(0,i.useEffect)(()=>{(0,n.z)({address:"masters/products"}).then(e=>{const l=(e.success?e.data:[]).sort((e,l)=>String(null===e||void 0===e?void 0:e.Product_Name).localeCompare(null===l||void 0===l?void 0:l.Product_Name));C(l)}).catch(e=>console.error(e)),(0,n.z)({address:"dataEntry/costCenter"}).then(e=>{e.success&&O(e.data)}).catch(e=>console.error(e)),(0,n.z)({address:"dataEntry/costCenter/category"}).then(e=>{e.success&&T(e.data)}).catch(e=>console.log(e)),(0,n.z)({address:"dataEntry/godownLocationMaster"}).then(e=>{e.success&&E(e.data)}).catch(e=>console.error(e)),(0,n.z)({address:"masters/retailers/dropdown"}).then(e=>{if(e.success){const l=(0,o.$r)(null===e||void 0===e?void 0:e.data).sort((e,l)=>String(null===e||void 0===e?void 0:e.Retailer_Name).localeCompare(null===l||void 0===l?void 0:l.Retailer_Name));B(l)}}).catch(e=>console.error(e)),(0,n.z)({address:"masters/branch/dropDown"}).then(e=>{e.success&&V(e.data)}).catch(e=>console.error(e))},[]),(0,i.useEffect)(()=>{var e,l,a,s,r,d,i,n,c,h,u,m,x,p,j,N,A,g;if(!(0,o.aF)(y)||!(0,o.aF)(y.OrderDetails))return;const b=null!==(e=y.OrderDetails)&&void 0!==e&&e.LoadingDate?(0,o.ny)(null===(l=y.OrderDetails)||void 0===l?void 0:l.LoadingDate):"",I=null!==(a=y.OrderDetails)&&void 0!==a&&a.TradeConfirmDate?(0,o.ny)(null===(s=y.OrderDetails)||void 0===s?void 0:s.TradeConfirmDate):"",f=null===y||void 0===y?void 0:y.editPage;$((0,t.A)((0,t.A)({},y.OrderDetails),{},{PartyId:null!==(r=null===y||void 0===y||null===(d=y.OrderDetails)||void 0===d?void 0:d.PartyId)&&void 0!==r?r:"",OwnerId:null!==(i=null===y||void 0===y||null===(n=y.OrderDetails)||void 0===n?void 0:n.OwnerId)&&void 0!==i?i:"",BrokerId:null!==(c=null===y||void 0===y||null===(h=y.OrderDetails)||void 0===h?void 0:h.BrokerId)&&void 0!==c?c:"",OrderStatus:null!==(u=null===(m=y.OrderDetails)||void 0===m?void 0:m.OrderStatus)&&void 0!==u?u:"New Order",LoadingDate:b,TradeConfirmDate:I,CreatedBy:null===v||void 0===v?void 0:v.UserId})),U(null!==(x=null===y||void 0===y?void 0:y.OrderItemsArray)&&void 0!==x?x:[]),W(null!==(p=null===y||void 0===y||null===(j=y.DeliveryArray)||void 0===j?void 0:j.map((e,l)=>(0,t.A)((0,t.A)({},e),{},{indexValue:null===(null===e||void 0===e?void 0:e.indexValue)?l:null===e||void 0===e?void 0:e.indexValue})))&&void 0!==p?p:[]),Q(null!==(N=null===y||void 0===y||null===(A=y.TranspoterArray)||void 0===A?void 0:A.map((e,l)=>(0,t.A)((0,t.A)({},e),{},{indexValue:null===(null===e||void 0===e?void 0:e.indexValue)?l:null===e||void 0===e?void 0:e.indexValue})))&&void 0!==N?N:[]),X(null!==(g=null===y||void 0===y?void 0:y.StaffArray)&&void 0!==g?g:[]);const D=Object.keys(oe).findIndex(e=>e===f);ce(-1!==D?e=>Object.fromEntries(Object.entries(e).map(e=>{let[l,a]=e;return[l,l===f]})):{PurchaseOrderOnly:!1,PurchaseOderWithDelivery:!0,DeliveryEntry:!1})},[y]);const he=e=>{const{id:l}=e.target;ce({PurchaseOrderOnly:"PurchaseOrderOnly"===l,PurchaseOderWithDelivery:"PurchaseOderWithDelivery"===l,DeliveryEntry:"DeliveryEntry"===l})},ue=()=>{ne(e=>(0,t.A)((0,t.A)({},e),{},{itemsDialog:!1,deliveryDialog:!1,transporterDialog:!1})),le(p),te(j),re(N)};return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(s.A,{children:(0,f.jsxs)(r.A,{children:[(0,f.jsxs)("div",{className:"d-flex flex-wrap",children:[(0,f.jsx)("h5",{className:"flex-grow-1",children:"Purchase Order"}),(0,f.jsx)(d.A,{variant:"outlined",onClick:()=>A(window.history.length>1?-1:"/dataEntry/purchaseOrder"),children:"back"})]}),!(0,o.IQ)(K.Id)&&(0,f.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,f.jsxs)("div",{className:"d-flex justify-content-center flex-wrap p-2 mb-2",children:[(0,f.jsxs)("div",{className:"form-check",children:[(0,f.jsx)("input",{className:"form-check-input shadow-none",style:{padding:"0.7em"},type:"radio",name:"radioType",id:"PurchaseOrderOnly",checked:oe.PurchaseOrderOnly,disabled:!!K.Id,onChange:he}),(0,f.jsx)("label",{className:"form-check-label p-1 me-3",htmlFor:"PurchaseOrderOnly",children:"Purchase Order"})]}),(0,f.jsxs)("div",{className:"form-check",children:[(0,f.jsx)("input",{className:"form-check-input shadow-none",style:{padding:"0.7em"},type:"radio",name:"radioType",id:"PurchaseOderWithDelivery",checked:oe.PurchaseOderWithDelivery,disabled:!!K.Id,onChange:he}),(0,f.jsx)("label",{className:"form-check-label p-1 me-3",htmlFor:"PurchaseOderWithDelivery",children:"Order With Arrival"})]})]})}),oe.PurchaseOderWithDelivery&&K.Id&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("label",{children:"Order ID"}),":",(0,f.jsx)("input",{value:K.Id,disabled:!0,className:b+" w-auto ms-2 mb-2",onChange:e=>$(l=>(0,t.A)((0,t.A)({},l),{},{Id:e.target.value})),placeholder:"Ex: 233"})]}),(0,f.jsxs)("div",{className:"row",children:[(0,f.jsx)(D,{StaffArray:G,costCenterData:S,costCenterCategoryData:_,setStaffArray:X}),(0,f.jsx)(R,{OrderDetails:K,retailers:w,branch:k,setOrderDetails:$,inputStyle:b})]}),(0,f.jsxs)("div",{className:"table-responsive",children:[(oe.PurchaseOrderOnly||oe.PurchaseOderWithDelivery)&&!oe.DeliveryEntry&&(0,f.jsx)(L,{OrderItemsArray:F,setOrderItemArray:U,setOrderItemsInput:le,setDialogs:ne,tdStyle:g,dialogs:ie,closeDialog:ue,orderItemsInput:ee,products:I}),(oe.PurchaseOderWithDelivery||oe.DeliveryEntry)&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(M,{tdStyle:g,DeliveryArray:z,setDeliveryInput:te,setDialogs:ne,TranspoterArray:H,setTransportInput:re,OrderItemsArray:F,setFilters:Z,setDeliveryArray:W,deliveryInput:ae,dialogs:ie,transpoterInput:se,closeDialog:ue,tripData:q,setTripData:Y,filters:J,loadingOn:l,loadingOff:a,StaffArray:G,setStaffArray:X,products:I,setTranspoterArray:Q,setOrderItemsInput:le,inputStyle:b})}),(0,f.jsxs)("div",{className:"d-flex justify-content-end flex-wrap my-3",children:[(0,f.jsx)(d.A,{onClick:()=>{$(x),U([]),W([]),Q([])},className:"me-2",variant:"outlined",startIcon:(0,f.jsx)(c.A,{}),children:"Clear Values"}),(0,f.jsx)(d.A,{onClick:()=>{l&&l(),(0,n.z)({address:"dataEntry/purchaseOrderEntry",method:de?"PUT":"POST",bodyData:{OrderDetails:K,OrderItems:oe.DeliveryEntry?[]:F,DelivdryDetails:oe.PurchaseOrderOnly?[]:z,TranspoterDetails:oe.PurchaseOrderOnly?[]:H,StaffDetails:G}}).then(e=>{null!==e&&void 0!==e&&e.success?($(x),U([]),W([]),Q([]),X([]),m.oR.success(null===e||void 0===e?void 0:e.message)):m.oR.error(null===e||void 0===e?void 0:e.message)}).catch(e=>console.error(e)).finally(()=>{a&&a()})},variant:"contained",startIcon:(0,f.jsx)(h.A,{}),disabled:(()=>{const e=(0,o.id)(F.length,0),l=!K.PartyName,a=(0,o.id)(z.length,0)&&(0,o.id)(H.length,0),t=!K.Id;return oe.PurchaseOrderOnly&&(e||l)||oe.PurchaseOderWithDelivery&&(a&&e||l)||oe.DeliveryEntry&&(t||a)})(),children:"Save"})]})]})]})})})}}}]);
//# sourceMappingURL=8351.0f5f56e2.chunk.js.map