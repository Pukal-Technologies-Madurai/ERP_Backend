"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3293],{75155:(e,s,d)=>{d.d(s,{A:()=>l});var i=d(59662),o=d(70579);const l=(0,i.A)((0,o.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People")},75674:(e,s,d)=>{d.r(s),d.d(s,{default:()=>V});var i=d(89379),o=d(65043),l=d(75155),c=d(59662),a=d(70579);const n=(0,c.A)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 12H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Message"),r=(0,c.A)((0,a.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article");var t=d(76447);const h=(0,c.A)((0,a.jsx)("path",{d:"M22 9V7h-2v2h-2v2h2v2h2v-2h2V9zM8 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m4.51-8.95C13.43 5.11 14 6.49 14 8s-.57 2.89-1.49 3.95C14.47 11.7 16 10.04 16 8s-1.53-3.7-3.49-3.95m4.02 9.78C17.42 14.66 18 15.7 18 17v3h2v-3c0-1.45-1.59-2.51-3.47-3.17"}),"GroupAdd");var m,u=d(83560),v=d(51387),x=d(77739),p=d(17392),j=d(32143),A=d(83462),g=d(26600),b=d(35316),N=d(29347),y=d(11906),C=d(45777),f=d(16053),T=d(91036),I=(d(92342),d(60235)),S=d(51962),R=d(67784),U=d(12412),_=d(34109),k=d(26581),D=d(73216),z=d(65074),M=d(97707);const E={Description:"",Id:"",Topic:"",Company_id:null===(m=JSON.parse(localStorage.getItem("user")))||void 0===m?void 0:m.Company_id},w=(0,a.jsx)(_.A,{fontSize:"small"}),F=(0,a.jsx)(k.A,{fontSize:"small"}),V=()=>{const e=localStorage.getItem("user"),s=JSON.parse(e),[d,c]=(0,o.useState)([]),[m,_]=(0,o.useState)(!1),[k,V]=(0,o.useState)(!1),[O,H]=(0,o.useState)(!1),[P,L]=(0,o.useState)(E),[W,J]=(0,o.useState)({}),[q,B]=(0,o.useState)(!1),{contextObj:G}=(0,o.useContext)(C.i),[Y,Z]=(0,o.useState)(!1),[K,Q]=(0,o.useState)([]),X=(0,D.Zp)();(0,o.useEffect)(()=>{(0,z.z)({address:"discussionForum/discussionTopic?UserId=".concat(null===s||void 0===s?void 0:s.UserId,"&UserTypeId=").concat(null===s||void 0===s?void 0:s.UserTypeId,"&Company_id=").concat(null===s||void 0===s?void 0:s.Company_id)}).then(e=>{if(e.success){const d=[];e.data.forEach(e=>{var i;null===e||void 0===e||null===(i=e.InvolvedUsers)||void 0===i||i.forEach(i=>{Number(null===i||void 0===i?void 0:i.UserId)===Number(null===s||void 0===s?void 0:s.UserId)&&d.push(e)})}),c(0===Number(s.UserTypeId)||1===Number(s.UserTypeId)?null===e||void 0===e?void 0:e.data:d)}}).catch(e=>console.log(e))},[Y,null===s||void 0===s?void 0:s.UserId,null===s||void 0===s?void 0:s.UserTypeId]),(0,o.useEffect)(()=>{(0,z.z)({address:"masters/users/employeeAndSalesPerson/dropDown?Company_id=".concat(null===s||void 0===s?void 0:s.Company_id)}).then(e=>{e.success&&Q(e.data)}).catch(e=>console.log(e))},[null===s||void 0===s?void 0:s.BranchId]);const $=()=>{_(!1),L(E),B(!1)},ee=()=>{V(!1),L(E)},se=()=>{H(!1),J({})};return 1===Number(G.Read_Rights)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.N9,{}),(0,a.jsx)("div",{className:"cus-card",children:(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("div",{className:"d-flex mb-4 ",children:[(0,a.jsx)("p",{className:"fw-bold fa-18 px-2 flex-grow-1",children:"Topics"}),(0,M.id)(G.Add_Rights,1)&&(0,a.jsx)("button",{className:"btn btn-primary rounded-5 px-3 fa-13 shadow",onClick:()=>_(!0),children:"Create Topic"})]}),d.length>0?(0,a.jsx)("table",{className:"table",children:(0,a.jsx)("tbody",{children:d.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"fa-14 border-0",children:(0,a.jsxs)("div",{className:"d-flex align-items-start justify-content-center flex-column",children:[(0,a.jsx)("p",{className:"mb-0 fw-bold fa-14 under-blue ".concat(0===Number(null===e||void 0===e?void 0:e.Project_Id)?"text-primary":"text-secondary"),onClick:()=>X("chats",{state:e}),children:null===e||void 0===e?void 0:e.Topic}),(0,a.jsx)("p",{className:"mb-0 py-2 text-muted",children:null===e||void 0===e?void 0:e.Description})]})}),(0,a.jsx)("td",{className:"fa-14 text-center border-0",children:(0,a.jsx)(x.A,{title:"Team Size",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{className:"fa-18 text-primary mx-1"})," ",null===e||void 0===e?void 0:e.InvolvedUsersCount]})})}),(0,a.jsx)("td",{className:"fa-14 text-center border-0",children:(0,a.jsx)(x.A,{title:"Messages Count",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n,{className:"fa-18 text-primary mx-1"})," ",null===e||void 0===e?void 0:e.TotalMessages]})})}),(0,a.jsx)("td",{className:"fa-14 border-0",children:(0,a.jsx)(x.A,{title:"Documents Shared",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r,{className:"fa-18 text-primary me-1"})," "," "+(null===e||void 0===e?void 0:e.DocumentsShared)]})})}),(0,a.jsx)("td",{className:"fa-14 border-0",children:(0,a.jsxs)("span",{className:"d-flex",children:[(0,a.jsx)(p.A,{size:"small",onClick:()=>X("chats",{state:e}),children:(0,a.jsx)(t.A,{className:" text-primary"})}),((0,M.id)(G.Edit_Rights,1)||(0,M.id)(G.Delete_Rights,1))&&(0,a.jsxs)(I.A,{children:[(0,a.jsx)(I.A.Toggle,{variant:"success",id:"actions",className:"rounded-5 bg-transparent text-dark border-0 btn"}),(0,a.jsxs)(I.A.Menu,{children:[(0,M.id)(G.Edit_Rights,1)&&(0,a.jsxs)(j.A,{onClick:()=>(J(e),void H(!0)),children:[(0,a.jsx)(h,{className:"fa-in text-primary me-2"})," Manage Team"]}),(0,M.id)(G.Edit_Rights,1)&&(0,M.id)(null===e||void 0===e?void 0:e.Project_Id,0)&&(0,a.jsxs)(j.A,{onClick:()=>{return s=e,B(!0),L(s),void _(!0);var s},children:[(0,a.jsx)(u.A,{className:"fa-in me-2"})," Edit"]}),(0,M.id)(G.Delete_Rights,1)&&(0,M.id)(null===e||void 0===e?void 0:e.Project_Id,0)&&(0,a.jsxs)(j.A,{onClick:()=>{return s=e,V(!0),void L(s);var s},children:[(0,a.jsx)(v.A,{className:"fa-in me-2 text-danger"})," Delete"]})]})]})]})})]},s))})}):(0,a.jsx)("h5",{className:"text-center mb-5",children:(0,M.id)(s.UserTypeId,0)||(0,M.id)(s.UserTypeId,1)?"No Topics Available":"You are not involved in any discussion"})]})}),(0,a.jsxs)(A.A,{open:m,onClose:$,maxWidth:"sm",fullWidth:!0,children:[(0,a.jsx)(g.A,{children:q?"Modify Topic":"Create Discussion Topic"}),(0,a.jsx)(b.A,{children:(0,a.jsx)("table",{className:"table",children:(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border-0",children:"Topic"}),(0,a.jsx)("td",{className:"border-0",children:(0,a.jsx)("input",{className:"cus-inpt",onChange:e=>L((0,i.A)((0,i.A)({},P),{},{Topic:e.target.value})),value:P.Topic,maxLength:100,placeholder:"ex: Morning Activiey",autoFocus:!0})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border-0",children:"Describtion"}),(0,a.jsx)("td",{className:"border-0",children:(0,a.jsx)("textarea",{className:"cus-inpt",value:P.Description,rows:5,maxLength:300,placeholder:"maximum 300 character",onChange:e=>L((0,i.A)((0,i.A)({},P),{},{Description:e.target.value}))})})]})]})})}),(0,a.jsxs)(N.A,{children:[(0,a.jsx)(y.A,{onClick:$,children:"Close"}),(0,a.jsx)(y.A,{onClick:q?async()=>{null!==P&&void 0!==P&&P.Id&&1===Number(null===G||void 0===G?void 0:G.Edit_Rights)&&1===Number(null===G||void 0===G?void 0:G.Add_Rights)&&(0,z.z)({address:"discussionForum/discussionTopic",method:"PUT",bodyData:P}).then(e=>{e.success?(T.oR.success(e.message),Z(!Y),$()):T.oR.error(e.message)}).catch(e=>console.log(e))}:async()=>{1===Number(null===G||void 0===G?void 0:G.Add_Rights)&&(0,z.z)({address:"discussionForum/discussionTopic",method:"POST",bodyData:P}).then(e=>{e.success?(T.oR.success(e.message),Z(!Y),$()):T.oR.error(e.message)}).catch(e=>console.log(e))},children:q?"Update":"Create"})]})]}),(0,a.jsxs)(A.A,{open:k,onClose:ee,children:[(0,a.jsx)(g.A,{children:"Confirmation"}),(0,a.jsxs)(b.A,{children:["Do you want to delete the ",(0,a.jsx)("span",{className:"text-primary fw-bold",children:null===P||void 0===P?void 0:P.Topic})," Topic?"]}),(0,a.jsxs)(N.A,{children:[(0,a.jsx)(y.A,{onClick:ee,children:"Close"}),(0,a.jsx)(y.A,{onClick:async()=>{null!==P&&void 0!==P&&P.Id&&1===Number(null===G||void 0===G?void 0:G.Delete_Rights)&&(0,z.z)({address:"discussionForum/discussionTopic",method:"DELETE",bodyData:P}).then(e=>{e.success?(T.oR.success(e.message),ee(),Z(!Y)):T.oR.error(e.message)}).catch(e=>console.log(e))},color:"error",children:"Delete"})]})]}),(0,a.jsxs)(A.A,{open:O,onClose:se,maxWidth:"sm",fullWidth:!0,children:[(0,a.jsx)(g.A,{children:"Manage Team"}),(0,a.jsx)(b.A,{children:(0,a.jsx)(U.A,{multiple:!0,id:"checkboxes-tags-demo",options:K,disableCloseOnSelect:!0,getOptionLabel:e=>null===e||void 0===e?void 0:e.Name,value:(null===W||void 0===W?void 0:W.InvolvedUsers)||[],onChange:(e,s)=>J((0,i.A)((0,i.A)({},W),{},{InvolvedUsers:s})),renderOption:(e,s,d)=>{let{selected:o}=d;return(0,a.jsxs)("li",(0,i.A)((0,i.A)({},e),{},{children:[(0,a.jsx)(S.A,{icon:w,checkedIcon:F,style:{marginRight:8},checked:o}),null===s||void 0===s?void 0:s.Name]}))},className:"pt-2",isOptionEqualToValue:(e,s)=>(null===e||void 0===e?void 0:e.UserId)===(null===s||void 0===s?void 0:s.UserId),renderInput:e=>(0,a.jsx)(R.A,(0,i.A)((0,i.A)({},e),{},{label:"Users",placeholder:"Select Team Members"}))})}),(0,a.jsxs)(N.A,{children:[(0,a.jsx)(y.A,{onClick:se,children:"Close"}),(0,a.jsx)(y.A,{color:"success",onClick:async()=>{1===Number(null===G||void 0===G?void 0:G.Add_Rights)&&(0,z.z)({address:"discussionForum/modifyTeam",method:"POST",bodyData:{Teams:null===W||void 0===W?void 0:W.InvolvedUsers,Topic_Id:null===W||void 0===W?void 0:W.Id}}).then(e=>{e.success?(T.oR.success(e.message),Z(!Y),se()):T.oR.error(e.message)}).catch(e=>console.log(e))},children:"Save"})]})]})]}):(0,a.jsx)(f.A,{})}}}]);
//# sourceMappingURL=3293.e63e10e5.chunk.js.map