"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[6016],{3900:(e,t,a)=>{a.d(t,{A:()=>o});a(65043);var s=a(59662),r=a(70579);const o=(0,s.A)((0,r.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},13448:(e,t,a)=>{a.d(t,{A:()=>S});var s=a(89379),r=a(65043),o=a(83462),n=a(29347),l=a(11906),d=a(35316),c=a(79650),i=a(71806),p=a(84882),u=a(28076),m=a(39652),h=a(73460),x=a(26600),y=a(12412),j=a(67784),A=a(65074),g=a(91036),v=a(81e3),f=a(45777),b=a(54750),_=a(70579);const S=e=>{let{open:t,onClose:a,projectId:S,onReload:C}=e;const E={Name:"",Designation_Name:"",BranchName:""},[P,T]=(0,r.useState)(E),[N,k]=(0,r.useState)(!0),[D,w]=(0,r.useState)(!1),[I,R]=(0,r.useState)([]),[z,L]=(0,r.useState)([]),M=localStorage.getItem("user"),F=JSON.parse(M),{contextObj:O}=(0,r.useContext)(f.i);(0,r.useEffect)(()=>{t&&S&&(H(),U(),V())},[t,S]);const H=async()=>{k(!0);try{const e=await(0,A.z)({address:"masters/Employeedetails?Project_Id=".concat(S)});e.success&&T(e.data)}catch(e){console.error(e),g.oR.error("Failed to fetch employee details")}finally{k(!1)}},U=async()=>{k(!0);try{const e=await(0,A.z)({address:"masters/Employeedetails/dropDown?Company_id=".concat(F.Company_id)});e.success&&R(e.data)}catch(e){console.error(e),g.oR.error("Failed to fetch employees for dropdown")}finally{k(!1)}},V=async()=>{k(!0);try{const e=await(0,A.z)({address:"masters/Employeedetails?Project_Id=".concat(S)});e.success&&L(e.data)}catch(e){console.error(e),g.oR.error("Failed to fetch assigned employees")}finally{k(!1)}},W=()=>{a(),T(E)};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(o.A,{open:t,maxWidth:"sm",fullWidth:!0,children:[(0,_.jsxs)(v.A,{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:2,marginInlineStart:2,children:[(0,_.jsx)("span",{children:"Employee Details"}),(0,_.jsx)(n.A,{children:(0,_.jsx)(l.A,{variant:"contained",color:"primary",onClick:()=>{w(!0)},sx:{mr:1},children:"Add"})})]}),(0,_.jsx)(d.A,{children:N?(0,_.jsx)("p",{children:"Loading..."}):(0,_.jsx)(c.A,{children:(0,_.jsxs)(i.A,{children:[(0,_.jsx)(p.A,{children:(0,_.jsxs)(u.A,{children:[(0,_.jsx)(m.A,{children:"Employee Name"}),(0,_.jsx)(m.A,{children:"Position"}),(0,_.jsx)(m.A,{children:"Department"})]})}),(0,_.jsx)(h.A,{children:Array.isArray(P)&&P.length>0?P.map(e=>(0,_.jsxs)(u.A,{children:[(0,_.jsx)(m.A,{children:e.Name||"N/A"}),(0,_.jsx)(m.A,{children:e.Designation_Name||"-"}),(0,_.jsx)(m.A,{children:e.BranchName||"-"})]},e.EmployeeId||e.UserId)):(0,_.jsx)(u.A,{children:(0,_.jsx)(m.A,{colSpan:3,children:"No data available"})})})]})})}),(0,_.jsx)(n.A,{sx:{marginTop:"auto ",position:"sticky",bottom:0},children:(0,_.jsx)(l.A,{variant:"contained",color:"primary",onClick:W,children:"Close"})})]}),(0,_.jsxs)(o.A,{open:D,maxWidth:"sm",fullWidth:!0,children:[(0,_.jsx)(x.A,{children:"Add Employee"}),(0,_.jsx)(d.A,{children:(0,_.jsx)(y.A,{multiple:!0,options:I,getOptionLabel:e=>e.Name,isOptionEqualToValue:(e,t)=>e.UserId===t.UserId,onChange:(e,t)=>{const a=t.filter((e,t,a)=>t===a.findIndex(t=>t.UserId===e.UserId));L(a)},PopperComponent:e=>(0,_.jsx)(b.A,(0,s.A)((0,s.A)({},e),{},{placement:"top"})),value:z,onClose:onclose,renderInput:e=>(0,_.jsx)(j.A,(0,s.A)((0,s.A)({},e),{},{placeholder:"Employees"}))})}),(0,_.jsxs)(n.A,{children:[(0,_.jsx)(l.A,{onClick:()=>{w(!1),W(),T(E)},children:"Cancel"}),(0,_.jsx)(l.A,{onClick:async()=>{if(1===Number(null===O||void 0===O?void 0:O.Add_Rights))try{(await(0,A.z)({address:"masters/Employeedetails/employeeAdd",method:"POST",bodyData:{Project_Id:S,UserIds:z.map(e=>e.UserId)}})).success?(g.oR.success("Employees added successfully"),w(!1),await H(),await V(),C()):g.oR.error("Failed to add employees")}catch(e){console.error(e),g.oR.error("Error adding employees")}},variant:"contained",color:"primary",children:"Add"})]})]})]})}},14792:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(70579);const r=()=>(0,s.jsx)("span",{style:{color:"red",fontWeight:"bold",fontSize:"1em"},children:" *"})},15710:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(58168),r=a(98587),o=a(65043),n=a(59395),l=a(22016),d=a(70579);const c=["children"],i=o.forwardRef(function(e,t){const{children:a}=e,i=(0,r.A)(e,c),p=(0,l.QM)();if(null===p)throw new TypeError("No TabContext provided");const u=o.Children.map(a,e=>o.isValidElement(e)?o.cloneElement(e,{"aria-controls":(0,l.eR)(p,e.props.value),id:(0,l.vU)(p,e.props.value)}):null);return(0,d.jsx)(n.A,(0,s.A)({},i,{ref:t,value:p.value,children:u}))})},22016:(e,t,a)=>{a.d(t,{Ay:()=>n,QM:()=>l,eR:()=>d,vU:()=>c});var s=a(65043),r=a(70579);const o=s.createContext(null);function n(e){const{children:t,value:a}=e,n=function(){const[e,t]=s.useState(null);return s.useEffect(()=>{t("mui-p-".concat(Math.round(1e5*Math.random())))},[]),e}(),l=s.useMemo(()=>({idPrefix:n,value:a}),[n,a]);return(0,r.jsx)(o.Provider,{value:l,children:t})}function l(){return s.useContext(o)}function d(e,t){const{idPrefix:a}=e;return null===a?null:"".concat(e.idPrefix,"-P-").concat(t)}function c(e,t){const{idPrefix:a}=e;return null===a?null:"".concat(e.idPrefix,"-T-").concat(t)}},28503:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(89379),r=a(65043),o=a(83462),n=a(26600),l=a(35316),d=a(29347),c=a(65074),i=a(91036),p=(a(92342),a(14792)),u=a(97707),m=a(70579);const h=e=>{let{open:t,onClose:a,inputValue:h,isEdit:x,setReload:y}=e;const j=localStorage.getItem("user"),A=JSON.parse(j),[g,v]=(0,r.useState)([]),[f,b]=(0,r.useState)([]),[_,S]=(0,r.useState)({Project_Id:"",Project_Name:"",Project_Desc:"",Project_Head:"",Est_Start_Dt:(0,u.ny)(),Est_End_Dt:(0,u.ny)(),Project_Status:"",Entry_By:null===A||void 0===A?void 0:A.UserId,Company_id:null===A||void 0===A?void 0:A.Company_id});(0,r.useEffect)(()=>{(0,c.z)({address:"masters/users/employee/dropDown?Company_id=".concat(null===A||void 0===A?void 0:A.Company_id)}).then(e=>{v(e.success?e.data:[])}).catch(e=>console.error("Fetch Error:",e))},[null===A||void 0===A?void 0:A.Company_id]),(0,r.useEffect)(()=>{(0,c.z)({address:"taskManagement/statusList"}).then(e=>{e.success&&b(e.data)}).catch(e=>console.error("Fetch Error:",e))},[]),(0,r.useEffect)(()=>{t&&(x&&h?S((0,s.A)((0,s.A)({},h),{},{Project_Head:null===h||void 0===h?void 0:h.Project_Head_Id,Est_Start_Dt:h.Est_Start_Dt?(0,u.ny)(h.Est_Start_Dt):"",Est_End_Dt:h.Est_End_Dt?(0,u.ny)(h.Est_End_Dt):"",Project_Status:(null===h||void 0===h?void 0:h.Project_Status)||"",Project_Desc:(null===h||void 0===h?void 0:h.Project_Desc)||"-"})):x||S({Project_Name:"",Project_Desc:"",Project_Head:"",Est_Start_Dt:(0,u.ny)(),Est_End_Dt:(0,u.ny)(),Project_Status:"",Entry_By:null===A||void 0===A?void 0:A.UserId,Company_id:null===A||void 0===A?void 0:A.Company_id}))},[h,t,x]);const C=e=>{S((0,s.A)((0,s.A)({},_),{},{[e.target.name]:e.target.value}))},E=()=>{const e=["Project_Name","Project_Head","Est_Start_Dt","Est_End_Dt","Project_Status"];for(const t of e)if(!_[t])return i.oR.error("".concat(t.replace(/_/g," ")," is required")),!1;return!0},P=[{label:"Project Name",elem:"input",type:"text",required:!0,name:"Project_Name",value:_.Project_Name||""},{label:"Project Head",elem:"select",options:g.map(e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name})),required:!0,name:"Project_Head",value:_.Project_Head||""},{label:"Estimated Start Date",elem:"input",type:"date",required:!0,name:"Est_Start_Dt",value:_.Est_Start_Dt||""},{label:"Estimated End Date",elem:"input",type:"date",required:!0,name:"Est_End_Dt",value:_.Est_End_Dt||""},{label:"Project Status",elem:"select",options:f.map(e=>({value:e.Status_Id,label:e.Status})),required:!0,name:"Project_Status",value:_.Project_Status||""},{label:"Description",elem:"textarea",name:"Project_Desc",value:_.Project_Desc||" "}];return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(o.A,{open:t,onClose:a,children:[(0,m.jsx)(n.A,{className:"bg-primary text-white mb-2 px-3 py-2",children:x?"Edit Project":"Create Project"}),(0,m.jsx)(l.A,{children:(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x?E()&&(0,c.z)({address:"taskManagement/project",method:"PUT",bodyData:_}).then(e=>{e.success?(a(),y(e=>!e),i.oR.success(e.message)):i.oR.error(e.message)}).catch(e=>console.error("Fetch Error:",e)):(()=>{if(!E())return;const e=(0,s.A)((0,s.A)({},_),{},{Company_id:A.Company_id});(0,c.z)({address:"taskManagement/project",method:"POST",bodyData:e}).then(e=>{e.success?(a(),y(e=>!e),i.oR.success(e.message)):i.oR.error(e.message)}).catch(e=>{console.error("Fetch Error:",e),i.oR.error("An error occurred while creating the project.")})})()},children:[(0,m.jsx)("div",{className:"row",children:P.map((e,t)=>(0,m.jsxs)("div",{className:"col-lg-4 mb-3",children:[(0,m.jsxs)("label",{children:[e.label," ",e.required&&(0,m.jsx)(p.A,{})]}),"textarea"===e.elem?(0,m.jsx)("textarea",{name:e.name,className:"cus-inpt",value:e.value,onChange:C}):"select"===e.elem?(0,m.jsxs)("select",{name:e.name,className:"cus-inpt",value:e.value,onChange:C,children:[(0,m.jsx)("option",{value:"",children:"Select"}),e.options&&e.options.map((e,t)=>(0,m.jsx)("option",{value:e.value,children:e.label},t))]}):(0,m.jsx)("input",{type:e.type,name:e.name,className:"cus-inpt",value:e.value,onChange:C})]},t))}),(0,m.jsxs)(d.A,{children:[(0,m.jsx)("button",{className:"btn btn-light rounded-5 px-3",type:"button",onClick:a,children:"Cancel"}),(0,m.jsx)("button",{className:"btn btn-primary rounded-5 px-3",type:"submit",children:x?"Update":"Submit"})]})]})})]})})}},51639:(e,t,a)=>{a.d(t,{A:()=>o});a(65043);var s=a(59662),r=a(70579);const o=(0,s.A)((0,r.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},52900:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(64775),r=a(45527);function o(e){let{props:t,name:a,defaultTheme:o,themeId:n}=e,l=(0,r.A)(o);n&&(l=l[n]||l);return(0,s.A)({theme:l,name:a,props:t})}},64775:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(22018);function r(e){const{theme:t,name:a,props:r}=e;return t&&t.components&&t.components[a]&&t.components[a].defaultProps?(0,s.A)(t.components[a].defaultProps,r):r}},72876:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(52900),r=a(15170),o=a(13375);function n(e){let{props:t,name:a}=e;return(0,s.A)({props:t,name:a,defaultTheme:r.A,themeId:o.A})}},75155:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(59662),r=a(70579);const o=(0,s.A)((0,r.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People")},76447:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(59662),r=a(70579);const o=(0,s.A)((0,r.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"Launch")},86506:(e,t,a)=>{a.d(t,{A:()=>y});var s=a(58168),r=a(98587),o=a(65043),n=a(58387),l=a(34535),d=a(72876),c=a(68606),i=a(32400);function p(e){return(0,i.Ay)("MuiTabPanel",e)}(0,a(57056).A)("MuiTabPanel",["root"]);var u=a(22016),m=a(70579);const h=["children","className","value"],x=(0,l.Ay)("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})(e=>{let{theme:t}=e;return{padding:t.spacing(3)}}),y=o.forwardRef(function(e,t){const a=(0,d.A)({props:e,name:"MuiTabPanel"}),{children:o,className:l,value:i}=a,y=(0,r.A)(a,h),j=(0,s.A)({},a),A=(e=>{const{classes:t}=e;return(0,c.A)({root:["root"]},p,t)})(j),g=(0,u.QM)();if(null===g)throw new TypeError("No TabContext provided");const v=(0,u.eR)(g,i),f=(0,u.vU)(g,i);return(0,m.jsx)(x,(0,s.A)({"aria-labelledby":f,className:(0,n.A)(A.root,l),hidden:i!==g.value,id:v,ref:t,role:"tabpanel",ownerState:j},y,{children:i===g.value&&o}))})},93603:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var s=a(65043),r=a(17392),o=a(83462),n=a(26600),l=a(35316),d=a(29347),c=a(76447),i=a(75155),p=a(91036),u=a(45777),m=a(65074),h=a(28503),x=a(13448),y=a(58786),j=a(89379),A=a(81e3),g=a(24056),v=a(85865),f=a(11906),b=a(43845),_=a(22016),S=a(15710),C=a(86506),E=a(97707),P=a(70579);const T=function(e){let{dialogOpen:t,setDialogOpen:a,projectid:r,reload:c,onReload:i,selectedProject:u}=e;const[h,x]=(0,s.useState)([]),y=JSON.parse(localStorage.getItem("user")),[T,N]=(null===y||void 0===y||y.Company_id,(0,s.useState)({startDate:(0,E.ny)()||(new Date).toISOString().split("T")[0]})),[k,D]=(0,s.useState)(!1),[w,I]=(0,s.useState)([]),[R,z]=(0,s.useState)(""),[L,M]=(0,s.useState)("1"),[F,O]=(0,s.useState)([]),[H,U]=(0,s.useState)([]),V=(e,t)=>{M(t)},W=(e,t)=>{I(e),z(t),D(!0)},B=()=>{D(!1),I([]),z("")};return(0,s.useEffect)(()=>{if(h.length>0&&h[0].TaskDetails)try{const e=JSON.parse(h[0].TaskDetails);U(e)}catch(e){console.error("Error parsing TaskDetails:",e)}},[h]),(0,s.useEffect)(()=>{(async()=>{(0,m.z)({address:"taskManagement/project/schedule/newscheduleType"}).then(e=>{e.success?O(e.data):p.oR.error(e.message)})})()},[r]),(0,s.useEffect)(()=>{r&&(async()=>{T.startDate&&""!==T.startDate||N((0,j.A)((0,j.A)({},T),{},{startDate:(new Date).toISOString().split("T")[0]}));try{const e=await(0,m.z)({address:"taskManagement/project/schedule/projectDetailsforReport?Project_Id=".concat(r,"&StartDate=").concat(T.startDate)});e.success?x(e.data):p.oR.error("Failed to fetch task details")}catch(e){p.oR.error("Error while fetching task details"),console.error("Error while fetching task details:",e)}})()},[T.startDate,r]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(o.A,{open:t,fullWidth:!0,maxWidth:"lg",PaperProps:{style:{height:"75vh"}},children:[(0,P.jsx)(n.A,{children:(0,P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,P.jsx)("span",{children:null===u||void 0===u?void 0:u.Project_Name}),(0,P.jsx)("div",{style:{display:"flex",alignItems:"center"}})]})}),(0,P.jsx)(A.A,{sx:{width:"100%",typography:"body1"},children:h.map((e,t)=>{const a=JSON.parse(e.SchTypes);return(0,P.jsxs)(_.Ay,{value:L,children:[(0,P.jsx)(A.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,P.jsxs)(S.A,{onChange:V,"aria-label":"Schedule Types",children:[Array.isArray(a)&&a.length>0?a.map((e,t)=>(0,P.jsx)(g.A,{label:e.SchType||"No SchType",value:(e.SchTypeId||t).toString(),id:"tab-".concat(e.SchTypeId||t),"aria-controls":"tabpanel-".concat(e.SchTypeId||t)},"".concat(e.SchTypeId||"index","-").concat(t))):(0,P.jsxs)(v.A,{variant:"body2",color:"textSecondary",sx:{padding:2},children:["No Details Available for ",a]}),(0,P.jsx)(g.A,{label:"Today",value:"today",id:"tab-today","aria-controls":"tabpanel-today"})]})}),Array.isArray(a)&&a.map((e,t)=>(0,P.jsxs)(C.A,{value:(e.SchTypeId||t).toString(),id:"tabpanel-".concat(e.SchTypeId||t),"aria-labelledby":"tab-".concat(e.SchTypeId||t),children:[(0,P.jsx)(A.A,{sx:{marginBottom:2,padding:2,backgroundColor:"#f9f9f9",borderRadius:"8px"},children:Array.isArray(e.TaskCountsInSchType)&&e.TaskCountsInSchType.length>0?e.TaskCountsInSchType.map((t,a)=>(0,P.jsxs)(v.A,{variant:"body1",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,P.jsxs)(A.A,{children:["Schedule Type: ",(0,P.jsx)("strong",{children:e.SchType})]}),(0,P.jsxs)(A.A,{textAlign:"right",children:["Total Tasks: ",(0,P.jsx)("strong",{children:t.TotalTasks})," / Completed Tasks: ",(0,P.jsx)("strong",{children:t.CompletedTasks})]})]},a)):(0,P.jsx)(v.A,{variant:"body2",color:"textSecondary",children:"No tasks counted for this schedule type."})}),Array.isArray(e.Tasks)&&e.Tasks.length>0?(0,P.jsx)(A.A,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:e.Tasks.map(e=>(0,P.jsxs)("div",{style:{backgroundColor:"#f0f4ff",boxShadow:"black",padding:"16px",borderRadius:"8px",display:"flex",margin:"8px 0",width:"100%",justifyContent:"space-between"},children:[(0,P.jsx)(v.A,{fontWeight:"bold",style:{marginBottom:"8px"},children:e.Task_Name||"DEFAULT TASK"}),Array.isArray(e.AssignedEmployees)&&e.AssignedEmployees.length>0?(0,P.jsx)(f.A,{onClick:()=>W(e.AssignedEmployees,e.Task_Name),sx:{marginLeft:"auto"},children:(0,P.jsx)("span",{style:{textAlign:"left"},children:"View Employees"})}):(0,P.jsx)("span",{style:{marginLeft:"60px",textAlign:"left"},children:"No employees assigned"})]},e.Task_Id))}):(0,P.jsx)(v.A,{variant:"body2",color:"textSecondary",children:"No tasks available for this task type."})]},"".concat(e.SchTypeId||"index","-").concat(t))),(0,P.jsxs)(C.A,{value:"today",id:"tabpanel-today","aria-labelledby":"tab-today",children:[(0,P.jsx)(A.A,{sx:{padding:2},children:Array.isArray(H)&&H.length>0?(0,P.jsx)("div",{children:(0,P.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,P.jsx)(v.A,{variant:"h6",gutterBottom:!0,style:{margin:0},children:"Task Details for"}),(0,P.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,P.jsx)("span",{style:{verticalAlign:"middle"},children:"From:"}),(0,P.jsx)("input",{type:"date",value:T.startDate,onChange:e=>N((0,j.A)((0,j.A)({},T),{},{startDate:e.target.value})),className:"cus-inpt",style:{padding:"5px",borderRadius:"4px",border:"1px solid #ccc"}})]})]})}):(0,P.jsx)(v.A,{variant:"body2",color:"textSecondary",children:"No tasks available for today."})}),Array.isArray(H)&&H.length>0?H.map(e=>(0,P.jsxs)("div",{style:{backgroundColor:"#fff",padding:"16px",borderRadius:"12px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",marginBottom:"16px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,P.jsx)(v.A,{variant:"h6",fontWeight:"bold",sx:{color:"#2c3e50",marginRight:"16px"},children:e.Task_Name||"DEFAULT TASK"}),(0,P.jsx)(A.A,{sx:{display:"flex",flexWrap:"wrap"},children:Array.isArray(e.AssignedEmployees)&&e.AssignedEmployees.length>0?(0,P.jsx)(f.A,{onClick:()=>W(e.AssignedEmployees,e.Task_Name),sx:{marginLeft:"8px"},children:"View Employees"}):(0,P.jsx)(v.A,{variant:"body2",color:"textSecondary",sx:{marginLeft:"8px"},children:"No Employees Assigned"})})]},e.Task_Id)):(0,P.jsx)(v.A,{variant:"body2",color:"textSecondary",sx:{padding:"16px"},children:"No tasks available for today."})]})]},t)})}),(0,P.jsx)(d.A,{sx:{marginTop:"auto",position:"sticky",bottom:0},children:(0,P.jsx)(f.A,{variant:"contained",color:"primary",onClick:async()=>{a(!1)},children:"Close"})})]}),(0,P.jsxs)(o.A,{open:k,onClose:B,children:[(0,P.jsxs)(n.A,{children:["Employee Details for ",R]}),(0,P.jsx)(l.A,{children:w.length>0?(0,P.jsx)(A.A,{sx:{display:"flex",flexWrap:"wrap"},children:w.map((e,t)=>(0,P.jsx)(b.A,{label:e.Name,variant:"outlined",size:"small",sx:{margin:"4px",color:"green"}},t))}):(0,P.jsx)(v.A,{variant:"body1",children:"No employees assigned to this task."})}),(0,P.jsx)(d.A,{children:(0,P.jsx)(f.A,{onClick:B,color:"primary",children:"Close"})})]})]})},N=()=>{const[e,t]=(0,s.useState)(!1),[a,j]=(0,s.useState)([]),[A,g]=(0,s.useState)([]),{contextObj:v}=(0,s.useContext)(u.i),[f,b]=(0,s.useState)(!1),[_,S]=(0,s.useState)(null),[C,E]=(0,s.useState)(!1),[N,k]=(0,s.useState)(0),[D,w]=(0,s.useState)(!1),[I,R]=(0,s.useState)(null),[z,L]=(0,s.useState)(!1),[M,F]=(0,s.useState)(!1),[O,H]=(0,s.useState)(""),U=JSON.parse(localStorage.getItem("user"));(0,s.useEffect)(()=>{W(),B()},[null===U||void 0===U?void 0:U.Company_id,e]);const V=()=>t(e=>!e),W=async()=>{try{const e=await(0,m.z)({address:"taskManagement/project/newProjectAbstract?Company_id=".concat(null===U||void 0===U?void 0:U.Company_id)});j(e.success?e.data:[])}catch(e){console.error(e),j([])}},B=async()=>{try{const e=await(0,m.z)({address:"taskManagement/project?Company_id=".concat(null===U||void 0===U?void 0:U.Company_id)});g(e.success?e.data:[])}catch(e){console.error(e),g([])}},q=()=>{I&&(0,m.z)({address:"taskManagement/project",method:"DELETE",bodyData:{Project_Id:null===I||void 0===I?void 0:I.Project_Id}}).then(a=>{a.success?(t(!e),p.oR.success(a.message)):p.oR.error(a.message)}).catch(e=>console.error("Fetch Error:",e)),w(!1)},J=[{name:"Project",selector:e=>e.Project_Name,sortable:!0,width:"250px"},{name:"Head",selector:e=>{var t;return null===(t=A.find(t=>t.Project_Id===e.Project_Id))||void 0===t?void 0:t.Project_Head_Name},sortable:!0},{name:"Status",selector:e=>{var t;return null===(t=A.find(t=>t.Project_Id===e.Project_Id))||void 0===t?void 0:t.Status},sortable:!0},{name:"End Date",selector:e=>e.Est_End_Dt?new Date(e.Est_End_Dt).toLocaleDateString("en-IN"):"N/A",sortable:!0},{name:"Progress",selector:e=>{return"".concat((t=e.TodayTaskcounts,a=e.CompletedTasks,0===Number(t)?0:(Number(a)/Number(t)*100).toFixed(0)),"%");var t,a},sortable:!0},{name:"Task Details",cell:e=>(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(r.A,{onClick:()=>Q(e),children:(0,P.jsx)(c.A,{})}),e.CompletedTasks," / ",e.TodayTaskcounts]})},{name:"Task Count",selector:e=>null===e||void 0===e?void 0:e.TodayTaskcounts,sortable:!0,sortable:!0},{name:"Assigned",selector:e=>e.TasksAssignedToEmployee},{name:"Employees",cell:e=>(0,P.jsxs)(P.Fragment,{children:[1===Number(null===v||void 0===v?void 0:v.Add_Rights)&&(0,P.jsx)(r.A,{onClick:()=>G(e.Project_Id),children:(0,P.jsx)(i.A,{})}),e.EmployeesInvolved]})}],K=a.filter(e=>{var t,a;const s=(null===(t=A.find(t=>t.Project_Id===e.Project_Id))||void 0===t?void 0:t.Project_Head_Name)||"",r=(null===(a=A.find(t=>t.Project_Id===e.Project_Id))||void 0===a?void 0:a.Status)||"";return e.Project_Name.toLowerCase().includes(O.toLowerCase())||s.toLowerCase().includes(O.toLowerCase())||r.toLowerCase().includes(O.toLowerCase())}),Q=e=>{S(e),k(e.Project_Id),F(!0)},Y=()=>{b(!1),F(!1),S(null),R(null),w(!1)},G=e=>{k(e),L(!0)};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:"fw-bold d-flex align-items-center justify-content-between mt-0 mb-3 ",children:[(0,P.jsx)("span",{style:{marginLeft:"10px"},children:"Projects"}),(0,P.jsx)("div",{className:"mb-1",style:{display:"flex",alignItems:"center"},children:(0,P.jsx)("div",{style:{position:"relative",display:"flex",alignItems:"center"}})})]}),(0,P.jsxs)("div",{className:"card-body p-0 table-container",children:[(0,P.jsx)(y.Ay,{columns:J,data:K,pagination:!0,highlightOnHover:!0,fixedHeader:!0,paginationPerPage:15,responsive:!0,persistTableHead:!0,customStyles:{headCells:{style:{fontSize:"16px",fontWeight:"bold",padding:"10px",backgroundColor:"#2c3e50",color:"#ecf0f1",position:"sticky",top:0,zIndex:2}},cells:{style:{padding:"8px",fontSize:"14px",backgroundColor:"#f9f9f9",color:"#2c3e50"}},rows:{style:{borderBottom:"1px solid #ddd"}}},style:{overflowY:"auto",maxHeight:"calc(100vh - 200px)"}}),(0,P.jsxs)(o.A,{open:D,onClose:Y,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[(0,P.jsx)(n.A,{className:"bg-danger text-white mb-2 px-3 py-2",style:{fontSize:"18px"},children:"Confirm Deletion"}),(0,P.jsxs)(l.A,{className:"p-4",style:{fontSize:"16px"},children:["Are you sure you want to delete the project",(0,P.jsx)("span",{className:"text-primary",children:" "+(null===I||void 0===I?void 0:I.Project_Name)+" "}),"?"]}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)("button",{onClick:()=>w(!1),className:"btn btn-secondary fa-13 shadow",style:{background:"#95a5a6",color:"white",borderRadius:"25px",padding:"8px 15px",cursor:"pointer"},children:"Cancel"}),(0,P.jsx)("button",{onClick:q,className:"btn btn-danger fa-13 shadow",style:{background:"#e74c3c",color:"white",borderRadius:"25px",padding:"8px 15px",cursor:"pointer"},children:"Delete"})]})]})]}),(0,P.jsx)(T,{onClose:Y,dialogOpen:M,setDialogOpen:F,isEdit:!1,parseData:U,projectid:N,onReload:V,selectedProject:_}),(0,P.jsx)(h.A,{open:f,onClose:Y,inputValue:_,isEdit:C,setReload:V,projectData:N}),(0,P.jsx)(x.A,{open:z,onClose:()=>L(!1),projectId:N,onReload:V}),(0,P.jsxs)(o.A,{open:D,onClose:Y,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[(0,P.jsx)(n.A,{className:"bg-primary text-white mb-2 px-3 py-2",children:"Confirmation"}),(0,P.jsxs)(l.A,{className:"p-4",children:["Do you want to delete the project",(0,P.jsx)("span",{className:"text-primary",children:" "+(null===I||void 0===I?void 0:I.Project_Name)+" "}),"?"]}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)("button",{onClick:()=>w(!1),className:"btn btn-secondary fa-13 shadow",children:"Cancel"}),(0,P.jsx)("button",{onClick:q,className:"btn btn-danger fa-13 shadow",children:"Delete"})]})]})]})}}}]);
//# sourceMappingURL=6016.cb375eab.chunk.js.map