{"version":3,"file":"static/js/7806.0ffa1053.chunk.js","mappings":"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","sources":["Components/appDialogComponent.jsx","../node_modules/@mui/icons-material/esm/ReceiptLong.js","../node_modules/@mui/material/CardActions/cardActionsClasses.js","../node_modules/@mui/material/CardActions/CardActions.js","Pages/Sales/SalesInvoice/manageInvolvedStaff.jsx","Pages/Sales/SalesInvoice/addProducts.jsx","Pages/Sales/SalesInvoice/salesInvoiceCreation.jsx"],"sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n    Dialog,\r\n    DialogTitle,\r\n    DialogContent,\r\n    DialogActions,\r\n    Button\r\n} from \"@mui/material\";\r\n\r\nconst AppDialog = ({\r\n    open = false,\r\n    onClose,\r\n    children,\r\n    title,\r\n    onSubmit,\r\n    submitText = \"Submit\",\r\n    closeText = \"Close\",\r\n    maxWidth = \"sm\",\r\n    fullWidth = true,\r\n    isSubmit = false\r\n}) => {\r\n    return (\r\n        <Dialog\r\n            open={open}\r\n            onClose={onClose}\r\n            fullWidth={fullWidth}\r\n            maxWidth={maxWidth}\r\n        >\r\n            {title && <DialogTitle>{title}</DialogTitle>}\r\n\r\n            <DialogContent>\r\n                {children}\r\n            </DialogContent>\r\n\r\n            <DialogActions>\r\n                <Button onClick={onClose}>\r\n                    {closeText}\r\n                </Button>\r\n\r\n                {onSubmit && (\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        onClick={onSubmit}\r\n                        type={isSubmit ? \"submit\" : \"button\"}\r\n                    >\r\n                        {submitText}\r\n                    </Button>\r\n                )}\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default AppDialog;\r\n\r\nAppDialog.propTypes = {\r\n    open: PropTypes.bool.isRequired,\r\n    onClose: PropTypes.func.isRequired,\r\n    children: PropTypes.node.isRequired,\r\n    title: PropTypes.string,\r\n    onSubmit: PropTypes.func,\r\n    submitText: PropTypes.string,\r\n    closeText: PropTypes.string,\r\n    maxWidth: PropTypes.oneOf([\"xs\", \"sm\", \"md\", \"lg\", \"xl\"]),\r\n    fullWidth: PropTypes.bool,\r\n    isSubmit: PropTypes.bool\r\n};\r\n","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon([/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19.5 3.5 18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2v14H3v3c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V2zM19 19c0 .55-.45 1-1 1s-1-.45-1-1v-3H8V5h11z\"\n}, \"0\"), /*#__PURE__*/_jsx(\"path\", {\n  d: \"M9 7h6v2H9zm7 0h2v2h-2zm-7 3h6v2H9zm7 0h2v2h-2z\"\n}, \"1\")], 'ReceiptLong');","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCardActionsUtilityClass(slot) {\n  return generateUtilityClass('MuiCardActions', slot);\n}\nconst cardActionsClasses = generateUtilityClasses('MuiCardActions', ['root', 'spacing']);\nexport default cardActionsClasses;","'use client';\n\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"disableSpacing\", \"className\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport styled from '../styles/styled';\nimport { useDefaultProps } from '../DefaultPropsProvider';\nimport { getCardActionsUtilityClass } from './cardActionsClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    disableSpacing\n  } = ownerState;\n  const slots = {\n    root: ['root', !disableSpacing && 'spacing']\n  };\n  return composeClasses(slots, getCardActionsUtilityClass, classes);\n};\nconst CardActionsRoot = styled('div', {\n  name: 'MuiCardActions',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, !ownerState.disableSpacing && styles.spacing];\n  }\n})(({\n  ownerState\n}) => _extends({\n  display: 'flex',\n  alignItems: 'center',\n  padding: 8\n}, !ownerState.disableSpacing && {\n  '& > :not(style) ~ :not(style)': {\n    marginLeft: 8\n  }\n}));\nconst CardActions = /*#__PURE__*/React.forwardRef(function CardActions(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiCardActions'\n  });\n  const {\n      disableSpacing = false,\n      className\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    disableSpacing\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardActionsRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? CardActions.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the actions do not have additional margin.\n   * @default false\n   */\n  disableSpacing: PropTypes.bool,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default CardActions;","import { Button, IconButton } from \"@mui/material\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { salesInvoiceStaffInfo } from \"./variable\";\r\nimport { checkIsNumber, isEqualNumber, reactSelectFilterLogic, toArray } from \"../../../Components/functions\";\r\nimport { customSelectStyles } from \"../../../Components/tablecolumn\";\r\nimport { Delete } from \"@mui/icons-material\";\r\nimport Select from \"react-select\";\r\n\r\nconst InvolvedStaffs = ({ StaffArray = [], setStaffArray, costCenter = [], costCategory = [] }) => {\r\n    \r\n\r\n    const getAllStaffs = (currentIndex) => {\r\n        return toArray(costCenter)\r\n            .filter(staff => \r\n       \r\n                !StaffArray.some((st, idx) => \r\n                    idx !== currentIndex && \r\n                    isEqualNumber(st.Emp_Id, staff.Cost_Center_Id)\r\n                )\r\n            )\r\n            .map(st => ({\r\n                value: st.Cost_Center_Id,\r\n                label: st.Cost_Center_Name,\r\n                userType: st.User_Type \r\n            }));\r\n    };\r\n\r\n\r\n    const getFilteredStaffs = (categoryId, currentIndex) => {\r\n        if (!checkIsNumber(categoryId)) return [];\r\n        \r\n        return toArray(costCenter)\r\n            .filter(staff => \r\n                isEqualNumber(staff.User_Type, categoryId) && \r\n          \r\n                !StaffArray.some((st, idx) => \r\n                    idx !== currentIndex && \r\n                    isEqualNumber(st.Emp_Id, staff.Cost_Center_Id)\r\n                )\r\n            )\r\n            .map(st => ({\r\n                value: st.Cost_Center_Id,\r\n                label: st.Cost_Center_Name,\r\n                userType: st.User_Type\r\n            }));\r\n    };\r\n\r\n\r\n    const handleStaffChange = (selectedOption, index) => {\r\n        setStaffArray(prev => \r\n            prev.map((staffRow, idx) => {\r\n                if (idx === index) {\r\n                    const selectedStaff = toArray(costCenter).find(\r\n                        st => isEqualNumber(st.Cost_Center_Id, selectedOption.value)\r\n                    );\r\n                    \r\n                    return {\r\n                        ...staffRow,\r\n                        Emp_Id: Number(selectedOption.value),\r\n                        Emp_Name: selectedOption.label,\r\n                     \r\n                        Emp_Type_Id: selectedStaff?.User_Type || \"\"\r\n                    };\r\n                }\r\n                return staffRow;\r\n            })\r\n        );\r\n    };\r\n\r\n\r\n    const handleCategoryChange = (e, index) => {\r\n        const newCategoryId = e.target.value;\r\n        setStaffArray(prev => \r\n            prev.map((staffRow, idx) => {\r\n                if (idx === index) {\r\n           \r\n                    const currentStaff = toArray(costCenter).find(\r\n                        st => isEqualNumber(st.Cost_Center_Id, staffRow.Emp_Id)\r\n                    );\r\n                    \r\n                    const shouldClearStaff = currentStaff && \r\n                        !isEqualNumber(currentStaff.User_Type, newCategoryId);\r\n                    \r\n                    return {\r\n                        ...staffRow,\r\n                        Emp_Type_Id: newCategoryId,\r\n                        ...(shouldClearStaff ? {\r\n                            Emp_Id: \"\",\r\n                            Emp_Name: \"\"\r\n                        } : {})\r\n                    };\r\n                }\r\n                return staffRow;\r\n            })\r\n        );\r\n    };\r\n\r\n    \r\n    const getStaffOptions = (row, index) => {\r\n        if (checkIsNumber(row?.Emp_Type_Id)) {\r\n            \r\n            return getFilteredStaffs(row.Emp_Type_Id, index);\r\n        } else {\r\n  \r\n            return getAllStaffs(index);\r\n        }\r\n    };\r\n\r\n\r\n    const getCategoryName = (categoryId) => {\r\n        const category = toArray(costCategory).find(\r\n            cat => isEqualNumber(cat.Cost_Category_Id, categoryId)\r\n        );\r\n        return category?.Cost_Category || \"\";\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"d-flex align-items-center flex-wrap mb-2 border-bottom pb-2\">\r\n                <h6 className=\"flex-grow-1 m-0\">Staff Involved</h6>\r\n                <Button\r\n                    variant=\"outlined\"\r\n                    color=\"primary\"\r\n                    type=\"button\"\r\n                    onClick={() => setStaffArray(pre => [...pre, { ...salesInvoiceStaffInfo }])}\r\n                >\r\n                    Add\r\n                </Button>\r\n            </div>\r\n\r\n            <table className=\"table table-bordered\">\r\n                <thead>\r\n                    <tr>\r\n                        <th className=\"fa-13\">Sno</th>\r\n                        <th className=\"fa-13\">Category</th>\r\n                        <th className=\"fa-13\">Staff Name</th>\r\n                        <th className=\"fa-13\">#</th>\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                    {toArray(StaffArray).map((row, index) => (\r\n                        <tr key={index}>\r\n                            <td className='fa-13 vctr text-center'>{index + 1}</td>\r\n                            \r\n                         \r\n                          \r\n                       \r\n                            <td className='fa-13 w-100 p-0'>\r\n                                <Select\r\n                                    value={checkIsNumber(row?.Emp_Id) ? {\r\n                                        value: row?.Emp_Id,\r\n                                        label: row?.Emp_Name,\r\n                                    } : null}\r\n                                    onChange={(e) => handleStaffChange(e, index)}\r\n                                    options={getStaffOptions(row, index)}\r\n                                    styles={customSelectStyles}\r\n                                    isSearchable={true}\r\n                                    placeholder=\"Select Staff\"\r\n                                    filterOption={reactSelectFilterLogic}\r\n                                    noOptionsMessage={() => {\r\n                                        if (checkIsNumber(row?.Emp_Type_Id)) {\r\n                                            return \"No staff available for this category\";\r\n                                        }\r\n                                        return \"No staff available\";\r\n                                    }}\r\n                                />\r\n                            </td>\r\n                              <td className='fa-13 vctr p-0' style={{ maxWidth: '130px', minWidth: '100px' }}>\r\n                                <select\r\n                                    value={row?.Emp_Type_Id || \"\"}\r\n                                    onChange={(e) => handleCategoryChange(e, index)}\r\n                                    className=\"cus-inpt p-2 border-0 w-100\"\r\n                                >\r\n                                    <option value=\"\">Select Category</option>\r\n                                    {toArray(costCategory).map((category, idx) => (\r\n                                        <option value={category?.Cost_Category_Id} key={idx}>\r\n                                            {category?.Cost_Category}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </td>\r\n                           \r\n                            <td className='fa-13 vctr p-0'>\r\n                                <IconButton\r\n                                    onClick={() => {\r\n                                        setStaffArray(prev => \r\n                                            prev.filter((_, filIndex) => index !== filIndex)\r\n                                        );\r\n                                    }}\r\n                                    size='small'\r\n                                >\r\n                                    <Delete color='error' />\r\n                                </IconButton>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default InvolvedStaffs;","import { useEffect, useMemo, useState } from \"react\";\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle } from \"@mui/material\";\r\nimport { checkIsNumber, Division, isEqualNumber, isValidNumber, isValidObject, Multiplication, onlynum, reactSelectFilterLogic, rid, toArray, toNumber } from \"../../../Components/functions\";\r\nimport { ClearAll } from \"@mui/icons-material\";\r\nimport RequiredStar from \"../../../Components/requiredStar\";\r\nimport { calculateGSTDetails } from \"../../../Components/taxCalculator\";\r\nimport Select from \"react-select\";\r\nimport { customSelectStyles } from \"../../../Components/tablecolumn\";\r\nimport { toast } from \"react-toastify\";\r\nimport { fetchLink } from \"../../../Components/fetchComponent\";\r\n\r\nconst validStockValue = (Item_Id, Godown_Id, stockInGodown) => {\r\n    const godownStockValue = toArray(stockInGodown).find(\r\n        godownItem => (\r\n            isEqualNumber(godownItem?.Product_Id, Item_Id) &&\r\n            isEqualNumber(godownItem?.Godown_Id, Godown_Id)\r\n        )\r\n    )?.Act_Bal_Qty;\r\n\r\n    return toNumber(godownStockValue);\r\n};\r\n\r\nconst AddProductForm = ({\r\n    children,\r\n    orderProducts = [],\r\n    setOrderProducts,\r\n    open = false,\r\n    onClose,\r\n    products = [],\r\n    brands = [],\r\n    uom = [],\r\n    godowns = [],\r\n    GST_Inclusive,\r\n    IS_IGST,\r\n    editValues = null,\r\n    initialValue = {},\r\n    batchDetails = [],\r\n    saleOrderNumber\r\n}) => {\r\n\r\n    const [productDetails, setProductDetails] = useState(initialValue);\r\n\r\n    const isInclusive = isEqualNumber(GST_Inclusive, 1);\r\n    const isNotTaxableBill = isEqualNumber(GST_Inclusive, 2);\r\n\r\n    const [stockInGodowns, setStockInGodowns] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if (isValidObject(editValues) && open) {\r\n            setProductDetails(pre => (\r\n                Object.fromEntries(\r\n                    Object.entries(pre).map(([key, value]) => [key, editValues[key] ? editValues[key] : value])\r\n                )\r\n            ))\r\n        }\r\n    }, [editValues])\r\n\r\n    const findProductDetails = (productid) => products?.find(obj => isEqualNumber(obj?.Product_Id, productid)) ?? {};\r\n\r\n    const closeDialog = () => {\r\n        setProductDetails(initialValue);\r\n        onClose();\r\n    }\r\n\r\n    const handleProductInputChange = () => {\r\n\r\n        setOrderProducts(pre => {\r\n            const existingProducts = pre.filter(ordered => ordered.rowId !== productDetails.rowId);\r\n\r\n            const currentProductDetails = Object.fromEntries(\r\n                Object.entries(productDetails).map(([key, value]) => {\r\n                    const productMaster = findProductDetails(productDetails.Item_Id);\r\n                    const gstPercentage = IS_IGST ? productMaster.Igst_P : productMaster.Gst_P;\r\n                    const isTaxable = gstPercentage > 0;\r\n\r\n                    const { Bill_Qty, Item_Rate, Amount } = productDetails;\r\n\r\n                    const taxType = isNotTaxableBill ? 'zerotax' : isInclusive ? 'remove' : 'add';\r\n                    const itemRateGst = calculateGSTDetails(Item_Rate, gstPercentage, taxType);\r\n                    const gstInfo = calculateGSTDetails(Amount, gstPercentage, taxType);\r\n\r\n                    const cgstPer = !IS_IGST ? gstInfo.cgst_per : 0;\r\n                    const igstPer = IS_IGST ? gstInfo.igst_per : 0;\r\n                    const Cgst_Amo = !IS_IGST ? gstInfo.cgst_amount : 0;\r\n                    const Igst_Amo = IS_IGST ? gstInfo.igst_amount : 0;\r\n\r\n                    switch (key) {\r\n                        case 'Item_Name': return [key, productMaster.Product_Name]\r\n                        case 'Taxable_Rate': return [key, itemRateGst.base_amount]\r\n                        case 'Total_Qty': return [key, Bill_Qty]\r\n                        case 'Taxble': return [key, isTaxable ? 1 : 0]\r\n                        case 'Taxable_Amount': return [key, gstInfo.base_amount]\r\n                        case 'Tax_Rate': return [key, gstPercentage]\r\n                        case 'Cgst':\r\n                        case 'Sgst': return [key, cgstPer ?? 0]\r\n                        case 'Cgst_Amo':\r\n                        case 'Sgst_Amo': return [key, isNotTaxableBill ? 0 : Cgst_Amo]\r\n                        case 'Igst': return [key, igstPer ?? 0]\r\n                        case 'Igst_Amo': return [key, isNotTaxableBill ? 0 : Igst_Amo]\r\n                        case 'Final_Amo': return [key, gstInfo.with_tax]\r\n\r\n                        default: return [key, productDetails[key] || value]\r\n                    }\r\n                })\r\n            );\r\n\r\n            return [...existingProducts, currentProductDetails];\r\n        });\r\n\r\n        closeDialog();\r\n    };\r\n\r\n    useEffect(() => {\r\n        setStockInGodowns([]);\r\n        if (checkIsNumber(productDetails.Item_Id) && !isEqualNumber(productDetails.Item_Id, 0)) {\r\n            fetchLink({ address: `sales/stockInGodown?Item_Id=${productDetails.Item_Id}` })\r\n                .then(data => {\r\n                    const stockInGodowns = (data.success ? data.data : []).sort(\r\n                        (a, b) => String(a?.stock_item_name).localeCompare(b?.stock_item_name)\r\n                    );\r\n                    setStockInGodowns(stockInGodowns);\r\n                })\r\n        }\r\n    }, [productDetails.Item_Id])\r\n\r\n    const altActQty = useMemo(() => {\r\n        const quantity = toNumber(productDetails?.Bill_Qty);\r\n        const productMaster = findProductDetails(productDetails?.Item_Id) || {};\r\n        const pack = toNumber(productMaster?.PackGet);\r\n\r\n        return Division(quantity, pack);\r\n    }, [productDetails.Item_Id, productDetails.Bill_Qty])\r\n\r\n    return (\r\n        <>\r\n            {children}\r\n\r\n            <Dialog\r\n                open={open}\r\n                onClose={closeDialog}\r\n                maxWidth='md' fullWidth\r\n            >\r\n                <DialogTitle className=\"border-bottom\">\r\n                    <span>Add Products Details</span>\r\n                </DialogTitle>\r\n                <form onSubmit={e => {\r\n                    e.preventDefault();\r\n                    if (\r\n                        isValidNumber(productDetails.Item_Id) && (\r\n                            Object.hasOwn(productDetails, 'GoDown_Id')\r\n                                ? isValidNumber(productDetails.GoDown_Id)\r\n                                : true\r\n                        )\r\n                    ) {\r\n                        handleProductInputChange();\r\n                    } else {\r\n                        productDetails.Item_Id ? toast.warn('Select Godown') : toast.warn('Select Product');\r\n                    }\r\n                }}>\r\n                    <DialogContent>\r\n                        <div className=\"row pb-5\">\r\n\r\n                            {/* brand */}\r\n                            <div className=\"col-6 p-2\">\r\n                                <label>Brand</label>\r\n                                <Select\r\n                                    value={{ value: productDetails.BrandID, label: productDetails.Brand }}\r\n                                    onChange={(e) => setProductDetails(pre => ({ ...pre, BrandID: e.value, Brand: e.label }))}\r\n                                    options={[\r\n                                        { value: '', label: 'select', isDisabled: true },\r\n                                        ...brands.map(obj => ({ value: obj?.Brand, label: obj?.Brand_Name }))\r\n                                    ]}\r\n                                    styles={customSelectStyles}\r\n                                    menuPortalTarget={document.body}\r\n                                    isSearchable={true}\r\n                                    placeholder={\"Select Brand\"}\r\n                                    maxMenuHeight={200}\r\n                                    filterOption={reactSelectFilterLogic}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* group */}\r\n                            <div className=\"col-6 p-2\">\r\n                                <label>Group</label>\r\n                                <Select\r\n                                    value={{ value: productDetails.GroupID, label: productDetails.Group }}\r\n                                    onChange={(e) =>\r\n                                        setProductDetails((pre) => ({ ...pre, GroupID: e.value, Group: e.label }))\r\n                                    }\r\n                                    options={[\r\n                                        { value: '', label: 'select', isDisabled: true },\r\n                                        ...products\r\n                                            .filter(\r\n                                                (pro) =>\r\n                                                    productDetails.BrandID\r\n                                                        ? isEqualNumber(pro.Brand, productDetails.BrandID)\r\n                                                        : true\r\n                                            )\r\n                                            .reduce((acc, pro) => {\r\n                                                if (\r\n                                                    !acc.some((grp) => grp.value === pro.Product_Group)\r\n                                                ) {\r\n                                                    acc.push({\r\n                                                        value: pro.Product_Group,\r\n                                                        label: pro.Pro_Group,\r\n                                                    });\r\n                                                }\r\n                                                return acc;\r\n                                            }, []),\r\n                                    ]}\r\n                                    styles={customSelectStyles}\r\n                                    menuPortalTarget={document.body}\r\n                                    isSearchable={true}\r\n                                    placeholder={\"Select Group\"}\r\n                                    maxMenuHeight={200}\r\n                                    filterOption={reactSelectFilterLogic}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* item name */}\r\n                            <div className={\r\n                                Object.hasOwn(productDetails, 'GoDown_Id') ? 'col-md-8 p-2' : \"col-12 p-2\"\r\n                            }>\r\n                                <label>Item Name <RequiredStar /></label>\r\n                                <Select\r\n                                    value={{\r\n                                        value: productDetails.Item_Id,\r\n                                        label: (\r\n                                            findProductDetails(productDetails.Item_Id)?.Product_Name\r\n                                        )\r\n                                    }}\r\n                                    isDisabled={checkIsNumber(productDetails.Pre_Id)}\r\n                                    menuPortalTarget={document.body}\r\n                                    onChange={e => {\r\n                                        const productInfo = findProductDetails(e.value);\r\n                                        setProductDetails(pre => ({\r\n                                            ...pre,\r\n\r\n                                            Group: productInfo.Pro_Group ?? pre.Group,\r\n                                            GroupID: productInfo.Product_Group ?? pre.GroupID,\r\n                                            Brand: productInfo.Brand_Name ?? pre.Brand,\r\n                                            BrandID: productInfo.Brand ?? pre.BrandID,\r\n\r\n                                            Item_Id: e.value,\r\n                                            Item_Rate: productInfo.Item_Rate ?? 0,\r\n                                            GoDown_Id: '',\r\n                                            Bill_Qty: 0,\r\n                                            Amount: 0,\r\n                                            Unit_Id: productInfo.UOM_Id ?? pre.Unit_Id,\r\n                                            Unit_Name: productInfo.Units ?? pre.Unit_Name,\r\n                                            HSN_Code: productInfo?.HSN_Code\r\n                                        }));\r\n                                    }}\r\n                                    options={[\r\n                                        { value: '', label: 'select', isDisabled: true },\r\n                                        ...[\r\n                                            ...products\r\n                                                .filter(pro => productDetails.BrandID ? isEqualNumber(pro.Brand, productDetails.BrandID) : true)\r\n                                                .filter(pro => productDetails.GroupID ? isEqualNumber(pro.Product_Group, productDetails.GroupID) : true)\r\n                                        ].map(obj => ({\r\n                                            value: obj?.Product_Id,\r\n                                            label: obj?.Product_Name,\r\n                                            isDisabled: (\r\n                                                orderProducts.findIndex(ind => isEqualNumber(\r\n                                                    ind?.Item_Id, obj?.Product_Id\r\n                                                ))\r\n                                            ) === -1 ? false : true\r\n                                        }))\r\n                                    ]}\r\n                                    styles={customSelectStyles}\r\n                                    isSearchable={true}\r\n                                    placeholder={\"Select Product\"}\r\n                                    maxMenuHeight={200}\r\n                                    filterOption={reactSelectFilterLogic}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* godown  */}\r\n                            {Object.hasOwn(productDetails, 'GoDown_Id') && (\r\n                                <div className=\"col-md-4 p-2\">\r\n                                    <label>Godown</label>\r\n                                    <Select\r\n                                        value={{\r\n                                            value: productDetails?.GoDown_Id,\r\n                                            label: godowns.find(g => isEqualNumber(g.Godown_Id, productDetails?.GoDown_Id))?.Godown_Name || ''\r\n                                        }}\r\n                                        onChange={(e) => setProductDetails(pre => ({ ...pre, GoDown_Id: e.value }))}\r\n                                        options={[\r\n                                            { value: '', label: 'select', isDisabled: true },\r\n                                            ...toArray(godowns).map(obj => ({\r\n                                                value: obj?.Godown_Id,\r\n                                                label: `${obj?.Godown_Name}${checkIsNumber(obj?.Godown_Id)\r\n                                                    ? ` (Bal: ${validStockValue(\r\n                                                        productDetails.Item_Id,\r\n                                                        obj?.Godown_Id,\r\n                                                        stockInGodowns\r\n                                                    )})`\r\n                                                    : ''\r\n                                                    }`\r\n\r\n                                            }))\r\n                                        ]}\r\n                                        styles={customSelectStyles}\r\n                                        isDisabled={!checkIsNumber(productDetails?.Item_Id)}\r\n                                        menuPortalTarget={document.body}\r\n                                        isSearchable={true}\r\n                                        placeholder={\"Select Godown\"}\r\n                                        filterOption={reactSelectFilterLogic}\r\n                                    // maxMenuHeight={200}  \r\n                                    />\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* quantity */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>Quantity <RequiredStar /></label>\r\n                                <input\r\n                                    required\r\n                                    value={productDetails.Bill_Qty ? productDetails.Bill_Qty : ''}\r\n                                    onInput={onlynum}\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                    onChange={e => {\r\n                                        if (productDetails.Item_Rate) {\r\n                                            setProductDetails(pre => ({\r\n                                                ...pre,\r\n                                                Amount: Multiplication(productDetails.Item_Rate, e.target.value),\r\n                                                Bill_Qty: e.target.value,\r\n                                            }))\r\n                                        } else if (productDetails.Amount) {\r\n                                            setProductDetails(pre => ({\r\n                                                ...pre,\r\n                                                Item_Rate: Division(pre.Amount, e.target.value),\r\n                                                Bill_Qty: e.target.value,\r\n                                            }))\r\n                                        } else {\r\n                                            setProductDetails(pre => ({\r\n                                                ...pre,\r\n                                                Bill_Qty: e.target.value,\r\n                                            }));\r\n                                        }\r\n                                    }}\r\n                                    className=\"cus-inpt\"\r\n                                    min={1}\r\n                                />\r\n                            </div>\r\n\r\n                            {Object.hasOwn(productDetails, 'Act_Qty') && (\r\n                                <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                    <label>Actual Quantity </label>\r\n                                    <input\r\n                                        value={productDetails.Act_Qty ? productDetails.Act_Qty : ''}\r\n                                        onInput={onlynum}\r\n                                        disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                        onChange={e => setProductDetails(pre => ({\r\n                                            ...pre,\r\n                                            Act_Qty: e.target.value,\r\n                                        }))}\r\n                                        required\r\n                                        className=\"cus-inpt\"\r\n                                    />\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* display only alter actual quantity */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>Alt Act Quantity</label>\r\n                                <input\r\n                                    value={altActQty}\r\n                                    className=\"cus-inpt\"\r\n                                    readOnly={true}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Rate */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>Rate </label>\r\n                                <input\r\n                                    value={productDetails.Item_Rate ? productDetails.Item_Rate : ''}\r\n                                    onInput={onlynum}\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                    onChange={e => setProductDetails(pre => ({\r\n                                        ...pre,\r\n                                        Item_Rate: e.target.value,\r\n                                        Amount: pre.Bill_Qty ? Multiplication(e.target.value, pre.Bill_Qty) : pre.Amount\r\n                                    }))}\r\n                                    required\r\n                                    className=\"cus-inpt\"\r\n                                />\r\n                            </div>\r\n\r\n                            {/* UOM */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>UOM</label>\r\n                                <select\r\n                                    value={\r\n                                        Object.hasOwn(productDetails, 'UOM') ? productDetails.UOM :\r\n                                            Object.hasOwn(productDetails, 'Unit_Id') ? productDetails.Unit_Id : ''\r\n                                    }\r\n                                    onChange={e => {\r\n                                        const selectedIndex = e.target.selectedIndex;\r\n                                        const label = e.target.options[selectedIndex].text;\r\n                                        const value = e.target.value;\r\n                                        setProductDetails(pre => ({\r\n                                            ...pre,\r\n                                            UOM: value,\r\n                                            Unit_Id: value,\r\n                                            Units: label,\r\n                                            Unit_Name: label,\r\n                                        }));\r\n                                    }}\r\n                                    className=\"cus-inpt\"\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                >\r\n                                    <option value=\"\" disabled>select</option>\r\n                                    {uom.map((o, i) => (\r\n                                        <option value={o.Unit_Id} key={i} >{o.Units}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n\r\n                            {/* Amount */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>Amount</label>\r\n                                <input\r\n                                    required\r\n                                    value={productDetails.Amount ? productDetails.Amount : ''}\r\n                                    onInput={onlynum}\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                    onChange={e => setProductDetails(pre => ({\r\n                                        ...pre,\r\n                                        Amount: e.target.value,\r\n                                        Item_Rate: pre.Bill_Qty ? Division(e.target.value, pre.Bill_Qty) : pre.Item_Rate\r\n                                    }))}\r\n                                    className=\"cus-inpt\"\r\n                                    min={1}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Batch */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>Batch</label>\r\n                                <Select\r\n                                    value={{\r\n                                        value: productDetails?.Batch_Name || '',\r\n                                        label: productDetails?.Batch_Name || ''\r\n                                    }}\r\n                                    onChange={e => setProductDetails(pre => ({ ...pre, Batch_Name: e.value }))}\r\n                                    options={\r\n                                        batchDetails.filter(\r\n                                            bat => (\r\n                                                isEqualNumber(bat.item_id, productDetails?.Item_Id)\r\n                                                && isEqualNumber(bat?.godown_id, productDetails?.GoDown_Id)\r\n                                                && toNumber(bat.pendingQuantity) >= toNumber(productDetails?.Bill_Qty)\r\n                                            )\r\n                                        ).map(\r\n                                            bat => ({ value: bat.batch, label: bat.batch })\r\n                                        )\r\n                                    }\r\n                                    styles={customSelectStyles}\r\n                                    isSearchable={true}\r\n                                    placeholder={\"Select Batch\"}\r\n                                    menuPortalTarget={document.body}\r\n                                    isDisabled={true}\r\n                                // isDisabled={\r\n                                //     !checkIsNumber(productDetails?.Item_Id)\r\n                                //     || !checkIsNumber(productDetails?.GoDown_Id)\r\n                                //     || isEqualNumber(productDetails?.Bill_Qty, 0)\r\n                                // }\r\n                                />\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </DialogContent>\r\n                    <DialogActions className=\"d-flex justify-content-between align-items-center\">\r\n                        <Button onClick={() => setProductDetails(initialValue)} type='button' startIcon={<ClearAll />}>Clear</Button>\r\n                        <span>\r\n                            <Button type=\"button\" onClick={closeDialog}>cancel</Button>\r\n                            <Button type='submit' variant=\"outlined\">Add</Button>\r\n                        </span>\r\n                    </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddProductForm;","import { useState, useEffect, useMemo } from \"react\";\r\nimport { Button, IconButton, CardContent, Card, Dialog, DialogTitle, DialogContent, DialogActions, CardActions } from \"@mui/material\";\r\nimport { toast } from 'react-toastify';\r\nimport {\r\n    isEqualNumber, isValidObject, ISOString, getUniqueData, Addition, getSessionUser,\r\n    checkIsNumber, toNumber, toArray, stringCompare,\r\n    RoundNumber, isValidNumber,\r\n    validValue,\r\n    isValidValue,\r\n    rid\r\n} from \"../../../Components/functions\";\r\nimport { Close } from \"@mui/icons-material\";\r\nimport { Add, Delete, Edit, ReceiptLong } from \"@mui/icons-material\";\r\nimport { fetchLink } from '../../../Components/fetchComponent';\r\nimport FilterableTable, { createCol } from \"../../../Components/filterableTable2\";\r\nimport { calculateGSTDetails } from '../../../Components/taxCalculator';\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport {\r\n    salesInvoiceGeneralInfo, salesInvoiceDetailsInfo, salesInvoiceExpencesInfo,\r\n    salesInvoiceStaffInfo, retailerDeliveryAddressInfo,\r\n    retailerOutstandingDetails,\r\n    canCreateInvoice,\r\n    setAddress,\r\n    defaultStaffTypes\r\n} from './variable';\r\nimport InvolvedStaffs from \"./manageInvolvedStaff\";\r\nimport ManageSalesInvoiceGeneralInfo from \"./manageGeneralInfo\";\r\nimport SalesInvoiceTaxDetails from \"./taxDetails\";\r\nimport AddProductsInSalesInvoice from \"./importFromSaleOrder\";\r\nimport ExpencesOfSalesInvoice from \"./manageExpences\";\r\nimport AddProductForm from \"./addProducts\";\r\nimport InvoiceTemplate from \"../LRReport/SalesInvPrint/invTemplate\";\r\nimport AppDialog from \"../../../Components/appDialogComponent\";\r\n\r\n\r\nconst storage = getSessionUser().user;\r\n\r\nconst findProductDetails = (arr = [], productid) => arr.find(obj => isEqualNumber(obj.Product_Id, productid)) ?? {};\r\n\r\nconst CreateSalesInvoice = ({ loadingOn, loadingOff }) => {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const editValues = location.state;\r\n    const [baseData, setBaseData] = useState({\r\n        products: [],\r\n        branch: [],\r\n        retailers: [],\r\n        voucherType: [],\r\n        uom: [],\r\n        staff: [],\r\n        staffType: [],\r\n        brand: [],\r\n        godown: [],\r\n        expence: [],\r\n        stockInGodown: [],\r\n        stockItemLedgerName: [],\r\n        batchDetails: []\r\n    });\r\n\r\n    const [dialog, setDialog] = useState({\r\n        addProductDialog: false,\r\n        importFromSaleOrder: false,\r\n    })\r\n\r\n    const [invoiceInfo, setInvoiceInfo] = useState(salesInvoiceGeneralInfo);\r\n    const [retailerDeliveryAddress, setRetailerDeliveryAddress] = useState(retailerDeliveryAddressInfo);\r\n    const [retailerShippingAddress, setRetailerShippingAddress] = useState(retailerDeliveryAddressInfo);\r\n    const [invoiceProducts, setInvoiceProduct] = useState([]);\r\n    const [invoiceExpences, setInvoiceExpences] = useState([]);\r\n    const [staffArray, setStaffArray] = useState([]);\r\n    const [retailerSalesStatus, setRetailerSalesStatus] = useState(retailerOutstandingDetails);\r\n\r\n    const [selectedProductToEdit, setSelectedProductToEdit] = useState(null);\r\n\r\n    const isInclusive = isEqualNumber(invoiceInfo.GST_Inclusive, 1);\r\n    const isNotTaxableBill = isEqualNumber(invoiceInfo.GST_Inclusive, 2);\r\n    const IS_IGST = isEqualNumber(invoiceInfo.IS_IGST, 1);\r\n    const taxType = isNotTaxableBill ? 'zerotax' : isInclusive ? 'remove' : 'add';\r\n    const minimumRows = 3;\r\n    const dummyRowCount = minimumRows - invoiceProducts.length;\r\n    const [printDialog, setPrintDialog] = useState({\r\n        open: false,\r\n        Do_Id: null\r\n    });\r\n\r\n    useEffect(() => {\r\n\r\n        const fetchData = async () => {\r\n            try {\r\n                if (loadingOn) loadingOn();\r\n\r\n                const [\r\n                    branchResponse,\r\n                    productsResponse,\r\n                    retailerResponse,\r\n                    voucherTypeResponse,\r\n                    uomResponse,\r\n                    staffResponse,\r\n                    staffCategory,\r\n                    godownLocationsResponse,\r\n                    expenceResponse,\r\n                    // godownWiseStock,\r\n                    stockItemLedgerNameResponse,\r\n                    batchDetailsResponse\r\n                ] = await Promise.all([\r\n                    fetchLink({ address: `masters/branch/dropDown` }),\r\n                    fetchLink({ address: `masters/products` }),\r\n                    fetchLink({ address: `masters/retailers/dropDown?Company_Id=${storage?.Company_id}` }),\r\n                    fetchLink({ address: `masters/voucher?module=SALES` }),\r\n                    fetchLink({ address: `masters/uom` }),\r\n                    fetchLink({ address: `dataEntry/costCenter` }),\r\n                    fetchLink({ address: `dataEntry/costCenter/category` }),\r\n                    fetchLink({ address: `dataEntry/godownLocationMaster` }),\r\n                    fetchLink({ address: `masters/defaultAccountMaster` }),\r\n                    // fetchLink({ address: `sales/stockInGodown` }),\r\n                    fetchLink({ address: `purchase/stockItemLedgerName?type=SALES` }),\r\n                    fetchLink({ address: `inventory/batchMaster/stockBalance` })\r\n                ]);\r\n\r\n                const branchData = (branchResponse.success ? branchResponse.data : []).sort(\r\n                    (a, b) => String(a?.BranchName).localeCompare(b?.BranchName)\r\n                );\r\n                const productsData = (productsResponse.success ? productsResponse.data : []).sort(\r\n                    (a, b) => String(a?.Product_Name).localeCompare(b?.Product_Name)\r\n                );\r\n                const retailersData = (retailerResponse.success ? retailerResponse.data : []).sort(\r\n                    (a, b) => String(a?.Retailer_Name).localeCompare(b?.Retailer_Name)\r\n                );\r\n                const voucherType = (voucherTypeResponse.success ? voucherTypeResponse.data : []).sort(\r\n                    (a, b) => String(a?.Voucher_Type).localeCompare(b?.Voucher_Type)\r\n                );\r\n                const uomData = (uomResponse.success ? uomResponse.data : []).sort(\r\n                    (a, b) => String(a.Units).localeCompare(b.Units)\r\n                );\r\n                const staffData = (staffResponse.success ? staffResponse.data : []).sort(\r\n                    (a, b) => String(a?.Cost_Center_Name).localeCompare(b?.Cost_Center_Name)\r\n                );\r\n                const staffCategoryData = (staffCategory.success ? staffCategory.data : []).sort(\r\n                    (a, b) => String(a?.Cost_Category).localeCompare(b?.Cost_Category)\r\n                );\r\n                const godownLocations = (godownLocationsResponse.success ? godownLocationsResponse.data : []).sort(\r\n                    (a, b) => String(a?.Godown_Name).localeCompare(b?.Godown_Name)\r\n                );\r\n                const expencesMaster = (expenceResponse.success ? toArray(expenceResponse.data) : []).sort(\r\n                    (a, b) => String(a?.Account_Name).localeCompare(b?.Account_Name)\r\n                );\r\n                // const stockInGodowns = (godownWiseStock.success ? godownWiseStock.data : []).sort(\r\n                //     (a, b) => String(a?.stock_item_name).localeCompare(b?.stock_item_name)\r\n                // );\r\n                const stockItemLedgerName = (stockItemLedgerNameResponse.success ? stockItemLedgerNameResponse.data : []).sort(\r\n                    (a, b) => String(a?.Stock_Item_Ledger_Name).localeCompare(b?.Stock_Item_Ledger_Name)\r\n                );\r\n\r\n                setBaseData((pre) => ({\r\n                    ...pre,\r\n                    products: productsData,\r\n                    branch: branchData,\r\n                    retailers: retailersData,\r\n                    voucherType: voucherType,\r\n                    uom: uomData,\r\n                    staff: staffData,\r\n                    staffType: staffCategoryData,\r\n                    godown: godownLocations,\r\n                    brand: getUniqueData(productsData, 'Brand', ['Brand_Name']),\r\n                    expence: expencesMaster.filter(\r\n                        exp => !stringCompare(exp.Type, 'DEFAULT')\r\n                    ).map(exp => ({\r\n                        Id: exp.Acc_Id,\r\n                        Expence_Name: exp.Account_Name,\r\n                        percentageValue: exp.percentageValue\r\n                    })),\r\n                    // stockInGodown: stockInGodowns,\r\n                    stockItemLedgerName: stockItemLedgerName,\r\n                    batchDetails: toArray(batchDetailsResponse.data)\r\n                }));\r\n            } catch (e) {\r\n                console.error(\"Error fetching data:\", e);\r\n            } finally {\r\n                if (loadingOff) loadingOff();\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n\r\n    }, [storage?.Company_id])\r\n\r\n    useEffect(() => {\r\n        if (isValidNumber(invoiceInfo.Retailer_Id)) {\r\n            fetchLink({\r\n                address: `receipt/receiptMaster/pendingSalesInvoiceReceipt/amount?Retailer_Id=${invoiceInfo.Retailer_Id}`,\r\n                loadingOff, loadingOn\r\n            }).then(data => {\r\n                if (data.success) {\r\n                    const invoiceCreationStatus = canCreateInvoice(data?.others);\r\n                    setRetailerSalesStatus(pre => ({\r\n                        ...pre,\r\n                        outstanding: toNumber(data?.others?.outstanding),\r\n                        creditLimit: toNumber(data?.others?.creditLimit),\r\n                        creditDays: toNumber(data?.others?.creditDays),\r\n                        recentDate: data?.others?.recentDate ? new Date(data?.others?.recentDate) : new Date(),\r\n                        invoiceCreationStatus: invoiceCreationStatus\r\n                    }));\r\n                }\r\n            }).catch(console.error);\r\n        } else setRetailerSalesStatus(retailerOutstandingDetails)\r\n    }, [invoiceInfo.Retailer_Id])\r\n\r\n    useEffect(() => {\r\n        const staffs = toArray(editValues?.Staffs_Array)\r\n        if (checkIsNumber(invoiceInfo.Retailer_Id) && baseData.retailers.length && staffs.length === 0) {\r\n\r\n            const retailer = toArray(baseData.retailers).find(ret => isEqualNumber(ret?.Retailer_Id, invoiceInfo.Retailer_Id));\r\n\r\n            if (!retailer) return;\r\n\r\n            setStaffArray(prev => {\r\n                const newStaff = [];\r\n\r\n                if (isValidNumber(retailer.brokerId)) {\r\n                    newStaff.push({\r\n                        Emp_Id: retailer.brokerId,\r\n                        Emp_Name: retailer.brokerName,\r\n                        Emp_Type_Id: retailer.brokerTypeId\r\n                    });\r\n                }\r\n\r\n                if (isValidNumber(retailer.transporterId)) {\r\n                    newStaff.push({\r\n                        Emp_Id: retailer.transporterId,\r\n                        Emp_Name: retailer.transporterName,\r\n                        Emp_Type_Id: retailer.transporterTypeId\r\n                    });\r\n                }\r\n\r\n                const filteredNewStaff = newStaff.filter(ns =>\r\n                    !prev.some(ps =>\r\n                        ps.Emp_Id === ns.Emp_Id &&\r\n                        ps.Emp_Type_Id === ns.Emp_Type_Id\r\n                    )\r\n                );\r\n\r\n                const filteredStaff = Array.from(\r\n                    new Map(\r\n                        filteredNewStaff.map(item => [\r\n                            `${item.Emp_Id}-${item.Emp_Type_Id}`,\r\n                            item\r\n                        ])\r\n                    ).values()\r\n                );\r\n\r\n                return [...prev, ...filteredStaff]\r\n            });\r\n        }\r\n    }, [invoiceInfo.Retailer_Id, baseData.retailers.length, editValues])\r\n\r\n    useEffect(() => {\r\n        const defaultStaffTypesData = defaultStaffTypes(baseData.staffType);\r\n        setStaffArray(pre => [...pre, ...defaultStaffTypesData])\r\n    }, [baseData.staffType])\r\n\r\n    const clearValues = () => {\r\n        setInvoiceInfo(salesInvoiceGeneralInfo);\r\n        setInvoiceProduct([]);\r\n        setInvoiceExpences([]);\r\n        setStaffArray([]);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setInvoiceProduct(pre => {\r\n            const exist = [...pre];\r\n\r\n            return exist.map(item => {\r\n                return Object.fromEntries(\r\n                    Object.entries(item).map(([key, value]) => {\r\n                        const productMaster = findProductDetails(baseData.products, item?.Item_Id);\r\n                        const gstPercentage = IS_IGST ? productMaster.Igst_P : productMaster.Gst_P;\r\n                        const isTaxable = gstPercentage > 0;\r\n\r\n                        const { Bill_Qty, Item_Rate, Amount } = item;\r\n\r\n                        const itemRateGst = calculateGSTDetails(Item_Rate, gstPercentage, taxType);\r\n                        const gstInfo = calculateGSTDetails(Amount, gstPercentage, taxType);\r\n\r\n                        const cgstPer = !IS_IGST ? gstInfo.cgst_per : 0;\r\n                        const igstPer = IS_IGST ? gstInfo.igst_per : 0;\r\n                        const Cgst_Amo = !IS_IGST ? gstInfo.cgst_amount : 0;\r\n                        const Igst_Amo = IS_IGST ? gstInfo.igst_amount : 0;\r\n\r\n                        switch (key) {\r\n                            case 'Taxable_Rate': return [key, itemRateGst.base_amount]\r\n                            case 'Total_Qty': return [key, Bill_Qty]\r\n                            case 'Taxble': return [key, isTaxable ? 1 : 0]\r\n                            case 'Taxable_Amount': return [key, gstInfo.base_amount]\r\n                            case 'Tax_Rate': return [key, gstPercentage]\r\n                            case 'Cgst':\r\n                            case 'Sgst': return [key, cgstPer ?? 0]\r\n                            case 'Cgst_Amo':\r\n                            case 'Sgst_Amo': return [key, isNotTaxableBill ? 0 : Cgst_Amo]\r\n                            case 'Igst': return [key, igstPer ?? 0]\r\n                            case 'Igst_Amo': return [key, isNotTaxableBill ? 0 : Igst_Amo]\r\n                            case 'Final_Amo': return [key, gstInfo.with_tax]\r\n\r\n                            default: return [key, item[key] || value]\r\n                        }\r\n                    })\r\n                )\r\n            })\r\n        });\r\n    }, [\r\n        baseData.products,\r\n        IS_IGST,\r\n        taxType,\r\n    ]);\r\n\r\n    useEffect(() => {\r\n        setInvoiceExpences(pre => {\r\n            const exist = [...pre];\r\n\r\n            return exist.map(item => {\r\n                const\r\n                    Igst = IS_IGST ? toNumber(item?.Igst) : 0,\r\n                    Cgst = !IS_IGST ? toNumber(item?.Cgst) : 0,\r\n                    Sgst = !IS_IGST ? toNumber(item?.Sgst) : 0,\r\n                    Expence_Value = toNumber(item?.Expence_Value),\r\n                    taxPercentage = IS_IGST ? Igst : Addition(Cgst, Sgst);\r\n\r\n                const taxAmount = calculateGSTDetails(Expence_Value, taxPercentage, taxType);\r\n\r\n                return {\r\n                    ...item,\r\n                    Cgst, Sgst, Igst,\r\n                    Expence_Value,\r\n                    Cgst_Amo: Cgst > 0 ? taxAmount.cgst_amount : 0,\r\n                    Sgst_Amo: Sgst > 0 ? taxAmount.sgst_amount : 0,\r\n                    Igst_Amo: Igst > 0 ? taxAmount.igst_amount : 0,\r\n                }\r\n            })\r\n        })\r\n    }, [\r\n        baseData.expence,\r\n        IS_IGST,\r\n        taxType,\r\n    ])\r\n\r\n    useEffect(() => {\r\n        if (\r\n            isValidObject(editValues) &&\r\n            Array.isArray(editValues?.Products_List)\r\n        ) {\r\n            const { Products_List, Expence_Array, Staffs_Array } = editValues;\r\n            setInvoiceInfo(\r\n                Object.fromEntries(\r\n                    Object.entries(salesInvoiceGeneralInfo).map(([key, value]) => {\r\n                        if (key === 'Do_Date') return [key, editValues[key] ? ISOString(editValues[key]) : value]\r\n                        return [key, editValues[key] ?? value]\r\n                    })\r\n                )\r\n            );\r\n            setInvoiceProduct(\r\n                Products_List.map(item => Object.fromEntries(\r\n                    Object.entries(salesInvoiceDetailsInfo).map(([key, value]) => {\r\n                        if (key === 'rowId') return [key, rid()]\r\n                        return [key, item[key] ?? value]\r\n                    })\r\n                ))\r\n            );\r\n            setInvoiceExpences(\r\n                toArray(Expence_Array).map(item => Object.fromEntries(\r\n                    Object.entries(salesInvoiceExpencesInfo).map(([key, value]) => {\r\n                        return [key, item[key] ?? value]\r\n                    })\r\n                ))\r\n            );\r\n            setStaffArray(() => {\r\n                const stateOfStaff = toArray(Staffs_Array).map(item => Object.fromEntries(\r\n                    Object.entries(salesInvoiceStaffInfo).map(([key, value]) => {\r\n                        return [key, item[key] ?? value]\r\n                    })\r\n                ));\r\n\r\n                return Array.from(\r\n                    new Map(\r\n                        stateOfStaff.map(item => [\r\n                            `${item.Emp_Id}-${item.Emp_Type_Id}`,\r\n                            item\r\n                        ])\r\n                    ).values()\r\n                );\r\n            });\r\n        }\r\n    }, [editValues])\r\n\r\n    useEffect(() => {\r\n        const retailerId = invoiceInfo?.Retailer_Id;\r\n\r\n        if (isValidNumber(retailerId)) {\r\n            const retailerDetails = baseData.retailers.find(ret => isEqualNumber(ret.Retailer_Id, retailerId)) || {};\r\n\r\n            const retailerAddress = toArray(retailerDetails?.deliveryAddresses);\r\n            const withGstNumber = retailerAddress.find(add => isValidValue(add.gstNumber));\r\n            const firstAddress = retailerAddress[0];\r\n\r\n            const billingAddress = retailerAddress.find(\r\n                addr => isEqualNumber(addr?.id, invoiceInfo?.deliveryAddressId)\r\n            ) ?? null;\r\n\r\n            if (billingAddress) {\r\n                setAddress(billingAddress, setRetailerDeliveryAddress)\r\n            } else if (withGstNumber) {\r\n                setAddress(withGstNumber, setRetailerDeliveryAddress)\r\n            } else if (firstAddress) {\r\n                setAddress({\r\n                    ...firstAddress,\r\n                    gstNumber: retailerDetails.Gstno ? String(retailerDetails.Gstno) : '',\r\n                    id: retailerDetails.Gstno ? null : firstAddress.id\r\n                }, setRetailerDeliveryAddress)\r\n            } else {\r\n                setAddress(retailerDeliveryAddressInfo, setRetailerDeliveryAddress)\r\n            }\r\n\r\n            const shippingAddress = retailerAddress.find(\r\n                addr => isEqualNumber(addr?.id, invoiceInfo?.shipingAddressId)\r\n            ) ?? null;\r\n\r\n            if (shippingAddress) {\r\n                setAddress(shippingAddress, setRetailerShippingAddress)\r\n            } else if (withGstNumber) {\r\n                setAddress(withGstNumber, setRetailerShippingAddress)\r\n            } else if (firstAddress) {\r\n                setAddress({\r\n                    ...firstAddress,\r\n                    gstNumber: retailerDetails.Gstno ? String(retailerDetails.Gstno) : '',\r\n                    id: retailerDetails.Gstno ? null : firstAddress.id\r\n                }, setRetailerShippingAddress)\r\n            } else {\r\n                setAddress(retailerDeliveryAddressInfo, setRetailerShippingAddress)\r\n            }\r\n        }\r\n    }, [baseData.retailers, invoiceInfo.Retailer_Id])\r\n\r\n    // Expence Info\r\n\r\n    const invExpencesTotal = useMemo(() => {\r\n        return toArray(invoiceExpences).reduce((acc, exp) => Addition(acc, exp?.Expence_Value), 0)\r\n    }, [invoiceExpences]);\r\n\r\n    const Total_Invoice_value = useMemo(() => {\r\n        const invValue = invoiceProducts.reduce((acc, item) => {\r\n            const Amount = RoundNumber(item?.Amount);\r\n\r\n            if (isNotTaxableBill) return Addition(acc, Amount);\r\n\r\n            const product = findProductDetails(baseData.products, item.Item_Id);\r\n            const gstPercentage = IS_IGST ? product.Igst_P : product.Gst_P;\r\n\r\n            if (isInclusive) {\r\n                return Addition(acc, calculateGSTDetails(Amount, gstPercentage, 'remove').with_tax);\r\n            } else {\r\n                return Addition(acc, calculateGSTDetails(Amount, gstPercentage, 'add').with_tax);\r\n            }\r\n        }, 0);\r\n\r\n        return Addition(invValue, invExpencesTotal);\r\n    }, [invoiceProducts, isNotTaxableBill, baseData.products, IS_IGST, isInclusive, invExpencesTotal])\r\n\r\n    const taxSplitUp = useMemo(() => {\r\n        if (toArray(invoiceProducts).length === 0) return {};\r\n\r\n        let totalTaxable = 0;\r\n        let totalTax = 0;\r\n\r\n        invoiceProducts.forEach(item => {\r\n            const Amount = RoundNumber(item?.Amount || 0);\r\n\r\n            if (isNotTaxableBill) {\r\n                totalTaxable = Addition(totalTaxable, Amount);\r\n                return;\r\n            }\r\n\r\n            const product = findProductDetails(baseData.products, item.Item_Id);\r\n            const gstPercentage = isEqualNumber(IS_IGST, 1) ? product.Igst_P : product.Gst_P;\r\n\r\n            const taxInfo = calculateGSTDetails(Amount, gstPercentage, isInclusive ? 'remove' : 'add');\r\n\r\n            totalTaxable = Addition(totalTaxable, parseFloat(taxInfo.without_tax));\r\n            totalTax = Addition(totalTax, parseFloat(taxInfo.tax_amount));\r\n        });\r\n\r\n        const totalWithTax = Addition(totalTaxable, totalTax);\r\n        const totalWithExpenses = Addition(totalWithTax, invExpencesTotal);\r\n        const roundedTotal = Math.round(totalWithExpenses);\r\n        const roundOff = RoundNumber(roundedTotal - totalWithExpenses);\r\n\r\n        const cgst = isEqualNumber(IS_IGST, 1) ? 0 : RoundNumber(totalTax / 2);\r\n        const sgst = isEqualNumber(IS_IGST, 1) ? 0 : RoundNumber(totalTax / 2);\r\n        const igst = isEqualNumber(IS_IGST, 1) ? RoundNumber(totalTax) : 0;\r\n\r\n        return {\r\n            totalTaxable: RoundNumber(totalTaxable),\r\n            totalTax: RoundNumber(totalTax),\r\n            cgst,\r\n            sgst,\r\n            igst,\r\n            roundOff,\r\n            invoiceTotal: roundedTotal\r\n        };\r\n\r\n    }, [invoiceProducts, baseData.products, IS_IGST, isNotTaxableBill, isInclusive, invExpencesTotal]);\r\n\r\n    useEffect(() => {\r\n        if (taxSplitUp?.roundOff && taxSplitUp?.roundOff !== invoiceInfo.Round_off) {\r\n            setInvoiceInfo(pre => ({ ...pre, Round_off: taxSplitUp.roundOff }));\r\n        }\r\n    }, [taxSplitUp?.roundOff]);\r\n\r\n    const saveSalesInvoice = () => {\r\n        if (retailerSalesStatus.forceCreateInvoice === false && retailerSalesStatus.invoiceCreationStatus === false) {\r\n            setRetailerSalesStatus(pre => ({ ...pre, dialog: true }));\r\n            return;\r\n        }\r\n\r\n        \r\n\r\n        fetchLink({\r\n            address: `sales/salesInvoice`,\r\n            method: checkIsNumber(invoiceInfo?.Do_Id) ? 'PUT' : 'POST',\r\n            loadingOff, loadingOn,\r\n            bodyData: {\r\n                ...invoiceInfo,\r\n                deliveryAddressDetails: {\r\n                    delivery_id: retailerDeliveryAddress?.id,\r\n                    deliveryName: retailerDeliveryAddress?.deliveryName,\r\n                    phoneNumber: retailerDeliveryAddress?.phoneNumber,\r\n                    cityName: retailerDeliveryAddress?.cityName,\r\n                    deliveryAddress: retailerDeliveryAddress?.deliveryAddress,\r\n                    gstNumber: retailerDeliveryAddress?.gstNumber,\r\n                    stateName: retailerDeliveryAddress?.stateName\r\n                },\r\n                shipingAddressDetails: {\r\n                    delivery_id: retailerShippingAddress?.id,\r\n                    deliveryName: retailerShippingAddress?.deliveryName,\r\n                    phoneNumber: retailerShippingAddress?.phoneNumber,\r\n                    cityName: retailerShippingAddress?.cityName,\r\n                    deliveryAddress: retailerShippingAddress?.deliveryAddress,\r\n                    gstNumber: retailerShippingAddress?.gstNumber,\r\n                    stateName: retailerShippingAddress?.stateName\r\n                },\r\n                Product_Array: invoiceProducts,\r\n                Staffs_Array: Array.from(\r\n                    new Map(\r\n                        staffArray.filter(\r\n                            item => isValidNumber(item.Emp_Id) && isValidNumber(item.Emp_Type_Id)\r\n                        ).map(item => [\r\n                            `${item.Emp_Id}-${item.Emp_Type_Id}`,\r\n                            item\r\n                        ])\r\n                    ).values()\r\n                ),\r\n                Expence_Array: invoiceExpences\r\n            }\r\n        }).then(data => {\r\n            if (data.success) {\r\n                const savedDoId = data.others?.Do_Id;\r\n\r\n                toast.success(data.message);\r\n\r\n                // Open print dialog with the saved Do_Id\r\n                setPrintDialog({\r\n                    open: true,\r\n                    Do_Id: savedDoId\r\n                });\r\n\r\n                // Clear form after successful submission (optional)\r\n                // clearValues();\r\n            } else {\r\n                toast.warn(data.message);\r\n            }\r\n        }).catch(e => {\r\n            console.error(e);\r\n            toast.error(\"Failed to save invoice\");\r\n        })\r\n    }\r\n\r\n    //     }).then(data => {\r\n    //         if (data.success) {\r\n    //             clearValues();\r\n    //             toast.success(data.message);\r\n    //             navigate('/erp/sales/invoice')\r\n    //         } else {\r\n    //             toast.warn(data.message)\r\n    //         }\r\n    //     }).catch(e => console.error(e)).finally(() => {\r\n    //         if (loadingOff) loadingOff();\r\n    //     })\r\n    // }\r\n\r\n    console.log(invoiceProducts)\r\n\r\n    return (\r\n        <>\r\n\r\n            <AddProductForm\r\n                orderProducts={invoiceProducts}\r\n                setOrderProducts={setInvoiceProduct}\r\n                open={dialog.addProductDialog}\r\n                onClose={() => {\r\n                    setDialog(pre => ({ ...pre, addProductDialog: false }))\r\n                    setSelectedProductToEdit(null);\r\n                }}\r\n                products={baseData.products}\r\n                brands={baseData.brand}\r\n                uom={baseData.uom}\r\n                godowns={baseData.godown}\r\n                GST_Inclusive={invoiceInfo.GST_Inclusive}\r\n                IS_IGST={IS_IGST}\r\n                editValues={selectedProductToEdit}\r\n                initialValue={{ ...salesInvoiceDetailsInfo, Pre_Id: invoiceInfo.So_No, rowId: rid() }}\r\n                batchDetails={baseData.batchDetails}\r\n                saleOrderNumber={toNumber(invoiceInfo.So_No)}\r\n            />\r\n\r\n            <Card>\r\n                <div className='d-flex flex-wrap align-items-center border-bottom py-2 px-3'>\r\n                    <span className=\"flex-grow-1 fa-16 fw-bold\">Sales Invoice</span>\r\n                    <span>\r\n                        <Button type='button' onClick={() => {\r\n                            if (window.history.length > 1) {\r\n                                navigate(-1);\r\n                            } else {\r\n                                navigate('/erp/sales/invoice');\r\n                            }\r\n                        }}>Cancel</Button>\r\n                        <Button onClick={() => saveSalesInvoice()} variant=\"contained\">submit</Button>\r\n                    </span>\r\n                </div>\r\n                <CardContent>\r\n                    <div className=\"row p-0\">\r\n                        {/* staff info */}\r\n                        <div className=\"col-xxl-3 col-lg-4 col-md-5 p-2\">\r\n                            <div className=\"border p-2\" style={{ minHeight: '30vh', height: '100%' }}>\r\n                                <InvolvedStaffs\r\n                                    StaffArray={staffArray}\r\n                                    setStaffArray={setStaffArray}\r\n                                    costCenter={baseData.staff}\r\n                                    costCategory={baseData.staffType}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* general info */}\r\n                        <div className=\"col-xxl-9 col-lg-8 col-md-7 py-2 px-0\">\r\n                            <div className=\"border px-3 py-1\" style={{ minHeight: '30vh', height: '100%' }}>\r\n                                <ManageSalesInvoiceGeneralInfo\r\n                                    invoiceInfo={invoiceInfo}\r\n                                    setInvoiceInfo={setInvoiceInfo}\r\n                                    retailers={baseData.retailers}\r\n                                    branches={baseData.branch}\r\n                                    voucherType={baseData.voucherType}\r\n                                    stockItemLedgerName={baseData.stockItemLedgerName}\r\n                                    onChangeRetailer={() => {\r\n                                        // setInvoiceProduct([]);\r\n                                        setInvoiceExpences([]);\r\n                                    }}\r\n                                    retailerDeliveryAddress={retailerDeliveryAddress}\r\n                                    setRetailerDeliveryAddress={setRetailerDeliveryAddress}\r\n                                    shippingAddress={retailerShippingAddress}\r\n                                    setShippingAddress={setRetailerShippingAddress}\r\n                                    retailerSalesStatus={retailerSalesStatus}\r\n                                    staffArray={staffArray}\r\n                                    setStaffArray={setStaffArray}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* product details */}\r\n                    <FilterableTable\r\n                        title=\"Items\"\r\n                        headerFontSizePx={13}\r\n                        bodyFontSizePx={13}\r\n                        EnableSerialNumber\r\n                        disablePagination\r\n                        ButtonArea={\r\n                            <>\r\n                                <Button\r\n                                    onClick={() => {\r\n                                        setSelectedProductToEdit(null);\r\n                                        setDialog(pre => ({ ...pre, addProductDialog: true }));\r\n                                    }}\r\n                                    sx={{ ml: 1 }}\r\n                                    variant='outlined'\r\n                                    type=\"button\"\r\n                                    startIcon={<Add />}\r\n                                    disabled={\r\n                                        !checkIsNumber(invoiceInfo.Retailer_Id)\r\n                                        || (invoiceProducts.length > 0\r\n                                            && checkIsNumber(invoiceInfo.So_No))\r\n                                    }\r\n                                >Add Product</Button>\r\n\r\n\r\n                                <AddProductsInSalesInvoice\r\n                                    loadingOn={loadingOn}\r\n                                    loadingOff={loadingOff}\r\n                                    open={dialog.importFromSaleOrder}\r\n                                    onClose={() => setDialog(pre => ({ ...pre, importFromSaleOrder: false }))}\r\n                                    retailer={invoiceInfo?.Retailer_Id}\r\n                                    selectedItems={invoiceProducts}\r\n                                    setSelectedItems={setInvoiceProduct}\r\n                                    staffArray={staffArray}\r\n                                    setStaffArray={setStaffArray}\r\n                                    products={baseData.products}\r\n                                    GST_Inclusive={invoiceInfo.GST_Inclusive}\r\n                                    IS_IGST={IS_IGST}\r\n                                    invoiceInfo={invoiceInfo}\r\n                                    setInvoiceInfo={setInvoiceInfo}\r\n                                    godowns={baseData.godown}\r\n                                    stockInGodown={baseData.stockInGodown}\r\n                                >\r\n                                    <Button\r\n                                        onClick={() => setDialog(pre => ({ ...pre, importFromSaleOrder: true }))}\r\n                                        disabled={\r\n                                            !checkIsNumber(invoiceInfo.Retailer_Id)\r\n                                            || (\r\n                                                invoiceProducts.length > 0\r\n                                                && !checkIsNumber(invoiceInfo.So_No)\r\n                                            )\r\n                                        }\r\n                                        sx={{ ml: 1 }}\r\n                                        type=\"button\"\r\n                                        variant='outlined'\r\n                                        startIcon={<ReceiptLong />}\r\n                                    >Choose Sale Order</Button>\r\n                                </AddProductsInSalesInvoice>\r\n                            </>\r\n                        }\r\n                        dataArray={[\r\n                            ...invoiceProducts,\r\n                            ...Array.from({\r\n                                length: dummyRowCount > 0 ? dummyRowCount : 0\r\n                            }).map(d => salesInvoiceDetailsInfo)\r\n                        ]}\r\n                        columns={[\r\n                            createCol('Item_Name', 'string'),\r\n                            createCol('Batch_Name', 'string'),\r\n                            createCol('Bill_Qty', 'number'),\r\n                            createCol('Act_Qty', 'number'),\r\n                            createCol('Item_Rate', 'number'),\r\n                            {\r\n                                isVisible: 1,\r\n                                ColumnHeader: 'Tax',\r\n                                isCustomCell: true,\r\n                                Cell: ({ row }) => {\r\n                                    const { Cgst = 0, Sgst = 0, Igst = 0, Cgst_Amo = 0, Sgst_Amo = 0, Igst_Amo = 0 } = row;\r\n                                    const taxPercentage = IS_IGST ? Igst : Addition(Cgst, Sgst);\r\n                                    const taxAmount = IS_IGST ? Igst_Amo : Addition(Cgst_Amo, Sgst_Amo);\r\n\r\n                                    return !checkIsNumber(row?.Item_Id) ? '' : `${taxAmount} - (${taxPercentage} %)`\r\n                                }\r\n                            },\r\n                            {\r\n                                isVisible: 1,\r\n                                ColumnHeader: 'Godown',\r\n                                isCustomCell: true,\r\n                                Cell: ({ row }) => baseData.godown.find(\r\n                                    godown => isEqualNumber(godown.Godown_Id, row?.GoDown_Id)\r\n                                )?.Godown_Name ?? ''\r\n                            },\r\n                            createCol('Amount', 'number'),\r\n                            {\r\n                                isCustomCell: true,\r\n                                Cell: ({ row }) => {\r\n                                    return (\r\n                                        <>\r\n                                            <IconButton\r\n                                                onClick={() => {\r\n                                                    setSelectedProductToEdit(row);\r\n                                                    setDialog(pre => ({ ...pre, addProductDialog: true }));\r\n                                                }}\r\n                                                size=\"small\"\r\n                                                type=\"button\"\r\n                                                disabled={!checkIsNumber(row?.Item_Id)}\r\n                                            >\r\n                                                <Edit />\r\n                                            </IconButton>\r\n                                            <IconButton\r\n                                                size=\"small\"\r\n                                                type=\"button\"\r\n                                                onClick={() => setInvoiceProduct(\r\n                                                    pre => pre.filter(obj => obj.rowId !== row.rowId)\r\n                                                )}\r\n                                                color='error'\r\n                                                disabled={!checkIsNumber(row?.Item_Id)}\r\n                                            >\r\n                                                <Delete />\r\n                                            </IconButton>\r\n                                        </>\r\n                                    )\r\n                                },\r\n                                ColumnHeader: 'Action',\r\n                                isVisible: 1,\r\n                            },\r\n                        ]}\r\n                    />\r\n\r\n                    <Dialog\r\n                        open={printDialog.open}\r\n                        maxWidth=\"lg\"\r\n                        fullWidth\r\n                        scroll=\"paper\"\r\n                    >\r\n                        <DialogTitle>\r\n                            Print Invoice #{printDialog.Do_Id}\r\n                            <IconButton\r\n                                // onClick={() => setPrintDialog({ open: false, Do_Id: null })}\r\n                                onClick={() => {\r\n                                    setPrintDialog({ open: false, Do_Id: null });\r\n                                    clearValues();\r\n                                    navigate('/erp/sales/invoice');\r\n                                }}\r\n\r\n                                style={{ position: 'absolute', right: 8, top: 8 }}\r\n                            >\r\n                                <Close />\r\n                            </IconButton>\r\n                        </DialogTitle>\r\n                        <DialogContent>\r\n                            {printDialog.Do_Id && (\r\n                                <InvoiceTemplate\r\n                                    Do_Id={printDialog.Do_Id}\r\n                                    loadingOn={loadingOn}\r\n                                    loadingOff={loadingOff}\r\n                                />\r\n                            )}\r\n                        </DialogContent>\r\n                        <DialogActions>\r\n                            <Button\r\n                                onClick={() => {\r\n                                    setPrintDialog({ open: false, Do_Id: null });\r\n                                    clearValues();\r\n                                    navigate('/erp/sales/invoice');\r\n                                }}\r\n                            >\r\n                                Close and Go to Listing\r\n                            </Button>\r\n                        </DialogActions>\r\n                    </Dialog>\r\n\r\n                    <br />\r\n\r\n                    <ExpencesOfSalesInvoice\r\n                        invoiceExpences={invoiceExpences}\r\n                        setInvoiceExpences={setInvoiceExpences}\r\n                        expenceMaster={baseData.expence}\r\n                        IS_IGST={IS_IGST}\r\n                        taxType={taxType}\r\n                        Total_Invoice_value={Total_Invoice_value}\r\n                    />\r\n\r\n                    <br />\r\n\r\n                    <SalesInvoiceTaxDetails\r\n                        invoiceProducts={invoiceProducts}\r\n                        invoiceExpences={invoiceExpences}\r\n                        isNotTaxableBill={isNotTaxableBill}\r\n                        isInclusive={isInclusive}\r\n                        IS_IGST={IS_IGST}\r\n                        products={baseData.products}\r\n                        invoiceInfo={invoiceInfo}\r\n                        setInvoiceInfo={setInvoiceInfo}\r\n                        invExpencesTotal={invExpencesTotal}\r\n                        Total_Invoice_value={Total_Invoice_value}\r\n                        taxSplitUp={taxSplitUp}\r\n                    />\r\n                </CardContent>\r\n                <CardActions className=\"d-flex justify-content-end\">\r\n                    <Button type='button' onClick={() => {\r\n                        if (window.history.length > 1) {\r\n                            navigate(-1);\r\n                        } else {\r\n                            navigate('/erp/sales/invoice');\r\n                        }\r\n                    }}>Cancel</Button>\r\n                    <Button onClick={saveSalesInvoice} variant=\"contained\">submit</Button>\r\n                </CardActions>\r\n            </Card>\r\n\r\n            <AppDialog\r\n                open={retailerSalesStatus.dialog}\r\n                onClose={() => setRetailerSalesStatus(pre => ({ ...pre, dialog: false }))}\r\n                title=\"Retailer Sales Status\"\r\n                onSubmit={() => {\r\n                    setRetailerSalesStatus(pre => ({ ...pre, dialog: false, forceCreateInvoice: true }));\r\n                    saveSalesInvoice();\r\n                }}\r\n                submitText=\"Yes\"\r\n                closeText=\"No\"\r\n                maxWidth=\"sm\"\r\n                fullWidth\r\n                isSubmit\r\n            >\r\n                <h3>The Retailer Exceeds the credit limit and credit days!</h3>\r\n                <p>Anyway Do you want to create invoice?</p>\r\n            </AppDialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CreateSalesInvoice;"],"names":["_ref","open","onClose","children","title","onSubmit","submitText","closeText","maxWidth","fullWidth","isSubmit","_jsxs","Dialog","_jsx","DialogTitle","DialogContent","DialogActions","Button","onClick","variant","type","createSvgIcon","d","getCardActionsUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","CardActionsRoot","styled","name","overridesResolver","props","styles","ownerState","root","disableSpacing","spacing","_extends","display","alignItems","padding","marginLeft","React","inProps","ref","useDefaultProps","className","other","_objectWithoutPropertiesLoose","classes","slots","composeClasses","useUtilityClasses","clsx","StaffArray","setStaffArray","costCenter","costCategory","getStaffOptions","row","index","checkIsNumber","Emp_Type_Id","categoryId","currentIndex","toArray","filter","staff","isEqualNumber","User_Type","some","st","idx","Emp_Id","Cost_Center_Id","map","value","label","Cost_Center_Name","userType","getAllStaffs","getFilteredStaffs","_Fragment","color","pre","_objectSpread","salesInvoiceStaffInfo","Select","Emp_Name","onChange","e","handleStaffChange","selectedOption","prev","staffRow","selectedStaff","find","Number","options","customSelectStyles","isSearchable","placeholder","filterOption","reactSelectFilterLogic","noOptionsMessage","style","minWidth","handleCategoryChange","newCategoryId","target","currentStaff","shouldClearStaff","category","Cost_Category_Id","Cost_Category","IconButton","_","filIndex","size","Delete","validStockValue","Item_Id","Godown_Id","stockInGodown","_toArray$find","godownStockValue","godownItem","Product_Id","Act_Bal_Qty","toNumber","_findProductDetails","_godowns$find","orderProducts","setOrderProducts","products","brands","uom","godowns","GST_Inclusive","IS_IGST","editValues","initialValue","batchDetails","saleOrderNumber","productDetails","setProductDetails","useState","isInclusive","isNotTaxableBill","stockInGodowns","setStockInGodowns","useEffect","isValidObject","Object","fromEntries","entries","_ref2","key","findProductDetails","productid","_products$find","obj","closeDialog","fetchLink","address","concat","then","data","success","sort","a","b","String","stock_item_name","localeCompare","altActQty","useMemo","quantity","Bill_Qty","productMaster","pack","PackGet","Division","preventDefault","isValidNumber","hasOwn","GoDown_Id","toast","warn","ordered","rowId","_ref3","gstPercentage","Igst_P","Gst_P","isTaxable","Item_Rate","Amount","taxType","itemRateGst","calculateGSTDetails","gstInfo","cgstPer","cgst_per","igstPer","igst_per","Cgst_Amo","cgst_amount","Igst_Amo","igst_amount","Product_Name","base_amount","with_tax","BrandID","Brand","isDisabled","Brand_Name","menuPortalTarget","document","body","maxMenuHeight","GroupID","Group","pro","reduce","acc","grp","Product_Group","push","Pro_Group","RequiredStar","Pre_Id","productInfo","_productInfo$Pro_Grou","_productInfo$Product_","_productInfo$Brand_Na","_productInfo$Brand","_productInfo$Item_Rat","_productInfo$UOM_Id","_productInfo$Units","Unit_Id","UOM_Id","Unit_Name","Units","HSN_Code","findIndex","ind","g","Godown_Name","required","onInput","onlynum","disabled","Multiplication","min","Act_Qty","readOnly","UOM","selectedIndex","text","o","i","Batch_Name","bat","item_id","godown_id","pendingQuantity","batch","startIcon","ClearAll","storage","getSessionUser","user","_arr$find","arguments","length","undefined","loadingOn","loadingOff","navigate","useNavigate","useLocation","state","baseData","setBaseData","branch","retailers","voucherType","staffType","brand","godown","expence","stockItemLedgerName","dialog","setDialog","addProductDialog","importFromSaleOrder","invoiceInfo","setInvoiceInfo","salesInvoiceGeneralInfo","retailerDeliveryAddress","setRetailerDeliveryAddress","retailerDeliveryAddressInfo","retailerShippingAddress","setRetailerShippingAddress","invoiceProducts","setInvoiceProduct","invoiceExpences","setInvoiceExpences","staffArray","retailerSalesStatus","setRetailerSalesStatus","retailerOutstandingDetails","selectedProductToEdit","setSelectedProductToEdit","dummyRowCount","printDialog","setPrintDialog","Do_Id","async","branchResponse","productsResponse","retailerResponse","voucherTypeResponse","uomResponse","staffResponse","staffCategory","godownLocationsResponse","expenceResponse","stockItemLedgerNameResponse","batchDetailsResponse","Promise","all","Company_id","branchData","BranchName","productsData","retailersData","Retailer_Name","Voucher_Type","uomData","staffData","staffCategoryData","godownLocations","expencesMaster","Account_Name","Stock_Item_Ledger_Name","getUniqueData","exp","stringCompare","Type","Id","Acc_Id","Expence_Name","percentageValue","console","error","fetchData","Retailer_Id","invoiceCreationStatus","canCreateInvoice","others","_data$others","_data$others2","_data$others3","_data$others4","_data$others5","outstanding","creditLimit","creditDays","recentDate","Date","catch","staffs","Staffs_Array","retailer","ret","newStaff","brokerId","brokerName","brokerTypeId","transporterId","transporterName","transporterTypeId","filteredNewStaff","ns","ps","filteredStaff","Array","from","Map","item","values","defaultStaffTypesData","defaultStaffTypes","clearValues","Igst","Cgst","Sgst","Expence_Value","taxPercentage","Addition","taxAmount","Sgst_Amo","sgst_amount","isArray","Products_List","Expence_Array","_editValues$key","ISOString","salesInvoiceDetailsInfo","_ref4","_item$key","rid","salesInvoiceExpencesInfo","_ref5","_item$key2","stateOfStaff","_ref6","_item$key3","retailerId","_retailerAddress$find","_retailerAddress$find2","retailerDetails","retailerAddress","deliveryAddresses","withGstNumber","add","isValidValue","gstNumber","firstAddress","billingAddress","addr","id","deliveryAddressId","setAddress","Gstno","shippingAddress","shipingAddressId","invExpencesTotal","Total_Invoice_value","invValue","RoundNumber","product","taxSplitUp","totalTaxable","totalTax","forEach","taxInfo","parseFloat","without_tax","tax_amount","totalWithTax","totalWithExpenses","roundedTotal","Math","round","roundOff","cgst","sgst","igst","invoiceTotal","Round_off","saveSalesInvoice","forceCreateInvoice","method","bodyData","deliveryAddressDetails","delivery_id","deliveryName","phoneNumber","cityName","deliveryAddress","stateName","shipingAddressDetails","Product_Array","_data$others6","savedDoId","message","log","AddProductForm","So_No","Card","window","history","CardContent","minHeight","height","InvolvedStaffs","ManageSalesInvoiceGeneralInfo","branches","onChangeRetailer","setShippingAddress","FilterableTable","headerFontSizePx","bodyFontSizePx","EnableSerialNumber","disablePagination","ButtonArea","sx","ml","Add","AddProductsInSalesInvoice","selectedItems","setSelectedItems","ReceiptLong","dataArray","columns","createCol","isVisible","ColumnHeader","isCustomCell","Cell","_ref7","_ref8","_baseData$godown$find","_baseData$godown$find2","_ref9","Edit","scroll","position","right","top","Close","InvoiceTemplate","ExpencesOfSalesInvoice","expenceMaster","SalesInvoiceTaxDetails","CardActions","AppDialog"],"sourceRoot":""}