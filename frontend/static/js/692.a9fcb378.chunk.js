"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[692],{48471:(e,t,o)=>{o.d(t,{Ay:()=>L,JT:()=>z,Lj:()=>k,wF:()=>R});var l=o(89379),a=o(65043),n=o(77739),i=o(17392),r=o(41020),s=o(30922),d=o(32143),c=o(2050),u=o(48734),p=o(28076),x=o(39652),h=o(12110),m=o(63336),C=o(79650),v=o(71806),g=o(84882),_=o(58093),b=o(73460),A=o(31159),f=o(22520),j=o(47968),y=o(692),S=o(8737),N=o(58558),I=o(30599),T=o(433),D=o(37762),F=(o(20557),o(11238)),E=o(70579);const w=(e,t)=>e.map(e=>{const o={};return t.forEach((t,l)=>{if(t.isVisible||t.Defult_Display)if(t.isCustomCell&&t.Cell){const a=t.Cell({row:e}),n=t.ColumnHeader?String(t.ColumnHeader).replace(/\s+/g,"_").toLowerCase():"field_".concat(l+1);"string"!==typeof a&&"number"!==typeof a&&"bigint"!==typeof a||(o[n]=a)}else{let l=t.Field_Name;o[l]=e[l]||""}}),o}),k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,l.A)({isVisible:i,Field_Name:e,Fied_Data:t,align:a,verticalAlign:n},o&&{ColumnHeader:o})},R=e=>{let{buttonsData:t=[],ToolTipText:o="Options"}=e;const[l,p]=(0,a.useState)(null),x=Boolean(l);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(n.A,{title:o,children:(0,E.jsx)(i.A,{"aria-describedby":x,onClick:e=>{p(e.currentTarget)},className:"ms-2",size:"small",children:(0,E.jsx)(N.A,{})})}),(0,E.jsx)(r.Ay,{open:x,anchorEl:l,onClose:()=>{p(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,E.jsx)(s.A,{children:t.map((e,t)=>(0,E.jsxs)(d.A,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,E.jsx)(c.A,{children:null===e||void 0===e?void 0:e.icon}),(0,E.jsx)(u.A,{children:null===e||void 0===e?void 0:e.name})]},t))})})]})},z=(e,t)=>{switch(t){case"number":return e?(0,f.jG)(e):e;case"date":return e?(0,f.yc)(e):e;case"time":return e?(0,f.JG)(e):e;case"string":return e;default:return""}},P=e=>{let{dataArray:t=[],columns:o=[],onClickFun:n=null,isExpendable:r=!1,expandableComp:s=null,tableMaxHeight:d=550,initialPageCount:c=20,EnableSerialNumber:u=!1,CellSize:N="small",disablePagination:k=!1,title:P="",PDFPrintOption:L=!1,ExcelPrintOption:O=!1,maxHeightOption:B=!1,ButtonArea:M=null,MenuButtons:H=[],bodyFontSizePx:W=13,headerFontSizePx:V=13}=e;const[G,U]=(0,a.useState)(0),[J,Z]=(0,a.useState)(c),[K,Q]=(0,a.useState)([]),[X,Y]=(0,a.useState)(!0),q=X&&B?" max-content ":d,$=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],ee=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],te=(e=>{if(!K.length)return e;return[...e].sort((e,t)=>{for(const o of K){const{columnId:l,direction:a}=o,n=e[l],i=t[l];if(n!==i)return"asc"===a?n>i?1:-1:n<i?1:-1}return 0})})(t),oe=G*J,le=oe+J,ae=te.slice(oe,le),ne=e=>{let{row:t,index:l}=e;const[d,c]=(0,a.useState)(!1),h="20px";return(0,E.jsxs)(a.Fragment,{children:[(0,E.jsxs)(p.A,{children:[!0===r&&s&&(0,E.jsx)(x.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(W,"px")},children:(0,E.jsx)(i.A,{size:"small",onClick:()=>c(e=>!e),children:d?(0,E.jsx)(S.A,{sx:{fontSize:h}}):(0,E.jsx)(y.A,{sx:{fontSize:h}})})}),!0===u&&(0,E.jsx)(x.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(W,"px")},children:J*G+l+1}),null===o||void 0===o?void 0:o.map((e,o)=>{var a,i;const r=(0,f.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,f.id)(null===e||void 0===e?void 0:e.isVisible,1),s=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,d=!s,c=(t,o,l)=>null!==e&&void 0!==e&&e.tdClass?" ".concat(null===e||void 0===e?void 0:e.tdClass({row:t,Field_Name:o,index:l})," "):"",u=e.align?null===(a=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===a?void 0:a.class:"",p=e.verticalAlign?null===(i=ee.find(t=>t.type===String(e.verticalAlign).toLowerCase()))||void 0===i?void 0:i.class:" vctr ";if(r&&d){const a=Object.entries(t).find(t=>{let[o]=t;return o===e.Field_Name});return(0,E.jsx)(x.A,{className:"border-end ".concat(u," ").concat(p," ").concat(c(t,e.Field_Name,l)),sx:{fontSize:"".concat(W,"px")},onClick:()=>n?n(t):console.log("Function not supplied"),children:a?z(a[1],null===e||void 0===e?void 0:e.Fied_Data):"-"},o)}return r&&s?(0,E.jsx)(x.A,{className:"border-end ".concat(u," ").concat(p," ").concat(c(t,e.Field_Name,l)),sx:{fontSize:"".concat(W,"px")},children:e.Cell({row:t,Field_Name:e.Field_Name,index:l})},o):(0,E.jsx)(x.A,{sx:{fontSize:"".concat(W,"px")},className:"border-end ".concat(u," ").concat(p),children:"-"},o)})]}),!0===r&&s&&d&&(0,E.jsx)(p.A,{children:(0,E.jsx)(x.A,{colSpan:Number(null===o||void 0===o?void 0:o.length)+(!0===u?2:1),children:s({row:t,index:l})})})]})};return(0,E.jsxs)(h.A,{className:"rounded-3 bg-white overflow-hidden",component:m.A,children:[(0,E.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(L||O||H.length>0||B)&&(0,E.jsx)(R,{ToolTipText:"Table Options",buttonsData:[...B?[{name:"Max Height",icon:X?(0,E.jsx)(T.A,{fontSize:"small",color:"primary"}):(0,E.jsx)(I.A,{fontSize:"small"}),onclick:()=>Y(e=>!e),disabled:(0,f.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...L?[{name:"PDF Print",icon:(0,E.jsx)(j.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const o=new D.default,a=w(e,t),n=t.filter(e=>e.isVisible||e.Defult_Display).map(e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase()),i=a.map(e=>n.map(t=>e[t])).map((e,t)=>(0,l.A)((0,l.A)({},e),{},{Sno:t+1}));o.autoTable({head:[n],body:i}),o.save("table.pdf")}catch(o){console.error(o)}})(t,o),disabled:(0,f.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...O?[{name:"Excel Print",icon:(0,E.jsx)(j.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const o=w(e,t),l=F.Wp.json_to_sheet(o),a=F.Wp.book_new();F.Wp.book_append_sheet(a,l,"Data"),F._h(a,"table.xlsx")}catch(o){console.error(o)}})(t,o),disabled:(0,f.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...H]}),M&&M,P&&(0,E.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:P})]}),(0,E.jsx)(C.A,{sx:{maxHeight:q},children:(0,E.jsxs)(v.A,{stickyHeader:!0,size:N,children:[(0,E.jsx)(g.A,{children:(0,E.jsxs)(p.A,{children:[r&&s&&(0,E.jsx)(x.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:"#"}),u&&(0,E.jsx)(x.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:"SNo"}),o.map((e,t)=>{const o=(0,f.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,f.id)(null===e||void 0===e?void 0:e.isVisible,1),a=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,n=K.find(t=>t.columnId===e.Field_Name),i=n?n.direction:"asc";var r,s,d,c;return o?a?(0,E.jsx)(x.A,{className:"fw-bold border-end border-top "+(e.align?null===(r=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===r?void 0:r.class:""),sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},sortDirection:!!n&&i,children:(0,E.jsx)(_.A,{active:!!n,direction:i,onClick:()=>(e=>{const t=K.find(t=>t.columnId===e);if(t){const o="asc"===t.direction;Q(K.map(t=>t.columnId===e?(0,l.A)((0,l.A)({},t),{},{direction:o?"desc":"asc"}):t))}else Q([...K,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(s=e.Field_Name)||void 0===s?void 0:s.replace(/_/g," "))})},t):(0,E.jsx)(x.A,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(d=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===d?void 0:d.class:""),sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(c=e.Field_Name)||void 0===c?void 0:c.replace(/_/g," "))},t):null})]})}),(0,E.jsxs)(b.A,{children:[(k?te:ae).map((e,t)=>(0,E.jsx)(ne,{row:e,index:t},t)),0===t.length&&(0,E.jsx)(p.A,{children:(0,E.jsx)(x.A,{colSpan:o.length+(!0===r&&s?1:0)+(!0===u?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!k&&0!==ae.length&&(0,E.jsx)("div",{className:"p-2 pb-0",children:(0,E.jsx)(A.A,{component:"div",count:t.length,page:G,onPageChange:(e,t)=>{U(t)},rowsPerPage:J,onRowsPerPageChange:e=>{Z(parseInt(e.target.value,10)),U(0)},rowsPerPageOptions:Array.from(new Set([c,5,20,50,100,200,500,1e3,2e3])).sort((e,t)=>e-t),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};P.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const L=P},63406:(e,t,o)=>{o.d(t,{zU:()=>r,ex:()=>s,MR:()=>i,Ap:()=>n,FX:()=>d});var l=o(89379);const a=o.p+"static/media/smt.aa4d4f940bbebff07a57.png",n={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},i={menu:(e,t)=>(0,l.A)((0,l.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,l.A)((0,l.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,l.A)((0,l.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,t)=>(0,l.A)((0,l.A)({},e),{},{backgroundColor:t.isSelected?"#2684FF":t.isFocused?"#E2ECF9":"white",color:t.isSelected?"white":"#333",padding:"10px 12px"})},r=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],s=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:a,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:a,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:a,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],d=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},93038:(e,t,o)=>{o.r(t),o.d(t,{default:()=>E});var l=o(89379),a=o(65043),n=o(81e3),i=o(85865),r=o(90889),s=o(86605),d=o(40710),c=o(17392),u=o(83462),p=o(26600),x=o(35316),h=o(29347),m=o(11906),C=o(48471),v=o(73216),g=o(20656),_=o(65074),b=o(22520),A=o(30079),f=o(34496),j=o(83560),y=o(58293),S=o(59383),N=o(79484),I=o(63406),T=o(91036),D=o(70579);const F=e=>{let{row:t}=e;return(0,D.jsxs)(n.A,{sx:{padding:2,backgroundColor:"#fafafa",border:"1px solid #e0e0e0"},children:[(0,D.jsxs)(i.A,{variant:"h6",gutterBottom:!0,sx:{color:"#333",fontSize:"1.1rem",mb:2},children:["Trip Details - ",t.Trip_No]}),t.TripDetails&&t.TripDetails.length>0?(0,D.jsxs)(n.A,{sx:{width:"100%"},children:[t.TripDetails.map((e,t)=>(0,D.jsxs)(r.A,{defaultExpanded:0===t,children:[(0,D.jsx)(s.A,{expandIcon:(0,D.jsx)(y.A,{}),children:(0,D.jsxs)(i.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:["Invoice: ",e.Do_Inv_No," | Date: ",e.Do_Date," | Value: ",(0,b.jG)(e.Total_Invoice_value)," | Retailer: ",e.Retailer_Name]})}),(0,D.jsx)(d.A,{children:e.StockDetails&&e.StockDetails.length>0?(0,D.jsxs)(n.A,{sx:{overflowX:"auto",mt:1},children:[(0,D.jsxs)(i.A,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:"bold"},children:["Stock Items (",e.StockDetails.length,")"]}),(0,D.jsxs)("table",{className:"table",style:{width:"100%",minWidth:"500px"},children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{style:{backgroundColor:"#e3f2fd"},children:[(0,D.jsx)("th",{style:{padding:"8px",border:"1px solid #ddd"},children:"S.No"}),(0,D.jsx)("th",{style:{padding:"8px",border:"1px solid #ddd"},children:"Product Name"}),(0,D.jsx)("th",{style:{padding:"8px",border:"1px solid #ddd"},children:"Amount"}),(0,D.jsx)("th",{style:{padding:"8px",border:"1px solid #ddd"},children:"Item ID"})]})}),(0,D.jsxs)("tbody",{children:[e.StockDetails.map((e,t)=>(0,D.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,D.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd"},children:t+1}),(0,D.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",fontWeight:"bold"},children:e.Product_Name||"N/A"}),(0,D.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"right",fontWeight:"bold"},children:(0,b.jG)(e.Amount)||"0.00"}),(0,D.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd"},children:e.Item_Id||"N/A"})]},e.Item_Id||t)),(0,D.jsxs)("tr",{style:{backgroundColor:"#e8f5e8"},children:[(0,D.jsxs)("td",{colSpan:2,style:{padding:"8px",border:"1px solid #ddd",textAlign:"right",fontWeight:"bold"},children:["Total for ",e.Do_Inv_No,":"]}),(0,D.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"right",fontWeight:"bold"},children:(0,b.jG)(e.StockDetails.reduce((e,t)=>e+(t.Amount||0),0))}),(0,D.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd"}})]})]})]})]}):(0,D.jsx)(i.A,{variant:"body2",color:"textSecondary",sx:{fontStyle:"italic",mt:1},children:"No stock details available for this invoice."})})]},e.TripDetailId||t)),t.TripDetails.length>0&&(0,D.jsx)(n.A,{sx:{mt:2,p:2,backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:1},children:(0,D.jsxs)(i.A,{variant:"h6",sx:{fontWeight:"bold",color:"#856404"},children:["Grand Total for Trip ",t.Trip_No,": ",(0,b.jG)(t.TripDetails.reduce((e,t)=>{var o;return e+((null===(o=t.StockDetails)||void 0===o?void 0:o.reduce((e,t)=>e+(t.Amount||0),0))||0)},0))]})})]}):(0,D.jsx)(i.A,{variant:"body2",color:"textSecondary",sx:{fontStyle:"italic"},children:"No trip details available for this trip."})]})},E=e=>{var t;let{loadingOn:o,loadingOff:r,AddRights:s,pageID:d}=e;const[y,E]=(0,a.useState)({rows:[],allEmpCategories:[]}),[w,k]=(0,a.useState)({Fromdate:(0,b.ny)(),Todate:(0,b.ny)(),voucherType_Filter:{label:"ALL",value:""},created_by_Filter:{label:"ALL",value:""},filterDialog:!1}),[R,z]=(0,a.useState)({voucherType:[],created_by:[]}),[P,L]=(0,a.useState)(!1),[O,B]=(0,a.useState)(null),[M,H]=(0,a.useState)([]),[W,V]=(0,a.useState)([]),[G,U]=(0,a.useState)([]),[J,Z]=(0,a.useState)(!1),[K,Q]=((0,v.Zp)(),(0,a.useState)(!1));(0,a.useEffect)(()=>{Promise.all([(0,_.z)({address:"dataEntry/costCenter"}),(0,_.z)({address:"dataEntry/costCenter/category"})]).then(e=>{let[t,o]=e;V(((null===t||void 0===t?void 0:t.data)||[]).map(e=>({id:e.Cost_Center_Id,value:e.Cost_Center_Name,label:e.Cost_Center_Name}))),U(((null===o||void 0===o?void 0:o.data)||[]).map(e=>({id:e.Cost_Category_Id,value:e.Cost_Category,label:e.Cost_Category}))),Z(!0)}).catch(e=>{console.error("Error loading options:",e),Z(!0)})},[]);(0,a.useEffect)(()=>{const e=(0,b.vU)(d);e&&k(t=>(0,l.A)((0,l.A)({},t),e))},[d]);(0,a.useEffect)(()=>{const{Fromdate:e,Todate:t,voucherType_Filter:a,created_by_Filter:n}=w;(0,_.z)({address:"sales/lrReport?Fromdate=".concat(e,"&Todate=").concat(t,"&voucher=").concat(a.value,"&createdBy=").concat(n.value),loadingOff:r,loadingOn:o}).then(e=>{if(e.success){const{rows:t,allEmpCategories:o}=(e=>{const t=new Set;e.forEach(e=>{var o;null===(o=e.Employees)||void 0===o||o.forEach(e=>t.add(e.Cost_Category||"Unknown"))});const o=[...t];return{rows:e.map(e=>{var t,a;const n={};o.forEach(e=>n[e]=[]),null===(t=e.Employees)||void 0===t||t.forEach(e=>{const t=e.Cost_Category||"Unknown";n[t].push(e.Cost_Center_Name)});const i={};o.forEach(e=>{var t;return i[e]=(null===(t=n[e])||void 0===t?void 0:t.join(", "))||""});const r=(null===(a=e.TripDetails)||void 0===a?void 0:a[0])||{};return(0,l.A)((0,l.A)({},e),{},{Delivery_Id:r.Delivery_Id||null,Do_Inv_No:r.Do_Inv_No||null,Do_Date:r.Do_Date||null,Total_Invoice_value:r.Total_Invoice_value||null,Retailer_Name:r.Retailer_Name||e.Retailer_Name||""},i)}),allEmpCategories:o}})(e.data);E({rows:t,allEmpCategories:o})}}).catch(console.error)},[w,K]);const X=()=>k(e=>(0,l.A)((0,l.A)({},e),{},{filterDialog:!1})),Y=(y.rows||[]).map(e=>(0,l.A)((0,l.A)({},e),{},{Total_Invoice_value:(e.TripDetails||[]).reduce((e,t)=>e+(t.Total_Invoice_value||0),0)})),q=Y.reduce((e,t)=>e+(t.Total_Invoice_value||0),0);return(0,a.useEffect)(()=>{if(K){(async()=>{try{(await(0,_.z)({address:"sales/lrReport"})).success}catch(e){console.error("Error fetching data:",e)}finally{Q(!1)}})()}},[K]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(C.Ay,{title:"Trips",headerFontSizePx:12,bodyFontSizePx:12,dataArray:Y||[],columns:[(0,C.Lj)("Trip_No","string","Trip No"),(0,C.Lj)("TR_INV_ID","string","TR_INV_ID"),(0,C.Lj)("Trip_Date","date","TripDate"),(0,C.Lj)("StartTime","time","StartTime"),(0,C.Lj)("EndTime","time","EndTime"),(0,C.Lj)("Vehicle_No","string","Veh.No"),(0,C.Lj)("Do_Date","date","Deliv.Date"),(0,C.Lj)("Total_Invoice_value","number","Tot.Inv"),...(null===(t=y.allEmpCategories)||void 0===t?void 0:t.map(e=>(0,C.Lj)(e,"string",e)))||[],{isVisible:1,ColumnHeader:"Action",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,D.jsx)(c.A,{size:"small",onClick:()=>(e=>{if(!J)return void console.warn("Options not loaded yet");B(e);const t=(e.Employees||[]).map(e=>{const t=G.find(t=>t.value===e.Cost_Category||t.label===e.Cost_Category),o=W.find(t=>t.value===e.Cost_Center_Name||t.label===e.Cost_Center_Name);return{Involved_Emp_Id:e.Involved_Emp_Id||"",Cost_Center_Name:e.Cost_Center_Name||"",Cost_Center_Type_Id:e.Cost_Center_Type_Id||"",Cost_Category:e.Cost_Category||"",Cost_Center_Id:o?o.id:"",Cost_Category_Id:t?t.id:""}});H(t),L(!0)})(t),children:(0,D.jsx)(j.A,{})})}}],isExpendable:!0,expandableComp:F,EnableSerialNumber:!0,ButtonArea:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(c.A,{onClick:()=>k(e=>(0,l.A)((0,l.A)({},e),{},{filterDialog:!0})),size:"small",className:"mx-1",children:(0,D.jsx)(S.A,{className:"fa-20"})}),(0,D.jsx)("span",{className:"bg-light text-light fa-11 px-1 shadow-sm py-1 rounded-3 mx-1",children:(0,b.Ro)(q)>0&&(0,D.jsxs)("h6",{className:"m-0 text-end text-muted px-3",children:["Total: ",(0,b.jG)(q)]})})]})}),(0,D.jsxs)(u.A,{open:w.filterDialog,onClose:X,fullWidth:!0,maxWidth:"sm",children:[(0,D.jsx)(p.A,{children:"Filters"}),(0,D.jsx)(x.A,{children:(0,D.jsx)("table",{className:"table",children:(0,D.jsxs)("tbody",{children:[(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{children:"From"}),(0,D.jsx)("td",{children:(0,D.jsx)("input",{type:"date",value:w.Fromdate,onChange:e=>k((0,l.A)((0,l.A)({},w),{},{Fromdate:e.target.value})),className:"cus-inpt"})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{children:"To"}),(0,D.jsx)("td",{children:(0,D.jsx)("input",{type:"date",value:w.Todate,onChange:e=>k((0,l.A)((0,l.A)({},w),{},{Todate:e.target.value})),className:"cus-inpt"})})]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{children:"Created By"}),(0,D.jsx)("td",{children:(0,D.jsx)(g.Ay,{value:w.created_by_Filter,onChange:e=>k((0,l.A)((0,l.A)({},w),{},{created_by_Filter:e})),options:[{value:"",label:"ALL"},...R.created_by],styles:I.MR})})]})]})})}),(0,D.jsxs)(h.A,{children:[(0,D.jsx)(m.A,{variant:"outlined",onClick:()=>k({Fromdate:(0,b.ny)(),Todate:(0,b.ny)(),voucherType_Filter:{label:"ALL",value:""},created_by_Filter:{label:"ALL",value:""},filterDialog:!1}),startIcon:(0,D.jsx)(f.A,{}),children:"Clear"}),(0,D.jsx)(m.A,{onClick:X,children:"Close"}),(0,D.jsx)(m.A,{onClick:()=>{(0,b.Mb)({Fromdate:w.Fromdate,Todate:w.Todate,pageID:d,voucherType_Filter:w.voucherType_Filter,created_by_Filter:w.created_by_Filter}),X()},variant:"contained",startIcon:(0,D.jsx)(N.A,{}),children:"Search"})]})]}),(0,D.jsxs)(u.A,{open:P,onClose:()=>L(!1),maxWidth:"sm",fullWidth:!0,children:[(0,D.jsx)(p.A,{children:"Edit Cost Center Details"}),(0,D.jsx)(x.A,{children:(0,D.jsxs)(n.A,{sx:{my:2},children:[(0,D.jsxs)(i.A,{variant:"subtitle1",children:["Trip No: ",null===O||void 0===O?void 0:O.Trip_No]}),0===M.length&&(0,D.jsx)(i.A,{children:"No Cost Center info available. Please add."}),M.map((e,t)=>(0,D.jsxs)(n.A,{sx:{mb:2,p:2,border:"1px solid #ddd",borderRadius:1,position:"relative"},children:[(0,D.jsxs)(i.A,{fontWeight:"bold",mb:1,children:["Employee #",t+1]}),(0,D.jsx)(c.A,{size:"small",onClick:()=>{return e=t,void H(t=>t.filter((t,o)=>o!==e));var e},sx:{position:"absolute",top:8,right:8},children:(0,D.jsx)(A.A,{})}),(0,D.jsx)(i.A,{variant:"body2",mb:.5,children:"Cost Category"}),(0,D.jsx)(g.Ay,{value:G.find(t=>t.id===e.Cost_Category_Id)||null,onChange:e=>{const o=[...M];e?(o[t].Cost_Category=e.value,o[t].Cost_Category_Id=e.id):(o[t].Cost_Category="",o[t].Cost_Category_Id=""),H(o)},options:G,styles:I.MR,placeholder:"Select Category",isClearable:!0}),(0,D.jsx)(i.A,{variant:"body2",mt:2,mb:.5,children:"Cost Center Name"}),(0,D.jsx)(g.Ay,{value:W.find(t=>t.id===e.Cost_Center_Id)||null,onChange:e=>{const o=[...M];e?(o[t].Cost_Center_Name=e.value,o[t].Cost_Center_Id=e.id,o[t].Cost_Center_Type_Id=e.id,o[t].Involved_Emp_Id=e.id):(o[t].Cost_Center_Name="",o[t].Cost_Center_Id="",o[t].Cost_Center_Type_Id="",o[t].Involved_Emp_Id=""),H(o)},options:W,styles:I.MR,placeholder:"Select Center",isClearable:!0})]},t)),(0,D.jsx)(m.A,{variant:"outlined",onClick:()=>{H(e=>[...e,{Involved_Emp_Id:"",Cost_Center_Name:"",Cost_Center_Type_Id:"",Cost_Category:"",Cost_Center_Id:"",Cost_Category_Id:""}])},sx:{mt:2},children:"Add New Cost Center"})]})}),(0,D.jsxs)(h.A,{children:[(0,D.jsx)(m.A,{onClick:()=>L(!1),children:"Cancel"}),(0,D.jsx)(m.A,{variant:"contained",onClick:async()=>{if(O)try{const e={tripId:O.Trip_Id,employeeCostCenters:M.map(e=>({Involved_Emp_Id:e.Involved_Emp_Id,Cost_Center_Type_Id:e.Cost_Center_Type_Id||e.Cost_Category_Id}))},t=await(0,_.z)({address:"sales/lrReport",method:"POST",bodyData:e});t.success?(T.oR.success(t.message||"Cost centers updated successfully"),L(!1),Q(!0)):T.oR.error(t.message||"Failed to update cost centers")}catch(e){console.error("Error saving cost centers:",e),T.oR.error("Error saving cost centers")}},children:"Save"})]})]})]})}}}]);
//# sourceMappingURL=692.a9fcb378.chunk.js.map