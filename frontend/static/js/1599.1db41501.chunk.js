"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1599],{21599:(e,s,t)=>{t.r(s),t.d(s,{default:()=>te});var a=t(89379),l=t(65043),n=t(43845),r=t(81e3),o=t(77739),i=t(17392),d=t(85865),c=t(11906),u=t(83462),p=t(26600),x=t(35316),h=t(29347),m=t(76447),_=t(83560),j=t(70141),g=t(75155),y=t(51387),A=t(91036),T=t(45777),k=t(65074),v=t(28503),S=t(13448),b=t(24056),f=t(79650),C=t(71806),N=t(84882),I=t(28076),D=t(39652),E=t(73460),w=t(73086),P=t(25477),F=(t(92342),t(20491),t(12249)),z=t(5793),R=t(12412),O=t(51962),H=t(67784),B=t(97707),M=t(14792),L=t(70579);const W=(0,L.jsx)(F.A,{fontSize:"small"}),V=(0,L.jsx)(z.A,{fontSize:"small"}),G=e=>{let{row:s,children:t,openAction:n,reload:r,onCloseFun:o,loadingOn:i,loadingOff:d,onTaskAdded:c,Task_Type_Id:m,Task_Type:_}=e;const j=localStorage.getItem("user"),g=JSON.parse(j),y={Task_Id:"",Task_Name:"",Task_Desc:"",Task_Group_Id:"",Entry_By:null===g||void 0===g?void 0:g.UserId,Company_id:null===g||void 0===g?void 0:g.Company_id,Entry_Date:"",Update_By:"",Update_Date:"",Task_Parameters:[]},[T,v]=(0,l.useState)(!1),[S,b]=(0,l.useState)(!1),[f,C]=(0,l.useState)([]),[N,I]=(0,l.useState)([]),[D,E]=(0,l.useState)([]),[w,P]=(0,l.useState)(y),[F,z]=(0,l.useState)(!1),[G,U]=(0,l.useState)(y);(0,l.useEffect)(()=>{(async()=>{try{const e=await(0,k.z)({address:"taskManagement/tasks/dropdown"});e.success&&C(e.data);const s=await(0,k.z)({address:"masters/taskType/dropDown"});s.success&&I(s.data);const t=await(0,k.z)({address:"taskManagement/parameters"});t.success&&E(t.data)}catch(e){console.error(e)}})()},[]),(0,l.useEffect)(()=>{v(n)},[n]),(0,l.useEffect)(()=>{(0,B.aF)(s)?(console.log(s),P(e=>(0,a.A)((0,a.A)((0,a.A)({},e),s),{},{Task_Group_Id:m||s.Task_Group_Id||""})),b(!0)):(P(e=>(0,a.A)((0,a.A)({},e),{},{Task_Group_Id:m||""})),b(!1))},[s,m]);const q=()=>{v(!1),P(e=>(0,a.A)((0,a.A)({},y),{},{Task_Group_Id:m||""})),o&&o()},J=()=>{z(!1),U(y)};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("span",{onClick:()=>v(!0),style:{cursor:"pointer"},children:t}),(0,L.jsxs)(u.A,{open:T,children:[(0,L.jsx)(p.A,{className:"bg-primary text-white mb-2 px-3 py-2",children:S?"Edit Task":"Add Task"}),(0,L.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{const e=m||w.Task_Group_Id,s=w.Task_Parameters.map(e=>(0,a.A)((0,a.A)({},e),{},{Param_Id:e.Paramet_Id}))||[],t=(0,a.A)((0,a.A)({},w),{},{Task_Group_Id:e,Task_Parameters:s});console.log("Submitting with Task_Group_Id:",e),i&&i();try{const e=await(0,k.z)({address:"taskManagement/tasks",method:S?"PUT":"POST",bodyData:t});e.success?(A.oR.success(e.message),P(e=>(0,a.A)((0,a.A)({},y),{},{Task_Group_Id:m||""})),q(),r&&r(),c&&c()):A.oR.error(e.message)}catch(l){console.error(l),A.oR.error("An error occurred while processing your request.")}finally{d&&d()}})()},children:[(0,L.jsx)(x.A,{children:(0,L.jsxs)("div",{className:"row",children:[(0,L.jsxs)("div",{className:"col-md-4 p-2",children:[(0,L.jsxs)("label",{children:["Task Name ",(0,L.jsx)(M.A,{})]}),(0,L.jsx)("input",{maxLength:150,onChange:e=>P((0,a.A)((0,a.A)({},w),{},{Task_Name:e.target.value})),required:!0,value:w.Task_Name,placeholder:"ex: File Checking",className:"cus-inpt"})]}),(0,L.jsxs)("div",{className:"col-md-4 p-2",children:[(0,L.jsx)("label",{children:"Base Task"}),(0,L.jsxs)("select",{value:w.Under_Task_Id||0,className:"cus-inpt",onChange:e=>P((0,a.A)((0,a.A)({},w),{},{Under_Task_Id:e.target.value})),children:[(0,L.jsx)("option",{value:0,children:"Primary"}),f.map((e,s)=>(0,L.jsx)("option",{value:e.Task_Id,children:e.Task_Name},s))]})]}),(0,L.jsxs)("div",{className:"col-12",children:[(0,L.jsxs)("label",{children:["Task Description ",(0,L.jsx)(M.A,{})]}),(0,L.jsx)("textarea",{className:"cus-inpt",value:w.Task_Desc,rows:"3",onChange:e=>P((0,a.A)((0,a.A)({},w),{},{Task_Desc:e.target.value}))})]}),(0,L.jsx)("div",{className:"col-md-12 p-2",children:(0,L.jsx)(R.A,{multiple:!0,id:"checkboxes-tags-demo",options:D,disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.Paramet_Name," - ").concat(e.Paramet_Data_Type),value:w.Task_Parameters||[],onChange:(e,s)=>P((0,a.A)((0,a.A)({},w),{},{Task_Parameters:s})),renderOption:(e,s,t)=>{let{selected:l}=t;return(0,L.jsxs)("li",(0,a.A)((0,a.A)({},e),{},{children:[(0,L.jsx)(O.A,{icon:W,checkedIcon:V,style:{marginRight:8},checked:l}),"".concat(s.Paramet_Name," - ").concat(s.Paramet_Data_Type)]}))},className:"pt-2",isOptionEqualToValue:(e,s)=>Number(e.Paramet_Id)===Number(s.Paramet_Id),renderInput:e=>(0,L.jsx)(H.A,(0,a.A)((0,a.A)({},e),{},{label:"Task Parameters",placeholder:"Choose Task Parameters"}))})}),w.Task_Parameters.map((e,s)=>(0,L.jsxs)("div",{className:"col-md-4 p-2",children:[(0,L.jsx)("label",{className:"mb-2",children:e.Paramet_Name}),(0,L.jsx)("input",{type:e.Paramet_Data_Type||"text",className:"cus-inpt",onChange:e=>{const t=[...w.Task_Parameters];t[s]=(0,a.A)((0,a.A)({},t[s]),{},{Default_Value:e.target.value}),P((0,a.A)((0,a.A)({},w),{},{Task_Parameters:t}))},value:e.Default_Value,placeholder:"Default Value"})]},s))]})}),(0,L.jsxs)(h.A,{children:[(0,L.jsx)("button",{className:"btn btn-light rounded-5 px-3",type:"button",onClick:q,children:"Cancel"}),(0,L.jsx)("button",{className:"btn btn-primary rounded-5 px-3",type:"submit",children:"Submit"})]})]})]}),(0,L.jsxs)(u.A,{open:F,onClose:J,children:[(0,L.jsx)(p.A,{className:"bg-primary text-white mb-2 px-3 py-2",children:"Edit Task"}),(0,L.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{const e=G.Task_Parameters.map(e=>(0,a.A)((0,a.A)({},e),{},{Param_Id:e.Paramet_Id}))||[],s=(0,a.A)((0,a.A)({},G),{},{Task_Parameters:e});i&&i();try{const e=await(0,k.z)({address:"taskManagement/tasks",method:"PUT",bodyData:s});e.success?(A.oR.success(e.message),J(),r&&r(),c&&c()):A.oR.error(e.message)}catch(t){console.error(t),A.oR.error("An error occurred while processing your request.")}finally{d&&d()}})()},children:[(0,L.jsxs)(x.A,{children:[(0,L.jsx)(H.A,{label:"Task Name",value:G.Task_Name,onChange:e=>U((0,a.A)((0,a.A)({},G),{},{Task_Name:e.target.value})),fullWidth:!0}),(0,L.jsxs)(H.A,{label:"Task Group",select:!0,value:G.Task_Group_Id,onChange:e=>U((0,a.A)((0,a.A)({},G),{},{Task_Group_Id:e.target.value})),fullWidth:!0,children:[(0,L.jsx)("option",{value:"",disabled:!0,children:"- select -"}),N.map((e,s)=>(0,L.jsx)("option",{value:e.Task_Type_Id,children:e.Task_Type},s))]})]}),(0,L.jsxs)(h.A,{children:[(0,L.jsx)("button",{className:"btn btn-light rounded-5 px-3",type:"button",onClick:J,children:"Cancel"}),(0,L.jsx)("button",{className:"btn btn-primary rounded-5 px-3",type:"submit",children:"Save"})]})]})]})]})};var U=t(89384),q=t(81637),J=t(51214),Y=t(53911);const K=function(e){let{open:s,onClose:t,taskDetails:a,closeDialogTask:n}=e;const[r,o]=(0,l.useState)(null),[d,h]=(0,l.useState)(!1),[m,j]=(0,l.useState)(!0),{contextObj:g}=(0,l.useContext)(T.i);(0,l.useEffect)(()=>{s&&(o(null),j(!0),setTimeout(()=>{j(!1)},500))},[s]);const y=e=>{if(!e)return"N/A";const s=new Date(e);if(isNaN(s.getTime()))return"Invalid Date";const t=String(s.getDate()).padStart(2,"0"),a=String(s.getMonth()+1).padStart(2,"0"),l=s.getFullYear();return"".concat(t,"-").concat(a,"-").concat(l)};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(u.A,{open:s,maxWidth:"lg",children:[(0,L.jsx)(p.A,{children:(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsx)("span",{children:"Details"}),(0,L.jsx)(c.A,{variant:"contained",color:"primary",onClick:t,children:"Close"})]})}),(0,L.jsx)(x.A,{children:m?(0,L.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px",width:"500px"},children:(0,L.jsx)(q.A,{})}):(0,L.jsx)(f.A,{children:(0,L.jsxs)(C.A,{children:[(0,L.jsx)(N.A,{children:(0,L.jsxs)(I.A,{children:[(0,L.jsx)(D.A,{className:"fa-14 text-center",children:"Employee"}),(0,L.jsx)(D.A,{className:"fa-14 text-center",children:"Assigned By"}),(0,L.jsx)(D.A,{className:"fa-14 text-center",children:"Start-End Date"}),(0,L.jsx)(D.A,{className:"fa-14 text-center",children:"Start-End Time"}),(0,L.jsx)(D.A,{className:"fa-14 text-center",children:"Total Hours"}),(0,L.jsx)(D.A,{className:"fa-14 text-center",children:"Timer Based"}),(0,L.jsx)(D.A,{className:"fa-14 text-center",children:"Involved Status"}),(0,L.jsx)(D.A,{className:"fa-14 text-center",children:"Order By"}),(0,L.jsx)(D.A,{className:"fa-14 text-center",children:"Action"})]})}),(0,L.jsx)(E.A,{children:0===a.length?(0,L.jsx)(I.A,{children:(0,L.jsx)(D.A,{colSpan:9,className:"fa-14 text-center",style:{textAlign:"center"},children:"No data found"})}):a.map((e,s)=>(0,L.jsxs)(I.A,{children:[(0,L.jsx)(D.A,{className:"fa-13 text-center",children:e.EmployeeName||"N/A"}),(0,L.jsx)(D.A,{className:"fa-13 text-center",children:e.AssignedUser||"N/A"}),(0,L.jsx)(D.A,{className:"fa-14 text-center",children:(0,L.jsxs)("span",{className:"badge rounded-4 px-3 bg-light text-primary",children:[(0,L.jsx)(J.A,{className:"fa-18 me-2"}),y(e.Est_Start_Dt)," - ",y(e.Est_End_Dt)]})}),(0,L.jsx)(D.A,{className:"fa-14 text-center",children:(0,L.jsxs)("span",{className:"badge rounded-4 px-3 bg-light text-primary",children:[(0,L.jsx)(Y.A,{className:"fa-18 me-2"}),e.Sch_Time||"N/A"," - ",e.EN_Time||"N/A"]})}),(0,L.jsx)(D.A,{className:"fa-13 text-center",children:e.Sch_Period||"N/A"}),(0,L.jsx)(D.A,{className:"fa-14 text-center",children:(0,L.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(Number(e.Timer_Based)?"bg-success":"bg-warning"),children:Number(e.Timer_Based)?"Yes":"No"})}),(0,L.jsx)(D.A,{className:"fa-14 text-center",children:(0,L.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(Number(e.Invovled_Stat)?"bg-success":"bg-danger"),children:Number(e.Invovled_Stat)?"IN":"OUT"})}),(0,L.jsx)(D.A,{className:"fa-13 text-center",children:e.Ord_By||"N/A"}),(0,L.jsx)(D.A,{className:"fa-13 text-center",children:(0,L.jsxs)(i.A,{size:"small",onClick:()=>(o(e),void h(!0)),children:[(0,L.jsx)(_.A,{className:"fa-18"}),"Edit"]})})]},s))})]})})})]}),d&&(0,L.jsx)(U.A,{open:d,projectId:null===r||void 0===r?void 0:r.Project_Id,taskId:r,editData:r,onClose:()=>{h(!1),t()}})]})};var Q=t(22016),X=t(15710),Z=t(86506);const $=function(e){let{dialogOpen:s,setDialogOpen:t,projectid:o,reload:m,onReload:j,selectedProject:g}=e;const[y,v]=(0,l.useState)(!1),[S,F]=(0,l.useState)(!1),[z,R]=(0,l.useState)(!1),[O,H]=(0,l.useState)(null),[B,M]=(0,l.useState)([]),[W,V]=(0,l.useState)([]),[q,J]=(0,l.useState)(!1),[Y,$]=(0,l.useState)({Sch_Type_Id:"",Sch_Type:""}),[ee,se]=(0,l.useState)(!1),[te,ae]=(0,l.useState)([]),[le,ne]=(0,l.useState)(!1),re=JSON.parse(localStorage.getItem("user")),oe=null===re||void 0===re?void 0:re.UserId,ie=null===re||void 0===re?void 0:re.Company_id,[de,ce]=(0,l.useState)(!1),[ue,pe]=(0,l.useState)(null),[xe,he]=(0,l.useState)(null),{contextObj:me}=(0,l.useContext)(T.i),[_e,je]=(0,l.useState)(!1),[ge,ye]=(0,l.useState)(!1),[Ae,Te]=(0,l.useState)("1"),[ke,ve]=(0,l.useState)([]),Se=(e,s)=>{Te(s)},be=(0,l.useCallback)(async()=>{if(null!==g&&void 0!==g&&g.Task_Type_Id){se(!0);try{const e=await(0,k.z)({address:"taskManagement/tasks/dropdown?Company_id=".concat(ie)});e.success?M(e.data):A.oR.error(e.message)}catch(e){console.error(e)}finally{se(!1)}}},[ie,null===g||void 0===g?void 0:g.Task_Type_Id]),fe=(0,l.useCallback)(async()=>{try{const e=await(0,k.z)({address:"taskManagement/project/schedule/ListingDetails?Project_Id=".concat(o,"&Task_Type_Id=").concat((null===g||void 0===g?void 0:g.Task_Type_Id)||"")});e.success?ae(e.data):console.error("Failed to fetch task details:",e.message)}catch(e){console.error("Error fetching task details:",e)}},[o,null===g||void 0===g?void 0:g.Task_Type_Id]);(0,l.useEffect)(()=>{null!==g&&void 0!==g&&g.Task_Type_Id&&(be(),fe(),(async()=>{(0,k.z)({address:"taskManagement/project/schedule/newscheduleType"}).then(e=>{e.success?ve(e.data):A.oR.error(e.message)})})())},[m,o,j,null===g||void 0===g?void 0:g.Task_Type_Id]);const Ce=B.map(e=>({value:e.Task_Id,label:e.Task_Name})),Ne=e=>{const s=ke.find(s=>s.Sch_Type_Id===parseInt(e.target.value));s&&$((0,a.A)((0,a.A)({},Y),{},{Sch_Type_Id:s.Sch_Type_Id,Sch_Type:s.Sch_Type}))};return(0,L.jsxs)(L.Fragment,{children:[ge&&(0,L.jsxs)(u.A,{open:ge,fullWidth:!0,maxWidth:"sm",PaperProps:{style:{borderRadius:"8px"}},onClose:()=>ye(!1),children:[(0,L.jsx)(p.A,{children:_e?"Edit Task":"Assign Task"}),(0,L.jsx)(x.A,{children:(0,L.jsx)("div",{style:{padding:"1px",display:"flex"},children:(0,L.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:[(0,L.jsx)("label",{style:{marginRight:"8px"},children:"Sch_Type"}),(0,L.jsxs)("select",{value:Y.Sch_Type_Id||"",onChange:Ne,className:"cus-inpt",required:!0,style:{marginLeft:"10px"},children:[(0,L.jsx)("option",{value:"",disabled:!0,children:"- Sch_Type -"}),ke.map((e,s)=>(0,L.jsx)("option",{value:e.Sch_Type_Id,children:e.Sch_Type},s))]})]})})}),(0,L.jsxs)(h.A,{children:[(0,L.jsx)(c.A,{onClick:()=>ye(!1),children:"Cancel"}),(0,L.jsx)(c.A,{variant:"contained",color:"primary",onClick:()=>(async e=>{const s={Sch_Project_Id:e.Sch_Project_Id,Sch_Id:e.TaskSchId,schtypeid:Y.Sch_Type_Id,Task_Id:e.Task_Id};try{const e=await(0,k.z)({address:"taskManagement/project/schedule/updateScheduleTaskUpdate",method:"PUT",bodyData:s});e.success?(A.oR.success(e.message),ye(!1),je(!1),j()):(e.status,A.oR.warn(e.message||"Task already exists for this project."))}catch(t){A.oR.error(t)}})(Y),children:"Save"})]})]}),(0,L.jsxs)(u.A,{open:s,fullWidth:!0,maxWidth:"lg",PaperProps:{style:{height:"75vh"}},children:[(0,L.jsx)(p.A,{children:(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsxs)("span",{children:[null===g||void 0===g?void 0:g.Task_Type," "]}),(0,L.jsx)(c.A,{variant:"contained",color:"primary",onClick:()=>F(!0),children:"Assign Task"})]})}),(0,L.jsx)(r.A,{sx:{width:"100%",typography:"body1"},children:te.map((e,s)=>{const t=e.SchTypes||[];return(0,L.jsxs)(Q.Ay,{value:Ae,children:[(0,L.jsx)(r.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,L.jsx)(X.A,{onChange:Se,"aria-label":"Schedule Types",children:Array.isArray(t)&&t.length>0?t.map((e,s)=>(0,L.jsx)(b.A,{label:e.SchType||"No SchType",value:(e.SchTypeId||s).toString(),id:"tab-".concat(e.SchTypeId||s),"aria-controls":"tabpanel-".concat(e.SchTypeId||s)},"".concat(e.SchTypeId||s,"-").concat(s))):(0,L.jsx)(d.A,{variant:"body2",color:"textSecondary",sx:{padding:2},children:"No Schedule Types Available"})})}),Array.isArray(t)&&t.map((e,s)=>(0,L.jsxs)(Z.A,{value:(e.SchTypeId||s).toString(),id:"tabpanel-".concat(e.SchTypeId||s),"aria-labelledby":"tab-".concat(e.SchTypeId||s),children:[(0,L.jsx)(r.A,{sx:{marginBottom:2,padding:2,backgroundColor:"#f9f9f9",borderRadius:"8px"},children:(0,L.jsxs)(d.A,{variant:"body1",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,L.jsxs)(r.A,{children:["Schedule Type: ",(0,L.jsx)("strong",{children:e.SchType})]}),e.TaskCountsInSchType?(0,L.jsx)(r.A,{textAlign:"right",children:(()=>{try{const a=JSON.parse(e.TaskCountsInSchType);var s,t;if(Array.isArray(a)&&a.length>0)return(0,L.jsxs)(L.Fragment,{children:["Total Tasks: ",(0,L.jsx)("strong",{children:(null===(s=a[0])||void 0===s?void 0:s.TotalTasks)||0})," / Completed Tasks: ",(0,L.jsx)("strong",{children:(null===(t=a[0])||void 0===t?void 0:t.CompletedTasks)||0})]})}catch(a){console.error("Error parsing TaskCountsInSchType:",a)}return"No task counts available"})()}):(0,L.jsx)(d.A,{variant:"body2",color:"textSecondary",children:"No task counts available"})]})}),Array.isArray(e.Tasks)&&e.Tasks.length>0?(0,L.jsx)(f.A,{sx:{maxHeight:"60vh",border:"1px solid #e0e0e0",borderRadius:1},children:(0,L.jsxs)(C.A,{stickyHeader:!0,children:[(0,L.jsx)(N.A,{children:(0,L.jsxs)(I.A,{children:[(0,L.jsx)(D.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Task Name"}),(0,L.jsx)(D.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Description"}),(0,L.jsx)(D.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Task Type"}),(0,L.jsx)(D.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Assigned Employees"}),(0,L.jsx)(D.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Assign"}),(0,L.jsx)(D.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Status"}),(0,L.jsx)(D.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Actions"}),(0,L.jsx)(D.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Details"})]})}),(0,L.jsx)(E.A,{children:e.Tasks.map(e=>(0,L.jsxs)(I.A,{sx:{backgroundColor:"#BBE6F6","&:hover":{backgroundColor:"#a8dff0"}},children:[(0,L.jsx)(D.A,{children:(0,L.jsx)(d.A,{fontWeight:"bold",children:(null===e||void 0===e?void 0:e.Task_Name)||"DEFAULT TASK"})}),(0,L.jsx)(D.A,{children:(0,L.jsx)(d.A,{variant:"body2",children:e.Task_Desc||"No description"})}),(0,L.jsx)(D.A,{children:(0,L.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,L.jsx)(d.A,{children:e.Task_Type||"No Type"}),(0,L.jsx)(i.A,{onClick:()=>{return s=e,je(!0),$(s),void ye(!0);var s},size:"small",sx:{color:"#1976d2"},children:(0,L.jsx)(_.A,{fontSize:"small"})})]})}),(0,L.jsx)(D.A,{children:e.AssignedEmployees&&Array.isArray(e.AssignedEmployees)&&e.AssignedEmployees.length>0?(0,L.jsx)(r.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.AssignedEmployees.map((e,s)=>(0,L.jsx)(n.A,{label:e.Name,variant:"outlined",size:"small",sx:{margin:"1px",color:"green",borderColor:"green"}},s))}):(0,L.jsx)(d.A,{variant:"body2",color:"textSecondary",fontStyle:"italic",children:"No Employees Assigned"})}),(0,L.jsx)(D.A,{children:(0,L.jsx)(i.A,{onClick:()=>(async e=>{H(e),R(!0)})(e),sx:{color:"#2e7d32"},children:(0,L.jsx)(w.A,{})})}),(0,L.jsx)(D.A,{children:(0,L.jsx)(n.A,{label:e.TaskSchStatus||"New",color:"Completed"===e.TaskSchStatus?"success":"In Progress"===e.TaskSchStatus?"warning":"default",size:"small"})}),(0,L.jsx)(D.A,{children:(0,L.jsx)(i.A,{onClick:()=>(H(e),void ce(!0)),sx:{color:"#ed6c02"},children:(0,L.jsx)(_.A,{})})}),(0,L.jsx)(D.A,{children:(0,L.jsx)(i.A,{onClick:()=>(async e=>{if(J(!0),e.Task_Id&&o)try{const s=await(0,k.z)({address:"masters/employeedetails/assignedTaskDetails?Task_Id=".concat(e.Task_Id,"&ProjectId=").concat(o,"&LevelId=").concat(e.Task_Levl_Id)});s.success?V(s.data):console.error(s.message)}catch(s){console.error("Error fetching task details:",s)}else A.oR.error("Task ID and Project ID are required")})(e),sx:{color:"#1976d2"},children:(0,L.jsx)(P.A,{})})})]},"".concat(e.Task_Id,"-").concat(e.Task_Levl_Id,"-").concat(e.A_Id)))})]})}):(0,L.jsxs)(r.A,{sx:{textAlign:"center",p:3,backgroundColor:"#f5f5f5",borderRadius:1,border:"1px dashed #ccc"},children:[(0,L.jsx)(d.A,{variant:"h6",color:"textSecondary",gutterBottom:!0,children:"No Tasks Available"}),(0,L.jsxs)(d.A,{variant:"body2",color:"textSecondary",children:["There are no tasks assigned to the ",(0,L.jsx)("strong",{children:e.SchType})," schedule type."]})]})]},"".concat(e.SchTypeId||s,"-").concat(s)))]},s)})}),(0,L.jsx)(h.A,{sx:{marginTop:"auto ",position:"sticky",bottom:0},children:(0,L.jsx)(c.A,{variant:"contained",color:"primary",onClick:async()=>{t(!1),$({})},children:"Close"})})]}),(0,L.jsxs)(u.A,{open:S,fullWidth:!0,maxWidth:"sm",PaperProps:{style:{borderRadius:"8px"}},children:[(0,L.jsx)(p.A,{children:"Assign Task"}),(0,L.jsxs)(x.A,{children:[(0,L.jsx)("div",{style:{padding:"1px",display:"flex"},children:(0,L.jsx)("div",{style:{padding:"1px",display:"flex"},children:(0,L.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:[(0,L.jsx)("label",{htmlFor:"task-group",style:{marginRight:"6px"},children:"Task Group"}),(0,L.jsx)("select",{id:"task-group",value:(null===g||void 0===g?void 0:g.Task_Type_Id)||"",className:"cus-inpt",disabled:!0,style:{flex:1,marginRight:"8px",backgroundColor:"#f5f5f5",color:"#666",cursor:"not-allowed"},children:(0,L.jsx)("option",{value:null===g||void 0===g?void 0:g.Task_Type_Id,children:null===g||void 0===g?void 0:g.Task_Type})})]})})}),(0,L.jsx)("div",{style:{padding:"1px",display:"flex"},children:(0,L.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:[(0,L.jsx)("label",{htmlFor:"task-select",style:{marginRight:"8px"},children:"Select Task"}),(0,L.jsxs)("select",{id:"task-select",value:Y.Task_Id||"",className:"cus-inpt",required:!0,onChange:e=>(async e=>{$(s=>(0,a.A)((0,a.A)({},s),{},{Task_Id:e.value,TasksGet:e.label}));try{const s=await(0,k.z)({address:"taskManagement/tasks/tasklistsid?Task_Id=".concat(e.value)});if(s.success){const e=s.data;$(s=>(0,a.A)((0,a.A)({},s),{},{Task_Levl_Id:e.Task_Levl_Id,Task_Name:e.Task_Name,Task_Desc:e.Task_Desc,Task_Group_Id:e.Task_Group_Id,Sch_Type_Id:e.Sch_Type_Id,Task_Sch_Duaration:e.Task_Sch_Duaration||"",Task_Start_Time:e.Task_Start_Time||(new Date).toISOString(),Task_End_Time:e.Task_End_Time||(new Date).toISOString(),Task_Est_Start_Date:e.Task_Est_Start_Date||(new Date).toISOString(),Task_Est_End_Date:e.Task_Est_End_Date||(new Date).toISOString()}))}else A.oR.error("Failed to fetch task details")}catch(s){A.oR.error(s)}})({value:e.target.value}),style:{flex:1,marginRight:"8px"},children:[(0,L.jsx)("option",{value:"",disabled:!0,children:"- select -"}),Ce.map((e,s)=>(0,L.jsx)("option",{value:e.value,children:e.label},s))]}),(0,L.jsx)(i.A,{onClick:()=>v(!0),children:(0,L.jsx)(c.A,{variant:"contained",color:"primary",children:"Create New"})})]})}),(0,L.jsx)("div",{style:{padding:"1px",display:"flex"},children:(0,L.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:[(0,L.jsx)("label",{style:{marginRight:"8px"},children:"Sch_Type"}),(0,L.jsxs)("select",{value:Y.Sch_Type_Id||"",onChange:Ne,className:"cus-inpt",required:!0,style:{marginLeft:"10px"},children:[(0,L.jsx)("option",{value:"",disabled:!0,children:"- Sch_Type -"}),ke.map((e,s)=>(0,L.jsx)("option",{value:e.Sch_Type_Id,children:e.Sch_Type},s))]})]})})]}),(0,L.jsxs)(h.A,{children:[(0,L.jsx)(c.A,{onClick:()=>F(!1),children:"Cancel"}),(0,L.jsx)(c.A,{variant:"contained",color:"primary",onClick:async()=>{if(!Y.Task_Id||!Y.Sch_Type_Id)return void A.oR.error("Please select a task and schedule type before saving.");console.log("taskScheduleInput.Task_Est_End_Date",null===g||void 0===g?void 0:g.Task_Type_Id);const e={entryBy:oe,Project_Id:o,Sch_Type_Id:Y.Sch_Type_Id,Sch_Est_Start_Date:Y.Task_Est_Start_Date,Sch_Est_End_Date:Y.Task_Est_End_Date,tasks:[(0,a.A)((0,a.A)({},Y),{},{Task_Group_Id:null===g||void 0===g?void 0:g.Task_Type_Id})]};try{const s=await(0,k.z)({address:"taskManagement/project/schedule/createNewTaskWithSchedule",method:"POST",bodyData:e});s.success?(A.oR.success(s.message),F(!1),$({}),fe(),j()):(s.status,A.oR.warn(s.message||"Task already exists for this project."))}catch(s){A.oR.error(s)}},children:"Save"})]})]}),(0,L.jsx)(U.A,{open:z,onClose:()=>R(!1),task:O,projectId:o,entryBy:oe,taskId:O,reload:m,onReload:j}),(0,L.jsxs)(u.A,{open:le,onClose:()=>ne(!1),children:[(0,L.jsx)(p.A,{children:"Delete Task"}),(0,L.jsx)(h.A,{children:(0,L.jsx)(c.A,{onClick:()=>ne(!1),color:"primary",children:"Cancel"})})]}),(0,L.jsx)(G,{openAction:y,onCloseFun:()=>v(!1),onTaskAdded:be,Reload:m,Task_Type_Id:null===g||void 0===g?void 0:g.Task_Type_Id,Task_Type:null===g||void 0===g?void 0:g.Task_Type}),(0,L.jsx)(G,{row:O,openAction:de,onCloseFun:()=>ce(!1),reload:fe,Reload:m}),(0,L.jsx)(K,{open:q,onClose:()=>J(!1),taskDetails:W})]})};var ee=t(58471),se=t(48471);const te=()=>{const[e,s]=(0,l.useState)(!1),[t,b]=(0,l.useState)([]),[f,C]=(0,l.useState)([]),{contextObj:N}=(0,l.useContext)(T.i),[I,D]=(0,l.useState)(!1),[E,w]=(0,l.useState)(null),[P,F]=(0,l.useState)(!1),[z,R]=(0,l.useState)(0),[O,H]=(0,l.useState)(!1),[B,M]=(0,l.useState)(null),[W,V]=(0,l.useState)(!1),[G,U]=(0,l.useState)(!1),[q,J]=(0,l.useState)(!1),[Y,K]=(0,l.useState)([]),[Q,X]=(0,l.useState)(!1),Z=JSON.parse(localStorage.getItem("user"));(0,l.useEffect)(()=>{ae(),le()},[null===Z||void 0===Z?void 0:Z.Company_id,e]);const te=()=>{s(e=>!e)},ae=async()=>{try{let e="";e="ADMIN"==(null===Z||void 0===Z?void 0:Z.UserType)||0==(null===Z||void 0===Z?void 0:Z.UserTypeId)||1==(null===Z||void 0===Z?void 0:Z.UserTypeId)?"":(null===Z||void 0===Z?void 0:Z.UserId)||"";const s=await(0,k.z)({address:"taskManagement/project/newProjectAbstract?Company_id=".concat(null===Z||void 0===Z?void 0:Z.Company_id,"&EmpId=").concat(e)});b(s.success?s.data:[])}catch(e){console.error(e),b([])}},le=async()=>{try{const e=await(0,k.z)({address:"taskManagement/project?Company_id=".concat(null===Z||void 0===Z?void 0:Z.Company_id)});C(e.success?e.data:[])}catch(e){console.error(e),C([])}},ne=e=>{w(e),R(e.Project_Id),U(!0)},re=()=>{D(!1),U(!1),w(null),M(null),H(!1),J(!1),X(!1)},oe=t.map(e=>{const s=f.find(s=>s.Project_Id===e.Project_Id);return(0,a.A)((0,a.A)({},e),{},{Project_Head_Name:(null===s||void 0===s?void 0:s.Project_Head_Name)||"N/A",Status_Text:(null===s||void 0===s?void 0:s.Status)||e.Status||"N/A",Progress_Percentage:(t=e.TodayTaskcounts,l=e.CompletedTasks,0===Number(t)?0:(Number(l)/Number(t)*100).toFixed(0))});var t,l}),ie=[(0,se.Lj)("Task_Type","string","Task Type","left","center",1),{Field_Name:"Est_StartTime",ColumnHeader:"Start Date",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:s}=e;return s.Est_StartTime?s.Est_StartTime.split("T")[0]:"N/A"}},{Field_Name:"Est_EndTime",ColumnHeader:"End Date",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:s}=e;return s.Est_EndTime?s.Est_EndTime.split("T")[0]:"N/A"}},{Field_Name:"Status",ColumnHeader:"Status",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:s}=e;return(0,L.jsx)(n.A,{label:1===s.Status?"Active":"Inactive",color:1===s.Status?"success":"default",size:"small"})}},{Field_Name:"View Task",ColumnHeader:"View Task",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:s}=e;return(0,L.jsx)(r.A,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"center"},children:(0,L.jsx)(o.A,{title:"View Task Details",children:(0,L.jsx)(i.A,{size:"small",onClick:()=>ne((0,a.A)((0,a.A)({},s),{},{Project_Name:s.Project_Name||"Task"})),children:(0,L.jsx)(m.A,{fontSize:"small"})})})})}},...1===Number(null===N||void 0===N?void 0:N.Add_Rights)?[{Field_Name:"Actions",ColumnHeader:"Actions",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:s}=e;return(0,L.jsx)(r.A,{sx:{display:"flex",gap:.5,justifyContent:"center"},children:1===Number(null===N||void 0===N?void 0:N.Edit_Rights)&&(0,L.jsx)(o.A,{title:"Edit Task Type",children:(0,L.jsx)(i.A,{size:"small",onClick:()=>(e=>{var s;const t={ProjectId:e.Project_Id,ProjectName:e.Project_Name,Est_StartDate:e.Est_StartTime?new Date(e.Est_StartTime).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],Est_EndDate:e.Est_EndTime?new Date(e.Est_EndTime).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],Day_Duration:e.Day_Duration,Task_Type:e.Task_Type,Task_Type_Id:e.Task_Type_Id,Status:(null===(s=e.Status)||void 0===s?void 0:s.toString())||"1"};K(t),X(!0),J(!0)})(s),children:(0,L.jsx)(_.A,{fontSize:"small"})})})})}}]:[]],de=s=>{let{row:t}=s;const[a,n]=(0,l.useState)(!0),o=t.TaskTypes||[];return(0,l.useEffect)(()=>{n(!0)},[o.length,e]),a?(0,L.jsxs)(r.A,{sx:{padding:2,backgroundColor:"#f8f9fa",margin:1,borderRadius:1},children:[(0,L.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,L.jsxs)(d.A,{variant:"h6",sx:{fontSize:"16px",fontWeight:"bold"},children:["Modules for ",t.Project_Name]}),(0,L.jsx)(c.A,{variant:"outlined",size:"small",startIcon:(0,L.jsx)(j.A,{}),onClick:()=>{(e=>{const s={ProjectId:e.Project_Id,ProjectName:e.Project_Name,Est_StartDate:e.Est_Start_Dt?new Date(e.Est_Start_Dt).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],Est_EndDate:e.Est_End_Dt?new Date(e.Est_End_Dt).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],Day_Duration:"",Task_Type:"",Task_Type_Id:"",Status:"1"};K(s),X(!1),J(!0)})(t),n(!0)},sx:{textTransform:"none"},children:"Add Task Type"})]}),(0,L.jsx)(se.Ay,{title:"Modules",dataArray:o,EnableSerialNumber:!0,columns:ie,ButtonArea:null,isExpendable:!1,tableMaxHeight:300})]}):null},ce=[(0,se.Lj)("Project_Name","string","Project","left","center",1),(0,se.Lj)("Project_Head_Name","string","Head","left","center",1),(0,se.Lj)("Status_Text","string","Status","left","center",1),{Field_Name:"Est_Start_Dt",ColumnHeader:"Start Date",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:s}=e;return s.Est_Start_Dt?new Date(s.Est_Start_Dt).toLocaleDateString("en-IN"):"N/A"}},{Field_Name:"Est_End_Dt",ColumnHeader:"End Date",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:s}=e;return s.Est_End_Dt?new Date(s.Est_End_Dt).toLocaleDateString("en-IN"):"N/A"}},{Field_Name:"Progress_Percentage",ColumnHeader:"Progress",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:s}=e;return(0,L.jsxs)(d.A,{variant:"body2",fontWeight:"bold",children:[s.Progress_Percentage,"%"]})}},{Field_Name:"Task_Details",ColumnHeader:"Task Details",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:s}=e;return(0,L.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:.5},children:[(0,L.jsxs)(d.A,{variant:"h6",fontWeight:"bold",children:[s.CompletedTasks||0," / ",s.TodayTaskcounts||0,(0,L.jsx)(o.A,{title:"View Task Details",children:(0,L.jsx)(i.A,{size:"small",onClick:()=>ne(s),sx:{mt:.5}})})]}),(0,L.jsx)(d.A,{variant:"caption",color:"textSecondary",children:"Completed / Total"})]})}},{Field_Name:"Employees",ColumnHeader:"Employees",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:s}=e;return(0,L.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"center"},children:[1===Number(null===N||void 0===N?void 0:N.Add_Rights)&&(0,L.jsx)(o.A,{title:"Manage Employees",children:(0,L.jsx)(i.A,{size:"small",onClick:()=>(e=>{R(e),V(!0)})(s.Project_Id),children:(0,L.jsx)(g.A,{fontSize:"small"})})}),(0,L.jsx)(d.A,{variant:"body2",children:s.EmployeesInvolved})]})}},...1===Number(null===N||void 0===N?void 0:N.Add_Rights)?[{Field_Name:"Actions",ColumnHeader:"Actions",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:s}=e;return(0,L.jsxs)(r.A,{sx:{display:"flex",gap:.5,justifyContent:"center"},children:[1===Number(null===N||void 0===N?void 0:N.Edit_Rights)&&(0,L.jsx)(o.A,{title:"Edit Project",children:(0,L.jsx)(i.A,{size:"small",onClick:()=>(w(s),F(!0),void D(!0)),children:(0,L.jsx)(_.A,{fontSize:"small"})})}),1===Number(null===N||void 0===N?void 0:N.Edit_Rights)&&(0,L.jsx)(o.A,{title:"Delete Project",children:(0,L.jsx)(i.A,{size:"small",color:"error",onClick:()=>(M(s),void H(!0)),children:(0,L.jsx)(y.A,{fontSize:"small"})})})]})}}]:[]];return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(se.Ay,{title:"Active Projects",dataArray:oe,EnableSerialNumber:!0,columns:ce,ButtonArea:(0,L.jsx)(L.Fragment,{children:1===Number(null===N||void 0===N?void 0:N.Add_Rights)&&(0,L.jsx)(c.A,{variant:"outlined",startIcon:(0,L.jsx)(j.A,{}),onClick:()=>{w(null),F(!1),D(!0)},children:"Create Project"})}),isExpendable:!0,tableMaxHeight:550,expandableComp:e=>(0,L.jsx)(de,(0,a.A)({},e))}),(0,L.jsx)($,{onClose:re,dialogOpen:G,setDialogOpen:U,isEdit:!1,parseData:Z,projectid:z,onReload:te,selectedProject:E,reload:e}),(0,L.jsx)(v.A,{open:I,onClose:re,inputValue:E,isEdit:P,setReload:te,projectData:z}),(0,L.jsx)(S.A,{open:W,onClose:()=>V(!1),projectId:z,onReload:te}),(0,L.jsx)(ee.A,{open:q,onClose:()=>J(!1),existingTaskType:Y,onCreate:async t=>{try{const a=await(0,k.z)({address:"masters/taskType",method:"POST",headers:{"Content-Type":"application/json"},bodyData:{Mode:1,Task_Type:t.Task_Type,Project_Id:parseInt(t.ProjectId)||parseInt(t.Project_Id),Est_StartTime:t.Est_StartDate,Est_EndTime:t.Est_EndDate,Status:parseInt(t.Status),Day_Duration:parseInt(t.Day_Duration)}});a.success?(s(!e),A.oR.success("Task type created successfully!"),J(!1)):A.oR.error("Failed to create task type: "+a.message)}catch(a){console.error(a),A.oR.error("Error creating task type.")}},onUpdate:async t=>{console.log("updatedTaskyTyupe",t);try{const a=await(0,k.z)({address:"masters/taskType",method:"PUT",headers:{"Content-Type":"application/json"},bodyData:{Mode:2,Task_Type_Id:parseInt(t.Task_Type_Id),Task_Type:t.Task_Type,Project_Id:parseInt(t.Project_Id),Est_StartTime:t.Est_StartDate,Est_EndTime:t.Est_EndDate,Status:parseInt(t.Status),Day_Duration:parseInt(t.Day_Duration)}});a.success?(s(!e),A.oR.success("Task type updated successfully!"),J(!1)):A.oR.error("Failed to update task type: "+a.message)}catch(a){console.error(a),A.oR.error("Error updating task type.")}},isEdit:Q}),(0,L.jsxs)(u.A,{open:O,onClose:re,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[(0,L.jsx)(p.A,{className:"bg-primary text-white mb-2 px-3 py-2",children:"Confirmation"}),(0,L.jsxs)(x.A,{className:"p-4",children:["Do you want to delete the project",(0,L.jsx)("span",{className:"text-primary",children:" "+(null===B||void 0===B?void 0:B.Project_Name)+" "}),"?"]}),(0,L.jsxs)(h.A,{children:[(0,L.jsx)("button",{onClick:()=>H(!1),className:"btn btn-secondary fa-13 shadow",children:"Cancel"}),(0,L.jsx)("button",{onClick:()=>{B&&(0,k.z)({address:"taskManagement/project",method:"DELETE",bodyData:{Project_Id:null===B||void 0===B?void 0:B.Project_Id}}).then(t=>{t.success?(s(!e),A.oR.success(t.message)):A.oR.error(t.message)}).catch(e=>console.error("Fetch Error:",e)),H(!1)},className:"btn btn-danger fa-13 shadow",children:"Delete"})]})]})]})}},48471:(e,s,t)=>{t.d(s,{Ay:()=>O,JT:()=>z,Lj:()=>P,wF:()=>F});var a=t(89379),l=t(65043),n=t(77739),r=t(17392),o=t(41020),i=t(30922),d=t(32143),c=t(2050),u=t(48734),p=t(28076),x=t(39652),h=t(12110),m=t(63336),_=t(79650),j=t(71806),g=t(84882),y=t(58093),A=t(73460),T=t(31159),k=t(97707),v=t(47968),S=t(692),b=t(8737),f=t(58558),C=t(30599),N=t(433),I=t(37762),D=(t(20557),t(11238)),E=t(70579);const w=(e,s)=>e.map(e=>{const t={};return s.forEach((s,a)=>{if(s.isVisible||s.Defult_Display)if(s.isCustomCell&&s.Cell){const l=s.Cell({row:e}),n=s.ColumnHeader?String(s.ColumnHeader).replace(/\s+/g,"_").toLowerCase():"field_".concat(a+1);"string"!==typeof l&&"number"!==typeof l&&"bigint"!==typeof l||(t[n]=l)}else{let a=s.Field_Name;t[a]=e[a]||""}}),t}),P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,a.A)({isVisible:r,Field_Name:e,Fied_Data:s,align:l,verticalAlign:n},t&&{ColumnHeader:t})},F=e=>{let{buttonsData:s=[],ToolTipText:t="Options"}=e;const[a,p]=(0,l.useState)(null),x=Boolean(a);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(n.A,{title:t,children:(0,E.jsx)(r.A,{"aria-describedby":x,onClick:e=>{p(e.currentTarget)},className:"ms-2",size:"small",children:(0,E.jsx)(f.A,{})})}),(0,E.jsx)(o.Ay,{open:x,anchorEl:a,onClose:()=>{p(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,E.jsx)(i.A,{children:s.map((e,s)=>(0,E.jsxs)(d.A,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,E.jsx)(c.A,{children:null===e||void 0===e?void 0:e.icon}),(0,E.jsx)(u.A,{children:null===e||void 0===e?void 0:e.name})]},s))})})]})},z=(e,s)=>{switch(s){case"number":return e?(0,k.jG)(e):e;case"date":return e?(0,k.yc)(e):e;case"time":return e?(0,k.JG)(e):e;case"string":return e;default:return""}},R=e=>{let{dataArray:s=[],columns:t=[],onClickFun:n=null,isExpendable:o=!1,expandableComp:i=null,tableMaxHeight:d=550,initialPageCount:c=20,EnableSerialNumber:u=!1,CellSize:f="small",disablePagination:P=!1,title:R="",PDFPrintOption:O=!1,ExcelPrintOption:H=!1,maxHeightOption:B=!1,ButtonArea:M=null,MenuButtons:L=[],bodyFontSizePx:W=13,headerFontSizePx:V=13}=e;const[G,U]=(0,l.useState)(0),[q,J]=(0,l.useState)(c),[Y,K]=(0,l.useState)([]),[Q,X]=(0,l.useState)(!0),Z=Q&&B?" max-content ":d,$=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],ee=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],se=(e=>{if(!Y.length)return e;return[...e].sort((e,s)=>{for(const t of Y){const{columnId:a,direction:l}=t,n=e[a],r=s[a];if(n!==r)return"asc"===l?n>r?1:-1:n<r?1:-1}return 0})})(s),te=G*q,ae=te+q,le=se.slice(te,ae),ne=e=>{let{row:s,index:a}=e;const[d,c]=(0,l.useState)(!1),h="20px";return(0,E.jsxs)(l.Fragment,{children:[(0,E.jsxs)(p.A,{children:[!0===o&&i&&(0,E.jsx)(x.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(W,"px")},children:(0,E.jsx)(r.A,{size:"small",onClick:()=>c(e=>!e),children:d?(0,E.jsx)(b.A,{sx:{fontSize:h}}):(0,E.jsx)(S.A,{sx:{fontSize:h}})})}),!0===u&&(0,E.jsx)(x.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(W,"px")},children:q*G+a+1}),null===t||void 0===t?void 0:t.map((e,t)=>{var l,r;const o=(0,k.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,k.id)(null===e||void 0===e?void 0:e.isVisible,1),i=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,d=!i,c=(s,t,a)=>null!==e&&void 0!==e&&e.tdClass?" ".concat(null===e||void 0===e?void 0:e.tdClass({row:s,Field_Name:t,index:a})," "):"",u=e.align?null===(l=$.find(s=>s.type===String(e.align).toLowerCase()))||void 0===l?void 0:l.class:"",p=e.verticalAlign?null===(r=ee.find(s=>s.type===String(e.verticalAlign).toLowerCase()))||void 0===r?void 0:r.class:" vctr ";if(o&&d){const l=Object.entries(s).find(s=>{let[t]=s;return t===e.Field_Name});return(0,E.jsx)(x.A,{className:"border-end ".concat(u," ").concat(p," ").concat(c(s,e.Field_Name,a)),sx:{fontSize:"".concat(W,"px")},onClick:()=>n?n(s):console.log("Function not supplied"),children:l?z(l[1],null===e||void 0===e?void 0:e.Fied_Data):"-"},t)}return o&&i?(0,E.jsx)(x.A,{className:"border-end ".concat(u," ").concat(p," ").concat(c(s,e.Field_Name,a)),sx:{fontSize:"".concat(W,"px")},children:e.Cell({row:s,Field_Name:e.Field_Name,index:a})},t):(0,E.jsx)(x.A,{sx:{fontSize:"".concat(W,"px")},className:"border-end ".concat(u," ").concat(p),children:"-"},t)})]}),!0===o&&i&&d&&(0,E.jsx)(p.A,{children:(0,E.jsx)(x.A,{colSpan:Number(null===t||void 0===t?void 0:t.length)+(!0===u?2:1),children:i({row:s,index:a})})})]})};return(0,E.jsxs)(h.A,{className:"rounded-3 bg-white overflow-hidden",component:m.A,children:[(0,E.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(O||H||L.length>0||B)&&(0,E.jsx)(F,{ToolTipText:"Table Options",buttonsData:[...B?[{name:"Max Height",icon:Q?(0,E.jsx)(N.A,{fontSize:"small",color:"primary"}):(0,E.jsx)(C.A,{fontSize:"small"}),onclick:()=>X(e=>!e),disabled:(0,k.id)(null===s||void 0===s?void 0:s.length,0)}]:[],...O?[{name:"PDF Print",icon:(0,E.jsx)(v.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,s)=>{try{const t=new I.default,l=w(e,s),n=s.filter(e=>e.isVisible||e.Defult_Display).map(e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase()),r=l.map(e=>n.map(s=>e[s])).map((e,s)=>(0,a.A)((0,a.A)({},e),{},{Sno:s+1}));t.autoTable({head:[n],body:r}),t.save("table.pdf")}catch(t){console.error(t)}})(s,t),disabled:(0,k.id)(null===s||void 0===s?void 0:s.length,0)}]:[],...H?[{name:"Excel Print",icon:(0,E.jsx)(v.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,s)=>{try{const t=w(e,s),a=D.Wp.json_to_sheet(t),l=D.Wp.book_new();D.Wp.book_append_sheet(l,a,"Data"),D._h(l,"table.xlsx")}catch(t){console.error(t)}})(s,t),disabled:(0,k.id)(null===s||void 0===s?void 0:s.length,0)}]:[],...L]}),M&&M,R&&(0,E.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:R})]}),(0,E.jsx)(_.A,{sx:{maxHeight:Z},children:(0,E.jsxs)(j.A,{stickyHeader:!0,size:f,children:[(0,E.jsx)(g.A,{children:(0,E.jsxs)(p.A,{children:[o&&i&&(0,E.jsx)(x.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:"#"}),u&&(0,E.jsx)(x.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:"SNo"}),t.map((e,s)=>{const t=(0,k.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,k.id)(null===e||void 0===e?void 0:e.isVisible,1),l=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,n=Y.find(s=>s.columnId===e.Field_Name),r=n?n.direction:"asc";var o,i,d,c;return t?l?(0,E.jsx)(x.A,{className:"fw-bold border-end border-top "+(e.align?null===(o=$.find(s=>s.type===String(e.align).toLowerCase()))||void 0===o?void 0:o.class:""),sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},sortDirection:!!n&&r,children:(0,E.jsx)(y.A,{active:!!n,direction:r,onClick:()=>(e=>{const s=Y.find(s=>s.columnId===e);if(s){const t="asc"===s.direction;K(Y.map(s=>s.columnId===e?(0,a.A)((0,a.A)({},s),{},{direction:t?"desc":"asc"}):s))}else K([...Y,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(i=e.Field_Name)||void 0===i?void 0:i.replace(/_/g," "))})},s):(0,E.jsx)(x.A,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(d=$.find(s=>s.type===String(e.align).toLowerCase()))||void 0===d?void 0:d.class:""),sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(c=e.Field_Name)||void 0===c?void 0:c.replace(/_/g," "))},s):null})]})}),(0,E.jsxs)(A.A,{children:[(P?se:le).map((e,s)=>(0,E.jsx)(ne,{row:e,index:s},s)),0===s.length&&(0,E.jsx)(p.A,{children:(0,E.jsx)(x.A,{colSpan:t.length+(!0===o&&i?1:0)+(!0===u?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!P&&0!==le.length&&(0,E.jsx)("div",{className:"p-2 pb-0",children:(0,E.jsx)(T.A,{component:"div",count:s.length,page:G,onPageChange:(e,s)=>{U(s)},rowsPerPage:q,onRowsPerPageChange:e=>{J(parseInt(e.target.value,10)),U(0)},rowsPerPageOptions:Array.from(new Set([c,5,20,50,100,200,500])).sort((e,s)=>e-s),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};R.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const O=R}}]);
//# sourceMappingURL=1599.1db41501.chunk.js.map