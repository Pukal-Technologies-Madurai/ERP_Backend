"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7964],{48471:(e,t,n)=>{n.d(t,{Ay:()=>E,JT:()=>H,Lj:()=>T,wF:()=>_});var l=n(89379),o=n(65043),i=n(77739),r=n(17392),a=n(41020),s=n(30922),c=n(32143),d=n(2050),u=n(48734),p=n(28076),m=n(39652),x=n(12110),h=n(63336),A=n(79650),g=n(71806),v=n(84882),f=n(58093),b=n(73460),j=n(31159),C=n(97707),y=n(47968),F=n(692),S=n(8737),D=n(58558),w=n(30599),P=n(433),N=n(37762),k=(n(20557),n(11238)),z=n(70579);const R=(e,t)=>e.map(e=>{const n={};return t.forEach((t,l)=>{if(t.isVisible||t.Defult_Display)if(t.isCustomCell&&t.Cell){const o=t.Cell({row:e}),i=t.ColumnHeader?String(t.ColumnHeader).replace(/\s+/g,"_").toLowerCase():"field_".concat(l+1);"string"!==typeof o&&"number"!==typeof o&&"bigint"!==typeof o||(n[i]=o)}else{let l=t.Field_Name;n[l]=e[l]||""}}),n}),T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,l.A)({isVisible:r,Field_Name:e,Fied_Data:t,align:o,verticalAlign:i},n&&{ColumnHeader:n})},_=e=>{let{buttonsData:t=[],ToolTipText:n="Options"}=e;const[l,p]=(0,o.useState)(null),m=Boolean(l);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(i.A,{title:n,children:(0,z.jsx)(r.A,{"aria-describedby":m,onClick:e=>{p(e.currentTarget)},className:"ms-2",size:"small",children:(0,z.jsx)(D.A,{})})}),(0,z.jsx)(a.Ay,{open:m,anchorEl:l,onClose:()=>{p(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,z.jsx)(s.A,{children:t.map((e,t)=>(0,z.jsxs)(c.A,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,z.jsx)(d.A,{children:null===e||void 0===e?void 0:e.icon}),(0,z.jsx)(u.A,{children:null===e||void 0===e?void 0:e.name})]},t))})})]})},H=(e,t)=>{switch(t){case"number":return e?(0,C.jG)(e):e;case"date":return e?(0,C.yc)(e):e;case"time":return e?(0,C.JG)(e):e;case"string":return e;default:return""}},L=e=>{let{dataArray:t=[],columns:n=[],onClickFun:i=null,isExpendable:a=!1,expandableComp:s=null,tableMaxHeight:c=550,initialPageCount:d=20,EnableSerialNumber:u=!1,CellSize:D="small",disablePagination:T=!1,title:L="",PDFPrintOption:E=!1,ExcelPrintOption:B=!1,maxHeightOption:O=!1,ButtonArea:I=null,MenuButtons:M=[],bodyFontSizePx:W=13,headerFontSizePx:V=13}=e;const[q,G]=(0,o.useState)(0),[J,K]=(0,o.useState)(d),[Q,U]=(0,o.useState)([]),[X,Y]=(0,o.useState)(!0),Z=X&&O?" max-content ":c,$=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],ee=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],te=(e=>{if(!Q.length)return e;return[...e].sort((e,t)=>{for(const n of Q){const{columnId:l,direction:o}=n,i=e[l],r=t[l];if(i!==r)return"asc"===o?i>r?1:-1:i<r?1:-1}return 0})})(t),ne=q*J,le=ne+J,oe=te.slice(ne,le),ie=e=>{let{row:t,index:l}=e;const[c,d]=(0,o.useState)(!1),x="20px";return(0,z.jsxs)(o.Fragment,{children:[(0,z.jsxs)(p.A,{children:[!0===a&&s&&(0,z.jsx)(m.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(W,"px")},children:(0,z.jsx)(r.A,{size:"small",onClick:()=>d(e=>!e),children:c?(0,z.jsx)(S.A,{sx:{fontSize:x}}):(0,z.jsx)(F.A,{sx:{fontSize:x}})})}),!0===u&&(0,z.jsx)(m.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(W,"px")},children:J*q+l+1}),null===n||void 0===n?void 0:n.map((e,n)=>{var o,r;const a=(0,C.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,C.id)(null===e||void 0===e?void 0:e.isVisible,1),s=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,c=!s,d=(t,n,l)=>null!==e&&void 0!==e&&e.tdClass?" ".concat(null===e||void 0===e?void 0:e.tdClass({row:t,Field_Name:n,index:l})," "):"",u=e.align?null===(o=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===o?void 0:o.class:"",p=e.verticalAlign?null===(r=ee.find(t=>t.type===String(e.verticalAlign).toLowerCase()))||void 0===r?void 0:r.class:" vctr ";if(a&&c){const o=Object.entries(t).find(t=>{let[n]=t;return n===e.Field_Name});return(0,z.jsx)(m.A,{className:"border-end ".concat(u," ").concat(p," ").concat(d(t,e.Field_Name,l)),sx:{fontSize:"".concat(W,"px")},onClick:()=>i?i(t):console.log("Function not supplied"),children:o?H(o[1],null===e||void 0===e?void 0:e.Fied_Data):"-"},n)}return a&&s?(0,z.jsx)(m.A,{className:"border-end ".concat(u," ").concat(p," ").concat(d(t,e.Field_Name,l)),sx:{fontSize:"".concat(W,"px")},children:e.Cell({row:t,Field_Name:e.Field_Name,index:l})},n):(0,z.jsx)(m.A,{sx:{fontSize:"".concat(W,"px")},className:"border-end ".concat(u," ").concat(p),children:"-"},n)})]}),!0===a&&s&&c&&(0,z.jsx)(p.A,{children:(0,z.jsx)(m.A,{colSpan:Number(null===n||void 0===n?void 0:n.length)+(!0===u?2:1),children:s({row:t,index:l})})})]})};return(0,z.jsxs)(x.A,{className:"rounded-3 bg-white overflow-hidden",component:h.A,children:[(0,z.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(E||B||M.length>0||O)&&(0,z.jsx)(_,{ToolTipText:"Table Options",buttonsData:[...O?[{name:"Max Height",icon:X?(0,z.jsx)(P.A,{fontSize:"small",color:"primary"}):(0,z.jsx)(w.A,{fontSize:"small"}),onclick:()=>Y(e=>!e),disabled:(0,C.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...E?[{name:"PDF Print",icon:(0,z.jsx)(y.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const n=new N.default,o=R(e,t),i=t.filter(e=>e.isVisible||e.Defult_Display).map(e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase()),r=o.map(e=>i.map(t=>e[t])).map((e,t)=>(0,l.A)((0,l.A)({},e),{},{Sno:t+1}));n.autoTable({head:[i],body:r}),n.save("table.pdf")}catch(n){console.error(n)}})(t,n),disabled:(0,C.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...B?[{name:"Excel Print",icon:(0,z.jsx)(y.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const n=R(e,t),l=k.Wp.json_to_sheet(n),o=k.Wp.book_new();k.Wp.book_append_sheet(o,l,"Data"),k._h(o,"table.xlsx")}catch(n){console.error(n)}})(t,n),disabled:(0,C.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...M]}),I&&I,L&&(0,z.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:L})]}),(0,z.jsx)(A.A,{sx:{maxHeight:Z},children:(0,z.jsxs)(g.A,{stickyHeader:!0,size:D,children:[(0,z.jsx)(v.A,{children:(0,z.jsxs)(p.A,{children:[a&&s&&(0,z.jsx)(m.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:"#"}),u&&(0,z.jsx)(m.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:"SNo"}),n.map((e,t)=>{const n=(0,C.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,C.id)(null===e||void 0===e?void 0:e.isVisible,1),o=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,i=Q.find(t=>t.columnId===e.Field_Name),r=i?i.direction:"asc";var a,s,c,d;return n?o?(0,z.jsx)(m.A,{className:"fw-bold border-end border-top "+(e.align?null===(a=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===a?void 0:a.class:""),sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},sortDirection:!!i&&r,children:(0,z.jsx)(f.A,{active:!!i,direction:r,onClick:()=>(e=>{const t=Q.find(t=>t.columnId===e);if(t){const n="asc"===t.direction;U(Q.map(t=>t.columnId===e?(0,l.A)((0,l.A)({},t),{},{direction:n?"desc":"asc"}):t))}else U([...Q,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(s=e.Field_Name)||void 0===s?void 0:s.replace(/_/g," "))})},t):(0,z.jsx)(m.A,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(c=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===c?void 0:c.class:""),sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(d=e.Field_Name)||void 0===d?void 0:d.replace(/_/g," "))},t):null})]})}),(0,z.jsxs)(b.A,{children:[(T?te:oe).map((e,t)=>(0,z.jsx)(ie,{row:e,index:t},t)),0===t.length&&(0,z.jsx)(p.A,{children:(0,z.jsx)(m.A,{colSpan:n.length+(!0===a&&s?1:0)+(!0===u?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!T&&0!==oe.length&&(0,z.jsx)("div",{className:"p-2 pb-0",children:(0,z.jsx)(j.A,{component:"div",count:t.length,page:q,onPageChange:(e,t)=>{G(t)},rowsPerPage:J,onRowsPerPageChange:e=>{K(parseInt(e.target.value,10)),G(0)},rowsPerPageOptions:Array.from(new Set([d,5,20,50,100,200,500])).sort((e,t)=>e-t),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};L.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const E=L},59383:(e,t,n)=>{n.d(t,{A:()=>i});var l=n(59662),o=n(70579);const i=(0,l.A)((0,o.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")},67784:(e,t,n)=>{n.d(t,{A:()=>S});var l=n(58168),o=n(98587),i=n(65043),r=n(58387),a=n(68606),s=n(20992),c=n(34535),d=n(6431),u=n(43360),p=n(95516),m=n(74050),x=n(79190),h=n(53193),A=n(81673),g=n(72221),v=n(57056),f=n(32400);function b(e){return(0,f.Ay)("MuiTextField",e)}(0,v.A)("MuiTextField",["root"]);var j=n(70579);const C=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],y={standard:u.A,filled:p.A,outlined:m.A},F=(0,c.Ay)(h.A,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),S=i.forwardRef(function(e,t){const n=(0,d.b)({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:c=!1,children:u,className:p,color:m="primary",defaultValue:h,disabled:v=!1,error:f=!1,FormHelperTextProps:S,fullWidth:D=!1,helperText:w,id:P,InputLabelProps:N,inputProps:k,InputProps:z,inputRef:R,label:T,maxRows:_,minRows:H,multiline:L=!1,name:E,onBlur:B,onChange:O,onFocus:I,placeholder:M,required:W=!1,rows:V,select:q=!1,SelectProps:G,type:J,value:K,variant:Q="outlined"}=n,U=(0,o.A)(n,C),X=(0,l.A)({},n,{autoFocus:c,color:m,disabled:v,error:f,fullWidth:D,multiline:L,required:W,select:q,variant:Q}),Y=(e=>{const{classes:t}=e;return(0,a.A)({root:["root"]},b,t)})(X);const Z={};"outlined"===Q&&(N&&"undefined"!==typeof N.shrink&&(Z.notched=N.shrink),Z.label=T),q&&(G&&G.native||(Z.id=void 0),Z["aria-describedby"]=void 0);const $=(0,s.A)(P),ee=w&&$?"".concat($,"-helper-text"):void 0,te=T&&$?"".concat($,"-label"):void 0,ne=y[Q],le=(0,j.jsx)(ne,(0,l.A)({"aria-describedby":ee,autoComplete:i,autoFocus:c,defaultValue:h,fullWidth:D,multiline:L,name:E,rows:V,maxRows:_,minRows:H,type:J,value:K,id:$,inputRef:R,onBlur:B,onChange:O,onFocus:I,placeholder:M,inputProps:k},Z,z));return(0,j.jsxs)(F,(0,l.A)({className:(0,r.A)(Y.root,p),disabled:v,error:f,fullWidth:D,ref:t,required:W,color:m,variant:Q,ownerState:X},U,{children:[null!=T&&""!==T&&(0,j.jsx)(x.A,(0,l.A)({htmlFor:$,id:te},N,{children:T})),q?(0,j.jsx)(g.A,(0,l.A)({"aria-describedby":ee,id:$,labelId:te,value:K,input:le},G,{children:u})):le,w&&(0,j.jsx)(A.A,(0,l.A)({id:ee},S,{children:w}))]}))})},67964:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var l=n(89379),o=n(65043),i=n(12110),r=n(63336),a=n(17392),s=n(83462),c=n(26600),d=n(35316),u=n(67784),p=n(29347),m=n(11906),x=n(59383),h=n(83560),A=n(48471),g=n(65074),v=n(91036),f=n(70579);const b=e=>{let{loadingOn:t,loadingOff:n}=e;const b=(new Date).toISOString().split("T")[0],[j,C]=(0,o.useState)([]),[y,F]=(0,o.useState)(!1),[S,D]=(0,o.useState)({fromDate:b,toDate:b,FilterDialog:!1}),[w,P]=(0,o.useState)("002700150950519"),N=async()=>{try{F(!0),t&&t();const e=await(0,g.z)({address:"payment/getBankStatement?FromDate=".concat(S.fromDate,"&ToDate=").concat(S.toDate)});e.success?C(e.data||[]):v.oR.error(e.message||"Failed to fetch bank statement")}catch(e){console.error(e),v.oR.error("Error fetching bank statement")}finally{F(!1),n&&n()}};(0,o.useEffect)(()=>{N()},[]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.A,{component:r.A,sx:{p:2},children:(0,f.jsx)(A.Ay,{dataArray:j,EnableSerialNumber:!0,tableMaxHeight:650,maxHeightOption:!0,loading:y,noDataText:"No transactions found for selected date range.",columns:[(0,A.Lj)("TranDate","string","Date"),(0,A.Lj)("TranParticulars","string","Particulars"),(0,A.Lj)("ChequeNum","string","Cheque No",{render:e=>e.ChequeNum||"-"}),(0,A.Lj)("TranType","string","Type",{render:e=>"C"===e.TranType?"Credit":"Debit"}),(0,A.Lj)("Amount","string","Amount",{render:e=>{return(t=e.Amount)?t.replace("Rs.","\u20b9").replace("DR"," (Debit)").replace("CR"," (Credit)"):"-";var t},align:"right"}),(0,A.Lj)("AcctBal","string","Balance",{render:e=>{return(t=e.AcctBal)?t.replace("Rs.","\u20b9").replace("DR"," (Dr)").replace("CR"," (Cr)"):"-";var t},align:"right"}),(0,A.Lj)("Refno","string","Reference",{render:e=>e.Refno||"-"}),{ColumnHeader:"Actions",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,f.jsx)("td",{style:{minWidth:"80px"},children:(0,f.jsx)(a.A,{onClick:()=>(e=>{v.oR.info("Edit row with Ref: ".concat(e.Refno))})(t),size:"small",children:(0,f.jsx)(h.A,{})})})}}],ButtonArea:(0,f.jsx)(a.A,{size:"small",onClick:()=>D(e=>(0,l.A)((0,l.A)({},e),{},{FilterDialog:!0})),children:(0,f.jsx)(x.A,{})})})}),(0,f.jsxs)(s.A,{open:S.FilterDialog,onClose:()=>D(e=>(0,l.A)((0,l.A)({},e),{},{FilterDialog:!1})),fullWidth:!0,maxWidth:"sm",children:[(0,f.jsx)(c.A,{children:"Filter & Sync Bank Statement"}),(0,f.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,f.jsx)(u.A,{label:"From Date",type:"date",value:S.fromDate,onChange:e=>D(t=>(0,l.A)((0,l.A)({},t),{},{fromDate:e.target.value})),InputLabelProps:{shrink:!0}}),(0,f.jsx)(u.A,{label:"To Date",type:"date",value:S.toDate,onChange:e=>D(t=>(0,l.A)((0,l.A)({},t),{},{toDate:e.target.value})),InputLabelProps:{shrink:!0}})]}),(0,f.jsxs)(p.A,{children:[(0,f.jsx)(m.A,{onClick:()=>D(e=>(0,l.A)((0,l.A)({},e),{},{FilterDialog:!1})),children:"Cancel"}),(0,f.jsx)(m.A,{variant:"contained",onClick:N,children:"Search"}),(0,f.jsx)(m.A,{variant:"contained",color:"secondary",onClick:async()=>{try{t&&t();const e={accountNo:w,startDate:S.fromDate.split("-").reverse().join("-"),endDate:S.toDate.split("-").reverse().join("-")},n=await(0,g.z)({address:"payment/syncStatement",method:"POST",bodyData:e,headers:{"Content-Type":"application/json"}});n.success?(v.oR.success(n.message||"Sync successful"),N(),D(e=>(0,l.A)((0,l.A)({},e),{},{FilterDialog:!1}))):v.oR.error(n.message||"Sync failed")}catch(e){console.error(e),v.oR.error("Error during sync")}finally{n&&n()}},children:"Sync"})]})]})]})}},83560:(e,t,n)=>{n.d(t,{A:()=>i});var l=n(59662),o=n(70579);const i=(0,l.A)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=7964.b6331671.chunk.js.map