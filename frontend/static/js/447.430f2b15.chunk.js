"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[447],{6671(e,a,t){t.r(a),t.d(a,{default:()=>h});var s=t(89379),o=t(65043),l=(t(92342),t(7204)),n=t(63406),d=t(83005),r=t(5351),i=(t(11987),t(70579));const c=e=>{let{startDate:a,endDate:t,taskActivity:s}=e;const l=(0,o.useRef)(null),n=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(l&&l.current){const e=l.current.getContext("2d"),o=s.map(e=>new Date(e.Work_Dt)),d=s.map(e=>e.Worked_Minutes);n.current&&n.current.destroy(),n.current=new r.Ay(e,{type:"line",data:{labels:o,datasets:[{label:"Worked Minutes",data:d,borderColor:"blue",backgroundColor:"transparent",pointBackgroundColor:"blue",pointRadius:5,pointHoverRadius:7}]},options:{scales:{x:{type:"time",time:{unit:"day",min:a,max:t},title:{display:!0,text:"Date"}},y:{title:{display:!0,text:"Worked Minutes"}}},plugins:{tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";a&&(a+=": "),null!==e.parsed.y&&(a+=e.parsed.y+" minutes");const t=s[e.dataIndex];return t&&(a+=" (".concat(t.Employee_Name,", Time: ").concat(t.Start_Time,"-").concat(t.End_Time,")")),a}}}}}})}return()=>{n.current&&n.current.destroy()}},[a,t,s]),(0,i.jsx)("canvas",{ref:l})};var u=t(12110),m=t(26494),p=t(65074);const h=()=>{const e=localStorage.getItem("user"),a=JSON.parse(e),[t,r]=(0,o.useState)([]),[h,g]=(0,o.useState)([]),[v,b]=(0,o.useState)([]),[k,T]=(0,o.useState)([]),[A,S]=(0,o.useState)([]),x={Emp_Id:null===a||void 0===a?void 0:a.UserId,date:(new Date).toISOString().split("T")[0],EmpGet:null===a||void 0===a?void 0:a.Name},f={Emp_Id:null===a||void 0===a?void 0:a.UserId,From:new Date((new Date).setDate((new Date).getDate()-30)).toISOString().split("T")[0],To:(new Date).toISOString().split("T")[0],EmpGet:null===a||void 0===a?void 0:a.Name,Task_Id:"",TaskGet:""},[E,y]=(0,o.useState)(x),[I,_]=(0,o.useState)(f);return(0,o.useEffect)(()=>{(0,p.z)({address:"taskManagement/task/work?Emp_Id=".concat(E.Emp_Id,"&from=").concat(E.date,"&to=").concat(E.date)}).then(e=>{e.success&&r(e.data)}).catch(e=>console.error(e))},[null===E||void 0===E?void 0:E.Emp_Id,null===E||void 0===E?void 0:E.date]),(0,o.useEffect)(()=>{(0,p.z)({address:"taskManagement/task/assignEmployee/user/dropDown?Company_id=".concat(null===a||void 0===a?void 0:a.Company_id)}).then(e=>{e.success&&b(e.data)}).catch(e=>console.error(e)),(0,p.z)({address:"taskManagement/task/assignEmployee/task/dropDown"}).then(e=>{var a;e.success&&S(e.data),(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.length)>0&&_(a=>(0,s.A)((0,s.A)({},a),{},{Task_Id:e.data[0].Task_Id,TaskGet:e.data[0].Task_Name}))}).catch(e=>console.error(e))},[]),(0,o.useEffect)(()=>{(0,p.z)({address:"taskManagement/task/work/barChart?Emp_Id=".concat(null===I||void 0===I?void 0:I.Emp_Id,"&From=").concat(null===I||void 0===I?void 0:I.From,"&To=").concat(null===I||void 0===I?void 0:I.To,"&Task_Id=").concat(null===I||void 0===I?void 0:I.Task_Id)}).then(e=>{e.success&&g(e.data)}).catch(e=>console.error(e))},[I.Emp_Id,I.From,I.To,I.Task_Id]),(0,o.useEffect)(()=>{T([]),(0,p.z)({address:"taskManagement/task/workedUsers/dropDown?Task_Id=".concat(I.Task_Id)}).then(e=>{e.success&&T(e.data)}).catch(e=>console.error(e))},[null===I||void 0===I?void 0:I.Task_Id]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.A,{children:(0,i.jsxs)(m.A,{style:{minHeight:500},children:[(0,i.jsx)("h5",{children:"User Work Report"}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,i.jsx)(l.Ay,{value:{value:null===E||void 0===E?void 0:E.Emp_Id,label:null===E||void 0===E?void 0:E.EmpGet},onChange:e=>y((0,s.A)((0,s.A)({},E),{},{Emp_Id:e.value,EmpGet:e.label})),options:[{value:"",label:"All Employee"},...v.map(e=>({value:e.UserId,label:e.Name}))],styles:n.MR,isSearchable:!0,placeholder:"Employee Name"})}),(0,i.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,i.jsx)("input",{type:"date",value:E.date,onChange:e=>y((0,s.A)((0,s.A)({},E),{},{date:e.target.value})),className:"cus-inpt bg-test",style:{backgroundColor:"rgba(255, 255, 255, 0.322)"}})})]}),(0,i.jsx)(d.A,{TasksArray:t})]})}),(0,i.jsx)(u.A,{className:"mt-3",children:(0,i.jsxs)(m.A,{style:{minHeight:500},children:[(0,i.jsx)("h5",{children:"Task Activity Report"}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,i.jsx)(l.Ay,{value:{value:null===I||void 0===I?void 0:I.Task_Id,label:null===I||void 0===I?void 0:I.TaskGet},onChange:e=>_((0,s.A)((0,s.A)({},I),{},{Task_Id:e.value,TaskGet:e.label})),options:[...A.map(e=>({value:e.Task_Id,label:e.Task_Name}))],styles:n.MR,isSearchable:!0,placeholder:"Task Name"})}),(0,i.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,i.jsx)(l.Ay,{value:{value:null===I||void 0===I?void 0:I.Emp_Id,label:null===I||void 0===I?void 0:I.EmpGet},onChange:e=>_((0,s.A)((0,s.A)({},I),{},{Emp_Id:e.value,EmpGet:e.label})),options:[{value:"",label:"All Employee"},...k.map(e=>({value:null===e||void 0===e?void 0:e.Emp_Id,label:null===e||void 0===e?void 0:e.Name}))],styles:n.MR,isSearchable:!0,placeholder:"Employee Name"})}),(0,i.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,i.jsx)("input",{type:"date",value:I.From,onChange:e=>_((0,s.A)((0,s.A)({},I),{},{From:e.target.value})),className:"cus-inpt bg-test",style:{backgroundColor:"rgba(255, 255, 255, 0.322)"}})}),(0,i.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-4 col-sm-4 p-2",children:(0,i.jsx)("input",{type:"date",value:I.To,onChange:e=>_((0,s.A)((0,s.A)({},I),{},{To:e.target.value})),className:"cus-inpt bg-test",style:{backgroundColor:"rgba(255, 255, 255, 0.322)"}})})]}),(0,i.jsx)(c,{taskActivity:h,startDate:I.From,endDate:I.To})]})})]})}},63406(e,a,t){t.d(a,{zU:()=>d,ex:()=>r,MR:()=>n,Ap:()=>l,FX:()=>i});var s=t(89379);const o=t.p+"static/media/smt.aa4d4f940bbebff07a57.png",l={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},n={menu:(e,a)=>(0,s.A)((0,s.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,s.A)((0,s.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,s.A)((0,s.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,a)=>(0,s.A)((0,s.A)({},e),{},{backgroundColor:a.isSelected?"#2684FF":a.isFocused?"#E2ECF9":"white",color:a.isSelected?"white":"#333",padding:"10px 12px"})},d=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],r=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:o,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:o,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:o,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],i=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},83005(e,a,t){t.d(a,{A:()=>n});var s=t(65043),o=t(5351),l=(t(59042),t(70579));const n=e=>{let{TasksArray:a}=e;const[t,n]=(0,s.useState)(null),[d,r]=(0,s.useState)(null),[i,c]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(a.length>0){const e=a.reduce((e,a)=>{const t=new Date((new Date).toISOString().split("T")[0]+"T"+a.Start_Time);return e+(new Date((new Date).toISOString().split("T")[0]+"T"+a.End_Time)-t)},0),t=new Date((new Date).toISOString().split("T")[0]+"T"+a[0].Start_Time),s=new Date((new Date).toISOString().split("T")[0]+"T"+a[a.length-1].End_Time)-t,o=s-e,l=Math.floor(s/1e3),d=Math.floor(l/3600),r=Math.floor(l%3600/60),i=l%60;c("".concat(String(d).padStart(2,"0"),":").concat(String(r).padStart(2,"0"),":").concat(String(i).padStart(2,"0")));const m=a.map(e=>{const a=new Date((new Date).toISOString().split("T")[0]+"T"+e.Start_Time),t=new Date((new Date).toISOString().split("T")[0]+"T"+e.End_Time)-a;return{label:"".concat(e.Task_Name," (").concat(e.Start_Time," - ").concat(e.End_Time,")"),duration:t,backgroundColor:u()}}),p={labels:m.map(e=>e.label),datasets:[{data:m.map(e=>e.duration),backgroundColor:m.map(e=>e.backgroundColor),borderColor:"rgba(255, 255, 255, 1)",borderWidth:1}]};p.labels.push("Free Time"),p.datasets[0].data.push(o),p.datasets[0].backgroundColor.push("#ADD8E6"),n(p)}},[a]),(0,s.useEffect)(()=>{if(t){d&&d.destroy();const e=document.getElementById("empWokHours"),a=new o.Ay(e,{type:"pie",data:t,options:{responsive:!0,plugins:{tooltip:{callbacks:{label:function(e){const a=e.parsed||0,t=e.dataset.data.reduce((e,a)=>e+a,0),s=Math.round(a/t*100),o=Math.round(a/6e4);return"".concat(o," minutes (").concat(s,"%)")}}},datalabels:{color:"#fff",formatter:(e,a)=>{const t=a.chart.data.labels[a.dataIndex],s=a.parsed||0,o=a.dataset.data.reduce((e,a)=>e+a,0),l=Math.round(s/o*100);return"".concat(t,": ").concat(e," (").concat(l,"%)")}}}}});r(a)}},[t]);const u=()=>{let e="#";for(let a=0;a<6;a++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};return a.length>0?(0,l.jsxs)("div",{className:"d-flex flex-column align-items-center my-3",style:{maxHeight:"500px"},children:[i&&(0,l.jsxs)("p",{className:"my-2",children:["Total Time: ",i]}),(0,l.jsx)("canvas",{id:"empWokHours",width:"400",height:"100"})]}):(0,l.jsx)("h5",{className:"text-center my-5",children:"No Data For PieChart!"})}}}]);
//# sourceMappingURL=447.430f2b15.chunk.js.map