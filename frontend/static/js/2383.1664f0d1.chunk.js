"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[2383],{12383:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var l=a(89379),i=a(65043),r=a(17392),n=a(11906),d=a(83462),c=a(26600),o=a(35316),s=a(29347),u=a(48471),_=a(73216),y=a(65074),p=a(97707),m=a(34496),v=a(83560),h=a(59383),b=a(79484),A=a(16851),x=a(38198),F=a(20656),j=a(63406),T=a(70579);const g=e=>{var t,a;let{loadingOn:g,loadingOff:f,AddRights:C,EditRights:N,DeleteRights:S,pageID:L}=e;const D=sessionStorage.getItem("filterValues"),I=(0,_.Zp)(),R=(0,_.zy)(),V=R.state||{},E={Fromdate:V.Fromdate||(0,p.ny)(),Todate:V.Todate||(0,p.ny)(),voucherType_Filter:V.VoucherType?{label:(null===(t=V.VoucherType)||void 0===t?void 0:t.label)||V.Voucher_Type||"Selected",value:(null===(a=V.VoucherType)||void 0===a?void 0:a.value)||V.Voucher_Type_Id||""}:{label:"ALL",value:""},debit_accounts_Filter:{label:"ALL",value:""},credit_accounts_Filter:{label:"ALL",value:""},created_by_Filter:{label:"ALL",value:""},payment_status:"",payment_type:""},[P,k]=(0,i.useState)((0,l.A)((0,l.A)({},E),{},{filterDialog:!1})),[w,O]=(0,i.useState)([]),[M,G]=(0,i.useState)({voucherType:[],debit_accounts:[],credit_accounts:[],created_by:[]});(0,i.useEffect)(()=>{if(V.VoucherType){var e,t;const a=(0,p.vU)(L),{debit_accounts_Filter:i=E.debit_accounts_Filter,credit_accounts_Filter:r=E.credit_accounts_Filter,created_by_Filter:n=E.created_by_Filter,payment_status:d=E.payment_status,payment_type:c=E.payment_type}=a;k(e=>{var t,a;return(0,l.A)((0,l.A)({},e),{},{Fromdate:V.Fromdate||e.Fromdate,Todate:V.Todate||e.Todate,voucherType_Filter:V.VoucherType?{label:(null===(t=V.VoucherType)||void 0===t?void 0:t.label)||"Selected",value:(null===(a=V.VoucherType)||void 0===a?void 0:a.value)||""}:e.voucherType_Filter,debit_accounts_Filter:i,credit_accounts_Filter:r,created_by_Filter:n,payment_status:d,payment_type:c})}),(0,p.Mb)({Fromdate:V.Fromdate||E.Fromdate,Todate:V.Todate||E.Todate,pageID:L,voucherType_Filter:V.VoucherType?{label:(null===(e=V.VoucherType)||void 0===e?void 0:e.label)||"Selected",value:(null===(t=V.VoucherType)||void 0===t?void 0:t.value)||""}:E.voucherType_Filter,debit_accounts_Filter:i,credit_accounts_Filter:r,created_by_Filter:n,payment_status:d,payment_type:c})}else{const e=(0,p.vU)(L),{Fromdate:t,Todate:a,voucherType_Filter:i=E.voucherType_Filter,debit_accounts_Filter:r=E.debit_accounts_Filter,credit_accounts_Filter:n=E.credit_accounts_Filter,created_by_Filter:d=E.created_by_Filter,payment_status:c=E.payment_status,payment_type:o=E.payment_type}=e;k(e=>(0,l.A)((0,l.A)({},e),{},{Fromdate:t,Todate:a,voucherType_Filter:i,debit_accounts_Filter:r,credit_accounts_Filter:n,created_by_Filter:d,payment_status:c,payment_type:o}))}},[D,L,R.state]),(0,i.useEffect)(()=>{(0,y.z)({address:"payment/paymentMaster/filtersValues"}).then(e=>{e.success&&G(t=>{var a,i,r,n;return(0,l.A)((0,l.A)({},t),{},{voucherType:(0,p.$r)(null===e||void 0===e||null===(a=e.others)||void 0===a?void 0:a.voucherType),debit_accounts:(0,p.$r)(null===e||void 0===e||null===(i=e.others)||void 0===i?void 0:i.debit_accounts),credit_accounts:(0,p.$r)(null===e||void 0===e||null===(r=e.others)||void 0===r?void 0:r.credit_accounts),created_by:(0,p.$r)(null===e||void 0===e||null===(n=e.others)||void 0===n?void 0:n.created_by)})})})},[]),(0,i.useEffect)(()=>{const e=(0,p.vU)(L),{Fromdate:t,Todate:a,voucherType_Filter:l=E.voucherType_Filter,debit_accounts_Filter:i=E.debit_accounts_Filter,credit_accounts_Filter:r=E.credit_accounts_Filter,created_by_Filter:n=E.created_by_Filter,payment_status:d=E.payment_status,payment_type:c=E.payment_type}=e;(0,y.z)({address:"payment/paymentMaster?\n            Fromdate=".concat(t,"&\n            Todate=").concat(a,"&\n            voucher=").concat((null===l||void 0===l?void 0:l.value)||"","&\n            debit=").concat((null===i||void 0===i?void 0:i.value)||"","&\n            credit=").concat((null===r||void 0===r?void 0:r.value)||"","&\n            createdBy=").concat((null===n||void 0===n?void 0:n.value)||"","&\n            status=").concat(d,"&\n            payment_type=").concat(c),loadingOff:f,loadingOn:g}).then(e=>{e.success&&O(e.data)}).catch(e=>console.error(e))},[D,L]);const U=(0,i.useMemo)(()=>w.filter(e=>!(0,p.id)(e.status,0)).reduce((e,t)=>(0,p.Lr)(e,null===t||void 0===t?void 0:t.debit_amount),0),[w]),z=()=>k(e=>(0,l.A)((0,l.A)({},e),{},{filterDialog:!1})),B=" bg-info fw-bold fa-11 px-2 py-1 rounded-3 ",Q=" bg-warning fw-bold fa-11 px-2 py-1 rounded-3 ",H=" bg-success text-light fa-11 px-2 py-1 rounded-3 ",J=" bg-danger text-light fw-bold fa-11 px-2 py-1 rounded-3 ",W=e=>{switch(e){case 1:return B;case 2:return Q;case 3:return H;case 0:return J;default:return""}};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(u.Ay,{title:"Payments",headerFontSizePx:12,bodyFontSizePx:12,ButtonArea:(0,T.jsxs)(T.Fragment,{children:[V.Fromdate&&V.Todate&&(0,T.jsxs)("span",{className:"mx-2 text-muted fa-12",children:["Showing data from ",new Date(V.Fromdate).toLocaleDateString(),"to ",new Date(V.Todate).toLocaleDateString()]}),V.VoucherType&&(0,T.jsxs)("span",{className:"mx-2 text-muted fa-12",children:["| Voucher Type: ",V.VoucherType.label]}),V.ModuleName&&(0,T.jsxs)("span",{className:"mx-2 text-muted fa-12",children:["| Module: ",V.ModuleName]}),(0,T.jsx)(r.A,{onClick:()=>k(e=>(0,l.A)((0,l.A)({},e),{},{filterDialog:!0})),size:"small",className:"mx-1",children:(0,T.jsx)(h.A,{className:"fa-20"})}),C&&(0,T.jsx)(n.A,{onClick:()=>I("create"),variant:"outlined",children:"Add"}),C&&(0,T.jsx)(n.A,{onClick:()=>I("addReference"),variant:"outlined",className:"me-2",children:"Add Reference"}),(0,T.jsx)("span",{className:"bg-light text-light fa-11 px-1 shadow-sm py-1 rounded-3 mx-1",children:(0,p.Ro)(U)>0&&(0,T.jsxs)("h6",{className:"m-0 text-end text-muted px-3",children:["Total: ",(0,p.jG)(U)]})})]}),dataArray:w,columns:[(0,u.Lj)("payment_date","date","Date"),(0,u.Lj)("payment_invoice_no","string","Payment ID"),(0,u.Lj)("debit_amount","number","Amount"),(0,u.Lj)("TotalReferencedAmount","number","Added Ref"),(0,u.Lj)("debit_ledger_name","string","Debit-Acc"),(0,u.Lj)("credit_ledger_name","string","Credit-Acc"),(0,u.Lj)("Voucher_Type","string","Voucher"),{isVisible:1,ColumnHeader:"Bill Type",isCustomCell:!0,Cell:e=>{var t;let{row:a}=e;return null===(t=x.Gp.find(e=>(0,p.id)(e.value,a.pay_bill_type)))||void 0===t?void 0:t.label}},(0,u.Lj)("remarks","string","Narration"),{isVisible:1,ColumnHeader:"Status",isCustomCell:!0,Cell:e=>{let{row:t}=e;const a=x.DQ.find(e=>(0,p.id)(e.value,null===t||void 0===t?void 0:t.status));return(0,T.jsx)("span",{className:W(a.value),children:String(a.label).replace(" ","")})}},{isVisible:1,ColumnHeader:"Action",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,T.jsx)(u.wF,{buttonsData:[{name:"Edit",icon:(0,T.jsx)(v.A,{}),onclick:()=>I("create",{state:t}),disabled:!N},{name:"Add Reference",icon:(0,T.jsx)(A.A,{}),onclick:()=>I("addReference",{state:t}),disabled:!N||(0,p.id)(t.pay_bill_type,2)||(0,p.id)(t.pay_bill_type,4)}]})}}],EnableSerialNumber:!0}),(0,T.jsxs)(d.A,{open:P.filterDialog,onClose:z,fullWidth:!0,maxWidth:"sm",children:[(0,T.jsx)(c.A,{children:"Filters"}),(0,T.jsx)(o.A,{children:(0,T.jsx)("div",{className:"table-responsive pb-4",children:(0,T.jsx)("table",{className:"table",children:(0,T.jsxs)("tbody",{children:[(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,T.jsx)("td",{children:(0,T.jsx)("input",{type:"date",value:P.Fromdate,onChange:e=>k((0,l.A)((0,l.A)({},P),{},{Fromdate:e.target.value})),className:"cus-inpt"})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,T.jsx)("td",{children:(0,T.jsx)("input",{type:"date",value:P.Todate,onChange:e=>k((0,l.A)((0,l.A)({},P),{},{Todate:e.target.value})),className:"cus-inpt"})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"Debit Account"}),(0,T.jsx)("td",{children:(0,T.jsx)(F.Ay,{value:null===P||void 0===P?void 0:P.debit_accounts_Filter,onChange:e=>k((0,l.A)((0,l.A)({},P),{},{debit_accounts_Filter:e})),options:[{value:"",label:"ALL"},...M.debit_accounts],styles:j.MR,isSearchable:!0,placeholder:"Debit Account",menuPortalTarget:document.body,filterOption:p.GI})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"Credit Account "}),(0,T.jsx)("td",{children:(0,T.jsx)(F.Ay,{value:null===P||void 0===P?void 0:P.credit_accounts_Filter,onChange:e=>k((0,l.A)((0,l.A)({},P),{},{credit_accounts_Filter:e})),options:[{value:"",label:"ALL"},...M.credit_accounts],styles:j.MR,isSearchable:!0,placeholder:"Credit Account",menuPortalTarget:document.body,filterOption:p.GI})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"Payment Type "}),(0,T.jsx)("td",{children:(0,T.jsxs)("select",{className:"cus-inpt p-2",value:P.payment_type,onChange:e=>k(t=>(0,l.A)((0,l.A)({},t),{},{payment_type:e.target.value})),children:[(0,T.jsx)("option",{value:"",children:"ALL"}),x.Gp.map((e,t)=>(0,T.jsx)("option",{value:e.value,children:e.label},t))]})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"Voucher Type "}),(0,T.jsx)("td",{children:(0,T.jsx)(F.Ay,{value:null===P||void 0===P?void 0:P.voucherType_Filter,onChange:e=>k((0,l.A)((0,l.A)({},P),{},{voucherType_Filter:e})),options:[{value:"",label:"ALL"},...M.voucherType],styles:j.MR,isSearchable:!0,placeholder:"Voucher Type",menuPortalTarget:document.body,filterOption:p.GI})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"Payment Status"}),(0,T.jsx)("td",{children:(0,T.jsxs)("select",{type:"date",value:P.payment_status,onChange:e=>k((0,l.A)((0,l.A)({},P),{},{payment_status:e.target.value})),className:"cus-inpt",children:[(0,T.jsx)("option",{value:"",children:"All"}),x.DQ.map((e,t)=>(0,T.jsx)("option",{value:e.value,children:e.label},t))]})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},children:"Created By"}),(0,T.jsx)("td",{children:(0,T.jsx)(F.Ay,{value:null===P||void 0===P?void 0:P.created_by_Filter,onChange:e=>k(t=>(0,l.A)((0,l.A)({},t),{},{created_by_Filter:e})),options:[{value:"",label:"ALL"},...M.created_by],styles:j.MR,isSearchable:!0,placeholder:"Sales Person Name",menuPortalTarget:document.body,filterOption:p.GI})})]})]})})})}),(0,T.jsxs)(s.A,{className:"d-flex align-items-center justify-content-between",children:[(0,T.jsx)(n.A,{variant:"outlined",onClick:()=>{k(e=>(0,l.A)((0,l.A)({},e),E))},startIcon:(0,T.jsx)(m.A,{}),children:"clear"}),(0,T.jsxs)("span",{children:[(0,T.jsx)(n.A,{onClick:z,children:"close"}),(0,T.jsx)(n.A,{onClick:()=>{z(),(0,p.Mb)({Fromdate:null===P||void 0===P?void 0:P.Fromdate,Todate:P.Todate,pageID:L,voucherType_Filter:P.voucherType_Filter,debit_accounts_Filter:P.debit_accounts_Filter,credit_accounts_Filter:P.credit_accounts_Filter,created_by_Filter:P.created_by_Filter,payment_status:P.payment_status,payment_type:P.payment_type})},startIcon:(0,T.jsx)(b.A,{}),variant:"contained",children:"Search"})]})]})]})]})}},38198:(e,t,a)=>{a.d(t,{DQ:()=>s,Gp:()=>c,Pr:()=>d,Xh:()=>n,YK:()=>r,zd:()=>o});var l=a(97707);const i=(0,l.aN)().user,r={pay_id:"",year_id:"",payment_voucher_type_id:"",payment_sno:"",payment_invoice_no:"",payment_date:(0,l.ny)(),pay_bill_type:1,is_new_ref:0,credit_ledger:"",credit_ledger_name:"Select",credit_amount:0,debit_ledger:"",debit_ledger_name:"Select",debit_amount:0,remarks:"",status:1,transaction_type:"",check_no:"",check_date:"",bank_name:"",bank_date:"",created_by:(0,l.IQ)(null===i||void 0===i?void 0:i.UserId)?null===i||void 0===i?void 0:i.UserId:"",altered_by:(0,l.IQ)(null===i||void 0===i?void 0:i.UserId)?null===i||void 0===i?void 0:i.UserId:"",created_on:"",alterd_on:""},n={auto_id:"",created_on:"",payment_id:"",payment_no:"",payment_date:"",bill_type:"",DR_CR_Acc_Id:"",pay_bill_id:"",JournalBillType:"",bill_name:"",bill_ref_number:"",bill_amount:0,Debit_Amo:0,Credit_Amo:0,PurchaseInvoiceDate:"",StockJournalDate:"",TotalPaidAmount:0,PendingAmount:0},d={auto_id:"",payment_id:"",payment_no:"",payment_date:"",bill_type:"",Debit_Ledger_Id:"",created_on:"",pay_bill_id:"",JournalBillType:"",arr_id:"",item_id:"",item_name:"",expence_value:0,itemQuantity:0,PaidAmount:0},c=[{value:1,label:"VENDOR - PURCHASE INVOICE"},{value:2,label:"EXPENCES / OTHERS (IN-DIRECT)"},{value:3,label:"EXPENCES - STOCK JOURNAL (DIRECT)"},{value:4,label:"ON ACCOUNT"}],o=[{label:"MATERIAL INWARD",value:1},{label:"GODOWN TRANSFER",value:2},{label:"PROCESSING",value:3}],s=[{label:"New",value:1},{label:"Process",value:2},{label:"Completed",value:3},{label:"Canceled",value:0}]}}]);
//# sourceMappingURL=2383.1664f0d1.chunk.js.map