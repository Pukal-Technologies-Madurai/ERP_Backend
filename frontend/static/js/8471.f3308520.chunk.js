"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8471],{58471:(e,t,a)=>{a.d(t,{A:()=>_});var r=a(89379),s=a(65043),n=a(83462),o=a(26600),i=a(35316),d=a(29347),l=a(11906),c=a(65074),u=a(91036),p=a(70579);const _=e=>{let{open:t,onClose:a,existingTaskType:_,onCreate:j,onUpdate:m}=e;const[h,v]=(0,s.useState)({Task_Type:"",Task_Type_Id:"",Project_Id:"",ProjectName:"",Day_Duration:"",Hours_Duration:"",Status:"1"}),[x,D]=(0,s.useState)([]),[g,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t&&(async()=>{y(!0);try{var e;const t=(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.Company_id)||1,a=await(0,c.z)({address:"taskManagement/project/Abstract?Company_id=".concat(t)});a.success?D(a.data||[]):console.error("Failed to fetch projects:",a.message)}catch(t){console.error("Error fetching projects:",t)}finally{y(!1)}})()},[t]),(0,s.useEffect)(()=>{if(_&&t&&x.length>0){var e,a,s,n,o;const t=x.find(e=>{var t;return e.Project_Id.toString()==(null===(t=_.ProjectId)||void 0===t?void 0:t.toString())}),i=(0,r.A)((0,r.A)({},_),{},{Project_Id:(null===(e=_.ProjectId)||void 0===e?void 0:e.toString())||(null===(a=_.Project_Id)||void 0===a?void 0:a.toString()),ProjectName:t?t.Project_Name:_.ProjectName||"",Day_Duration:(null===(s=_.Day_Duration)||void 0===s?void 0:s.toString())||"",Hours_Duration:(null===(n=_.Hours_Duration)||void 0===n?void 0:n.toString())||"",Status:(null===(o=_.Status)||void 0===o?void 0:o.toString())||"1"});v(i)}else!_&&t&&v({Task_Type:"",Task_Type_Id:"",Project_Id:"",ProjectName:"",Day_Duration:"",Hours_Duration:"",Status:"1"})},[_,t,x]);const S=()=>{v({Task_Type:"",Task_Type_Id:"",Project_Id:"",ProjectName:"",Day_Duration:"",Hours_Duration:"",Status:"1"}),a()},T=_&&_.ProjectId;return(0,p.jsxs)(n.A,{open:t,onClose:S,fullWidth:!0,maxWidth:"sm",children:[(0,p.jsx)(o.A,{className:"bg-primary text-white mb-2 px-3 py-2",children:_&&_.Task_Type_Id?"UPDATE TASK TYPE":"CREATE TASK TYPE"}),(0,p.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!h.Task_Type.trim())return void u.oR.error("Please enter a Task Type");if(!h.Project_Id)return void u.oR.error("Please select a Project");if(!h.Day_Duration||parseInt(h.Day_Duration)<1)return void u.oR.error("Please enter a valid number of days");if(!h.Hours_Duration||parseInt(h.Hours_Duration)<1)return void u.oR.error("Please enter a valid number of hours");const t=(0,r.A)((0,r.A)({},h),{},{Project_Id:parseInt(h.Project_Id),Day_Duration:parseInt(h.Day_Duration),Hours_Duration:parseInt(h.Hours_Duration),Status:parseInt(h.Status),Created_Date:(new Date).toISOString().split("T")[0],Est_StartDate:h.Est_StartDate||(new Date).toISOString().split("T")[0],Est_EndDate:h.Est_EndDate||new Date(Date.now()+24*h.Day_Duration*60*60*1e3).toISOString().split("T")[0]});_&&_.Task_Type_Id?m(t):j(t),a()},children:[(0,p.jsxs)(i.A,{children:[(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Project"}),(0,p.jsxs)("select",{value:h.Project_Id||"",onChange:e=>{const t=e.target.value,a=x.find(e=>e.Project_Id.toString()===t);v(e=>(0,r.A)((0,r.A)({},e),{},{Project_Id:t,ProjectName:a?a.Project_Name:""}))},className:"cus-inpt",required:!0,disabled:T,style:{width:"100%",padding:"8px",marginBottom:"16px"},children:[(0,p.jsx)("option",{value:"",disabled:!0,children:g?"Loading projects...":"Select Project"}),x.map(e=>(0,p.jsx)("option",{value:e.Project_Id.toString(),children:e.Project_Name},e.Project_Id))]})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Task Type"}),(0,p.jsx)("input",{type:"text",value:h.Task_Type,onChange:e=>v((0,r.A)((0,r.A)({},h),{},{Task_Type:e.target.value})),className:"cus-inpt",required:!0,placeholder:"Enter task type (e.g., Development, Testing)",style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Number Of Days"}),(0,p.jsx)("input",{type:"number",value:h.Day_Duration||"",onChange:e=>{const{value:t}=e.target;v(e=>(0,r.A)((0,r.A)({},e),{},{Day_Duration:t}))},className:"cus-inpt",required:!0,min:"1",placeholder:"Enter number of days",style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Hours Duration"}),(0,p.jsx)("input",{type:"number",value:h.Hours_Duration||"",onChange:e=>{const{value:t}=e.target;v(e=>(0,r.A)((0,r.A)({},e),{},{Hours_Duration:t}))},className:"cus-inpt",required:!0,min:"1",placeholder:"Enter number of hours",style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Estimated Start Date"}),(0,p.jsx)("input",{type:"date",value:h.Est_StartDate,onChange:e=>v((0,r.A)((0,r.A)({},h),{},{Est_StartDate:e.target.value})),className:"cus-inpt",required:!0,style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Estimated End Date"}),(0,p.jsx)("input",{type:"date",value:h.Est_EndDate,onChange:e=>v((0,r.A)((0,r.A)({},h),{},{Est_EndDate:e.target.value})),className:"cus-inpt",required:!0,style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Status"}),(0,p.jsxs)("select",{className:"cus-inpt",value:h.Status,onChange:e=>v((0,r.A)((0,r.A)({},h),{},{Status:e.target.value})),required:!0,style:{width:"100%",padding:"8px",marginBottom:"16px"},children:[(0,p.jsx)("option",{value:"",disabled:!0,children:"Select Status"}),(0,p.jsx)("option",{value:"1",children:"Active"}),(0,p.jsx)("option",{value:"0",children:"Inactive"}),(0,p.jsx)("option",{value:"2",children:"Pending"}),(0,p.jsx)("option",{value:"3",children:"Completed"})]})]})]}),(0,p.jsxs)(d.A,{children:[(0,p.jsx)(l.A,{onClick:S,className:"btn btn-light rounded-5 px-3",children:"Cancel"}),(0,p.jsx)(l.A,{type:"submit",variant:"contained",className:"btn btn-primary rounded-5 px-3",children:_&&_.Task_Type_Id?"Update":"Save"})]})]})]})}}}]);
//# sourceMappingURL=8471.f3308520.chunk.js.map