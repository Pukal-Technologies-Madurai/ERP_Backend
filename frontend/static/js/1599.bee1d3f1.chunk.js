"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1599],{21599:(e,t,s)=>{s.r(t),s.d(t,{default:()=>le});var a=s(89379),l=s(65043),r=s(43845),n=s(81e3),o=s(77739),i=s(17392),d=s(83462),c=s(26600),u=s(85865),m=s(35316),p=s(29347),x=s(11906),h=s(83560),_=s(30079),j=s(76447),g=s(70141),A=s(75155),y=s(51387),T=s(91036),v=s(45777),k=s(65074),b=s(28503),S=s(13448),f=s(24056),C=s(79650),N=s(71806),D=s(84882),I=s(28076),E=s(39652),w=s(73460),P=s(73086),F=s(25477),W=(s(92342),s(20491),s(12249)),z=s(5793),R=s(12412),H=s(51962),O=s(67784),M=s(97707),V=s(14792),L=s(70579);const B=(0,L.jsx)(W.A,{fontSize:"small"}),U=(0,L.jsx)(z.A,{fontSize:"small"}),G=e=>{let{row:t,children:s,openAction:r,reload:n,onCloseFun:o,loadingOn:i,loadingOff:u,onTaskAdded:x,Task_Type_Id:h,Task_Type:_}=e;const j=localStorage.getItem("user"),g=JSON.parse(j),A={Task_Id:"",Task_Name:"",Task_Desc:"",Task_Group_Id:"",Entry_By:null===g||void 0===g?void 0:g.UserId,Company_id:null===g||void 0===g?void 0:g.Company_id,Entry_Date:"",Update_By:"",Update_Date:"",Task_Parameters:[]},[y,v]=(0,l.useState)(!1),[b,S]=(0,l.useState)(!1),[f,C]=(0,l.useState)([]),[N,D]=(0,l.useState)([]),[I,E]=(0,l.useState)([]),[w,P]=(0,l.useState)(A),[F,W]=(0,l.useState)(!1),[z,G]=(0,l.useState)(A);(0,l.useEffect)(()=>{(async()=>{try{const e=await(0,k.z)({address:"taskManagement/tasks/dropdown"});e.success&&C(e.data);const t=await(0,k.z)({address:"masters/taskType/dropDown"});t.success&&D(t.data);const s=await(0,k.z)({address:"taskManagement/parameters"});s.success&&E(s.data)}catch(e){console.error(e)}})()},[]),(0,l.useEffect)(()=>{v(r)},[r]),(0,l.useEffect)(()=>{(0,M.aF)(t)?(console.log(t),P(e=>(0,a.A)((0,a.A)((0,a.A)({},e),t),{},{Task_Group_Id:h||t.Task_Group_Id||""})),S(!0)):(P(e=>(0,a.A)((0,a.A)({},e),{},{Task_Group_Id:h||""})),S(!1))},[t,h]);const q=()=>{v(!1),P(e=>(0,a.A)((0,a.A)({},A),{},{Task_Group_Id:h||""})),o&&o()},J=()=>{W(!1),G(A)};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("span",{onClick:()=>v(!0),style:{cursor:"pointer"},children:s}),(0,L.jsxs)(d.A,{open:y,children:[(0,L.jsx)(c.A,{className:"bg-primary text-white mb-2 px-3 py-2",children:b?"Edit Task":"Add Task"}),(0,L.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{const e=h||w.Task_Group_Id,t=w.Task_Parameters.map(e=>(0,a.A)((0,a.A)({},e),{},{Param_Id:e.Paramet_Id}))||[],s=(0,a.A)((0,a.A)({},w),{},{Task_Group_Id:e,Task_Parameters:t});console.log("Submitting with Task_Group_Id:",e),i&&i();try{const e=await(0,k.z)({address:"taskManagement/tasks",method:b?"PUT":"POST",bodyData:s});e.success?(T.oR.success(e.message),P(e=>(0,a.A)((0,a.A)({},A),{},{Task_Group_Id:h||""})),q(),n&&n(),x&&x()):T.oR.error(e.message)}catch(l){console.error(l),T.oR.error("An error occurred while processing your request.")}finally{u&&u()}})()},children:[(0,L.jsx)(m.A,{children:(0,L.jsxs)("div",{className:"row",children:[(0,L.jsxs)("div",{className:"col-md-4 p-2",children:[(0,L.jsxs)("label",{children:["Task Name ",(0,L.jsx)(V.A,{})]}),(0,L.jsx)("input",{maxLength:150,onChange:e=>P((0,a.A)((0,a.A)({},w),{},{Task_Name:e.target.value})),required:!0,value:w.Task_Name,placeholder:"ex: File Checking",className:"cus-inpt"})]}),(0,L.jsxs)("div",{className:"col-md-4 p-2",children:[(0,L.jsx)("label",{children:"Base Task"}),(0,L.jsxs)("select",{value:w.Under_Task_Id||0,className:"cus-inpt",onChange:e=>P((0,a.A)((0,a.A)({},w),{},{Under_Task_Id:e.target.value})),children:[(0,L.jsx)("option",{value:0,children:"Primary"}),f.map((e,t)=>(0,L.jsx)("option",{value:e.Task_Id,children:e.Task_Name},t))]})]}),(0,L.jsxs)("div",{className:"col-12",children:[(0,L.jsxs)("label",{children:["Task Description ",(0,L.jsx)(V.A,{})]}),(0,L.jsx)("textarea",{className:"cus-inpt",value:w.Task_Desc,rows:"3",onChange:e=>P((0,a.A)((0,a.A)({},w),{},{Task_Desc:e.target.value}))})]}),(0,L.jsx)("div",{className:"col-md-12 p-2",children:(0,L.jsx)(R.A,{multiple:!0,id:"checkboxes-tags-demo",options:I,disableCloseOnSelect:!0,getOptionLabel:e=>"".concat(e.Paramet_Name," - ").concat(e.Paramet_Data_Type),value:w.Task_Parameters||[],onChange:(e,t)=>P((0,a.A)((0,a.A)({},w),{},{Task_Parameters:t})),renderOption:(e,t,s)=>{let{selected:l}=s;return(0,L.jsxs)("li",(0,a.A)((0,a.A)({},e),{},{children:[(0,L.jsx)(H.A,{icon:B,checkedIcon:U,style:{marginRight:8},checked:l}),"".concat(t.Paramet_Name," - ").concat(t.Paramet_Data_Type)]}))},className:"pt-2",isOptionEqualToValue:(e,t)=>Number(e.Paramet_Id)===Number(t.Paramet_Id),renderInput:e=>(0,L.jsx)(O.A,(0,a.A)((0,a.A)({},e),{},{label:"Task Parameters",placeholder:"Choose Task Parameters"}))})}),w.Task_Parameters.map((e,t)=>(0,L.jsxs)("div",{className:"col-md-4 p-2",children:[(0,L.jsx)("label",{className:"mb-2",children:e.Paramet_Name}),(0,L.jsx)("input",{type:e.Paramet_Data_Type||"text",className:"cus-inpt",onChange:e=>{const s=[...w.Task_Parameters];s[t]=(0,a.A)((0,a.A)({},s[t]),{},{Default_Value:e.target.value}),P((0,a.A)((0,a.A)({},w),{},{Task_Parameters:s}))},value:e.Default_Value,placeholder:"Default Value"})]},t))]})}),(0,L.jsxs)(p.A,{children:[(0,L.jsx)("button",{className:"btn btn-light rounded-5 px-3",type:"button",onClick:q,children:"Cancel"}),(0,L.jsx)("button",{className:"btn btn-primary rounded-5 px-3",type:"submit",children:"Submit"})]})]})]}),(0,L.jsxs)(d.A,{open:F,onClose:J,children:[(0,L.jsx)(c.A,{className:"bg-primary text-white mb-2 px-3 py-2",children:"Edit Task"}),(0,L.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{const e=z.Task_Parameters.map(e=>(0,a.A)((0,a.A)({},e),{},{Param_Id:e.Paramet_Id}))||[],t=(0,a.A)((0,a.A)({},z),{},{Task_Parameters:e});i&&i();try{const e=await(0,k.z)({address:"taskManagement/tasks",method:"PUT",bodyData:t});e.success?(T.oR.success(e.message),J(),n&&n(),x&&x()):T.oR.error(e.message)}catch(s){console.error(s),T.oR.error("An error occurred while processing your request.")}finally{u&&u()}})()},children:[(0,L.jsxs)(m.A,{children:[(0,L.jsx)(O.A,{label:"Task Name",value:z.Task_Name,onChange:e=>G((0,a.A)((0,a.A)({},z),{},{Task_Name:e.target.value})),fullWidth:!0}),(0,L.jsxs)(O.A,{label:"Task Group",select:!0,value:z.Task_Group_Id,onChange:e=>G((0,a.A)((0,a.A)({},z),{},{Task_Group_Id:e.target.value})),fullWidth:!0,children:[(0,L.jsx)("option",{value:"",disabled:!0,children:"- select -"}),N.map((e,t)=>(0,L.jsx)("option",{value:e.Task_Type_Id,children:e.Task_Type},t))]})]}),(0,L.jsxs)(p.A,{children:[(0,L.jsx)("button",{className:"btn btn-light rounded-5 px-3",type:"button",onClick:J,children:"Cancel"}),(0,L.jsx)("button",{className:"btn btn-primary rounded-5 px-3",type:"submit",children:"Save"})]})]})]})]})};var q=s(89384),J=s(81637),Y=s(51214),K=s(53911);const Q=function(e){let{open:t,onClose:s,taskDetails:a,closeDialogTask:r}=e;const[n,o]=(0,l.useState)(null),[u,p]=(0,l.useState)(!1),[_,j]=(0,l.useState)(!0),{contextObj:g}=(0,l.useContext)(v.i);(0,l.useEffect)(()=>{t&&(o(null),j(!0),setTimeout(()=>{j(!1)},500))},[t]);const A=e=>{if(!e)return"N/A";const t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";const s=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),l=t.getFullYear();return"".concat(s,"-").concat(a,"-").concat(l)};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(d.A,{open:t,maxWidth:"lg",children:[(0,L.jsx)(c.A,{children:(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsx)("span",{children:"Details"}),(0,L.jsx)(x.A,{variant:"contained",color:"primary",onClick:s,children:"Close"})]})}),(0,L.jsx)(m.A,{children:_?(0,L.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px",width:"500px"},children:(0,L.jsx)(J.A,{})}):(0,L.jsx)(C.A,{children:(0,L.jsxs)(N.A,{children:[(0,L.jsx)(D.A,{children:(0,L.jsxs)(I.A,{children:[(0,L.jsx)(E.A,{className:"fa-14 text-center",children:"Employee"}),(0,L.jsx)(E.A,{className:"fa-14 text-center",children:"Assigned By"}),(0,L.jsx)(E.A,{className:"fa-14 text-center",children:"Start-End Date"}),(0,L.jsx)(E.A,{className:"fa-14 text-center",children:"Start-End Time"}),(0,L.jsx)(E.A,{className:"fa-14 text-center",children:"Total Hours"}),(0,L.jsx)(E.A,{className:"fa-14 text-center",children:"Timer Based"}),(0,L.jsx)(E.A,{className:"fa-14 text-center",children:"Involved Status"}),(0,L.jsx)(E.A,{className:"fa-14 text-center",children:"Order By"}),(0,L.jsx)(E.A,{className:"fa-14 text-center",children:"Action"})]})}),(0,L.jsx)(w.A,{children:0===a.length?(0,L.jsx)(I.A,{children:(0,L.jsx)(E.A,{colSpan:9,className:"fa-14 text-center",style:{textAlign:"center"},children:"No data found"})}):a.map((e,t)=>(0,L.jsxs)(I.A,{children:[(0,L.jsx)(E.A,{className:"fa-13 text-center",children:e.EmployeeName||"N/A"}),(0,L.jsx)(E.A,{className:"fa-13 text-center",children:e.AssignedUser||"N/A"}),(0,L.jsx)(E.A,{className:"fa-14 text-center",children:(0,L.jsxs)("span",{className:"badge rounded-4 px-3 bg-light text-primary",children:[(0,L.jsx)(Y.A,{className:"fa-18 me-2"}),A(e.Est_Start_Dt)," - ",A(e.Est_End_Dt)]})}),(0,L.jsx)(E.A,{className:"fa-14 text-center",children:(0,L.jsxs)("span",{className:"badge rounded-4 px-3 bg-light text-primary",children:[(0,L.jsx)(K.A,{className:"fa-18 me-2"}),e.Sch_Time||"N/A"," - ",e.EN_Time||"N/A"]})}),(0,L.jsx)(E.A,{className:"fa-13 text-center",children:e.Sch_Period||"N/A"}),(0,L.jsx)(E.A,{className:"fa-14 text-center",children:(0,L.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(Number(e.Timer_Based)?"bg-success":"bg-warning"),children:Number(e.Timer_Based)?"Yes":"No"})}),(0,L.jsx)(E.A,{className:"fa-14 text-center",children:(0,L.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(Number(e.Invovled_Stat)?"bg-success":"bg-danger"),children:Number(e.Invovled_Stat)?"IN":"OUT"})}),(0,L.jsx)(E.A,{className:"fa-13 text-center",children:e.Ord_By||"N/A"}),(0,L.jsx)(E.A,{className:"fa-13 text-center",children:(0,L.jsxs)(i.A,{size:"small",onClick:()=>(o(e),void p(!0)),children:[(0,L.jsx)(h.A,{className:"fa-18"}),"Edit"]})})]},t))})]})})})]}),u&&(0,L.jsx)(q.A,{open:u,projectId:null===n||void 0===n?void 0:n.Project_Id,taskId:n,editData:n,onClose:()=>{p(!1),s()}})]})};var X=s(22016),Z=s(15710),$=s(86506);const ee=function(e){let{dialogOpen:t,setDialogOpen:s,projectid:o,reload:_,onReload:j,selectedProject:g}=e;const[A,y]=(0,l.useState)(!1),[b,S]=(0,l.useState)(!1),[W,z]=(0,l.useState)(!1),[R,H]=(0,l.useState)(null),[O,M]=(0,l.useState)([]),[V,B]=(0,l.useState)([]),[U,J]=(0,l.useState)(!1),[Y,K]=(0,l.useState)({Sch_Type_Id:"",Sch_Type:""}),[ee,te]=(0,l.useState)(!1),[se,ae]=(0,l.useState)([]),[le,re]=(0,l.useState)(!1),ne=JSON.parse(localStorage.getItem("user")),oe=null===ne||void 0===ne?void 0:ne.UserId,ie=null===ne||void 0===ne?void 0:ne.Company_id,[de,ce]=(0,l.useState)(!1),[ue,me]=(0,l.useState)(null),[pe,xe]=(0,l.useState)(null),{contextObj:he}=(0,l.useContext)(v.i),[_e,je]=(0,l.useState)(!1),[ge,Ae]=(0,l.useState)(!1),[ye,Te]=(0,l.useState)("1"),[ve,ke]=(0,l.useState)([]),be=(e,t)=>{Te(t)},Se=(0,l.useCallback)(async()=>{if(null!==g&&void 0!==g&&g.Task_Type_Id){te(!0);try{const e=await(0,k.z)({address:"taskManagement/tasks/dropdown?Company_id=".concat(ie)});e.success?M(e.data):T.oR.error(e.message)}catch(e){console.error(e)}finally{te(!1)}}},[ie,null===g||void 0===g?void 0:g.Task_Type_Id]),fe=(0,l.useCallback)(async()=>{try{const e=await(0,k.z)({address:"taskManagement/project/schedule/ListingDetails?Project_Id=".concat(o,"&Task_Type_Id=").concat((null===g||void 0===g?void 0:g.Task_Type_Id)||"")});e.success?ae(e.data):console.error("Failed to fetch task details:",e.message)}catch(e){console.error("Error fetching task details:",e)}},[o,null===g||void 0===g?void 0:g.Task_Type_Id]);(0,l.useEffect)(()=>{null!==g&&void 0!==g&&g.Task_Type_Id&&(Se(),fe(),(async()=>{(0,k.z)({address:"taskManagement/project/schedule/newscheduleType"}).then(e=>{e.success?ke(e.data):T.oR.error(e.message)})})())},[_,o,j,null===g||void 0===g?void 0:g.Task_Type_Id]);const Ce=O.map(e=>({value:e.Task_Id,label:e.Task_Name})),Ne=e=>{const t=ve.find(t=>t.Sch_Type_Id===parseInt(e.target.value));t&&K((0,a.A)((0,a.A)({},Y),{},{Sch_Type_Id:t.Sch_Type_Id,Sch_Type:t.Sch_Type}))};return(0,L.jsxs)(L.Fragment,{children:[ge&&(0,L.jsxs)(d.A,{open:ge,fullWidth:!0,maxWidth:"sm",PaperProps:{style:{borderRadius:"8px"}},onClose:()=>Ae(!1),children:[(0,L.jsx)(c.A,{children:_e?"Edit Task":"Assign Task"}),(0,L.jsx)(m.A,{children:(0,L.jsx)("div",{style:{padding:"1px",display:"flex"},children:(0,L.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:[(0,L.jsx)("label",{style:{marginRight:"8px"},children:"Sch_Type"}),(0,L.jsxs)("select",{value:Y.Sch_Type_Id||"",onChange:Ne,className:"cus-inpt",required:!0,style:{marginLeft:"10px"},children:[(0,L.jsx)("option",{value:"",disabled:!0,children:"- Sch_Type -"}),ve.map((e,t)=>(0,L.jsx)("option",{value:e.Sch_Type_Id,children:e.Sch_Type},t))]})]})})}),(0,L.jsxs)(p.A,{children:[(0,L.jsx)(x.A,{onClick:()=>Ae(!1),children:"Cancel"}),(0,L.jsx)(x.A,{variant:"contained",color:"primary",onClick:()=>(async e=>{const t={Sch_Project_Id:e.Sch_Project_Id,Sch_Id:e.TaskSchId,schtypeid:Y.Sch_Type_Id,Task_Id:e.Task_Id};try{const e=await(0,k.z)({address:"taskManagement/project/schedule/updateScheduleTaskUpdate",method:"PUT",bodyData:t});e.success?(T.oR.success(e.message),Ae(!1),je(!1),j()):(e.status,T.oR.warn(e.message||"Task already exists for this project."))}catch(s){T.oR.error(s)}})(Y),children:"Save"})]})]}),(0,L.jsxs)(d.A,{open:t,fullWidth:!0,maxWidth:"lg",PaperProps:{style:{height:"75vh"}},children:[(0,L.jsx)(c.A,{children:(0,L.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,L.jsxs)("span",{children:[null===g||void 0===g?void 0:g.Task_Type," "]}),(0,L.jsx)(x.A,{variant:"contained",color:"primary",onClick:()=>S(!0),children:"Assign Task"})]})}),(0,L.jsx)(n.A,{sx:{width:"100%",typography:"body1"},children:se.map((e,t)=>{const s=e.SchTypes||[];return(0,L.jsxs)(X.Ay,{value:ye,children:[(0,L.jsx)(n.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,L.jsx)(Z.A,{onChange:be,"aria-label":"Schedule Types",children:Array.isArray(s)&&s.length>0?s.map((e,t)=>(0,L.jsx)(f.A,{label:e.SchType||"No SchType",value:(e.SchTypeId||t).toString(),id:"tab-".concat(e.SchTypeId||t),"aria-controls":"tabpanel-".concat(e.SchTypeId||t)},"".concat(e.SchTypeId||t,"-").concat(t))):(0,L.jsx)(u.A,{variant:"body2",color:"textSecondary",sx:{padding:2},children:"No Schedule Types Available"})})}),Array.isArray(s)&&s.map((e,t)=>(0,L.jsxs)($.A,{value:(e.SchTypeId||t).toString(),id:"tabpanel-".concat(e.SchTypeId||t),"aria-labelledby":"tab-".concat(e.SchTypeId||t),children:[(0,L.jsx)(n.A,{sx:{marginBottom:2,padding:2,backgroundColor:"#f9f9f9",borderRadius:"8px"},children:(0,L.jsxs)(u.A,{variant:"body1",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,L.jsxs)(n.A,{children:["Schedule Type: ",(0,L.jsx)("strong",{children:e.SchType})]}),e.TaskCountsInSchType?(0,L.jsx)(n.A,{textAlign:"right",children:(()=>{try{const a=JSON.parse(e.TaskCountsInSchType);var t,s;if(Array.isArray(a)&&a.length>0)return(0,L.jsxs)(L.Fragment,{children:["Total Tasks: ",(0,L.jsx)("strong",{children:(null===(t=a[0])||void 0===t?void 0:t.TotalTasks)||0})," / Completed Tasks: ",(0,L.jsx)("strong",{children:(null===(s=a[0])||void 0===s?void 0:s.CompletedTasks)||0})]})}catch(a){console.error("Error parsing TaskCountsInSchType:",a)}return"No task counts available"})()}):(0,L.jsx)(u.A,{variant:"body2",color:"textSecondary",children:"No task counts available"})]})}),Array.isArray(e.Tasks)&&e.Tasks.length>0?(0,L.jsx)(C.A,{sx:{maxHeight:"60vh",border:"1px solid #e0e0e0",borderRadius:1},children:(0,L.jsxs)(N.A,{stickyHeader:!0,children:[(0,L.jsx)(D.A,{children:(0,L.jsxs)(I.A,{children:[(0,L.jsx)(E.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Task Name"}),(0,L.jsx)(E.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Description"}),(0,L.jsx)(E.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Task Type"}),(0,L.jsx)(E.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Assigned Employees"}),(0,L.jsx)(E.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Assign"}),(0,L.jsx)(E.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Status"}),(0,L.jsx)(E.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Actions"}),(0,L.jsx)(E.A,{sx:{backgroundColor:"#2C3E50",color:"white",fontWeight:"bold"},children:"Details"})]})}),(0,L.jsx)(w.A,{children:e.Tasks.map(e=>(0,L.jsxs)(I.A,{sx:{backgroundColor:"#BBE6F6","&:hover":{backgroundColor:"#a8dff0"}},children:[(0,L.jsx)(E.A,{children:(0,L.jsx)(u.A,{fontWeight:"bold",children:(null===e||void 0===e?void 0:e.Task_Name)||"DEFAULT TASK"})}),(0,L.jsx)(E.A,{children:(0,L.jsx)(u.A,{variant:"body2",children:e.Task_Desc||"No description"})}),(0,L.jsx)(E.A,{children:(0,L.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,L.jsx)(u.A,{children:e.Task_Type||"No Type"}),(0,L.jsx)(i.A,{onClick:()=>{return t=e,je(!0),K(t),void Ae(!0);var t},size:"small",sx:{color:"#1976d2"},children:(0,L.jsx)(h.A,{fontSize:"small"})})]})}),(0,L.jsx)(E.A,{children:e.AssignedEmployees&&Array.isArray(e.AssignedEmployees)&&e.AssignedEmployees.length>0?(0,L.jsx)(n.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.AssignedEmployees.map((e,t)=>(0,L.jsx)(r.A,{label:e.Name,variant:"outlined",size:"small",sx:{margin:"1px",color:"green",borderColor:"green"}},t))}):(0,L.jsx)(u.A,{variant:"body2",color:"textSecondary",fontStyle:"italic",children:"No Employees Assigned"})}),(0,L.jsx)(E.A,{children:(0,L.jsx)(i.A,{onClick:()=>(async e=>{H(e),z(!0)})(e),sx:{color:"#2e7d32"},children:(0,L.jsx)(P.A,{})})}),(0,L.jsx)(E.A,{children:(0,L.jsx)(r.A,{label:e.TaskSchStatus||"New",color:"Completed"===e.TaskSchStatus?"success":"In Progress"===e.TaskSchStatus?"warning":"default",size:"small"})}),(0,L.jsx)(E.A,{children:(0,L.jsx)(i.A,{onClick:()=>(H(e),void ce(!0)),sx:{color:"#ed6c02"},children:(0,L.jsx)(h.A,{})})}),(0,L.jsx)(E.A,{children:(0,L.jsx)(i.A,{onClick:()=>(async e=>{if(J(!0),e.Task_Id&&o)try{const t=await(0,k.z)({address:"masters/employeedetails/assignedTaskDetails?Task_Id=".concat(e.Task_Id,"&ProjectId=").concat(o,"&LevelId=").concat(e.Task_Levl_Id)});t.success?B(t.data):console.error(t.message)}catch(t){console.error("Error fetching task details:",t)}else T.oR.error("Task ID and Project ID are required")})(e),sx:{color:"#1976d2"},children:(0,L.jsx)(F.A,{})})})]},"".concat(e.Task_Id,"-").concat(e.Task_Levl_Id,"-").concat(e.A_Id)))})]})}):(0,L.jsxs)(n.A,{sx:{textAlign:"center",p:3,backgroundColor:"#f5f5f5",borderRadius:1,border:"1px dashed #ccc"},children:[(0,L.jsx)(u.A,{variant:"h6",color:"textSecondary",gutterBottom:!0,children:"No Tasks Available"}),(0,L.jsxs)(u.A,{variant:"body2",color:"textSecondary",children:["There are no tasks assigned to the ",(0,L.jsx)("strong",{children:e.SchType})," schedule type."]})]})]},"".concat(e.SchTypeId||t,"-").concat(t)))]},t)})}),(0,L.jsx)(p.A,{sx:{marginTop:"auto ",position:"sticky",bottom:0},children:(0,L.jsx)(x.A,{variant:"contained",color:"primary",onClick:async()=>{s(!1),K({})},children:"Close"})})]}),(0,L.jsxs)(d.A,{open:b,fullWidth:!0,maxWidth:"sm",PaperProps:{style:{borderRadius:"8px"}},children:[(0,L.jsx)(c.A,{children:"Assign Task"}),(0,L.jsxs)(m.A,{children:[(0,L.jsx)("div",{style:{padding:"1px",display:"flex"},children:(0,L.jsx)("div",{style:{padding:"1px",display:"flex"},children:(0,L.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:[(0,L.jsx)("label",{htmlFor:"task-group",style:{marginRight:"6px"},children:"Task Group"}),(0,L.jsx)("select",{id:"task-group",value:(null===g||void 0===g?void 0:g.Task_Type_Id)||"",className:"cus-inpt",disabled:!0,style:{flex:1,marginRight:"8px",backgroundColor:"#f5f5f5",color:"#666",cursor:"not-allowed"},children:(0,L.jsx)("option",{value:null===g||void 0===g?void 0:g.Task_Type_Id,children:null===g||void 0===g?void 0:g.Task_Type})})]})})}),(0,L.jsx)("div",{style:{padding:"1px",display:"flex"},children:(0,L.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:[(0,L.jsx)("label",{htmlFor:"task-select",style:{marginRight:"8px"},children:"Select Task"}),(0,L.jsxs)("select",{id:"task-select",value:Y.Task_Id||"",className:"cus-inpt",required:!0,onChange:e=>(async e=>{K(t=>(0,a.A)((0,a.A)({},t),{},{Task_Id:e.value,TasksGet:e.label}));try{const t=await(0,k.z)({address:"taskManagement/tasks/tasklistsid?Task_Id=".concat(e.value)});if(t.success){const e=t.data;K(t=>(0,a.A)((0,a.A)({},t),{},{Task_Levl_Id:e.Task_Levl_Id,Task_Name:e.Task_Name,Task_Desc:e.Task_Desc,Task_Group_Id:e.Task_Group_Id,Sch_Type_Id:e.Sch_Type_Id,Task_Sch_Duaration:e.Task_Sch_Duaration||"",Task_Start_Time:e.Task_Start_Time||(new Date).toISOString(),Task_End_Time:e.Task_End_Time||(new Date).toISOString(),Task_Est_Start_Date:e.Task_Est_Start_Date||(new Date).toISOString(),Task_Est_End_Date:e.Task_Est_End_Date||(new Date).toISOString()}))}else T.oR.error("Failed to fetch task details")}catch(t){T.oR.error(t)}})({value:e.target.value}),style:{flex:1,marginRight:"8px"},children:[(0,L.jsx)("option",{value:"",disabled:!0,children:"- select -"}),Ce.map((e,t)=>(0,L.jsx)("option",{value:e.value,children:e.label},t))]}),(0,L.jsx)(i.A,{onClick:()=>y(!0),children:(0,L.jsx)(x.A,{variant:"contained",color:"primary",children:"Create New"})})]})}),(0,L.jsx)("div",{style:{padding:"1px",display:"flex"},children:(0,L.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:[(0,L.jsx)("label",{style:{marginRight:"8px"},children:"Sch_Type"}),(0,L.jsxs)("select",{value:Y.Sch_Type_Id||"",onChange:Ne,className:"cus-inpt",required:!0,style:{marginLeft:"10px"},children:[(0,L.jsx)("option",{value:"",disabled:!0,children:"- Sch_Type -"}),ve.map((e,t)=>(0,L.jsx)("option",{value:e.Sch_Type_Id,children:e.Sch_Type},t))]})]})})]}),(0,L.jsxs)(p.A,{children:[(0,L.jsx)(x.A,{onClick:()=>S(!1),children:"Cancel"}),(0,L.jsx)(x.A,{variant:"contained",color:"primary",onClick:async()=>{if(!Y.Task_Id||!Y.Sch_Type_Id)return void T.oR.error("Please select a task and schedule type before saving.");console.log("taskScheduleInput.Task_Est_End_Date",null===g||void 0===g?void 0:g.Task_Type_Id);const e={entryBy:oe,Project_Id:o,Sch_Type_Id:Y.Sch_Type_Id,Sch_Est_Start_Date:Y.Task_Est_Start_Date,Sch_Est_End_Date:Y.Task_Est_End_Date,tasks:[(0,a.A)((0,a.A)({},Y),{},{Task_Group_Id:null===g||void 0===g?void 0:g.Task_Type_Id})]};try{const t=await(0,k.z)({address:"taskManagement/project/schedule/createNewTaskWithSchedule",method:"POST",bodyData:e});t.success?(T.oR.success(t.message),S(!1),K({}),fe(),j()):(t.status,T.oR.warn(t.message||"Task already exists for this project."))}catch(t){T.oR.error(t)}},children:"Save"})]})]}),(0,L.jsx)(q.A,{open:W,onClose:()=>z(!1),task:R,projectId:o,entryBy:oe,taskId:R,reload:_,onReload:j}),(0,L.jsxs)(d.A,{open:le,onClose:()=>re(!1),children:[(0,L.jsx)(c.A,{children:"Delete Task"}),(0,L.jsx)(p.A,{children:(0,L.jsx)(x.A,{onClick:()=>re(!1),color:"primary",children:"Cancel"})})]}),(0,L.jsx)(G,{openAction:A,onCloseFun:()=>y(!1),onTaskAdded:Se,Reload:_,Task_Type_Id:null===g||void 0===g?void 0:g.Task_Type_Id,Task_Type:null===g||void 0===g?void 0:g.Task_Type}),(0,L.jsx)(G,{row:R,openAction:de,onCloseFun:()=>ce(!1),reload:fe,Reload:_}),(0,L.jsx)(Q,{open:U,onClose:()=>J(!1),taskDetails:V})]})};var te=s(58471),se=s(48471);const ae=e=>{var t;let{open:s,onClose:j,projectId:g,projectName:A,parseData:y,taskId:v,contextObj:b}=e;const[S,f]=(0,l.useState)([]),[C,N]=(0,l.useState)([]),[D,I]=(0,l.useState)(!1),[E,w]=(0,l.useState)(!1),[P,F]=(0,l.useState)(null),[W,z]=(0,l.useState)({Work_Dt:"",Start_Time:"",End_Time:"",Work_Status:2,Process_Id:1,Work_Done:"",Det_string:[]}),[R,H]=(0,l.useState)([]),[O,M]=(0,l.useState)(!1),[V,B]=(0,l.useState)({fromDate:"",toDate:""}),U={Work_Dt:"",Start_Time:"",End_Time:"",Work_Status:2,Process_Id:1,Work_Done:"",Det_string:[]};(0,l.useEffect)(()=>{s&&g&&(G(),q())},[s,g]),(0,l.useEffect)(()=>{J()},[S,V]);const G=async()=>{I(!0);try{const e=await(0,k.z)({address:"taskManagement/workDetailsTask?Project_Id=".concat(g,"&Task_Id=").concat(v)});e.success?f(e.data||[]):(T.oR.error("Failed to fetch work details"),f([]))}catch(e){console.error("Error fetching work details:",e),T.oR.error("Error fetching work details"),f([])}finally{I(!1)}},q=async()=>{try{const e=await(0,k.z)({address:"masters/processMaster"});e.success&&H(e.data||[])}catch(e){console.error("Error fetching process details:",e),T.oR.error("Error fetching process details")}},J=()=>{if(!V.fromDate&&!V.toDate)return void N(S);const e=S.filter(e=>{const t=new Date(e.Work_Dt);let s=!0,a=!0;if(V.fromDate){s=t>=new Date(V.fromDate)}if(V.toDate){const e=new Date(V.toDate);e.setHours(23,59,59,999),a=t<=e}return s&&a});N(e)},Y=(e,t)=>{B(s=>(0,a.A)((0,a.A)({},s),{},{[e]:t}))},K=[(0,se.Lj)("EmployeeName","string","Employee","left","center",1),(0,se.Lj)("Task_Name","string","Task Type","left","center",1),(0,se.Lj)("Work_Done","string","Work Done","left","center",1),{Field_Name:"Start_Time",ColumnHeader:"Start Time",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.Start_Time?t.Start_Time:"N/A"}},{Field_Name:"End_Time",ColumnHeader:"End Time",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.End_Time?t.End_Time:"N/A"}},{Field_Name:"Total_Hours",ColumnHeader:"Hours Worked",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;const s=t.Tot_Minutes||0,a=Math.floor(s/60),l=s%60;let n="";return n=a>0&&l>0?"".concat(a,"h ").concat(l,"m"):a>0?"".concat(a,"h"):l>0?"".concat(l,"m"):"0h",(0,L.jsx)(r.A,{label:n,color:"primary",size:"small"})}},{Field_Name:"Status",ColumnHeader:"Status",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;const s=3===t.Work_Status||"COMPLETED"===t.WorkStatus?"COMPLETED":"PENDING";return(0,L.jsx)(r.A,{label:s,color:"COMPLETED"===s?"success":"warning",size:"small"})}},...1===Number(null===b||void 0===b?void 0:b.Add_Rights)?[{Field_Name:"Action",ColumnHeader:"Action",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,L.jsx)(n.A,{sx:{display:"flex",gap:.5,justifyContent:"center"},children:1===Number(null===b||void 0===b?void 0:b.Edit_Rights)&&(0,L.jsx)(o.A,{title:"Edit Work",children:(0,L.jsx)(i.A,{size:"small",onClick:()=>{return F(e=t),z({Work_Dt:e.Work_Dt||"",Start_Time:e.Start_Time||"",End_Time:e.End_Time||"",Work_Status:3===e.Work_Status||"COMPLETED"===e.WorkStatus?3:2,Process_Id:e.Process_Id||1,Work_Done:e.Work_Done||"",Det_string:e.Det_string||e.Param_Dts||[]}),M(!0),void w(!0);var e},children:(0,L.jsx)(h.A,{fontSize:"small"})})})})}}]:[]];return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(d.A,{open:s,onClose:j,maxWidth:"lg",fullWidth:!0,children:[(0,L.jsxs)(c.A,{className:"bg-primary text-white mb-2 px-3 py-2 d-flex justify-content-between align-items-center",children:[(0,L.jsxs)("span",{children:["Work Details - ",A]}),(0,L.jsx)(n.A,{sx:{display:"flex",gap:2,alignItems:"center"},children:(0,L.jsxs)(n.A,{sx:{display:"flex",gap:1,alignItems:"center",backgroundColor:"white",padding:"4px 8px",borderRadius:"4px"},children:[(0,L.jsx)(u.A,{variant:"body2",sx:{color:"black",fontWeight:"bold"},children:"Filter:"}),(0,L.jsx)("input",{type:"date",value:V.fromDate,onChange:e=>Y("fromDate",e.target.value),className:"cus-inpt",style:{width:"140px",fontSize:"12px"},placeholder:"From Date"}),(0,L.jsx)(u.A,{variant:"body2",sx:{color:"black"},children:"to"}),(0,L.jsx)("input",{type:"date",value:V.toDate,onChange:e=>Y("toDate",e.target.value),className:"cus-inpt",style:{width:"140px",fontSize:"12px"},placeholder:"To Date",min:V.fromDate}),(V.fromDate||V.toDate)&&(0,L.jsx)(o.A,{title:"Clear Filter",children:(0,L.jsx)(i.A,{size:"small",onClick:()=>{B({fromDate:"",toDate:""})},sx:{color:"black"},children:(0,L.jsx)(_.A,{fontSize:"small"})})})]})})]}),(0,L.jsx)(m.A,{className:"p-4",children:D?(0,L.jsx)(u.A,{variant:"body1",align:"center",children:"Loading work details..."}):C.length>0?(0,L.jsx)(se.Ay,{title:"Work Details (".concat(C.length," records)"),dataArray:C,EnableSerialNumber:!0,columns:K,ButtonArea:null,isExpendable:!1,tableMaxHeight:400}):(0,L.jsx)(u.A,{variant:"body1",align:"center",color:"textSecondary",children:0===S.length?"No work details found for this project.":"No work details found for the selected date range."})}),(0,L.jsx)(p.A,{children:(0,L.jsx)(x.A,{onClick:j,variant:"contained",color:"secondary",children:"Close"})})]}),(0,L.jsxs)(d.A,{open:E,maxWidth:"sm",fullWidth:!0,onClose:()=>{w(!1),z(U),M(!1),F(null)},children:[(0,L.jsxs)(c.A,{children:[O?"Edit":"Save"," Task Progress"]}),(0,L.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={Mode:O?2:1,Work_Id:O?P.Work_Id:0,Project_Id:g,Sch_Id:(null===P||void 0===P?void 0:P.Sch_Id)||"1",Task_Levl_Id:(null===P||void 0===P?void 0:P.Task_Levl_Id)||"1",Task_Id:v,AN_No:(null===P||void 0===P?void 0:P.AN_No)||"1",Emp_Id:parseInt(null===y||void 0===y?void 0:y.UserId),Process_Id:parseInt(W.Process_Id)||1,Work_Dt:W.Work_Dt,Work_Done:W.Work_Done,Start_Time:W.Start_Time,End_Time:W.End_Time,Work_Status:parseInt(W.Work_Status),Entry_By:parseInt(null===y||void 0===y?void 0:y.UserId),Entry_Date:new Date,Det_string:W.Det_string.length>0?W.Det_string:null,Additional_Project:A||"",Additional_Task:(null===P||void 0===P?void 0:P.Task_Name)||""},t=await(0,k.z)({address:"taskManagement/task/work",method:"PUT",headers:{"Content-Type":"application/json"},bodyData:e});t.success?(T.oR.success("Work ".concat(O?"updated":"saved"," successfully!")),w(!1),z(U),M(!1),F(null),G()):T.oR.error("Failed to ".concat(O?"update":"save"," work: ").concat(t.message))}catch(t){console.error("Error saving work:",t),T.oR.error("Error ".concat(O?"updating":"saving"," work"))}},children:[(0,L.jsx)(m.A,{className:"table-responsive",children:(0,L.jsx)("table",{className:"table",children:(0,L.jsxs)("tbody",{children:[(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle",width:"30%"},children:"Project Name"}),(0,L.jsx)("td",{className:"border-0 fa-14",style:{width:"70%"},children:(0,L.jsx)("div",{className:"cus-inpt w-100",style:{padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"#f5f5f5",minHeight:"38px"},children:A||"No project name"})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Task Name"}),(0,L.jsx)("td",{className:"border-0 fa-14",children:(0,L.jsx)("div",{className:"cus-inpt w-100",style:{padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"#f5f5f5",minHeight:"38px"},children:(null===P||void 0===P?void 0:P.Task_Name)||"No task name"})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Work Date"}),(0,L.jsx)("td",{className:"border-0 fa-14",children:(0,L.jsx)("input",{type:"date",onChange:e=>z((0,a.A)((0,a.A)({},W),{},{Work_Dt:e.target.value})),value:(e=>{if(!e)return"";return new Date(e).toISOString().split("T")[0]})(null===W||void 0===W?void 0:W.Work_Dt),className:"cus-inpt w-100",required:!0})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Start Time"}),(0,L.jsx)("td",{className:"border-0 fa-14",children:(0,L.jsx)("input",{type:"time",onChange:e=>z((0,a.A)((0,a.A)({},W),{},{Start_Time:e.target.value})),value:null===W||void 0===W?void 0:W.Start_Time,className:"cus-inpt w-100",required:!0})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"End Time"}),(0,L.jsx)("td",{className:"border-0 fa-14",children:(0,L.jsx)("input",{type:"time",min:null===W||void 0===W?void 0:W.Start_Time,onChange:e=>z((0,a.A)((0,a.A)({},W),{},{End_Time:e.target.value})),value:null===W||void 0===W?void 0:W.End_Time,required:!0,className:"cus-inpt w-100"})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Work Status"}),(0,L.jsx)("td",{className:"border-0 fa-14",children:(0,L.jsxs)("select",{className:"cus-inpt w-100",value:null===W||void 0===W?void 0:W.Work_Status,onChange:e=>z((0,a.A)((0,a.A)({},W),{},{Work_Status:parseInt(e.target.value)})),children:[(0,L.jsx)("option",{value:2,children:"PENDING"}),(0,L.jsx)("option",{value:3,children:"COMPLETED"})]})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle"},children:"Process"}),(0,L.jsx)("td",{className:"border-0 fa-14",children:(0,L.jsxs)("select",{className:"cus-inpt w-100",value:W.Process_Id,onChange:e=>z((0,a.A)((0,a.A)({},W),{},{Process_Id:parseInt(e.target.value)})),children:[(0,L.jsx)("option",{value:0,children:"Select Process"}),R.map(e=>(0,L.jsx)("option",{value:e.Id,children:e.Process_Name},e.Id))]})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"top",paddingTop:"12px"},children:"Work Summary"}),(0,L.jsx)("td",{className:"border-0 fa-14",children:(0,L.jsx)("textarea",{rows:"4",className:"cus-inpt w-100",required:!0,value:null===W||void 0===W?void 0:W.Work_Done,onChange:e=>z((0,a.A)((0,a.A)({},W),{},{Work_Done:e.target.value}))})})]}),null===P||void 0===P||null===(t=P.Param_Dts)||void 0===t?void 0:t.map((e,t)=>{var s,l;return(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-0 fa-14",style:{verticalAlign:"middle",paddingTop:"12px"},children:null===e||void 0===e?void 0:e.Paramet_Name}),(0,L.jsx)("td",{className:"border-0 fa-14",children:(0,L.jsx)("input",{type:(null===e||void 0===e?void 0:e.Paramet_Data_Type)||"text",className:"cus-inpt w-100",onChange:t=>((e,t)=>{const{value:s}=e.target;z(e=>{const l=e.Det_string.findIndex(e=>Number(e.Param_Id)===Number(t.Param_Id));if(l>=0){const t=[...e.Det_string];return t[l]=(0,a.A)((0,a.A)({},t[l]),{},{Current_Value:s}),(0,a.A)((0,a.A)({},e),{},{Det_string:t})}return(0,a.A)((0,a.A)({},e),{},{Det_string:[...e.Det_string,{Task_Id:v,Param_Id:t.Param_Id,Default_Value:"",Current_Value:s}]})})})(t,e),value:(null===W||void 0===W||null===(s=W.Det_string)||void 0===s||null===(l=s.find(t=>Number(null===t||void 0===t?void 0:t.Param_Id)===Number(null===e||void 0===e?void 0:e.Param_Id)))||void 0===l?void 0:l.Current_Value)||"",placeholder:null===e||void 0===e?void 0:e.Paramet_Data_Type})})]},t)})]})})}),(0,L.jsxs)(p.A,{children:[(0,L.jsx)(x.A,{variant:"outlined",color:"error",type:"button",onClick:()=>{w(!1),z(U),M(!1),F(null)},children:"Cancel"}),(0,L.jsx)(x.A,{variant:"contained",color:"success",type:"submit",children:O?"Update":"Save"})]})]})]})]})},le=()=>{const[e,t]=(0,l.useState)(!1),[s,_]=(0,l.useState)([]),[f,C]=(0,l.useState)([]),{contextObj:N}=(0,l.useContext)(v.i),[D,I]=(0,l.useState)(!1),[E,w]=(0,l.useState)(null),[P,F]=(0,l.useState)(!1),[W,z]=(0,l.useState)(0),[R,H]=(0,l.useState)(!1),[O,M]=(0,l.useState)(null),[V,B]=(0,l.useState)(!1),[U,G]=(0,l.useState)(!1),[q,J]=(0,l.useState)(!1),[Y,K]=(0,l.useState)([]),[Q,X]=(0,l.useState)(!1),[Z,$]=(0,l.useState)(!1),[le,re]=(0,l.useState)(0),ne=JSON.parse(localStorage.getItem("user"));(0,l.useEffect)(()=>{ie(),de()},[null===ne||void 0===ne?void 0:ne.Company_id,e]);const oe=()=>{t(e=>!e)},ie=async()=>{try{let e="";e="ADMIN"==(null===ne||void 0===ne?void 0:ne.UserType)||0==(null===ne||void 0===ne?void 0:ne.UserTypeId)||1==(null===ne||void 0===ne?void 0:ne.UserTypeId)?"":(null===ne||void 0===ne?void 0:ne.UserId)||"";const t=await(0,k.z)({address:"taskManagement/project/newProjectAbstract?Company_id=".concat(null===ne||void 0===ne?void 0:ne.Company_id,"&EmpId=").concat(e)});_(t.success?t.data:[])}catch(e){console.error(e),_([])}},de=async()=>{try{const e=await(0,k.z)({address:"taskManagement/project?Company_id=".concat(null===ne||void 0===ne?void 0:ne.Company_id)});C(e.success?e.data:[])}catch(e){console.error(e),C([])}},ce=e=>{w(e),z(e.Project_Id),G(!0)},ue=()=>{I(!1),G(!1),$(!1),w(null),M(null),H(!1),J(!1),X(!1)},me=s.map(e=>{const t=f.find(t=>t.Project_Id===e.Project_Id);return(0,a.A)((0,a.A)({},e),{},{Project_Head_Name:(null===t||void 0===t?void 0:t.Project_Head_Name)||"N/A",Status_Text:(null===t||void 0===t?void 0:t.Status)||e.Status||"N/A",Progress_Percentage:(s=e.TodayTaskcounts,l=e.CompletedTasks,0===Number(s)?0:(Number(l)/Number(s)*100).toFixed(0))});var s,l}),pe=[(0,se.Lj)("Task_Type","string","Task Type","left","center",1),{Field_Name:"Days",ColumnHeader:"Days",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.Day_Duration?t.Day_Duration:"-"}},{Field_Name:"Hours",ColumnHeader:"Hours",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.Hours_Duration?t.Hours_Duration:"-"}},{Field_Name:"Total_Worked_Minutes",ColumnHeader:"Total Worked Hours",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.Total_Worked_Hours?t.Total_Worked_Hours:"-"}},{Field_Name:"Remainging Hours",ColumnHeader:"Remaining Hours",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.Remaining_Time?t.Remaining_Time:"-"}},{Field_Name:"Est_StartTime",ColumnHeader:"Start Date",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.Est_StartTime?t.Est_StartTime.split("T")[0]:"N/A"}},{Field_Name:"Est_EndTime",ColumnHeader:"End Date",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.Est_EndTime?t.Est_EndTime.split("T")[0]:"N/A"}},{Field_Name:"Status",ColumnHeader:"Status",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,L.jsx)(r.A,{label:1===t.Status?"Active":"Inactive",color:1===t.Status?"success":"default",size:"small"})}},{Field_Name:"View Task",ColumnHeader:"View Task",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,L.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"center"},children:(0,L.jsx)(o.A,{title:"View Task Details",children:(0,L.jsx)(i.A,{size:"small",onClick:()=>ce((0,a.A)((0,a.A)({},t),{},{Project_Name:t.Project_Name||"Task"})),children:(0,L.jsx)(j.A,{fontSize:"small"})})})})}},{Field_Name:"Work Details",ColumnHeader:"Work Details",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,L.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"center"},children:(0,L.jsx)(o.A,{title:"View Work Details",children:(0,L.jsx)(i.A,{size:"small",onClick:()=>{return e=(0,a.A)((0,a.A)({},t),{},{Project_Name:t.Project_Name||"Task"}),w(e),z(e.Project_Id),re(e.Task_Type_Id),void $(!0);var e},children:(0,L.jsx)(j.A,{fontSize:"small"})})})})}},...1===Number(null===N||void 0===N?void 0:N.Add_Rights)?[{Field_Name:"Actions",ColumnHeader:"Actions",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,L.jsx)(n.A,{sx:{display:"flex",gap:.5,justifyContent:"center"},children:1===Number(null===N||void 0===N?void 0:N.Edit_Rights)&&(0,L.jsx)(o.A,{title:"Edit Task Type",children:(0,L.jsx)(i.A,{size:"small",onClick:()=>(e=>{var t;const s={ProjectId:e.Project_Id,ProjectName:e.Project_Name,Est_StartDate:e.Est_StartTime?new Date(e.Est_StartTime).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],Est_EndDate:e.Est_EndTime?new Date(e.Est_EndTime).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],Day_Duration:e.Day_Duration,Hours_Duration:e.Hours_Duration,Task_Type:e.Task_Type,Task_Type_Id:e.Task_Type_Id,Status:(null===(t=e.Status)||void 0===t?void 0:t.toString())||"1"};K(s),X(!0),J(!0)})(t),children:(0,L.jsx)(h.A,{fontSize:"small"})})})})}}]:[]],xe=t=>{let{row:s}=t;const[a,r]=(0,l.useState)(!0),o=s.TaskTypes||[];return(0,l.useEffect)(()=>{r(!0)},[o.length,e]),a?(0,L.jsxs)(n.A,{sx:{padding:2,backgroundColor:"#f8f9fa",margin:1,borderRadius:1},children:[(0,L.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,L.jsxs)(u.A,{variant:"h6",sx:{fontSize:"16px",fontWeight:"bold"},children:["Modules for ",s.Project_Name]}),(0,L.jsx)(x.A,{variant:"outlined",size:"small",startIcon:(0,L.jsx)(g.A,{}),onClick:()=>{(e=>{const t={ProjectId:e.Project_Id,ProjectName:e.Project_Name,Est_StartDate:e.Est_Start_Dt?new Date(e.Est_Start_Dt).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],Est_EndDate:e.Est_End_Dt?new Date(e.Est_End_Dt).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],Day_Duration:"",Time_Duration:"",Task_Type:"",Task_Type_Id:"",Status:"1"};K(t),X(!1),J(!0)})(s),r(!0)},sx:{textTransform:"none"},children:"Add Task Type"})]}),(0,L.jsx)(se.Ay,{title:"Modules",dataArray:o,EnableSerialNumber:!0,columns:pe,ButtonArea:null,isExpendable:!1,tableMaxHeight:300})]}):null},he=[(0,se.Lj)("Project_Name","string","Project","left","center",1),(0,se.Lj)("Project_Head_Name","string","Head","left","center",1),(0,se.Lj)("Status_Text","string","Status","left","center",1),{Field_Name:"Est_Start_Dt",ColumnHeader:"Start Date",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.Est_Start_Dt?new Date(t.Est_Start_Dt).toLocaleDateString("en-IN"):"N/A"}},{Field_Name:"Est_End_Dt",ColumnHeader:"End Date",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.Est_End_Dt?new Date(t.Est_End_Dt).toLocaleDateString("en-IN"):"N/A"}},{Field_Name:"Progress_Percentage",ColumnHeader:"Progress",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,L.jsxs)(u.A,{variant:"body2",fontWeight:"bold",children:[t.Progress_Percentage,"%"]})}},{Field_Name:"Task_Details",ColumnHeader:"Task Details",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,L.jsxs)(n.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:.5},children:[(0,L.jsxs)(u.A,{variant:"h6",fontWeight:"bold",children:[t.CompletedTasks||0," / ",t.TodayTaskcounts||0,(0,L.jsx)(o.A,{title:"View Task Details",children:(0,L.jsx)(i.A,{size:"small",onClick:()=>ce(t),sx:{mt:.5}})})]}),(0,L.jsx)(u.A,{variant:"caption",color:"textSecondary",children:"Completed / Total"})]})}},{Field_Name:"Employees",ColumnHeader:"Employees",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,L.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"center"},children:[1===Number(null===N||void 0===N?void 0:N.Add_Rights)&&(0,L.jsx)(o.A,{title:"Manage Employees",children:(0,L.jsx)(i.A,{size:"small",onClick:()=>(e=>{z(e),B(!0)})(t.Project_Id),children:(0,L.jsx)(A.A,{fontSize:"small"})})}),(0,L.jsx)(u.A,{variant:"body2",children:t.EmployeesInvolved})]})}},...1===Number(null===N||void 0===N?void 0:N.Add_Rights)?[{Field_Name:"Actions",ColumnHeader:"Actions",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,L.jsxs)(n.A,{sx:{display:"flex",gap:.5,justifyContent:"center"},children:[1===Number(null===N||void 0===N?void 0:N.Edit_Rights)&&(0,L.jsx)(o.A,{title:"Edit Project",children:(0,L.jsx)(i.A,{size:"small",onClick:()=>(w(t),F(!0),void I(!0)),children:(0,L.jsx)(h.A,{fontSize:"small"})})}),1===Number(null===N||void 0===N?void 0:N.Edit_Rights)&&(0,L.jsx)(o.A,{title:"Delete Project",children:(0,L.jsx)(i.A,{size:"small",color:"error",onClick:()=>(M(t),void H(!0)),children:(0,L.jsx)(y.A,{fontSize:"small"})})})]})}}]:[]];return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(se.Ay,{title:"Active Projects",dataArray:me,EnableSerialNumber:!0,columns:he,ButtonArea:(0,L.jsx)(L.Fragment,{children:1===Number(null===N||void 0===N?void 0:N.Add_Rights)&&(0,L.jsx)(x.A,{variant:"outlined",startIcon:(0,L.jsx)(g.A,{}),onClick:()=>{w(null),F(!1),I(!0)},children:"Create Project"})}),isExpendable:!0,tableMaxHeight:550,expandableComp:e=>(0,L.jsx)(xe,(0,a.A)({},e))}),(0,L.jsx)(ae,{open:Z,onClose:()=>$(!1),projectId:W,projectName:(null===E||void 0===E?void 0:E.Project_Name)||"Project",parseData:ne,taskId:le,contextObj:N}),(0,L.jsx)(ee,{onClose:ue,dialogOpen:U,setDialogOpen:G,isEdit:!1,parseData:ne,projectid:W,onReload:oe,selectedProject:E,reload:e}),(0,L.jsx)(b.A,{open:D,onClose:ue,inputValue:E,isEdit:P,setReload:oe,projectData:W}),(0,L.jsx)(S.A,{open:V,onClose:()=>B(!1),projectId:W,onReload:oe}),(0,L.jsx)(te.A,{open:q,onClose:()=>J(!1),existingTaskType:Y,onCreate:async s=>{try{const a=await(0,k.z)({address:"masters/taskType",method:"POST",headers:{"Content-Type":"application/json"},bodyData:{Mode:1,Task_Type:s.Task_Type,Project_Id:parseInt(s.ProjectId)||parseInt(s.Project_Id),Est_StartDate:s.Est_StartDate,Est_EndDate:s.Est_EndDate,Status:parseInt(s.Status),Day_Duration:parseInt(s.Day_Duration)||0,Hours_Duration:parseInt(s.Hours_Duration)||0}});a.success?(t(!e),T.oR.success("Task type created successfully!"),J(!1)):T.oR.error("Failed to create task type: "+a.message)}catch(a){console.error(a),T.oR.error("Error creating task type.")}},onUpdate:async s=>{try{const a=await(0,k.z)({address:"masters/taskType",method:"PUT",headers:{"Content-Type":"application/json"},bodyData:{Mode:2,Task_Type_Id:parseInt(s.Task_Type_Id),Task_Type:s.Task_Type,Project_Id:parseInt(s.Project_Id),Est_StartDate:s.Est_StartDate,Est_EndDate:s.Est_EndDate,Status:parseInt(s.Status),Day_Duration:parseInt(s.Day_Duration)||0,Hours_Duration:parseInt(s.Hours_Duration)||0}});a.success?(t(!e),T.oR.success("Task type updated successfully!"),J(!1)):T.oR.error("Failed to update task type: "+a.message)}catch(a){console.error(a),T.oR.error("Error updating task type.")}},isEdit:Q}),(0,L.jsxs)(d.A,{open:R,onClose:ue,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[(0,L.jsx)(c.A,{className:"bg-primary text-white mb-2 px-3 py-2",children:"Confirmation"}),(0,L.jsxs)(m.A,{className:"p-4",children:["Do you want to delete the project",(0,L.jsx)("span",{className:"text-primary",children:" "+(null===O||void 0===O?void 0:O.Project_Name)+" "}),"?"]}),(0,L.jsxs)(p.A,{children:[(0,L.jsx)("button",{onClick:()=>H(!1),className:"btn btn-secondary fa-13 shadow",children:"Cancel"}),(0,L.jsx)("button",{onClick:()=>{O&&(0,k.z)({address:"taskManagement/project",method:"DELETE",bodyData:{Project_Id:null===O||void 0===O?void 0:O.Project_Id}}).then(s=>{s.success?(t(!e),T.oR.success(s.message)):T.oR.error(s.message)}).catch(e=>console.error("Fetch Error:",e)),H(!1)},className:"btn btn-danger fa-13 shadow",children:"Delete"})]})]})]})}},48471:(e,t,s)=>{s.d(t,{Ay:()=>R,JT:()=>W,Lj:()=>P,wF:()=>F});var a=s(89379),l=s(65043),r=s(77739),n=s(17392),o=s(41020),i=s(30922),d=s(32143),c=s(2050),u=s(48734),m=s(28076),p=s(39652),x=s(12110),h=s(63336),_=s(79650),j=s(71806),g=s(84882),A=s(58093),y=s(73460),T=s(31159),v=s(97707),k=s(47968),b=s(692),S=s(8737),f=s(58558),C=s(30599),N=s(433),D=s(37762),I=(s(20557),s(11238)),E=s(70579);const w=(e,t)=>e.map(e=>{const s={};return t.forEach((t,a)=>{if(t.isVisible||t.Defult_Display)if(t.isCustomCell&&t.Cell){const l=t.Cell({row:e}),r=t.ColumnHeader?String(t.ColumnHeader).replace(/\s+/g,"_").toLowerCase():"field_".concat(a+1);"string"!==typeof l&&"number"!==typeof l&&"bigint"!==typeof l||(s[r]=l)}else{let a=t.Field_Name;s[a]=e[a]||""}}),s}),P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,a.A)({isVisible:n,Field_Name:e,Fied_Data:t,align:l,verticalAlign:r},s&&{ColumnHeader:s})},F=e=>{let{buttonsData:t=[],ToolTipText:s="Options"}=e;const[a,m]=(0,l.useState)(null),p=Boolean(a);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(r.A,{title:s,children:(0,E.jsx)(n.A,{"aria-describedby":p,onClick:e=>{m(e.currentTarget)},className:"ms-2",size:"small",children:(0,E.jsx)(f.A,{})})}),(0,E.jsx)(o.Ay,{open:p,anchorEl:a,onClose:()=>{m(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,E.jsx)(i.A,{children:t.map((e,t)=>(0,E.jsxs)(d.A,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,E.jsx)(c.A,{children:null===e||void 0===e?void 0:e.icon}),(0,E.jsx)(u.A,{children:null===e||void 0===e?void 0:e.name})]},t))})})]})},W=(e,t)=>{switch(t){case"number":return e?(0,v.jG)(e):e;case"date":return e?(0,v.yc)(e):e;case"time":return e?(0,v.JG)(e):e;case"string":return e;default:return""}},z=e=>{let{dataArray:t=[],columns:s=[],onClickFun:r=null,isExpendable:o=!1,expandableComp:i=null,tableMaxHeight:d=550,initialPageCount:c=20,EnableSerialNumber:u=!1,CellSize:f="small",disablePagination:P=!1,title:z="",PDFPrintOption:R=!1,ExcelPrintOption:H=!1,maxHeightOption:O=!1,ButtonArea:M=null,MenuButtons:V=[],bodyFontSizePx:L=13,headerFontSizePx:B=13}=e;const[U,G]=(0,l.useState)(0),[q,J]=(0,l.useState)(c),[Y,K]=(0,l.useState)([]),[Q,X]=(0,l.useState)(!0),Z=Q&&O?" max-content ":d,$=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],ee=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],te=(e=>{if(!Y.length)return e;return[...e].sort((e,t)=>{for(const s of Y){const{columnId:a,direction:l}=s,r=e[a],n=t[a];if(r!==n)return"asc"===l?r>n?1:-1:r<n?1:-1}return 0})})(t),se=U*q,ae=se+q,le=te.slice(se,ae),re=e=>{let{row:t,index:a}=e;const[d,c]=(0,l.useState)(!1),x="20px";return(0,E.jsxs)(l.Fragment,{children:[(0,E.jsxs)(m.A,{children:[!0===o&&i&&(0,E.jsx)(p.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(L,"px")},children:(0,E.jsx)(n.A,{size:"small",onClick:()=>c(e=>!e),children:d?(0,E.jsx)(S.A,{sx:{fontSize:x}}):(0,E.jsx)(b.A,{sx:{fontSize:x}})})}),!0===u&&(0,E.jsx)(p.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(L,"px")},children:q*U+a+1}),null===s||void 0===s?void 0:s.map((e,s)=>{var l,n;const o=(0,v.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,v.id)(null===e||void 0===e?void 0:e.isVisible,1),i=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,d=!i,c=(t,s,a)=>null!==e&&void 0!==e&&e.tdClass?" ".concat(null===e||void 0===e?void 0:e.tdClass({row:t,Field_Name:s,index:a})," "):"",u=e.align?null===(l=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===l?void 0:l.class:"",m=e.verticalAlign?null===(n=ee.find(t=>t.type===String(e.verticalAlign).toLowerCase()))||void 0===n?void 0:n.class:" vctr ";if(o&&d){const l=Object.entries(t).find(t=>{let[s]=t;return s===e.Field_Name});return(0,E.jsx)(p.A,{className:"border-end ".concat(u," ").concat(m," ").concat(c(t,e.Field_Name,a)),sx:{fontSize:"".concat(L,"px")},onClick:()=>r?r(t):console.log("Function not supplied"),children:l?W(l[1],null===e||void 0===e?void 0:e.Fied_Data):"-"},s)}return o&&i?(0,E.jsx)(p.A,{className:"border-end ".concat(u," ").concat(m," ").concat(c(t,e.Field_Name,a)),sx:{fontSize:"".concat(L,"px")},children:e.Cell({row:t,Field_Name:e.Field_Name,index:a})},s):(0,E.jsx)(p.A,{sx:{fontSize:"".concat(L,"px")},className:"border-end ".concat(u," ").concat(m),children:"-"},s)})]}),!0===o&&i&&d&&(0,E.jsx)(m.A,{children:(0,E.jsx)(p.A,{colSpan:Number(null===s||void 0===s?void 0:s.length)+(!0===u?2:1),children:i({row:t,index:a})})})]})};return(0,E.jsxs)(x.A,{className:"rounded-3 bg-white overflow-hidden",component:h.A,children:[(0,E.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(R||H||V.length>0||O)&&(0,E.jsx)(F,{ToolTipText:"Table Options",buttonsData:[...O?[{name:"Max Height",icon:Q?(0,E.jsx)(N.A,{fontSize:"small",color:"primary"}):(0,E.jsx)(C.A,{fontSize:"small"}),onclick:()=>X(e=>!e),disabled:(0,v.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...R?[{name:"PDF Print",icon:(0,E.jsx)(k.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const s=new D.default,l=w(e,t),r=t.filter(e=>e.isVisible||e.Defult_Display).map(e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase()),n=l.map(e=>r.map(t=>e[t])).map((e,t)=>(0,a.A)((0,a.A)({},e),{},{Sno:t+1}));s.autoTable({head:[r],body:n}),s.save("table.pdf")}catch(s){console.error(s)}})(t,s),disabled:(0,v.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...H?[{name:"Excel Print",icon:(0,E.jsx)(k.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const s=w(e,t),a=I.Wp.json_to_sheet(s),l=I.Wp.book_new();I.Wp.book_append_sheet(l,a,"Data"),I._h(l,"table.xlsx")}catch(s){console.error(s)}})(t,s),disabled:(0,v.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...V]}),M&&M,z&&(0,E.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:z})]}),(0,E.jsx)(_.A,{sx:{maxHeight:Z},children:(0,E.jsxs)(j.A,{stickyHeader:!0,size:f,children:[(0,E.jsx)(g.A,{children:(0,E.jsxs)(m.A,{children:[o&&i&&(0,E.jsx)(p.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(B,"px"),backgroundColor:"#EDF0F7"},children:"#"}),u&&(0,E.jsx)(p.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(B,"px"),backgroundColor:"#EDF0F7"},children:"SNo"}),s.map((e,t)=>{const s=(0,v.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,v.id)(null===e||void 0===e?void 0:e.isVisible,1),l=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,r=Y.find(t=>t.columnId===e.Field_Name),n=r?r.direction:"asc";var o,i,d,c;return s?l?(0,E.jsx)(p.A,{className:"fw-bold border-end border-top "+(e.align?null===(o=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===o?void 0:o.class:""),sx:{fontSize:"".concat(B,"px"),backgroundColor:"#EDF0F7"},sortDirection:!!r&&n,children:(0,E.jsx)(A.A,{active:!!r,direction:n,onClick:()=>(e=>{const t=Y.find(t=>t.columnId===e);if(t){const s="asc"===t.direction;K(Y.map(t=>t.columnId===e?(0,a.A)((0,a.A)({},t),{},{direction:s?"desc":"asc"}):t))}else K([...Y,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(i=e.Field_Name)||void 0===i?void 0:i.replace(/_/g," "))})},t):(0,E.jsx)(p.A,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(d=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===d?void 0:d.class:""),sx:{fontSize:"".concat(B,"px"),backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(c=e.Field_Name)||void 0===c?void 0:c.replace(/_/g," "))},t):null})]})}),(0,E.jsxs)(y.A,{children:[(P?te:le).map((e,t)=>(0,E.jsx)(re,{row:e,index:t},t)),0===t.length&&(0,E.jsx)(m.A,{children:(0,E.jsx)(p.A,{colSpan:s.length+(!0===o&&i?1:0)+(!0===u?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!P&&0!==le.length&&(0,E.jsx)("div",{className:"p-2 pb-0",children:(0,E.jsx)(T.A,{component:"div",count:t.length,page:U,onPageChange:(e,t)=>{G(t)},rowsPerPage:q,onRowsPerPageChange:e=>{J(parseInt(e.target.value,10)),G(0)},rowsPerPageOptions:Array.from(new Set([c,5,20,50,100,200,500])).sort((e,t)=>e-t),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};z.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const R=z}}]);
//# sourceMappingURL=1599.bee1d3f1.chunk.js.map