"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[173],{33064:(e,a,o)=>{o.d(a,{A:()=>C});var n=o(98587),t=o(58168),r=o(65043),s=o(58387),c=o(68606),d=o(6803),i=o(34535),l=o(61475),u=o(54516),h=o(85213),m=o(75429),p=o(57056),A=o(32400);function b(e){return(0,A.Ay)("PrivateSwitchBase",e)}(0,p.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var g=o(70579);const f=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],x=(0,i.Ay)(m.A)(e=>{let{ownerState:a}=e;return(0,t.A)({padding:9,borderRadius:"50%"},"start"===a.edge&&{marginLeft:"small"===a.size?-3:-12},"end"===a.edge&&{marginRight:"small"===a.size?-3:-12})}),v=(0,i.Ay)("input",{shouldForwardProp:l.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),C=r.forwardRef(function(e,a){const{autoFocus:o,checked:r,checkedIcon:i,className:l,defaultChecked:m,disabled:p,disableFocusRipple:A=!1,edge:C=!1,icon:S,id:k,inputProps:R,inputRef:y,name:B,onBlur:I,onChange:j,onFocus:z,readOnly:O,required:F=!1,tabIndex:w,type:E,value:P}=e,M=(0,n.A)(e,f),[N,H]=(0,u.A)({controlled:r,default:Boolean(m),name:"SwitchBase",state:"checked"}),T=(0,h.A)();let D=p;T&&"undefined"===typeof D&&(D=T.disabled);const L="checkbox"===E||"radio"===E,U=(0,t.A)({},e,{checked:N,disabled:D,disableFocusRipple:A,edge:C}),J=(e=>{const{classes:a,checked:o,disabled:n,edge:t}=e,r={root:["root",o&&"checked",n&&"disabled",t&&"edge".concat((0,d.A)(t))],input:["input"]};return(0,c.A)(r,b,a)})(U);return(0,g.jsxs)(x,(0,t.A)({component:"span",className:(0,s.A)(J.root,l),centerRipple:!0,focusRipple:!A,disabled:D,tabIndex:null,role:void 0,onFocus:e=>{z&&z(e),T&&T.onFocus&&T.onFocus(e)},onBlur:e=>{I&&I(e),T&&T.onBlur&&T.onBlur(e)},ownerState:U,ref:a},M,{children:[(0,g.jsx)(v,(0,t.A)({autoFocus:o,checked:r,defaultChecked:m,className:J.input,disabled:D,id:L?k:void 0,name:B,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const a=e.target.checked;H(a),j&&j(e,a)},readOnly:O,ref:y,required:F,ownerState:U,tabIndex:w,type:E},"checkbox"===E&&void 0===P?{}:{value:P},R)),N?i:S]}))})},41053:(e,a,o)=>{o.d(a,{A:()=>n});const n=o(65043).createContext(void 0)},47509:(e,a,o)=>{o.r(a),o.d(a,{default:()=>x});var n=o(89379),t=o(65043),r=o(79650),s=o(63336),c=o(71806),d=o(84882),i=o(28076),l=o(39652),u=o(73460),h=o(51962),m=o(11906),p=o(20656),A=o(91036),b=(o(92342),o(65074)),g=o(63406),f=o(70579);const x=e=>{const[a,o]=(0,t.useState)([]),[x,v]=(0,t.useState)([]),[C,S]=(0,t.useState)([]),[k,R]=(0,t.useState)(null),[y,B]=(0,t.useState)(!1),I=JSON.parse(localStorage.getItem("user")||"{}"),j=null===I||void 0===I?void 0:I.Company_id;(0,t.useEffect)(()=>{j&&(0,b.z)({address:"masters/users?Company_id=".concat(j)}).then(e=>{e.success?o(e.data):A.oR.error("Failed to load users")}).catch(e=>console.error(e))},[j]),(0,t.useEffect)(()=>{k&&(0,b.z)({address:"authorization/userBranches?UserId=".concat(k.value)}).then(e=>{e.success?(v(e.data),S(e.data)):A.oR.error("Failed to load branches")}).catch(e=>console.error(e))},[k]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"row",children:(0,f.jsx)("div",{className:"col-sm-4 pt-1",children:(0,f.jsx)(p.Ay,{value:k,onChange:e=>R(e),options:a.map(e=>({value:e.UserId,label:e.Name})),styles:g.MR,isSearchable:!0,placeholder:"Select User"})})}),(0,f.jsx)("br",{}),(0,f.jsx)("h6",{style:{marginBottom:"0.5em",borderBottom:"2px solid blue",width:"fit-content"},children:"Branch Access Control"}),C.length>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(r.A,{component:s.A,sx:{maxHeight:650},children:(0,f.jsxs)(c.A,{stickyHeader:!0,"aria-label":"branch-access-table",children:[(0,f.jsx)(d.A,{children:(0,f.jsxs)(i.A,{children:[(0,f.jsx)(l.A,{sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"ID"}),(0,f.jsx)(l.A,{sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Branch Name"}),(0,f.jsx)(l.A,{sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Action"})]})}),(0,f.jsx)(u.A,{children:C.map(e=>(0,f.jsxs)(i.A,{hover:!0,children:[(0,f.jsx)(l.A,{children:e.id}),(0,f.jsx)(l.A,{children:e.BranchName}),(0,f.jsx)(l.A,{children:(0,f.jsx)(h.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:1===e.HasAccess,onChange:a=>{return o=e.id,t=a.target.checked,void S(e=>e.map(e=>e.id===o?(0,n.A)((0,n.A)({},e),{},{HasAccess:t?1:0}):e));var o,t}})})]},e.id))})]})}),(0,f.jsx)("div",{style:{marginTop:"1em",textAlign:"right"},children:(0,f.jsx)(m.A,{variant:"contained",color:"primary",onClick:()=>{k?(B(!0),e.loadingOn&&e.loadingOn(),(0,b.z)({address:"authorization/userBranches/saveAll",method:"POST",bodyData:{UserId:k.value,Branches:C.map(e=>({BranchId:e.id,HasAccess:e.HasAccess}))},headers:{"Content-Type":"application/json"}}).then(e=>{e.success?(A.oR.success("Branch access updated successfully"),v([...C])):(A.oR.error(e.message||"Failed to update branch access"),S([...x]))}).catch(e=>{console.error(e),A.oR.error("Error while saving branch access"),S([...x])}).finally(()=>{B(!1),e.loadingOff&&e.loadingOff()})):A.oR.error("Please select a user first")},disabled:y,children:y?"Saving...":"Save"})})]})]})}},51962:(e,a,o)=>{o.d(a,{A:()=>j});var n=o(98587),t=o(58168),r=o(65043),s=o(58387),c=o(68606),d=o(67266),i=o(33064),l=o(59662),u=o(70579);const h=(0,l.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),m=(0,l.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),p=(0,l.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var A=o(6803),b=o(6431),g=o(34535),f=o(61475),x=o(57056),v=o(32400);function C(e){return(0,v.Ay)("MuiCheckbox",e)}const S=(0,x.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),k=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],R=(0,g.Ay)(i.A,{shouldForwardProp:e=>(0,f.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.root,o.indeterminate&&a.indeterminate,a["size".concat((0,A.A)(o.size))],"default"!==o.color&&a["color".concat((0,A.A)(o.color))]]}})(e=>{let{theme:a,ownerState:o}=e;return(0,t.A)({color:(a.vars||a).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:a.vars?"rgba(".concat("default"===o.color?a.vars.palette.action.activeChannel:a.vars.palette[o.color].mainChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,d.X4)("default"===o.color?a.palette.action.active:a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==o.color&&{["&.".concat(S.checked,", &.").concat(S.indeterminate)]:{color:(a.vars||a).palette[o.color].main},["&.".concat(S.disabled)]:{color:(a.vars||a).palette.action.disabled}})}),y=(0,u.jsx)(m,{}),B=(0,u.jsx)(h,{}),I=(0,u.jsx)(p,{}),j=r.forwardRef(function(e,a){var o,d;const i=(0,b.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:l=y,color:h="primary",icon:m=B,indeterminate:p=!1,indeterminateIcon:g=I,inputProps:f,size:x="medium",className:v}=i,S=(0,n.A)(i,k),j=p?g:m,z=p?g:l,O=(0,t.A)({},i,{color:h,indeterminate:p,size:x}),F=(e=>{const{classes:a,indeterminate:o,color:n,size:r}=e,s={root:["root",o&&"indeterminate","color".concat((0,A.A)(n)),"size".concat((0,A.A)(r))]},d=(0,c.A)(s,C,a);return(0,t.A)({},a,d)})(O);return(0,u.jsx)(R,(0,t.A)({type:"checkbox",inputProps:(0,t.A)({"data-indeterminate":p},f),icon:r.cloneElement(j,{fontSize:null!=(o=j.props.fontSize)?o:x}),checkedIcon:r.cloneElement(z,{fontSize:null!=(d=z.props.fontSize)?d:x}),ownerState:O,ref:a,className:(0,s.A)(F.root,v)},S,{classes:F}))})},63406:(e,a,o)=>{o.d(a,{zU:()=>c,ex:()=>d,MR:()=>s,Ap:()=>r,FX:()=>i});var n=o(89379);const t=o.p+"static/media/smt.aa4d4f940bbebff07a57.png",r={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},s={menu:(e,a)=>(0,n.A)((0,n.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,n.A)((0,n.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,n.A)((0,n.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,a)=>(0,n.A)((0,n.A)({},e),{},{backgroundColor:a.isSelected?"#2684FF":a.isFocused?"#E2ECF9":"white",color:a.isSelected?"white":"#333",padding:"10px 12px"})},c=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],d=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:t,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:t,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:t,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],i=[{name:"PURCHASE_ORDER",alias:"Purchase Order",moduleCode:"PO"},{name:"PURCHASE_INVOICE",alias:"Purchase Invoice",moduleCode:"PI"},{name:"SALE_ORDER",alias:"Sale Order",moduleCode:"SO"},{name:"SALE_INVOICE",alias:"Sale Invoice",moduleCode:"SI"},{name:"JOURNAL",alias:"Journal",moduleCode:"JO"},{name:"STOCK_JOURNAL",alias:"Stock Journal",moduleCode:"SJ"},{name:"PAYMENT",alias:"Payment",moduleCode:"PAY"},{name:"RECEIPT",alias:"Receipt",moduleCode:"REC"},{name:"CONTRA",alias:"Contra",moduleCode:"CON"}]},85213:(e,a,o)=>{o.d(a,{A:()=>r});var n=o(65043),t=o(41053);function r(){return n.useContext(t.A)}}}]);
//# sourceMappingURL=173.400493e0.chunk.js.map