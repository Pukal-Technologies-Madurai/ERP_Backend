"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[5743],{10489:(e,t,l)=>{l.d(t,{A:()=>r});l(65043);var o=l(83462),s=l(26600),a=l(35316),n=l(29347),i=l(11906),d=l(70579);const r=e=>{let{open:t=!1,onClose:l,children:r,title:c,onSubmit:u,submitText:v="Submit",closeText:m="Close",maxWidth:h="sm",fullWidth:x=!0,isSubmit:j=!1,startAction:p}=e;return(0,d.jsxs)(o.A,{open:t,onClose:l,fullWidth:x,maxWidth:h,children:[c&&(0,d.jsx)(s.A,{children:c}),(0,d.jsx)(a.A,{children:r}),(0,d.jsxs)(n.A,{className:"".concat(p?"d-flex justify-content-between":""),children:[p&&(0,d.jsx)("div",{children:p}),(0,d.jsxs)("div",{children:[(0,d.jsx)(i.A,{onClick:l,children:m}),u&&(0,d.jsx)(i.A,{variant:"contained",onClick:u,type:j?"submit":"button",className:"ms-2",children:v})]})]})]})}},14792:(e,t,l)=>{l.d(t,{A:()=>s});var o=l(70579);const s=()=>(0,o.jsx)("span",{style:{color:"red",fontWeight:"bold",fontSize:"1em"},children:" *"})},34496:(e,t,l)=>{l.d(t,{A:()=>a});var o=l(59662),s=l(70579);const a=(0,o.A)((0,s.jsx)("path",{d:"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z"}),"ClearAll")},59383:(e,t,l)=>{l.d(t,{A:()=>a});var o=l(59662),s=l(70579);const a=(0,o.A)((0,s.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")},65743:(e,t,l)=>{l.r(t),l.d(t,{default:()=>D});var o=l(65043),s=l(89379),a=l(17392),n=l(11906),i=l(83462),d=l(26600),r=l(35316),c=l(29347),u=l(48471),v=l(73216),m=l(22520),h=l(83560),x=l(59383),j=l(34496),p=l(79484),A=l(65074),g=l(20656),f=l(63406),b=l(33438),N=l(49652),_=l(91036),C=l(14792),y=l(70579);const w=e=>{var t;let{loadingOn:l,loadingOff:u,children:v,productValue:h={},onSubmit:x,open:j=!1,close:p=()=>{}}=e;const w="border fa-14 vctr",[S,I]=(0,o.useState)([]),[T,G]=(0,o.useState)([]),[P,O]=(0,o.useState)([]),[L,R]=(0,o.useState)(N.VQ);(0,o.useEffect)(()=>{if(j){(async()=>{try{const[e,t,l]=await Promise.all([(0,A.z)({address:"masters/products/allProducts"}),(0,A.z)({address:"dataEntry/godownLocationMaster"}),(0,A.z)({address:"masters/uom"})]),o=(e.success?e.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Product_Name).localeCompare(null===t||void 0===t?void 0:t.Product_Name)),s=(t.success?t.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Godown_Name).localeCompare(null===t||void 0===t?void 0:t.Godown_Name)),a=(l.success?l.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Units).localeCompare(null===t||void 0===t?void 0:t.Units));G(o),I(s),O(a)}catch(e){console.error("Error fetching data:",e)}})()}},[j,l,u]),(0,o.useEffect)(()=>{(0,m.IQ)(null===h||void 0===h?void 0:h.Arr_Id)&&R(e=>Object.fromEntries(Object.entries(e).map(e=>{let[t,l]=e;return"Arrival_Date"===t?[t,h[t]?(0,m.ny)(h[t]):l]:[t,h[t]?h[t]:l]})))},[h]);const D=()=>{p&&p(),R(N.VQ)};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{className:"p-0 m-0",children:v}),(0,y.jsx)(i.A,{open:j,onClose:D,fullWidth:!0,maxWidth:"sm",children:(0,y.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!(0,m.IQ)(L.Product_Id))return _.oR.error("Select Item");(()=>{const e=(0,m.IQ)(null===L||void 0===L?void 0:L.Arr_Id)?"PUT":"POST";(0,A.z)({address:"inventory/tripSheet/arrivalEntry",method:e,bodyData:L,loadingOn:l,loadingOff:u}).then(e=>{e.success?(_.oR.success(e.message),D(),x&&x()):_.oR.error(e.message)}).catch(e=>console.log(e))})()},children:[(0,y.jsxs)(d.A,{className:"d-flex align-items-center",children:[(0,y.jsx)("span",{className:"flex-grow-1",children:"Add Arrival Details"}),(0,y.jsx)(a.A,{size:"small",type:"button",color:"error",onClick:D,children:(0,y.jsx)(b.A,{})})]}),(0,y.jsx)(r.A,{children:(0,y.jsx)("table",{className:"table m-0",children:(0,y.jsxs)("tbody",{children:[(0,y.jsxs)("tr",{children:[(0,y.jsxs)("td",{className:w,children:["Date ",(0,y.jsx)(C.A,{})]}),(0,y.jsx)("td",{className:w,children:(0,y.jsx)("input",{type:"date",value:L.Arrival_Date,onChange:e=>R(t=>(0,s.A)((0,s.A)({},t),{},{Arrival_Date:e.target.value})),className:"cus-inpt p-2 ",required:!0})})]}),(0,y.jsxs)("tr",{children:[(0,y.jsxs)("td",{className:w,children:["Item Name ",(0,y.jsx)(C.A,{})]}),(0,y.jsx)("td",{className:w,children:(0,y.jsx)(g.Ay,{value:{value:L.Product_Id,label:null===(t=T.find(e=>(0,m.id)(e.Product_Id,L.Product_Id)))||void 0===t?void 0:t.Product_Name},onChange:e=>{const t=Number(e.value||0),l=T.find(e=>(0,m.id)(e.Product_Id,t));R(t=>(0,s.A)((0,s.A)({},t),{},{Product_Id:e.value,HSN_Code:null===l||void 0===l?void 0:l.HSN_Code,Gst_P:null===l||void 0===l?void 0:l.Gst_P,Cgst_P:null===l||void 0===l?void 0:l.Cgst_P,Sgst_P:null===l||void 0===l?void 0:l.Sgst_P,Igst_P:null===l||void 0===l?void 0:l.Igst_P,Unit_Id:null===l||void 0===l?void 0:l.UOM_Id,Units:null===l||void 0===l?void 0:l.Units}))},options:[{value:"",label:"select product",isDisabled:!0},...T.map(e=>({value:null===e||void 0===e?void 0:e.Product_Id,label:null===e||void 0===e?void 0:e.Product_Name}))],styles:f.MR,required:!0,isSearchable:!0,placeholder:"Select Product",maxMenuHeight:200,filterOption:m.GI})})]}),(0,y.jsxs)("tr",{children:[(0,y.jsxs)("td",{className:w,children:["From Godown ",(0,y.jsx)(C.A,{})]}),(0,y.jsx)("td",{className:w,children:(0,y.jsxs)("select",{value:L.From_Location,onChange:e=>R((0,s.A)((0,s.A)({},L),{},{From_Location:e.target.value,BatchLocation:S.find(t=>(0,m.id)(t.Godown_Id,e.target.value)).Godown_Name||""})),className:"cus-inpt p-2",required:!0,children:[(0,y.jsx)("option",{value:"",disabled:!0,children:"select godown"}),S.filter(e=>!(0,m.id)(e.Godown_Id,L.To_Location)).map((e,t)=>(0,y.jsx)("option",{value:e.Godown_Id,children:e.Godown_Name},t))]})})]}),(0,y.jsxs)("tr",{children:[(0,y.jsxs)("td",{className:w,children:["To Godown ",(0,y.jsx)(C.A,{})]}),(0,y.jsx)("td",{className:w,children:(0,y.jsxs)("select",{value:L.To_Location,onChange:e=>R((0,s.A)((0,s.A)({},L),{},{To_Location:e.target.value})),className:"cus-inpt p-2",required:!0,children:[(0,y.jsx)("option",{value:"",disabled:!0,children:"select godown"}),S.filter(e=>!(0,m.id)(e.Godown_Id,L.From_Location)).map((e,t)=>(0,y.jsx)("option",{value:e.Godown_Id,children:e.Godown_Name},t))]})})]}),(0,y.jsxs)("tr",{children:[(0,y.jsxs)("td",{className:w,children:["Weight ",(0,y.jsx)(C.A,{})]}),(0,y.jsxs)("td",{className:w,children:[(0,y.jsx)("input",{className:"cus-inpt p-2 w-50",value:L.QTY?L.QTY:"",required:!0,placeholder:"Weight",onInput:m.BE,onChange:e=>{const t=(0,m.IQ)(L.Gst_Rate)?(0,m.JH)(e.target.value,L.Gst_Rate):L.Taxable_Value;R(l=>(0,s.A)((0,s.A)({},l),{},{QTY:e.target.value,Taxable_Value:t,Total_Value:t}))}}),(0,y.jsxs)("select",{className:"cus-inpt p-2 w-50",value:L.Unit_Id,placeholder:"Units ex: kg, l, ml...",onChange:e=>R(t=>(0,s.A)((0,s.A)({},t),{},{Unit_Id:e.target.value,Units:P.find(t=>(0,m.id)(t.Unit_Id,e.target.value)).Units})),children:[(0,y.jsx)("option",{value:"",disabled:!0,children:"select uom"}),P.map((e,t)=>(0,y.jsx)("option",{value:e.Unit_Id,children:e.Units},t))]})]})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:w,children:"Rate"}),(0,y.jsx)("td",{className:w,children:(0,y.jsx)("input",{className:"cus-inpt p-2",value:L.Gst_Rate?L.Gst_Rate:"",placeholder:"Rate",onInput:m.BE,onChange:e=>{const t=(0,m.IQ)(L.QTY)?(0,m.JH)(e.target.value,L.QTY):L.Taxable_Value;R(l=>(0,s.A)((0,s.A)({},l),{},{Gst_Rate:e.target.value,Taxable_Value:t,Total_Value:t}))}})})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:w,children:"BillNo"}),(0,y.jsx)("td",{className:w,children:(0,y.jsx)("input",{value:L.BillNo,onChange:e=>R((0,s.A)((0,s.A)({},L),{},{BillNo:e.target.value})),className:"cus-inpt p-2"})})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:w,children:"Concern"}),(0,y.jsx)("td",{className:w,children:(0,y.jsx)("input",{value:L.Concern,onChange:e=>R((0,s.A)((0,s.A)({},L),{},{Concern:e.target.value})),className:"cus-inpt p-2"})})]})]})})}),(0,y.jsxs)(c.A,{children:[(0,y.jsx)(n.A,{type:"button",onClick:D,children:"close"}),(0,y.jsx)(n.A,{type:"submit",variant:"outlined",children:(0,m.IQ)(L.Id)?"Update":"Add"})]})]})})]})},S={Fromdate:(0,m.ny)(),Todate:(0,m.ny)(),FromGodown:{label:"Select Godown",value:""},ToGodown:{label:"Select Godown",value:""},Items:{label:"Select Product",value:""},TripConvertion:{label:"ALL",value:""}},I=e=>{let{loadingOn:t,loadingOff:l,switchDisplay:b}=e;(0,v.zy)();const N="arrival_master_list",[_,C]=(0,o.useState)([]),[I,T]=(0,o.useState)((0,s.A)((0,s.A)({},S),{},{filterDialog:!1,refresh:!1,addDialog:!1})),[G,P]=(0,o.useState)({products:[],fromLocations:[],toLocations:[]});(0,o.useEffect)(()=>{(0,A.z)({address:"inventory/tripSheet/arrivalEntry/filters"}).then(e=>{e.success&&P(t=>{var l,o,a;return(0,s.A)((0,s.A)({},t),{},{products:(0,m.$r)(null===e||void 0===e||null===(l=e.others)||void 0===l?void 0:l.products),fromLocations:(0,m.$r)(null===e||void 0===e||null===(o=e.others)||void 0===o?void 0:o.fromLocations),toLocations:(0,m.$r)(null===e||void 0===e||null===(a=e.others)||void 0===a?void 0:a.toLocations)})})}).catch(e=>console.error(e))},[]),(0,o.useEffect)(()=>{const e=(0,m.vU)(N);T(t=>(0,s.A)((0,s.A)({},t),e))},[]),(0,o.useEffect)(()=>{const{Fromdate:e,Todate:o,FromGodown:s,ToGodown:a,Items:n,TripConvertion:i}=I;t&&t();const d="Converted"===(null===i||void 0===i?void 0:i.value)?1:"Not Converted"===(null===i||void 0===i?void 0:i.value)?0:"ALL";(0,A.z)({address:"inventory/tripSheet/arrivalEntry?\n            Fromdate=".concat(e,"&\n            Todate=").concat(o,"&\n            FromGodown=").concat((null===s||void 0===s?void 0:s.value)||"","&\n            ToGodown=").concat((null===a||void 0===a?void 0:a.value)||"","&\n            ProductId=").concat((null===n||void 0===n?void 0:n.value)||"","&\n            convertedStatus=").concat(d)}).then(e=>{e.success?C(e.data):C([])}).finally(()=>{l&&l()}).catch(e=>console.error(e)),(0,m.Mb)(N,{Fromdate:e,Todate:o,FromGodown:s,ToGodown:a,Items:n,TripConvertion:i})},[I.refresh]);const O=()=>{T(e=>(0,s.A)((0,s.A)({},e),{},{filterDialog:!1}))},L=e=>{let{row:n}=e;const[i,d]=(0,o.useState)(!1);return!(0,m.IQ)(null===n||void 0===n?void 0:n.Trip_Id)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(a.A,{onClick:()=>d(!0),children:(0,y.jsx)(h.A,{className:"fa-20"})}),i&&(0,y.jsx)(w,{productValue:(0,s.A)((0,s.A)({},n),{},{dialog:i}),open:i,close:()=>d(!1),onSubmit:()=>{d(!1),T(e=>(0,s.A)((0,s.A)({},e),{},{refresh:!e.refresh}))},loadingOff:l,loadingOn:t})]})};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.Ay,{dataArray:_,title:"Arrival List",maxHeightOption:!0,ExcelPrintOption:!0,EnableSerialNumber:!0,initialPageCount:10,headerFontSizePx:13,bodyFontSizePx:11,ButtonArea:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(a.A,{size:"small",onClick:()=>T(e=>(0,s.A)((0,s.A)({},e),{},{filterDialog:!0})),children:(0,y.jsx)(x.A,{})}),(0,y.jsx)(w,{onSubmit:()=>T(e=>(0,s.A)((0,s.A)({},e),{},{refresh:!e.refresh})),open:I.addDialog,close:()=>T(e=>(0,s.A)((0,s.A)({},e),{},{addDialog:!1})),loadingOff:l,loadingOn:t,children:(0,y.jsx)(n.A,{onClick:b,children:"Add"})})]}),columns:[(0,u.Lj)("Arrival_Date","date","Date"),(0,u.Lj)("Product_Name","string","Item"),(0,u.Lj)("QTY","string","Weight"),(0,u.Lj)("Gst_Rate","string","Rate"),(0,u.Lj)("Batch_No","string","Batch"),(0,u.Lj)("FromLocation","string","From"),(0,u.Lj)("ToLocation","string","To"),{isVisible:1,ColumnHeader:"Trip-?",isCustomCell:!0,Cell:e=>{let{row:t}=e;const l=(0,m.IQ)(null===t||void 0===t?void 0:t.Arrival_Id);return(0,y.jsx)("span",{className:"cus-badge text-white fa-10 fw-bold ".concat(l?"bg-success":"bg-warning"),children:l?"Converted":"Not"})}},{isVisible:1,ColumnHeader:"P-Orders",isCustomCell:!0,Cell:e=>{let{row:t}=e;const l=(0,m.id)(null===t||void 0===t?void 0:t.ConvertedAsOrder,1);return(0,y.jsx)("span",{className:"cus-badge text-white fa-10 fw-bold ".concat(l?" bg-success ":" bg-warning "),children:l?"Converted":"Not"})}},{isVisible:1,ColumnHeader:"P-Invoices",isCustomCell:!0,Cell:e=>{let{row:t}=e;const l=(0,m.id)(null===t||void 0===t?void 0:t.ConvertedAsInvoice,1);return(0,y.jsx)("span",{className:"cus-badge text-white fa-10 fw-bold ".concat(l?" bg-success ":" bg-warning "),children:l?"Converted":"Not"})}},{isVisible:1,ColumnHeader:"Action",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,y.jsx)(L,{row:t})}}]}),(0,y.jsxs)(i.A,{open:I.filterDialog,onClose:O,fullWidth:!0,maxWidth:"md",children:[(0,y.jsx)(d.A,{children:"Filters"}),(0,y.jsx)(r.A,{children:(0,y.jsx)("div",{className:"table-responsive pb-4",children:(0,y.jsx)("table",{className:"table",children:(0,y.jsxs)("tbody",{children:[(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,y.jsx)("td",{children:(0,y.jsx)("input",{type:"date",value:I.Fromdate,onChange:e=>T((0,s.A)((0,s.A)({},I),{},{Fromdate:e.target.value})),className:"cus-inpt"})}),(0,y.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,y.jsx)("td",{children:(0,y.jsx)("input",{type:"date",value:I.Todate,onChange:e=>T((0,s.A)((0,s.A)({},I),{},{Todate:e.target.value})),className:"cus-inpt"})})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{style:{verticalAlign:"middle"},children:"Items"}),(0,y.jsx)("td",{colSpan:3,children:(0,y.jsx)(g.Ay,{value:I.Items,onChange:e=>T(t=>(0,s.A)((0,s.A)({},t),{},{Items:e})),menuPortalTarget:document.body,options:G.products,styles:f.MR,isSearchable:!0,placeholder:"Select Items",maxMenuHeight:300})})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{style:{verticalAlign:"middle"},children:"From Godown"}),(0,y.jsx)("td",{colSpan:3,children:(0,y.jsx)(g.Ay,{value:I.FromGodown,onChange:e=>T(t=>(0,s.A)((0,s.A)({},t),{},{FromGodown:e})),menuPortalTarget:document.body,options:G.fromLocations,styles:f.MR,isSearchable:!0,placeholder:"Select From Godown",maxMenuHeight:300})})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{style:{verticalAlign:"middle"},children:"To Godown"}),(0,y.jsx)("td",{colSpan:3,children:(0,y.jsx)(g.Ay,{value:I.ToGodown,onChange:e=>{T(t=>(0,s.A)((0,s.A)({},t),{},{ToGodown:e}))},menuPortalTarget:document.body,options:G.toLocations,styles:f.MR,isSearchable:!0,placeholder:"Select To Godown",maxMenuHeight:300})})]}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{style:{verticalAlign:"middle"},children:"Trip Convertion"}),(0,y.jsx)("td",{colSpan:3,children:(0,y.jsxs)("select",{value:I.TripConvertion,onChange:e=>T(t=>(0,s.A)((0,s.A)({},t),{},{TripConvertion:e.target.value})),className:"cus-inpt p-2",children:[(0,y.jsx)("option",{value:"",children:"ALL"}),(0,y.jsx)("option",{value:"Converted",children:"Converted"}),(0,y.jsx)("option",{value:"Not Converted",children:"Not Converted"})]})})]})]})})})}),(0,y.jsxs)(c.A,{children:[(0,y.jsx)(n.A,{onClick:()=>T(e=>(0,s.A)((0,s.A)({},S),{},{filterDialog:!0,refresh:!e.refresh})),startIcon:(0,y.jsx)(j.A,{}),color:"error",children:"Reset"}),(0,y.jsx)(n.A,{onClick:O,children:"close"}),(0,y.jsx)(n.A,{onClick:()=>T(e=>(0,s.A)((0,s.A)({},e),{},{filterDialog:!1,refresh:!e.refresh})),startIcon:(0,y.jsx)(p.A,{}),children:"Search"})]})]})]})};var T=l(12110),G=l(26494),P=l(51387),O=l(10489);const L={fromGodown:{value:"",label:"Select Godown"},toGodown:{value:"",label:"Select Godown"},items:[],tripType:N.d1[0],activityDate:(0,m.ny)()},R=e=>{let{loadingOn:t,loadingOff:l,switchDisplay:i}=e;const[d,r]=(0,o.useState)(L),[c,u]=(0,o.useState)([]),[v,h]=(0,o.useState)([]),[x,j]=(0,o.useState)([]),[p,b]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(0,m.gf)(d.fromGodown.value)&&"OTHER_GODOWN"===d.tripType.value?(0,A.z)({address:"reports/storageStock/godownWise?Godown_Id=".concat(d.fromGodown.value),loadingOn:t,loadingOff:l}).then(e=>{e.success&&u(e.data)}).catch(console.error):u([])},[d.fromGodown.value,d.tripType.value]),(0,o.useEffect)(()=>{(async()=>{try{t&&t();const[e,l]=await Promise.all([(0,A.z)({address:"masters/products/allProducts"}),(0,A.z)({address:"dataEntry/godownLocationMaster"})]),o=(e.success?e.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Product_Name).localeCompare(null===t||void 0===t?void 0:t.Product_Name)),s=(l.success?l.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Godown_Name).localeCompare(null===t||void 0===t?void 0:t.Godown_Name)).map(e=>({label:null===e||void 0===e?void 0:e.Godown_Name,value:null===e||void 0===e?void 0:e.Godown_Id}));j(o),h(s)}catch(e){console.error("Error fetching data:",e)}finally{l&&l()}})()},[]);const C=e=>d.items.find(t=>(0,m.id)(t.stock_item_id,e.Product_Id))||{},w=e=>x.find(t=>(0,m.id)(t.Product_Id,e))||{},S=(e,t)=>{const l=(0,m.Ro)(t),o=w(e);r(t=>{const a=t.items.findIndex(t=>(0,m.id)(t.Product_Id,e));if(-1!==a){const e=[...t.items];return e[a]=(0,s.A)((0,s.A)({},e[a]),{},{QTY:l}),(0,s.A)((0,s.A)({},t),{},{items:e})}{const a=(0,s.A)((0,s.A)({},N.VQ),{},{Product_Id:e,QTY:l,Unit_Id:null===o||void 0===o?void 0:o.UOM_Id,Units:null===o||void 0===o?void 0:o.Units,Gst_Rate:null===o||void 0===o?void 0:o.Item_Rate,HSN_Code:null===o||void 0===o?void 0:o.HSN_Code});return(0,s.A)((0,s.A)({},t),{},{items:[...t.items,a]})}})},I=()=>{b(!1)},R=()=>(0,m.gf)(d.fromGodown.value)?(0,m.gf)(d.toGodown.value)?void(0,A.z)({address:"inventory/tripSheet/arrivalEntry/bulk",method:"POST",bodyData:d.items.map(e=>(0,s.A)((0,s.A)({},e),{},{From_Location:d.fromGodown.value,To_Location:d.toGodown.value,Arrival_Date:d.activityDate})),loadingOn:t,loadingOff:l}).then(e=>{e.success?(_.oR.success(e.message),I(),r(L)):_.oR.error(e.message)}).catch(e=>console.error(e)):_.oR.warn("Select To Godown"):_.oR.warn("Select From Godown"),D=()=>(0,y.jsx)("div",{className:"table-responsive",children:(0,y.jsxs)("table",{className:"table table-bordered",children:[(0,y.jsx)("thead",{children:(0,y.jsx)("tr",{children:["Sno","Item","Quantity","HSN","Units","Action"].map((e,t)=>(0,y.jsx)("th",{className:"fa-13 bg-light",children:e},t))})}),(0,y.jsx)("tbody",{children:d.items.map((e,t)=>{const l=w(null===e||void 0===e?void 0:e.Product_Id);return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:"fa-12",children:t+1}),(0,y.jsx)("td",{className:"fa-12",children:null===l||void 0===l?void 0:l.Product_Name}),(0,y.jsx)("td",{className:"fa-12",children:"MATERIAL_INWARD"===d.tripType.value?(0,y.jsx)("input",{type:"number",className:"cus-inpt p-2",value:e.QTY,onChange:e=>r(l=>(0,s.A)((0,s.A)({},l),{},{items:l.items.map((l,o)=>o===t?(0,s.A)((0,s.A)({},l),{},{QTY:e.target.value}):l)}))}):e.QTY}),(0,y.jsx)("td",{className:"fa-12",children:e.HSN_Code}),(0,y.jsx)("td",{className:"fa-12",children:e.Units}),(0,y.jsx)("td",{className:"fa-12",children:(0,y.jsx)(a.A,{size:"small",onClick:()=>(e=>{r(t=>(0,s.A)((0,s.A)({},t),{},{items:t.items.filter((t,l)=>l!==e)}))})(t),children:(0,y.jsx)(P.A,{color:"error",className:"fa-20"})})})]},t)})})]})});return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(T.A,{children:(0,y.jsxs)(G.A,{children:[(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[(0,y.jsx)("h5",{className:"fa-16 flex-grow-1",children:"Godown Activity"}),(0,y.jsx)(n.A,{onClick:i,variant:"outlined",className:"me-2",children:"Cancel"}),(0,y.jsx)(n.A,{onClick:()=>{"MATERIAL_INWARD"===d.tripType.value?R():b(!0)},variant:"outlined",disabled:0===d.items.length,children:"Save"})]}),(0,y.jsx)("hr",{}),(0,y.jsxs)("div",{className:"row",children:[(0,y.jsxs)("div",{className:"col-xxl-3 col-lg-4 col-md-6 p-2",children:[(0,y.jsx)("label",{children:"Activity Type"}),(0,y.jsx)("select",{className:"cus-inpt p-2",value:d.tripType.value,onChange:e=>{r(t=>(0,s.A)((0,s.A)({},t),{},{tripType:{value:e.target.value,label:e.target.value}})),r(e=>(0,s.A)((0,s.A)({},e),{},{items:[]}))},children:N.d1.map((e,t)=>(0,y.jsx)("option",{value:e.value,children:e.label},t))})]}),(0,y.jsxs)("div",{className:"col-xxl-3 col-lg-4 col-md-6 p-2",children:[(0,y.jsx)("label",{children:"Select From Godown"}),(0,y.jsx)(g.Ay,{options:v.filter(e=>!(0,m.id)(e.value,d.toGodown.value)),styles:f.MR,value:d.fromGodown,onChange:e=>r(t=>(0,s.A)((0,s.A)({},t),{},{fromGodown:e})),isSearchable:!0,maxMenuHeight:300,filterOption:m.GI,menuPortalTarget:document.body})]}),(0,y.jsxs)("div",{className:"col-xxl-3 col-lg-4 col-md-6 p-2",children:[(0,y.jsx)("label",{children:"Select To Godown"}),(0,y.jsx)(g.Ay,{options:v.filter(e=>!(0,m.id)(e.value,d.fromGodown.value)),styles:f.MR,value:d.toGodown,onChange:e=>r(t=>(0,s.A)((0,s.A)({},t),{},{toGodown:e})),isSearchable:!0,maxMenuHeight:300,filterOption:m.GI,menuPortalTarget:document.body})]}),(0,y.jsxs)("div",{className:"col-xxl-3 col-lg-4 col-md-6 p-2",children:[(0,y.jsx)("label",{children:"Date"}),(0,y.jsx)("input",{type:"date",value:d.activityDate,onChange:e=>r(t=>(0,s.A)((0,s.A)({},t),{},{activityDate:e.target.value})),className:"cus-inpt p-2"})]})]}),"MATERIAL_INWARD"===d.tripType.value&&(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"Add Products"}),(0,y.jsx)(g.Ay,{value:{value:"",label:"Search Product"},onChange:e=>S(e.value,0),options:x.filter(e=>!d.items.some(t=>(0,m.id)(t.Product_Id,e.Product_Id))).map(e=>({value:e.Product_Id,label:e.Product_Name})),menuPortalTarget:document.body,styles:f.MR,isSearchable:!0,filterOption:m.GI}),(0,y.jsx)("br",{}),d.items.length>0&&D()]}),"OTHER_GODOWN"===d.tripType.value&&c.length>0&&(0,y.jsxs)("div",{className:"table-responsive",children:[(0,y.jsxs)("h6",{className:"mt-2",children:["Available Stock in ",d.fromGodown.label]}),(0,y.jsxs)("table",{className:"table table-bordered",children:[(0,y.jsx)("thead",{children:(0,y.jsx)("tr",{children:["Sno","Item","Available Qty","Enter Transfer Qty"].map((e,t)=>(0,y.jsx)("th",{style:{fontSize:"13px"},children:e},t))})}),(0,y.jsx)("tbody",{children:c.filter(e=>(0,m.Ro)(e.Bal_Qty)>0).map((e,t)=>{var l;return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:"fa-12 vctr text-center",children:t+1}),(0,y.jsx)("td",{className:"fa-12 vctr",children:e.stock_item_name}),(0,y.jsx)("td",{className:"fa-12 vctr",children:e.Bal_Qty}),(0,y.jsx)("td",{children:(0,y.jsx)("input",{type:"number",min:0,max:e.Bal_Qty,value:(null===(l=C(e))||void 0===l?void 0:l.QTY)||"",onChange:t=>S(null===e||void 0===e?void 0:e.Product_Id,t.target.value),className:"cus-inpt"})})]},t)})})]})]})]})}),(0,y.jsx)(O.A,{title:"Confermation",open:p,onClose:I,onSubmit:R,maxWidth:"lg",children:D()})]})},D=e=>{let{loadingOn:t,loadingOff:l}=e;const[s,a]=(0,o.useState)("list");return(0,y.jsxs)(y.Fragment,{children:["list"===s&&(0,y.jsx)(I,{switchDisplay:()=>a("create"),loadingOn:t,loadingOff:l}),"create"===s&&(0,y.jsx)(R,{switchDisplay:()=>a("list"),loadingOn:t,loadingOff:l})]})}},79484:(e,t,l)=>{l.d(t,{A:()=>a});var o=l(59662),s=l(70579);const a=(0,o.A)((0,s.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},83560:(e,t,l)=>{l.d(t,{A:()=>a});var o=l(59662),s=l(70579);const a=(0,o.A)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=5743.fa13b1dc.chunk.js.map