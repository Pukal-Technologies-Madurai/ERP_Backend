"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[8471],{58471(e,t,a){a.d(t,{A:()=>_});var r=a(89379),s=a(65043),n=a(83462),o=a(26600),i=a(35316),d=a(29347),l=a(11906),u=a(65074),c=a(91036),p=a(70579);const _=e=>{let{open:t,onClose:a,existingTaskType:_,onCreate:j,onUpdate:m}=e;const[D,h]=(0,s.useState)({Task_Type:"",Task_Type_Id:"",Project_Id:"",ProjectName:"",Day_Duration:"",Hours_Duration:"",Status:"1",Est_StartDate:"",Est_EndDate:""}),[v,x]=(0,s.useState)([]),[g,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t&&(async()=>{y(!0);try{var e;const t=(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.Company_id)||1,a=await(0,u.z)({address:"taskManagement/project/Abstract?Company_id=".concat(t)});a.success?x(a.data||[]):console.error("Failed to fetch projects:",a.message)}catch(t){console.error("Error fetching projects:",t)}finally{y(!1)}})()},[t]),(0,s.useEffect)(()=>{if(_&&t&&v.length>0){var e,a,r,s,n;const t=v.find(e=>{var t;return e.Project_Id.toString()===(null===(t=_.ProjectId)||void 0===t?void 0:t.toString())}),o={Task_Type:_.Task_Type||"",Task_Type_Id:_.Task_Type_Id||"",Project_Id:(null===(e=_.ProjectId)||void 0===e?void 0:e.toString())||(null===(a=_.Project_Id)||void 0===a?void 0:a.toString())||"",ProjectName:t?t.Project_Name:_.ProjectName||"",Day_Duration:(null===(r=_.Day_Duration)||void 0===r?void 0:r.toString())||"",Hours_Duration:(null===(s=_.Hours_Duration)||void 0===s?void 0:s.toString())||"",Status:(null===(n=_.Status)||void 0===n?void 0:n.toString())||"1",Est_StartDate:_.Est_StartDate||"",Est_EndDate:_.Est_EndDate||""};h(o)}else!_&&t&&h({Task_Type:"",Task_Type_Id:"",Project_Id:"",ProjectName:"",Day_Duration:"",Hours_Duration:"",Status:"1",Est_StartDate:"",Est_EndDate:""})},[_,t,v]);const S=()=>{h({Task_Type:"",Task_Type_Id:"",Project_Id:"",ProjectName:"",Day_Duration:"",Hours_Duration:"",Status:"1",Est_StartDate:"",Est_EndDate:""}),a()},T=_&&_.ProjectId;return(0,p.jsxs)(n.A,{open:t,onClose:S,fullWidth:!0,maxWidth:"sm",children:[(0,p.jsx)(o.A,{className:"bg-primary text-white mb-2 px-3 py-2",children:_&&_.Task_Type_Id?"UPDATE TASK GROUP":"CREATE TASK GROUP"}),(0,p.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!D.Task_Type.trim())return void c.oR.error("Please enter a Task Group");if(!D.Project_Id)return void c.oR.error("Please select a Project");if(!D.Day_Duration||parseInt(D.Day_Duration)<1)return void c.oR.error("Please enter a valid number of days");if(!D.Hours_Duration||parseInt(D.Hours_Duration)<1)return void c.oR.error("Please enter a valid number of hours");const t=(0,r.A)((0,r.A)({},D),{},{Project_Id:parseInt(D.Project_Id),Day_Duration:parseInt(D.Day_Duration),Hours_Duration:parseInt(D.Hours_Duration),Status:parseInt(D.Status),Created_Date:(new Date).toISOString().split("T")[0],Est_StartDate:D.Est_StartDate||(new Date).toISOString().split("T")[0],Est_EndDate:D.Est_EndDate||new Date(Date.now()+24*D.Day_Duration*60*60*1e3).toISOString().split("T")[0]});_&&_.Task_Type_Id?m(t):j(t),a()},children:[(0,p.jsxs)(i.A,{children:[(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Project"}),(0,p.jsxs)("select",{value:D.Project_Id,onChange:e=>{const t=e.target.value,a=v.find(e=>e.Project_Id.toString()===t);h(e=>(0,r.A)((0,r.A)({},e),{},{Project_Id:t,ProjectName:a?a.Project_Name:""}))},className:"cus-inpt",required:!0,disabled:T,style:{width:"100%",padding:"8px",marginBottom:"16px"},children:[(0,p.jsx)("option",{value:"",children:g?"Loading projects...":"Select Project"}),v.map(e=>(0,p.jsx)("option",{value:e.Project_Id.toString(),children:e.Project_Name},e.Project_Id))]})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Task Group"}),(0,p.jsx)("input",{type:"text",value:D.Task_Type,onChange:e=>h((0,r.A)((0,r.A)({},D),{},{Task_Type:e.target.value})),className:"cus-inpt",required:!0,placeholder:"Enter task group (e.g., Development, Testing)",style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Number Of Days"}),(0,p.jsx)("input",{type:"number",value:D.Day_Duration,onChange:e=>{const{value:t}=e.target;h(e=>(0,r.A)((0,r.A)({},e),{},{Day_Duration:t}))},className:"cus-inpt",required:!0,min:"1",placeholder:"Enter number of days",style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Hours Duration"}),(0,p.jsx)("input",{type:"number",value:D.Hours_Duration,onChange:e=>{const{value:t}=e.target;h(e=>(0,r.A)((0,r.A)({},e),{},{Hours_Duration:t}))},className:"cus-inpt",required:!0,min:"1",placeholder:"Enter number of hours",style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Estimated Start Date"}),(0,p.jsx)("input",{type:"date",value:D.Est_StartDate,onChange:e=>h((0,r.A)((0,r.A)({},D),{},{Est_StartDate:e.target.value})),className:"cus-inpt",required:!0,style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Estimated End Date"}),(0,p.jsx)("input",{type:"date",value:D.Est_EndDate,onChange:e=>h((0,r.A)((0,r.A)({},D),{},{Est_EndDate:e.target.value})),className:"cus-inpt",required:!0,style:{width:"100%",padding:"8px",marginBottom:"16px"}})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("label",{children:"Status"}),(0,p.jsxs)("select",{className:"cus-inpt",value:D.Status,onChange:e=>h((0,r.A)((0,r.A)({},D),{},{Status:e.target.value})),required:!0,style:{width:"100%",padding:"8px",marginBottom:"16px"},children:[(0,p.jsx)("option",{value:"",children:"Select Status"}),(0,p.jsx)("option",{value:"1",children:"Active"}),(0,p.jsx)("option",{value:"0",children:"Inactive"}),(0,p.jsx)("option",{value:"2",children:"Pending"}),(0,p.jsx)("option",{value:"3",children:"Completed"})]})]})]}),(0,p.jsxs)(d.A,{children:[(0,p.jsx)(l.A,{onClick:S,className:"btn btn-light rounded-5 px-3",children:"Cancel"}),(0,p.jsx)(l.A,{type:"submit",variant:"contained",className:"btn btn-primary rounded-5 px-3",children:_&&_.Task_Type_Id?"Update":"Save"})]})]})]})}}}]);
//# sourceMappingURL=8471.df369d6d.chunk.js.map