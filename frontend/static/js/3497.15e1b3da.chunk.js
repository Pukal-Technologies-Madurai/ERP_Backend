"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3497],{18584:(e,d,t)=>{t.d(d,{A:()=>l});var o=t(59662),n=t(70579);const l=(0,o.A)((0,n.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done")},26494:(e,d,t)=>{t.d(d,{A:()=>h});var o=t(58168),n=t(98587),l=t(65043),s=t(58387),a=t(68606),r=t(34535),i=t(6431),c=t(57056),_=t(32400);function v(e){return(0,_.Ay)("MuiCardContent",e)}(0,c.A)("MuiCardContent",["root"]);var u=t(70579);const m=["className","component"],I=(0,r.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,d)=>d.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),h=l.forwardRef(function(e,d){const t=(0,i.b)({props:e,name:"MuiCardContent"}),{className:l,component:r="div"}=t,c=(0,n.A)(t,m),_=(0,o.A)({},t,{component:r}),h=(e=>{const{classes:d}=e;return(0,a.A)({root:["root"]},v,d)})(_);return(0,u.jsx)(I,(0,o.A)({as:r,className:(0,s.A)(h.root,l),ownerState:_,ref:d},c))})},34104:(e,d,t)=>{t.d(d,{A:()=>p,K:()=>h});var o=t(89379),n=t(65043),l=t(97707),s=t(83462),a=t(26600),r=t(17392),i=t(35316),c=t(11906),_=t(65074),v=t(18584),u=t(97280),m=t(14844),I=(t(63406),t(70579));const h=(e,d,t)=>{var o;const n=null===(o=(0,l.$r)(t).find(t=>(0,l.id)(null===t||void 0===t?void 0:t.Product_Id,e)&&(0,l.id)(null===t||void 0===t?void 0:t.Godown_Id,d)))||void 0===o?void 0:o.Act_Bal_Qty;return(0,l.Ro)(n)},p=e=>{let{loadingOn:d,loadingOff:t,open:p,onClose:x,retailer:A,children:j,selectedItems:N=[],setSelectedItems:g,staffArray:b=[],setStaffArray:f,products:y=[],GST_Inclusive:S,IS_IGST:w,invoiceInfo:T={},setInvoiceInfo:G,godowns:C=[],stockInGodown:D=[]}=e;const R=(0,l.id)(S,1),Q=(0,l.id)(S,2),[E,k]=(0,n.useState)([]),[P,F]=(0,n.useState)({Fromdate:(0,l.ny)(),Todate:(0,l.ny)(),search:!1,Godown:{value:"",label:"Select Godown For Stock Details"}});(0,n.useEffect)(()=>{if((0,l.IQ)(A)&&p){const{Fromdate:e,Todate:o}=P;d&&d(),(0,_.z)({address:"sales/saleOrder?Fromdate=".concat(e,"&Todate=").concat(o,"&Retailer_Id=").concat(A)}).then(e=>{e.success?k(e.data):k([])}).catch(e=>console.error(e)).finally(()=>{t&&t()})}},[P.search]);const M=function(e){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(arguments.length>2?arguments[2]:void 0)return G(e=>(0,o.A)((0,o.A)({},e),{},{So_No:""})),void g([]);G(d=>(0,o.A)((0,o.A)({},d),{},{So_No:Number(null===e||void 0===e?void 0:e.So_Id)})),g(t=>{const o=[...t];return(0,l.$r)(null===e||void 0===e?void 0:e.Products_List).map((e,t)=>Object.fromEntries(Object.entries(u.a4).map(n=>{var s,a,r,i,c,_,v,u;let[I,h]=n;const p=(e=>{var d;return null!==(d=null===y||void 0===y?void 0:y.find(d=>(0,l.id)(null===d||void 0===d?void 0:d.Product_Id,e)))&&void 0!==d?d:{}})(e.Item_Id),x=w?p.Igst_P:p.Gst_P,A=x>0,{Item_Rate:j,Bill_Qty:N,Amount:g}=e,b=Q?"zerotax":R?"remove":"add",f=(0,m.v)(j,x,b),S=(0,m.v)(g,x,b),T=w?0:S.cgst_per,G=w?S.igst_per:0,C=w?0:S.cgst_amount,D=w?S.igst_amount:0;switch(I){case"S_No":return[I,null!==(s=t+1)&&void 0!==s?s:h];case"Item_Id":return[I,null!==(a=e.Item_Id)&&void 0!==a?a:h];case"Item_Name":return[I,null!==(r=null===p||void 0===p?void 0:p.Product_Name)&&void 0!==r?r:h];case"Item_Rate":return[I,(0,l.Ro)(j)];case"Bill_Qty":case"Act_Qty":case"Alt_Act_Qty":case"Total_Qty":return[I,(0,l.Ro)(N)];case"Amount":return[I,g];case"HSN_Code":return[I,null!==(i=p.HSN_Code)&&void 0!==i?i:h];case"Unit_Id":return[I,null!==(c=e.Unit_Id)&&void 0!==c?c:h];case"Act_unit_Id":return[I,null!==(_=e.Unit_Id)&&void 0!==_?_:h];case"Alt_Act_Unit_Id":return[I,null!==(v=e.Unit_Id)&&void 0!==v?v:h];case"Unit_Name":return[I,null!==(u=e.Units)&&void 0!==u?u:h];case"GoDown_Id":{var E;const t=(0,l.IQ)(null===d||void 0===d?void 0:d.Godown_Id),n=(0,l.IQ)(null===d||void 0===d?void 0:d.Item_Id),s=(0,l.id)(null===e||void 0===e?void 0:e.Item_Id,null===d||void 0===d?void 0:d.Item_Id),a=null===(E=o.find(d=>(0,l.id)(d.Item_Id,null===e||void 0===e?void 0:e.Item_Id)))||void 0===E?void 0:E.GoDown_Id;return[I,t&&n&&s?d.Godown_Id:(0,l.IQ)(a)?a:h]}case"Taxable_Rate":return[I,f.base_amount];case"Taxble":return[I,A?1:0];case"Taxable_Amount":return[I,S.base_amount];case"Tax_Rate":return[I,x];case"Cgst":case"Sgst":return[I,null!==T&&void 0!==T?T:0];case"Cgst_Amo":case"Sgst_Amo":return[I,Q?0:C];case"Igst":return[I,null!==G&&void 0!==G?G:0];case"Igst_Amo":return[I,Q?0:D];case"Final_Amo":return[I,S.with_tax];default:return[I,h]}})))});const t=[...new Map((0,l.$r)(null===e||void 0===e?void 0:e.Staff_Involved_List).filter(e=>!b.some(d=>(0,l.id)(d.Emp_Id,e.Involved_Emp_Id))).map(e=>[e.Involved_Emp_Id,e])).values()];t.length>0&&f(e=>[...e,...t.map(e=>Object.fromEntries(Object.entries(u.Ud).map(d=>{let[t,o]=d;switch(t){case"Emp_Id":return[t,null===e||void 0===e?void 0:e.Involved_Emp_Id];case"Emp_Name":return[t,null===e||void 0===e?void 0:e.EmpName];case"Emp_Type_Id":return[t,null===e||void 0===e?void 0:e.Cost_Center_Type_Id];default:return[t,o]}})))])},U=()=>{x&&x(),k([])};return(0,I.jsxs)(I.Fragment,{children:[j,(0,I.jsxs)(s.A,{open:p,onClose:U,fullScreen:!0,children:[(0,I.jsx)(a.A,{children:(0,I.jsxs)("div",{className:"d-flex flex-wrap align-items-center ",children:[(0,I.jsx)("span",{className:"flex-grow-1",children:"Select Sale Order"}),(0,I.jsx)(r.A,{onClick:U,color:"success",children:(0,I.jsx)(v.A,{className:"fa-20"})})]})}),(0,I.jsxs)(i.A,{children:[(0,I.jsxs)("div",{className:"d-flex flex-wrap align-items-end",children:[(0,I.jsxs)("div",{className:"p-2",children:[(0,I.jsx)("label",{className:"d-block ms-2",children:"From Date"}),(0,I.jsx)("input",{className:"cus-inpt p-2 w-auto",type:"date",value:null===P||void 0===P?void 0:P.Fromdate,onChange:e=>F(d=>(0,o.A)((0,o.A)({},d),{},{Fromdate:e.target.value})),required:!0})]}),(0,I.jsxs)("div",{className:"p-2",children:[(0,I.jsx)("label",{className:"d-block ms-2",children:"To Date"}),(0,I.jsx)("input",{className:"cus-inpt p-2 w-auto",type:"date",min:P.Fromdate,value:null===P||void 0===P?void 0:P.Todate,onChange:e=>F(d=>(0,o.A)((0,o.A)({},d),{},{Todate:e.target.value})),required:!0})]}),(0,I.jsx)("div",{className:"p-2",children:(0,I.jsx)(c.A,{variant:"outlined",type:"button",onClick:()=>F(e=>(0,o.A)((0,o.A)({},e),{},{search:!e.search})),children:"search"})})]}),(0,I.jsx)("br",{}),E.map((e,d)=>{const{So_Inv_No:t,So_Date:o,VoucherTypeGet:n,Branch_Name:s,Sales_Person_Name:a,Total_Tax:r,Total_Invoice_value:i,Products_List:c}=e,_=(0,l.id)(null===T||void 0===T?void 0:T.So_No,e.So_Id);return(0,I.jsx)("div",{className:"container-fluid",children:(0,I.jsxs)("div",{className:"\n                                        invoice-card bg-white p-4 shadow-sm mb-4 border rounded  \n                                        ".concat(_?" border-primary ":"","\n                                        "),children:[(0,I.jsxs)("h5",{className:"d-flex align-items-center flex-wrap",children:[(0,I.jsx)("span",{className:"me-2",children:(0,I.jsx)("input",{className:"form-check-input shadow-none pointer",style:{padding:"0.7em"},type:"checkbox",checked:_,onChange:()=>{M(e,null,!!_)}})}),(0,I.jsxs)("span",{children:["Invoice No: ",(0,I.jsx)("span",{className:"text-primary",children:t})]})]}),(0,I.jsxs)("div",{className:"invoice-header d-flex justify-content-between flex-wrap border-bottom pb-3 mb-3",children:[(0,I.jsxs)("div",{children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("strong",{children:"Invoice Date:"})," ",(0,l.yc)(o)]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("strong",{children:"Voucher Type:"})," ",n]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("strong",{children:"Branch:"})," ",s]})]}),(0,I.jsxs)("div",{className:"text-end",children:[(0,I.jsxs)("h5",{className:"mt-2",children:[(0,I.jsx)("strong",{children:"Total Invoice:"})," \u20b9",i]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("strong",{children:"Tax:"})," \u20b9",r]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("strong",{children:"Salesperson:"})," ",a]})]})]}),(0,I.jsx)("div",{className:"table-responsive",children:(0,I.jsxs)("table",{className:"table table-bordered table-striped product-table",children:[(0,I.jsx)("thead",{className:"table-light",children:(0,I.jsx)("tr",{children:["#","Product","Qty","Rate","Amount","Tax %","Final Amount","Godown"].map((e,d)=>(0,I.jsx)("th",{style:{minWidth:"150px",maxWidth:"160px"},children:e},d))})}),(0,I.jsx)("tbody",{children:c.map((d,t)=>{var o;return(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{children:t+1}),(0,I.jsx)("td",{children:d.Product_Name}),(0,I.jsxs)("td",{children:[d.Bill_Qty,(0,l.IQ)(P.Godown.value)&&" (Bal: "+h(d.Item_Id,P.Godown.value,D)+") "]}),(0,I.jsxs)("td",{children:["\u20b9",d.Item_Rate]}),(0,I.jsxs)("td",{children:["\u20b9",d.Amount]}),(0,I.jsxs)("td",{children:[d.Tax_Rate,"%"]}),(0,I.jsxs)("td",{children:["\u20b9",d.Final_Amo]}),(0,I.jsx)("td",{children:(0,I.jsxs)("select",{disabled:!_,className:"cus-inpt p-2",value:null===(o=(0,l.$r)(C).find(e=>(0,l.$r)(N).find(t=>(0,l.id)(t.Item_Id,null===d||void 0===d?void 0:d.Item_Id)&&_&&(0,l.id)(null===e||void 0===e?void 0:e.Godown_Id,null===t||void 0===t?void 0:t.GoDown_Id))))||void 0===o?void 0:o.Godown_Id,onChange:t=>M(e,{Godown_Id:t.target.value,Item_Id:null===d||void 0===d?void 0:d.Item_Id},!1),children:[(0,I.jsx)("option",{value:"",disabled:!0,children:"Select"}),(0,I.jsx)("optgroup",{label:"Stock-Available-Godown",children:(0,l.$r)(C).filter(e=>(0,l.$r)(D).some(t=>(0,l.id)(null===t||void 0===t?void 0:t.Godown_Id,null===e||void 0===e?void 0:e.Godown_Id)&&(0,l.id)(null===d||void 0===d?void 0:d.Item_Id,null===t||void 0===t?void 0:t.Product_Id))).map((e,t)=>(0,I.jsx)("option",{value:null===e||void 0===e?void 0:e.Godown_Id,children:(null===e||void 0===e?void 0:e.Godown_Name)+" (Bal: "+h(null===d||void 0===d?void 0:d.Item_Id,null===e||void 0===e?void 0:e.Godown_Id,D)+")"},t))}),(0,I.jsx)("optgroup",{label:"Other-Godown",children:(0,l.$r)(C).filter(e=>!(0,l.$r)(D).some(t=>(0,l.id)(null===t||void 0===t?void 0:t.Godown_Id,null===e||void 0===e?void 0:e.Godown_Id)&&(0,l.id)(null===d||void 0===d?void 0:d.Item_Id,null===t||void 0===t?void 0:t.Product_Id))).map((e,d)=>(0,I.jsx)("option",{value:null===e||void 0===e?void 0:e.Godown_Id,children:null===e||void 0===e?void 0:e.Godown_Name},d))})]})})]},d.SO_St_Id)})})]})}),(0,I.jsx)("div",{className:"invoice-summary border-top pt-3 mt-3 text-end"})]})},d)})]})]})]})}},34496:(e,d,t)=>{t.d(d,{A:()=>l});var o=t(59662),n=t(70579);const l=(0,o.A)((0,n.jsx)("path",{d:"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z"}),"ClearAll")},51387:(e,d,t)=>{t.d(d,{A:()=>l});var o=t(59662),n=t(70579);const l=(0,o.A)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},70141:(e,d,t)=>{t.d(d,{A:()=>l});var o=t(59662),n=t(70579);const l=(0,o.A)((0,n.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},83560:(e,d,t)=>{t.d(d,{A:()=>l});var o=t(59662),n=t(70579);const l=(0,o.A)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},97280:(e,d,t)=>{t.d(d,{Q4:()=>s,Ud:()=>i,a4:()=>a,ju:()=>r,zA:()=>l});var o=t(97707);const n=(0,o.aN)().user,l={id:null,retailerId:null,deliveryName:"",phoneNumber:"",cityName:"",deliveryAddress:"",gstNumber:"",stateName:""},s={Do_Id:"",Do_No:"",Do_Year:"",Do_Inv_No:"",Voucher_Type:"",Do_Date:(0,o.ny)(),Retailer_Id:"",Retailer_Name:"",Delivery_Person_Id:"",Branch_Id:"",GST_Inclusive:2,IS_IGST:0,Narration:"",Cancel_status:1,So_No:"",Trans_Type:"",CSGT_Total:0,SGST_Total:0,IGST_Total:0,Total_Expences:0,Round_off:0,Total_Before_Tax:0,Total_Tax:0,Total_Invoice_value:0,Stock_Item_Ledger_Name:"",Ref_Inv_Number:"",deliveryAddressId:null,deliveryAddressDetails:l,shipingAddressId:null,shipingAddressDetails:l,Delivery_Status:0,Payment_Mode:0,Payment_Status:0,Alter_Id:"",Created_by:null===n||void 0===n?void 0:n.UserId,Altered_by:null===n||void 0===n?void 0:n.UserId,Created_on:"",Alterd_on:""},a={DO_St_Id:"",Do_Date:"",Delivery_Order_Id:"",GoDown_Id:"",S_No:"",Item_Id:"",Item_Name:"",HSN_Code:"",Taxble:"",Batch_Name:"",Bill_Qty:"",Act_Qty:"",Alt_Act_Qty:"",Free_Qty:"",Total_Qty:"",Item_Rate:"",Taxable_Rate:"",Amount:"",Unit_Id:"",Unit_Name:"",Act_unit_Id:"",Alt_Act_Unit_Id:"",Taxable_Amount:"",Tax_Rate:"",Cgst:"",Sgst:"",Igst:"",Cgst_Amo:"",Sgst_Amo:"",Igst_Amo:"",Final_Amo:"",Created_on:""},r={Id:"",Do_Id:"",Sno:"",Expense_Id:"",Cgst:0,Cgst_Amo:0,Sgst:0,Sgst_Amo:0,Igst:0,Igst_Amo:0,Expence_Value:0},i={Id:"",Do_Id:"",Emp_Id:"",Emp_Name:"",Emp_Type_Id:""}}}]);
//# sourceMappingURL=3497.15e1b3da.chunk.js.map