"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[2822],{3632:(e,l,s)=>{s.d(l,{A:()=>r});var t=s(59662),a=s(70579);const r=(0,t.A)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},6593:(e,l,s)=>{s.d(l,{A:()=>t});const t=s(44708).A},10204:(e,l,s)=>{s.d(l,{T:()=>t,X:()=>a});const t=[{id:0,label:"New",color:" bg-info text-white "},{id:1,label:"Verified",color:" bg-warning text-white "},{id:2,label:"Converted",color:" bg-success text-white "},{id:3,label:"Canceled",color:" bg-danger text-white "}],a=[{id:1,label:"New",color:" bg-info text-white "},{id:2,label:"Progess",color:" bg-warning text-white "},{id:3,label:"Completed",color:" bg-success text-white "},{id:4,label:"Canceled",color:" bg-danger text-white "}]},11416:(e,l,s)=>{var t=s(24994);l.A=void 0;var a=t(s(40039)),r=s(70579);l.A=(0,a.default)((0,r.jsx)("path",{d:"m22 10-6-6H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99l16-.01c1.1 0 2-.89 2-1.99zm-7-4.5 5.5 5.5H15z"}),"Note")},33438:(e,l,s)=>{s.d(l,{A:()=>r});var t=s(59662),a=s(70579);const r=(0,t.A)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},40039:(e,l,s)=>{Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=s(81512)},59383:(e,l,s)=>{s.d(l,{A:()=>r});var t=s(59662),a=s(70579);const r=(0,t.A)((0,a.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")},65913:(e,l,s)=>{s.r(l),s.d(l,{default:()=>T});var t=s(89379),a=s(65043),r=s(77739),d=s(17392),n=s(11906),o=s(83462),i=s(26600),c=s(35316),u=s(29347),h=s(20656),x=s(63406),v=s(97707),p=s(13899),m=s(70141),j=s(83560),b=s(59383),A=s(79484),y=s(3632),g=s(10204),N=s(65074),C=s(48471),_=s(73216),S=s(11416),f=s(70579);const T=e=>{var l,s;let{loadingOn:T,loadingOff:P,AddRights:R,EditRights:w,pageID:I}=e;const L=sessionStorage.getItem("filterValues"),V={Fromdate:(0,v.ny)(),Todate:(0,v.ny)(),Retailer:{value:"",label:"ALL"},CreatedBy:{value:"",label:"ALL"},SalesPerson:{value:"",label:"ALL"},VoucherType:{value:"",label:"ALL"},Cancel_status:0},F=JSON.parse(localStorage.getItem("user")),B=(0,_.Zp)(),[D,O]=(0,a.useState)([]),[z,E]=(0,a.useState)([]),[M,k]=(0,a.useState)([]),[G,H]=(0,a.useState)([]),[Q,U]=(0,a.useState)([]),[W,q]=(0,a.useState)({}),[J,X]=(0,a.useState)(!1),[Z,K]=(0,a.useState)([]),[Y,$]=(0,a.useState)(!1),[ee,le]=(0,a.useState)(V),[se,te]=(0,a.useState)({filters:!1,orderDetails:!1});(0,a.useEffect)(()=>{const e=(0,v.vU)(I),{Fromdate:l,Todate:s,Retailer:a=V.Retailer,CreatedBy:r=V.CreatedBy,SalesPerson:d=V.SalesPerson,VoucherType:n=V.VoucherType,Cancel_status:o=V.Cancel_status}=e;le(e=>(0,t.A)((0,t.A)({},e),{},{Fromdate:l,Todate:s,Retailer:a,CreatedBy:r,SalesPerson:d,VoucherType:n,Cancel_status:o}))},[L,I]),(0,a.useEffect)(()=>{(0,N.z)({address:"sales/saleOrder/retailers"}).then(e=>{e.success&&E(e.data)}).catch(e=>console.error(e)),(0,N.z)({address:"masters/users/salesPerson/dropDown?Company_id=".concat(null===F||void 0===F?void 0:F.Company_id)}).then(e=>{e.success&&k(e.data)}).catch(e=>console.error(e)),(0,N.z)({address:"masters/user/dropDown?Company_id=".concat(null===F||void 0===F?void 0:F.Company_id)}).then(e=>{e.success&&H(e.data)}).catch(e=>console.error(e)),(0,N.z)({address:"masters/voucher"}).then(e=>{e.success&&U(e.data)}).catch(e=>console.error(e))},[]),(0,a.useEffect)(()=>{const e=(0,v.vU)(I),{Fromdate:l,Todate:s,Retailer:t=V.Retailer,CreatedBy:a=V.CreatedBy,SalesPerson:r=V.SalesPerson,VoucherType:d=V.VoucherType,Cancel_status:n=V.Cancel_status}=e;(0,N.z)({address:"sales/saleOrder?\n            Fromdate=".concat(l,"&\n            Todate=").concat(s,"&\n            Retailer_Id=").concat(null===t||void 0===t?void 0:t.value,"&\n            Sales_Person_Id=").concat(null===r||void 0===r?void 0:r.value,"&\n            Created_by=").concat(null===a||void 0===a?void 0:a.value,"&\n            VoucherType=").concat(null===d||void 0===d?void 0:d.value,"&\n            Cancel_status=").concat(n),loadingOn:T,loadingOff:P}).then(e=>{e.success&&O(null===e||void 0===e?void 0:e.data)}).catch(e=>console.error(e))},[L,I]);const ae=()=>{te((0,t.A)((0,t.A)({},se),{},{filters:!1,orderDetails:!1}))},re=(0,a.useMemo)(()=>D.reduce((e,l)=>(0,v.Lr)(e,null===l||void 0===l?void 0:l.Total_Invoice_value),0),[D]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(C.Ay,{title:"Sale Orders",dataArray:D,EnableSerialNumber:!0,columns:[(0,C.Lj)("So_Date","date","Date"),(0,C.Lj)("So_Inv_No","string","ID"),(0,C.Lj)("Retailer_Name","string","Customer"),(0,C.Lj)("VoucherTypeGet","string","Voucher"),(0,C.Lj)("Total_Before_Tax","number","Before Tax"),(0,C.Lj)("Total_Tax","number","Tax"),(0,C.Lj)("Total_Invoice_value","number","Invoice Value"),{ColumnHeader:"Status",isVisible:1,align:"center",isCustomCell:!0,Cell:e=>{var l,s;let{row:t}=e;const a=g.T.find(e=>e.id===Number(null===t||void 0===t?void 0:t.isConverted));return(0,f.jsx)("span",{className:null!==(l="py-0 fw-bold px-2 rounded-4 fa-12 "+(null===a||void 0===a?void 0:a.color))&&void 0!==l?l:"bg-secondary text-white",children:null!==(s=null===a||void 0===a?void 0:a.label)&&void 0!==s?s:"Undefined"})}},{Field_Name:"Action",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:l}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(r.A,{title:"View Order",children:(0,f.jsx)(d.A,{onClick:()=>{q({orderDetails:l,orderProducts:null!==l&&void 0!==l&&l.Products_List?null===l||void 0===l?void 0:l.Products_List:[]})},color:"primary",size:"small",children:(0,f.jsx)(y.A,{className:"fa-16"})})}),w&&(0,f.jsx)(r.A,{title:"Edit",children:(0,f.jsx)(d.A,{onClick:()=>B("create",{state:(0,t.A)((0,t.A)({},l),{},{isEdit:!0})}),size:"small",children:(0,f.jsx)(j.A,{className:"fa-16"})})}),(0,f.jsx)(r.A,{title:"View Receipts",children:(0,f.jsx)(d.A,{onClick:()=>{X(!0),$(!0),(async e=>{$(!0);try{const l=await(0,N.z)({address:"/sales/salesInvoice/Details?So_Id=".concat(null===e||void 0===e?void 0:e.So_Id)});null!==l&&void 0!==l&&l.success?K(l.data):console.error("Failed to fetch invoice details:",null===l||void 0===l?void 0:l.message)}catch(l){console.error("Error fetching receipts:",l)}finally{$(!1)}})(l)},children:(0,f.jsx)(S.A,{})})})]})}}],ButtonArea:(0,f.jsxs)(f.Fragment,{children:[R&&(0,f.jsx)(n.A,{variant:"outlined",startIcon:(0,f.jsx)(m.A,{}),onClick:()=>B("create"),children:"New"}),(0,f.jsx)(r.A,{title:"Filters",children:(0,f.jsx)(d.A,{size:"small",onClick:()=>te((0,t.A)((0,t.A)({},se),{},{filters:!0})),children:(0,f.jsx)(b.A,{})})}),(0,f.jsx)("span",{className:"bg-light text-light fa-11 px-1 shadow-sm py-1 rounded-3 mx-1",children:(0,v.Ro)(re)>0&&(0,f.jsxs)("h6",{className:"m-0 text-end text-muted px-3",children:["Total: ",(0,v.jG)(re)]})})]}),isExpendable:!0,tableMaxHeight:550,expandableComp:e=>{let{row:l}=e;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("table",{className:"table",children:(0,f.jsxs)("tbody",{children:[(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Branch"}),(0,f.jsx)("td",{className:"border p-2",children:l.Branch_Name}),(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,f.jsx)("td",{className:"border p-2",children:l.Sales_Person_Name}),(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Round off"}),(0,f.jsx)("td",{className:"border p-2",children:l.Round_off})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Invoice Type"}),(0,f.jsxs)("td",{className:"border p-2",children:[(0,v.id)(l.GST_Inclusive,1)&&"Inclusive",(0,v.id)(l.GST_Inclusive,0)&&"Exclusive"]}),(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Tax Type"}),(0,f.jsxs)("td",{className:"border p-2",children:[(0,v.id)(l.IS_IGST,1)&&"IGST",(0,v.id)(l.IS_IGST,0)&&"GST"]}),(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,f.jsx)("td",{className:"border p-2",children:l.Sales_Person_Name})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border p-2 bg-light",children:"Narration"}),(0,f.jsx)("td",{className:"border p-2",colSpan:5,children:l.Narration})]})]})})})}}),Object.keys(W).length>0&&(0,f.jsx)(p.A,{orderDetails:null===W||void 0===W?void 0:W.orderDetails,orderProducts:null===W||void 0===W?void 0:W.orderProducts,download:!0,actionOpen:!0,clearDetails:()=>q({}),TitleText:"Sale Order"}),(0,f.jsxs)(o.A,{open:se.filters,onClose:ae,fullWidth:!0,maxWidth:"sm",children:[(0,f.jsx)(i.A,{children:"Filters"}),(0,f.jsx)(c.A,{children:(0,f.jsx)("div",{className:"table-responsive pb-4",children:(0,f.jsx)("table",{className:"table",children:(0,f.jsxs)("tbody",{children:[(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,f.jsx)("td",{children:(0,f.jsx)("input",{type:"date",value:ee.Fromdate,onChange:e=>le((0,t.A)((0,t.A)({},ee),{},{Fromdate:e.target.value})),className:"cus-inpt"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,f.jsx)("td",{children:(0,f.jsx)("input",{type:"date",value:ee.Todate,onChange:e=>le((0,t.A)((0,t.A)({},ee),{},{Todate:e.target.value})),className:"cus-inpt"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Retailer"}),(0,f.jsx)("td",{children:(0,f.jsx)(h.Ay,{value:null===ee||void 0===ee?void 0:ee.Retailer,onChange:e=>le((0,t.A)((0,t.A)({},ee),{},{Retailer:e})),options:[{value:"",label:"ALL"},...z.map(e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:(null===e||void 0===e?void 0:e.Retailer_Name)+"- \u20b9"+(0,v.jG)((0,v.Ro)(null===e||void 0===e?void 0:e.TotalSales))+" (".concat((0,v.Ro)(null===e||void 0===e?void 0:e.OrderCount),")")}))],styles:x.MR,isSearchable:!0,placeholder:"Retailer Name"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Salse Person"}),(0,f.jsx)("td",{children:(0,f.jsx)(h.Ay,{value:null===ee||void 0===ee?void 0:ee.SalesPerson,onChange:e=>le(l=>(0,t.A)((0,t.A)({},l),{},{SalesPerson:e})),options:[{value:"",label:"ALL"},...M.map(e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name}))],styles:x.MR,isSearchable:!0,placeholder:"Sales Person Name"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Created By"}),(0,f.jsx)("td",{children:(0,f.jsx)(h.Ay,{value:null===ee||void 0===ee?void 0:ee.CreatedBy,onChange:e=>le(l=>(0,t.A)((0,t.A)({},l),{},{CreatedBy:e})),options:[{value:"",label:"ALL"},...G.map(e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name}))],styles:x.MR,isSearchable:!0,placeholder:"Sales Person Name"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Voucher "}),(0,f.jsx)("td",{children:(0,f.jsx)(h.Ay,{value:null===ee||void 0===ee?void 0:ee.VoucherType,onChange:e=>le((0,t.A)((0,t.A)({},ee),{},{VoucherType:e})),options:[{value:"",label:"ALL"},...Q.filter(e=>"SALES"===e.Type).map(e=>({value:null===e||void 0===e?void 0:e.Vocher_Type_Id,label:null===e||void 0===e?void 0:e.Voucher_Type}))],styles:x.MR,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Voucher Name"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{verticalAlign:"middle"},children:"Canceled Order"}),(0,f.jsx)("td",{children:(0,f.jsxs)("select",{type:"date",value:ee.Cancel_status,onChange:e=>le((0,t.A)((0,t.A)({},ee),{},{Cancel_status:Number(e.target.value)})),className:"cus-inpt",children:[(0,f.jsx)("option",{value:1,children:"Show"}),(0,f.jsx)("option",{value:0,children:"Hide"})]})})]})]})})})}),(0,f.jsxs)(u.A,{children:[(0,f.jsx)(n.A,{onClick:ae,children:"close"}),(0,f.jsx)(n.A,{onClick:()=>{ae(),(0,v.Mb)({Fromdate:null===ee||void 0===ee?void 0:ee.Fromdate,Todate:ee.Todate,pageID:I,Retailer:ee.Retailer,CreatedBy:ee.CreatedBy,SalesPerson:ee.SalesPerson,VoucherType:ee.VoucherType,Cancel_status:ee.Cancel_status})},startIcon:(0,f.jsx)(A.A,{}),variant:"outlined",children:"Search"})]})]}),(0,f.jsxs)(o.A,{open:J,onClose:()=>X(!1),maxWidth:"lg",fullWidth:!0,children:[(0,f.jsx)(i.A,{children:"Order Details"}),(0,f.jsx)(c.A,{dividers:!0,children:Y?(0,f.jsx)("p",{children:"Loading..."}):Z?(0,f.jsxs)(f.Fragment,{children:[(null===Z||void 0===Z||null===(l=Z.Receipts)||void 0===l?void 0:l.length)>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h3",{className:"font-bold mb-2",children:"Receipts"}),(0,f.jsxs)("table",{className:"table-auto w-full border mb-4",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:"border px-2 py-1",children:"Receipt No"}),(0,f.jsx)("th",{className:"border px-2 py-1",children:"Amount"}),(0,f.jsx)("th",{className:"border px-2 py-1",children:"Date"})]})}),(0,f.jsx)("tbody",{children:Z.Receipts.map((e,l)=>(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border px-2 py-1",children:e.Receipt_No}),(0,f.jsx)("td",{className:"border px-2 py-1",children:e.Amount}),(0,f.jsx)("td",{className:"border px-2 py-1",children:e.Receipt_Date})]},l))})]})]}),(null===Z||void 0===Z||null===(s=Z.Products_List)||void 0===s?void 0:s.length)>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h3",{className:"font-bold mb-2",children:"Products"}),(0,f.jsxs)("table",{className:"table-auto w-full border",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:"border px-2 py-1",children:"Product"}),(0,f.jsx)("th",{className:"border px-2 py-1",children:"Bill Qty"}),(0,f.jsx)("th",{className:"border px-2 py-1",children:"Actual Qty"}),(0,f.jsx)("th",{className:"border px-2 py-1",children:"Status"})]})}),(0,f.jsx)("tbody",{children:Z.Products_List.map((e,l)=>{var s;const t=Number(e.Bill_Qty)===Number(e.Act_Qty)?"Completed":"Pending";return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border px-2 py-1",children:e.Product_Name}),(0,f.jsx)("td",{className:"border px-2 py-1",children:e.Bill_Qty}),(0,f.jsx)("td",{className:"border px-2 py-1",children:null!==(s=e.Act_Qty)&&void 0!==s?s:"-"}),(0,f.jsx)("td",{className:"border px-2 py-1 font-bold ".concat("Completed"===t?"text-green-600":"text-red-600"),children:t})]},l)})})]})]})]}):(0,f.jsx)("p",{children:"No details found."})}),(0,f.jsx)(u.A,{children:(0,f.jsx)(n.A,{onClick:()=>X(!1),children:"Close"})})]})]})}},70141:(e,l,s)=>{s.d(l,{A:()=>r});var t=s(59662),a=s(70579);const r=(0,t.A)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},79484:(e,l,s)=>{s.d(l,{A:()=>r});var t=s(59662),a=s(70579);const r=(0,t.A)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},81512:(e,l,s)=>{s.r(l),s.d(l,{capitalize:()=>a.A,createChainedFunction:()=>r.A,createSvgIcon:()=>d.A,debounce:()=>n.A,deprecatedPropType:()=>o,isMuiElement:()=>i.A,ownerDocument:()=>c.A,ownerWindow:()=>u.A,requirePropFactory:()=>h,setRef:()=>x,unstable_ClassNameGenerator:()=>g,unstable_useEnhancedEffect:()=>v.A,unstable_useId:()=>p.A,unsupportedProp:()=>m,useControlled:()=>j.A,useEventCallback:()=>b.A,useForkRef:()=>A.A,useIsFocusVisible:()=>y.A});var t=s(25430),a=s(6803),r=s(6593),d=s(59662),n=s(80950);const o=function(e,l){return()=>null};var i=s(90154),c=s(22427),u=s(36078);const h=function(e,l){return()=>null};const x=s(69184).A;var v=s(55013),p=s(45879);const m=function(e,l,s,t,a){return null};var j=s(54516),b=s(93319),A=s(95849),y=s(87844);const g={configure:e=>{t.A.configure(e)}}},83560:(e,l,s)=>{s.d(l,{A:()=>r});var t=s(59662),a=s(70579);const r=(0,t.A)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},90154:(e,l,s)=>{s.d(l,{A:()=>a});var t=s(65043);const a=function(e,l){var s,a;return t.isValidElement(e)&&-1!==l.indexOf(null!=(s=e.type.muiName)?s:null==(a=e.type)||null==(a=a._payload)||null==(a=a.value)?void 0:a.muiName)}}}]);
//# sourceMappingURL=2822.7a860a8d.chunk.js.map