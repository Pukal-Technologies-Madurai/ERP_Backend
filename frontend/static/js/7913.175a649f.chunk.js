"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7913],{10489:(e,a,t)=>{t.d(a,{A:()=>d});t(65043);var i=t(83462),l=t(26600),r=t(35316),n=t(29347),s=t(11906),o=t(70579);const d=e=>{let{open:a=!1,onClose:t,children:d,title:c,onSubmit:m,submitText:u="Submit",closeText:h="Close",maxWidth:b="sm",fullWidth:p=!0,isSubmit:N=!1,startAction:g}=e;return(0,o.jsxs)(i.A,{open:a,onClose:t,fullWidth:p,maxWidth:b,children:[c&&(0,o.jsx)(l.A,{children:c}),(0,o.jsx)(r.A,{children:d}),(0,o.jsxs)(n.A,{className:"".concat(g?"d-flex justify-content-between":""),children:[g&&(0,o.jsx)("div",{children:g}),(0,o.jsxs)("div",{children:[(0,o.jsx)(s.A,{onClick:t,children:h}),m&&(0,o.jsx)(s.A,{variant:"contained",onClick:m,type:N?"submit":"button",className:"ms-2",children:u})]})]})]})}},14585:(e,a,t)=>{t.r(a),t.d(a,{default:()=>F});var i=t(89379),l=t(65043),r=t(65074),n=t(69223),s=t.n(n),o=t(72450),d=t(22520),c=t(8002),m=t(17392),u=t(10489),h=t(59662),b=t(70579);const p=(0,h.A)((0,b.jsx)("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2zm1-9h1V4H2v1h1zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2zm5-6v2h14V5zm0 14h14v-2H7zm0-6h14v-2H7z"}),"FormatListNumbered");var N=t(59383),g=t(51387);t(9715),t(67854),t(75936),t(1989);var A=t(73216),f=t(20656),C=t(63406);const v=e=>{let a=[];return e.forEach((e,t)=>{const i=e.product||[],l=(e.invoiceValue||0)-(e.totalReference||0);a.push({SNo:t+1,invoiceDate:e.invoiceDate||"",invoiceNumber:e.invoiceNumber||"",voucherType:e.voucherTypeGet||"",Con:e.branchNameGet||"",DueDate:e.paymentDueDate,RetailerName:e.retailerNameGet||"",KGS:"",Bags:"",Rate:"",DIS:e.discountValue||"",BillAmt:e.invoiceValue||0,Paid:e.totalReference||0,Pending:l,Remarks:"",_isHeader:!0}),i.forEach(e=>{a.push({SNo:"",Con:"",invoiceDate:"",invoiceNumber:"",voucherType:"",DueDate:"",RetailerName:e.productNameGet||"",KGS:e.kgsValue||"",Bags:e.bagsValue||"",Rate:e.rateValue||"",DIS:"",BillAmt:"",Paid:"",Pending:"",Remarks:"",_isHeader:!1})})}),a},x={Fromdate:(0,d.ny)(),Todate:(0,d.ny)(),Retailer:{value:"",label:"ALL"},VoucherType:{value:"",label:"ALL"},filterItems:{value:"",label:"ALL"}},F=e=>{let{loadingOn:a,loadingOff:t,pageID:n}=e;const[h,F]=(0,l.useState)([]),[y,D]=(0,l.useState)([]),[_,S]=(0,l.useState)(!1),j=(0,A.zy)(),R=sessionStorage.getItem("filterValues"),[T,V]=(0,l.useState)({voucherType:[],created_by:[]}),[O,H]=(0,l.useState)((0,i.A)((0,i.A)({},x),{},{refreshCount:0,filterDialog:!1})),[E,w]=(0,l.useState)([]),[B,P]=(0,l.useState)([]);(0,l.useEffect)(()=>{(0,r.z)({address:"purchase/invoice/filterValues"}).then(e=>{var a,t;e.success&&V({voucherType:null===(a=e.others)||void 0===a?void 0:a.voucherType,created_by:null===(t=e.others)||void 0===t?void 0:t.created_by})}).catch(e=>console.error(e))},[]),(0,l.useEffect)(()=>{const{Fromdate:e,Todate:l,VoucherType:n}=O;(0,r.z)({address:"purchase/invoice/paymentDue?Fromdate=".concat(e,"&Todate=").concat(l,"&VoucherType=").concat(n.value),loadingOff:t,loadingOn:a}).then(e=>{if(e.success){const a=e.data.map(e=>(0,i.A)((0,i.A)({},e),{},{customOrder:""}));D(a),F(v(a))}}).catch(e=>console.error(e))},[O.refreshCount,j]),(0,l.useEffect)(()=>{const{Fromdate:e,Todate:a,VoucherType:t=x.VoucherType}=(0,d.vU)(n);H(l=>(0,i.A)((0,i.A)({},l),{},{Fromdate:e,Todate:a,VoucherType:t,refreshCount:l.refreshCount+1}))},[R,n,j]);const I=e=>null!==e&&void 0!==e&&e._isHeader?" fw-bold  ":"";return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.A,{dataArray:h,columns:(k=[{Field_Name:"SNo",ColumnHeader:"No",Fied_Data:"string",isVisible:1,tdClass:e=>{let{row:a}=e;return I(a)}},{Field_Name:"Con",ColumnHeader:"Con",Fied_Data:"string",isVisible:1,tdClass:e=>{let{row:a}=e;return I(a)}},{Field_Name:"invoiceDate",ColumnHeader:"Entry Date",Fied_Data:"date",isVisible:0,tdClass:e=>{let{row:a}=e;return I(a)}},{Field_Name:"DueDate",ColumnHeader:"Due Date",Fied_Data:"date",isVisible:1,tdClass:e=>{let{row:a}=e;return I(a)}},{Field_Name:"invoiceNumber",ColumnHeader:"Voucher No",Fied_Data:"string",isVisible:0,tdClass:e=>{let{row:a}=e;return I(a)}},{Field_Name:"voucherType",ColumnHeader:"Voucher Type",Fied_Data:"string",isVisible:0,tdClass:e=>{let{row:a}=e;return I(a)}},{Field_Name:"RetailerName",ColumnHeader:"Vendor",Fied_Data:"string",isVisible:1,tdClass:e=>{let{row:a}=e;return I(a)},FooterCell:()=>""},{Field_Name:"KGS",ColumnHeader:"KGS",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:a}=e;return I(a)}},{Field_Name:"Bags",ColumnHeader:"Bags",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:a}=e;return I(a)}},{Field_Name:"Rate",ColumnHeader:"Rate",Fied_Data:"number",isVisible:1,Aggregation:"mean",tdClass:e=>{let{row:a}=e;return I(a)}},{Field_Name:"DIS",ColumnHeader:"DIS",Fied_Data:"string",isVisible:1,Aggregation:"mean",tdClass:e=>{let{row:a}=e;return I(a)}},{Field_Name:"BillAmt",ColumnHeader:"Bill Amt",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:a}=e;return I(a)}},{Field_Name:"Paid",ColumnHeader:"Paid",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:a}=e;return I(a)}},{Field_Name:"Pending",ColumnHeader:"Pending",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:a}=e;return I(a)}},{Field_Name:"Remarks",ColumnHeader:"Remarks",Fied_Data:"string",isVisible:1,tdClass:e=>{let{row:a}=e;return I(a)}}],k.map((e,a)=>{var t;return(0,i.A)((0,i.A)({},e),{},{OrderBy:null!==(t=e.OrderBy)&&void 0!==t?t:a+1})})),title:"Payment Due",stateUrl:"purchase/invoice/paymentDue",stateGroup:"paymentDue",PDFPrintOption:!0,ExcelPrintOption:()=>(async(e,a)=>{if(!e||0===e.length)return void alert("No data to export");const t=[...a||[]].filter(e=>1===e.isVisible||!0===e.isVisible).sort((e,a)=>(e.OrderBy||0)-(a.OrderBy||0));if(0===t.length)return void alert("No columns visible to export");const i=new(s().Workbook),l=i.addWorksheet("Payment Due"),r=t.map(e=>e.ColumnHeader||e.Field_Name);l.addRow(r),l.getRow(1).eachCell(e=>{e.font={bold:!0},e.alignment={horizontal:"center",vertical:"middle"},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},e.border={top:{style:"thin"},left:{style:"thin"},right:{style:"thin"},bottom:{style:"thin"}}});let n=0,d=0,c=0,m=0,u=0;e.forEach(e=>{e._isHeader?(n+=Number(e.BillAmt||0),d+=Number(e.Paid||0),c+=Number(e.Pending||0)):(m+=Number(e.KGS||0),u+=Number(e.Bags||0));const a=t.map(a=>{const t=e[a.Field_Name];return"date"===a.Fied_Data&&t?new Date(t).toLocaleDateString("en-GB"):void 0!==t&&null!==t?t:""});l.addRow(a).eachCell((i,l)=>{let r=a[l-1];i.border={top:{style:"thin"},left:{style:"thin"},right:{style:"thin"},bottom:{style:"thin"}},i.alignment={vertical:"middle",horizontal:"number"===typeof r||"number"===t[l-1].Fied_Data&&!isNaN(Number(r))?"right":"left"},e._isHeader?i.font={bold:!0,color:{argb:"1F4E79"}}:i.font={color:{argb:"000000"}}})});const h=t.map(e=>"KGS"===e.Field_Name?m:"Bags"===e.Field_Name?u:"BillAmt"===e.Field_Name?n:"Paid"===e.Field_Name?d:"Pending"===e.Field_Name?c:""),b=t.findIndex(e=>"RetailerName"===e.Field_Name);if(-1!==b)h[b]="OVERALL TOTAL";else{const e=t.findIndex(e=>["KGS","Bags","BillAmt"].includes(e.Field_Name));e>0?h[e-1]="OVERALL TOTAL":h[0]="OVERALL TOTAL"}l.addRow(h).eachCell(e=>{e.font={bold:!0},e.alignment={horizontal:"center",vertical:"middle"},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"C6E0B4"}},e.border={top:{style:"thin"},left:{style:"thin"},right:{style:"thin"},bottom:{style:"thin"}}}),l.columns=t.map(e=>{let a=15;return"SNo"===e.Field_Name&&(a=6),"Con"===e.Field_Name&&(a=15),"DueDate"!==e.Field_Name&&"invoiceDate"!==e.Field_Name||(a=12),"RetailerName"===e.Field_Name&&(a=45),"KGS"!==e.Field_Name&&"Bags"!==e.Field_Name&&"Rate"!==e.Field_Name&&"DIS"!==e.Field_Name||(a=10),"invoiceNumber"!==e.Field_Name&&"voucherType"!==e.Field_Name||(a=18),"Remarks"===e.Field_Name&&(a=20),{width:a}});const p=await i.xlsx.writeBuffer();(0,o.saveAs)(new Blob([p]),"Payment_Due.xlsx")})(E,B),MenuButtons:[],initialPageCount:20,CellSize:"small",maxHeightOption:!0,bodyFontSizePx:12,headerFontSizePx:12,enableGlobalSearch:!0,loadingOn:a,loadingOff:t,onFilteredDataChange:(e,a)=>{w(e),a&&P(a)},ButtonArea:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.A,{onClick:()=>S(!0),title:"Custom Order",children:(0,b.jsx)(p,{})}),(0,b.jsx)(m.A,{onClick:()=>H((0,i.A)((0,i.A)({},O),{},{filterDialog:!0})),children:(0,b.jsx)(N.A,{})})]})}),(0,b.jsx)(u.A,{open:_,onClose:()=>S(!1),title:"Custom Order Invoices",maxWidth:"lg",fullWidth:!0,onSubmit:()=>{const e=[...y].sort((e,a)=>(parseInt(e.customOrder)||Number.MAX_SAFE_INTEGER)-(parseInt(a.customOrder)||Number.MAX_SAFE_INTEGER));D(e),F(v(e)),S(!1)},children:(0,b.jsx)("div",{className:"table-responsive",style:{maxHeight:"60vh"},children:(0,b.jsxs)("table",{className:"table table-bordered table-sm text-center align-middle",children:[(0,b.jsx)("thead",{className:"table-light sticky-top",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"fa-12",children:"Invoice Number"}),(0,b.jsx)("th",{className:"fa-12",children:"Date"}),(0,b.jsx)("th",{className:"fa-12",children:"Retailer"}),(0,b.jsx)("th",{className:"fa-12",children:"Value"}),(0,b.jsx)("th",{className:"fa-12",style:{width:"100px"},children:"Order"}),(0,b.jsx)("th",{className:"fa-12",style:{width:"50px"},children:"Action"})]})}),(0,b.jsxs)("tbody",{children:[y.map((e,a)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"fa-12",children:e.invoiceNumber}),(0,b.jsx)("td",{className:"fa-12",children:new Date(e.invoiceDate).toLocaleDateString("en-GB")}),(0,b.jsx)("td",{className:"fa-12",children:e.retailerNameGet}),(0,b.jsx)("td",{className:"fa-12",children:(0,d.jG)(e.invoiceValue)}),(0,b.jsx)("td",{className:"fa-12",children:(0,b.jsx)("input",{type:"number",className:"cus-inpt text-center p-2",value:e.customOrder,onChange:e=>{const t=e.target.value;D(e=>{const i=[...e];return i[a].customOrder=t,i})}})}),(0,b.jsx)("td",{children:(0,b.jsx)(m.A,{color:"error",size:"small",onClick:()=>{D(e=>e.filter((e,t)=>t!==a))},children:(0,b.jsx)(g.A,{fontSize:"small"})})})]},e.invoiceId||a)),0===y.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:"6",children:"No invoices found"})})]})]})})}),(0,b.jsx)(u.A,{open:O.filterDialog,onClose:()=>H((0,i.A)((0,i.A)({},O),{},{filterDialog:!1})),title:"Filter",maxWidth:"sm",fullWidth:!0,onSubmit:()=>{(0,d.Mb)({Fromdate:null===O||void 0===O?void 0:O.Fromdate,Todate:O.Todate,VoucherType:O.VoucherType,pageID:n}),H(e=>(0,i.A)((0,i.A)({},e),{},{filterDialog:!1}))},children:(0,b.jsx)("div",{className:"table-responsive",children:(0,b.jsx)("table",{className:"table",children:(0,b.jsxs)("tbody",{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"From Date"}),(0,b.jsx)("td",{children:(0,b.jsx)("input",{type:"date",className:"cus-inpt",value:O.Fromdate,onChange:e=>H((0,i.A)((0,i.A)({},O),{},{Fromdate:e.target.value}))})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"To Date"}),(0,b.jsx)("td",{children:(0,b.jsx)("input",{type:"date",className:"cus-inpt",value:O.Todate,onChange:e=>H((0,i.A)((0,i.A)({},O),{},{Todate:e.target.value}))})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Voucher Type"}),(0,b.jsx)("td",{children:(0,b.jsx)(f.Ay,{value:O.VoucherType,onChange:e=>H((0,i.A)((0,i.A)({},O),{},{VoucherType:e})),options:[{value:"",label:"ALL"},...T.voucherType],styles:C.MR,menuPortalTarget:document.body,isSearchable:!0,filterOption:d.GI})})]})]})})})})]});var k}},51387:(e,a,t)=>{t.d(a,{A:()=>r});var i=t(59662),l=t(70579);const r=(0,i.A)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},63406:(e,a,t)=>{t.d(a,{zU:()=>s,ex:()=>o,MR:()=>n,Ap:()=>r,FX:()=>d});var i=t(89379);const l=t.p+"static/media/smt.aa4d4f940bbebff07a57.png",r={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},n={menu:(e,a)=>(0,i.A)((0,i.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,i.A)((0,i.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,i.A)((0,i.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,a)=>(0,i.A)((0,i.A)({},e),{},{backgroundColor:a.isSelected?"#2684FF":a.isFocused?"#E2ECF9":"white",color:a.isSelected?"white":"#333",padding:"10px 12px"})},s=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],o=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:l,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],d=[{name:"PURCHASE_ORDER",alias:"Purchase Order",moduleCode:"PO"},{name:"PURCHASE_INVOICE",alias:"Purchase Invoice",moduleCode:"PI"},{name:"SALE_ORDER",alias:"Sale Order",moduleCode:"SO"},{name:"SALE_INVOICE",alias:"Sale Invoice",moduleCode:"SI"},{name:"JOURNAL",alias:"Journal",moduleCode:"JO"},{name:"STOCK_JOURNAL",alias:"Stock Journal",moduleCode:"SJ"},{name:"PAYMENT",alias:"Payment",moduleCode:"PAY"},{name:"RECEIPT",alias:"Receipt",moduleCode:"REC"},{name:"CONTRA",alias:"Contra",moduleCode:"CON"}]}}]);
//# sourceMappingURL=7913.175a649f.chunk.js.map