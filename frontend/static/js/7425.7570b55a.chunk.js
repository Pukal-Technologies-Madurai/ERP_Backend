"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7425],{17425:(e,t,i)=>{i.r(t),i.d(t,{default:()=>N});var s=i(89379),l=i(65043),a=i(67784),n=i(17392),r=i(83462),o=i(26600),c=i(35316),d=i(29347),m=i(98533),u=i(11906),x=i(91036),h=i(14282),p=i(51387),b=i(83560),v=i(79484),f=i(65074),g=i(48471),j=i(70579);const S={District_Id:0,District_Name:"",State_Id:0,State_Name:""};const N=function(){const[e,t]=(0,l.useState)(!1),[i,N]=(0,l.useState)(!1),[_,A]=(0,l.useState)(!1),[C,D]=(0,l.useState)(S),[y,w]=(0,l.useState)(!1),[F,I]=(0,l.useState)([]),[z,k]=(0,l.useState)([]),[P,E]=(0,l.useState)([]),[R,T]=(0,l.useState)(""),[H,L]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{const e=await(0,f.z)({address:"masters/district"});e.success&&(I(e.data),k(e.data))}catch(e){console.error(e),x.oR.error("Failed to load districts")}})(),(async()=>{try{const e=await(0,f.z)({address:"masters/state/dropDown"});e.success&&E(e.data)}catch(e){console.log(e),x.oR.error("Failed to load State dropdown")}})()},[e]),(0,l.useEffect)(()=>{if(""===R.trim())k(F);else{const e=F.filter(e=>{const t=R.toLowerCase();return String(e.District_Id).toLowerCase().includes(t)||e.District_Name&&e.District_Name.toLowerCase().includes(t)||e.State_Name&&e.State_Name.toLowerCase().includes(t)});k(e)}},[R,F]);const O=()=>{H||(A(!1),D(S))},B=()=>{H||(w(!1),D(S))},M=()=>{H||N(!1)};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"card",children:[(0,j.jsxs)("div",{className:"card-header bg-white fw-bold d-flex align-items-center justify-content-between",children:["DISTRICT MASTER",(0,j.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,j.jsx)("div",{style:{width:"300px"},children:(0,j.jsx)(a.A,{fullWidth:!0,size:"small",variant:"outlined",placeholder:"Search District...",value:R,onChange:e=>T(e.target.value),InputProps:{startAdornment:(0,j.jsx)(v.A,{fontSize:"small",sx:{mr:1}}),style:{height:"40px"}}})}),(0,j.jsx)(h.A,{variant:"contained",size:"small",className:"rounded-1 btn-primary",onClick:()=>{A(!0),D(S)},sx:{textTransform:"none",fontWeight:500,px:2,height:"40px"},children:"Create District"})]})]}),(0,j.jsx)(g.Ay,{dataArray:z,EnableSerialNumber:!0,maxHeightOption:!0,columns:[(0,g.Lj)("District_Name","string","District Name"),(0,g.Lj)("State_Name","string","State"),{ColumnHeader:"Actions",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,j.jsxs)("td",{style:{minWidth:"80px"},children:[(0,j.jsx)(n.A,{onClick:()=>(e=>{D({District_Id:Number(e.District_Id),District_Name:e.District_Name,State_Id:Number(e.State_Id),State_Name:e.State_Name||""}),w(!0)})(t),size:"small",children:(0,j.jsx)(b.A,{})}),(0,j.jsx)(n.A,{onClick:()=>{N(!0),D({District_Id:t.District_Id,District_Name:t.District_Name})},size:"small",color:"error",children:(0,j.jsx)(p.A,{})})]})}}]})]}),(0,j.jsxs)(r.A,{open:_,onClose:O,children:[(0,j.jsx)(o.A,{children:"Create District"}),(0,j.jsx)(c.A,{children:(0,j.jsxs)("div",{className:"p-2",children:[(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)("label",{htmlFor:"stateSelect",children:"State *"}),(0,j.jsxs)("select",{className:"form-select form-select-sm",id:"editStateSelect",value:C.State_Id||"",onChange:e=>{const t=Number(e.target.value),i=P.find(e=>e.State_Id===t);D((0,s.A)((0,s.A)({},C),{},{State_Id:t,State_Name:i?i.State_Name:""}))},children:[(0,j.jsx)("option",{value:"",children:"Select State"}),P.map(e=>(0,j.jsx)("option",{value:e.State_Id,children:e.State_Name},e.State_Id))]})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)("label",{htmlFor:"districtName",className:"form-label",children:"District Name *"}),(0,j.jsx)("input",{type:"text",className:"form-control form-control-mdf",id:"districtName",value:C.District_Name,onChange:e=>D((0,s.A)((0,s.A)({},C),{},{District_Name:e.target.value}))})]})]})}),(0,j.jsxs)(d.A,{children:[(0,j.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:O,disabled:H,children:"Cancel"}),(0,j.jsx)("button",{className:"btn btn-primary btn-sm",onClick:async()=>{const{District_Name:e,State_Id:i}=C;if(e&&i){L(!0);try{const e=await(0,f.z)({address:"masters/district",method:"POST",bodyData:(0,s.A)({},C)});e.success?(x.oR.success("District Created successfully!"),A(!1),D(S),t(e=>!e)):x.oR.error(e.message)}catch(l){console.error(l),x.oR.error("Failed to Create District")}finally{L(!1)}}else x.oR.error("Please fill all required fields.")},disabled:H||!C.District_Name||!C.State_Id,children:H?"Creating...":"Create"})]})]}),(0,j.jsxs)(r.A,{open:y,onClose:B,children:[(0,j.jsx)(o.A,{children:"Edit District"}),(0,j.jsx)(c.A,{children:(0,j.jsxs)("div",{className:"p-3",children:[(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)("label",{htmlFor:"editStateSelect",className:"form-label",children:"State *"}),(0,j.jsxs)("select",{className:"form-select form-select-sm",id:"editStateSelect",value:C.State_Id||"",onChange:e=>{const t=Number(e.target.value);if(isNaN(t))return void x.oR.error("Invalid state selected");const i=P.find(e=>e.State_Id===t);D((0,s.A)((0,s.A)({},C),{},{State_Id:t,State_Name:i?i.State_Name:""}))},children:[(0,j.jsx)("option",{value:"",children:"Select State"}),P.map(e=>(0,j.jsx)("option",{value:e.State_Id,children:e.State_Name},e.State_Id))]})]}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsx)("label",{htmlFor:"editDistrictName",className:"form-label",children:"District Name *"}),(0,j.jsx)("input",{type:"text",className:"form-control form-control-sm",id:"editDistrictName",value:C.District_Name,onChange:e=>D((0,s.A)((0,s.A)({},C),{},{District_Name:e.target.value}))})]})]})}),(0,j.jsxs)(d.A,{children:[(0,j.jsx)("button",{className:"btn btn-secondary btn-sm me-2",onClick:B,disabled:H,children:"Cancel"}),(0,j.jsx)("button",{className:"btn btn-primary btn-sm",onClick:async()=>{var e;const{District_Id:i,District_Name:l,State_Id:a}=C,n={District_Id:Number(i),District_Name:l.trim(),State_Id:Number(a),State_Name:(null===(e=C.State_Name)||void 0===e?void 0:e.trim())||null};if(n.District_Id&&n.District_Name&&n.State_Id){L(!0);try{const e=await(0,f.z)({address:"masters/district",method:"PUT",bodyData:n});e.success?(x.oR.success("District updated successfully!"),I(e=>e.map(e=>e.District_Id===n.District_Id?(0,s.A)((0,s.A)({},e),n):e)),k(e=>e.map(e=>e.District_Id===n.District_Id?(0,s.A)((0,s.A)({},e),n):e)),w(!1),D(S)):(x.oR.error(e.message||"Update failed"),t(e=>!e))}catch(r){console.error("Update error:",r),x.oR.error("Failed to update district: ".concat(r.message)),t(e=>!e)}finally{L(!1)}}else x.oR.error("All required fields must be properly filled.")},disabled:H||!C.District_Name||!C.State_Id,children:H?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),"Updating..."]}):"Update"})]})]}),(0,j.jsxs)(r.A,{open:i,onClose:M,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,j.jsx)(o.A,{id:"alert-dialog-title",children:"Confirmation"}),(0,j.jsx)(c.A,{children:(0,j.jsx)(m.A,{id:"alert-dialog-description",children:(0,j.jsx)("b",{children:"Do you want to delete the ".concat(C.District_Name,"?")})})}),(0,j.jsxs)(d.A,{children:[(0,j.jsx)(u.A,{onClick:M,children:"Cancel"}),(0,j.jsx)(u.A,{onClick:async()=>{L(!0);const e=C.District_Id;try{I(t=>t.filter(t=>t.District_Id!==e)),k(t=>t.filter(t=>t.District_Id!==e));const i=await(0,f.z)({address:"masters/district",method:"DELETE",bodyData:{District_Id:e}});i.success?x.oR.success("District deleted successfully!"):(t(e=>!e),x.oR.error(i.message||"Failed to delete district"))}catch(i){console.error(i),t(e=>!e),x.oR.error("Failed to delete district")}finally{L(!1),N(!1)}},autoFocus:!0,sx:{color:"red"},children:H?"Deleting...":"Delete"})]})]})]})}},48471:(e,t,i)=>{i.d(t,{Ay:()=>H,JT:()=>R,Lj:()=>P,wF:()=>E});var s=i(89379),l=i(65043),a=i(77739),n=i(17392),r=i(41020),o=i(30922),c=i(32143),d=i(2050),m=i(48734),u=i(28076),x=i(39652),h=i(12110),p=i(63336),b=i(79650),v=i(71806),f=i(84882),g=i(58093),j=i(73460),S=i(31159),N=i(97707),_=i(47968),A=i(692),C=i(8737),D=i(58558),y=i(30599),w=i(433),F=i(37762),I=(i(20557),i(11238)),z=i(70579);const k=(e,t)=>e.map(e=>{const i={};return t.forEach((t,s)=>{if(t.isVisible||t.Defult_Display)if(t.isCustomCell&&t.Cell){const l=t.Cell({row:e}),a=t.ColumnHeader?String(t.ColumnHeader).replace(/\s+/g,"_").toLowerCase():"field_".concat(s+1);"string"!==typeof l&&"number"!==typeof l&&"bigint"!==typeof l||(i[a]=l)}else{let s=t.Field_Name;i[s]=e[s]||""}}),i}),P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,s.A)({isVisible:n,Field_Name:e,Fied_Data:t,align:l,verticalAlign:a},i&&{ColumnHeader:i})},E=e=>{let{buttonsData:t=[],ToolTipText:i="Options"}=e;const[s,u]=(0,l.useState)(null),x=Boolean(s);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(a.A,{title:i,children:(0,z.jsx)(n.A,{"aria-describedby":x,onClick:e=>{u(e.currentTarget)},className:"ms-2",size:"small",children:(0,z.jsx)(D.A,{})})}),(0,z.jsx)(r.Ay,{open:x,anchorEl:s,onClose:()=>{u(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,z.jsx)(o.A,{children:t.map((e,t)=>(0,z.jsxs)(c.A,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,z.jsx)(d.A,{children:null===e||void 0===e?void 0:e.icon}),(0,z.jsx)(m.A,{children:null===e||void 0===e?void 0:e.name})]},t))})})]})},R=(e,t)=>{switch(t){case"number":return e?(0,N.jG)(e):e;case"date":return e?(0,N.yc)(e):e;case"time":return e?(0,N.JG)(e):e;case"string":return e;default:return""}},T=e=>{let{dataArray:t=[],columns:i=[],onClickFun:a=null,isExpendable:r=!1,expandableComp:o=null,tableMaxHeight:c=550,initialPageCount:d=20,EnableSerialNumber:m=!1,CellSize:D="small",disablePagination:P=!1,title:T="",PDFPrintOption:H=!1,ExcelPrintOption:L=!1,maxHeightOption:O=!1,ButtonArea:B=null,MenuButtons:M=[],bodyFontSizePx:V=13,headerFontSizePx:W=13}=e;const[U,q]=(0,l.useState)(0),[G,J]=(0,l.useState)(d),[K,Q]=(0,l.useState)([]),[X,Y]=(0,l.useState)(!0),Z=X&&O?" max-content ":c,$=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],ee=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],te=(e=>{if(!K.length)return e;return[...e].sort((e,t)=>{for(const i of K){const{columnId:s,direction:l}=i,a=e[s],n=t[s];if(a!==n)return"asc"===l?a>n?1:-1:a<n?1:-1}return 0})})(t),ie=U*G,se=ie+G,le=te.slice(ie,se),ae=e=>{let{row:t,index:s}=e;const[c,d]=(0,l.useState)(!1),h="20px";return(0,z.jsxs)(l.Fragment,{children:[(0,z.jsxs)(u.A,{children:[!0===r&&o&&(0,z.jsx)(x.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(V,"px")},children:(0,z.jsx)(n.A,{size:"small",onClick:()=>d(e=>!e),children:c?(0,z.jsx)(C.A,{sx:{fontSize:h}}):(0,z.jsx)(A.A,{sx:{fontSize:h}})})}),!0===m&&(0,z.jsx)(x.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(V,"px")},children:G*U+s+1}),null===i||void 0===i?void 0:i.map((e,i)=>{var l,n;const r=(0,N.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,N.id)(null===e||void 0===e?void 0:e.isVisible,1),o=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,c=!o,d=(t,i,s)=>null!==e&&void 0!==e&&e.tdClass?" ".concat(null===e||void 0===e?void 0:e.tdClass({row:t,Field_Name:i,index:s})," "):"",m=e.align?null===(l=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===l?void 0:l.class:"",u=e.verticalAlign?null===(n=ee.find(t=>t.type===String(e.verticalAlign).toLowerCase()))||void 0===n?void 0:n.class:" vctr ";if(r&&c){const l=Object.entries(t).find(t=>{let[i]=t;return i===e.Field_Name});return(0,z.jsx)(x.A,{className:"border-end ".concat(m," ").concat(u," ").concat(d(t,e.Field_Name,s)),sx:{fontSize:"".concat(V,"px")},onClick:()=>a?a(t):console.log("Function not supplied"),children:l?R(l[1],null===e||void 0===e?void 0:e.Fied_Data):"-"},i)}return r&&o?(0,z.jsx)(x.A,{className:"border-end ".concat(m," ").concat(u," ").concat(d(t,e.Field_Name,s)),sx:{fontSize:"".concat(V,"px")},children:e.Cell({row:t,Field_Name:e.Field_Name,index:s})},i):(0,z.jsx)(x.A,{sx:{fontSize:"".concat(V,"px")},className:"border-end ".concat(m," ").concat(u),children:"-"},i)})]}),!0===r&&o&&c&&(0,z.jsx)(u.A,{children:(0,z.jsx)(x.A,{colSpan:Number(null===i||void 0===i?void 0:i.length)+(!0===m?2:1),children:o({row:t,index:s})})})]})};return(0,z.jsxs)(h.A,{className:"rounded-3 bg-white overflow-hidden",component:p.A,children:[(0,z.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(H||L||M.length>0||O)&&(0,z.jsx)(E,{ToolTipText:"Table Options",buttonsData:[...O?[{name:"Max Height",icon:X?(0,z.jsx)(w.A,{fontSize:"small",color:"primary"}):(0,z.jsx)(y.A,{fontSize:"small"}),onclick:()=>Y(e=>!e),disabled:(0,N.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...H?[{name:"PDF Print",icon:(0,z.jsx)(_.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const i=new F.default,l=k(e,t),a=t.filter(e=>e.isVisible||e.Defult_Display).map(e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase()),n=l.map(e=>a.map(t=>e[t])).map((e,t)=>(0,s.A)((0,s.A)({},e),{},{Sno:t+1}));i.autoTable({head:[a],body:n}),i.save("table.pdf")}catch(i){console.error(i)}})(t,i),disabled:(0,N.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...L?[{name:"Excel Print",icon:(0,z.jsx)(_.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const i=k(e,t),s=I.Wp.json_to_sheet(i),l=I.Wp.book_new();I.Wp.book_append_sheet(l,s,"Data"),I._h(l,"table.xlsx")}catch(i){console.error(i)}})(t,i),disabled:(0,N.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...M]}),B&&B,T&&(0,z.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:T})]}),(0,z.jsx)(b.A,{sx:{maxHeight:Z},children:(0,z.jsxs)(v.A,{stickyHeader:!0,size:D,children:[(0,z.jsx)(f.A,{children:(0,z.jsxs)(u.A,{children:[r&&o&&(0,z.jsx)(x.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(W,"px"),backgroundColor:"#EDF0F7"},children:"#"}),m&&(0,z.jsx)(x.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(W,"px"),backgroundColor:"#EDF0F7"},children:"SNo"}),i.map((e,t)=>{const i=(0,N.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,N.id)(null===e||void 0===e?void 0:e.isVisible,1),l=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,a=K.find(t=>t.columnId===e.Field_Name),n=a?a.direction:"asc";var r,o,c,d;return i?l?(0,z.jsx)(x.A,{className:"fw-bold border-end border-top "+(e.align?null===(r=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===r?void 0:r.class:""),sx:{fontSize:"".concat(W,"px"),backgroundColor:"#EDF0F7"},sortDirection:!!a&&n,children:(0,z.jsx)(g.A,{active:!!a,direction:n,onClick:()=>(e=>{const t=K.find(t=>t.columnId===e);if(t){const i="asc"===t.direction;Q(K.map(t=>t.columnId===e?(0,s.A)((0,s.A)({},t),{},{direction:i?"desc":"asc"}):t))}else Q([...K,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(o=e.Field_Name)||void 0===o?void 0:o.replace(/_/g," "))})},t):(0,z.jsx)(x.A,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(c=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===c?void 0:c.class:""),sx:{fontSize:"".concat(W,"px"),backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(d=e.Field_Name)||void 0===d?void 0:d.replace(/_/g," "))},t):null})]})}),(0,z.jsxs)(j.A,{children:[(P?te:le).map((e,t)=>(0,z.jsx)(ae,{row:e,index:t},t)),0===t.length&&(0,z.jsx)(u.A,{children:(0,z.jsx)(x.A,{colSpan:i.length+(!0===r&&o?1:0)+(!0===m?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!P&&0!==le.length&&(0,z.jsx)("div",{className:"p-2 pb-0",children:(0,z.jsx)(S.A,{component:"div",count:t.length,page:U,onPageChange:(e,t)=>{q(t)},rowsPerPage:G,onRowsPerPageChange:e=>{J(parseInt(e.target.value,10)),q(0)},rowsPerPageOptions:Array.from(new Set([d,5,20,50,100,200,500])).sort((e,t)=>e-t),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};T.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const H=T}}]);
//# sourceMappingURL=7425.7570b55a.chunk.js.map