"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[173],{33064(e,a,o){o.d(a,{A:()=>S});var t=o(98587),n=o(58168),r=o(65043),s=o(58387),c=o(98610),i=o(6803),d=o(34535),l=o(61475),u=o(54516),h=o(85213),p=o(75429),m=o(92532),A=o(72372);function b(e){return(0,A.Ay)("PrivateSwitchBase",e)}(0,m.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var g=o(70579);const f=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],x=(0,d.Ay)(p.A,{name:"MuiSwitchBase"})(e=>{let{ownerState:a}=e;return(0,n.A)({padding:9,borderRadius:"50%"},"start"===a.edge&&{marginLeft:"small"===a.size?-3:-12},"end"===a.edge&&{marginRight:"small"===a.size?-3:-12})}),v=(0,d.Ay)("input",{name:"MuiSwitchBase",shouldForwardProp:l.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),S=r.forwardRef(function(e,a){const{autoFocus:o,checked:r,checkedIcon:d,className:l,defaultChecked:p,disabled:m,disableFocusRipple:A=!1,edge:S=!1,icon:k,id:C,inputProps:R,inputRef:y,name:B,onBlur:j,onChange:z,onFocus:w,readOnly:I,required:F=!1,tabIndex:M,type:E,value:O}=e,N=(0,t.A)(e,f),[P,H]=(0,u.A)({controlled:r,default:Boolean(p),name:"SwitchBase",state:"checked"}),T=(0,h.A)();let D=m;T&&"undefined"===typeof D&&(D=T.disabled);const L="checkbox"===E||"radio"===E,U=(0,n.A)({},e,{checked:P,disabled:D,disableFocusRipple:A,edge:S}),V=(e=>{const{classes:a,checked:o,disabled:t,edge:n}=e,r={root:["root",o&&"checked",t&&"disabled",n&&"edge".concat((0,i.A)(n))],input:["input"]};return(0,c.A)(r,b,a)})(U);return(0,g.jsxs)(x,(0,n.A)({component:"span",className:(0,s.A)(V.root,l),centerRipple:!0,focusRipple:!A,disabled:D,tabIndex:null,role:void 0,onFocus:e=>{w&&w(e),T&&T.onFocus&&T.onFocus(e)},onBlur:e=>{j&&j(e),T&&T.onBlur&&T.onBlur(e)},ownerState:U,ref:a},N,{children:[(0,g.jsx)(v,(0,n.A)({autoFocus:o,checked:r,defaultChecked:p,className:V.input,disabled:D,id:L?C:void 0,name:B,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const a=e.target.checked;H(a),z&&z(e,a)},readOnly:I,ref:y,required:F,ownerState:U,tabIndex:M,type:E},"checkbox"===E&&void 0===O?{}:{value:O},R)),P?d:k]}))})},41053(e,a,o){o.d(a,{A:()=>t});const t=o(65043).createContext(void 0)},47509(e,a,o){o.r(a),o.d(a,{default:()=>x});var t=o(89379),n=o(65043),r=o(79650),s=o(63336),c=o(71806),i=o(84882),d=o(28076),l=o(39652),u=o(73460),h=o(51962),p=o(11906),m=o(7204),A=o(91036),b=(o(92342),o(65074)),g=o(63406),f=o(70579);const x=e=>{const[a,o]=(0,n.useState)([]),[x,v]=(0,n.useState)([]),[S,k]=(0,n.useState)([]),[C,R]=(0,n.useState)(null),[y,B]=(0,n.useState)(!1),j=JSON.parse(localStorage.getItem("user")||"{}"),z=null===j||void 0===j?void 0:j.Company_id;(0,n.useEffect)(()=>{z&&(0,b.z)({address:"masters/users?Company_id=".concat(z)}).then(e=>{e.success?o(e.data):A.oR.error("Failed to load users")}).catch(e=>console.error(e))},[z]),(0,n.useEffect)(()=>{C&&(0,b.z)({address:"authorization/userBranches?UserId=".concat(C.value)}).then(e=>{e.success?(v(e.data),k(e.data)):A.oR.error("Failed to load branches")}).catch(e=>console.error(e))},[C]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"row",children:(0,f.jsx)("div",{className:"col-sm-4 pt-1",children:(0,f.jsx)(m.Ay,{value:C,onChange:e=>R(e),options:a.map(e=>({value:e.UserId,label:e.Name})),styles:g.MR,isSearchable:!0,placeholder:"Select User"})})}),(0,f.jsx)("br",{}),(0,f.jsx)("h6",{style:{marginBottom:"0.5em",borderBottom:"2px solid blue",width:"fit-content"},children:"Branch Access Control"}),S.length>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(r.A,{component:s.A,sx:{maxHeight:650},children:(0,f.jsxs)(c.A,{stickyHeader:!0,"aria-label":"branch-access-table",children:[(0,f.jsx)(i.A,{children:(0,f.jsxs)(d.A,{children:[(0,f.jsx)(l.A,{sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"ID"}),(0,f.jsx)(l.A,{sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Branch Name"}),(0,f.jsx)(l.A,{sx:{backgroundColor:"rgb(15, 11, 42)",color:"white"},children:"Action"})]})}),(0,f.jsx)(u.A,{children:S.map(e=>(0,f.jsxs)(d.A,{hover:!0,children:[(0,f.jsx)(l.A,{children:e.id}),(0,f.jsx)(l.A,{children:e.BranchName}),(0,f.jsx)(l.A,{children:(0,f.jsx)(h.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28}},checked:1===e.HasAccess,onChange:a=>{return o=e.id,n=a.target.checked,void k(e=>e.map(e=>e.id===o?(0,t.A)((0,t.A)({},e),{},{HasAccess:n?1:0}):e));var o,n}})})]},e.id))})]})}),(0,f.jsx)("div",{style:{marginTop:"1em",textAlign:"right"},children:(0,f.jsx)(p.A,{variant:"contained",color:"primary",onClick:()=>{C?(B(!0),e.loadingOn&&e.loadingOn(),(0,b.z)({address:"authorization/userBranches/saveAll",method:"POST",bodyData:{UserId:C.value,Branches:S.map(e=>({BranchId:e.id,HasAccess:e.HasAccess}))},headers:{"Content-Type":"application/json"}}).then(e=>{e.success?(A.oR.success("Branch access updated successfully"),v([...S])):(A.oR.error(e.message||"Failed to update branch access"),k([...x]))}).catch(e=>{console.error(e),A.oR.error("Error while saving branch access"),k([...x])}).finally(()=>{B(!1),e.loadingOff&&e.loadingOff()})):A.oR.error("Please select a user first")},disabled:y,children:y?"Saving...":"Save"})})]})]})}},51962(e,a,o){o.d(a,{A:()=>z});var t=o(98587),n=o(58168),r=o(65043),s=o(58387),c=o(98610),i=o(67266),d=o(33064),l=o(59662),u=o(70579);const h=(0,l.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=(0,l.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),m=(0,l.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var A=o(6803),b=o(6431),g=o(34535),f=o(61475),x=o(92532),v=o(72372);function S(e){return(0,v.Ay)("MuiCheckbox",e)}const k=(0,x.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),C=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],R=(0,g.Ay)(d.A,{shouldForwardProp:e=>(0,f.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.root,o.indeterminate&&a.indeterminate,a["size".concat((0,A.A)(o.size))],"default"!==o.color&&a["color".concat((0,A.A)(o.color))]]}})(e=>{let{theme:a,ownerState:o}=e;return(0,n.A)({color:(a.vars||a).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:a.vars?"rgba(".concat("default"===o.color?a.vars.palette.action.activeChannel:a.vars.palette[o.color].mainChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,i.X4)("default"===o.color?a.palette.action.active:a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==o.color&&{["&.".concat(k.checked,", &.").concat(k.indeterminate)]:{color:(a.vars||a).palette[o.color].main},["&.".concat(k.disabled)]:{color:(a.vars||a).palette.action.disabled}})}),y=(0,u.jsx)(p,{}),B=(0,u.jsx)(h,{}),j=(0,u.jsx)(m,{}),z=r.forwardRef(function(e,a){var o,i;const d=(0,b.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:l=y,color:h="primary",icon:p=B,indeterminate:m=!1,indeterminateIcon:g=j,inputProps:f,size:x="medium",className:v}=d,k=(0,t.A)(d,C),z=m?g:p,w=m?g:l,I=(0,n.A)({},d,{color:h,indeterminate:m,size:x}),F=(e=>{const{classes:a,indeterminate:o,color:t,size:r}=e,s={root:["root",o&&"indeterminate","color".concat((0,A.A)(t)),"size".concat((0,A.A)(r))]},i=(0,c.A)(s,S,a);return(0,n.A)({},a,i)})(I);return(0,u.jsx)(R,(0,n.A)({type:"checkbox",inputProps:(0,n.A)({"data-indeterminate":m},f),icon:r.cloneElement(z,{fontSize:null!=(o=z.props.fontSize)?o:x}),checkedIcon:r.cloneElement(w,{fontSize:null!=(i=w.props.fontSize)?i:x}),ownerState:I,ref:a,className:(0,s.A)(F.root,v)},k,{classes:F}))})},63406(e,a,o){o.d(a,{zU:()=>c,ex:()=>i,MR:()=>s,Ap:()=>r,FX:()=>d});var t=o(89379);const n=o.p+"static/media/smt.aa4d4f940bbebff07a57.png",r={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},s={menu:(e,a)=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,a)=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:a.isSelected?"#2684FF":a.isFocused?"#E2ECF9":"white",color:a.isSelected?"white":"#333",padding:"10px 12px"})},c=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],i=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:n,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:n,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:n,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],d=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},85213(e,a,o){o.d(a,{A:()=>r});var t=o(65043),n=o(41053);function r(){return t.useContext(n.A)}}}]);
//# sourceMappingURL=173.5d2c3885.chunk.js.map