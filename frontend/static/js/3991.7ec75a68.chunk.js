"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3991],{14792:(e,t,l)=>{l.d(t,{A:()=>a});var o=l(70579);const a=()=>(0,o.jsx)("span",{style:{color:"red",fontWeight:"bold",fontSize:"1em"},children:" *"})},33991:(e,t,l)=>{l.r(t),l.d(t,{default:()=>I});var o=l(89379),a=l(17392),n=l(11906),s=l(83462),d=l(26600),i=l(35316),r=l(29347),c=l(48471),u=l(73216),v=l(65043),h=l(97707),m=l(83560),x=l(59383),g=l(79484),j=l(65074),p=l(20656),A=l(63406),C=l(33438),_=l(49652),f=l(91036),b=l(14792),w=l(70579);const T=e=>{var t;let{loadingOn:l,loadingOff:c,children:u,productValue:m={},onSubmit:x,open:g=!1,close:T=()=>{}}=e;const N="border fa-14 vctr",[I,S]=(0,v.useState)([]),[y,F]=(0,v.useState)([]),[P,G]=(0,v.useState)([]),[L,D]=(0,v.useState)(_.VQ);(0,v.useEffect)(()=>{if(g){(async()=>{try{l&&l();const[e,t,o]=await Promise.all([(0,j.z)({address:"masters/products/allProducts"}),(0,j.z)({address:"dataEntry/godownLocationMaster"}),(0,j.z)({address:"masters/uom"})]),a=(e.success?e.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Product_Name).localeCompare(null===t||void 0===t?void 0:t.Product_Name)),n=(t.success?t.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Godown_Name).localeCompare(null===t||void 0===t?void 0:t.Godown_Name)),s=(o.success?o.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Units).localeCompare(null===t||void 0===t?void 0:t.Units));F(a),S(n),G(s)}catch(e){console.error("Error fetching data:",e)}finally{c&&c()}})()}},[g]),(0,v.useEffect)(()=>{(0,h.IQ)(null===m||void 0===m?void 0:m.Arr_Id)&&D(e=>Object.fromEntries(Object.entries(e).map(e=>{let[t,l]=e;return"Arrival_Date"===t?[t,m[t]?(0,h.ny)(m[t]):l]:[t,m[t]?m[t]:l]})))},[m]);const M=()=>{T&&T(),D(_.VQ)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{className:"p-0 m-0",children:u}),(0,w.jsx)(s.A,{open:g,onClose:M,fullWidth:!0,maxWidth:"sm",children:(0,w.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!(0,h.IQ)(L.Product_Id))return f.oR.error("Select Item");(()=>{const e=(0,h.IQ)(null===L||void 0===L?void 0:L.Arr_Id)?"PUT":"POST";(0,j.z)({address:"inventory/tripSheet/arrivalEntry",method:e,bodyData:L,loadingOn:l,loadingOff:c}).then(e=>{e.success?(f.oR.success(e.message),M(),x&&x()):f.oR.error(e.message)}).catch(e=>console.log(e))})()},children:[(0,w.jsxs)(d.A,{className:"d-flex align-items-center",children:[(0,w.jsx)("span",{className:"flex-grow-1",children:"Add Arrival Details"}),(0,w.jsx)(a.A,{size:"small",type:"button",color:"error",onClick:M,children:(0,w.jsx)(C.A,{})})]}),(0,w.jsx)(i.A,{children:(0,w.jsx)("table",{className:"table m-0",children:(0,w.jsxs)("tbody",{children:[(0,w.jsxs)("tr",{children:[(0,w.jsxs)("td",{className:N,children:["Date ",(0,w.jsx)(b.A,{})]}),(0,w.jsx)("td",{className:N,children:(0,w.jsx)("input",{type:"date",value:L.Arrival_Date,onChange:e=>D(t=>(0,o.A)((0,o.A)({},t),{},{Arrival_Date:e.target.value})),className:"cus-inpt p-2 ",required:!0})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsxs)("td",{className:N,children:["Item Name ",(0,w.jsx)(b.A,{})]}),(0,w.jsx)("td",{className:N,children:(0,w.jsx)(p.Ay,{value:{value:L.Product_Id,label:null===(t=y.find(e=>(0,h.id)(e.Product_Id,L.Product_Id)))||void 0===t?void 0:t.Product_Name},onChange:e=>{const t=Number(e.value||0),l=y.find(e=>(0,h.id)(e.Product_Id,t));D(t=>(0,o.A)((0,o.A)({},t),{},{Product_Id:e.value,HSN_Code:null===l||void 0===l?void 0:l.HSN_Code,Gst_P:null===l||void 0===l?void 0:l.Gst_P,Cgst_P:null===l||void 0===l?void 0:l.Cgst_P,Sgst_P:null===l||void 0===l?void 0:l.Sgst_P,Igst_P:null===l||void 0===l?void 0:l.Igst_P,Unit_Id:null===l||void 0===l?void 0:l.UOM_Id,Units:null===l||void 0===l?void 0:l.Units}))},options:[{value:"",label:"select product",isDisabled:!0},...y.map(e=>({value:null===e||void 0===e?void 0:e.Product_Id,label:null===e||void 0===e?void 0:e.Product_Name}))],styles:A.MR,required:!0,isSearchable:!0,placeholder:"Select Product",maxMenuHeight:200})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsxs)("td",{className:N,children:["From Godown ",(0,w.jsx)(b.A,{})]}),(0,w.jsx)("td",{className:N,children:(0,w.jsxs)("select",{value:L.From_Location,onChange:e=>D((0,o.A)((0,o.A)({},L),{},{From_Location:e.target.value,BatchLocation:I.find(t=>(0,h.id)(t.Godown_Id,e.target.value)).Godown_Name||""})),className:"cus-inpt p-2",required:!0,children:[(0,w.jsx)("option",{value:"",disabled:!0,children:"select godown"}),I.filter(e=>!(0,h.id)(e.Godown_Id,L.To_Location)).map((e,t)=>(0,w.jsx)("option",{value:e.Godown_Id,children:e.Godown_Name},t))]})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsxs)("td",{className:N,children:["To Godown ",(0,w.jsx)(b.A,{})]}),(0,w.jsx)("td",{className:N,children:(0,w.jsxs)("select",{value:L.To_Location,onChange:e=>D((0,o.A)((0,o.A)({},L),{},{To_Location:e.target.value})),className:"cus-inpt p-2",required:!0,children:[(0,w.jsx)("option",{value:"",disabled:!0,children:"select godown"}),I.filter(e=>!(0,h.id)(e.Godown_Id,L.From_Location)).map((e,t)=>(0,w.jsx)("option",{value:e.Godown_Id,children:e.Godown_Name},t))]})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsxs)("td",{className:N,children:["Weight ",(0,w.jsx)(b.A,{})]}),(0,w.jsxs)("td",{className:N,children:[(0,w.jsx)("input",{className:"cus-inpt p-2 w-50",value:L.QTY?L.QTY:"",required:!0,placeholder:"Weight",onInput:h.BE,onChange:e=>{const t=(0,h.IQ)(L.Gst_Rate)?(0,h.JH)(e.target.value,L.Gst_Rate):L.Taxable_Value;D(l=>(0,o.A)((0,o.A)({},l),{},{QTY:e.target.value,Taxable_Value:t,Total_Value:t}))}}),(0,w.jsxs)("select",{className:"cus-inpt p-2 w-50",value:L.Unit_Id,placeholder:"Units ex: kg, l, ml...",onChange:e=>D(t=>(0,o.A)((0,o.A)({},t),{},{Unit_Id:e.target.value,Units:P.find(t=>(0,h.id)(t.Unit_Id,e.target.value)).Units})),children:[(0,w.jsx)("option",{value:"",disabled:!0,children:"select uom"}),P.map((e,t)=>(0,w.jsx)("option",{value:e.Unit_Id,children:e.Units},t))]})]})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:N,children:"Rate"}),(0,w.jsx)("td",{className:N,children:(0,w.jsx)("input",{className:"cus-inpt p-2",value:L.Gst_Rate?L.Gst_Rate:"",placeholder:"Rate",onInput:h.BE,onChange:e=>{const t=(0,h.IQ)(L.QTY)?(0,h.JH)(e.target.value,L.QTY):L.Taxable_Value;D(l=>(0,o.A)((0,o.A)({},l),{},{Gst_Rate:e.target.value,Taxable_Value:t,Total_Value:t}))}})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:N,children:"BillNo"}),(0,w.jsx)("td",{className:N,children:(0,w.jsx)("input",{value:L.BillNo,onChange:e=>D((0,o.A)((0,o.A)({},L),{},{BillNo:e.target.value})),className:"cus-inpt p-2"})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:N,children:"Concern"}),(0,w.jsx)("td",{className:N,children:(0,w.jsx)("input",{value:L.Concern,onChange:e=>D((0,o.A)((0,o.A)({},L),{},{Concern:e.target.value})),className:"cus-inpt p-2"})})]})]})})}),(0,w.jsxs)(r.A,{children:[(0,w.jsx)(n.A,{type:"button",onClick:M,children:"close"}),(0,w.jsx)(n.A,{type:"submit",variant:"outlined",children:(0,h.IQ)(L.Id)?"Update":"Add"})]})]})})]})},N={Fromdate:(0,h.ny)(),Todate:(0,h.ny)()},I=e=>{let{loadingOn:t,loadingOff:l}=e;const C=(0,u.Zp)(),_=(0,u.zy)(),f=new URLSearchParams((0,u.zy)().search),[b,I]=(0,v.useState)([]),[S,y]=(0,v.useState)({Fromdate:N.Fromdate,Todate:N.Todate,fetchFrom:N.Fromdate,fetchTo:N.Todate,filterDialog:!1,refresh:!1,printPreviewDialog:!1,FromGodown:{label:"Select Godown",value:""},ToGodown:{label:"Select Godown",value:""},Items:[],TripConvertion:{label:"ALL",value:""},addDialog:!1});(0,v.useEffect)(()=>{t&&t(),(0,j.z)({address:"inventory/tripSheet/arrivalEntry?Fromdate=".concat(null===S||void 0===S?void 0:S.fetchFrom,"&Todate=").concat(null===S||void 0===S?void 0:S.fetchTo)}).then(e=>{e.success&&I(e.data)}).finally(()=>{l&&l()}).catch(e=>console.error(e))},[null===S||void 0===S?void 0:S.fetchFrom,null===S||void 0===S?void 0:S.fetchTo,null===S||void 0===S?void 0:S.refresh]),(0,v.useEffect)(()=>{const e={Fromdate:f.get("Fromdate")&&(0,h.vd)(f.get("Fromdate"))?f.get("Fromdate"):N.Fromdate,Todate:f.get("Todate")&&(0,h.vd)(f.get("Todate"))?f.get("Todate"):N.Todate};y(t=>(0,o.A)((0,o.A)({},t),{},{fetchFrom:e.Fromdate,fetchTo:e.Todate}))},[_.search]);const F=()=>{y((0,o.A)((0,o.A)({},S),{},{filterDialog:!1}))},P=(0,v.useMemo)(()=>{const e=b.map(e=>e.FromLocation);return[...new Set(e)].map(e=>({value:e,label:e}))},[b]),G=(0,v.useMemo)(()=>{const e=b.map(e=>e.ToLocation);return[...new Set(e)].map(e=>({value:e,label:e}))},[b]),L=(0,v.useMemo)(()=>{const e=b.map(e=>e.Product_Name);return[...new Set(e)].map(e=>({value:e,label:e}))},[b]),D=(0,v.useMemo)(()=>b.filter(e=>{var t,l,o,a;const n=(null===(t=S.FromGodown)||void 0===t?void 0:t.value)||null,s=(null===(l=S.ToGodown)||void 0===l?void 0:l.value)||null,d=S.Items||[],i=""!==(null===(o=S.TripConvertion)||void 0===o?void 0:o.value),r=null===(a=S.TripConvertion)||void 0===a?void 0:a.value,c=!!i&&("Converted"===r?(0,h.IQ)(null===e||void 0===e?void 0:e.Trip_Id):!(0,h.IQ)(null===e||void 0===e?void 0:e.Trip_Id)),u=!!n&&(0,h.iw)(n)===(0,h.iw)(e.FromLocation),v=!!s&&(0,h.iw)(s)===(0,h.iw)(e.ToLocation),m=d.length>0&&d.some(t=>(0,h.iw)(t.value)===(0,h.iw)(e.Product_Name));return n&&s&&d.length>0?u&&v&&m:n&&s?u&&v:n&&d.length>0?u&&m:s&&d.length>0?v&&m:c&&(u||v||m)}),[b,S.FromGodown,S.ToGodown,S.Items,S.TripConvertion]),M=e=>{let{row:n}=e;const[s,d]=(0,v.useState)(!1);return!(0,h.IQ)(null===n||void 0===n?void 0:n.Trip_Id)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(a.A,{onClick:()=>d(!0),children:(0,w.jsx)(m.A,{className:"fa-20"})}),s&&(0,w.jsx)(T,{productValue:(0,o.A)((0,o.A)({},n),{},{dialog:s}),open:s,close:()=>d(!1),onSubmit:()=>{d(!1),y(e=>(0,o.A)((0,o.A)({},e),{},{refresh:!e.refresh}))},loadingOff:l,loadingOn:t,children:"H"})]})};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(c.Ay,{dataArray:S.FromGodown.value||S.ToGodown.value||S.Items.length>0?D:b,title:"Arrival List",maxHeightOption:!0,ExcelPrintOption:!0,EnableSerialNumber:!0,initialPageCount:10,headerFontSizePx:13,bodyFontSizePx:11,ButtonArea:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(a.A,{size:"small",onClick:()=>y(e=>(0,o.A)((0,o.A)({},e),{},{filterDialog:!0})),children:(0,w.jsx)(x.A,{})}),(0,w.jsx)(T,{onSubmit:()=>y(e=>(0,o.A)((0,o.A)({},e),{},{refresh:!e.refresh})),open:S.addDialog,close:()=>y(e=>(0,o.A)((0,o.A)({},e),{},{addDialog:!1})),loadingOff:l,loadingOn:t,children:(0,w.jsx)(n.A,{onClick:()=>y(e=>(0,o.A)((0,o.A)({},e),{},{addDialog:!0})),children:"Add"})})]}),columns:[(0,c.Lj)("Arrival_Date","date","Date"),(0,c.Lj)("Product_Name","string","Item"),(0,c.Lj)("QTY","string","Weight"),(0,c.Lj)("Gst_Rate","string","Rate"),(0,c.Lj)("Batch_No","string","Batch"),(0,c.Lj)("FromLocation","string","From"),(0,c.Lj)("ToLocation","string","To"),{isVisible:1,ColumnHeader:"Trip-?",isCustomCell:!0,Cell:e=>{let{row:t}=e;const l=(0,h.IQ)(null===t||void 0===t?void 0:t.Arrival_Id);return(0,w.jsx)("span",{className:"cus-badge text-white fa-10 fw-bold ".concat(l?"bg-success":"bg-warning"),children:l?"Converted":"Not"})}},{isVisible:1,ColumnHeader:"P-Orders",isCustomCell:!0,Cell:e=>{let{row:t}=e;const l=(0,h.id)(null===t||void 0===t?void 0:t.ConvertedAsOrder,1);return(0,w.jsx)("span",{className:"cus-badge text-white fa-10 fw-bold ".concat(l?" bg-success ":" bg-warning "),children:l?"Converted":"Not"})}},{isVisible:1,ColumnHeader:"P-Invoices",isCustomCell:!0,Cell:e=>{let{row:t}=e;const l=(0,h.id)(null===t||void 0===t?void 0:t.ConvertedAsInvoice,1);return(0,w.jsx)("span",{className:"cus-badge text-white fa-10 fw-bold ".concat(l?" bg-success ":" bg-warning "),children:l?"Converted":"Not"})}},{isVisible:1,ColumnHeader:"Action",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,w.jsx)(M,{row:t})}}]}),(0,w.jsxs)(s.A,{open:S.filterDialog,onClose:F,fullWidth:!0,maxWidth:"md",children:[(0,w.jsx)(d.A,{children:"Filters"}),(0,w.jsx)(i.A,{children:(0,w.jsx)("div",{className:"table-responsive pb-4",children:(0,w.jsx)("table",{className:"table",children:(0,w.jsxs)("tbody",{children:[(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{style:{verticalAlign:"middle"},children:"From"}),(0,w.jsx)("td",{children:(0,w.jsx)("input",{type:"date",value:S.Fromdate,onChange:e=>y((0,o.A)((0,o.A)({},S),{},{Fromdate:e.target.value})),className:"cus-inpt"})}),(0,w.jsx)("td",{style:{verticalAlign:"middle"},children:"To"}),(0,w.jsx)("td",{children:(0,w.jsx)("input",{type:"date",value:S.Todate,onChange:e=>y((0,o.A)((0,o.A)({},S),{},{Todate:e.target.value})),className:"cus-inpt"})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{style:{verticalAlign:"middle"},children:"Items"}),(0,w.jsx)("td",{colSpan:3,children:(0,w.jsx)(p.Ay,{value:S.Items,onChange:e=>y(t=>(0,o.A)((0,o.A)({},t),{},{Items:e})),menuPortalTarget:document.body,options:L,isMulti:!0,styles:A.MR,isSearchable:!0,placeholder:"Select Items",maxMenuHeight:300})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{style:{verticalAlign:"middle"},children:"From Godown"}),(0,w.jsx)("td",{colSpan:3,children:(0,w.jsx)(p.Ay,{value:S.FromGodown,onChange:e=>y(t=>(0,o.A)((0,o.A)({},t),{},{FromGodown:e})),menuPortalTarget:document.body,options:P,styles:A.MR,isSearchable:!0,placeholder:"Select From Godown",maxMenuHeight:300})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{style:{verticalAlign:"middle"},children:"To Godown"}),(0,w.jsx)("td",{colSpan:3,children:(0,w.jsx)(p.Ay,{value:S.ToGodown,onChange:e=>{y(t=>(0,o.A)((0,o.A)({},t),{},{ToGodown:e}))},menuPortalTarget:document.body,options:G,styles:A.MR,isSearchable:!0,placeholder:"Select To Godown",maxMenuHeight:300})})]}),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{style:{verticalAlign:"middle"},children:"Trip Convertion"}),(0,w.jsx)("td",{colSpan:3,children:(0,w.jsxs)("select",{value:S.TripConvertion,onChange:e=>y(t=>(0,o.A)((0,o.A)({},t),{},{TripConvertion:e.target.value})),className:"cus-inpt p-2",children:[(0,w.jsx)("option",{value:"",children:"ALL"}),(0,w.jsx)("option",{value:"Converted",children:"Converted"}),(0,w.jsx)("option",{value:"Not Converted",children:"Not Converted"})]})})]})]})})})}),(0,w.jsxs)(r.A,{children:[(0,w.jsx)(n.A,{onClick:F,children:"close"}),(0,w.jsx)(n.A,{onClick:()=>{(e=>{const t=new URLSearchParams(e);C("?".concat(t.toString()),{replace:!0})})({Fromdate:null===S||void 0===S?void 0:S.Fromdate,Todate:null===S||void 0===S?void 0:S.Todate}),F()},startIcon:(0,w.jsx)(g.A,{}),variant:"outlined",children:"Search"})]})]})]})}},59383:(e,t,l)=>{l.d(t,{A:()=>n});var o=l(59662),a=l(70579);const n=(0,o.A)((0,a.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")},79484:(e,t,l)=>{l.d(t,{A:()=>n});var o=l(59662),a=l(70579);const n=(0,o.A)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},83560:(e,t,l)=>{l.d(t,{A:()=>n});var o=l(59662),a=l(70579);const n=(0,o.A)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=3991.7ec75a68.chunk.js.map