"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[2620],{16430(e,t,l){l.r(t),l.d(t,{default:()=>L});var i=l(89379),o=l(65043),n=l(12110),s=l(11906),d=l(26494),a=l(17392),r=l(83462),c=l(26600),m=l(35316),u=l(29347),v=l(91036),p=l(97707),h=l(33438),x=l(70141),g=l(44676),I=l(83560),y=l(51387),_=l(65074),f=l(48471),j=l(14844),b=l(73216),A=l(97280),w=l(63406),S=l(7204),N=l(70579);const C=e=>{let{StaffArray:t=[],setStaffArray:l,costCenter:o=[],costCategory:n=[]}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"d-flex align-items-center flex-wrap mb-2 border-bottom pb-2",children:[(0,N.jsx)("h6",{className:"flex-grow-1 m-0",children:"Staff Involved"}),(0,N.jsx)(s.A,{variant:"outlined",color:"primary",type:"button",onClick:()=>l(e=>[...e,(0,i.A)({},A.Ud)]),children:"Add"})]}),(0,N.jsxs)("table",{className:"table table-bordered",children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"fa-13",children:"Sno"}),(0,N.jsx)("th",{className:"fa-13",children:"Staff Name"}),(0,N.jsx)("th",{className:"fa-13",children:"Category"}),(0,N.jsx)("th",{className:"fa-13",children:"#"})]})}),(0,N.jsx)("tbody",{children:(0,p.$r)(t).map((e,s)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"fa-13 vctr text-center",children:s+1}),(0,N.jsx)("td",{className:"fa-13 w-100 p-0",children:(0,N.jsx)(S.Ay,{value:{value:null===e||void 0===e?void 0:e.Emp_Id,label:null===e||void 0===e?void 0:e.Emp_Name},onChange:e=>l(t=>t.map((t,l)=>{if((0,p.id)(l,s)){const l=(0,p.$r)(o).find(t=>(0,p.id)(null===t||void 0===t?void 0:t.Cost_Center_Id,e.value));return(0,i.A)((0,i.A)({},t),{},{Emp_Type_Id:(0,p.IQ)(null===t||void 0===t?void 0:t.Emp_Type_Id)?Number(null===t||void 0===t?void 0:t.Emp_Type_Id):(0,p.IQ)(l.User_Type)?Number(l.User_Type):0,Emp_Id:Number(e.value),Emp_Name:e.label})}return t})),options:[...(0,p.$r)(o).filter(e=>!t.some(t=>(0,p.id)(t.Emp_Id,e.Cost_Center_Id)))].map(e=>({value:e.Cost_Center_Id,label:e.Cost_Center_Name})),styles:w.MR,isSearchable:!0,placeholder:"Select Staff",filterOption:p.GI})}),(0,N.jsx)("td",{className:"fa-13 vctr p-0",style:{maxWidth:"130px",minWidth:"100px"},children:(0,N.jsxs)("select",{value:null===e||void 0===e?void 0:e.Emp_Type_Id,onChange:e=>l(t=>t.map((t,l)=>(0,p.id)(l,s)?(0,i.A)((0,i.A)({},t),{},{Emp_Type_Id:e.target.value}):t)),className:"cus-inpt p-2 border-0",children:[(0,N.jsx)("option",{value:"",children:"Select"}),(0,p.$r)(n).map((e,t)=>(0,N.jsx)("option",{value:null===e||void 0===e?void 0:e.Cost_Category_Id,children:null===e||void 0===e?void 0:e.Cost_Category},t))]})}),(0,N.jsx)("td",{className:"fa-13 vctr p-0",children:(0,N.jsx)(a.A,{onClick:()=>{l(e=>e.filter((e,t)=>s!==t))},size:"small",children:(0,N.jsx)(y.A,{color:"error"})})})]},s))})]})]})};var G=l(38641),D=l(24651),P=l(34104),O=l(35786),B=l(34496),T=l(14792);const R=(e,t,l)=>{var i;const o=null===(i=(0,p.$r)(l).find(l=>(0,p.id)(null===l||void 0===l?void 0:l.Product_Id,e)&&(0,p.id)(null===l||void 0===l?void 0:l.Godown_Id,t)))||void 0===i?void 0:i.Act_Bal_Qty;return(0,p.Ro)(o)},z=e=>{var t,l;let{children:n,orderProducts:d=[],setOrderProducts:a,open:h=!1,onClose:x,products:g=[],brands:I=[],uom:y=[],godowns:f=[],GST_Inclusive:b,IS_IGST:A,editValues:C=null,initialValue:G={},batchDetails:D=[]}=e;const[P,O]=(0,o.useState)(G),z=(0,p.id)(b,1),Q=(0,p.id)(b,2),[E,L]=(0,o.useState)([]);(0,o.useEffect)(()=>{(0,p.aF)(C)&&h&&O(e=>Object.fromEntries(Object.entries(e).map(e=>{let[t,l]=e;return[t,C[t]?C[t]:l]})))},[C]);const k=e=>{var t;return null!==(t=null===g||void 0===g?void 0:g.find(t=>(0,p.id)(null===t||void 0===t?void 0:t.Product_Id,e)))&&void 0!==t?t:{}},W=()=>{O(G),x()};return(0,o.useEffect)(()=>{L([]),(0,p.IQ)(P.Item_Id)&&!(0,p.id)(P.Item_Id,0)&&(0,_.z)({address:"sales/stockInGodown?Item_Id=".concat(P.Item_Id)}).then(e=>{const t=(e.success?e.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.stock_item_name).localeCompare(null===t||void 0===t?void 0:t.stock_item_name));L(t)})},[P.Item_Id]),(0,N.jsxs)(N.Fragment,{children:[n,(0,N.jsxs)(r.A,{open:h,onClose:W,maxWidth:"md",fullWidth:!0,children:[(0,N.jsx)(c.A,{className:"border-bottom",children:(0,N.jsx)("span",{children:"Add Products Details"})}),(0,N.jsxs)("form",{onSubmit:e=>{e.preventDefault(),P.Item_Id?(a(e=>[...e.filter(e=>!(0,p.id)(e.Item_Id,P.Item_Id)),Object.fromEntries(Object.entries(G).map(e=>{let[t,l]=e;const i=k(P.Item_Id),o=A?i.Igst_P:i.Gst_P,n=o>0,{Bill_Qty:s,Item_Rate:d,Amount:a}=P,r=Q?"zerotax":z?"remove":"add",c=(0,j.v)(d,o,r),m=(0,j.v)(a,o,r),u=A?0:m.cgst_per,v=A?m.igst_per:0,p=A?0:m.cgst_amount,h=A?m.igst_amount:0;switch(t){case"Item_Name":return[t,i.Product_Name];case"Taxable_Rate":return[t,c.base_amount];case"Total_Qty":return[t,s];case"Taxble":return[t,n?1:0];case"Taxable_Amount":return[t,m.base_amount];case"Tax_Rate":return[t,o];case"Cgst":case"Sgst":return[t,null!==u&&void 0!==u?u:0];case"Cgst_Amo":case"Sgst_Amo":return[t,Q?0:p];case"Igst":return[t,null!==v&&void 0!==v?v:0];case"Igst_Amo":return[t,Q?0:h];case"Final_Amo":return[t,m.with_tax];default:return[t,P[t]||l]}}))]),W()):v.oR.warn("Select Product")},children:[(0,N.jsx)(m.A,{children:(0,N.jsxs)("div",{className:"row pb-5",children:[(0,N.jsxs)("div",{className:"col-6 p-2",children:[(0,N.jsx)("label",{children:"Brand"}),(0,N.jsx)(S.Ay,{value:{value:P.BrandID,label:P.Brand},onChange:e=>O(t=>(0,i.A)((0,i.A)({},t),{},{BrandID:e.value,Brand:e.label})),options:[{value:"",label:"select",isDisabled:!0},...I.map(e=>({value:null===e||void 0===e?void 0:e.Brand,label:null===e||void 0===e?void 0:e.Brand_Name}))],styles:w.MR,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Brand",maxMenuHeight:200,filterOption:p.GI})]}),(0,N.jsxs)("div",{className:"col-6 p-2",children:[(0,N.jsx)("label",{children:"Group"}),(0,N.jsx)(S.Ay,{value:{value:P.GroupID,label:P.Group},onChange:e=>O(t=>(0,i.A)((0,i.A)({},t),{},{GroupID:e.value,Group:e.label})),options:[{value:"",label:"select",isDisabled:!0},...g.filter(e=>!P.BrandID||(0,p.id)(e.Brand,P.BrandID)).reduce((e,t)=>(e.some(e=>e.value===t.Product_Group)||e.push({value:t.Product_Group,label:t.Pro_Group}),e),[])],styles:w.MR,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Group",maxMenuHeight:200,filterOption:p.GI})]}),(0,N.jsxs)("div",{className:Object.hasOwn(P,"GoDown_Id")?"col-md-8 p-2":"col-12 p-2",children:[(0,N.jsxs)("label",{children:["Item Name ",(0,N.jsx)(T.A,{})]}),(0,N.jsx)(S.Ay,{value:{value:P.Item_Id,label:null===(t=k(P.Item_Id))||void 0===t?void 0:t.Product_Name},isDisabled:(0,p.IQ)(P.Pre_Id),menuPortalTarget:document.body,onChange:e=>{const t=k(e.value);O(l=>{var o,n,s,d,a,r,c;return(0,i.A)((0,i.A)({},l),{},{Group:null!==(o=t.Pro_Group)&&void 0!==o?o:l.Group,GroupID:null!==(n=t.Product_Group)&&void 0!==n?n:l.GroupID,Brand:null!==(s=t.Brand_Name)&&void 0!==s?s:l.Brand,BrandID:null!==(d=t.Brand)&&void 0!==d?d:l.BrandID,Item_Id:e.value,Item_Rate:null!==(a=t.Item_Rate)&&void 0!==a?a:0,GoDown_Id:"",Bill_Qty:0,Amount:0,Unit_Id:null!==(r=t.UOM_Id)&&void 0!==r?r:l.Unit_Id,Unit_Name:null!==(c=t.Units)&&void 0!==c?c:l.Unit_Name,HSN_Code:null===t||void 0===t?void 0:t.HSN_Code})})},options:[{value:"",label:"select",isDisabled:!0},...[...g.filter(e=>!P.BrandID||(0,p.id)(e.Brand,P.BrandID)).filter(e=>!P.GroupID||(0,p.id)(e.Product_Group,P.GroupID))].map(e=>({value:null===e||void 0===e?void 0:e.Product_Id,label:null===e||void 0===e?void 0:e.Product_Name,isDisabled:-1!==d.findIndex(t=>(0,p.id)(null===t||void 0===t?void 0:t.Item_Id,null===e||void 0===e?void 0:e.Product_Id))}))],styles:w.MR,isSearchable:!0,required:!0,placeholder:"Select Product",maxMenuHeight:200,filterOption:p.GI})]}),Object.hasOwn(P,"GoDown_Id")&&(0,N.jsxs)("div",{className:"col-md-4 p-2",children:[(0,N.jsx)("label",{children:"Godown"}),(0,N.jsx)(S.Ay,{value:{value:null===P||void 0===P?void 0:P.GoDown_Id,label:(null===(l=f.find(e=>(0,p.id)(e.Godown_Id,null===P||void 0===P?void 0:P.GoDown_Id)))||void 0===l?void 0:l.Godown_Name)||""},onChange:e=>O(t=>(0,i.A)((0,i.A)({},t),{},{GoDown_Id:e.value})),options:[{value:"",label:"select",isDisabled:!0},...(0,p.$r)(f).map(e=>({value:null===e||void 0===e?void 0:e.Godown_Id,label:"".concat(null===e||void 0===e?void 0:e.Godown_Name).concat((0,p.IQ)(null===e||void 0===e?void 0:e.Godown_Id)?" (Bal: ".concat(R(P.Item_Id,null===e||void 0===e?void 0:e.Godown_Id,E),")"):"")}))],styles:w.MR,isDisabled:!(0,p.IQ)(null===P||void 0===P?void 0:P.Item_Id),menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Godown",filterOption:p.GI})]}),(0,N.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,N.jsxs)("label",{children:["Quantity ",(0,N.jsx)(T.A,{})]}),(0,N.jsx)("input",{required:!0,value:P.Bill_Qty?P.Bill_Qty:"",onInput:p.BE,disabled:!(0,p.IQ)(P.Item_Id),onChange:e=>{P.Item_Rate?O(t=>(0,i.A)((0,i.A)({},t),{},{Amount:(0,p.JH)(P.Item_Rate,e.target.value),Bill_Qty:e.target.value})):P.Amount?O(t=>(0,i.A)((0,i.A)({},t),{},{Item_Rate:(0,p.SX)(t.Amount,e.target.value),Bill_Qty:e.target.value})):O(t=>(0,i.A)((0,i.A)({},t),{},{Bill_Qty:e.target.value}))},className:"cus-inpt",min:1})]}),Object.hasOwn(P,"Act_Qty")&&(0,N.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,N.jsx)("label",{children:"Actual Quantity "}),(0,N.jsx)("input",{value:P.Act_Qty?P.Act_Qty:"",onInput:p.BE,disabled:!(0,p.IQ)(P.Item_Id),onChange:e=>O(t=>(0,i.A)((0,i.A)({},t),{},{Act_Qty:e.target.value})),required:!0,className:"cus-inpt"})]}),(0,N.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,N.jsx)("label",{children:"Rate "}),(0,N.jsx)("input",{value:P.Item_Rate?P.Item_Rate:"",onInput:p.BE,disabled:!(0,p.IQ)(P.Item_Id),onChange:e=>O(t=>(0,i.A)((0,i.A)({},t),{},{Item_Rate:e.target.value,Amount:t.Bill_Qty?(0,p.JH)(e.target.value,t.Bill_Qty):t.Amount})),required:!0,className:"cus-inpt"})]}),(0,N.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,N.jsx)("label",{children:"UOM"}),(0,N.jsxs)("select",{value:Object.hasOwn(P,"UOM")?P.UOM:Object.hasOwn(P,"Unit_Id")?P.Unit_Id:"",onChange:e=>{const t=e.target.selectedIndex,l=e.target.options[t].text,o=e.target.value;O(e=>(0,i.A)((0,i.A)({},e),{},{UOM:o,Unit_Id:o,Units:l,Unit_Name:l}))},className:"cus-inpt",disabled:!(0,p.IQ)(P.Item_Id),children:[(0,N.jsx)("option",{value:"",disabled:!0,children:"select"}),y.map((e,t)=>(0,N.jsx)("option",{value:e.Unit_Id,children:e.Units},t))]})]}),(0,N.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,N.jsx)("label",{children:"Amount"}),(0,N.jsx)("input",{required:!0,value:P.Amount?P.Amount:"",onInput:p.BE,disabled:!(0,p.IQ)(P.Item_Id),onChange:e=>O(t=>(0,i.A)((0,i.A)({},t),{},{Amount:e.target.value,Item_Rate:t.Bill_Qty?(0,p.SX)(e.target.value,t.Bill_Qty):t.Item_Rate})),className:"cus-inpt",min:1})]}),(0,N.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,N.jsx)("label",{children:"Batch"}),(0,N.jsx)(S.Ay,{value:{value:(null===P||void 0===P?void 0:P.Batch_Name)||"",label:(null===P||void 0===P?void 0:P.Batch_Name)||""},onChange:e=>O(t=>(0,i.A)((0,i.A)({},t),{},{Batch_Name:e.value})),options:D.filter(e=>(0,p.id)(e.item_id,null===P||void 0===P?void 0:P.Item_Id)&&(0,p.id)(null===e||void 0===e?void 0:e.godown_id,null===P||void 0===P?void 0:P.GoDown_Id)&&(0,p.Ro)(e.pendingQuantity)>=(0,p.Ro)(null===P||void 0===P?void 0:P.Bill_Qty)).map(e=>({value:e.batch,label:e.batch})),styles:w.MR,isSearchable:!0,placeholder:"Select Batch",menuPortalTarget:document.body,isDisabled:!(0,p.IQ)(null===P||void 0===P?void 0:P.Item_Id)||!(0,p.IQ)(null===P||void 0===P?void 0:P.GoDown_Id)||(0,p.id)(null===P||void 0===P?void 0:P.Bill_Qty,0)})]})]})}),(0,N.jsxs)(u.A,{className:"d-flex justify-content-between align-items-center",children:[(0,N.jsx)(s.A,{onClick:()=>O(G),type:"button",startIcon:(0,N.jsx)(B.A,{}),children:"Clear"}),(0,N.jsxs)("span",{children:[(0,N.jsx)(s.A,{type:"button",onClick:W,children:"cancel"}),(0,N.jsx)(s.A,{type:"submit",variant:"outlined",children:"Add"})]})]})]})]})]})};var Q=l(90001);const E=(0,p.aN)().user,L=e=>{let{loadingOn:t,loadingOff:l}=e;const w=(0,b.Zp)(),S=(0,b.zy)().state,[B,T]=(0,o.useState)({products:[],branch:[],retailers:[],voucherType:[],uom:[],staff:[],staffType:[],brand:[],godown:[],expence:[],stockInGodown:[],stockItemLedgerName:[],batchDetails:[]}),[R,L]=(0,o.useState)({addProductDialog:!1,importFromSaleOrder:!1}),[k,W]=(0,o.useState)(A.Q4),[M,H]=(0,o.useState)(A.zA),[U,F]=(0,o.useState)([]),[V,$]=(0,o.useState)([]),[q,J]=(0,o.useState)([]),[Z,X]=(0,o.useState)(null),K=(0,p.id)(k.GST_Inclusive,1),Y=(0,p.id)(k.GST_Inclusive,2),ee=(0,p.id)(k.IS_IGST,1),te=Y?"zerotax":K?"remove":"add",le=3-U.length,[ie,oe]=(0,o.useState)({open:!1,Do_Id:null});(0,o.useEffect)(()=>{(async()=>{try{t&&t();const[e,l,o,n,s,d,a,r,c,m,u]=await Promise.all([(0,_.z)({address:"masters/branch/dropDown"}),(0,_.z)({address:"masters/products"}),(0,_.z)({address:"masters/retailers/dropDown?Company_Id=".concat(null===E||void 0===E?void 0:E.Company_id)}),(0,_.z)({address:"masters/voucher?module=SALES"}),(0,_.z)({address:"masters/uom"}),(0,_.z)({address:"dataEntry/costCenter"}),(0,_.z)({address:"dataEntry/costCenter/category"}),(0,_.z)({address:"dataEntry/godownLocationMaster"}),(0,_.z)({address:"masters/defaultAccountMaster"}),(0,_.z)({address:"purchase/stockItemLedgerName?type=SALES"}),(0,_.z)({address:"inventory/batchMaster/stockBalance"})]),v=(e.success?e.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.BranchName).localeCompare(null===t||void 0===t?void 0:t.BranchName)),h=(l.success?l.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Product_Name).localeCompare(null===t||void 0===t?void 0:t.Product_Name)),x=(o.success?o.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Retailer_Name).localeCompare(null===t||void 0===t?void 0:t.Retailer_Name)),g=(n.success?n.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Voucher_Type).localeCompare(null===t||void 0===t?void 0:t.Voucher_Type)),I=(s.success?s.data:[]).sort((e,t)=>String(e.Units).localeCompare(t.Units)),y=(d.success?d.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Cost_Center_Name).localeCompare(null===t||void 0===t?void 0:t.Cost_Center_Name)),f=(a.success?a.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Cost_Category).localeCompare(null===t||void 0===t?void 0:t.Cost_Category)),j=(r.success?r.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Godown_Name).localeCompare(null===t||void 0===t?void 0:t.Godown_Name)),b=(c.success?(0,p.$r)(c.data):[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Account_Name).localeCompare(null===t||void 0===t?void 0:t.Account_Name)),A=(m.success?m.data:[]).sort((e,t)=>String(null===e||void 0===e?void 0:e.Stock_Item_Ledger_Name).localeCompare(null===t||void 0===t?void 0:t.Stock_Item_Ledger_Name));T(e=>(0,i.A)((0,i.A)({},e),{},{products:h,branch:v,retailers:x,voucherType:g,uom:I,staff:y,staffType:f,godown:j,brand:(0,p.Mn)(h,"Brand",["Brand_Name"]),expence:b.filter(e=>!(0,p.xL)(e.Type,"DEFAULT")).map(e=>({Id:e.Acc_Id,Expence_Name:e.Account_Name})),stockItemLedgerName:A,batchDetails:(0,p.$r)(u.data)}))}catch(e){console.error("Error fetching data:",e)}finally{l&&l()}})()},[null===E||void 0===E?void 0:E.Company_id]);const ne=()=>{W(A.Q4),F([]),$([]),J([])};(0,o.useEffect)(()=>{F(e=>[...e].map(e=>Object.fromEntries(Object.entries(e).map(t=>{let[l,i]=t;const o=function(){var e;let t=arguments.length>1?arguments[1]:void 0;return null!==(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(e=>(0,p.id)(e.Product_Id,t)))&&void 0!==e?e:{}}(B.products,null===e||void 0===e?void 0:e.Item_Id),n=ee?o.Igst_P:o.Gst_P,s=n>0,{Bill_Qty:d,Item_Rate:a,Amount:r}=e,c=(0,j.v)(a,n,te),m=(0,j.v)(r,n,te),u=ee?0:m.cgst_per,v=ee?m.igst_per:0,h=ee?0:m.cgst_amount,x=ee?m.igst_amount:0;switch(l){case"Taxable_Rate":return[l,c.base_amount];case"Total_Qty":return[l,d];case"Taxble":return[l,s?1:0];case"Taxable_Amount":return[l,m.base_amount];case"Tax_Rate":return[l,n];case"Cgst":case"Sgst":return[l,null!==u&&void 0!==u?u:0];case"Cgst_Amo":case"Sgst_Amo":return[l,Y?0:h];case"Igst":return[l,null!==v&&void 0!==v?v:0];case"Igst_Amo":return[l,Y?0:x];case"Final_Amo":return[l,m.with_tax];default:return[l,e[l]||i]}}))))},[B.products,ee,te]),(0,o.useEffect)(()=>{$(e=>[...e].map(e=>{const t=ee?(0,p.Ro)(null===e||void 0===e?void 0:e.Igst):0,l=ee?0:(0,p.Ro)(null===e||void 0===e?void 0:e.Cgst),o=ee?0:(0,p.Ro)(null===e||void 0===e?void 0:e.Sgst),n=(0,p.Ro)(null===e||void 0===e?void 0:e.Expence_Value),s=ee?t:(0,p.Lr)(l,o),d=(0,j.v)(n,s,te);return(0,i.A)((0,i.A)({},e),{},{Cgst:l,Sgst:o,Igst:t,Expence_Value:n,Cgst_Amo:l>0?d.cgst_amount:0,Sgst_Amo:o>0?d.sgst_amount:0,Igst_Amo:t>0?d.igst_amount:0})}))},[B.expence,ee,te]),(0,o.useEffect)(()=>{if((0,p.aF)(S)&&Array.isArray(null===S||void 0===S?void 0:S.Products_List)){const{Products_List:e,Expence_Array:t,Staffs_Array:l}=S;W(Object.fromEntries(Object.entries(A.Q4).map(e=>{var t;let[l,i]=e;return"Do_Date"===l?[l,S[l]?(0,p.ny)(S[l]):i]:[l,null!==(t=S[l])&&void 0!==t?t:i]}))),F(e.map(e=>Object.fromEntries(Object.entries(A.a4).map(t=>{var l;let[i,o]=t;return[i,null!==(l=e[i])&&void 0!==l?l:o]})))),$((0,p.$r)(t).map(e=>Object.fromEntries(Object.entries(A.ju).map(t=>{var l;let[i,o]=t;return[i,null!==(l=e[i])&&void 0!==l?l:o]})))),J((0,p.$r)(l).map(e=>Object.fromEntries(Object.entries(A.Ud).map(t=>{var l;let[i,o]=t;return[i,null!==(l=e[i])&&void 0!==l?l:o]}))))}},[S]),(0,o.useEffect)(()=>{if((0,p.IQ)(null===S||void 0===S?void 0:S.Retailer_Id)&&!(0,p.id)(null===S||void 0===S?void 0:S.Retailer_Id,0)){var e;const t=B.retailers.find(e=>(0,p.id)(e.Retailer_Id,null===S||void 0===S?void 0:S.Retailer_Id))||{},l=null!==(e=(0,p.$r)(null===t||void 0===t?void 0:t.deliveryAddresses).find(e=>(0,p.id)(null===e||void 0===e?void 0:e.id,null===S||void 0===S?void 0:S.deliveryAddressId)))&&void 0!==e?e:null;l&&H({deliveryName:null===l||void 0===l?void 0:l.deliveryName,phoneNumber:null===l||void 0===l?void 0:l.phoneNumber,cityName:null===l||void 0===l?void 0:l.cityName,deliveryAddress:null===l||void 0===l?void 0:l.deliveryAddress,id:l.id})}},[S,B.retailers]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(z,{orderProducts:U,setOrderProducts:F,open:R.addProductDialog,onClose:()=>{L(e=>(0,i.A)((0,i.A)({},e),{},{addProductDialog:!1})),X(null)},products:B.products,brands:B.brand,uom:B.uom,godowns:B.godown,GST_Inclusive:k.GST_Inclusive,IS_IGST:ee,editValues:Z,initialValue:(0,i.A)((0,i.A)({},A.a4),{},{Pre_Id:k.So_No}),batchDetails:B.batchDetails}),(0,N.jsxs)(n.A,{children:[(0,N.jsxs)("div",{className:"d-flex flex-wrap align-items-center border-bottom py-2 px-3",children:[(0,N.jsx)("span",{className:"flex-grow-1 fa-16 fw-bold",children:"Sales Invoice"}),(0,N.jsxs)("span",{children:[(0,N.jsx)(s.A,{type:"button",onClick:()=>{window.history.length>1?w(-1):w("/erp/sales/invoice")},children:"Cancel"}),(0,N.jsx)(s.A,{onClick:()=>(t&&t(),void(0,_.z)({address:"sales/salesInvoice",method:(0,p.IQ)(null===k||void 0===k?void 0:k.Do_Id)?"PUT":"POST",bodyData:(0,i.A)((0,i.A)({},k),{},{delivery_id:null===M||void 0===M?void 0:M.id,deliveryName:null===M||void 0===M?void 0:M.deliveryName,phoneNumber:null===M||void 0===M?void 0:M.phoneNumber,cityName:null===M||void 0===M?void 0:M.cityName,deliveryAddress:null===M||void 0===M?void 0:M.deliveryAddress,Product_Array:U,Staffs_Array:q,Expence_Array:V})}).then(e=>{if(e.success){var t;const l=null===(t=e.others)||void 0===t?void 0:t.Do_Id;v.oR.success(e.message),oe({open:!0,Do_Id:l})}else v.oR.warn(e.message)}).catch(e=>{console.error(e),v.oR.error("Failed to save invoice")}).finally(()=>{l&&l()})),variant:"contained",children:"submit"})]})]}),(0,N.jsxs)(d.A,{children:[(0,N.jsxs)("div",{className:"row p-0",children:[(0,N.jsx)("div",{className:"col-xxl-3 col-lg-4 col-md-5 p-2",children:(0,N.jsx)("div",{className:"border p-2",style:{minHeight:"30vh",height:"100%"},children:(0,N.jsx)(C,{StaffArray:q,setStaffArray:J,costCenter:B.staff,costCategory:B.staffType})})}),(0,N.jsx)("div",{className:"col-xxl-9 col-lg-8 col-md-7 py-2 px-0",children:(0,N.jsx)("div",{className:"border px-3 py-1",style:{minHeight:"30vh",height:"100%"},children:(0,N.jsx)(G.A,{invoiceInfo:k,setInvoiceInfo:W,retailers:B.retailers,branches:B.branch,voucherType:B.voucherType,stockItemLedgerName:B.stockItemLedgerName,onChangeRetailer:()=>{F([]),$([])},retailerDeliveryAddress:M,setRetailerDeliveryAddress:H})})})]}),(0,N.jsx)(f.Ay,{title:"Items",headerFontSizePx:13,bodyFontSizePx:13,EnableSerialNumber:!0,disablePagination:!0,ButtonArea:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(s.A,{onClick:()=>{X(null),L(e=>(0,i.A)((0,i.A)({},e),{},{addProductDialog:!0}))},sx:{ml:1},variant:"outlined",type:"button",startIcon:(0,N.jsx)(x.A,{}),disabled:!(0,p.IQ)(k.Retailer_Id)||U.length>0&&(0,p.IQ)(k.So_No),children:"Add Product"}),(0,N.jsx)(P.A,{loadingOn:t,loadingOff:l,open:R.importFromSaleOrder,onClose:()=>L(e=>(0,i.A)((0,i.A)({},e),{},{importFromSaleOrder:!1})),retailer:null===k||void 0===k?void 0:k.Retailer_Id,selectedItems:U,setSelectedItems:F,staffArray:q,setStaffArray:J,products:B.products,GST_Inclusive:k.GST_Inclusive,IS_IGST:ee,invoiceInfo:k,setInvoiceInfo:W,godowns:B.godown,stockInGodown:B.stockInGodown,children:(0,N.jsx)(s.A,{onClick:()=>L(e=>(0,i.A)((0,i.A)({},e),{},{importFromSaleOrder:!0})),disabled:!(0,p.IQ)(k.Retailer_Id)||U.length>0&&!(0,p.IQ)(k.So_No),sx:{ml:1},type:"button",variant:"outlined",startIcon:(0,N.jsx)(g.A,{}),children:"Choose Sale Order"})})]}),dataArray:[...U,...Array.from({length:le>0?le:0}).map(e=>A.a4)],columns:[(0,f.Lj)("Item_Name","string"),(0,f.Lj)("Batch_Name","string"),(0,f.Lj)("Bill_Qty","number"),(0,f.Lj)("Act_Qty","number"),(0,f.Lj)("Item_Rate","number"),{isVisible:1,ColumnHeader:"Tax",isCustomCell:!0,Cell:e=>{let{row:t}=e;const{Cgst:l=0,Sgst:i=0,Igst:o=0,Cgst_Amo:n=0,Sgst_Amo:s=0,Igst_Amo:d=0}=t,a=ee?o:(0,p.Lr)(l,i),r=ee?d:(0,p.Lr)(n,s);return(0,p.IQ)(null===t||void 0===t?void 0:t.Item_Id)?"".concat(r," - (").concat(a," %)"):""}},{isVisible:1,ColumnHeader:"Godown",isCustomCell:!0,Cell:e=>{var t,l;let{row:i}=e;return null!==(t=null===(l=B.godown.find(e=>(0,p.id)(e.Godown_Id,null===i||void 0===i?void 0:i.GoDown_Id)))||void 0===l?void 0:l.Godown_Name)&&void 0!==t?t:""}},(0,f.Lj)("Amount","number"),{isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(a.A,{onClick:()=>{X(t),L(e=>(0,i.A)((0,i.A)({},e),{},{addProductDialog:!0}))},size:"small",type:"button",disabled:!(0,p.IQ)(null===t||void 0===t?void 0:t.Item_Id),children:(0,N.jsx)(I.A,{})}),(0,N.jsx)(a.A,{size:"small",type:"button",onClick:()=>F(e=>e.filter(e=>!(0,p.id)(e.Item_Id,t.Item_Id))),color:"error",disabled:!(0,p.IQ)(null===t||void 0===t?void 0:t.Item_Id),children:(0,N.jsx)(y.A,{})})]})},ColumnHeader:"Action",isVisible:1}]}),(0,N.jsxs)(r.A,{open:ie.open,maxWidth:"lg",fullWidth:!0,scroll:"paper",children:[(0,N.jsxs)(c.A,{children:["Print Invoice #",ie.Do_Id,(0,N.jsx)(a.A,{onClick:()=>{oe({open:!1,Do_Id:null}),ne(),w("/erp/sales/invoice")},style:{position:"absolute",right:8,top:8},children:(0,N.jsx)(h.A,{})})]}),(0,N.jsx)(m.A,{children:ie.Do_Id&&(0,N.jsx)(Q.A,{Do_Id:ie.Do_Id,loadingOn:t,loadingOff:l})}),(0,N.jsx)(u.A,{children:(0,N.jsx)(s.A,{onClick:()=>{oe({open:!1,Do_Id:null}),ne(),w("/erp/sales/invoice")},children:"Close and Go to Listing"})})]}),(0,N.jsx)("br",{}),(0,N.jsx)(O.A,{invoiceExpences:V,setInvoiceExpences:$,expenceMaster:B.expence,IS_IGST:ee,taxType:te}),(0,N.jsx)("br",{}),(0,N.jsx)(D.A,{invoiceProducts:U,invoiceExpences:V,isNotTaxableBill:Y,isInclusive:K,IS_IGST:ee,products:B.products,invoiceInfo:k,setInvoiceInfo:W})]})]})]})}},30513(e,t,l){l.d(t,{A:()=>n});var i=l(59662),o=l(70579);const n=(0,i.A)((0,o.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}),"Print")},44676(e,t,l){l.d(t,{A:()=>n});var i=l(59662),o=l(70579);const n=(0,i.A)([(0,o.jsx)("path",{d:"M19.5 3.5 18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2v14H3v3c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V2zM19 19c0 .55-.45 1-1 1s-1-.45-1-1v-3H8V5h11z"},"0"),(0,o.jsx)("path",{d:"M9 7h6v2H9zm7 0h2v2h-2zm-7 3h6v2H9zm7 0h2v2h-2z"},"1")],"ReceiptLong")},90001(e,t,l){l.d(t,{A:()=>v});var i=l(65043),o=l(97707),n=l(65074),s=l(93141),d=l(11906),a=l(30513),r=l(73216);const c=l.p+"static/media/plain.431247e336efa50eee27.jpeg";var m=l(70579);const u=e=>{let{data:t,companyInfo:l,isPreview:i}=e;const n=(0,o.$r)(null===t||void 0===t?void 0:t.productDetails),s=(0,o.$r)(null===t||void 0===t?void 0:t.expencessDetails).filter(e=>{var t;return!(null!==(t=e.expenseName)&&void 0!==t&&t.toLowerCase().includes("round off"))}),d=(0,o.$r)(null===t||void 0===t?void 0:t.staffDetails).find(e=>"Broker"===e.empType),a=(0,o.$r)(null===t||void 0===t?void 0:t.staffDetails).find(e=>"Transport"===e.empType),r=n.reduce((e,t)=>e+Number(t.amount||0),0)+s.reduce((e,t)=>e+Number(t.expenseValue||0),0)+Number((null===t||void 0===t?void 0:t.roundOffValue)||0),u=(e=>{const t=new Map;return e.forEach(e=>{const l=(null===e||void 0===e?void 0:e.hsnCode)||"",i=Number(null===e||void 0===e?void 0:e.amount)||0;t.set(l,(t.get(l)||0)+i)}),Array.from(t.entries()).map(e=>{let[t,l]=e;return{hsn:t,amount:l}})})(n);return(0,m.jsxs)("div",{style:{width:"21cm",height:"14.8cm",position:"relative",margin:i?"0 auto":"0",boxSizing:"border-box"},children:[(0,m.jsx)("img",{src:c,alt:"A5 Invoice Layout",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0}}),(0,m.jsxs)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1,boxSizing:"border-box"},children:[(0,m.jsxs)("div",{style:{position:"absolute",top:"0.4cm",width:"100%",display:"flex"},children:[(0,m.jsxs)("div",{style:{position:"relative",width:"60%"},children:[(0,m.jsx)("div",{style:{position:"absolute",left:"0cm",width:"9cm",padding:"0px"},children:(0,m.jsx)("div",{style:{position:"absolute",left:"5.3cm",fontWeight:"bold",top:"0.2cm",fontSize:"25px",width:"7cm",padding:"3px",color:"#000"},children:null===l||void 0===l?void 0:l.Company_Name})}),(0,m.jsxs)("div",{style:{position:"absolute",left:"4.2cm",fontSize:"15px",width:"10cm",marginTop:"1cm",color:"#000"},children:[(0,m.jsx)("p",{children:"H.O: 153, Chitrakara Street, Madurai -01"}),(0,m.jsxs)("div",{style:{position:"absolute",fontSize:"14px",width:"10cm",bottom:"0cm",left:"10px",top:"0.0cm",padding:"0px",color:"#000"},children:[(0,m.jsx)("br",{}),(0,m.jsx)("p",{children:"G.O:746 Puliyur, Sayanapuram, Svga"})]}),(0,m.jsxs)("div",{style:{position:"absolute",fontSize:"14px",width:"10cm",bottom:"0cm",top:"15px",right:"20px",padding:"0px",color:"#000"},children:[(0,m.jsx)("br",{}),(0,m.jsx)("p",{children:"Bill of Supply- Disclaimer Affidavit Filed -Exempted"})]})]})]}),(0,m.jsxs)("div",{style:{position:"relative",width:"40%",fontSize:"13px",color:"#000",paddingRight:"1cm",textAlign:"right",top:"15px"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"GSTIN :"})," 33AADFS4987M1ZL"]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Phone :"})," 0452 - 4371625"]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{})," 9786131353"]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"FSSAI No"})," 12418012000176"]})]})]}),(0,m.jsxs)("div",{style:{position:"absolute",top:"2.7cm",width:"100%"},children:[(0,m.jsx)("p",{style:{position:"absolute",left:"1.0cm",fontSize:"13px",top:"0.0cm",width:"9cm",padding:"2.5px"}}),(0,m.jsxs)("div",{style:{position:"absolute",left:"3.25cm",fontSize:"13px",top:"0.3cm",width:"9cm",padding:"2.5px"},children:[(0,m.jsxs)("div",{style:{color:"#000"},children:[t.mailingName,",",t.Party_Location]}),(0,m.jsx)("div",{style:{color:"#000"},children:t.mailingAddress}),(0,m.jsx)("div",{style:{color:"#000"},children:t.mailingNumber}),(0,m.jsxs)("div",{style:{color:"#000"},children:["GSTIN: ",t.retailerGstNumber]})]}),(0,m.jsxs)("div",{style:{position:"absolute",left:"12cm",width:"8cm",fontSize:"12px",padding:"0px",top:"0.3cm"},children:[(0,m.jsxs)("div",{style:{height:"0.7cm",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,m.jsx)("span",{style:{fontWeight:"bold",color:"#000"}}),(0,m.jsx)("span",{style:{color:"#000",marginLeft:"30px"},children:t.createdOn&&new Date(t.createdOn).toLocaleDateString("en-GB")})]}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,m.jsx)("span",{style:{fontWeight:"bold",color:"#000",marginLeft:"50px"}}),(0,m.jsx)("b",{style:{color:"#000",marginLeft:"50px"},children:t.voucherTypeGet})]})]}),(0,m.jsxs)("div",{style:{height:"0.7cm",display:"flex",alignItems:"center",gap:"5px"},children:[(0,m.jsx)("span",{style:{fontWeight:"bold",color:"#000"}}),(0,m.jsx)("b",{style:{color:"#000",marginLeft:"50px"},children:t.voucherNumber})]}),(0,m.jsxs)("div",{style:{height:"1cm",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,m.jsx)("span",{style:{fontWeight:"bold",color:"#000"}}),(0,m.jsx)("span",{style:{color:"#000",marginLeft:"50px"},children:(null===d||void 0===d?void 0:d.empName)||"-"})]}),(0,m.jsxs)("div",{style:{display:"flex"},children:[(0,m.jsx)("span",{style:{fontWeight:"bold",color:"#000"}}),(0,m.jsx)("span",{style:{color:"#000",alignItems:"center",gap:"5px"},children:(null===a||void 0===a?void 0:a.empName)||"-"})]})]})]})]}),(0,m.jsxs)("div",{style:{position:"absolute",top:"5.2cm",left:"0",width:"20cm",fontSize:"12px"},children:[(0,m.jsxs)("div",{style:{display:"flex",height:"0.5cm",lineHeight:"0.5cm",alignItems:"left",fontWeight:"bold",marginBottom:"0.3cm"},children:[(0,m.jsx)("div",{style:{width:"1cm",textAlign:"right",marginLeft:"0.4cm"}}),(0,m.jsx)("div",{style:{marginLeft:"0.2cm",width:"8.2cm",color:"#000"}}),(0,m.jsx)("div",{style:{width:"2cm",color:"#000"}}),(0,m.jsx)("div",{style:{width:"1.5cm",color:"#000"}}),(0,m.jsx)("div",{style:{width:"1.2cm",color:"#000"}}),(0,m.jsx)("div",{style:{width:"3cm",color:"#000"}}),(0,m.jsx)("div",{style:{width:"1cm",color:"#000"}}),(0,m.jsx)("div",{style:{width:"3.5cm",textAlign:"right",color:"#000"}})]}),n.filter(e=>e.itemName).map((e,t)=>(0,m.jsxs)("div",{style:{display:"flex",height:"0.5cm",lineHeight:"0.5cm",alignItems:"center"},children:[(0,m.jsx)("div",{style:{width:"1cm",textAlign:"right",marginLeft:"1.7cm",fontWeight:"bold",color:"#000",flexShrink:0},children:t+1}),(0,m.jsx)("div",{style:{marginLeft:"0.5cm",width:"6.8cm",color:"#000",fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flexShrink:0},children:e.itemName}),(0,m.jsx)("div",{style:{width:"1cm",color:"#000",marginLeft:"0.1cm",textAlign:"center",fontWeight:"bold",flexShrink:0},children:e.hsnCode}),(0,m.jsx)("div",{style:{width:"1cm",color:"#000",textAlign:"right",fontWeight:"bold",flexShrink:0,marginRight:"0.15cm"},children:e.gstPercentage}),(0,m.jsx)("div",{style:{width:"5cm",color:"#000",textAlign:"center",fontWeight:"bold"},children:e.quantity}),(0,m.jsx)("div",{style:{width:"4.7cm",color:"#000",textAlign:"center",fontWeight:"bold",marginRight:"0.5cm"},children:e.itemRate}),(0,m.jsx)("div",{style:{width:"1.2cm",color:"#000",fontWeight:"bold",marginLeft:"1cm",textAlign:"left",marginRight:"0.9cm"},children:e.billQuantity}),(0,m.jsx)("div",{style:{width:"5cm",textAlign:"right",fontWeight:"bold",color:"#000"},children:(0,o.jG)(e.amount)})]},t))]}),(0,m.jsx)("p",{style:{position:"absolute",fontWeight:"bold",top:"9.95cm",left:"2.5cm"},children:"TMB A/C NO: 002530350870041  IFSC : TMBL0000002"}),(0,m.jsxs)("div",{style:{position:"absolute",top:"10.6cm",left:"2.5cm",color:"#000",width:"15cm"},children:[(0,m.jsx)("span",{children:"INR"}),"   ",(0,o.GF)(parseInt(r))]}),(0,m.jsxs)("div",{style:{position:"absolute",top:"9.1cm",left:"0cm",width:"20cm"},children:[s.map((e,t)=>(0,m.jsxs)("div",{style:{position:"absolute",top:"".concat(.5*t,"cm"),display:"flex",height:"0.5cm",lineHeight:"0.5cm",alignItems:"center",width:"100%"},children:[(0,m.jsx)("div",{style:{width:"5.0cm"}}),(0,m.jsx)("div",{style:{width:"0.3cm"}}),(0,m.jsx)("div",{style:{width:"1.9cm"}}),(0,m.jsx)("div",{style:{width:"0.9cm"}}),(0,m.jsx)("div",{style:{width:"1.3cm"}}),(0,m.jsx)("div",{style:{width:"4.2cm",marginLeft:"4.5cm",lineHeight:"normal",color:"#000",fontSize:"10px"},children:e.expenseName}),(0,m.jsx)("div",{style:{width:"0cm"}}),(0,m.jsx)("div",{style:{width:"1.5cm",textAlign:"right",color:"#000",fontSize:"12px",marginRight:"auto"},children:(0,o.jG)(e.expenseValue)})]},t)),null!==t&&void 0!==t&&t.roundOffValue?(0,m.jsxs)("div",{style:{position:"absolute",top:"0.5cm",display:"flex",height:"0.5cm",fontWeight:"bold",alignItems:"center",width:"100%"},children:[(0,m.jsx)("div",{style:{width:"5.0cm"}}),(0,m.jsx)("div",{style:{width:"0.3cm"}}),(0,m.jsx)("div",{style:{width:"1.9cm"}}),(0,m.jsx)("div",{style:{width:"0.9cm"}}),(0,m.jsx)("div",{style:{width:"1.3cm"}}),(0,m.jsx)("div",{style:{width:"4.2cm",marginLeft:"8.5cm",lineHeight:"normal",color:"#000",fontSize:"10px",fontWeight:"bold"}}),(0,m.jsx)("div",{style:{width:"0cm"}}),(0,m.jsx)("div",{style:{position:"absolute",right:"0.5cm",textAlign:"right",color:"#000",fontSize:"12px",fontWeight:"bold",top:"0.45cm"},children:(0,o.jG)(t.roundOffValue)})]}):null,(0,m.jsxs)("div",{style:{position:"absolute",top:"1.6cm",left:"14cm",fontWeight:"bold",textAlign:"center",color:"#000",fontSize:"18px",display:"flex",justifyContent:"center",alignItems:"center",gap:"140px"},children:[(0,m.jsx)("span",{}),Number(parseFloat(r||0)).toFixed(2)]})]}),(0,m.jsxs)("div",{style:{position:"absolute",top:"11.6cm",fontSize:"11px",left:"3cm",width:"10cm"},children:[u.map((e,t)=>(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",marginBottom:"0.1cm"},children:[(0,m.jsx)("span",{style:{color:"#000",fontWeight:"bold",width:"3cm",textAlign:"left"},children:e.hsn}),(0,m.jsx)("span",{style:{color:"#000",fontWeight:"bold",width:"3cm",textAlign:"right"},children:(0,o.jG)(e.amount)})]},t)),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",marginTop:"0.1cm",paddingTop:"0.1cm",fontWeight:"bold"},children:[(0,m.jsx)("span",{style:{color:"#000",width:"3cm",textAlign:"left"}}),(0,m.jsx)("span",{style:{color:"#000",width:"3cm",textAlign:"right"},children:(0,o.jG)(u.reduce((e,t)=>e+Number(t.amount||0),0))})]})]})]})]})},v=e=>{let{Do_Id:t,Do_Ids:l=[],loadingOn:o,loadingOff:c,isCombinedPrint:v=!1}=e;const[p,h]=(0,i.useState)([]),x=(0,i.useRef)(null),[g,I]=((0,r.Zp)(),(0,r.zy)(),(0,i.useState)({})),y=JSON.parse(localStorage.getItem("user")),_=Array.isArray(l)&&l.length>0?l:t?[t]:[],[f,j]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(0===_.length)return;null===o||void 0===o||o(),(0,n.z)({address:"masters/company?Company_id=".concat(null===y||void 0===y?void 0:y.Company_id)}).then(e=>{e.success&&I(null!==e&&void 0!==e&&e.data[0]?null===e||void 0===e?void 0:e.data[0]:{})}).catch(e=>console.error(e));(async()=>{try{const e=_.map(e=>(0,n.z)({address:"sales/salesInvoice/printOuts/invoicePrint?Do_Id=".concat(e),loadingOn:()=>{},loadingOff:()=>{}})),t=(await Promise.all(e)).filter(e=>{var t;return(null===e||void 0===e?void 0:e.success)&&(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t[0])}).map(e=>e.data[0]);h(t),j(!0)}catch(e){console.error("Error fetching invoices:",e)}finally{null===c||void 0===c||c()}})()},[JSON.stringify(_)]);const b=(0,s.useReactToPrint)({content:()=>x.current,onAfterPrint:()=>console.log("Print completed")});return!v&&p.length>0?(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,m.jsx)("style",{children:"\n            @media print {\n              @page {\n                size: A5 landscape;\n                margin: 0mm;\n              }\n              body {\n                margin: 0;\n                -webkit-print-color-adjust: exact;\n              }\n              .print-container {\n                width: 21cm !important;\n                height: 14.8cm !important;\n                margin: 0 auto !important;\n                padding: 0 !important;\n                position: relative !important;\n              }\n              .no-print {\n                display: none !important;\n              }\n            }\n            \n            @media screen {\n              .preview-center {\n                margin-left: 1cm;\n              }\n            }\n          "}),(0,m.jsxs)(d.A,{onClick:b,startIcon:(0,m.jsx)(a.A,{}),className:"no-print",style:{margin:"20px"},children:["Print Preview ",p.length>1?"(".concat(p.length," invoices)"):""]}),(0,m.jsx)("div",{ref:x,children:p.map((e,t)=>(0,m.jsx)("div",{style:{marginBottom:p.length>1?"50px":"0"},children:(0,m.jsx)(u,{data:e,companyInfo:g,isPreview:!0})},t))})]}):(0,m.jsx)("div",{ref:x,children:p.map((e,t)=>(0,m.jsx)("div",{className:"invoice-page",style:{pageBreakAfter:t<p.length-1?"always":"auto"},children:(0,m.jsx)(u,{data:e,companyInfo:g,isPreview:!1})},t))})}}}]);
//# sourceMappingURL=2620.c14b86f2.chunk.js.map