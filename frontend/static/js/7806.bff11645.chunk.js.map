{"version":3,"file":"static/js/7806.bff11645.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/ReceiptLong.js","../node_modules/@mui/material/CardActions/cardActionsClasses.js","../node_modules/@mui/material/CardActions/CardActions.js","Pages/Sales/SalesInvoice/manageInvolvedStaff.jsx","Pages/Sales/SalesInvoice/addProducts.jsx","Pages/Sales/SalesInvoice/salesInvoiceCreation.jsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon([/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19.5 3.5 18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2v14H3v3c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V2zM19 19c0 .55-.45 1-1 1s-1-.45-1-1v-3H8V5h11z\"\n}, \"0\"), /*#__PURE__*/_jsx(\"path\", {\n  d: \"M9 7h6v2H9zm7 0h2v2h-2zm-7 3h6v2H9zm7 0h2v2h-2z\"\n}, \"1\")], 'ReceiptLong');","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCardActionsUtilityClass(slot) {\n  return generateUtilityClass('MuiCardActions', slot);\n}\nconst cardActionsClasses = generateUtilityClasses('MuiCardActions', ['root', 'spacing']);\nexport default cardActionsClasses;","'use client';\n\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"disableSpacing\", \"className\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport styled from '../styles/styled';\nimport { useDefaultProps } from '../DefaultPropsProvider';\nimport { getCardActionsUtilityClass } from './cardActionsClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    disableSpacing\n  } = ownerState;\n  const slots = {\n    root: ['root', !disableSpacing && 'spacing']\n  };\n  return composeClasses(slots, getCardActionsUtilityClass, classes);\n};\nconst CardActionsRoot = styled('div', {\n  name: 'MuiCardActions',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, !ownerState.disableSpacing && styles.spacing];\n  }\n})(({\n  ownerState\n}) => _extends({\n  display: 'flex',\n  alignItems: 'center',\n  padding: 8\n}, !ownerState.disableSpacing && {\n  '& > :not(style) ~ :not(style)': {\n    marginLeft: 8\n  }\n}));\nconst CardActions = /*#__PURE__*/React.forwardRef(function CardActions(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiCardActions'\n  });\n  const {\n      disableSpacing = false,\n      className\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    disableSpacing\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardActionsRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? CardActions.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the actions do not have additional margin.\n   * @default false\n   */\n  disableSpacing: PropTypes.bool,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default CardActions;","import { Button, IconButton } from \"@mui/material\";\r\nimport { useState } from \"react\";\r\nimport { salesInvoiceStaffInfo } from \"./variable\";\r\nimport { checkIsNumber, isEqualNumber, reactSelectFilterLogic, toArray } from \"../../../Components/functions\";\r\nimport { customSelectStyles } from \"../../../Components/tablecolumn\";\r\nimport { Delete } from \"@mui/icons-material\";\r\nimport Select from \"react-select\";\r\n\r\nconst InvolvedStaffs = ({ StaffArray = [], setStaffArray, costCenter = [], costCategory = [], }) => {\r\n\r\n    return (\r\n        <>\r\n\r\n            <div className=\"d-flex align-items-center flex-wrap mb-2 border-bottom pb-2\">\r\n                <h6 className=\"flex-grow-1 m-0\">Staff Involved</h6>\r\n                <Button\r\n                    variant=\"outlined\"\r\n                    color=\"primary\"\r\n                    type=\"button\"\r\n                    onClick={() => setStaffArray(pre => [...pre, { ...salesInvoiceStaffInfo }])}\r\n                >Add</Button>\r\n            </div>\r\n\r\n            <table className=\"table table-bordered\">\r\n\r\n                <thead>\r\n                    <tr>\r\n                        <th className=\"fa-13\">Sno</th>\r\n                        <th className=\"fa-13\">Staff Name</th>\r\n                        <th className=\"fa-13\">Category</th>\r\n                        <th className=\"fa-13\">#</th>\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                    {toArray(StaffArray).map((row, index) => (\r\n                        <tr key={index}>\r\n                            <td className='fa-13 vctr text-center'>{index + 1}</td>\r\n                            <td className='fa-13 w-100 p-0'>\r\n                                <Select\r\n                                    value={{\r\n                                        value: row?.Emp_Id,\r\n                                        label: row?.Emp_Name,\r\n                                    }}\r\n                                    onChange={e => setStaffArray(prev => {\r\n                                        return prev.map((staffRow, ind) => {\r\n                                            if (isEqualNumber(ind, index)) {\r\n                                                const staff = toArray(costCenter).find(c => isEqualNumber(c?.Cost_Center_Id, e.value))\r\n                                                return {\r\n                                                    ...staffRow,\r\n                                                    Emp_Type_Id:\r\n                                                        checkIsNumber(staffRow?.Emp_Type_Id)\r\n                                                            ? Number(staffRow?.Emp_Type_Id)\r\n                                                            : checkIsNumber(staff.User_Type)\r\n                                                                ? Number(staff.User_Type)\r\n                                                                : 0,\r\n                                                    Emp_Id: Number(e.value),\r\n                                                    Emp_Name: e.label\r\n                                                }\r\n                                            }\r\n                                            return staffRow;\r\n                                        });\r\n                                    })}\r\n                                    options={\r\n                                        [...toArray(costCenter).filter(fil => (\r\n                                            !StaffArray.some(st => (\r\n                                                isEqualNumber(st.Emp_Id, fil.Cost_Center_Id)\r\n                                            ))\r\n                                        ))].map(st => ({\r\n                                            value: st.Cost_Center_Id,\r\n                                            label: st.Cost_Center_Name\r\n                                        }))\r\n                                    }\r\n                                    styles={customSelectStyles}\r\n                                    isSearchable={true}\r\n                                    placeholder={\"Select Staff\"}\r\n                                    filterOption={reactSelectFilterLogic}\r\n                                />\r\n                            </td>\r\n                            <td className='fa-13 vctr p-0' style={{ maxWidth: '130px', minWidth: '100px' }}>\r\n                                <select\r\n                                    value={row?.Emp_Type_Id}\r\n                                    onChange={e => setStaffArray((prev) => {\r\n                                        return prev.map((staffRow, ind) => {\r\n                                            if (isEqualNumber(ind, index)) {\r\n                                                return {\r\n                                                    ...staffRow,\r\n                                                    Emp_Type_Id: e.target.value\r\n                                                }\r\n                                            }\r\n                                            return staffRow;\r\n                                        });\r\n                                    })}\r\n                                    className=\"cus-inpt p-2 border-0\"\r\n                                >\r\n                                    <option value=\"\">Select</option>\r\n                                    {toArray(costCategory).map((st, sti) =>\r\n                                        <option value={st?.Cost_Category_Id} key={sti}>{st?.Cost_Category}</option>\r\n                                    )}\r\n                                </select>\r\n                            </td>\r\n                            <td className='fa-13 vctr p-0'>\r\n                                <IconButton\r\n                                    onClick={() => {\r\n                                        setStaffArray(prev => {\r\n                                            return prev.filter((_, filIndex) => index !== filIndex);\r\n                                        });\r\n                                    }}\r\n                                    size='small'\r\n                                >\r\n                                    <Delete color='error' />\r\n                                </IconButton>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n\r\n            </table>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default InvolvedStaffs;","import { useEffect, useState } from \"react\";\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle } from \"@mui/material\";\r\nimport { checkIsNumber, Division, isEqualNumber, isValidObject, Multiplication, onlynum, reactSelectFilterLogic, toArray, toNumber } from \"../../../Components/functions\";\r\nimport { ClearAll } from \"@mui/icons-material\";\r\nimport RequiredStar from \"../../../Components/requiredStar\";\r\nimport { calculateGSTDetails } from \"../../../Components/taxCalculator\";\r\nimport Select from \"react-select\";\r\nimport { customSelectStyles } from \"../../../Components/tablecolumn\";\r\nimport { toast } from \"react-toastify\";\r\nimport { fetchLink } from \"../../../Components/fetchComponent\";\r\n\r\nconst validStockValue = (Item_Id, Godown_Id, stockInGodown) => {\r\n    const godownStockValue = toArray(stockInGodown).find(\r\n        godownItem => (\r\n            isEqualNumber(godownItem?.Product_Id, Item_Id) &&\r\n            isEqualNumber(godownItem?.Godown_Id, Godown_Id)\r\n        )\r\n    )?.Act_Bal_Qty;\r\n\r\n    return toNumber(godownStockValue);\r\n};\r\n\r\nconst AddProductForm = ({\r\n    children,\r\n    orderProducts = [],\r\n    setOrderProducts,\r\n    open = false,\r\n    onClose,\r\n    products = [],\r\n    brands = [],\r\n    uom = [],\r\n    godowns = [],\r\n    GST_Inclusive,\r\n    IS_IGST,\r\n    editValues = null,\r\n    initialValue = {},\r\n    batchDetails = []\r\n}) => {\r\n\r\n    const [productDetails, setProductDetails] = useState(initialValue);\r\n\r\n    const isInclusive = isEqualNumber(GST_Inclusive, 1);\r\n    const isNotTaxableBill = isEqualNumber(GST_Inclusive, 2);\r\n\r\n    const [stockInGodowns, setStockInGodowns] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if (isValidObject(editValues) && open) {\r\n            setProductDetails(pre => (\r\n                Object.fromEntries(\r\n                    Object.entries(pre).map(([key, value]) => [key, editValues[key] ? editValues[key] : value])\r\n                )\r\n            ))\r\n        }\r\n    }, [editValues])\r\n\r\n    const findProductDetails = (productid) => products?.find(obj => isEqualNumber(obj?.Product_Id, productid)) ?? {};\r\n\r\n    const closeDialog = () => {\r\n        setProductDetails(initialValue);\r\n        onClose();\r\n    }\r\n\r\n    const handleProductInputChange = () => {\r\n\r\n        setOrderProducts(pre => {\r\n            const existingProducts = pre.filter(ordered => !isEqualNumber(ordered.Item_Id, productDetails.Item_Id));\r\n\r\n            const currentProductDetails = Object.fromEntries(\r\n                Object.entries(initialValue).map(([key, value]) => {\r\n                    const productMaster = findProductDetails(productDetails.Item_Id);\r\n                    const gstPercentage = IS_IGST ? productMaster.Igst_P : productMaster.Gst_P;\r\n                    const isTaxable = gstPercentage > 0;\r\n\r\n                    const { Bill_Qty, Item_Rate, Amount } = productDetails;\r\n\r\n                    const taxType = isNotTaxableBill ? 'zerotax' : isInclusive ? 'remove' : 'add';\r\n                    const itemRateGst = calculateGSTDetails(Item_Rate, gstPercentage, taxType);\r\n                    const gstInfo = calculateGSTDetails(Amount, gstPercentage, taxType);\r\n\r\n                    const cgstPer = !IS_IGST ? gstInfo.cgst_per : 0;\r\n                    const igstPer = IS_IGST ? gstInfo.igst_per : 0;\r\n                    const Cgst_Amo = !IS_IGST ? gstInfo.cgst_amount : 0;\r\n                    const Igst_Amo = IS_IGST ? gstInfo.igst_amount : 0;\r\n\r\n                    switch (key) {\r\n                        case 'Item_Name': return [key, productMaster.Product_Name]\r\n                        case 'Taxable_Rate': return [key, itemRateGst.base_amount]\r\n                        case 'Total_Qty': return [key, Bill_Qty]\r\n                        case 'Taxble': return [key, isTaxable ? 1 : 0]\r\n                        case 'Taxable_Amount': return [key, gstInfo.base_amount]\r\n                        case 'Tax_Rate': return [key, gstPercentage]\r\n                        case 'Cgst':\r\n                        case 'Sgst': return [key, cgstPer ?? 0]\r\n                        case 'Cgst_Amo':\r\n                        case 'Sgst_Amo': return [key, isNotTaxableBill ? 0 : Cgst_Amo]\r\n                        case 'Igst': return [key, igstPer ?? 0]\r\n                        case 'Igst_Amo': return [key, isNotTaxableBill ? 0 : Igst_Amo]\r\n                        case 'Final_Amo': return [key, gstInfo.with_tax]\r\n\r\n                        default: return [key, productDetails[key] || value]\r\n                    }\r\n                })\r\n            );\r\n\r\n            return [...existingProducts, currentProductDetails];\r\n        });\r\n\r\n        closeDialog();\r\n    };\r\n\r\n    useEffect(() => {\r\n        setStockInGodowns([]);\r\n        if (checkIsNumber(productDetails.Item_Id) && !isEqualNumber(productDetails.Item_Id, 0)) {\r\n            fetchLink({ address: `sales/stockInGodown?Item_Id=${productDetails.Item_Id}` })\r\n                .then(data => {\r\n                    const stockInGodowns = (data.success ? data.data : []).sort(\r\n                        (a, b) => String(a?.stock_item_name).localeCompare(b?.stock_item_name)\r\n                    );\r\n                    setStockInGodowns(stockInGodowns);\r\n                })\r\n        }\r\n    }, [productDetails.Item_Id])\r\n\r\n    return (\r\n        <>\r\n            {children}\r\n\r\n            <Dialog\r\n                open={open}\r\n                onClose={closeDialog}\r\n                maxWidth='md' fullWidth\r\n            >\r\n                <DialogTitle className=\"border-bottom\">\r\n                    <span>Add Products Details</span>\r\n                </DialogTitle>\r\n                <form onSubmit={e => {\r\n                    e.preventDefault();\r\n                    if (productDetails.Item_Id) {\r\n                        handleProductInputChange();\r\n                    } else {\r\n                        toast.warn('Select Product');\r\n                    }\r\n                }}>\r\n                    <DialogContent>\r\n                        <div className=\"row pb-5\">\r\n\r\n                            {/* brand */}\r\n                            <div className=\"col-6 p-2\">\r\n                                <label>Brand</label>\r\n                                <Select\r\n                                    value={{ value: productDetails.BrandID, label: productDetails.Brand }}\r\n                                    onChange={(e) => setProductDetails(pre => ({ ...pre, BrandID: e.value, Brand: e.label }))}\r\n                                    options={[\r\n                                        { value: '', label: 'select', isDisabled: true },\r\n                                        ...brands.map(obj => ({ value: obj?.Brand, label: obj?.Brand_Name }))\r\n                                    ]}\r\n                                    styles={customSelectStyles}\r\n                                    menuPortalTarget={document.body}\r\n                                    isSearchable={true}\r\n                                    placeholder={\"Select Brand\"}\r\n                                    maxMenuHeight={200}\r\n                                    filterOption={reactSelectFilterLogic}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* group */}\r\n                            <div className=\"col-6 p-2\">\r\n                                <label>Group</label>\r\n                                <Select\r\n                                    value={{ value: productDetails.GroupID, label: productDetails.Group }}\r\n                                    onChange={(e) =>\r\n                                        setProductDetails((pre) => ({ ...pre, GroupID: e.value, Group: e.label }))\r\n                                    }\r\n                                    options={[\r\n                                        { value: '', label: 'select', isDisabled: true },\r\n                                        ...products\r\n                                            .filter(\r\n                                                (pro) =>\r\n                                                    productDetails.BrandID\r\n                                                        ? isEqualNumber(pro.Brand, productDetails.BrandID)\r\n                                                        : true\r\n                                            )\r\n                                            .reduce((acc, pro) => {\r\n                                                if (\r\n                                                    !acc.some((grp) => grp.value === pro.Product_Group)\r\n                                                ) {\r\n                                                    acc.push({\r\n                                                        value: pro.Product_Group,\r\n                                                        label: pro.Pro_Group,\r\n                                                    });\r\n                                                }\r\n                                                return acc;\r\n                                            }, []),\r\n                                    ]}\r\n                                    styles={customSelectStyles}\r\n                                    menuPortalTarget={document.body}\r\n                                    isSearchable={true}\r\n                                    placeholder={\"Select Group\"}\r\n                                    maxMenuHeight={200}\r\n                                    filterOption={reactSelectFilterLogic}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* item name */}\r\n                            <div className={\r\n                                Object.hasOwn(productDetails, 'GoDown_Id') ? 'col-md-8 p-2' : \"col-12 p-2\"\r\n                            }>\r\n                                <label>Item Name <RequiredStar /></label>\r\n                                <Select\r\n                                    value={{\r\n                                        value: productDetails.Item_Id,\r\n                                        label: (\r\n                                            findProductDetails(productDetails.Item_Id)?.Product_Name\r\n                                        )\r\n                                    }}\r\n                                    isDisabled={checkIsNumber(productDetails.Pre_Id)}\r\n                                    menuPortalTarget={document.body}\r\n                                    onChange={e => {\r\n                                        const productInfo = findProductDetails(e.value);\r\n                                        setProductDetails(pre => ({\r\n                                            ...pre,\r\n\r\n                                            Group: productInfo.Pro_Group ?? pre.Group,\r\n                                            GroupID: productInfo.Product_Group ?? pre.GroupID,\r\n                                            Brand: productInfo.Brand_Name ?? pre.Brand,\r\n                                            BrandID: productInfo.Brand ?? pre.BrandID,\r\n\r\n                                            Item_Id: e.value,\r\n                                            Item_Rate: productInfo.Item_Rate ?? 0,\r\n                                            GoDown_Id: '',\r\n                                            Bill_Qty: 0,\r\n                                            Amount: 0,\r\n                                            Unit_Id: productInfo.UOM_Id ?? pre.Unit_Id,\r\n                                            Unit_Name: productInfo.Units ?? pre.Unit_Name,\r\n                                            HSN_Code: productInfo?.HSN_Code\r\n                                        }));\r\n                                    }}\r\n                                    options={[\r\n                                        { value: '', label: 'select', isDisabled: true },\r\n                                        ...[\r\n                                            ...products\r\n                                                .filter(pro => productDetails.BrandID ? isEqualNumber(pro.Brand, productDetails.BrandID) : true)\r\n                                                .filter(pro => productDetails.GroupID ? isEqualNumber(pro.Product_Group, productDetails.GroupID) : true)\r\n                                        ].map(obj => ({\r\n                                            value: obj?.Product_Id,\r\n                                            label: obj?.Product_Name,\r\n                                            isDisabled: (\r\n                                                orderProducts.findIndex(ind => isEqualNumber(\r\n                                                    ind?.Item_Id, obj?.Product_Id\r\n                                                ))\r\n                                            ) === -1 ? false : true\r\n                                        }))\r\n                                    ]}\r\n                                    styles={customSelectStyles}\r\n                                    isSearchable={true}\r\n                                    required\r\n                                    placeholder={\"Select Product\"}\r\n                                    maxMenuHeight={200}\r\n                                    filterOption={reactSelectFilterLogic}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* godown  */}\r\n                            {Object.hasOwn(productDetails, 'GoDown_Id') && (\r\n                                <div className=\"col-md-4 p-2\">\r\n                                    <label>Godown</label>\r\n                                    <Select\r\n                                        value={{\r\n                                            value: productDetails?.GoDown_Id,\r\n                                            label: godowns.find(g => isEqualNumber(g.Godown_Id, productDetails?.GoDown_Id))?.Godown_Name || ''\r\n                                        }}\r\n                                        onChange={(e) => setProductDetails(pre => ({ ...pre, GoDown_Id: e.value }))}\r\n                                        options={[\r\n                                            { value: '', label: 'select', isDisabled: true },\r\n                                            ...toArray(godowns).map(obj => ({\r\n                                                value: obj?.Godown_Id,\r\n                                                label: `${obj?.Godown_Name}${checkIsNumber(obj?.Godown_Id)\r\n                                                        ? ` (Bal: ${validStockValue(\r\n                                                            productDetails.Item_Id,\r\n                                                            obj?.Godown_Id,\r\n                                                            stockInGodowns\r\n                                                        )})`\r\n                                                        : ''\r\n                                                    }`\r\n\r\n                                            }))\r\n                                        ]}\r\n                                        styles={customSelectStyles}\r\n                                        isDisabled={!checkIsNumber(productDetails?.Item_Id)}\r\n                                        menuPortalTarget={document.body}\r\n                                        isSearchable={true}\r\n                                        placeholder={\"Select Godown\"}\r\n                                        filterOption={reactSelectFilterLogic}\r\n                                    // maxMenuHeight={200}  \r\n                                    />\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* quantity */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>Quantity <RequiredStar /></label>\r\n                                <input\r\n                                    required\r\n                                    value={productDetails.Bill_Qty ? productDetails.Bill_Qty : ''}\r\n                                    onInput={onlynum}\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                    onChange={e => {\r\n                                        if (productDetails.Item_Rate) {\r\n                                            setProductDetails(pre => ({\r\n                                                ...pre,\r\n                                                Amount: Multiplication(productDetails.Item_Rate, e.target.value),\r\n                                                Bill_Qty: e.target.value,\r\n                                            }))\r\n                                        } else if (productDetails.Amount) {\r\n                                            setProductDetails(pre => ({\r\n                                                ...pre,\r\n                                                Item_Rate: Division(pre.Amount, e.target.value),\r\n                                                Bill_Qty: e.target.value,\r\n                                            }))\r\n                                        } else {\r\n                                            setProductDetails(pre => ({\r\n                                                ...pre,\r\n                                                Bill_Qty: e.target.value,\r\n                                            }));\r\n                                        }\r\n                                    }}\r\n                                    className=\"cus-inpt\"\r\n                                    min={1}\r\n                                />\r\n                            </div>\r\n\r\n                            {Object.hasOwn(productDetails, 'Act_Qty') && (\r\n                                <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                    <label>Actual Quantity </label>\r\n                                    <input\r\n                                        value={productDetails.Act_Qty ? productDetails.Act_Qty : ''}\r\n                                        onInput={onlynum}\r\n                                        disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                        onChange={e => setProductDetails(pre => ({\r\n                                            ...pre,\r\n                                            Act_Qty: e.target.value,\r\n                                        }))}\r\n                                        required\r\n                                        className=\"cus-inpt\"\r\n                                    />\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Rate */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>Rate </label>\r\n                                <input\r\n                                    value={productDetails.Item_Rate ? productDetails.Item_Rate : ''}\r\n                                    onInput={onlynum}\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                    onChange={e => setProductDetails(pre => ({\r\n                                        ...pre,\r\n                                        Item_Rate: e.target.value,\r\n                                        Amount: pre.Bill_Qty ? Multiplication(e.target.value, pre.Bill_Qty) : pre.Amount\r\n                                    }))}\r\n                                    required\r\n                                    className=\"cus-inpt\"\r\n                                />\r\n                            </div>\r\n\r\n                            {/* UOM */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>UOM</label>\r\n                                <select\r\n                                    value={\r\n                                        Object.hasOwn(productDetails, 'UOM') ? productDetails.UOM :\r\n                                            Object.hasOwn(productDetails, 'Unit_Id') ? productDetails.Unit_Id : ''\r\n                                    }\r\n                                    onChange={e => {\r\n                                        const selectedIndex = e.target.selectedIndex;\r\n                                        const label = e.target.options[selectedIndex].text;\r\n                                        const value = e.target.value;\r\n                                        setProductDetails(pre => ({\r\n                                            ...pre,\r\n                                            UOM: value,\r\n                                            Unit_Id: value,\r\n                                            Units: label,\r\n                                            Unit_Name: label,\r\n                                        }));\r\n                                    }}\r\n                                    className=\"cus-inpt\"\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                >\r\n                                    <option value=\"\" disabled>select</option>\r\n                                    {uom.map((o, i) => (\r\n                                        <option value={o.Unit_Id} key={i} >{o.Units}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n\r\n                            {/* Amount */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>Amount</label>\r\n                                <input\r\n                                    required\r\n                                    value={productDetails.Amount ? productDetails.Amount : ''}\r\n                                    onInput={onlynum}\r\n                                    disabled={!checkIsNumber(productDetails.Item_Id)}\r\n                                    onChange={e => setProductDetails(pre => ({\r\n                                        ...pre,\r\n                                        Amount: e.target.value,\r\n                                        Item_Rate: pre.Bill_Qty ? Division(e.target.value, pre.Bill_Qty) : pre.Item_Rate\r\n                                    }))}\r\n                                    className=\"cus-inpt\"\r\n                                    min={1}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Batch */}\r\n                            <div className=\"col-lg-4 col-md-6 p-2\">\r\n                                <label>Batch</label>\r\n                                <Select\r\n                                    value={{\r\n                                        value: productDetails?.Batch_Name || '',\r\n                                        label: productDetails?.Batch_Name || ''\r\n                                    }}\r\n                                    onChange={e => setProductDetails(pre => ({ ...pre, Batch_Name: e.value }))}\r\n                                    options={\r\n                                        batchDetails.filter(\r\n                                            bat => (\r\n                                                isEqualNumber(bat.item_id, productDetails?.Item_Id)\r\n                                                && isEqualNumber(bat?.godown_id, productDetails?.GoDown_Id)\r\n                                                && toNumber(bat.pendingQuantity) >= toNumber(productDetails?.Bill_Qty)\r\n                                            )\r\n                                        ).map(\r\n                                            bat => ({ value: bat.batch, label: bat.batch })\r\n                                        )\r\n                                    }\r\n                                    styles={customSelectStyles}\r\n                                    isSearchable={true}\r\n                                    placeholder={\"Select Batch\"}\r\n                                    menuPortalTarget={document.body}\r\n                                    isDisabled={true}\r\n                                    // isDisabled={\r\n                                    //     !checkIsNumber(productDetails?.Item_Id)\r\n                                    //     || !checkIsNumber(productDetails?.GoDown_Id)\r\n                                    //     || isEqualNumber(productDetails?.Bill_Qty, 0)\r\n                                    // }\r\n                                />\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                    </DialogContent>\r\n                    <DialogActions className=\"d-flex justify-content-between align-items-center\">\r\n                        <Button onClick={() => setProductDetails(initialValue)} type='button' startIcon={<ClearAll />}>Clear</Button>\r\n                        <span>\r\n                            <Button type=\"button\" onClick={closeDialog}>cancel</Button>\r\n                            <Button type='submit' variant=\"outlined\">Add</Button>\r\n                        </span>\r\n                    </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddProductForm;","import { useState, useEffect, useMemo } from \"react\";\r\nimport { Button, IconButton, CardContent, Card, Dialog, DialogTitle, DialogContent, DialogActions, CardActions } from \"@mui/material\";\r\nimport { toast } from 'react-toastify';\r\nimport {\r\n    isEqualNumber, isValidObject, ISOString, getUniqueData, Addition, getSessionUser,\r\n    checkIsNumber, toNumber, toArray, stringCompare,\r\n    RoundNumber\r\n} from \"../../../Components/functions\";\r\nimport { Close } from \"@mui/icons-material\";\r\nimport { Add, Delete, Edit, ReceiptLong } from \"@mui/icons-material\";\r\nimport { fetchLink } from '../../../Components/fetchComponent';\r\nimport FilterableTable, { createCol } from \"../../../Components/filterableTable2\";\r\nimport { calculateGSTDetails } from '../../../Components/taxCalculator';\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport {\r\n    salesInvoiceGeneralInfo, salesInvoiceDetailsInfo, salesInvoiceExpencesInfo,\r\n    salesInvoiceStaffInfo, retailerDeliveryAddressInfo\r\n} from './variable';\r\nimport InvolvedStaffs from \"./manageInvolvedStaff\";\r\nimport ManageSalesInvoiceGeneralInfo from \"./manageGeneralInfo\";\r\nimport SalesInvoiceTaxDetails from \"./taxDetails\";\r\nimport AddProductsInSalesInvoice from \"./importFromSaleOrder\";\r\nimport ExpencesOfSalesInvoice from \"./manageExpences\";\r\nimport AddProductForm from \"./addProducts\";\r\nimport InvoiceTemplate from \"../LRReport/SalesInvPrint/invTemplate\";\r\n\r\n\r\nconst storage = getSessionUser().user;\r\n\r\nconst findProductDetails = (arr = [], productid) => arr.find(obj => isEqualNumber(obj.Product_Id, productid)) ?? {};\r\n\r\nconst CreateSalesInvoice = ({ loadingOn, loadingOff }) => {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const editValues = location.state;\r\n    const [baseData, setBaseData] = useState({\r\n        products: [],\r\n        branch: [],\r\n        retailers: [],\r\n        voucherType: [],\r\n        uom: [],\r\n        staff: [],\r\n        staffType: [],\r\n        brand: [],\r\n        godown: [],\r\n        expence: [],\r\n        stockInGodown: [],\r\n        stockItemLedgerName: [],\r\n        batchDetails: []\r\n    });\r\n\r\n    const [dialog, setDialog] = useState({\r\n        addProductDialog: false,\r\n        importFromSaleOrder: false,\r\n    })\r\n\r\n    const [invoiceInfo, setInvoiceInfo] = useState(salesInvoiceGeneralInfo);\r\n    const [retailerDeliveryAddress, setRetailerDeliveryAddress] = useState(retailerDeliveryAddressInfo);\r\n    const [retailerShippingAddress, setRetailerShippingAddress] = useState(retailerDeliveryAddressInfo);\r\n    const [invoiceProducts, setInvoiceProduct] = useState([]);\r\n    const [invoiceExpences, setInvoiceExpences] = useState([]);\r\n    const [staffArray, setStaffArray] = useState([]);\r\n\r\n    const [selectedProductToEdit, setSelectedProductToEdit] = useState(null);\r\n\r\n    const isInclusive = isEqualNumber(invoiceInfo.GST_Inclusive, 1);\r\n    const isNotTaxableBill = isEqualNumber(invoiceInfo.GST_Inclusive, 2);\r\n    const IS_IGST = isEqualNumber(invoiceInfo.IS_IGST, 1);\r\n    const taxType = isNotTaxableBill ? 'zerotax' : isInclusive ? 'remove' : 'add';\r\n    const minimumRows = 3;\r\n    const dummyRowCount = minimumRows - invoiceProducts.length;\r\n    const [printDialog, setPrintDialog] = useState({\r\n        open: false,\r\n        Do_Id: null\r\n    });\r\n\r\n    useEffect(() => {\r\n\r\n        const fetchData = async () => {\r\n            try {\r\n                if (loadingOn) loadingOn();\r\n\r\n                const [\r\n                    branchResponse,\r\n                    productsResponse,\r\n                    retailerResponse,\r\n                    voucherTypeResponse,\r\n                    uomResponse,\r\n                    staffResponse,\r\n                    staffCategory,\r\n                    godownLocationsResponse,\r\n                    expenceResponse,\r\n                    // godownWiseStock,\r\n                    stockItemLedgerNameResponse,\r\n                    batchDetailsResponse\r\n                ] = await Promise.all([\r\n                    fetchLink({ address: `masters/branch/dropDown` }),\r\n                    fetchLink({ address: `masters/products` }),\r\n                    fetchLink({ address: `masters/retailers/dropDown?Company_Id=${storage?.Company_id}` }),\r\n                    fetchLink({ address: `masters/voucher?module=SALES` }),\r\n                    fetchLink({ address: `masters/uom` }),\r\n                    fetchLink({ address: `dataEntry/costCenter` }),\r\n                    fetchLink({ address: `dataEntry/costCenter/category` }),\r\n                    fetchLink({ address: `dataEntry/godownLocationMaster` }),\r\n                    fetchLink({ address: `masters/defaultAccountMaster` }),\r\n                    // fetchLink({ address: `sales/stockInGodown` }),\r\n                    fetchLink({ address: `purchase/stockItemLedgerName?type=SALES` }),\r\n                    fetchLink({ address: `inventory/batchMaster/stockBalance` })\r\n                ]);\r\n\r\n                const branchData = (branchResponse.success ? branchResponse.data : []).sort(\r\n                    (a, b) => String(a?.BranchName).localeCompare(b?.BranchName)\r\n                );\r\n                const productsData = (productsResponse.success ? productsResponse.data : []).sort(\r\n                    (a, b) => String(a?.Product_Name).localeCompare(b?.Product_Name)\r\n                );\r\n                const retailersData = (retailerResponse.success ? retailerResponse.data : []).sort(\r\n                    (a, b) => String(a?.Retailer_Name).localeCompare(b?.Retailer_Name)\r\n                );\r\n                const voucherType = (voucherTypeResponse.success ? voucherTypeResponse.data : []).sort(\r\n                    (a, b) => String(a?.Voucher_Type).localeCompare(b?.Voucher_Type)\r\n                );\r\n                const uomData = (uomResponse.success ? uomResponse.data : []).sort(\r\n                    (a, b) => String(a.Units).localeCompare(b.Units)\r\n                );\r\n                const staffData = (staffResponse.success ? staffResponse.data : []).sort(\r\n                    (a, b) => String(a?.Cost_Center_Name).localeCompare(b?.Cost_Center_Name)\r\n                );\r\n                const staffCategoryData = (staffCategory.success ? staffCategory.data : []).sort(\r\n                    (a, b) => String(a?.Cost_Category).localeCompare(b?.Cost_Category)\r\n                );\r\n                const godownLocations = (godownLocationsResponse.success ? godownLocationsResponse.data : []).sort(\r\n                    (a, b) => String(a?.Godown_Name).localeCompare(b?.Godown_Name)\r\n                );\r\n                const expencesMaster = (expenceResponse.success ? toArray(expenceResponse.data) : []).sort(\r\n                    (a, b) => String(a?.Account_Name).localeCompare(b?.Account_Name)\r\n                );\r\n                // const stockInGodowns = (godownWiseStock.success ? godownWiseStock.data : []).sort(\r\n                //     (a, b) => String(a?.stock_item_name).localeCompare(b?.stock_item_name)\r\n                // );\r\n                const stockItemLedgerName = (stockItemLedgerNameResponse.success ? stockItemLedgerNameResponse.data : []).sort(\r\n                    (a, b) => String(a?.Stock_Item_Ledger_Name).localeCompare(b?.Stock_Item_Ledger_Name)\r\n                );\r\n\r\n                setBaseData((pre) => ({\r\n                    ...pre,\r\n                    products: productsData,\r\n                    branch: branchData,\r\n                    retailers: retailersData,\r\n                    voucherType: voucherType,\r\n                    uom: uomData,\r\n                    staff: staffData,\r\n                    staffType: staffCategoryData,\r\n                    godown: godownLocations,\r\n                    brand: getUniqueData(productsData, 'Brand', ['Brand_Name']),\r\n                    expence: expencesMaster.filter(\r\n                        exp => !stringCompare(exp.Type, 'DEFAULT')\r\n                    ).map(exp => ({ \r\n                        Id: exp.Acc_Id, \r\n                        Expence_Name: exp.Account_Name,\r\n                        percentageValue: exp.percentageValue\r\n                    })),\r\n                    // stockInGodown: stockInGodowns,\r\n                    stockItemLedgerName: stockItemLedgerName,\r\n                    batchDetails: toArray(batchDetailsResponse.data)\r\n                }));\r\n            } catch (e) {\r\n                console.error(\"Error fetching data:\", e);\r\n            } finally {\r\n                if (loadingOff) loadingOff();\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n\r\n    }, [storage?.Company_id])\r\n\r\n    const clearValues = () => {\r\n        setInvoiceInfo(salesInvoiceGeneralInfo);\r\n        setInvoiceProduct([]);\r\n        setInvoiceExpences([]);\r\n        setStaffArray([]);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setInvoiceProduct(pre => {\r\n            const exist = [...pre];\r\n\r\n            return exist.map(item => {\r\n                return Object.fromEntries(\r\n                    Object.entries(item).map(([key, value]) => {\r\n                        const productMaster = findProductDetails(baseData.products, item?.Item_Id);\r\n                        const gstPercentage = IS_IGST ? productMaster.Igst_P : productMaster.Gst_P;\r\n                        const isTaxable = gstPercentage > 0;\r\n\r\n                        const { Bill_Qty, Item_Rate, Amount } = item;\r\n\r\n                        const itemRateGst = calculateGSTDetails(Item_Rate, gstPercentage, taxType);\r\n                        const gstInfo = calculateGSTDetails(Amount, gstPercentage, taxType);\r\n\r\n                        const cgstPer = !IS_IGST ? gstInfo.cgst_per : 0;\r\n                        const igstPer = IS_IGST ? gstInfo.igst_per : 0;\r\n                        const Cgst_Amo = !IS_IGST ? gstInfo.cgst_amount : 0;\r\n                        const Igst_Amo = IS_IGST ? gstInfo.igst_amount : 0;\r\n\r\n                        switch (key) {\r\n                            case 'Taxable_Rate': return [key, itemRateGst.base_amount]\r\n                            case 'Total_Qty': return [key, Bill_Qty]\r\n                            case 'Taxble': return [key, isTaxable ? 1 : 0]\r\n                            case 'Taxable_Amount': return [key, gstInfo.base_amount]\r\n                            case 'Tax_Rate': return [key, gstPercentage]\r\n                            case 'Cgst':\r\n                            case 'Sgst': return [key, cgstPer ?? 0]\r\n                            case 'Cgst_Amo':\r\n                            case 'Sgst_Amo': return [key, isNotTaxableBill ? 0 : Cgst_Amo]\r\n                            case 'Igst': return [key, igstPer ?? 0]\r\n                            case 'Igst_Amo': return [key, isNotTaxableBill ? 0 : Igst_Amo]\r\n                            case 'Final_Amo': return [key, gstInfo.with_tax]\r\n\r\n                            default: return [key, item[key] || value]\r\n                        }\r\n                    })\r\n                )\r\n            })\r\n        });\r\n    }, [\r\n        baseData.products,\r\n        IS_IGST,\r\n        taxType,\r\n    ]);\r\n\r\n    useEffect(() => {\r\n        setInvoiceExpences(pre => {\r\n            const exist = [...pre];\r\n\r\n            return exist.map(item => {\r\n                const\r\n                    Igst = IS_IGST ? toNumber(item?.Igst) : 0,\r\n                    Cgst = !IS_IGST ? toNumber(item?.Cgst) : 0,\r\n                    Sgst = !IS_IGST ? toNumber(item?.Sgst) : 0,\r\n                    Expence_Value = toNumber(item?.Expence_Value),\r\n                    taxPercentage = IS_IGST ? Igst : Addition(Cgst, Sgst);\r\n\r\n                const taxAmount = calculateGSTDetails(Expence_Value, taxPercentage, taxType);\r\n\r\n                return {\r\n                    ...item,\r\n                    Cgst, Sgst, Igst,\r\n                    Expence_Value,\r\n                    Cgst_Amo: Cgst > 0 ? taxAmount.cgst_amount : 0,\r\n                    Sgst_Amo: Sgst > 0 ? taxAmount.sgst_amount : 0,\r\n                    Igst_Amo: Igst > 0 ? taxAmount.igst_amount : 0,\r\n                }\r\n            })\r\n        })\r\n    }, [\r\n        baseData.expence,\r\n        IS_IGST,\r\n        taxType,\r\n    ])\r\n\r\n    useEffect(() => {\r\n        if (\r\n            isValidObject(editValues) &&\r\n            Array.isArray(editValues?.Products_List)\r\n        ) {\r\n            const { Products_List, Expence_Array, Staffs_Array } = editValues;\r\n            setInvoiceInfo(\r\n                Object.fromEntries(\r\n                    Object.entries(salesInvoiceGeneralInfo).map(([key, value]) => {\r\n                        if (key === 'Do_Date') return [key, editValues[key] ? ISOString(editValues[key]) : value]\r\n                        return [key, editValues[key] ?? value]\r\n                    })\r\n                )\r\n            );\r\n            setInvoiceProduct(\r\n                Products_List.map(item => Object.fromEntries(\r\n                    Object.entries(salesInvoiceDetailsInfo).map(([key, value]) => {\r\n                        return [key, item[key] ?? value]\r\n                    })\r\n                ))\r\n            );\r\n            setInvoiceExpences(\r\n                toArray(Expence_Array).map(item => Object.fromEntries(\r\n                    Object.entries(salesInvoiceExpencesInfo).map(([key, value]) => {\r\n                        return [key, item[key] ?? value]\r\n                    })\r\n                ))\r\n            );\r\n            setStaffArray(\r\n                toArray(Staffs_Array).map(item => Object.fromEntries(\r\n                    Object.entries(salesInvoiceStaffInfo).map(([key, value]) => {\r\n                        return [key, item[key] ?? value]\r\n                    })\r\n                ))\r\n            );\r\n        }\r\n    }, [editValues])\r\n\r\n    useEffect(() => {\r\n        if (checkIsNumber(editValues?.Retailer_Id) && !isEqualNumber(editValues?.Retailer_Id, 0)) {\r\n            const retailerDetails = baseData.retailers.find(ret => isEqualNumber(ret.Retailer_Id, editValues?.Retailer_Id)) || {};\r\n            const billingAddress = toArray(retailerDetails?.deliveryAddresses).find(\r\n                addr => isEqualNumber(addr?.id, editValues?.deliveryAddressId)\r\n            ) ?? null;\r\n\r\n            if (billingAddress) {\r\n\r\n                setRetailerDeliveryAddress({\r\n                    deliveryName: billingAddress?.deliveryName,\r\n                    phoneNumber: billingAddress?.phoneNumber,\r\n                    cityName: billingAddress?.cityName,\r\n                    deliveryAddress: billingAddress?.deliveryAddress,\r\n                    gstNumber: billingAddress?.gstNumber,\r\n                    stateName: billingAddress?.stateName,\r\n                    id: billingAddress.id\r\n                })\r\n            }\r\n\r\n            const shippingAddress = toArray(retailerDetails?.deliveryAddresses).find(\r\n                addr => isEqualNumber(addr?.id, editValues?.shipingAddressId)\r\n            ) ?? null;\r\n\r\n            if (shippingAddress) {\r\n\r\n                setRetailerDeliveryAddress({\r\n                    deliveryName: shippingAddress?.deliveryName,\r\n                    phoneNumber: shippingAddress?.phoneNumber,\r\n                    cityName: shippingAddress?.cityName,\r\n                    deliveryAddress: shippingAddress?.deliveryAddress,\r\n                    gstNumber: shippingAddress?.gstNumber,\r\n                    stateName: shippingAddress?.stateName,\r\n                    id: shippingAddress.id\r\n                })\r\n            }\r\n\r\n        }\r\n    }, [editValues, baseData.retailers])\r\n\r\n    // Expence Info\r\n\r\n    const invExpencesTotal = useMemo(() => {\r\n        return toArray(invoiceExpences).reduce((acc, exp) => Addition(acc, exp?.Expence_Value), 0)\r\n    }, [invoiceExpences]);\r\n\r\n    const Total_Invoice_value = useMemo(() => {\r\n        const invValue = invoiceProducts.reduce((acc, item) => {\r\n            const Amount = RoundNumber(item?.Amount);\r\n\r\n            if (isNotTaxableBill) return Addition(acc, Amount);\r\n\r\n            const product = findProductDetails(baseData.products, item.Item_Id);\r\n            const gstPercentage = IS_IGST ? product.Igst_P : product.Gst_P;\r\n\r\n            if (isInclusive) {\r\n                return Addition(acc, calculateGSTDetails(Amount, gstPercentage, 'remove').with_tax);\r\n            } else {\r\n                return Addition(acc, calculateGSTDetails(Amount, gstPercentage, 'add').with_tax);\r\n            }\r\n        }, 0);\r\n\r\n        return Addition(invValue, invExpencesTotal);\r\n    }, [invoiceProducts, isNotTaxableBill, baseData.products, IS_IGST, isInclusive, invExpencesTotal])\r\n\r\n    const taxSplitUp = useMemo(() => {\r\n        if (!invoiceProducts || invoiceProducts.length === 0) return {};\r\n\r\n        let totalTaxable = 0;\r\n        let totalTax = 0;\r\n\r\n        invoiceProducts.forEach(item => {\r\n            const Amount = RoundNumber(item?.Amount || 0);\r\n\r\n            if (isNotTaxableBill) {\r\n                totalTaxable = Addition(totalTaxable, Amount);\r\n                return;\r\n            }\r\n\r\n            const product = findProductDetails(baseData.products, item.Item_Id);\r\n            const gstPercentage = isEqualNumber(IS_IGST, 1) ? product.Igst_P : product.Gst_P;\r\n\r\n            const taxInfo = calculateGSTDetails(Amount, gstPercentage, isInclusive ? 'remove' : 'add');\r\n\r\n            totalTaxable = Addition(totalTaxable, parseFloat(taxInfo.without_tax));\r\n            totalTax = Addition(totalTax, parseFloat(taxInfo.tax_amount));\r\n        });\r\n\r\n        const totalWithTax = Addition(totalTaxable, totalTax);\r\n        const totalWithExpenses = Addition(totalWithTax, invExpencesTotal);\r\n        const roundedTotal = Math.round(totalWithExpenses);\r\n        const roundOff = RoundNumber(roundedTotal - totalWithExpenses);\r\n\r\n        const cgst = isEqualNumber(IS_IGST, 1) ? 0 : RoundNumber(totalTax / 2);\r\n        const sgst = isEqualNumber(IS_IGST, 1) ? 0 : RoundNumber(totalTax / 2);\r\n        const igst = isEqualNumber(IS_IGST, 1) ? RoundNumber(totalTax) : 0;\r\n\r\n        return {\r\n            totalTaxable: RoundNumber(totalTaxable),\r\n            totalTax: RoundNumber(totalTax),\r\n            cgst,\r\n            sgst,\r\n            igst,\r\n            roundOff,\r\n            invoiceTotal: roundedTotal\r\n        };\r\n\r\n    }, [invoiceProducts, baseData.products, IS_IGST, isNotTaxableBill, isInclusive, invExpencesTotal]);\r\n\r\n    // Update invoiceInfo when roundOff changes\r\n    useEffect(() => {\r\n        if (taxSplitUp.roundOff !== undefined && taxSplitUp.roundOff !== invoiceInfo.Round_off) {\r\n            setInvoiceInfo(pre => ({ ...pre, Round_off: taxSplitUp.roundOff }));\r\n        }\r\n    }, [taxSplitUp.roundOff]);\r\n\r\n    const saveSalesInvoice = () => {\r\n        if (loadingOn) loadingOn();\r\n\r\n        fetchLink({\r\n            address: `sales/salesInvoice`,\r\n            method: checkIsNumber(invoiceInfo?.Do_Id) ? 'PUT' : 'POST',\r\n            bodyData: {\r\n                ...invoiceInfo,\r\n                deliveryAddressDetails: {\r\n                    delivery_id: retailerDeliveryAddress?.id,\r\n                    deliveryName: retailerDeliveryAddress?.deliveryName,\r\n                    phoneNumber: retailerDeliveryAddress?.phoneNumber,\r\n                    cityName: retailerDeliveryAddress?.cityName,\r\n                    deliveryAddress: retailerDeliveryAddress?.deliveryAddress,\r\n                    gstNumber: retailerDeliveryAddress?.gstNumber,\r\n                    stateName: retailerDeliveryAddress?.stateName\r\n                },\r\n                shipingAddressDetails: {\r\n                    delivery_id: retailerShippingAddress?.id,\r\n                    deliveryName: retailerShippingAddress?.deliveryName,\r\n                    phoneNumber: retailerShippingAddress?.phoneNumber,\r\n                    cityName: retailerShippingAddress?.cityName,\r\n                    deliveryAddress: retailerShippingAddress?.deliveryAddress,\r\n                    gstNumber: retailerShippingAddress?.gstNumber,\r\n                    stateName: retailerShippingAddress?.stateName\r\n                },\r\n                Product_Array: invoiceProducts,\r\n                Staffs_Array: staffArray,\r\n                Expence_Array: invoiceExpences\r\n            }\r\n        }).then(data => {\r\n            if (data.success) {\r\n                const savedDoId = data.others?.Do_Id;\r\n\r\n                toast.success(data.message);\r\n\r\n                // Open print dialog with the saved Do_Id\r\n                setPrintDialog({\r\n                    open: true,\r\n                    Do_Id: savedDoId\r\n                });\r\n\r\n                // Clear form after successful submission (optional)\r\n                // clearValues();\r\n            } else {\r\n                toast.warn(data.message);\r\n            }\r\n        }).catch(e => {\r\n            console.error(e);\r\n            toast.error(\"Failed to save invoice\");\r\n        }).finally(() => {\r\n            if (loadingOff) loadingOff();\r\n        })\r\n    }\r\n\r\n    //     }).then(data => {\r\n    //         if (data.success) {\r\n    //             clearValues();\r\n    //             toast.success(data.message);\r\n    //             navigate('/erp/sales/invoice')\r\n    //         } else {\r\n    //             toast.warn(data.message)\r\n    //         }\r\n    //     }).catch(e => console.error(e)).finally(() => {\r\n    //         if (loadingOff) loadingOff();\r\n    //     })\r\n    // }\r\n\r\n    return (\r\n        <>\r\n\r\n            <AddProductForm\r\n                orderProducts={invoiceProducts}\r\n                setOrderProducts={setInvoiceProduct}\r\n                open={dialog.addProductDialog}\r\n                onClose={() => {\r\n                    setDialog(pre => ({ ...pre, addProductDialog: false }))\r\n                    setSelectedProductToEdit(null);\r\n                }}\r\n                products={baseData.products}\r\n                brands={baseData.brand}\r\n                uom={baseData.uom}\r\n                godowns={baseData.godown}\r\n                GST_Inclusive={invoiceInfo.GST_Inclusive}\r\n                IS_IGST={IS_IGST}\r\n                editValues={selectedProductToEdit}\r\n                initialValue={{ ...salesInvoiceDetailsInfo, Pre_Id: invoiceInfo.So_No }}\r\n                batchDetails={baseData.batchDetails}\r\n            />\r\n\r\n            <Card>\r\n                <div className='d-flex flex-wrap align-items-center border-bottom py-2 px-3'>\r\n                    <span className=\"flex-grow-1 fa-16 fw-bold\">Sales Invoice</span>\r\n                    <span>\r\n                        <Button type='button' onClick={() => {\r\n                            if (window.history.length > 1) {\r\n                                navigate(-1);\r\n                            } else {\r\n                                navigate('/erp/sales/invoice');\r\n                            }\r\n                        }}>Cancel</Button>\r\n                        <Button onClick={() => saveSalesInvoice()} variant=\"contained\">submit</Button>\r\n                    </span>\r\n                </div>\r\n                <CardContent>\r\n                    <div className=\"row p-0\">\r\n                        {/* staff info */}\r\n                        <div className=\"col-xxl-3 col-lg-4 col-md-5 p-2\">\r\n                            <div className=\"border p-2\" style={{ minHeight: '30vh', height: '100%' }}>\r\n                                <InvolvedStaffs\r\n                                    StaffArray={staffArray}\r\n                                    setStaffArray={setStaffArray}\r\n                                    costCenter={baseData.staff}\r\n                                    costCategory={baseData.staffType}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* general info */}\r\n                        <div className=\"col-xxl-9 col-lg-8 col-md-7 py-2 px-0\">\r\n                            <div className=\"border px-3 py-1\" style={{ minHeight: '30vh', height: '100%' }}>\r\n                                <ManageSalesInvoiceGeneralInfo\r\n                                    invoiceInfo={invoiceInfo}\r\n                                    setInvoiceInfo={setInvoiceInfo}\r\n                                    retailers={baseData.retailers}\r\n                                    branches={baseData.branch}\r\n                                    voucherType={baseData.voucherType}\r\n                                    stockItemLedgerName={baseData.stockItemLedgerName}\r\n                                    onChangeRetailer={() => {\r\n                                        setInvoiceProduct([]);\r\n                                        setInvoiceExpences([]);\r\n                                    }}\r\n                                    retailerDeliveryAddress={retailerDeliveryAddress}\r\n                                    setRetailerDeliveryAddress={setRetailerDeliveryAddress}\r\n                                    shippingAddress={retailerShippingAddress}\r\n                                    setShippingAddress={setRetailerShippingAddress}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* product details */}\r\n                    <FilterableTable\r\n                        title=\"Items\"\r\n                        headerFontSizePx={13}\r\n                        bodyFontSizePx={13}\r\n                        EnableSerialNumber\r\n                        disablePagination\r\n                        ButtonArea={\r\n                            <>\r\n                                <Button\r\n                                    onClick={() => {\r\n                                        setSelectedProductToEdit(null);\r\n                                        setDialog(pre => ({ ...pre, addProductDialog: true }));\r\n                                    }}\r\n                                    sx={{ ml: 1 }}\r\n                                    variant='outlined'\r\n                                    type=\"button\"\r\n                                    startIcon={<Add />}\r\n                                    disabled={\r\n                                        !checkIsNumber(invoiceInfo.Retailer_Id)\r\n                                        || (invoiceProducts.length > 0\r\n                                            && checkIsNumber(invoiceInfo.So_No))\r\n                                    }\r\n                                >Add Product</Button>\r\n\r\n\r\n                                <AddProductsInSalesInvoice\r\n                                    loadingOn={loadingOn}\r\n                                    loadingOff={loadingOff}\r\n                                    open={dialog.importFromSaleOrder}\r\n                                    onClose={() => setDialog(pre => ({ ...pre, importFromSaleOrder: false }))}\r\n                                    retailer={invoiceInfo?.Retailer_Id}\r\n                                    selectedItems={invoiceProducts}\r\n                                    setSelectedItems={setInvoiceProduct}\r\n                                    staffArray={staffArray}\r\n                                    setStaffArray={setStaffArray}\r\n                                    products={baseData.products}\r\n                                    GST_Inclusive={invoiceInfo.GST_Inclusive}\r\n                                    IS_IGST={IS_IGST}\r\n                                    invoiceInfo={invoiceInfo}\r\n                                    setInvoiceInfo={setInvoiceInfo}\r\n                                    godowns={baseData.godown}\r\n                                    stockInGodown={baseData.stockInGodown}\r\n                                >\r\n                                    <Button\r\n                                        onClick={() => setDialog(pre => ({ ...pre, importFromSaleOrder: true }))}\r\n                                        disabled={\r\n                                            !checkIsNumber(invoiceInfo.Retailer_Id)\r\n                                            || (\r\n                                                invoiceProducts.length > 0\r\n                                                && !checkIsNumber(invoiceInfo.So_No)\r\n                                            )\r\n                                        }\r\n                                        sx={{ ml: 1 }}\r\n                                        type=\"button\"\r\n                                        variant='outlined'\r\n                                        startIcon={<ReceiptLong />}\r\n                                    >Choose Sale Order</Button>\r\n                                </AddProductsInSalesInvoice>\r\n                            </>\r\n                        }\r\n                        dataArray={[\r\n                            ...invoiceProducts,\r\n                            ...Array.from({\r\n                                length: dummyRowCount > 0 ? dummyRowCount : 0\r\n                            }).map(d => salesInvoiceDetailsInfo)\r\n                        ]}\r\n                        columns={[\r\n                            createCol('Item_Name', 'string'),\r\n                            createCol('Batch_Name', 'string'),\r\n                            createCol('Bill_Qty', 'number'),\r\n                            createCol('Act_Qty', 'number'),\r\n                            createCol('Item_Rate', 'number'),\r\n                            {\r\n                                isVisible: 1,\r\n                                ColumnHeader: 'Tax',\r\n                                isCustomCell: true,\r\n                                Cell: ({ row }) => {\r\n                                    const { Cgst = 0, Sgst = 0, Igst = 0, Cgst_Amo = 0, Sgst_Amo = 0, Igst_Amo = 0 } = row;\r\n                                    const taxPercentage = IS_IGST ? Igst : Addition(Cgst, Sgst);\r\n                                    const taxAmount = IS_IGST ? Igst_Amo : Addition(Cgst_Amo, Sgst_Amo);\r\n\r\n                                    return !checkIsNumber(row?.Item_Id) ? '' : `${taxAmount} - (${taxPercentage} %)`\r\n                                }\r\n                            },\r\n                            {\r\n                                isVisible: 1,\r\n                                ColumnHeader: 'Godown',\r\n                                isCustomCell: true,\r\n                                Cell: ({ row }) => baseData.godown.find(\r\n                                    godown => isEqualNumber(godown.Godown_Id, row?.GoDown_Id)\r\n                                )?.Godown_Name ?? ''\r\n                            },\r\n                            createCol('Amount', 'number'),\r\n                            {\r\n                                isCustomCell: true,\r\n                                Cell: ({ row }) => {\r\n                                    return (\r\n                                        <>\r\n                                            <IconButton\r\n                                                onClick={() => {\r\n                                                    setSelectedProductToEdit(row);\r\n                                                    setDialog(pre => ({ ...pre, addProductDialog: true }));\r\n                                                }}\r\n                                                size=\"small\"\r\n                                                type=\"button\"\r\n                                                disabled={!checkIsNumber(row?.Item_Id)}\r\n                                            >\r\n                                                <Edit />\r\n                                            </IconButton>\r\n                                            <IconButton\r\n                                                size=\"small\"\r\n                                                type=\"button\"\r\n                                                onClick={() => setInvoiceProduct(\r\n                                                    pre => pre.filter(obj => !isEqualNumber(obj.Item_Id, row.Item_Id))\r\n                                                )}\r\n                                                color='error'\r\n                                                disabled={!checkIsNumber(row?.Item_Id)}\r\n                                            >\r\n                                                <Delete />\r\n                                            </IconButton>\r\n                                        </>\r\n                                    )\r\n                                },\r\n                                ColumnHeader: 'Action',\r\n                                isVisible: 1,\r\n                            },\r\n                        ]}\r\n                    />\r\n\r\n                    <Dialog\r\n                        open={printDialog.open}\r\n                        maxWidth=\"lg\"\r\n                        fullWidth\r\n                        scroll=\"paper\"\r\n                    >\r\n                        <DialogTitle>\r\n                            Print Invoice #{printDialog.Do_Id}\r\n                            <IconButton\r\n                                // onClick={() => setPrintDialog({ open: false, Do_Id: null })}\r\n                                onClick={() => {\r\n                                    setPrintDialog({ open: false, Do_Id: null });\r\n                                    clearValues();\r\n                                    navigate('/erp/sales/invoice');\r\n                                }}\r\n\r\n                                style={{ position: 'absolute', right: 8, top: 8 }}\r\n                            >\r\n                                <Close />\r\n                            </IconButton>\r\n                        </DialogTitle>\r\n                        <DialogContent>\r\n                            {printDialog.Do_Id && (\r\n                                <InvoiceTemplate\r\n                                    Do_Id={printDialog.Do_Id}\r\n                                    loadingOn={loadingOn}\r\n                                    loadingOff={loadingOff}\r\n                                />\r\n                            )}\r\n                        </DialogContent>\r\n                        <DialogActions>\r\n                            <Button\r\n                                onClick={() => {\r\n                                    setPrintDialog({ open: false, Do_Id: null });\r\n                                    clearValues();\r\n                                    navigate('/erp/sales/invoice');\r\n                                }}\r\n                            >\r\n                                Close and Go to Listing\r\n                            </Button>\r\n                        </DialogActions>\r\n                    </Dialog>\r\n\r\n                    <br />\r\n\r\n                    <ExpencesOfSalesInvoice\r\n                        invoiceExpences={invoiceExpences}\r\n                        setInvoiceExpences={setInvoiceExpences}\r\n                        expenceMaster={baseData.expence}\r\n                        IS_IGST={IS_IGST}\r\n                        taxType={taxType}\r\n                        Total_Invoice_value={Total_Invoice_value}\r\n                    />\r\n\r\n                    <br />\r\n\r\n                    <SalesInvoiceTaxDetails\r\n                        invoiceProducts={invoiceProducts}\r\n                        invoiceExpences={invoiceExpences}\r\n                        isNotTaxableBill={isNotTaxableBill}\r\n                        isInclusive={isInclusive}\r\n                        IS_IGST={IS_IGST}\r\n                        products={baseData.products}\r\n                        invoiceInfo={invoiceInfo}\r\n                        setInvoiceInfo={setInvoiceInfo}\r\n                        invExpencesTotal={invExpencesTotal}\r\n                        Total_Invoice_value={Total_Invoice_value}\r\n                        taxSplitUp={taxSplitUp}\r\n                    />\r\n                </CardContent>\r\n                <CardActions className=\"d-flex justify-content-end\">\r\n                    <Button type='button' onClick={() => {\r\n                        if (window.history.length > 1) {\r\n                            navigate(-1);\r\n                        } else {\r\n                            navigate('/erp/sales/invoice');\r\n                        }\r\n                    }}>Cancel</Button>\r\n                    <Button onClick={() => saveSalesInvoice()} variant=\"contained\">submit</Button>\r\n                </CardActions>\r\n            </Card>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CreateSalesInvoice;"],"names":["createSvgIcon","_jsx","d","getCardActionsUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","CardActionsRoot","styled","name","overridesResolver","props","styles","ownerState","root","disableSpacing","spacing","_ref","_extends","display","alignItems","padding","marginLeft","React","inProps","ref","useDefaultProps","className","other","_objectWithoutPropertiesLoose","classes","slots","composeClasses","useUtilityClasses","clsx","StaffArray","setStaffArray","costCenter","costCategory","_jsxs","_Fragment","children","Button","variant","color","type","onClick","pre","_objectSpread","salesInvoiceStaffInfo","toArray","map","row","index","Select","value","Emp_Id","label","Emp_Name","onChange","e","prev","staffRow","ind","isEqualNumber","staff","find","c","Cost_Center_Id","Emp_Type_Id","checkIsNumber","Number","User_Type","options","filter","fil","some","st","Cost_Center_Name","customSelectStyles","isSearchable","placeholder","filterOption","reactSelectFilterLogic","style","maxWidth","minWidth","target","sti","Cost_Category_Id","Cost_Category","IconButton","_","filIndex","size","Delete","validStockValue","Item_Id","Godown_Id","stockInGodown","_toArray$find","godownStockValue","godownItem","Product_Id","Act_Bal_Qty","toNumber","_findProductDetails","_godowns$find","orderProducts","setOrderProducts","open","onClose","products","brands","uom","godowns","GST_Inclusive","IS_IGST","editValues","initialValue","batchDetails","productDetails","setProductDetails","useState","isInclusive","isNotTaxableBill","stockInGodowns","setStockInGodowns","useEffect","isValidObject","Object","fromEntries","entries","_ref2","key","findProductDetails","productid","_products$find","obj","closeDialog","fetchLink","address","concat","then","data","success","sort","a","b","String","stock_item_name","localeCompare","Dialog","fullWidth","DialogTitle","onSubmit","preventDefault","ordered","_ref3","productMaster","gstPercentage","Igst_P","Gst_P","isTaxable","Bill_Qty","Item_Rate","Amount","taxType","itemRateGst","calculateGSTDetails","gstInfo","cgstPer","cgst_per","igstPer","igst_per","Cgst_Amo","cgst_amount","Igst_Amo","igst_amount","Product_Name","base_amount","with_tax","toast","warn","DialogContent","BrandID","Brand","isDisabled","Brand_Name","menuPortalTarget","document","body","maxMenuHeight","GroupID","Group","pro","reduce","acc","grp","Product_Group","push","Pro_Group","hasOwn","RequiredStar","Pre_Id","productInfo","_productInfo$Pro_Grou","_productInfo$Product_","_productInfo$Brand_Na","_productInfo$Brand","_productInfo$Item_Rat","_productInfo$UOM_Id","_productInfo$Units","GoDown_Id","Unit_Id","UOM_Id","Unit_Name","Units","HSN_Code","findIndex","required","g","Godown_Name","onInput","onlynum","disabled","Multiplication","Division","min","Act_Qty","UOM","selectedIndex","text","o","i","Batch_Name","bat","item_id","godown_id","pendingQuantity","batch","DialogActions","startIcon","ClearAll","storage","getSessionUser","user","_arr$find","arguments","length","undefined","loadingOn","loadingOff","navigate","useNavigate","useLocation","state","baseData","setBaseData","branch","retailers","voucherType","staffType","brand","godown","expence","stockItemLedgerName","dialog","setDialog","addProductDialog","importFromSaleOrder","invoiceInfo","setInvoiceInfo","salesInvoiceGeneralInfo","retailerDeliveryAddress","setRetailerDeliveryAddress","retailerDeliveryAddressInfo","retailerShippingAddress","setRetailerShippingAddress","invoiceProducts","setInvoiceProduct","invoiceExpences","setInvoiceExpences","staffArray","selectedProductToEdit","setSelectedProductToEdit","dummyRowCount","printDialog","setPrintDialog","Do_Id","async","branchResponse","productsResponse","retailerResponse","voucherTypeResponse","uomResponse","staffResponse","staffCategory","godownLocationsResponse","expenceResponse","stockItemLedgerNameResponse","batchDetailsResponse","Promise","all","Company_id","branchData","BranchName","productsData","retailersData","Retailer_Name","Voucher_Type","uomData","staffData","staffCategoryData","godownLocations","expencesMaster","Account_Name","Stock_Item_Ledger_Name","getUniqueData","exp","stringCompare","Type","Id","Acc_Id","Expence_Name","percentageValue","console","error","fetchData","clearValues","item","Igst","Cgst","Sgst","Expence_Value","taxPercentage","Addition","taxAmount","Sgst_Amo","sgst_amount","Array","isArray","Products_List","Expence_Array","Staffs_Array","_editValues$key","ISOString","salesInvoiceDetailsInfo","_ref4","_item$key","salesInvoiceExpencesInfo","_ref5","_item$key2","_ref6","_item$key3","Retailer_Id","_toArray$find2","retailerDetails","ret","billingAddress","deliveryAddresses","addr","id","deliveryAddressId","deliveryName","phoneNumber","cityName","deliveryAddress","gstNumber","stateName","shippingAddress","shipingAddressId","invExpencesTotal","useMemo","Total_Invoice_value","invValue","RoundNumber","product","taxSplitUp","totalTaxable","totalTax","forEach","taxInfo","parseFloat","without_tax","tax_amount","totalWithTax","totalWithExpenses","roundedTotal","Math","round","roundOff","cgst","sgst","igst","invoiceTotal","Round_off","saveSalesInvoice","method","bodyData","deliveryAddressDetails","delivery_id","shipingAddressDetails","Product_Array","_data$others","savedDoId","others","message","catch","finally","AddProductForm","So_No","Card","window","history","CardContent","minHeight","height","InvolvedStaffs","ManageSalesInvoiceGeneralInfo","branches","onChangeRetailer","setShippingAddress","FilterableTable","title","headerFontSizePx","bodyFontSizePx","EnableSerialNumber","disablePagination","ButtonArea","sx","ml","Add","AddProductsInSalesInvoice","retailer","selectedItems","setSelectedItems","ReceiptLong","dataArray","from","columns","createCol","isVisible","ColumnHeader","isCustomCell","Cell","_ref7","_ref8","_baseData$godown$find","_baseData$godown$find2","_ref9","Edit","scroll","position","right","top","Close","InvoiceTemplate","ExpencesOfSalesInvoice","expenceMaster","SalesInvoiceTaxDetails","CardActions"],"sourceRoot":""}