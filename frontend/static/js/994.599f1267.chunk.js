"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[994,2110,9729],{12110:(e,t,o)=>{o.d(t,{A:()=>j});var l=o(58168),n=o(98587),i=o(65043),r=o(58387),s=o(68606),a=o(34535),d=o(6431),c=o(63336),u=o(57056),x=o(32400);function v(e){return(0,x.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var h=o(70579);const p=["className","raised"],m=(0,a.Ay)(c.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),j=i.forwardRef(function(e,t){const o=(0,d.b)({props:e,name:"MuiCard"}),{className:i,raised:a=!1}=o,c=(0,n.A)(o,p),u=(0,l.A)({},o,{raised:a}),x=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},v,t)})(u);return(0,h.jsx)(m,(0,l.A)({className:(0,r.A)(x.root,i),elevation:a?8:void 0,ref:t,ownerState:u},c))})},26494:(e,t,o)=>{o.d(t,{A:()=>m});var l=o(58168),n=o(98587),i=o(65043),r=o(58387),s=o(68606),a=o(34535),d=o(6431),c=o(57056),u=o(32400);function x(e){return(0,u.Ay)("MuiCardContent",e)}(0,c.A)("MuiCardContent",["root"]);var v=o(70579);const h=["className","component"],p=(0,a.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),m=i.forwardRef(function(e,t){const o=(0,d.b)({props:e,name:"MuiCardContent"}),{className:i,component:a="div"}=o,c=(0,n.A)(o,h),u=(0,l.A)({},o,{component:a}),m=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},x,t)})(u);return(0,v.jsx)(p,(0,l.A)({as:a,className:(0,r.A)(m.root,i),ownerState:u,ref:t},c))})},48920:(e,t,o)=>{o.d(t,{A:()=>i});var l=o(59662),n=o(70579);const i=(0,l.A)((0,n.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove")},70141:(e,t,o)=>{o.d(t,{A:()=>i});var l=o(59662),n=o(70579);const i=(0,l.A)((0,n.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},70994:(e,t,o)=>{o.r(t),o.d(t,{default:()=>v});var l=o(89379),n=o(65043),i=o(70141),r=o(48920),s=o(12110),a=o(26494),d=o(97707),c=o(65074),u=o(70579);const x=(e,t)=>{let o=0;return Array.isArray(e)&&e.forEach(e=>{o+=Number(e[t])}),o},v=()=>{const e=JSON.parse(localStorage.getItem("user")),[t,o]=(0,n.useState)([]),[v,h]=(0,n.useState)({Report_Type:2,Fromdate:(0,d.Gz)(),Todate:(0,d.ny)(),Report:"PENDING PURCHASE ORDER"});(0,n.useEffect)(()=>{o([]),null!==e&&void 0!==e&&e.Company_id&&(0,c.z)({address:"reports/PurchaseOrderReportCard?Report_Type=".concat(v.Report_Type,"&Fromdate=").concat(v.Fromdate,"&Todate=").concat(v.Todate),headers:{Db:null===e||void 0===e?void 0:e.Company_id}}).then(e=>{e.success&&(e.data.sort((e,t)=>new Date(t.po_date)-new Date(e.po_date)),o(e.data))}).catch(e=>console.error(e))},[v.Report_Type,v.Fromdate,v.Todate]);const p=e=>{var t,o,l,s;let{rowData:a}=e;const[d,c]=(0,n.useState)(!1),x=null===a||void 0===a||null===(t=a.product_details)||void 0===t?void 0:t.reduce((e,t)=>{var o;return e+(null===t||void 0===t||null===(o=t.product_details_1)||void 0===o?void 0:o.reduce((e,t)=>e+(null===t||void 0===t?void 0:t.bill_qty),0))},0),v=null===a||void 0===a||null===(o=a.product_details)||void 0===o?void 0:o.reduce((e,t)=>{var o;return e+(null===t||void 0===t||null===(o=t.product_details_1)||void 0===o?void 0:o.reduce((e,t)=>e+(null===t||void 0===t?void 0:t.amount),0))},0);return(null===a||void 0===a||null===(l=a.product_details)||void 0===l?void 0:l.length)>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"fa-12",children:(0,u.jsx)("button",{onClick:()=>c(!d),className:"icon-btn",children:d?(0,u.jsx)(r.A,{sx:{fontSize:"inherit"}}):(0,u.jsx)(i.A,{sx:{fontSize:"inherit"}})})}),(0,u.jsx)("td",{className:"text-success fa-12 fw-bold bg-light",children:null===a||void 0===a?void 0:a.Stock_Group}),(0,u.jsx)("td",{className:"text-success fa-12",children:"-"}),(0,u.jsx)("td",{className:"text-success fa-12 bg-light fw-bold",children:null===(s=x/1e3)||void 0===s?void 0:s.toLocaleString("en-IN",{maximumFractionDigits:2})}),(0,u.jsx)("td",{className:"text-success fa-12 fw-bold",children:(v/x).toLocaleString("en-IN",{maximumFractionDigits:2})}),(0,u.jsx)("td",{className:"text-success fa-12 bg-light fw-bold",children:null===v||void 0===v?void 0:v.toLocaleString("en-IN")})]}),d&&a.product_details.map((e,t)=>(0,u.jsx)(m,{subRowData:e},t))]})},m=e=>{var t,o;let{subRowData:l}=e;const[s,a]=(0,n.useState)(!1),d=x(null===l||void 0===l?void 0:l.product_details_1,"bill_qty"),c=x(null===l||void 0===l?void 0:l.product_details_1,"amount");return(null===l||void 0===l||null===(t=l.product_details_1)||void 0===t?void 0:t.length)>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{style:{fontSize:"12px"},className:"text-primary"}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"text-primary bg-light",children:(0,u.jsx)("button",{onClick:()=>a(!s),className:"icon-btn",children:s?(0,u.jsx)(r.A,{sx:{fontSize:"inherit"}}):(0,u.jsx)(i.A,{sx:{fontSize:"inherit"}})})}),(0,u.jsxs)("td",{style:{fontSize:"12px"},className:"text-primary",children:[null===l||void 0===l?void 0:l.Item_Name_Modified," (Sum)"]}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"text-primary bg-light fw-bold",children:(d/1e3).toLocaleString("en-IN",{maximumFractionDigits:2})}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"text-primary fw-bold",children:(Number(c)/Number(d)).toLocaleString("en-IN",{maximumFractionDigits:2})}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"text-primary bg-light fw-bold",children:c.toLocaleString("en-IN",{maximumFractionDigits:2})})]}),s&&(null===l||void 0===l||null===(o=l.product_details_1)||void 0===o?void 0:o.map((e,t)=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{style:{fontSize:"12px"},children:null===e||void 0===e?void 0:e.po_no}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"bg-light",children:new Date(null===e||void 0===e?void 0:e.po_date).toLocaleDateString("en-IN")}),(0,u.jsx)("td",{style:{fontSize:"12px"},children:null===e||void 0===e?void 0:e.ledger_name}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"bg-light fw-bold",children:(null===e||void 0===e?void 0:e.bill_qty.toLocaleString("en-IN"))+" "+(null===e||void 0===e?void 0:e.bill_unit)}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:" fw-bold",children:null===e||void 0===e?void 0:e.item_rate.toLocaleString("en-IN")}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"bg-light fw-bold",children:null===e||void 0===e?void 0:e.amount.toLocaleString("en-IN")})]},t)))]})},j=e=>{var t,o;let{row:l}=e;const[s,a]=(0,n.useState)(!1);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(0,u.jsx)("button",{onClick:()=>a(!s),className:"icon-btn",children:s?(0,u.jsx)(r.A,{sx:{fontSize:"inherit"}}):(0,u.jsx)(i.A,{sx:{fontSize:"inherit"}})})}),(0,u.jsx)("td",{style:{fontSize:"12px"},children:null===l||void 0===l?void 0:l.ledger_name}),(0,u.jsx)("td",{style:{fontSize:"12px"},children:null===l||void 0===l||null===(t=l.Order_details)||void 0===t?void 0:t.length}),(0,u.jsx)("td",{style:{fontSize:"12px"},className:"text-primary fw-bold",children:x(null===l||void 0===l?void 0:l.Order_details,"total_invoice_value").toLocaleString("en-IN")})]}),s&&(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:4,className:"overflow-scroll",children:(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{style:{fontSize:"14px"},children:"PO No"}),(0,u.jsx)("th",{style:{fontSize:"14px"},children:"Date"}),(0,u.jsx)("th",{style:{fontSize:"14px"},children:"Order Value"})]})}),(0,u.jsx)("tbody",{children:null===l||void 0===l||null===(o=l.Order_details)||void 0===o?void 0:o.map((e,t)=>{var o;return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{style:{fontSize:"12px"},children:null===e||void 0===e?void 0:e.po_no}),(0,u.jsx)("td",{style:{fontSize:"12px"},children:(null===e||void 0===e?void 0:e.po_date)&&new Date(e.po_date).toLocaleDateString("en-IN")}),(0,u.jsx)("td",{style:{fontSize:"12px"},children:null===e||void 0===e||null===(o=e.total_invoice_value)||void 0===o?void 0:o.toLocaleString("en-IN")})]},t)})})]})})})]})},f=()=>{let e=0,o=0;return t.forEach(t=>{var l;null===t||void 0===t||null===(l=t.product_details)||void 0===l||l.forEach(t=>{null===t||void 0===t||t.product_details_1.forEach(t=>{e+=Number(t.bill_qty),o+=Number(t.amount)})})}),{amount:parseInt(o).toLocaleString("en-IN"),tonage:parseInt(e).toLocaleString("en-IN")}};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(s.A,{children:[(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center px-3 py-2",style:{backgroundColor:"#eae0cc"},children:[(0,u.jsxs)("div",{className:"d-flex flex-column justify-content-center fw-bold text-dark",children:[e.Company_Name,(0,u.jsxs)("span",{style:{fontSize:"11px"},children:["( ",v.Report," )"]})]}),(0,u.jsxs)("select",{className:"cus-inpt w-auto rounded-5 border-0",onChange:e=>{const t=e.target.selectedIndex,o=e.target.options[t].text;h((0,l.A)((0,l.A)({},v),{},{Report_Type:Number(e.target.value),Report:o}))},value:v.Report_Type,children:[(0,u.jsx)("option",{value:2,children:"PENDING PURCHASE ORDER"}),(0,u.jsx)("option",{value:0,children:"PURCHASE ORDER"}),(0,u.jsx)("option",{value:1,children:"PURCHASE"}),(0,u.jsx)("option",{value:3,children:"ORDER VALUE"})]})]}),(0,u.jsxs)("div",{className:"px-3 py-2 d-flex justify-content-between align-items-center",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("input",{type:"date",className:"cus-inpt py-1 w-auto rounded-5",value:v.Fromdate,onChange:e=>{h((0,l.A)((0,l.A)({},v),{},{Fromdate:e.target.value}))}}),(0,u.jsx)("input",{type:"date",className:"cus-inpt py-1 w-auto rounded-5",value:v.Todate,onChange:e=>{h((0,l.A)((0,l.A)({},v),{},{Todate:e.target.value}))}})]}),(0,u.jsx)("p",{className:"text-primary fw-bold fa-14 mb-0",children:3!==Number(v.Report_Type)?" ( "+f().tonage+" ) - ( "+f().amount+" )":" "+(()=>{let e=0;return t.forEach(t=>{var o;null===t||void 0===t||null===(o=t.Order_details)||void 0===o||o.forEach(t=>{e+=Number(null===t||void 0===t?void 0:t.total_invoice_value)})}),parseInt(e).toLocaleString("en-IN")})()})]}),(0,u.jsx)(a.A,{style:{maxHeight:"75vh"},className:"overflow-auto pt-0",children:3!==Number(v.Report_Type)?(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:["-","Stock Group","Item","Tonnage","Rate","Value (\u20b9)"].map((e,t)=>(0,u.jsx)("th",{className:"tble-hed-stick fa-13 border",children:e},t))})}),(0,u.jsx)("tbody",{children:t.map((e,t)=>(0,u.jsx)(p,{rowData:e},t))})]}):(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:["SNo","Ledger","Order(s)","Amount"].map((e,t)=>(0,u.jsx)("th",{className:"tble-hed-stick fa-14 border",children:e},t))})}),(0,u.jsx)("tbody",{children:t.map((e,t)=>(0,u.jsx)(j,{row:e},t))})]})})]})})}}}]);
//# sourceMappingURL=994.599f1267.chunk.js.map