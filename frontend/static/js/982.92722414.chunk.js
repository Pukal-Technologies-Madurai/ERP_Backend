"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[982],{29824:(e,t,n)=>{n.r(t),n.d(t,{default:()=>se});var a=n(89379),l=n(65043),o=n(22520),s=n(65074),i=n(48471),r=n(81e3),d=n(85865),c=n(39336),u=n(67254),m=n(11906),p=n(57972),v=n(74605),h=n(14256),g=n(53193),f=n(79190),x=n(72221),A=n(32143),y=n(12412),j=n(51962),b=n(67784),C=n(77739),_=n(17392),D=n(83462),S=n(26600),I=n(35316),N=n(29347),w=n(6520),T=n(20656),F=n(63406),k=n(12249),P=n(5793),R=n(30513),E=n(15626),O=n(8171),z=n(59383),L=n(79484),M=n(91036),W=n(93141),G=n(70579);const B=(e,t)=>{if(!Array.isArray(e))return"";const n=e.find(e=>String((null===e||void 0===e?void 0:e.empType)||"").toLowerCase()===String(t).toLowerCase());return(null===n||void 0===n?void 0:n.empName)||""},H=e=>{let{Do_Id:t,Do_Ids:n=[],loadingOn:a,loadingOff:i,isCombinedPrint:r=!1}=e;const[d,c]=(0,l.useState)([]),u=(0,l.useRef)(null),p=Array.isArray(n)&&n.length>0?n:t?[t]:[];(0,l.useEffect)(()=>{if(0===p.length)return;null===a||void 0===a||a();(async()=>{try{const e=p.map(e=>(0,s.z)({address:"sales/salesInvoice/printOuts/katchath?Do_Id=".concat(e),loadingOn:()=>{},loadingOff:()=>{}})),t=(await Promise.all(e)).filter(e=>{var t;return e.success&&(null===(t=e.data)||void 0===t?void 0:t[0])}).map(e=>e.data[0]);c(t)}catch(e){console.error("Error fetching katchath data:",e)}finally{null===i||void 0===i||i()}})()},[JSON.stringify(p)]);const v=(0,W.useReactToPrint)({content:()=>u.current});return r?(0,G.jsx)("div",{ref:u,className:"katchath-combined-print",children:d.map((e,t)=>(0,G.jsxs)("div",{className:"katchath-page",children:[(0,G.jsxs)("div",{style:{width:"calc(13.8cm)",height:"calc(10.5cm)",transform:"scale(1.0)",margin:"0 auto",position:"relative",boxSizing:"border-box",fontWeight:"bold"},className:"border py-1 px-2",children:[(0,G.jsxs)("div",{className:"row",children:[(0,G.jsxs)("div",{className:"col-5 p-2",children:[(0,G.jsx)("h5",{className:"m-0",children:e.voucherTypeGet}),(0,G.jsx)("p",{className:"m-0",children:e.createdByGet}),(0,G.jsx)("p",{className:"m-0",children:(0,o.z5)(e.createdOn)}),(0,G.jsx)("br",{}),(0,G.jsx)("p",{className:"m-0",children:e.mailingName?"".concat(e.mailingName,","):" "}),(0,G.jsx)("p",{className:"m-0",children:e.mailingAddress?"".concat(e.mailingAddress,","):" "}),(0,G.jsx)("p",{className:"m-0",children:e.mailingCity?"".concat(e.mailingCity,","):" "}),(0,G.jsx)("p",{className:"m-0",children:e.mailingNumber?e.mailingNumber:" "})]}),(0,G.jsx)("div",{className:"col-7 p-2",children:(0,G.jsx)("div",{className:"table-responsive",children:(0,G.jsx)("table",{className:"table table-borderless",style:{lineHeight:"0.35cm"},children:(0,G.jsxs)("tbody",{children:[(0,o.$r)(e.productDetails).map((e,t)=>(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{children:e.itemName}),(0,G.jsx)("td",{children:e.quantity})]},t)),(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{className:"border text-right pr-4",style:{textAlign:"right",fontSize:"18px",fontWeight:"bold"},children:"Total"}),(0,G.jsx)("td",{className:"border text-right",style:{textAlign:"right",fontSize:"18px",fontWeight:"bold"},children:(0,o.$r)(e.productDetails).reduce((e,t)=>e+t.quantity,0)})]})]})})})})]}),(0,G.jsx)("br",{}),(0,G.jsxs)("div",{children:[(0,G.jsxs)("p",{className:"m-0",children:["Lorry: ",B(e.staffDetails,"Transport")]}),(0,G.jsxs)("p",{className:"m-0",children:["LoadMan: ",B(e.staffDetails,"Load Man")]})]})]}),t<d.length-1&&(0,G.jsx)("div",{className:"page-break",style:{pageBreakAfter:"always",breakAfter:"page"}})]},e.Do_Id||t))}):(0,G.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-center",children:[(0,G.jsx)("div",{className:"print-button-area",children:(0,G.jsx)(m.A,{onClick:v,startIcon:(0,G.jsx)(R.A,{}),children:"Print"})}),(0,G.jsx)("div",{ref:u,className:"katchath-multiple-print",children:d.map((e,t)=>(0,G.jsxs)("div",{style:{fontWeight:"bold"},className:"mb-4",children:[(0,G.jsxs)("div",{style:{width:"calc(14cm)",height:"calc(10.5cm)",transform:"scale(1.0)",margin:"0 auto",position:"relative",boxSizing:"border-box",fontWeight:"bold"},className:"border py-4 px-4",children:[(0,G.jsxs)("div",{className:"row",children:[(0,G.jsxs)("div",{className:"col-5 p-2",children:[(0,G.jsx)("h5",{className:"m-0",children:e.voucherTypeGet}),(0,G.jsx)("p",{className:"m-0",children:e.createdByGet}),(0,G.jsx)("p",{className:"m-0",children:(0,o.z5)(e.createdOn)}),(0,G.jsx)("br",{}),(0,G.jsx)("p",{className:"m-0",children:e.mailingName?"".concat(e.mailingName,","):" "}),(0,G.jsx)("p",{className:"m-0",children:e.mailingAddress?"".concat(e.mailingAddress,","):" "}),(0,G.jsx)("p",{className:"m-0",children:e.mailingCity?"".concat(e.mailingCity,","):" "}),(0,G.jsx)("p",{className:"m-0",children:e.mailingNumber?e.mailingNumber:" "})]}),(0,G.jsx)("div",{className:"col-7 p-2",children:(0,G.jsx)("div",{className:"table-responsive",children:(0,G.jsx)("table",{className:"table table-borderless",style:{lineHeight:"0.35cm"},children:(0,G.jsxs)("tbody",{children:[(0,o.$r)(e.productDetails).map((e,t)=>(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{children:e.itemName}),(0,G.jsx)("td",{children:e.quantity})]},t)),(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{className:"border text-right pr-4",style:{textAlign:"right",fontSize:"18px",fontWeight:"bold"},children:"Total"}),(0,G.jsx)("td",{className:"border text-right",style:{textAlign:"right",fontSize:"18px",fontWeight:"bold"},children:(0,o.$r)(e.productDetails).reduce((e,t)=>e+t.quantity,0)})]})]})})})})]}),(0,G.jsx)("br",{}),(0,G.jsxs)("div",{children:[(0,G.jsxs)("p",{className:"m-0",children:["Lorry: ",B(e.staffDetails,"Transport")]}),(0,G.jsxs)("p",{className:"m-0",children:["LoadMan: ",B(e.staffDetails,"Load Man")]})]})]}),t<d.length-1&&(0,G.jsx)("hr",{className:"my-4"})]},e.Do_Id||t))})]})};var V=n(90001),Q=n(22240),U=n(36285),q=n(61430),$=n(79722),J=n(45036);const K="https://api.dotpe.in/api/comm/public/enterprise/v1",Y=()=>{let e=J.fr.replace(/[^\x20-\x7E]/g,"");return e=e.replace(/[\u200B-\u200D\uFEFF\u00A0]/g,""),e=e.trim(),e};class Z{static async fetchTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"APPROVED";try{var t;const n=Y(),a=await $.A.get("".concat(K,"/templates?status=").concat(e),{headers:{"Dotpe-Api-Key":n,"Content-Type":"application/json"}});return{status:!0,data:(null===(t=a.data)||void 0===t?void 0:t.data)||a.data,message:"Templates fetched successfully"}}catch(s){var n,a,l,o;return console.error("Error fetching templates:",{message:s.message,status:null===(n=s.response)||void 0===n?void 0:n.status,data:null===(a=s.response)||void 0===a?void 0:a.data}),{status:!1,data:null,message:(null===(l=s.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)||s.message||"Failed to fetch templates"}}}static async sendTemplateMessage(e){try{var t,n,a;const l=Y(),o=await $.A.post("".concat(K,"/wa/send"),e,{headers:{"Dotpe-Api-Key":l,"Content-Type":"application/json"},timeout:3e4});return{status:!0===(null===(t=o.data)||void 0===t?void 0:t.status)||!0===(null===(n=o.data)||void 0===n?void 0:n.success),data:o.data,message:(null===(a=o.data)||void 0===a?void 0:a.message)||"Message sent successfully"}}catch(h){var l,o,s,i,r,d,c,u,m,p,v;return console.error("Error details:",{message:h.message,status:null===(l=h.response)||void 0===l?void 0:l.status,statusText:null===(o=h.response)||void 0===o?void 0:o.statusText,data:null===(s=h.response)||void 0===s?void 0:s.data,headers:null===(i=h.response)||void 0===i?void 0:i.headers}),422===(null===(r=h.response)||void 0===r?void 0:r.status)&&(console.error("Template validation error. Likely issues:"),console.error("1. Wrong number of parameters"),console.error("2. Parameter names don't match template"),console.error("3. Template not approved"),console.error("4. Missing required parameters")),{status:!1,data:null===(d=h.response)||void 0===d?void 0:d.data,message:(null===(c=h.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message)||(null===(m=h.response)||void 0===m||null===(p=m.data)||void 0===p?void 0:p.error)||h.message||"Failed to send message",statusCode:null===(v=h.response)||void 0===v?void 0:v.status}}}static async sendFreeFormMessage(e){try{var t,n,a;const l=Y();let o="".concat(K,"/wa/send/free-form"),s=e;e.template&&(o="".concat(K,"/wa/send"));const i=await $.A.post(o,s,{headers:{"Dotpe-Api-Key":l,"Content-Type":"application/json"},timeout:3e4});return{status:!0===(null===(t=i.data)||void 0===t?void 0:t.status)||!0===(null===(n=i.data)||void 0===n?void 0:n.success),data:i.data,message:(null===(a=i.data)||void 0===a?void 0:a.message)||"Message sent successfully"}}catch(c){var l,o,s,i,r,d;return console.error("Error sending free-form message:",{message:c.message,status:null===(l=c.response)||void 0===l?void 0:l.status,data:null===(o=c.response)||void 0===o?void 0:o.data}),{status:!1,data:null===(s=c.response)||void 0===s?void 0:s.data,message:(null===(i=c.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.message)||c.message||"Failed to send message",statusCode:null===(d=c.response)||void 0===d?void 0:d.status}}}static async sendInvoiceWithPDFLink(e,t,n,a,l){try{const t=null!==a&&void 0!==a&&a.Do_Date?a.Do_Date.split("T")[0].split("-").reverse().join("/"):(new Date).toLocaleDateString("en-GB"),n={merchantId:21640,template:{name:"template_text",language:"en"},wabaNumber:J.Or,recipients:["91".concat(e)],source:"crm",type:"document",clientRefId:"invoice_INV001_".concat(Date.now()),params:{body:["".concat(null===a||void 0===a?void 0:a.retailerNameGet),"".concat(null===a||void 0===a?void 0:a.Do_Inv_No),"".concat(t),"".concat(null===a||void 0===a?void 0:a.Total_Invoice_value),"SM TRADERS","".concat(l)]}};return await this.sendFreeFormMessage(n)}catch(o){return console.error("Error sending invoice with PDF:",o),{status:!1,message:o.message||"Failed to send invoice"}}}static async sendPDFAsDocument(e,t,n,a){try{const l={wabaNumber:J.Or,recipient:e,source:"billing_system",clientRefId:"pdf_".concat(t,"_").concat(Date.now()),type:"document",document:{link:n,caption:a||"\ud83d\udcc4 Invoice #".concat(t,"\nClick to view/download"),filename:"Invoice-".concat(t,".pdf")}};return await this.sendFreeFormMessage(l)}catch(l){return console.error("Error sending PDF as document:",l),{status:!1,message:l.message||"Failed to send PDF"}}}}var X=n(58992);const ee=(0,G.jsx)(k.A,{fontSize:"small"}),te=(0,G.jsx)(P.A,{fontSize:"small"}),ne={CostCategory:{label:"",value:""},Do_Id:[],involvedStaffs:[],staffInvolvedStatus:0,deliveryStatus:5},ae={CostCategory:{label:"",value:""},Do_Id:[],involvedStaffs:[],staffInvolvedStatus:0,deliveryStatus:5},le=e=>String(null!==e&&void 0!==e?e:"").toLowerCase().trim(),oe=(e,t)=>(0,o.$r)(null===e||void 0===e?void 0:e.involvedStaffs).filter(e=>(0,o.id)(e.Emp_Type_Id,t)).map(e=>{var t;return String(null!==(t=e.Emp_Name)&&void 0!==t?t:"").trim()}).filter(Boolean),se=e=>{var t,n;let{loadingOn:k,loadingOff:P,AddRights:B,EditRights:$,PrintRights:K,pageID:Y}=e;const[se,ie]=(0,l.useState)([]),[re,de]=(0,l.useState)([]),[ce,ue]=(0,l.useState)([]),[me,pe]=(0,l.useState)([]),[ve,he]=(0,l.useState)("normal"),[ge,fe]=(0,l.useState)(!0),[xe,Ae]=(0,l.useState)(!1),[ye,je]=(0,l.useState)(!1),[be,Ce]=(0,l.useState)(""),[_e,De]=(0,l.useState)(!1),[Se,Ie]=((0,l.useRef)(null),JSON.parse(localStorage.getItem("user")),(0,l.useState)({loading:!1,pdfUrl:null,token:null,fileName:null,error:null})),[Ne,we]=(0,l.useState)(ne),[Te,Fe]=(0,l.useState)(ae),[ke,Pe]=(0,l.useState)(!1),[Re,Ee]=(0,l.useState)({}),[Oe,ze]=(0,l.useState)([]),[Le,Me]=(0,l.useState)({Do_Id:null,Do_Date:null,open:!1}),[We,Ge]=(0,l.useState)({Do_Id:null,open:!1}),[Be,He]=(0,l.useState)({Do_Id:null,Do_Date:null,open:!1}),[Ve,Qe]=(0,l.useState)({open:!1,order:null,loading:!1,method:"template"}),[Ue,qe]=(0,l.useState)([]),[$e,Je]=(0,l.useState)(""),[Ke,Ye]=(0,l.useState)({open:!1,message:"",severity:"success"}),[Ze,Xe]=(0,l.useState)({reqDate:(0,o.ny)(),assignDialog:!1,filterDialog:!1,selectedInvoice:null,multipleStaffUpdateDialog:!1,multipleStaffRemoveDialog:!1,fetchTrigger:0,docType:"",staffStatus:0}),[et,tt]=(0,l.useState)({open:!1,doIds:[],docType:""}),nt=(0,l.useRef)(null),at=(0,l.useMemo)(()=>(Ue||[]).filter(e=>{const t=e.templateName||e.name||"";return t.toLowerCase().includes("pdf")||t.toLowerCase().includes("invoice")}),[Ue]),lt=(0,l.useMemo)(()=>(Ue||[]).filter(e=>{const t=e.templateName||e.name||"";return!(t.toLowerCase().includes("pdf")||t.toLowerCase().includes("invoice"))}),[Ue]),ot=(0,l.useMemo)(()=>[{Field_Name:"Do_Inv_No",Fied_Data:"string",ColumnHeader:"Invoice"},{Field_Name:"voucherTypeGet",Fied_Data:"string",ColumnHeader:"Voucher"},{Field_Name:"retailerNameGet",Fied_Data:"string",ColumnHeader:"Customer"}],[]),st=e=>{if(void 0!==e.Alt_Act_Qty&&null!==e.Alt_Act_Qty)return Number(e.Alt_Act_Qty)||0;const t=Number(e.Bill_Qty)||0,n=Number(e.PackValue)||1,a=["AltQty","Alt_Act_Qty","Alt_Qty","Alternate_Qty","Actual_Qty"];for(const l of a)if(void 0!==e[l]&&null!==e[l])return Number(e[l])||0;return t*n},it=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{var t,n;e?Ae(!0):fe(!0),he("normal");const l=await(0,s.z)({address:"sales/salesInvoice/lrReport?reqDate=".concat(Ze.reqDate,"&staffStatus=").concat(Ze.staffStatus),loadingOn:k,loadingOff:P}),i=(0,o.$r)(l.data).map(e=>{if(e.stockDetails&&Array.isArray(e.stockDetails)){const t=e.stockDetails.map(e=>(0,a.A)((0,a.A)({},e),{},{Alt_Act_Qty:st(e)}));return(0,a.A)((0,a.A)({},e),{},{stockDetails:t})}return e});ie(i),ue((0,o.$r)(null===l||void 0===l||null===(t=l.others)||void 0===t?void 0:t.costTypes)),pe((0,o.$r)(null===l||void 0===l||null===(n=l.others)||void 0===n?void 0:n.uniqeInvolvedStaffs)),ye||je(!0)}catch(l){console.error("Error fetching invoices:",l),M.oR.error("Failed to load invoices")}finally{fe(!1),Ae(!1)}};(0,l.useEffect)(()=>{(async()=>{try{const e=await Z.fetchTemplates("APPROVED");if(e.status&&e.data){let t=[];Array.isArray(e.data)?t=e.data:e.data.data&&Array.isArray(e.data.data)?t=e.data.data:e.data.templates&&Array.isArray(e.data.templates)&&(t=e.data.templates),t.length>0?(qe(t),t.forEach(e=>{const t=e.templateName||e.name||"";t.includes("template_text")&&(console.log("Found template_text template!",e),Je(t))})):console.warn("No templates found")}else console.warn("Failed to fetch templates:",e.message)}catch(e){console.error("Failed to fetch templates:",e)}})()},[]);const rt=async()=>{try{var e,t;fe(!0),he("pending");const i=await(0,s.z)({address:"sales/salesInvoice/pendingDetails?reqDate=".concat(Ze.reqDate),loadingOn:k,loadingOff:P}),r=(0,o.$r)(i.data).map(e=>{if(e.stockDetails&&Array.isArray(e.stockDetails)){const t=e.stockDetails.map(e=>(0,a.A)((0,a.A)({},e),{},{Alt_Act_Qty:st(e)}));return(0,a.A)((0,a.A)({},e),{},{stockDetails:t})}return e});var n,l;if(ie(r),null!==i&&void 0!==i&&null!==(e=i.others)&&void 0!==e&&e.costTypes)ue((0,o.$r)(null===i||void 0===i||null===(n=i.others)||void 0===n?void 0:n.costTypes));if(null!==i&&void 0!==i&&null!==(t=i.others)&&void 0!==t&&t.uniqeInvolvedStaffs)pe((0,o.$r)(null===i||void 0===i||null===(l=i.others)||void 0===l?void 0:l.uniqeInvolvedStaffs))}catch(i){console.error("Error fetching pending invoices:",i),M.oR.error("Failed to load pending invoices")}finally{fe(!1)}},dt=async()=>{try{const e=await(0,s.z)({address:"masters/erpCostCenter/dropDown"});de((0,o.$r)(e.data))}catch(e){console.error("Error fetching cost center data:",e),M.oR.error("Failed to load cost center data")}};(0,l.useEffect)(()=>{(async()=>{try{fe(!0),await Promise.all([it(),dt()])}catch(e){console.error("Error fetching initial data:",e),M.oR.error("Failed to load initial data")}finally{fe(!1)}})()},[]),(0,l.useEffect)(()=>{"normal"===ve&&it(!0)},[Ze.fetchTrigger,Ze.staffStatus,ve]),(0,l.useEffect)(()=>{"normal"===ve&&ye&&it(!0)},[Ze.reqDate,ve,ye]),(0,l.useEffect)(()=>{"pending"===ve&&ye&&rt()},[Ze.reqDate,ve,ye]),(0,l.useEffect)(()=>{if(et.open){const e=setTimeout(()=>{nt.current&&Pe(!0)},300);return()=>clearTimeout(e)}Pe(!1)},[et.open,et.doIds,et.docType]);const ct=function(e){Ye({open:!0,message:e,severity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"})},ut=()=>{Qe({open:!1,order:null,loading:!1,method:"template"}),Je("")},mt=async e=>{try{Ie({loading:!0,pdfUrl:null,error:null});const t=JSON.parse(localStorage.getItem("user")),n=null===t||void 0===t?void 0:t.Company_id;if(!n)throw new Error("Company ID not found");const a=await(async(e,t)=>{try{const n={invoiceId:e.Do_Inv_No,companyId:t,invoiceData:{Do_Inv_No:e.Do_Inv_No,Total_Invoice_value:e.Total_Invoice_value||0,retailerNameGet:e.retailerNameGet||e.Retailer_Name||"Customer",Do_Date:e.Do_Date||e.So_Date,So_No:e.So_No||e.Do_No||"N/A",Retailer_Name:e.Retailer_Name||e.retailerNameGet,Retailer_Address:e.Retailer_Address||"Address not available",Retailer_GSTIN:e.Retailer_GSTIN||"Not Available",CSGT_Total:e.CSGT_Total||0,SGST_Total:e.SGST_Total||0,IGST_Total:e.IGST_Total||0,Round_off:e.Round_off||0,CSGT_Percentage:e.CSGT_Percentage||0,SGST_Percentage:e.SGST_Percentage||0,IGST_Percentage:e.IGST_Percentage||0,stockDetails:e.stockDetails||e.ProductList||[]}};return console.log("Request body prepared:",n),await(0,s.z)({address:"sales/generatePdf",method:"POST",bodyData:n,loadingOn:k,loadingOff:P})}catch(n){throw console.error("Error generating PDF:",n),n}})(e,n);if(a.success&&a.data){const e=a.data.pdfUrl;return Ie({loading:!1,pdfUrl:e,token:a.data.token,fileName:a.data.fileName,error:null}),{pdfUrl:e,token:a.data.token,fileName:a.data.fileName}}throw new Error(a.message||"Failed to generate PDF")}catch(t){throw console.error("Error generating PDF:",t),Ie({loading:!1,pdfUrl:null,error:t.message}),t}},pt=async e=>{try{const t=await(0,s.z)({address:"masters/getlolDetails"});if(t&&t.success&&t.data){const n=t.data.find(t=>Number(t.Ret_Id)===Number(null===e||void 0===e?void 0:e.Retailer_Id));return(null===n||void 0===n?void 0:n.Party_Mobile_1)||e.Customer_Phone}return e.Customer_Phone}catch(t){return console.error("Error fetching recipient phone:",t),e.Customer_Phone}},vt=(0,l.useMemo)(()=>{const e=Ne.Do_Id;if(!e.length)return{billQty:0,altActQty:0};let t=0,n=0;return se.filter(t=>e.includes((0,o.Ro)(t.Do_Id))).forEach(e=>{Array.isArray(e.stockDetails)&&e.stockDetails.forEach(e=>{t+=Number(e.Bill_Qty)||0,n+=Number(e.Alt_Act_Qty)||0})}),{billQty:t,altActQty:n}},[Ne.Do_Id,se]);(0,l.useEffect)(()=>{(0,s.z)({address:"masters/erpCostCenter/dropDown"}).then(e=>de((0,o.$r)(e.data))).catch(console.error)},[]);const ht=(0,l.useMemo)(()=>ce.filter(e=>me.includes((0,o.Ro)(e.Cost_Category_Id))).map(e=>{const t="costType_".concat((0,o.Ro)(e.Cost_Category_Id));return{costType:e.Cost_Category,field:t,columnConfig:{Field_Name:t,Fied_Data:"string",isVisible:1,ColumnHeader:e.Cost_Category,isCustomCell:!0,getFilterValues:t=>oe(t,e.Cost_Category_Id),Cell:t=>{let{row:n}=t;const a=oe(n,e.Cost_Category_Id).join(", ");return(0,G.jsx)("span",{children:a||"-"})}}}}).sort((e,t)=>{const n=e.costType.toLowerCase(),a=t.costType.toLowerCase();return n.includes("broker")?-1:a.includes("broker")?1:n.includes("transport")?-1:a.includes("transport")?1:e.costType.localeCompare(t.costType)}).map(e=>e.columnConfig),[ce,me]),gt=(0,l.useMemo)(()=>[...ot,...ht],[ot,ht]),ft=()=>Xe(e=>(0,a.A)((0,a.A)({},e),{},{assignDialog:!1,selectedInvoice:null})),xt=()=>Xe(e=>(0,a.A)((0,a.A)({},e),{},{filterDialog:!1})),At=()=>{we(ne),Xe(e=>(0,a.A)((0,a.A)({},e),{},{multipleStaffUpdateDialog:!1}))},yt=()=>{Fe(ae),Xe(e=>(0,a.A)((0,a.A)({},e),{},{multipleStaffRemoveDialog:!1}))},jt=()=>Me(e=>({Do_Id:null,Do_Date:null,open:!1})),bt=()=>Ge(e=>({Do_Id:null,open:!1})),Ct=()=>He(e=>({Do_Id:null,Do_Date:null,open:!1})),_t=()=>{"pending"===ve?rt():Xe(e=>(0,a.A)((0,a.A)({},e),{},{fetchTrigger:e.fetchTrigger+1}))},Dt=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=(e=>{const t=X.A,n=e.replace(/\//g,"_"),a="".concat(n);return"".concat(t,"sales/downloadPdf?Do_Inv_No=").concat(a)})(e),a=document.createElement("a");return a.href=n,a.download=t||"".concat(e,".pdf"),document.body.appendChild(a),a.click(),document.body.removeChild(a),!0}catch(n){throw console.error("Error downloading PDF:",n),n}};(0,l.useEffect)(()=>{It()},[Re,se,gt]);const St=(e,t)=>{Ee(n=>(0,a.A)((0,a.A)({},n),{},{[e]:t}))},It=()=>{let e=[...se];for(const t of gt){const n=t.Field_Name,a=Re[n];if(a){if("range"===a.type){const{min:t,max:l}=a;e=e.filter(e=>{const a=e[n];return(void 0===t||a>=t)&&(void 0===l||a<=l)});continue}if("date"===a.type){const{start:t,end:l}=a.value||{};e=e.filter(e=>{const a=new Date(e[n]);return(void 0===t||a>=new Date(t))&&(void 0===l||a<=new Date(l))});continue}if(Array.isArray(a)){const l=a.map(le).filter(Boolean);if(!l.length)continue;e="function"===typeof t.getFilterValues?e.filter(e=>{const n=(t.getFilterValues(e)||[]).map(le).filter(Boolean);return l.some(e=>n.includes(e))}):e.filter(e=>l.includes(le(e[n])))}}}ze(e)},Nt=(0,W.useReactToPrint)({content:()=>nt.current,documentTitle:"Multiple Documents",pageStyle:"delivery_slip"===be?"\n        @page {\n            margin: 0.7cm 0 0 0;\n            size: auto;\n        }\n        html, body {\n            margin: 0;\n            padding: 0;\n        }\n        body {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n        }\n        @media print {\n            body > * {\n                margin-left: 0 !important;\n                margin-right: 0 !important;\n            }\n            .no-print {\n                display: none !important;\n            }\n        }\n    ":"sales_invoice"===be?"\n        @page {\n            size: A5 landscape;\n            margin: 0;\n        }\n        html, body {\n            margin: 0;\n            padding: 0;\n            -webkit-print-color-adjust: exact;\n            print-color-adjust: exact;\n        }\n        body {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n        }\n        @media print {\n            body > * {\n                margin-left: 0 !important;\n                margin-right: 0 !important;\n            }\n            .no-print {\n                display: none !important;\n            }\n        }\n    ":"\n        @page {\n            margin: 0.6cm;\n            size: auto;\n        }\n        html, body {\n            margin: 0;\n            padding: 0;\n        }\n        body {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n        }\n        @media print {\n            body > * {\n                margin-left: 0 !important;\n                margin-right: 0 !important;\n            }\n            .no-print {\n                display: none !important;\n            }\n        }\n    "}),wt=e=>{const{Field_Name:t,Fied_Data:n,ColumnHeader:l}=e;var o,s,i,r,d,c,u,m,p,v;if("number"===n)return(0,G.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,G.jsx)("input",{placeholder:"Min",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(o=null===(s=Re[t])||void 0===s?void 0:s.min)&&void 0!==o?o:"",onChange:e=>St(t,(0,a.A)((0,a.A)({type:"range"},Re[t]),{},{min:e.target.value?parseFloat(e.target.value):void 0}))}),(0,G.jsx)("input",{placeholder:"Max",type:"number",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(i=null===(r=Re[t])||void 0===r?void 0:r.max)&&void 0!==i?i:"",onChange:e=>St(t,(0,a.A)((0,a.A)({type:"range"},Re[t]),{},{max:e.target.value?parseFloat(e.target.value):void 0}))})]});if("date"===n)return(0,G.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[(0,G.jsx)("input",{placeholder:"Start Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(d=null===(c=Re[t])||void 0===c||null===(u=c.value)||void 0===u?void 0:u.start)&&void 0!==d?d:"",onChange:e=>{var n;return St(t,{type:"date",value:(0,a.A)((0,a.A)({},null===(n=Re[t])||void 0===n?void 0:n.value),{},{start:e.target.value||void 0})})}}),(0,G.jsx)("input",{placeholder:"End Date",type:"date",className:"bg-light border-0 m-1 p-1 w-50",value:null!==(m=null===(p=Re[t])||void 0===p||null===(v=p.value)||void 0===v?void 0:v.end)&&void 0!==m?m:"",onChange:e=>{var n;return St(t,{type:"date",value:(0,a.A)((0,a.A)({},null===(n=Re[t])||void 0===n?void 0:n.value),{},{end:e.target.value||void 0})})}})]});if("string"===n){const n=(e=>{const t=new Map;for(const n of e){const e=String(null!==n&&void 0!==n?n:"").trim();if(!e)continue;const a=e.toLowerCase();t.has(a)||t.set(a,e)}return Array.from(t.values())})("function"===typeof e.getFilterValues?se.flatMap(t=>e.getFilterValues(t)||[]):se.map(e=>e[t]));return(0,G.jsx)(y.A,{multiple:!0,id:"".concat(t,"-filter"),options:n,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:Re[t]||[],onChange:(e,n)=>St(t,n),renderOption:(e,t,n)=>{let{selected:l}=n;return(0,G.jsxs)("li",(0,a.A)((0,a.A)({},e),{},{children:[(0,G.jsx)(j.A,{icon:ee,checkedIcon:te,style:{marginRight:8},checked:l}),t]}))},isOptionEqualToValue:(e,t)=>e===t,renderInput:e=>(0,G.jsx)(b.A,(0,a.A)((0,a.A)({},e),{},{label:l||t,placeholder:"Select ".concat((l||t).replace(/_/g," "))}))})}return null};(0,l.useEffect)(()=>{if(_e){const e=Oe.map(e=>(0,o.Ro)(e.Do_Id));we(t=>(0,a.A)((0,a.A)({},t),{},{Do_Id:e})),Fe(t=>(0,a.A)((0,a.A)({},t),{},{Do_Id:e}))}else we(e=>(0,a.A)((0,a.A)({},e),{},{Do_Id:[]})),Fe(e=>(0,a.A)((0,a.A)({},e),{},{Do_Id:[]}))},[_e,Oe]);const Tt=(0,l.useMemo)(()=>{const e=Ne.Do_Id.length>0,t=Ne.involvedStaffs.length>0,n=(0,o.IQ)(Ne.CostCategory.value)&&!(0,o.id)(Ne.CostCategory.value,0);return!!e&&(!(t&&!n)&&!(!t&&n))},[Ne]),Ft=(0,l.useMemo)(()=>{const e=Te.Do_Id.length>0,t=(0,o.IQ)(Te.CostCategory.value)&&!(0,o.id)(Te.CostCategory.value,0);return e&&t},[Te]);if(ge&&!ye)return(0,G.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:(0,G.jsx)(r.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:(0,G.jsxs)("div",{className:"text-muted",children:["Loading ","pending"===ve?"Pending":"Sales"," Invoices..."]})})});return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(i.Ay,{title:"pending"===ve?"Pending Invoices":"Sales Invoice",columns:[{Field_Name:"Select",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;const n=Ne.Do_Id.includes((0,o.Ro)(t.Do_Id));return(0,G.jsx)(j.A,{onFocus:e=>{e.target.blur()},checked:n,onChange:()=>{n?(we(e=>(0,a.A)((0,a.A)({},e),{},{Do_Id:e.Do_Id.filter(e=>!(0,o.id)(e,t.Do_Id))})),Fe(e=>(0,a.A)((0,a.A)({},e),{},{Do_Id:e.Do_Id.filter(e=>!(0,o.id)(e,t.Do_Id))}))):(we(e=>(0,a.A)((0,a.A)({},e),{},{Do_Id:[...e.Do_Id,(0,o.Ro)(t.Do_Id)]})),Fe(e=>(0,a.A)((0,a.A)({},e),{},{Do_Id:[...e.Do_Id,(0,o.Ro)(t.Do_Id)]})))}})}},(0,i.Lj)("Do_Inv_No","string","Invoice"),(0,i.Lj)("createdOn","time","Created"),(0,i.Lj)("voucherTypeGet","string","Voucher"),(0,i.Lj)("retailerNameGet","string","Customer"),{Field_Name:"BillQty",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;return t.stockDetails&&t.stockDetails.length>0?t.stockDetails.reduce((e,t)=>e+(Number(t.Bill_Qty)||0),0):0}},{Field_Name:"AltActQty",ColumnHeader:"Alt Act Qty",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,o.e3)((0,o.$r)(t.stockDetails).reduce((e,t)=>e+(0,o.Ro)(t.Alt_Act_Qty),0))}},(0,i.Lj)("Narration","string","Narration"),...ht,(0,i.Lj)("Delivery_Status","string","Delivery_Status"),{Field_Name:"Action",isVisible:1,isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,G.jsx)(i.wF,{buttonsData:[{name:"Add Employee",onclick:()=>Xe(e=>(0,a.A)((0,a.A)({},e),{},{assignDialog:!0,selectedInvoice:t})),icon:(0,G.jsx)(E.A,{fontSize:"small",color:"primary"}),disabled:!B&&!$},{name:"Print Invoice",onclick:()=>{Me({Do_Id:t.Do_Id,Do_Date:t.Do_Date,open:!0})},icon:(0,G.jsx)(R.A,{fontSize:"small",color:"primary"}),disabled:!K},{name:"Delivery Slip",onclick:()=>{He({Do_Id:t.Do_Id,Do_Date:t.Do_Date,open:!0})},icon:(0,G.jsx)(R.A,{fontSize:"small",color:"primary"}),disabled:!K},{name:"Katchath Copy",onclick:()=>{Ge({Do_Id:t.Do_Id,open:!0})},icon:(0,G.jsx)(R.A,{fontSize:"small",color:"primary"}),disabled:!K},{name:"Send WhatsApp",onclick:()=>{(async e=>{try{Qe({open:!0,order:e,loading:!0,method:"pdf-link"});const t=await mt(e),n=await pt(e);if(!n)return ct("Customer phone number not found","error"),void ut();Qe({open:!0,order:(0,a.A)((0,a.A)({},e),{},{recipientPhone:n,generatedPdfUrl:t.pdfUrl,pdfToken:t.token,pdfFileName:t.fileName}),loading:!1,method:"pdf-link"})}catch(t){console.error("Error in handleWhatsAppClick:",t),ct("Failed to prepare PDF: ".concat(t.message),"error"),ut()}})(t)},icon:(0,G.jsx)(q.A,{fontSize:"small",color:"success"}),disabled:!1}]})}}],dataArray:Oe,EnableSerialNumber:!0,ButtonArea:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(C.A,{title:"Select All",children:(0,G.jsx)(j.A,{checked:_e,onChange:e=>De(e.target.checked)})}),(0,G.jsxs)("button",{type:"button",className:"btn btn-sm ".concat("pending"===ve?"btn-primary":"btn-outline-secondary"),onClick:async()=>{"normal"===ve?await rt():await it(!0)},disabled:xe,style:{marginRight:"8px",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:[(0,G.jsx)(O.A,{fontSize:"small",style:{marginRight:"4px"}}),"pending"===ve?"New Invoices":"Pending Invoice"]}),(0,G.jsx)(_.A,{size:"small",onClick:()=>Xe(e=>(0,a.A)((0,a.A)({},e),{},{multipleStaffUpdateDialog:!0})),disabled:!Ne.Do_Id.length,children:(0,G.jsx)(E.A,{fontSize:"small"})}),(0,G.jsx)(_.A,{size:"small",onClick:()=>Xe(e=>(0,a.A)((0,a.A)({},e),{},{multipleStaffRemoveDialog:!0})),disabled:!Te.Do_Id.length,children:(0,G.jsx)(U.A,{fontSize:"small"})}),(0,G.jsx)(_.A,{size:"small",onClick:()=>Xe(e=>(0,a.A)((0,a.A)({},e),{},{filterDialog:!0})),disabled:xe,children:(0,G.jsx)(z.A,{})}),(0,G.jsx)(_.A,{size:"small",onClick:()=>{"pending"===ve?rt():it(!0)},disabled:xe,children:(0,G.jsx)(L.A,{})}),(0,G.jsx)("input",{type:"date",className:"cus-inpt w-auto",value:Ze.reqDate,onChange:e=>Xe(t=>(0,a.A)((0,a.A)({},t),{},{reqDate:e.target.value})),disabled:xe}),(0,G.jsx)(_.A,{size:"small",disabled:!Ze.docType||!Ne.Do_Id.length,onClick:()=>{Ce(Ze.docType),tt({open:!0,doIds:Ne.Do_Id,docType:Ze.docType})},children:(0,G.jsx)(R.A,{})}),(0,G.jsxs)("select",{className:"cus-inpt w-auto rounded-5 border-0",disabled:!Ne.Do_Id.length,value:Ze.docType,onChange:e=>{const t=e.target.selectedIndex,n=e.target.options[t].text;Xe(t=>(0,a.A)((0,a.A)({},t),{},{docType:e.target.value,docTypeLabel:n}))},children:[(0,G.jsx)("option",{value:"",children:"SELECT TYPE"}),(0,G.jsx)("option",{value:"sales_invoice",children:"SALES INVOICE"}),(0,G.jsx)("option",{value:"katchath",children:"KATCHATH"}),(0,G.jsx)("option",{value:"delivery_slip",children:"DELIVERY SLIP"})]}),"normal"===ve&&(0,G.jsxs)("select",{className:"cus-inpt w-auto rounded-5 border-0",value:Ze.staffStatus,onChange:e=>{Xe(t=>(0,a.A)((0,a.A)({},t),{},{staffStatus:Number(e.target.value)}))},children:[(0,G.jsx)("option",{value:"1",children:"ALL INVOICES"}),(0,G.jsx)("option",{value:"0",children:"INCOMPLETED INVOICES"})]}),"pending"===ve&&(0,G.jsxs)("span",{className:"ms-2 fw-bold text-primary",children:["Viewing Pending Invoices (",se.length," found)"]}),Ne.Do_Id.length>0&&(0,G.jsxs)("div",{className:"d-flex gap-4 mb-0 p-0",children:[(0,G.jsxs)("div",{children:[(0,G.jsx)("strong",{children:"Total Bill Qty:"})," ",vt.billQty]}),(0,G.jsxs)("div",{children:[(0,G.jsx)("strong",{children:"Total Alt Act Qty:"})," ",vt.altActQty]})]})]})}),(0,G.jsxs)(D.A,{open:Ze.assignDialog,onClose:ft,maxWidth:"lg",fullWidth:!0,children:[(0,G.jsxs)(S.A,{children:["Assign Cost Centers: ",(0,G.jsx)("span",{className:"text-primary",children:null===(t=Ze.selectedInvoice)||void 0===t?void 0:t.Do_Inv_No})]}),(0,G.jsxs)("form",{onSubmit:async e=>{var t,n,a;e.preventDefault(),(0,s.z)({address:"sales/salesInvoice/lrReport",method:"POST",bodyData:{Do_Id:null===(t=Ze.selectedInvoice)||void 0===t?void 0:t.Do_Id,involvedStaffs:null===(n=Ze.selectedInvoice)||void 0===n?void 0:n.involvedStaffs,staffInvolvedStatus:(0,o.Ro)(null===(a=Ze.selectedInvoice)||void 0===a?void 0:a.staffInvolvedStatus)},loadingOn:k,loadingOff:P}).then(e=>{e.success?(M.oR.success(e.message),ft(),"pending"===ve?rt():_t()):M.oR.error(e.message)}).catch(e=>console.log(e))},children:[(0,G.jsx)(I.A,{children:(0,G.jsxs)("div",{className:"row",children:[ce.filter(e=>!["Broker","Transport"].some(t=>String(null===e||void 0===e?void 0:e.Cost_Category).includes(t))).map((e,t)=>{var n;const l=(0,o.$r)(null===(n=Ze.selectedInvoice)||void 0===n?void 0:n.involvedStaffs).filter(t=>(0,o.id)(t.Emp_Type_Id,e.Cost_Category_Id)).map(e=>({value:e.Emp_Id,label:e.Emp_Name}));return(0,G.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,G.jsx)("label",{children:e.Cost_Category}),(0,G.jsx)(T.Ay,{value:l,isMulti:!0,styles:F.MR,options:re,onChange:t=>{const n=t.map(t=>{var n;return{Do_Id:null===Ze||void 0===Ze||null===(n=Ze.selectedInvoice)||void 0===n?void 0:n.Do_Id,Emp_Id:t.value,Emp_Name:t.label,Emp_Type_Id:e.Cost_Category_Id,Involved_Emp_Type:e.Cost_Category}});((e,t,n)=>{Xe(l=>{var s;const i=(0,o.$r)(null===(s=l.selectedInvoice)||void 0===s?void 0:s.involvedStaffs).filter(e=>!(0,o.id)(e.Emp_Type_Id,n.Cost_Category_Id)).concat(t);return(0,a.A)((0,a.A)({},l),{},{selectedInvoice:(0,a.A)((0,a.A)({},e),{},{involvedStaffs:i})})})})(Ze.selectedInvoice,n,e)},placeholder:"Select ".concat(e.Cost_Category),filterOption:o.GI,menuPortalTarget:document.body})]},t)}),(0,G.jsxs)("div",{className:"col-lg-4 col-md-6 p-2 d-flex align-items-end",children:[(0,G.jsx)("input",{className:"form-check-input shadow-none pointer mx-2",style:{padding:"0.7em"},type:"checkbox",id:"removeFromList",checked:(0,o.id)(null===(n=Ze.selectedInvoice)||void 0===n?void 0:n.staffInvolvedStatus,1),onChange:()=>{Xe(e=>{var t;return(0,a.A)((0,a.A)({},e),{},{selectedInvoice:(0,a.A)((0,a.A)({},e.selectedInvoice),{},{staffInvolvedStatus:(0,o.id)(null===(t=e.selectedInvoice)||void 0===t?void 0:t.staffInvolvedStatus,1)?0:1})})})}}),(0,G.jsx)("label",{htmlFor:"removeFromList",className:"fw-bold",children:"Remove invoice from this page"})]})]})}),(0,G.jsxs)(N.A,{children:[(0,G.jsx)(m.A,{onClick:ft,variant:"outlined",children:"Close"}),(0,G.jsx)(m.A,{variant:"contained",type:"submit",children:"Save"})]})]})]}),(0,G.jsxs)(D.A,{open:Ze.filterDialog,onClose:xt,maxWidth:"sm",fullWidth:!0,children:[(0,G.jsx)(S.A,{children:"Filter Options"}),(0,G.jsx)(I.A,{children:(0,G.jsx)("div",{className:"row",children:gt.map((e,t)=>(0,G.jsx)("div",{className:"col-12 p-2",children:wt(e)},t))})}),(0,G.jsx)(N.A,{children:(0,G.jsx)(m.A,{onClick:xt,variant:"outlined",children:"Close"})})]}),(0,G.jsxs)(D.A,{open:Ze.multipleStaffUpdateDialog,onClose:At,maxWidth:"sm",fullWidth:!0,children:[(0,G.jsx)(S.A,{children:"Update Cost Category"}),(0,G.jsxs)(I.A,{children:[(0,G.jsxs)("div",{className:"py-2",children:[(0,G.jsx)("label",{children:"Cost Category"}),(0,G.jsx)(T.Ay,{value:Ne.CostCategory,styles:F.MR,options:ce.filter(e=>!["Broker","Transport"].some(t=>String(null===e||void 0===e?void 0:e.Cost_Category).includes(t))).map(e=>({value:e.Cost_Category_Id,label:e.Cost_Category})),onChange:e=>we(t=>(0,a.A)((0,a.A)({},t),{},{CostCategory:e})),placeholder:"Select Cost Category",filterOption:o.GI,menuPortalTarget:document.body})]}),(0,G.jsxs)("div",{className:"py-2",children:[(0,G.jsx)("label",{children:"Staff"}),(0,G.jsx)(T.Ay,{value:Ne.involvedStaffs,isMulti:!0,styles:F.MR,options:re,onChange:e=>we(t=>(0,a.A)((0,a.A)({},t),{},{involvedStaffs:e})),placeholder:"Select Staff",filterOption:o.GI,menuPortalTarget:document.body,closeMenuOnSelect:!1})]}),(0,G.jsxs)("div",{className:"py-2",children:[(0,G.jsx)("label",{children:"Delivery Status"}),(0,G.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>we(t=>(0,a.A)((0,a.A)({},t),{},{deliveryStatus:e.target.value})),value:Ne.deliveryStatus,children:[(0,G.jsx)("option",{value:5,children:"Pending"}),(0,G.jsx)("option",{value:7,children:"Delivered"}),(0,G.jsx)("option",{value:6,children:"Return"})]})]}),(0,G.jsxs)("div",{className:"py-2",children:[(0,G.jsx)("input",{className:"form-check-input shadow-none pointer mx-2",style:{padding:"0.7em"},type:"checkbox",id:"removeFromList",checked:(0,o.id)(Ne.staffInvolvedStatus,1),onChange:()=>{we(e=>(0,a.A)((0,a.A)({},e),{},{staffInvolvedStatus:(0,o.id)(e.staffInvolvedStatus,1)?0:1}))}}),(0,G.jsx)("label",{htmlFor:"removeFromList",className:"fw-bold",children:"Remove invoice from this page"})]})]}),(0,G.jsxs)(N.A,{children:[(0,G.jsx)(m.A,{onClick:At,variant:"outlined",children:"Close"}),(0,G.jsx)(m.A,{variant:"contained",onClick:async()=>{(0,s.z)({address:"sales/salesInvoice/lrReport/multiple",method:"POST",bodyData:{CostCategory:(0,o.Ro)(Ne.CostCategory.value),Do_Id:Ne.Do_Id,involvedStaffs:Ne.involvedStaffs.map(e=>(0,o.Ro)(e.value)),staffInvolvedStatus:(0,o.Ro)(Ne.staffInvolvedStatus),deliveryStatus:(0,o.Ro)(Ne.deliveryStatus)},loadingOn:k,loadingOff:P}).then(e=>{e.success?(M.oR.success(e.message),At(),"pending"===ve?rt():_t()):M.oR.error(e.message)}).catch(e=>console.log(e))},disabled:!Tt,children:"Save"})]})]}),(0,G.jsxs)(D.A,{open:Le.open,onClose:jt,maxWidth:"lg",fullWidth:!0,children:[(0,G.jsx)(S.A,{children:"Bill Print Preview"}),(0,G.jsx)(I.A,{children:(0,G.jsx)(V.A,{Do_Id:Le.Do_Id,Do_Date:Le.Do_Date,loadingOn:k,loadingOff:P})}),(0,G.jsx)(N.A,{children:(0,G.jsx)(m.A,{variant:"outlined",onClick:jt,children:"Close"})})]}),(0,G.jsxs)(D.A,{open:We.open,onClose:bt,maxWidth:"lg",fullWidth:!0,children:[(0,G.jsx)(S.A,{children:"Bill Print Preview"}),(0,G.jsx)(I.A,{children:(0,G.jsx)(H,{Do_Id:We.Do_Id,loadingOn:k,loadingOff:P})}),(0,G.jsx)(N.A,{children:(0,G.jsx)(m.A,{variant:"outlined",onClick:bt,children:"Close"})})]}),(0,G.jsxs)(D.A,{open:Be.open,onClose:Ct,maxWidth:"lg",fullWidth:!0,children:[(0,G.jsx)(S.A,{children:"Delivery Slip Preview"}),(0,G.jsx)(I.A,{children:(0,G.jsx)(Q.A,{Do_Id:Be.Do_Id,loadingOn:k,loadingOff:P})}),(0,G.jsx)(N.A,{children:(0,G.jsx)(m.A,{variant:"outlined",onClick:Ct,children:"Close"})})]}),(0,G.jsxs)(D.A,{open:Ze.multipleStaffRemoveDialog,onClose:yt,maxWidth:"sm",fullWidth:!0,children:[(0,G.jsx)(S.A,{children:"Remove Staff from Cost Category"}),(0,G.jsxs)(I.A,{children:[(0,G.jsxs)("div",{className:"py-2",children:[(0,G.jsx)("label",{children:"Cost Category to Remove"}),(0,G.jsx)(T.Ay,{value:Te.CostCategory,styles:F.MR,options:ce.filter(e=>!["Broker","Transport"].some(t=>String(null===e||void 0===e?void 0:e.Cost_Category).includes(t))).map(e=>({value:e.Cost_Category_Id,label:e.Cost_Category})),onChange:e=>Fe(t=>(0,a.A)((0,a.A)({},t),{},{CostCategory:e})),placeholder:"Select Cost Category to Remove",filterOption:o.GI,menuPortalTarget:document.body})]}),(0,G.jsxs)("div",{className:"py-2",children:[(0,G.jsx)("label",{children:"Delivery Status"}),(0,G.jsxs)("select",{className:"cus-inpt p-1",onChange:e=>Fe(t=>(0,a.A)((0,a.A)({},t),{},{deliveryStatus:e.target.value})),value:Te.deliveryStatus,children:[(0,G.jsx)("option",{value:5,children:"Pending"}),(0,G.jsx)("option",{value:7,children:"Delivered"}),(0,G.jsx)("option",{value:6,children:"Return"})]})]}),(0,G.jsxs)("div",{className:"py-2",children:[(0,G.jsx)("input",{className:"form-check-input shadow-none pointer mx-2",style:{padding:"0.7em"},type:"checkbox",id:"removeFromListRemove",checked:(0,o.id)(Te.staffInvolvedStatus,1),onChange:()=>{Fe(e=>(0,a.A)((0,a.A)({},e),{},{staffInvolvedStatus:(0,o.id)(e.staffInvolvedStatus,1)?0:1}))}}),(0,G.jsx)("label",{htmlFor:"removeFromListRemove",className:"fw-bold",children:"Remove invoice from this page"})]}),(0,G.jsx)("div",{className:"py-2 text-muted",children:(0,G.jsxs)("small",{children:["This will remove all staff members of the selected Cost Category from ",Te.Do_Id.length," selected invoices."]})})]}),(0,G.jsxs)(N.A,{children:[(0,G.jsx)(m.A,{onClick:yt,variant:"outlined",children:"Cancel"}),(0,G.jsx)(m.A,{variant:"contained",color:"error",onClick:async()=>{Te.CostCategory.value&&0!==Te.Do_Id.length?(0,s.z)({address:"sales/salesInvoice/lrReport/multipleDelete",method:"POST",bodyData:{CostCategory:(0,o.Ro)(Te.CostCategory.value),Do_Id:Te.Do_Id,staffInvolvedStatus:(0,o.Ro)(Te.staffInvolvedStatus),deliveryStatus:(0,o.Ro)(Te.deliveryStatus)},loadingOn:k,loadingOff:P}).then(e=>{e.success?(M.oR.success(e.message),yt(),"pending"===ve?rt():_t()):M.oR.error(e.message)}).catch(e=>console.log(e)):M.oR.error("Please select a Cost Category and at least one invoice")},disabled:!Ft,children:"Remove Staff"})]})]}),(0,G.jsxs)(D.A,{open:et.open,onClose:()=>tt({open:!1,doIds:[],docType:""}),maxWidth:"lg",fullWidth:!0,children:[(0,G.jsx)(I.A,{dividers:!0,children:(0,G.jsxs)("div",{ref:nt,children:["sales_invoice"===et.docType&&(0,G.jsx)(V.A,{Do_Ids:et.doIds,loadingOn:k,loadingOff:P,isCombinedPrint:!0}),"katchath"===et.docType&&(0,G.jsx)(H,{Do_Ids:et.doIds,loadingOn:k,loadingOff:P,isCombinedPrint:!0}),"delivery_slip"===et.docType&&(0,G.jsx)(Q.A,{Do_Ids:et.doIds,loadingOn:k,loadingOff:P,isCombinedPrint:!0})]})}),(0,G.jsxs)(N.A,{className:"no-print",children:[(0,G.jsx)(m.A,{variant:"contained",onClick:()=>{Nt()},startIcon:(0,G.jsx)(R.A,{}),children:"Print All"}),(0,G.jsx)(m.A,{variant:"outlined",onClick:()=>tt({open:!1,doIds:[],docType:""}),children:"Close"})]})]}),(0,G.jsxs)(D.A,{open:Ve.open,onClose:ut,maxWidth:"sm",fullWidth:!0,children:[(0,G.jsx)(S.A,{children:"Send WhatsApp Message"}),(0,G.jsx)(I.A,{children:(()=>{const{order:e,method:t}=Ve;return(0,G.jsxs)(r.A,{children:[(0,G.jsxs)(r.A,{mb:2,children:[(0,G.jsxs)(d.A,{variant:"subtitle2",color:"textSecondary",children:["Order: ",(0,G.jsx)("strong",{children:null===e||void 0===e?void 0:e.Do_Inv_No})]}),(0,G.jsxs)(d.A,{variant:"subtitle2",color:"textSecondary",children:["Customer: ",(0,G.jsx)("strong",{children:null===e||void 0===e?void 0:e.retailerNameGet})]}),(0,G.jsxs)(d.A,{variant:"subtitle2",color:"textSecondary",children:["Phone: ",(0,G.jsx)("strong",{children:(null===e||void 0===e?void 0:e.Party_Mobile_1)||(null===e||void 0===e?void 0:e.recipientPhone)})]}),(0,G.jsxs)(d.A,{variant:"subtitle2",color:"textSecondary",children:["Amount: ",(0,G.jsxs)("strong",{children:["\u20b9",(0,o.jG)(null===e||void 0===e?void 0:e.Total_Invoice_value)]})]})]}),(0,G.jsx)(c.A,{sx:{my:2}}),Se.loading&&(0,G.jsx)(r.A,{sx:{display:"flex",alignItems:"center",gap:1,my:2,p:2,bgcolor:"info.light",borderRadius:1},children:(0,G.jsx)(d.A,{variant:"body2",children:"Generating PDF document..."})}),Se.error&&(0,G.jsxs)(u.A,{severity:"error",sx:{my:2},children:[(0,G.jsxs)(d.A,{variant:"body2",children:["Failed to generate PDF: ",Se.error]}),(0,G.jsx)(m.A,{size:"small",onClick:()=>mt(e),sx:{mt:1},children:"Retry PDF Generation"})]}),Se.pdfUrl&&!Se.loading&&(0,G.jsxs)(u.A,{severity:"success",sx:{my:2},children:[(0,G.jsx)(d.A,{variant:"body2",fontWeight:"bold",children:"\u2713 PDF generated successfully!"}),(0,G.jsxs)(r.A,{sx:{mt:1},children:[(0,G.jsxs)(d.A,{variant:"caption",display:"block",children:["File: ",Se.fileName]}),(0,G.jsx)(d.A,{variant:"caption",display:"block",children:"Secure URL generated with token"}),(0,G.jsx)(m.A,{size:"small",variant:"outlined",onClick:()=>Dt(e.Do_Inv_No,Se.fileName),sx:{mt:1},startIcon:(0,G.jsx)(R.A,{fontSize:"small"}),children:"Test Download PDF"})]})]}),(0,G.jsxs)(r.A,{mb:2,children:[(0,G.jsx)(d.A,{variant:"subtitle1",fontWeight:"bold",mb:1,children:"Choose sending method:"}),(0,G.jsxs)(p.A,{value:t,onChange:e=>Qe(t=>(0,a.A)((0,a.A)({},t),{},{method:e.target.value})),children:[(0,G.jsx)(v.A,{value:"pdf-link",control:(0,G.jsx)(h.A,{size:"small"}),label:(0,G.jsx)(r.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,G.jsx)("span",{children:"Send PDF Download Link"})}),disabled:!Se.pdfUrl&&!Se.loading}),(0,G.jsx)(v.A,{value:"pdf-template",control:(0,G.jsx)(h.A,{size:"small"}),label:"Send with PDF Template"}),(0,G.jsx)(v.A,{value:"other-template",control:(0,G.jsx)(h.A,{size:"small"}),label:"Send with Text Template"})]})]}),"pdf-template"===t&&(0,G.jsx)(r.A,{children:(0,G.jsxs)(g.A,{fullWidth:!0,variant:"outlined",size:"small",children:[(0,G.jsx)(f.A,{children:"Select PDF Template"}),(0,G.jsxs)(x.A,{value:$e,onChange:e=>Je(e.target.value),label:"Select PDF Template",children:[(0,G.jsx)(A.A,{value:"",children:(0,G.jsx)("em",{children:"Select a PDF template"})}),at.length>0?at.map(e=>{const t=e.templateName||e.name,n=e.eventId||e.id;return(0,G.jsxs)(A.A,{value:t,children:[t," (",e.language||"en",")",e.templateStatus&&" - ".concat(e.templateStatus)]},n)}):(0,G.jsx)(A.A,{disabled:!0,children:"No PDF templates available"})]})]})}),"other-template"===t&&(0,G.jsx)(r.A,{children:(0,G.jsxs)(g.A,{fullWidth:!0,variant:"outlined",size:"small",children:[(0,G.jsx)(f.A,{children:"Select Text Template"}),(0,G.jsxs)(x.A,{value:$e,onChange:e=>Je(e.target.value),label:"Select Text Template",children:[(0,G.jsx)(A.A,{value:"",children:(0,G.jsx)("em",{children:"Select a text template"})}),lt.length>0?lt.map(e=>{const t=e.templateName||e.name,n=e.eventId||e.id;return(0,G.jsxs)(A.A,{value:t,children:[t," (",e.language||"en",")"]},n)}):(0,G.jsx)(A.A,{disabled:!0,children:"No text templates available"})]})]})}),$e&&t.includes("template")&&(0,G.jsxs)(r.A,{mt:3,p:2,border:1,borderColor:"divider",borderRadius:1,children:[(0,G.jsx)(d.A,{variant:"subtitle2",fontWeight:"bold",mb:1,children:"Preview:"}),(0,G.jsxs)(d.A,{variant:"body2",children:[(0,G.jsx)("strong",{children:"Template:"})," ",$e,(0,G.jsx)("br",{}),(0,G.jsx)("strong",{children:"Invoice:"})," ",null===e||void 0===e?void 0:e.Do_Inv_No,(0,G.jsx)("br",{}),(0,G.jsx)("strong",{children:"Customer:"})," ",null===e||void 0===e?void 0:e.retailerNameGet,(0,G.jsx)("br",{}),(0,G.jsx)("strong",{children:"Amount:"})," \u20b9",(0,o.jG)(null===e||void 0===e?void 0:e.Total_Invoice_value),Se.pdfUrl&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("br",{}),(0,G.jsx)("strong",{children:"PDF URL:"})," Will be included in message"]})]})]}),"pdf-link"===t&&Se.pdfUrl&&(0,G.jsxs)(r.A,{mt:3,p:2,border:1,borderColor:"divider",borderRadius:1,children:[(0,G.jsx)(d.A,{variant:"subtitle2",fontWeight:"bold",mb:1,children:"PDF Link Preview:"}),(0,G.jsxs)(d.A,{variant:"body2",children:["The customer will receive a WhatsApp message with a secure link to download the PDF invoice.",(0,G.jsx)("br",{}),(0,G.jsx)("br",{}),(0,G.jsx)("strong",{children:"Invoice PDF Details:"}),(0,G.jsx)("br",{}),"\u2022 File: ",Se.fileName,(0,G.jsx)("br",{}),"\u2022 Secure encrypted link",(0,G.jsx)("br",{}),"\u2022 Valid for 7 days",(0,G.jsx)("br",{}),"\u2022 Professional invoice format"]})]})]})})()}),(0,G.jsxs)(N.A,{children:[(0,G.jsx)(m.A,{onClick:ut,disabled:Ve.loading,children:"Cancel"}),(0,G.jsx)(m.A,{onClick:async()=>{const{order:e,method:t}=Ve;Qe(e=>(0,a.A)((0,a.A)({},e),{},{loading:!0}));try{var n;const t=(e=>{const t=X.A,n=e.Do_Inv_No.replace(/_/g,"/"),a=btoa(n);return"".concat(t,"sales/downloadPdf?Do_Inv_No=").concat(a)})(e),a=(null===(n=e.ConvertedInvoice)||void 0===n?void 0:n[0])||e,o=e.Do_Inv_No||"N/A",s=e.retailerNameGet||e.Retailer_Name||"Customer",i=new Date(a.Do_Date||e.Do_Date).toLocaleDateString("en-GB"),r=(a.Total_Invoice_value||e.Total_Invoice_value||0).toFixed(2);try{await fetch(t,{method:"HEAD"})}catch(l){console.warn("PDF URL test warning:",l.message)}const d={template:{name:"template_text",language:"en"},source:"crm",wabaNumber:J.Or,recipients:["91".concat(e.recipientPhone)],clientRefId:"invoice_".concat(o.replace(/\//g,"_"),"_").concat(Date.now()),params:{body:["".concat(s),"".concat(o),"".concat(i),"".concat(r),"SM TRADERS","".concat(t)]}},c=await Z.sendTemplateMessage(d);if(null===c||void 0===c||!c.status)throw console.error("WhatsApp API error:",c),new Error((null===c||void 0===c?void 0:c.message)||"Failed to send message");ct("WhatsApp message sent successfully!","success"),ut()}catch(o){console.error("Error sending WhatsApp:",o),ct("Failed to send message: ".concat(o.message),"error"),Qe(e=>(0,a.A)((0,a.A)({},e),{},{loading:!1}))}},variant:"contained",color:"success",startIcon:(0,G.jsx)(q.A,{}),disabled:Ve.loading||"template"===Ve.method&&!$e,children:Ve.loading?"Sending...":"Send WhatsApp"})]})]}),(0,G.jsx)(w.A,{open:Ke.open,autoHideDuration:6e3,onClose:()=>Ye(e=>(0,a.A)((0,a.A)({},e),{},{open:!1})),children:(0,G.jsx)(u.A,{severity:Ke.severity,onClose:()=>Ye(e=>(0,a.A)((0,a.A)({},e),{},{open:!1})),children:Ke.message})})]})}},48471:(e,t,n)=>{n.d(t,{Ay:()=>z,JT:()=>E,Lj:()=>P,wF:()=>R});var a=n(89379),l=n(65043),o=n(77739),s=n(17392),i=n(41020),r=n(30922),d=n(32143),c=n(2050),u=n(48734),m=n(28076),p=n(39652),v=n(12110),h=n(63336),g=n(79650),f=n(71806),x=n(84882),A=n(58093),y=n(73460),j=n(31159),b=n(22520),C=n(47968),_=n(692),D=n(8737),S=n(58558),I=n(30599),N=n(433),w=n(37762),T=(n(20557),n(11238)),F=n(70579);const k=(e,t)=>e.map(e=>{const n={};return t.forEach((t,a)=>{if(t.isVisible||t.Defult_Display)if(t.isCustomCell&&t.Cell){const l=t.Cell({row:e}),o=t.ColumnHeader?String(t.ColumnHeader).replace(/\s+/g,"_").toLowerCase():"field_".concat(a+1);"string"!==typeof l&&"number"!==typeof l&&"bigint"!==typeof l||(n[o]=l)}else{let a=t.Field_Name;n[a]=e[a]||""}}),n}),P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,a.A)({isVisible:s,Field_Name:e,Fied_Data:t,align:l,verticalAlign:o},n&&{ColumnHeader:n})},R=e=>{let{buttonsData:t=[],ToolTipText:n="Options"}=e;const[a,m]=(0,l.useState)(null),p=Boolean(a);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(o.A,{title:n,children:(0,F.jsx)(s.A,{"aria-describedby":p,onClick:e=>{m(e.currentTarget)},className:"ms-2",size:"small",children:(0,F.jsx)(S.A,{})})}),(0,F.jsx)(i.Ay,{open:p,anchorEl:a,onClose:()=>{m(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,F.jsx)(r.A,{children:t.map((e,t)=>(0,F.jsxs)(d.A,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,F.jsx)(c.A,{children:null===e||void 0===e?void 0:e.icon}),(0,F.jsx)(u.A,{children:null===e||void 0===e?void 0:e.name})]},t))})})]})},E=(e,t)=>{switch(t){case"number":return e?(0,b.jG)(e):e;case"date":return e?(0,b.yc)(e):e;case"time":return e?(0,b.JG)(e):e;case"string":return e;default:return""}},O=e=>{let{dataArray:t=[],columns:n=[],onClickFun:o=null,isExpendable:i=!1,expandableComp:r=null,tableMaxHeight:d=550,initialPageCount:c=20,EnableSerialNumber:u=!1,CellSize:S="small",disablePagination:P=!1,title:O="",PDFPrintOption:z=!1,ExcelPrintOption:L=!1,maxHeightOption:M=!1,ButtonArea:W=null,MenuButtons:G=[],bodyFontSizePx:B=13,headerFontSizePx:H=13}=e;const[V,Q]=(0,l.useState)(0),[U,q]=(0,l.useState)(c),[$,J]=(0,l.useState)([]),[K,Y]=(0,l.useState)(!0),Z=K&&M?" max-content ":d,X=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],ee=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],te=(e=>{if(!$.length)return e;return[...e].sort((e,t)=>{for(const n of $){const{columnId:a,direction:l}=n,o=e[a],s=t[a];if(o!==s)return"asc"===l?o>s?1:-1:o<s?1:-1}return 0})})(t),ne=V*U,ae=ne+U,le=te.slice(ne,ae),oe=e=>{let{row:t,index:a}=e;const[d,c]=(0,l.useState)(!1),v="20px";return(0,F.jsxs)(l.Fragment,{children:[(0,F.jsxs)(m.A,{children:[!0===i&&r&&(0,F.jsx)(p.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(B,"px")},children:(0,F.jsx)(s.A,{size:"small",onClick:()=>c(e=>!e),children:d?(0,F.jsx)(D.A,{sx:{fontSize:v}}):(0,F.jsx)(_.A,{sx:{fontSize:v}})})}),!0===u&&(0,F.jsx)(p.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(B,"px")},children:U*V+a+1}),null===n||void 0===n?void 0:n.map((e,n)=>{var l,s;const i=(0,b.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,b.id)(null===e||void 0===e?void 0:e.isVisible,1),r=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,d=!r,c=(t,n,a)=>null!==e&&void 0!==e&&e.tdClass?" ".concat(null===e||void 0===e?void 0:e.tdClass({row:t,Field_Name:n,index:a})," "):"",u=e.align?null===(l=X.find(t=>t.type===String(e.align).toLowerCase()))||void 0===l?void 0:l.class:"",m=e.verticalAlign?null===(s=ee.find(t=>t.type===String(e.verticalAlign).toLowerCase()))||void 0===s?void 0:s.class:" vctr ";if(i&&d){const l=Object.entries(t).find(t=>{let[n]=t;return n===e.Field_Name});return(0,F.jsx)(p.A,{className:"border-end ".concat(u," ").concat(m," ").concat(c(t,e.Field_Name,a)),sx:{fontSize:"".concat(B,"px")},onClick:()=>o?o(t):console.log("Function not supplied"),children:l?E(l[1],null===e||void 0===e?void 0:e.Fied_Data):"-"},n)}return i&&r?(0,F.jsx)(p.A,{className:"border-end ".concat(u," ").concat(m," ").concat(c(t,e.Field_Name,a)),sx:{fontSize:"".concat(B,"px")},children:e.Cell({row:t,Field_Name:e.Field_Name,index:a})},n):(0,F.jsx)(p.A,{sx:{fontSize:"".concat(B,"px")},className:"border-end ".concat(u," ").concat(m),children:"-"},n)})]}),!0===i&&r&&d&&(0,F.jsx)(m.A,{children:(0,F.jsx)(p.A,{colSpan:Number(null===n||void 0===n?void 0:n.length)+(!0===u?2:1),children:r({row:t,index:a})})})]})};return(0,F.jsxs)(v.A,{className:"rounded-3 bg-white overflow-hidden",component:h.A,children:[(0,F.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(z||L||G.length>0||M)&&(0,F.jsx)(R,{ToolTipText:"Table Options",buttonsData:[...M?[{name:"Max Height",icon:K?(0,F.jsx)(N.A,{fontSize:"small",color:"primary"}):(0,F.jsx)(I.A,{fontSize:"small"}),onclick:()=>Y(e=>!e),disabled:(0,b.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...z?[{name:"PDF Print",icon:(0,F.jsx)(C.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const n=new w.default,l=k(e,t),o=t.filter(e=>e.isVisible||e.Defult_Display).map(e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase()),s=l.map(e=>o.map(t=>e[t])).map((e,t)=>(0,a.A)((0,a.A)({},e),{},{Sno:t+1}));n.autoTable({head:[o],body:s}),n.save("table.pdf")}catch(n){console.error(n)}})(t,n),disabled:(0,b.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...L?[{name:"Excel Print",icon:(0,F.jsx)(C.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const n=k(e,t),a=T.Wp.json_to_sheet(n),l=T.Wp.book_new();T.Wp.book_append_sheet(l,a,"Data"),T._h(l,"table.xlsx")}catch(n){console.error(n)}})(t,n),disabled:(0,b.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...G]}),W&&W,O&&(0,F.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:O})]}),(0,F.jsx)(g.A,{sx:{maxHeight:Z},children:(0,F.jsxs)(f.A,{stickyHeader:!0,size:S,children:[(0,F.jsx)(x.A,{children:(0,F.jsxs)(m.A,{children:[i&&r&&(0,F.jsx)(p.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(H,"px"),backgroundColor:"#EDF0F7"},children:"#"}),u&&(0,F.jsx)(p.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(H,"px"),backgroundColor:"#EDF0F7"},children:"SNo"}),n.map((e,t)=>{const n=(0,b.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,b.id)(null===e||void 0===e?void 0:e.isVisible,1),l=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,o=$.find(t=>t.columnId===e.Field_Name),s=o?o.direction:"asc";var i,r,d,c;return n?l?(0,F.jsx)(p.A,{className:"fw-bold border-end border-top "+(e.align?null===(i=X.find(t=>t.type===String(e.align).toLowerCase()))||void 0===i?void 0:i.class:""),sx:{fontSize:"".concat(H,"px"),backgroundColor:"#EDF0F7"},sortDirection:!!o&&s,children:(0,F.jsx)(A.A,{active:!!o,direction:s,onClick:()=>(e=>{const t=$.find(t=>t.columnId===e);if(t){const n="asc"===t.direction;J($.map(t=>t.columnId===e?(0,a.A)((0,a.A)({},t),{},{direction:n?"desc":"asc"}):t))}else J([...$,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(r=e.Field_Name)||void 0===r?void 0:r.replace(/_/g," "))})},t):(0,F.jsx)(p.A,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(d=X.find(t=>t.type===String(e.align).toLowerCase()))||void 0===d?void 0:d.class:""),sx:{fontSize:"".concat(H,"px"),backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(c=e.Field_Name)||void 0===c?void 0:c.replace(/_/g," "))},t):null})]})}),(0,F.jsxs)(y.A,{children:[(P?te:le).map((e,t)=>(0,F.jsx)(oe,{row:e,index:t},t)),0===t.length&&(0,F.jsx)(m.A,{children:(0,F.jsx)(p.A,{colSpan:n.length+(!0===i&&r?1:0)+(!0===u?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!P&&0!==le.length&&(0,F.jsx)("div",{className:"p-2 pb-0",children:(0,F.jsx)(j.A,{component:"div",count:t.length,page:V,onPageChange:(e,t)=>{Q(t)},rowsPerPage:U,onRowsPerPageChange:e=>{q(parseInt(e.target.value,10)),Q(0)},rowsPerPageOptions:Array.from(new Set([c,5,20,50,100,200,500,1e3,2e3])).sort((e,t)=>e-t),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};O.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const z=O},63406:(e,t,n)=>{n.d(t,{zU:()=>i,ex:()=>r,MR:()=>s,Ap:()=>o,FX:()=>d});var a=n(89379);const l=n.p+"static/media/smt.aa4d4f940bbebff07a57.png",o={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},s={menu:(e,t)=>(0,a.A)((0,a.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,a.A)((0,a.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,a.A)((0,a.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,t)=>(0,a.A)((0,a.A)({},e),{},{backgroundColor:t.isSelected?"#2684FF":t.isFocused?"#E2ECF9":"white",color:t.isSelected?"white":"#333",padding:"10px 12px"})},i=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],r=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:l,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],d=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]}}]);
//# sourceMappingURL=982.92722414.chunk.js.map