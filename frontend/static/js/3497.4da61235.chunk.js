"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3497],{18584:(e,t,d)=>{d.d(t,{A:()=>l});var o=d(59662),n=d(70579);const l=(0,o.A)((0,n.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done")},26494:(e,t,d)=>{d.d(t,{A:()=>h});var o=d(58168),n=d(98587),l=d(65043),a=d(58387),s=d(68606),r=d(34535),i=d(6431),c=d(57056),_=d(32400);function u(e){return(0,_.Ay)("MuiCardContent",e)}(0,c.A)("MuiCardContent",["root"]);var v=d(70579);const m=["className","component"],I=(0,r.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),h=l.forwardRef(function(e,t){const d=(0,i.b)({props:e,name:"MuiCardContent"}),{className:l,component:r="div"}=d,c=(0,n.A)(d,m),_=(0,o.A)({},d,{component:r}),h=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},u,t)})(_);return(0,v.jsx)(I,(0,o.A)({as:r,className:(0,a.A)(h.root,l),ownerState:_,ref:t},c))})},34104:(e,t,d)=>{d.d(t,{A:()=>p,K:()=>h});var o=d(89379),n=d(65043),l=d(97707),a=d(83462),s=d(26600),r=d(17392),i=d(35316),c=d(11906),_=d(65074),u=d(18584),v=d(97280),m=d(14844),I=(d(63406),d(70579));const h=(e,t,d)=>{var o;const n=null===(o=(0,l.$r)(d).find(d=>(0,l.id)(null===d||void 0===d?void 0:d.Product_Id,e)&&(0,l.id)(null===d||void 0===d?void 0:d.Godown_Id,t)))||void 0===o?void 0:o.Act_Bal_Qty;return(0,l.Ro)(n)},p=e=>{let{loadingOn:t,loadingOff:d,open:p,onClose:x,retailer:A,children:N,selectedItems:j=[],setSelectedItems:g,staffArray:y=[],setStaffArray:b,products:f=[],GST_Inclusive:w,IS_IGST:S,invoiceInfo:T={},setInvoiceInfo:C,godowns:D=[],stockInGodown:G=[]}=e;const R=(0,l.id)(w,1),Q=(0,l.id)(w,2),[E,B]=(0,n.useState)([]),[k,P]=(0,n.useState)({Fromdate:(0,l.ny)(),Todate:(0,l.ny)(),search:!1,Godown:{value:"",label:"Select Godown For Stock Details"}});(0,n.useEffect)(()=>{if((0,l.IQ)(A)&&p){const{Fromdate:e,Todate:o}=k;t&&t(),(0,_.z)({address:"sales/saleOrder?Fromdate=".concat(e,"&Todate=").concat(o,"&Retailer_Id=").concat(A)}).then(e=>{e.success?B(e.data):B([])}).catch(e=>console.error(e)).finally(()=>{d&&d()})}},[k.search]);const F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(arguments.length>2?arguments[2]:void 0)return C(e=>(0,o.A)((0,o.A)({},e),{},{So_No:""})),void g([]);C(t=>(0,o.A)((0,o.A)({},t),{},{So_No:Number(null===e||void 0===e?void 0:e.So_Id)})),g(d=>{const o=[...d];return(0,l.$r)(null===e||void 0===e?void 0:e.Products_List).map((e,d)=>Object.fromEntries(Object.entries(v.a4).map(n=>{var a,s,r,i,c,_,u,v;let[I,h]=n;const p=(e=>{var t;return null!==(t=null===f||void 0===f?void 0:f.find(t=>(0,l.id)(null===t||void 0===t?void 0:t.Product_Id,e)))&&void 0!==t?t:{}})(e.Item_Id),x=S?p.Igst_P:p.Gst_P,A=x>0,{Item_Rate:N,Bill_Qty:j,Amount:g}=e,y=Q?"zerotax":R?"remove":"add",b=(0,m.v)(N,x,y),w=(0,m.v)(g,x,y),T=S?0:w.cgst_per,C=S?w.igst_per:0,D=S?0:w.cgst_amount,G=S?w.igst_amount:0;switch(I){case"rowId":return[I,(0,l.aG)()];case"S_No":return[I,null!==(a=d+1)&&void 0!==a?a:h];case"Item_Id":return[I,null!==(s=e.Item_Id)&&void 0!==s?s:h];case"Item_Name":return[I,null!==(r=null===p||void 0===p?void 0:p.Product_Name)&&void 0!==r?r:h];case"Item_Rate":return[I,(0,l.Ro)(N)];case"Bill_Qty":case"Act_Qty":case"Alt_Act_Qty":case"Total_Qty":return[I,(0,l.Ro)(j)];case"Amount":return[I,g];case"HSN_Code":return[I,null!==(i=p.HSN_Code)&&void 0!==i?i:h];case"Unit_Id":return[I,null!==(c=e.Unit_Id)&&void 0!==c?c:h];case"Act_unit_Id":return[I,null!==(_=e.Unit_Id)&&void 0!==_?_:h];case"Alt_Act_Unit_Id":return[I,null!==(u=e.Unit_Id)&&void 0!==u?u:h];case"Unit_Name":return[I,null!==(v=e.Units)&&void 0!==v?v:h];case"GoDown_Id":{var E;const d=(0,l.IQ)(null===t||void 0===t?void 0:t.Godown_Id),n=(0,l.IQ)(null===t||void 0===t?void 0:t.Item_Id),a=(0,l.id)(null===e||void 0===e?void 0:e.Item_Id,null===t||void 0===t?void 0:t.Item_Id),s=null===(E=o.find(t=>(0,l.id)(t.Item_Id,null===e||void 0===e?void 0:e.Item_Id)))||void 0===E?void 0:E.GoDown_Id;return[I,d&&n&&a?t.Godown_Id:(0,l.IQ)(s)?s:h]}case"Taxable_Rate":return[I,b.base_amount];case"Taxble":return[I,A?1:0];case"Taxable_Amount":return[I,w.base_amount];case"Tax_Rate":return[I,x];case"Cgst":case"Sgst":return[I,null!==T&&void 0!==T?T:0];case"Cgst_Amo":case"Sgst_Amo":return[I,Q?0:D];case"Igst":return[I,null!==C&&void 0!==C?C:0];case"Igst_Amo":return[I,Q?0:G];case"Final_Amo":return[I,w.with_tax];default:return[I,h]}})))});const d=[...new Map((0,l.$r)(null===e||void 0===e?void 0:e.Staff_Involved_List).filter(e=>!y.some(t=>(0,l.id)(t.Emp_Id,e.Involved_Emp_Id))).map(e=>[e.Involved_Emp_Id,e])).values()];d.length>0&&b(e=>[...e,...d.map(e=>Object.fromEntries(Object.entries(v.Ud).map(t=>{let[d,o]=t;switch(d){case"Emp_Id":return[d,null===e||void 0===e?void 0:e.Involved_Emp_Id];case"Emp_Name":return[d,null===e||void 0===e?void 0:e.EmpName];case"Emp_Type_Id":return[d,null===e||void 0===e?void 0:e.Cost_Center_Type_Id];default:return[d,o]}})))])},M=()=>{x&&x(),B([])};return(0,I.jsxs)(I.Fragment,{children:[N,(0,I.jsxs)(a.A,{open:p,onClose:M,fullScreen:!0,children:[(0,I.jsx)(s.A,{children:(0,I.jsxs)("div",{className:"d-flex flex-wrap align-items-center ",children:[(0,I.jsx)("span",{className:"flex-grow-1",children:"Select Sale Order"}),(0,I.jsx)(r.A,{onClick:M,color:"success",children:(0,I.jsx)(u.A,{className:"fa-20"})})]})}),(0,I.jsxs)(i.A,{children:[(0,I.jsxs)("div",{className:"d-flex flex-wrap align-items-end",children:[(0,I.jsxs)("div",{className:"p-2",children:[(0,I.jsx)("label",{className:"d-block ms-2",children:"From Date"}),(0,I.jsx)("input",{className:"cus-inpt p-2 w-auto",type:"date",value:null===k||void 0===k?void 0:k.Fromdate,onChange:e=>P(t=>(0,o.A)((0,o.A)({},t),{},{Fromdate:e.target.value})),required:!0})]}),(0,I.jsxs)("div",{className:"p-2",children:[(0,I.jsx)("label",{className:"d-block ms-2",children:"To Date"}),(0,I.jsx)("input",{className:"cus-inpt p-2 w-auto",type:"date",min:k.Fromdate,value:null===k||void 0===k?void 0:k.Todate,onChange:e=>P(t=>(0,o.A)((0,o.A)({},t),{},{Todate:e.target.value})),required:!0})]}),(0,I.jsx)("div",{className:"p-2",children:(0,I.jsx)(c.A,{variant:"outlined",type:"button",onClick:()=>P(e=>(0,o.A)((0,o.A)({},e),{},{search:!e.search})),children:"search"})})]}),(0,I.jsx)("br",{}),E.map((e,t)=>{const{So_Inv_No:d,So_Date:o,VoucherTypeGet:n,Branch_Name:a,Sales_Person_Name:s,Total_Tax:r,Total_Invoice_value:i,Products_List:c}=e,_=(0,l.id)(null===T||void 0===T?void 0:T.So_No,e.So_Id);return(0,I.jsx)("div",{className:"container-fluid",children:(0,I.jsxs)("div",{className:"\n                                        invoice-card bg-white p-4 shadow-sm mb-4 border rounded  \n                                        ".concat(_?" border-primary ":"","\n                                        "),children:[(0,I.jsxs)("h5",{className:"d-flex align-items-center flex-wrap",children:[(0,I.jsx)("span",{className:"me-2",children:(0,I.jsx)("input",{className:"form-check-input shadow-none pointer",style:{padding:"0.7em"},type:"checkbox",checked:_,onChange:()=>{F(e,null,!!_)}})}),(0,I.jsxs)("span",{children:["Invoice No: ",(0,I.jsx)("span",{className:"text-primary",children:d})]})]}),(0,I.jsxs)("div",{className:"invoice-header d-flex justify-content-between flex-wrap border-bottom pb-3 mb-3",children:[(0,I.jsxs)("div",{children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("strong",{children:"Invoice Date:"})," ",(0,l.yc)(o)]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("strong",{children:"Voucher Type:"})," ",n]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("strong",{children:"Branch:"})," ",a]})]}),(0,I.jsxs)("div",{className:"text-end",children:[(0,I.jsxs)("h5",{className:"mt-2",children:[(0,I.jsx)("strong",{children:"Total Invoice:"})," \u20b9",i]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("strong",{children:"Tax:"})," \u20b9",r]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("strong",{children:"Salesperson:"})," ",s]})]})]}),(0,I.jsx)("div",{className:"table-responsive",children:(0,I.jsxs)("table",{className:"table table-bordered table-striped product-table",children:[(0,I.jsx)("thead",{className:"table-light",children:(0,I.jsx)("tr",{children:["#","Product","Qty","Rate","Amount","Tax %","Final Amount","Godown"].map((e,t)=>(0,I.jsx)("th",{style:{minWidth:"150px",maxWidth:"160px"},children:e},t))})}),(0,I.jsx)("tbody",{children:c.map((t,d)=>{var o;return(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{children:d+1}),(0,I.jsx)("td",{children:t.Product_Name}),(0,I.jsxs)("td",{children:[t.Bill_Qty,(0,l.IQ)(k.Godown.value)&&" (Bal: "+h(t.Item_Id,k.Godown.value,G)+") "]}),(0,I.jsxs)("td",{children:["\u20b9",t.Item_Rate]}),(0,I.jsxs)("td",{children:["\u20b9",t.Amount]}),(0,I.jsxs)("td",{children:[t.Tax_Rate,"%"]}),(0,I.jsxs)("td",{children:["\u20b9",t.Final_Amo]}),(0,I.jsx)("td",{children:(0,I.jsxs)("select",{disabled:!_,className:"cus-inpt p-2",value:null===(o=(0,l.$r)(D).find(e=>(0,l.$r)(j).find(d=>(0,l.id)(d.Item_Id,null===t||void 0===t?void 0:t.Item_Id)&&_&&(0,l.id)(null===e||void 0===e?void 0:e.Godown_Id,null===d||void 0===d?void 0:d.GoDown_Id))))||void 0===o?void 0:o.Godown_Id,onChange:d=>F(e,{Godown_Id:d.target.value,Item_Id:null===t||void 0===t?void 0:t.Item_Id},!1),children:[(0,I.jsx)("option",{value:"",disabled:!0,children:"Select"}),(0,I.jsx)("optgroup",{label:"Stock-Available-Godown",children:(0,l.$r)(D).filter(e=>(0,l.$r)(G).some(d=>(0,l.id)(null===d||void 0===d?void 0:d.Godown_Id,null===e||void 0===e?void 0:e.Godown_Id)&&(0,l.id)(null===t||void 0===t?void 0:t.Item_Id,null===d||void 0===d?void 0:d.Product_Id))).map((e,d)=>(0,I.jsx)("option",{value:null===e||void 0===e?void 0:e.Godown_Id,children:(null===e||void 0===e?void 0:e.Godown_Name)+" (Bal: "+h(null===t||void 0===t?void 0:t.Item_Id,null===e||void 0===e?void 0:e.Godown_Id,G)+")"},d))}),(0,I.jsx)("optgroup",{label:"Other-Godown",children:(0,l.$r)(D).filter(e=>!(0,l.$r)(G).some(d=>(0,l.id)(null===d||void 0===d?void 0:d.Godown_Id,null===e||void 0===e?void 0:e.Godown_Id)&&(0,l.id)(null===t||void 0===t?void 0:t.Item_Id,null===d||void 0===d?void 0:d.Product_Id))).map((e,t)=>(0,I.jsx)("option",{value:null===e||void 0===e?void 0:e.Godown_Id,children:null===e||void 0===e?void 0:e.Godown_Name},t))})]})})]},t.SO_St_Id)})})]})}),(0,I.jsx)("div",{className:"invoice-summary border-top pt-3 mt-3 text-end"})]})},t)})]})]})]})}},34496:(e,t,d)=>{d.d(t,{A:()=>l});var o=d(59662),n=d(70579);const l=(0,o.A)((0,n.jsx)("path",{d:"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z"}),"ClearAll")},51387:(e,t,d)=>{d.d(t,{A:()=>l});var o=d(59662),n=d(70579);const l=(0,o.A)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},70141:(e,t,d)=>{d.d(t,{A:()=>l});var o=d(59662),n=d(70579);const l=(0,o.A)((0,n.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},83560:(e,t,d)=>{d.d(t,{A:()=>l});var o=d(59662),n=d(70579);const l=(0,o.A)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},97280:(e,t,d)=>{d.d(t,{$B:()=>m,NP:()=>s,Q4:()=>i,Ud:()=>u,WS:()=>a,a4:()=>c,ju:()=>_,vD:()=>v,zA:()=>r});var o=d(89379),n=d(97707);const l=(0,n.aN)().user;function a(e){const{outstanding:t,creditLimit:d,creditDays:o,recentDate:l}=e,a=new Date(l),s=new Date(a);s.setDate(s.getDate()+(0,n.Ro)(o));const r=new Date,i=(0,n.Ro)(t)>(0,n.Ro)(d),c=r>s;return!((0,n.Ro)(d)>0&&i||(0,n.Ro)(o)>0&&c)}const s={outstanding:0,creditLimit:0,creditDays:0,recentDate:new Date,invoiceCreationStatus:null,forceCreateInvoice:!1,dialog:!1},r={id:null,retailerId:null,deliveryName:"",phoneNumber:"",cityName:"",deliveryAddress:"",gstNumber:"",stateName:""},i={Do_Id:"",Do_No:"",Do_Year:"",Do_Inv_No:"",Voucher_Type:"",Do_Date:(0,n.ny)(),Retailer_Id:"",Retailer_Name:"",Delivery_Person_Id:"",Branch_Id:l.BranchId||"",GST_Inclusive:2,IS_IGST:0,Narration:"",Cancel_status:3,So_No:"",Trans_Type:"",CSGT_Total:0,SGST_Total:0,IGST_Total:0,Total_Expences:0,Round_off:0,Total_Before_Tax:0,Total_Tax:0,Total_Invoice_value:0,Stock_Item_Ledger_Name:"",Ref_Inv_Number:"",deliveryAddressId:null,deliveryAddressDetails:r,shipingAddressId:null,shipingAddressDetails:r,Delivery_Status:0,Payment_Mode:0,Payment_Status:0,Alter_Id:"",Created_by:null===l||void 0===l?void 0:l.UserId,Altered_by:null===l||void 0===l?void 0:l.UserId,Created_on:"",Alterd_on:""},c={rowId:"",DO_St_Id:"",Do_Date:"",Delivery_Order_Id:"",GoDown_Id:"",S_No:"",Item_Id:"",Item_Name:"",HSN_Code:"",Taxble:"",Batch_Name:"",Bill_Qty:"",Alt_Bill_Qty:"",Act_Qty:"",Alt_Act_Qty:"",Free_Qty:"",Total_Qty:"",Item_Rate:"",Taxable_Rate:"",Amount:"",Unit_Id:"",Unit_Name:"",Act_unit_Id:"",Alt_Act_Unit_Id:"",Taxable_Amount:"",Tax_Rate:"",Cgst:"",Sgst:"",Igst:"",Cgst_Amo:"",Sgst_Amo:"",Igst_Amo:"",Final_Amo:"",Created_on:""},_={Id:"",Do_Id:"",Sno:"",Expense_Id:"",Cgst:0,Cgst_Amo:0,Sgst:0,Sgst_Amo:0,Igst:0,Igst_Amo:0,Expence_Value:0},u={Id:"",Do_Id:"",Emp_Id:"",Emp_Name:"",Emp_Type_Id:""},v=(e,t)=>{const{deliveryName:d="",phoneNumber:n="",cityName:l="",deliveryAddress:a="",gstNumber:s="",stateName:r="",id:i=null}=e;t(e=>(0,o.A)((0,o.A)({},e),{},{deliveryName:d,phoneNumber:n,cityName:l,deliveryAddress:a,gstNumber:s,stateName:r,id:i}))},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=["Broker","Others5","Transport"];return(0,n.$r)(e).filter(e=>t.includes(null===e||void 0===e?void 0:e.Cost_Category)).map(e=>(0,o.A)((0,o.A)({},u),{},{Emp_Type_Id:null===e||void 0===e?void 0:e.Cost_Category_Id}))}}}]);
//# sourceMappingURL=3497.4da61235.chunk.js.map