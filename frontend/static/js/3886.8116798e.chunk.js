"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3886],{10489:(e,a,t)=>{t.d(a,{A:()=>n});t(65043);var l=t(83462),r=t(26600),s=t(35316),i=t(29347),d=t(11906),o=t(70579);const n=e=>{let{open:a=!1,onClose:t,children:n,title:c,onSubmit:u,submitText:m="Submit",closeText:_="Close",maxWidth:A="sm",fullWidth:p=!0,isSubmit:v=!1,startAction:g}=e;return(0,o.jsxs)(l.A,{open:a,onClose:t,fullWidth:p,maxWidth:A,children:[c&&(0,o.jsx)(r.A,{children:c}),(0,o.jsx)(s.A,{children:n}),(0,o.jsxs)(i.A,{className:"".concat(g?"d-flex justify-content-between":""),children:[g&&(0,o.jsx)("div",{children:g}),(0,o.jsxs)("div",{children:[(0,o.jsx)(d.A,{onClick:t,children:_}),u&&(0,o.jsx)(d.A,{variant:"contained",onClick:u,type:v?"submit":"button",className:"ms-2",children:m})]})]})]})}},74006:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var l=t(89379),r=t(65043),s=t(12110),i=t(77739),d=t(17392),o=t(26494),n=t(22520),c=t(48471),u=t(70579);const m=e=>{let{dataArray:a,days:t}=e;const s=(0,r.useMemo)(()=>a.map(e=>{var a,r,s,i,d;return(0,l.A)((0,l.A)({},e),{},{M2_Avg:null!==(a=(0,n.SX)(e.ALL_Avg_M2,(0,n.Dl)(2)/2))&&void 0!==a?a:0,M3_Avg:null!==(r=(0,n.SX)(e.ALL_Avg_M3,(0,n.Dl)(3)/3))&&void 0!==r?r:0,M6_Avg:null!==(s=(0,n.SX)(e.ALL_Avg_M6,(0,n.Dl)(6)/6))&&void 0!==s?s:0,M9_Avg:null!==(i=(0,n.SX)(e.ALL_Avg_M9,(0,n.Dl)(9)/9))&&void 0!==i?i:0,M12_Avg:null!==(d=(0,n.SX)(e.ALL_Avg_One_Year,(0,n.Dl)(12)/12))&&void 0!==d?d:0,Billed_Qty:(0,n.Wd)(e.StockTransaction,"bill_qty"),Billed_Avg:(0,n.Wd)(e.StockTransaction,"bill_qty")/t,StockTransaction:e.StockTransaction.map(e=>{var a,t,r,s,i;return(0,l.A)((0,l.A)({},e),{},{Grade_Item_Group:e.Item_Name_Modified,M2_Avg:null!==(a=(0,n.SX)(e.M2_AVG_Qty,(0,n.Dl)(2)/2))&&void 0!==a?a:0,M3_Avg:null!==(t=(0,n.SX)(e.M3_AVG_Qty,(0,n.Dl)(3)/3))&&void 0!==t?t:0,M6_Avg:null!==(r=(0,n.SX)(e.M6_AVG_Qty,(0,n.Dl)(6)/6))&&void 0!==r?r:0,M9_Avg:null!==(s=(0,n.SX)(e.M9_AVG_Qty,(0,n.Dl)(9)/9))&&void 0!==s?s:0,M12_Avg:null!==(i=(0,n.SX)(e.One_Year_AVG_Qty,(0,n.Dl)(12)/12))&&void 0!==i?i:0})})})}).map(e=>(0,l.A)((0,l.A)({},e),{},{Billed_Qty:(0,n.Wd)(e.StockTransaction,"bill_qty")})),[a]);return(0,u.jsx)(r.Fragment,{children:(0,u.jsx)(c.Ay,{dataArray:s,isExpendable:!0,columns:[{Field_Name:"Stock_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"Billed_Qty",isVisible:1,Fied_Data:"number"},{Field_Name:"Billed_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}],expandableComp:e=>{let{row:a}=e;return(0,u.jsx)(c.Ay,{initialPageCount:10,dataArray:Array.isArray(a.StockTransaction)?a.StockTransaction:[],columns:[{Field_Name:"Grade_Item_Group",isVisible:1,Fied_Data:"string"},{Field_Name:"bill_qty",isVisible:1,Fied_Data:"number"},{Field_Name:"M2_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M3_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M6_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M9_Avg",isVisible:1,Fied_Data:"number"},{Field_Name:"M12_Avg",isVisible:1,Fied_Data:"number"}]})},tableMaxHeight:540})})};var _=t(47805),A=t(65074),p=t(14973),v=t(592);const g=e=>{let{row:a,Fromdate:t,Todate:s}=e;const[i,d]=(0,r.useState)([]),[o,n]=(0,r.useState)([]),[c,m]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{m(!0),(0,A.z)({address:"reports/salesReport/ledger/itemDetails?Fromdate=".concat(t,"&Todate=").concat(s,"&Ledger_Id=").concat(null===a||void 0===a?void 0:a.Ledger_Tally_Id)}).then(e=>{let{success:a,data:t,others:r}=e;if(a){const{dataTypeInfo:e}=r;d(t),n(a=>(0,l.A)((0,l.A)({},a),{},{salesInfo:Array.isArray(e)?e:[]}))}else d([])}).catch(e=>console.error(e)).finally(()=>{m(!1)})},[null===a||void 0===a?void 0:a.Ledger_Tally_Id,t,s]),c?(0,u.jsx)("h5",{className:"text-center text-primary ",children:"Loading..."}):(0,u.jsx)(v.A,{dataArray:i,columns:o.salesInfo})},y=e=>{let{dataArray:a,colTypes:t,Fromdate:l,Todate:s,loadingOn:i,loadingOff:d}=e;const o=(0,r.useMemo)(()=>t.map((e,a)=>{var t;return{Field_Name:null===e||void 0===e?void 0:e.Column_Name,ColumnHeader:null===e||void 0===e||null===(t=e.Column_Name)||void 0===t?void 0:t.replace(/_/g," "),Fied_Data:null===e||void 0===e?void 0:e.Data_Type,isVisible:a<10?1:0,OrderBy:a+1}}),[t]);return(0,u.jsx)("div",{className:"p-2",children:(0,u.jsx)(p.A,{title:"Ledger Based Sales Report",dataArray:a,columns:o,ExcelPrintOption:!0,PDFPrintOption:!0,maxHeightOption:!0,EnableSerialNumber:!0,headerFontSizePx:12,bodyFontSizePx:12,enableGlobalSearch:!0,isExpendable:!0,expandableComp:e=>{let{row:a}=e;return(0,u.jsx)(g,{row:a,Fromdate:l,Todate:s})},loadingOn:i,loadingOff:d,stateName:"ledger_based_sales_report",stateUrl:"/reports/salesReport/ledger",stateGroup:"sales_reports"})})},b=e=>{let{dataArray:a,colTypes:t,loadingOn:l,loadingOff:s}=e;const i=(0,r.useMemo)(()=>t.map((e,a)=>{var t;return{Field_Name:null===e||void 0===e?void 0:e.Column_Name,ColumnHeader:null===e||void 0===e||null===(t=e.Column_Name)||void 0===t?void 0:t.replace(/_/g," "),Fied_Data:null===e||void 0===e?void 0:e.Data_Type,isVisible:a<10?1:0,OrderBy:a+1}}),[t]);return(0,u.jsx)("div",{className:"p-2",children:(0,u.jsx)(p.A,{title:"Item Based Sales Report",dataArray:a,columns:i,ExcelPrintOption:!0,PDFPrintOption:!0,maxHeightOption:!0,EnableSerialNumber:!0,headerFontSizePx:12,bodyFontSizePx:12,enableGlobalSearch:!0,loadingOn:l,loadingOff:s,stateName:"item_based_sales_report",stateUrl:"/reports/salesReport/",stateGroup:"sales_reports_item_based"})})},x=e=>{let{loadingOn:a,loadingOff:t}=e;const c=JSON.parse(localStorage.getItem("user")),[p,v]=(0,r.useState)(null),[g,x]=(0,r.useState)({salesInfo:[],salesItemInfo:[]}),[h,F]=(0,r.useState)(null),[f,D]=(0,r.useState)({Fromdate:(0,n.IS)(1),Todate:(0,n.ny)(),ReportType:"LedgerBased",filterDialog:!1,reload:!0});(0,r.useEffect)(()=>{v(null),F(null),x({salesInfo:[],salesItemInfo:[]}),(0,A.z)({address:"reports/salesReport/ledger?Fromdate=".concat(null===f||void 0===f?void 0:f.Fromdate,"&Todate=").concat(null===f||void 0===f?void 0:f.Todate),headers:{Db:null===c||void 0===c?void 0:c.Company_id}}).then(e=>{let{success:a,data:t,others:r}=e;if(a){const{dataTypeInfo:e}=r;v(t),x(a=>(0,l.A)((0,l.A)({},a),{},{salesInfo:Array.isArray(e)?e:[]}))}else v([])}).catch(console.error),(0,A.z)({address:"reports/salesReport/products?Fromdate=".concat(null===f||void 0===f?void 0:f.Fromdate,"&Todate=").concat(null===f||void 0===f?void 0:f.Todate),headers:{Db:null===c||void 0===c?void 0:c.Company_id}}).then(e=>{let{success:a,data:t,others:r}=e;if(a){const{LOSAbstract:e}=r;x(a=>(0,l.A)((0,l.A)({},a),{},{salesItemInfo:(0,n.$r)(e)})),F(t)}else F([])}).catch(e=>console.error(e))},[f.reload]);const S=(0,n.kY)(new Date(f.Fromdate),new Date(f.Todate));return(0,u.jsx)(r.Fragment,{children:(0,u.jsxs)(s.A,{className:"mt-3",children:[(0,u.jsxs)("div",{className:"px-3 py-2 d-flex justify-content-between align-items-center fw-bold text-dark",style:{backgroundColor:"#eae0cc"},children:[(0,u.jsx)("span",{children:(0,u.jsxs)("form",{onSubmit:e=>{e.preventDefault(),D(e=>(0,l.A)((0,l.A)({},e),{},{reload:!e.reload}))},children:[(0,u.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5 me-1",value:f.Fromdate,onChange:e=>D(a=>(0,l.A)((0,l.A)({},a),{},{Fromdate:e.target.value}))}),(0,u.jsx)("input",{type:"date",className:"cus-inpt w-auto ps-3 border rounded-5",value:f.Todate,onChange:e=>D(a=>(0,l.A)((0,l.A)({},a),{},{Todate:e.target.value}))}),(0,u.jsx)(i.A,{title:"Reload Data",children:(0,u.jsx)(d.A,{size:"small",className:"ms-2",type:"submit",children:(0,u.jsx)(_.A,{})})})]})}),(0,u.jsx)("span",{children:(0,u.jsxs)("select",{value:f.ReportType,className:"cus-inpt ps-3 w-100 rounded-5 border-0",onChange:e=>D(a=>(0,l.A)((0,l.A)({},a),{},{ReportType:e.target.value})),children:[(0,u.jsx)("option",{value:"LedgerBased",children:"Ledger Based"}),(0,u.jsx)("option",{value:"ProductBased",children:"Product Based"})]})})]}),(0,u.jsxs)(o.A,{className:"p-0",children:[null===p&&"LedgerBased"===f.ReportType&&(0,u.jsx)("h6",{className:"blue-text text-center",children:"Fetching Ledger Based data..."}),null===h&&("ProductBased"===f.ReportType||"ProductDayAverage"===f.ReportType)&&(0,u.jsx)("h6",{className:"blue-text text-center",children:"Fetching Product Based data..."}),"LedgerBased"===f.ReportType&&Array.isArray(p)&&(0,u.jsx)(y,{dataArray:p,colTypes:g.salesInfo,Fromdate:null===f||void 0===f?void 0:f.Fromdate,Todate:null===f||void 0===f?void 0:f.Todate,loadingOn:a,loadingOff:t}),"ProductBased"===f.ReportType&&Array.isArray(h)&&(0,u.jsx)(b,{dataArray:h,colTypes:g.salesItemInfo,loadingOn:a,loadingOff:t}),"ProductDayAverage"===f.ReportType&&Array.isArray(h)&&(0,u.jsx)(m,{filterDialog:f.filterDialog,closeDialog:()=>{D(e=>(0,l.A)((0,l.A)({},e),{},{filterDialog:!1}))},dataArray:h,days:S})]})]})})}}}]);
//# sourceMappingURL=3886.8116798e.chunk.js.map