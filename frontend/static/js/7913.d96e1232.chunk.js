"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[7913],{10489:(e,a,t)=>{t.d(a,{A:()=>d});t(65043);var r=t(83462),l=t(26600),i=t(35316),n=t(29347),s=t(11906),o=t(70579);const d=e=>{let{open:a=!1,onClose:t,children:d,title:c,onSubmit:u,submitText:m="Submit",closeText:h="Close",maxWidth:b="sm",fullWidth:p=!0,isSubmit:A=!1,startAction:C}=e;return(0,o.jsxs)(r.A,{open:a,onClose:t,fullWidth:p,maxWidth:b,children:[c&&(0,o.jsx)(l.A,{children:c}),(0,o.jsx)(i.A,{children:d}),(0,o.jsxs)(n.A,{className:"".concat(C?"d-flex justify-content-between":""),children:[C&&(0,o.jsx)("div",{children:C}),(0,o.jsxs)("div",{children:[(0,o.jsx)(s.A,{onClick:t,children:h}),u&&(0,o.jsx)(s.A,{variant:"contained",onClick:u,type:A?"submit":"button",className:"ms-2",children:m})]})]})]})}},14585:(e,a,t)=>{t.r(a),t.d(a,{default:()=>N});var r=t(89379),l=t(65043),i=t(65074),n=t(69223),s=t.n(n),o=t(72450),d=t(22520),c=t(8002),u=t(17392),m=t(10489),h=t(59662),b=t(70579);const p=(0,h.A)((0,b.jsx)("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2zm1-9h1V4H2v1h1zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2zm5-6v2h14V5zm0 14h14v-2H7zm0-6h14v-2H7z"}),"FormatListNumbered");var A=t(59383),C=t(51387);t(9715),t(67854),t(75936),t(1989);var g=t(73216),f=t(20656),v=t(63406);const x=e=>{let a=[];return e.forEach((e,t)=>{const r=e.product||[],l=(e.invoiceValue||0)-(e.totalReference||0);a.push({SNo:t+1,invoiceDate:e.invoiceDate||"",invoiceNumber:e.invoiceNumber||"",voucherType:e.voucherTypeGet||"",Con:e.branchNameGet||"",DueDate:e.paymentDueDate,RetailerName:e.retailerNameGet||"",KGS:"",Bags:"",Rate:"",DIS:e.discountValue||"",BillAmt:e.invoiceValue||0,Paid:e.totalReference||0,Pending:l,Remarks:"",_isHeader:!0}),r.forEach(e=>{a.push({SNo:"",Con:"",invoiceDate:"",invoiceNumber:"",voucherType:"",DueDate:"",RetailerName:e.productNameGet||"",KGS:e.kgsValue||"",Bags:e.bagsValue||"",Rate:e.rateValue||"",DIS:"",BillAmt:"",Paid:"",Pending:"",Remarks:"",_isHeader:!1})})}),a},y={Fromdate:(0,d.ny)(),Todate:(0,d.ny)(),Retailer:{value:"",label:"ALL"},VoucherType:[],Branch:{value:"",label:"ALL"},CreatedBy:{value:"",label:"ALL"}},N=e=>{let{loadingOn:a,loadingOff:t,pageID:n}=e;const[h,N]=(0,l.useState)([]),[F,D]=(0,l.useState)([]),[S,_]=(0,l.useState)([]),[j,R]=(0,l.useState)(!1),B=(0,g.zy)(),T=sessionStorage.getItem("filterValues"),[V,O]=(0,l.useState)({voucherType:[],created_by:[],branch:[],retailer:[]}),[H,E]=(0,l.useState)((0,r.A)((0,r.A)({},y),{},{refreshCount:0,filterDialog:!1})),[P,w]=(0,l.useState)([]),[I,L]=(0,l.useState)([]);(0,l.useEffect)(()=>{(0,i.z)({address:"purchase/invoice/filterValues"}).then(e=>{var a,t,r,l;e.success&&O({voucherType:null===(a=e.others)||void 0===a?void 0:a.voucherType,created_by:null===(t=e.others)||void 0===t?void 0:t.created_by,branch:null===(r=e.others)||void 0===r?void 0:r.branch,retailer:null===(l=e.others)||void 0===l?void 0:l.retailer})}).catch(e=>console.error(e))},[]),(0,l.useEffect)(()=>{const{Fromdate:e,Todate:l,Branch:n,Retailer:s,CreatedBy:o}=H;(0,i.z)({address:"purchase/invoice/paymentDue?\n            Fromdate=".concat(e,"&\n            Todate=").concat(l,"&\n            BranchId=").concat(n.value,"&\n            RetailerId=").concat(s.value,"&\n            CreatedBy=").concat(o.value),loadingOff:t,loadingOn:a}).then(e=>{if(e.success){const a=e.data.map(e=>(0,r.A)((0,r.A)({},e),{},{customOrder:""}));_(a)}}).catch(e=>console.error(e))},[H.refreshCount,B]),(0,l.useEffect)(()=>{let e=S;Array.isArray(H.VoucherType)&&H.VoucherType.length>0&&(e=e.filter(e=>H.VoucherType.some(a=>a.label===e.voucherTypeGet))),D(e),N(x(e))},[S,H.refreshCount]),(0,l.useEffect)(()=>{const e=(0,d.vU)(n),{Fromdate:a,Todate:t,Branch:l=y.Branch,Retailer:i=y.Retailer,CreatedBy:s=y.CreatedBy}=e;let o=e.VoucherType||y.VoucherType;Array.isArray(o)||(o=[]),E(e=>(0,r.A)((0,r.A)({},e),{},{Fromdate:a,Todate:t,VoucherType:o,Branch:l,Retailer:i,CreatedBy:s,refreshCount:e.refreshCount+1}))},[T,n,B]);const k=e=>null!==e&&void 0!==e&&e._isHeader?" fw-bold  ":"";return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.A,{dataArray:h,columns:(G=[{Field_Name:"SNo",ColumnHeader:"No",Fied_Data:"string",isVisible:1,tdClass:e=>{let{row:a}=e;return k(a)}},{Field_Name:"Con",ColumnHeader:"Con",Fied_Data:"string",isVisible:1,tdClass:e=>{let{row:a}=e;return k(a)}},{Field_Name:"invoiceDate",ColumnHeader:"Entry Date",Fied_Data:"date",isVisible:0,tdClass:e=>{let{row:a}=e;return k(a)}},{Field_Name:"DueDate",ColumnHeader:"Due Date",Fied_Data:"date",isVisible:1,tdClass:e=>{let{row:a}=e;return k(a)}},{Field_Name:"invoiceNumber",ColumnHeader:"Voucher No",Fied_Data:"string",isVisible:0,tdClass:e=>{let{row:a}=e;return k(a)}},{Field_Name:"voucherType",ColumnHeader:"Voucher Type",Fied_Data:"string",isVisible:0,tdClass:e=>{let{row:a}=e;return k(a)}},{Field_Name:"RetailerName",ColumnHeader:"Vendor",Fied_Data:"string",isVisible:1,tdClass:e=>{let{row:a}=e;return k(a)},FooterCell:()=>""},{Field_Name:"KGS",ColumnHeader:"KGS",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:a}=e;return k(a)}},{Field_Name:"Bags",ColumnHeader:"Bags",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:a}=e;return k(a)}},{Field_Name:"Rate",ColumnHeader:"Rate",Fied_Data:"number",isVisible:1,Aggregation:"mean",tdClass:e=>{let{row:a}=e;return k(a)}},{Field_Name:"DIS",ColumnHeader:"DIS",Fied_Data:"string",isVisible:1,Aggregation:"mean",tdClass:e=>{let{row:a}=e;return k(a)}},{Field_Name:"BillAmt",ColumnHeader:"Bill Amt",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:a}=e;return k(a)}},{Field_Name:"Paid",ColumnHeader:"Paid",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:a}=e;return k(a)}},{Field_Name:"Pending",ColumnHeader:"Pending",Fied_Data:"number",isVisible:1,tdClass:e=>{let{row:a}=e;return k(a)}},{Field_Name:"Remarks",ColumnHeader:"Remarks",Fied_Data:"string",isVisible:1,tdClass:e=>{let{row:a}=e;return k(a)}}],G.map((e,a)=>{var t;return(0,r.A)((0,r.A)({},e),{},{OrderBy:null!==(t=e.OrderBy)&&void 0!==t?t:a+1})})),title:"Payment Due",stateUrl:"purchase/invoice/paymentDue",stateGroup:"paymentDue",PDFPrintOption:!0,ExcelPrintOption:()=>(async(e,a)=>{if(!e||0===e.length)return void alert("No data to export");const t=[...a||[]].filter(e=>1===e.isVisible||!0===e.isVisible).sort((e,a)=>(e.OrderBy||0)-(a.OrderBy||0));if(0===t.length)return void alert("No columns visible to export");const r=new(s().Workbook),l=r.addWorksheet("Payment Due"),i=t.map(e=>e.ColumnHeader||e.Field_Name);l.addRow(i),l.getRow(1).eachCell(e=>{e.font={bold:!0},e.alignment={horizontal:"center",vertical:"middle"},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},e.border={top:{style:"thin"},left:{style:"thin"},right:{style:"thin"},bottom:{style:"thin"}}});let n=0,c=0,u=0,m=0,h=0;e.forEach(e=>{e._isHeader?(n+=Number(e.BillAmt||0),c+=Number(e.Paid||0),u+=Number(e.Pending||0)):(m+=Number(e.KGS||0),h+=Number(e.Bags||0));const a=t.map(a=>{const t=e[a.Field_Name];return"number"===a.Fied_Data&&t?(0,d.jG)(t):"date"===a.Fied_Data&&t?new Date(t).toLocaleDateString("en-GB"):void 0!==t&&null!==t?t:""});l.addRow(a).eachCell((r,l)=>{let i=a[l-1];r.border={top:{style:"thin"},left:{style:"thin"},right:{style:"thin"},bottom:{style:"thin"}},r.alignment={vertical:"middle",horizontal:"number"===typeof i||"number"===t[l-1].Fied_Data&&!isNaN(Number(i))?"right":"left"},e._isHeader&&(r.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFD7B5"}}),e._isHeader?r.font={bold:!0}:r.font={color:{argb:"000000"}}})});const b=t.map(e=>"KGS"===e.Field_Name?m:"Bags"===e.Field_Name?h:"BillAmt"===e.Field_Name?n:"Paid"===e.Field_Name?c:"Pending"===e.Field_Name?u:""),p=t.findIndex(e=>"RetailerName"===e.Field_Name);if(-1!==p)b[p]="OVERALL TOTAL";else{const e=t.findIndex(e=>["KGS","Bags","BillAmt"].includes(e.Field_Name));e>0?b[e-1]="OVERALL TOTAL":b[0]="OVERALL TOTAL"}l.addRow(b).eachCell(e=>{e.font={bold:!0},e.alignment={horizontal:"center",vertical:"middle"},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"C6E0B4"}},e.border={top:{style:"thin"},left:{style:"thin"},right:{style:"thin"},bottom:{style:"thin"}}}),l.columns=t.map(e=>{let a=15;return"SNo"===e.Field_Name&&(a=6),"Con"===e.Field_Name&&(a=15),"DueDate"!==e.Field_Name&&"invoiceDate"!==e.Field_Name||(a=12),"RetailerName"===e.Field_Name&&(a=45),"KGS"!==e.Field_Name&&"Bags"!==e.Field_Name&&"Rate"!==e.Field_Name&&"DIS"!==e.Field_Name||(a=10),"invoiceNumber"!==e.Field_Name&&"voucherType"!==e.Field_Name||(a=18),"Remarks"===e.Field_Name&&(a=20),{width:a}});const A=await r.xlsx.writeBuffer();(0,o.saveAs)(new Blob([A]),"Payment_Due.xlsx")})(P,I),MenuButtons:[],initialPageCount:20,CellSize:"small",maxHeightOption:!0,bodyFontSizePx:12,headerFontSizePx:12,enableGlobalSearch:!0,loadingOn:a,loadingOff:t,onFilteredDataChange:(e,a)=>{w(e),a&&L(a)},ButtonArea:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.A,{onClick:()=>R(!0),title:"Custom Order",children:(0,b.jsx)(p,{})}),(0,b.jsx)(u.A,{onClick:()=>E((0,r.A)((0,r.A)({},H),{},{filterDialog:!0})),children:(0,b.jsx)(A.A,{})})]})}),(0,b.jsx)(m.A,{open:j,onClose:()=>R(!1),title:"Custom Order Invoices",maxWidth:"lg",fullWidth:!0,onSubmit:()=>{const e=[...F].sort((e,a)=>(parseInt(e.customOrder)||Number.MAX_SAFE_INTEGER)-(parseInt(a.customOrder)||Number.MAX_SAFE_INTEGER));D(e),N(x(e)),R(!1)},children:(0,b.jsx)("div",{className:"table-responsive",style:{maxHeight:"60vh"},children:(0,b.jsxs)("table",{className:"table table-bordered table-sm text-center align-middle",children:[(0,b.jsx)("thead",{className:"table-light sticky-top",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"fa-12",children:"Invoice Number"}),(0,b.jsx)("th",{className:"fa-12",children:"Date"}),(0,b.jsx)("th",{className:"fa-12",children:"Retailer"}),(0,b.jsx)("th",{className:"fa-12",children:"Value"}),(0,b.jsx)("th",{className:"fa-12",style:{width:"100px"},children:"Order"}),(0,b.jsx)("th",{className:"fa-12",style:{width:"50px"},children:"Action"})]})}),(0,b.jsxs)("tbody",{children:[F.map((e,a)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"fa-12",children:e.invoiceNumber}),(0,b.jsx)("td",{className:"fa-12",children:new Date(e.invoiceDate).toLocaleDateString("en-GB")}),(0,b.jsx)("td",{className:"fa-12",children:e.retailerNameGet}),(0,b.jsx)("td",{className:"fa-12",children:(0,d.jG)(e.invoiceValue)}),(0,b.jsx)("td",{className:"fa-12",children:(0,b.jsx)("input",{type:"number",className:"cus-inpt text-center p-2",value:e.customOrder,onChange:e=>{const t=e.target.value;D(e=>{const r=[...e];return r[a].customOrder=t,r})}})}),(0,b.jsx)("td",{children:(0,b.jsx)(u.A,{color:"error",size:"small",onClick:()=>{D(e=>e.filter((e,t)=>t!==a))},children:(0,b.jsx)(C.A,{fontSize:"small"})})})]},e.invoiceId||a)),0===F.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:"6",children:"No invoices found"})})]})]})})}),(0,b.jsx)(m.A,{open:H.filterDialog,onClose:()=>E((0,r.A)((0,r.A)({},H),{},{filterDialog:!1})),title:"Filter",maxWidth:"sm",fullWidth:!0,onSubmit:()=>{(0,d.Mb)({Fromdate:null===H||void 0===H?void 0:H.Fromdate,Todate:H.Todate,VoucherType:H.VoucherType,Branch:H.Branch,Retailer:H.Retailer,CreatedBy:H.CreatedBy,pageID:n}),E(e=>(0,r.A)((0,r.A)({},e),{},{filterDialog:!1}))},children:(0,b.jsx)("div",{className:"table-responsive",children:(0,b.jsx)("table",{className:"table",children:(0,b.jsxs)("tbody",{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"From Date"}),(0,b.jsx)("td",{children:(0,b.jsx)("input",{type:"date",className:"cus-inpt",value:H.Fromdate,onChange:e=>E((0,r.A)((0,r.A)({},H),{},{Fromdate:e.target.value}))})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"To Date"}),(0,b.jsx)("td",{children:(0,b.jsx)("input",{type:"date",className:"cus-inpt",value:H.Todate,onChange:e=>E((0,r.A)((0,r.A)({},H),{},{Todate:e.target.value}))})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Voucher Type"}),(0,b.jsx)("td",{children:(0,b.jsx)(f.Ay,{value:H.VoucherType,onChange:e=>E((0,r.A)((0,r.A)({},H),{},{VoucherType:e})),options:V.voucherType,styles:v.MR,menuPortalTarget:document.body,isMulti:!0,isSearchable:!0,placeholder:"Select Voucher",filterOption:d.GI,maxMenuHeight:300})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Branch"}),(0,b.jsx)("td",{children:(0,b.jsx)(f.Ay,{value:H.Branch,onChange:e=>E((0,r.A)((0,r.A)({},H),{},{Branch:e})),options:[{value:"",label:"ALL"},...V.branch],styles:v.MR,menuPortalTarget:document.body,isSearchable:!0,filterOption:d.GI})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Retailer"}),(0,b.jsx)("td",{children:(0,b.jsx)(f.Ay,{value:H.Retailer,onChange:e=>E((0,r.A)((0,r.A)({},H),{},{Retailer:e})),options:[{value:"",label:"ALL"},...V.retailer],styles:v.MR,menuPortalTarget:document.body,isSearchable:!0,filterOption:d.GI})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"Created By"}),(0,b.jsx)("td",{children:(0,b.jsx)(f.Ay,{value:H.CreatedBy,onChange:e=>E((0,r.A)((0,r.A)({},H),{},{CreatedBy:e})),options:[{value:"",label:"ALL"},...V.created_by],styles:v.MR,menuPortalTarget:document.body,isSearchable:!0,filterOption:d.GI})})]})]})})})})]});var G}},51387:(e,a,t)=>{t.d(a,{A:()=>i});var r=t(59662),l=t(70579);const i=(0,r.A)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},63406:(e,a,t)=>{t.d(a,{zU:()=>s,ex:()=>o,MR:()=>n,Ap:()=>i,FX:()=>d});var r=t(89379);const l=t.p+"static/media/smt.aa4d4f940bbebff07a57.png",i={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},n={menu:(e,a)=>(0,r.A)((0,r.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,r.A)((0,r.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,r.A)((0,r.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,a)=>(0,r.A)((0,r.A)({},e),{},{backgroundColor:a.isSelected?"#2684FF":a.isFocused?"#E2ECF9":"white",color:a.isSelected?"white":"#333",padding:"10px 12px"})},s=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],o=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:l,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],d=[{name:"PURCHASE_ORDER",alias:"Purchase Order",moduleCode:"PO"},{name:"PURCHASE_INVOICE",alias:"Purchase Invoice",moduleCode:"PI"},{name:"SALE_ORDER",alias:"Sale Order",moduleCode:"SO"},{name:"SALE_INVOICE",alias:"Sale Invoice",moduleCode:"SI"},{name:"JOURNAL",alias:"Journal",moduleCode:"JO"},{name:"STOCK_JOURNAL",alias:"Stock Journal",moduleCode:"SJ"},{name:"PAYMENT",alias:"Payment",moduleCode:"PAY"},{name:"RECEIPT",alias:"Receipt",moduleCode:"REC"},{name:"CONTRA",alias:"Contra",moduleCode:"CON"}]}}]);
//# sourceMappingURL=7913.d96e1232.chunk.js.map