"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[4145],{4162:(e,t,o)=>{o.d(t,{A:()=>u});var l=o(58168),a=o(98587),n=o(47042),r=o(71382),s=o(94707),i=o(70639);const d=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],c=["component","slots","slotProps"],p=["component"];function u(e,t){const{className:o,elementType:u,ownerState:x,externalForwardedProps:m,getSlotOwnerState:h,internalForwardedProps:v}=t,C=(0,a.A)(t,d),{component:g,slots:A={[e]:void 0},slotProps:_={[e]:void 0}}=m,b=(0,a.A)(m,c),f=A[e]||u,j=(0,s.Y)(_[e],x),y=(0,i.p)((0,l.A)({className:o},C,{externalForwardedProps:"root"===e?b:void 0,externalSlotProps:j})),{props:{component:S},internalRef:N}=y,T=(0,a.A)(y.props,p),I=(0,n.A)(N,null==j?void 0:j.ref,t.ref),F=h?h(T):{},D=(0,l.A)({},x,F),w="root"===e?S||g:S,E=(0,r.X)(f,(0,l.A)({},"root"===e&&!g&&!A[e]&&v,"root"!==e&&!A[e]&&v,T,w&&{as:w},{ref:I}),D);return Object.keys(F).forEach(e=>{delete E[e]}),[f,E]}},30079:(e,t,o)=>{o.d(t,{A:()=>n});var l=o(59662),a=o(70579);const n=(0,l.A)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},34496:(e,t,o)=>{o.d(t,{A:()=>n});var l=o(59662),a=o(70579);const n=(0,l.A)((0,a.jsx)("path",{d:"M5 13h14v-2H5zm-2 4h14v-2H3zM7 7v2h14V7z"}),"ClearAll")},48471:(e,t,o)=>{o.d(t,{Ay:()=>O,JT:()=>P,Lj:()=>k,wF:()=>R});var l=o(89379),a=o(65043),n=o(77739),r=o(17392),s=o(41020),i=o(30922),d=o(32143),c=o(2050),p=o(48734),u=o(28076),x=o(39652),m=o(12110),h=o(63336),v=o(79650),C=o(71806),g=o(84882),A=o(58093),_=o(73460),b=o(31159),f=o(97707),j=o(47968),y=o(692),S=o(8737),N=o(58558),T=o(30599),I=o(433),F=o(37762),D=(o(20557),o(11238)),w=o(70579);const E=(e,t)=>e.map(e=>{const o={};return t.forEach((t,l)=>{if(t.isVisible||t.Defult_Display)if(t.isCustomCell&&t.Cell){const a=t.Cell({row:e}),n=t.ColumnHeader?String(t.ColumnHeader).replace(/\s+/g,"_").toLowerCase():"field_".concat(l+1);"string"!==typeof a&&"number"!==typeof a&&"bigint"!==typeof a||(o[n]=a)}else{let l=t.Field_Name;o[l]=e[l]||""}}),o}),k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,l.A)({isVisible:r,Field_Name:e,Fied_Data:t,align:a,verticalAlign:n},o&&{ColumnHeader:o})},R=e=>{let{buttonsData:t=[],ToolTipText:o="Options"}=e;const[l,u]=(0,a.useState)(null),x=Boolean(l);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(n.A,{title:o,children:(0,w.jsx)(r.A,{"aria-describedby":x,onClick:e=>{u(e.currentTarget)},className:"ms-2",size:"small",children:(0,w.jsx)(N.A,{})})}),(0,w.jsx)(s.Ay,{open:x,anchorEl:l,onClose:()=>{u(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,w.jsx)(i.A,{children:t.map((e,t)=>(0,w.jsxs)(d.A,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,w.jsx)(c.A,{children:null===e||void 0===e?void 0:e.icon}),(0,w.jsx)(p.A,{children:null===e||void 0===e?void 0:e.name})]},t))})})]})},P=(e,t)=>{switch(t){case"number":return e?(0,f.jG)(e):e;case"date":return e?(0,f.yc)(e):e;case"time":return e?(0,f.JG)(e):e;case"string":return e;default:return""}},z=e=>{let{dataArray:t=[],columns:o=[],onClickFun:n=null,isExpendable:s=!1,expandableComp:i=null,tableMaxHeight:d=550,initialPageCount:c=20,EnableSerialNumber:p=!1,CellSize:N="small",disablePagination:k=!1,title:z="",PDFPrintOption:O=!1,ExcelPrintOption:L=!1,maxHeightOption:M=!1,ButtonArea:B=null,MenuButtons:H=[],bodyFontSizePx:W=13,headerFontSizePx:V=13}=e;const[G,U]=(0,a.useState)(0),[J,Z]=(0,a.useState)(c),[X,K]=(0,a.useState)([]),[Q,Y]=(0,a.useState)(!0),q=Q&&M?" max-content ":d,$=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],ee=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],te=(e=>{if(!X.length)return e;return[...e].sort((e,t)=>{for(const o of X){const{columnId:l,direction:a}=o,n=e[l],r=t[l];if(n!==r)return"asc"===a?n>r?1:-1:n<r?1:-1}return 0})})(t),oe=G*J,le=oe+J,ae=te.slice(oe,le),ne=e=>{let{row:t,index:l}=e;const[d,c]=(0,a.useState)(!1),m="20px";return(0,w.jsxs)(a.Fragment,{children:[(0,w.jsxs)(u.A,{children:[!0===s&&i&&(0,w.jsx)(x.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(W,"px")},children:(0,w.jsx)(r.A,{size:"small",onClick:()=>c(e=>!e),children:d?(0,w.jsx)(S.A,{sx:{fontSize:m}}):(0,w.jsx)(y.A,{sx:{fontSize:m}})})}),!0===p&&(0,w.jsx)(x.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(W,"px")},children:J*G+l+1}),null===o||void 0===o?void 0:o.map((e,o)=>{var a,r;const s=(0,f.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,f.id)(null===e||void 0===e?void 0:e.isVisible,1),i=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,d=!i,c=(t,o,l)=>null!==e&&void 0!==e&&e.tdClass?" ".concat(null===e||void 0===e?void 0:e.tdClass({row:t,Field_Name:o,index:l})," "):"",p=e.align?null===(a=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===a?void 0:a.class:"",u=e.verticalAlign?null===(r=ee.find(t=>t.type===String(e.verticalAlign).toLowerCase()))||void 0===r?void 0:r.class:" vctr ";if(s&&d){const a=Object.entries(t).find(t=>{let[o]=t;return o===e.Field_Name});return(0,w.jsx)(x.A,{className:"border-end ".concat(p," ").concat(u," ").concat(c(t,e.Field_Name,l)),sx:{fontSize:"".concat(W,"px")},onClick:()=>n?n(t):console.log("Function not supplied"),children:a?P(a[1],null===e||void 0===e?void 0:e.Fied_Data):"-"},o)}return s&&i?(0,w.jsx)(x.A,{className:"border-end ".concat(p," ").concat(u," ").concat(c(t,e.Field_Name,l)),sx:{fontSize:"".concat(W,"px")},children:e.Cell({row:t,Field_Name:e.Field_Name,index:l})},o):(0,w.jsx)(x.A,{sx:{fontSize:"".concat(W,"px")},className:"border-end ".concat(p," ").concat(u),children:"-"},o)})]}),!0===s&&i&&d&&(0,w.jsx)(u.A,{children:(0,w.jsx)(x.A,{colSpan:Number(null===o||void 0===o?void 0:o.length)+(!0===p?2:1),children:i({row:t,index:l})})})]})};return(0,w.jsxs)(m.A,{className:"rounded-3 bg-white overflow-hidden",component:h.A,children:[(0,w.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(O||L||H.length>0||M)&&(0,w.jsx)(R,{ToolTipText:"Table Options",buttonsData:[...M?[{name:"Max Height",icon:Q?(0,w.jsx)(I.A,{fontSize:"small",color:"primary"}):(0,w.jsx)(T.A,{fontSize:"small"}),onclick:()=>Y(e=>!e),disabled:(0,f.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...O?[{name:"PDF Print",icon:(0,w.jsx)(j.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const o=new F.default,a=E(e,t),n=t.filter(e=>e.isVisible||e.Defult_Display).map(e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase()),r=a.map(e=>n.map(t=>e[t])).map((e,t)=>(0,l.A)((0,l.A)({},e),{},{Sno:t+1}));o.autoTable({head:[n],body:r}),o.save("table.pdf")}catch(o){console.error(o)}})(t,o),disabled:(0,f.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...L?[{name:"Excel Print",icon:(0,w.jsx)(j.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const o=E(e,t),l=D.Wp.json_to_sheet(o),a=D.Wp.book_new();D.Wp.book_append_sheet(a,l,"Data"),D._h(a,"table.xlsx")}catch(o){console.error(o)}})(t,o),disabled:(0,f.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...H]}),B&&B,z&&(0,w.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:z})]}),(0,w.jsx)(v.A,{sx:{maxHeight:q},children:(0,w.jsxs)(C.A,{stickyHeader:!0,size:N,children:[(0,w.jsx)(g.A,{children:(0,w.jsxs)(u.A,{children:[s&&i&&(0,w.jsx)(x.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:"#"}),p&&(0,w.jsx)(x.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:"SNo"}),o.map((e,t)=>{const o=(0,f.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,f.id)(null===e||void 0===e?void 0:e.isVisible,1),a=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,n=X.find(t=>t.columnId===e.Field_Name),r=n?n.direction:"asc";var s,i,d,c;return o?a?(0,w.jsx)(x.A,{className:"fw-bold border-end border-top "+(e.align?null===(s=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===s?void 0:s.class:""),sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},sortDirection:!!n&&r,children:(0,w.jsx)(A.A,{active:!!n,direction:r,onClick:()=>(e=>{const t=X.find(t=>t.columnId===e);if(t){const o="asc"===t.direction;K(X.map(t=>t.columnId===e?(0,l.A)((0,l.A)({},t),{},{direction:o?"desc":"asc"}):t))}else K([...X,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(i=e.Field_Name)||void 0===i?void 0:i.replace(/_/g," "))})},t):(0,w.jsx)(x.A,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(d=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===d?void 0:d.class:""),sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(c=e.Field_Name)||void 0===c?void 0:c.replace(/_/g," "))},t):null})]})}),(0,w.jsxs)(_.A,{children:[(k?te:ae).map((e,t)=>(0,w.jsx)(ne,{row:e,index:t},t)),0===t.length&&(0,w.jsx)(u.A,{children:(0,w.jsx)(x.A,{colSpan:o.length+(!0===s&&i?1:0)+(!0===p?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!k&&0!==ae.length&&(0,w.jsx)("div",{className:"p-2 pb-0",children:(0,w.jsx)(b.A,{component:"div",count:t.length,page:G,onPageChange:(e,t)=>{U(t)},rowsPerPage:J,onRowsPerPageChange:e=>{Z(parseInt(e.target.value,10)),U(0)},rowsPerPageOptions:Array.from(new Set([c,5,20,50,100,200,500])).sort((e,t)=>e-t),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};z.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const O=z},58293:(e,t,o)=>{o.d(t,{A:()=>n});var l=o(59662),a=o(70579);const n=(0,l.A)((0,a.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},59383:(e,t,o)=>{o.d(t,{A:()=>n});var l=o(59662),a=o(70579);const n=(0,l.A)((0,a.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")},63406:(e,t,o)=>{o.d(t,{zU:()=>s,ex:()=>i,MR:()=>r,Ap:()=>n,FX:()=>d});var l=o(89379);const a=o.p+"static/media/smt.aa4d4f940bbebff07a57.png",n={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},r={menu:(e,t)=>(0,l.A)((0,l.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,l.A)((0,l.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,l.A)((0,l.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,t)=>(0,l.A)((0,l.A)({},e),{},{backgroundColor:t.isSelected?"#2684FF":t.isFocused?"#E2ECF9":"white",color:t.isSelected?"white":"#333",padding:"10px 12px"})},s=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],i=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:a,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:a,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:a,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],d=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},81e3:(e,t,o)=>{o.d(t,{A:()=>d});var l=o(84402),a=o(25430),n=o(37344),r=o(13375);const s=(0,o(57056).A)("MuiBox",["root"]),i=(0,n.A)(),d=(0,l.A)({themeId:r.A,defaultTheme:i,defaultClassName:s.root,generateClassName:a.A.generate})},84402:(e,t,o)=>{o.d(t,{A:()=>x});var l=o(58168),a=o(98587),n=o(65043),r=o(58387),s=o(13174),i=o(58812),d=o(18698),c=o(45527),p=o(70579);const u=["className","component"];function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:o,defaultClassName:x="MuiBox-root",generateClassName:m}=e,h=(0,s.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(i.A);return n.forwardRef(function(e,n){const s=(0,c.A)(o),i=(0,d.A)(e),{className:v,component:C="div"}=i,g=(0,a.A)(i,u);return(0,p.jsx)(h,(0,l.A)({as:C,ref:n,className:(0,r.A)(v,m?m(x):x),theme:t&&s[t]||s},g))})}},93038:(e,t,o)=>{o.r(t),o.d(t,{default:()=>w});var l=o(89379),a=o(65043),n=o(81e3),r=o(85865),s=o(90889),i=o(86605),d=o(40710),c=o(17392),p=o(83462),u=o(26600),x=o(35316),m=o(29347),h=o(11906),v=o(48471),C=o(73216),g=o(20656),A=o(65074),_=o(97707),b=o(30079),f=o(34496),j=o(83560),y=o(58293),S=o(59383),N=o(79484),T=o(63406),I=o(91036),F=o(70579);const D=e=>{let{row:t}=e;return(0,F.jsxs)(n.A,{sx:{padding:2,backgroundColor:"#fafafa",border:"1px solid #e0e0e0"},children:[(0,F.jsxs)(r.A,{variant:"h6",gutterBottom:!0,sx:{color:"#333",fontSize:"1.1rem",mb:2},children:["Trip Details - ",t.Trip_No]}),t.TripDetails&&t.TripDetails.length>0?(0,F.jsxs)(n.A,{sx:{width:"100%"},children:[t.TripDetails.map((e,t)=>(0,F.jsxs)(s.A,{defaultExpanded:0===t,children:[(0,F.jsx)(i.A,{expandIcon:(0,F.jsx)(y.A,{}),children:(0,F.jsxs)(r.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:["Invoice: ",e.Do_Inv_No," | Date: ",e.Do_Date," | Value: ",(0,_.jG)(e.Total_Invoice_value)," | Retailer: ",e.Retailer_Name]})}),(0,F.jsx)(d.A,{children:e.StockDetails&&e.StockDetails.length>0?(0,F.jsxs)(n.A,{sx:{overflowX:"auto",mt:1},children:[(0,F.jsxs)(r.A,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:"bold"},children:["Stock Items (",e.StockDetails.length,")"]}),(0,F.jsxs)("table",{className:"table",style:{width:"100%",minWidth:"500px"},children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{style:{backgroundColor:"#e3f2fd"},children:[(0,F.jsx)("th",{style:{padding:"8px",border:"1px solid #ddd"},children:"S.No"}),(0,F.jsx)("th",{style:{padding:"8px",border:"1px solid #ddd"},children:"Product Name"}),(0,F.jsx)("th",{style:{padding:"8px",border:"1px solid #ddd"},children:"Amount"}),(0,F.jsx)("th",{style:{padding:"8px",border:"1px solid #ddd"},children:"Item ID"})]})}),(0,F.jsxs)("tbody",{children:[e.StockDetails.map((e,t)=>(0,F.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,F.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd"},children:t+1}),(0,F.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",fontWeight:"bold"},children:e.Product_Name||"N/A"}),(0,F.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"right",fontWeight:"bold"},children:(0,_.jG)(e.Amount)||"0.00"}),(0,F.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd"},children:e.Item_Id||"N/A"})]},e.Item_Id||t)),(0,F.jsxs)("tr",{style:{backgroundColor:"#e8f5e8"},children:[(0,F.jsxs)("td",{colSpan:2,style:{padding:"8px",border:"1px solid #ddd",textAlign:"right",fontWeight:"bold"},children:["Total for ",e.Do_Inv_No,":"]}),(0,F.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"right",fontWeight:"bold"},children:(0,_.jG)(e.StockDetails.reduce((e,t)=>e+(t.Amount||0),0))}),(0,F.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd"}})]})]})]})]}):(0,F.jsx)(r.A,{variant:"body2",color:"textSecondary",sx:{fontStyle:"italic",mt:1},children:"No stock details available for this invoice."})})]},e.TripDetailId||t)),t.TripDetails.length>0&&(0,F.jsx)(n.A,{sx:{mt:2,p:2,backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:1},children:(0,F.jsxs)(r.A,{variant:"h6",sx:{fontWeight:"bold",color:"#856404"},children:["Grand Total for Trip ",t.Trip_No,": ",(0,_.jG)(t.TripDetails.reduce((e,t)=>{var o;return e+((null===(o=t.StockDetails)||void 0===o?void 0:o.reduce((e,t)=>e+(t.Amount||0),0))||0)},0))]})})]}):(0,F.jsx)(r.A,{variant:"body2",color:"textSecondary",sx:{fontStyle:"italic"},children:"No trip details available for this trip."})]})},w=e=>{var t;let{loadingOn:o,loadingOff:s,AddRights:i,pageID:d}=e;const[y,w]=(0,a.useState)({rows:[],allEmpCategories:[]}),[E,k]=(0,a.useState)({Fromdate:(0,_.ny)(),Todate:(0,_.ny)(),voucherType_Filter:{label:"ALL",value:""},created_by_Filter:{label:"ALL",value:""},filterDialog:!1}),[R,P]=(0,a.useState)({voucherType:[],created_by:[]}),[z,O]=(0,a.useState)(!1),[L,M]=(0,a.useState)(null),[B,H]=(0,a.useState)([]),[W,V]=(0,a.useState)([]),[G,U]=(0,a.useState)([]),[J,Z]=(0,a.useState)(!1),[X,K]=((0,C.Zp)(),(0,a.useState)(!1));(0,a.useEffect)(()=>{Promise.all([(0,A.z)({address:"dataEntry/costCenter"}),(0,A.z)({address:"dataEntry/costCenter/category"})]).then(e=>{let[t,o]=e;V(((null===t||void 0===t?void 0:t.data)||[]).map(e=>({id:e.Cost_Center_Id,value:e.Cost_Center_Name,label:e.Cost_Center_Name}))),U(((null===o||void 0===o?void 0:o.data)||[]).map(e=>({id:e.Cost_Category_Id,value:e.Cost_Category,label:e.Cost_Category}))),Z(!0)}).catch(e=>{console.error("Error loading options:",e),Z(!0)})},[]);(0,a.useEffect)(()=>{const e=(0,_.vU)(d);e&&k(t=>(0,l.A)((0,l.A)({},t),e))},[d]);(0,a.useEffect)(()=>{const{Fromdate:e,Todate:t,voucherType_Filter:a,created_by_Filter:n}=E;(0,A.z)({address:"sales/lrReport?Fromdate=".concat(e,"&Todate=").concat(t,"&voucher=").concat(a.value,"&createdBy=").concat(n.value),loadingOff:s,loadingOn:o}).then(e=>{if(e.success){const{rows:t,allEmpCategories:o}=(e=>{const t=new Set;e.forEach(e=>{var o;null===(o=e.Employees)||void 0===o||o.forEach(e=>t.add(e.Cost_Category||"Unknown"))});const o=[...t];return{rows:e.map(e=>{var t,a;const n={};o.forEach(e=>n[e]=[]),null===(t=e.Employees)||void 0===t||t.forEach(e=>{const t=e.Cost_Category||"Unknown";n[t].push(e.Cost_Center_Name)});const r={};o.forEach(e=>{var t;return r[e]=(null===(t=n[e])||void 0===t?void 0:t.join(", "))||""});const s=(null===(a=e.TripDetails)||void 0===a?void 0:a[0])||{};return(0,l.A)((0,l.A)({},e),{},{Delivery_Id:s.Delivery_Id||null,Do_Inv_No:s.Do_Inv_No||null,Do_Date:s.Do_Date||null,Total_Invoice_value:s.Total_Invoice_value||null,Retailer_Name:s.Retailer_Name||e.Retailer_Name||""},r)}),allEmpCategories:o}})(e.data);w({rows:t,allEmpCategories:o})}}).catch(console.error)},[E,X]);const Q=()=>k(e=>(0,l.A)((0,l.A)({},e),{},{filterDialog:!1})),Y=(y.rows||[]).map(e=>(0,l.A)((0,l.A)({},e),{},{Total_Invoice_value:(e.TripDetails||[]).reduce((e,t)=>e+(t.Total_Invoice_value||0),0)})),q=Y.reduce((e,t)=>e+(t.Total_Invoice_value||0),0);return(0,a.useEffect)(()=>{if(X){(async()=>{try{(await(0,A.z)({address:"sales/lrReport"})).success}catch(e){console.error("Error fetching data:",e)}finally{K(!1)}})()}},[X]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(v.Ay,{title:"Trips",headerFontSizePx:12,bodyFontSizePx:12,dataArray:Y||[],columns:[(0,v.Lj)("Trip_No","string","Trip No"),(0,v.Lj)("TR_INV_ID","string","TR_INV_ID"),(0,v.Lj)("Trip_Date","date","TripDate"),(0,v.Lj)("StartTime","time","StartTime"),(0,v.Lj)("EndTime","time","EndTime"),(0,v.Lj)("Vehicle_No","string","Veh.No"),(0,v.Lj)("Do_Date","date","Deliv.Date"),(0,v.Lj)("Total_Invoice_value","number","Tot.Inv"),...(null===(t=y.allEmpCategories)||void 0===t?void 0:t.map(e=>(0,v.Lj)(e,"string",e)))||[],{isVisible:1,ColumnHeader:"Action",isCustomCell:!0,Cell:e=>{let{row:t}=e;return(0,F.jsx)(c.A,{size:"small",onClick:()=>(e=>{if(!J)return void console.warn("Options not loaded yet");M(e);const t=(e.Employees||[]).map(e=>{const t=G.find(t=>t.value===e.Cost_Category||t.label===e.Cost_Category),o=W.find(t=>t.value===e.Cost_Center_Name||t.label===e.Cost_Center_Name);return{Involved_Emp_Id:e.Involved_Emp_Id||"",Cost_Center_Name:e.Cost_Center_Name||"",Cost_Center_Type_Id:e.Cost_Center_Type_Id||"",Cost_Category:e.Cost_Category||"",Cost_Center_Id:o?o.id:"",Cost_Category_Id:t?t.id:""}});H(t),O(!0)})(t),children:(0,F.jsx)(j.A,{})})}}],isExpendable:!0,expandableComp:D,EnableSerialNumber:!0,ButtonArea:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(c.A,{onClick:()=>k(e=>(0,l.A)((0,l.A)({},e),{},{filterDialog:!0})),size:"small",className:"mx-1",children:(0,F.jsx)(S.A,{className:"fa-20"})}),(0,F.jsx)("span",{className:"bg-light text-light fa-11 px-1 shadow-sm py-1 rounded-3 mx-1",children:(0,_.Ro)(q)>0&&(0,F.jsxs)("h6",{className:"m-0 text-end text-muted px-3",children:["Total: ",(0,_.jG)(q)]})})]})}),(0,F.jsxs)(p.A,{open:E.filterDialog,onClose:Q,fullWidth:!0,maxWidth:"sm",children:[(0,F.jsx)(u.A,{children:"Filters"}),(0,F.jsx)(x.A,{children:(0,F.jsx)("table",{className:"table",children:(0,F.jsxs)("tbody",{children:[(0,F.jsxs)("tr",{children:[(0,F.jsx)("td",{children:"From"}),(0,F.jsx)("td",{children:(0,F.jsx)("input",{type:"date",value:E.Fromdate,onChange:e=>k((0,l.A)((0,l.A)({},E),{},{Fromdate:e.target.value})),className:"cus-inpt"})})]}),(0,F.jsxs)("tr",{children:[(0,F.jsx)("td",{children:"To"}),(0,F.jsx)("td",{children:(0,F.jsx)("input",{type:"date",value:E.Todate,onChange:e=>k((0,l.A)((0,l.A)({},E),{},{Todate:e.target.value})),className:"cus-inpt"})})]}),(0,F.jsxs)("tr",{children:[(0,F.jsx)("td",{children:"Created By"}),(0,F.jsx)("td",{children:(0,F.jsx)(g.Ay,{value:E.created_by_Filter,onChange:e=>k((0,l.A)((0,l.A)({},E),{},{created_by_Filter:e})),options:[{value:"",label:"ALL"},...R.created_by],styles:T.MR})})]})]})})}),(0,F.jsxs)(m.A,{children:[(0,F.jsx)(h.A,{variant:"outlined",onClick:()=>k({Fromdate:(0,_.ny)(),Todate:(0,_.ny)(),voucherType_Filter:{label:"ALL",value:""},created_by_Filter:{label:"ALL",value:""},filterDialog:!1}),startIcon:(0,F.jsx)(f.A,{}),children:"Clear"}),(0,F.jsx)(h.A,{onClick:Q,children:"Close"}),(0,F.jsx)(h.A,{onClick:()=>{(0,_.Mb)({Fromdate:E.Fromdate,Todate:E.Todate,pageID:d,voucherType_Filter:E.voucherType_Filter,created_by_Filter:E.created_by_Filter}),Q()},variant:"contained",startIcon:(0,F.jsx)(N.A,{}),children:"Search"})]})]}),(0,F.jsxs)(p.A,{open:z,onClose:()=>O(!1),maxWidth:"sm",fullWidth:!0,children:[(0,F.jsx)(u.A,{children:"Edit Cost Center Details"}),(0,F.jsx)(x.A,{children:(0,F.jsxs)(n.A,{sx:{my:2},children:[(0,F.jsxs)(r.A,{variant:"subtitle1",children:["Trip No: ",null===L||void 0===L?void 0:L.Trip_No]}),0===B.length&&(0,F.jsx)(r.A,{children:"No Cost Center info available. Please add."}),B.map((e,t)=>(0,F.jsxs)(n.A,{sx:{mb:2,p:2,border:"1px solid #ddd",borderRadius:1,position:"relative"},children:[(0,F.jsxs)(r.A,{fontWeight:"bold",mb:1,children:["Employee #",t+1]}),(0,F.jsx)(c.A,{size:"small",onClick:()=>{return e=t,void H(t=>t.filter((t,o)=>o!==e));var e},sx:{position:"absolute",top:8,right:8},children:(0,F.jsx)(b.A,{})}),(0,F.jsx)(r.A,{variant:"body2",mb:.5,children:"Cost Category"}),(0,F.jsx)(g.Ay,{value:G.find(t=>t.id===e.Cost_Category_Id)||null,onChange:e=>{const o=[...B];e?(o[t].Cost_Category=e.value,o[t].Cost_Category_Id=e.id):(o[t].Cost_Category="",o[t].Cost_Category_Id=""),H(o)},options:G,styles:T.MR,placeholder:"Select Category",isClearable:!0}),(0,F.jsx)(r.A,{variant:"body2",mt:2,mb:.5,children:"Cost Center Name"}),(0,F.jsx)(g.Ay,{value:W.find(t=>t.id===e.Cost_Center_Id)||null,onChange:e=>{const o=[...B];e?(o[t].Cost_Center_Name=e.value,o[t].Cost_Center_Id=e.id,o[t].Cost_Center_Type_Id=e.id,o[t].Involved_Emp_Id=e.id):(o[t].Cost_Center_Name="",o[t].Cost_Center_Id="",o[t].Cost_Center_Type_Id="",o[t].Involved_Emp_Id=""),H(o)},options:W,styles:T.MR,placeholder:"Select Center",isClearable:!0})]},t)),(0,F.jsx)(h.A,{variant:"outlined",onClick:()=>{H(e=>[...e,{Involved_Emp_Id:"",Cost_Center_Name:"",Cost_Center_Type_Id:"",Cost_Category:"",Cost_Center_Id:"",Cost_Category_Id:""}])},sx:{mt:2},children:"Add New Cost Center"})]})}),(0,F.jsxs)(m.A,{children:[(0,F.jsx)(h.A,{onClick:()=>O(!1),children:"Cancel"}),(0,F.jsx)(h.A,{variant:"contained",onClick:async()=>{if(L)try{const e={tripId:L.Trip_Id,employeeCostCenters:B.map(e=>({Involved_Emp_Id:e.Involved_Emp_Id,Cost_Center_Type_Id:e.Cost_Center_Type_Id||e.Cost_Category_Id}))},t=await(0,A.z)({address:"sales/lrReport",method:"POST",bodyData:e});t.success?(I.oR.success(t.message||"Cost centers updated successfully"),O(!1),K(!0)):I.oR.error(t.message||"Failed to update cost centers")}catch(e){console.error("Error saving cost centers:",e),I.oR.error("Error saving cost centers")}},children:"Save"})]})]})]})}}}]);
//# sourceMappingURL=4145.bd94b783.chunk.js.map