"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[57],{4054:(e,a,l)=>{l.r(a),l.d(a,{default:()=>S});var t=l(89379),s=l(65043),r=l(65074),n=l(12110),d=l(11906),o=l(26494),i=l(17392),c=l(83462),m=l(26600),u=l(35316),h=l(29347),v=l(97707),p=l(20656),x=l(63406),_=l(33438),j=l(51387),A=l(79484),N=l(48471);const b={Trip_Id:"",Challan_No:"",Branch_Id:"",Trip_Date:(0,v.ny)(),Vehicle_No:"",StartTime:"",EndTime:"",Trip_No:"",Trip_ST_KM:"",Trip_EN_KM:"",Trip_Tot_Kms:"",Created_By:"",Updated_By:"",DO_Date:(0,v.ny)(),Delivery_Person_Id:"",BillType:"",VoucherType:""},g={Id:"",Trip_Id:"",Involved_Emp_Id:"",Cost_Center_Type_Id:"",Emp_Name:""};var y=l(91036),C=l(73216),T=(l(80287),l(70579));const S=e=>{var a,l;let{loadingOn:S,loadingOff:f}=e;const I=(0,C.zy)().state,[P,E]=(0,s.useState)(null),D=JSON.parse(localStorage.getItem("user")),[B,L]=(0,s.useState)([]),[R,w]=(0,s.useState)({Retailer_Id:"",RetailerGet:"ALL",Created_by:"",CreatedByGet:"ALL",Sales_Person_Id:"",SalsePersonGet:"ALL",Cancel_status:0,Route_Id:"",RoutesGet:"ALL",Area_Id:"",AreaGet:"ALL",Fromdate:(0,v.ny)(),Todate:(0,v.ny)(),VoucherType:[],Broker:[],Transporters:[],Item:[],Godown:"",search:!1,addItemDialog:!1,Retailer:[]}),[O,k]=(0,s.useState)([]),[M,G]=(0,s.useState)([]),[F,V]=(0,s.useState)([]),[z,U]=(0,s.useState)([]),[K,H]=(0,s.useState)(b),[Q,W]=(0,s.useState)([]),[J,Z]=(0,s.useState)([]),[q,X]=(0,s.useState)([]),[Y,$]=(0,s.useState)([]),[ee,ae]=(0,s.useState)([]),[le,te]=(0,s.useState)([]),[se,re]=(0,s.useState)([]),[ne,de]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{try{const[e,a,l,t,s,n,d]=await Promise.all([(0,r.z)({address:"masters/branch/dropDown"}),(0,r.z)({address:"dataEntry/costCenter"}),(0,r.z)({address:"dataEntry/costCenter/category"}),(0,r.z)({address:"masters/voucher"}),(0,r.z)({address:"masters/products/dropDown"}),(0,r.z)({address:"masters/godown"}),(0,r.z)({address:"masters/retailers/dropDown"})]),o=(e.success?e.data:[]).sort((e,a)=>String(null===e||void 0===e?void 0:e.BranchName).localeCompare(null===a||void 0===a?void 0:a.BranchName)),i=(a.success?a.data:[]).sort((e,a)=>String(null===e||void 0===e?void 0:e.Cost_Center_Name).localeCompare(null===a||void 0===a?void 0:a.Cost_Center_Name)),c=(l.success?l.data:[]).sort((e,a)=>String(null===e||void 0===e?void 0:e.Cost_Category).localeCompare(null===a||void 0===a?void 0:a.Cost_Category)),m=i.filter(e=>"Broker"===e.UserTypeGet),u=i.filter(e=>"Transport"===e.UserTypeGet),h=t.success?t.data:[],v=s.success?s.data:[],p=n.success?n.data:[],x=d.success?d.data:[];X(h),U(o),G(i),V(c),$(m),ae(u),re(p),te(v),de(x)}catch(e){console.error("Error fetching data:",e)}})()},[]);const oe=[{value:"",label:"ALL"},...q.filter(e=>"SALES"===e.Type).map(e=>({value:null===e||void 0===e?void 0:e.Vocher_Type_Id,label:null===e||void 0===e?void 0:e.Voucher_Type}))];q.filter(e=>"SALES"===e.Type).map(e=>({value:null===e||void 0===e?void 0:e.Voucher_Type,label:null===e||void 0===e?void 0:e.Voucher_Type}));(0,s.useEffect)(()=>{(0,r.z)({address:"masters/users/salesPerson/dropDown?Company_id=".concat(null===D||void 0===D?void 0:D.Company_id)}).then(e=>{e.success&&L(e.data)}).catch(e=>console.error(e))},[]),(0,s.useEffect)(()=>{const e=e=>{const a=new Date(e),l=a.getHours(),t=a.getMinutes();return"".concat(l<10?"0"+l:l,":").concat(t<10?"0"+t:t)},a=null===I||void 0===I?void 0:I.Product_Array,l=null===I||void 0===I?void 0:I.Employees_Involved;if((0,v.aF)(I)&&Array.isArray(a)&&Array.isArray(l)){H(l=>(0,t.A)((0,t.A)((0,t.A)({},l),Object.fromEntries(Object.entries(b).map(a=>{var l,t;let[s,r]=a;return"Trip_Date"===s?[s,I[s]?(0,v.ny)(I[s]):r]:"Branch_Id"===s?[s,null!==(l=I[s])&&void 0!==l?l:r]:"StartTime"===s||"EndTime"===s?[s,I[s]?e(I[s]):r]:[s,null!==(t=I[s])&&void 0!==t?t:r]}))),{},{Product_Array:a})),Z(a),W(l.map(e=>Object.fromEntries(Object.entries(g).map(a=>{var l;let[t,s]=a;return[t,null!==(l=e[t])&&void 0!==l?l:s]}))));const s=l.find(e=>9===Number(e.Cost_Center_Type_Id));E(s?{UserId:s.Involved_Emp_Id,Name:s.Emp_Name}:null)}},[I]);const ie=e=>{let{value:a,onChange:l,options:s,placeholder:r,isSearchable:n=!0}=e;return(0,T.jsx)(p.Ay,{isMulti:!0,value:a,onChange:l,options:s,placeholder:r,styles:(0,t.A)((0,t.A)({},x.MR),{},{menuPortal:e=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999})}),isSearchable:n,menuPortalTarget:document.body,menuPosition:"fixed",menuPlacement:"auto"})},ce=()=>{S&&S(),(0,r.z)({address:"delivery/deliveryOrderTrip",method:(0,v.IQ)(null===K||void 0===K?void 0:K.Trip_Id)?"PUT":"POST",bodyData:(0,t.A)((0,t.A)({},K),{},{StartTime:K.StartTime&&K.Trip_Date?(0,v.vW)(K.Trip_Date,K.StartTime):"",EndTime:K.EndTime&&K.Trip_Date?(0,v.vW)(K.Trip_Date,K.EndTime):"",Product_Array:J,Delivery_Person_Id:null===P||void 0===P?void 0:P.UserId,EmployeesInvolved:Q.filter(e=>(0,v.IQ)(e.Involved_Emp_Id)&&(0,v.IQ)(e.Cost_Center_Type_Id))})}).then(e=>{e.success?(Z([]),W([]),H(b),k([]),y.oR.success(e.message)):y.oR.error(e.message)}).catch(e=>console.log(e)).finally(()=>{f&&f()})};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(n.A,{children:[(0,T.jsxs)("div",{className:"d-flex flex-wrap align-items-center border-bottom p-2",children:[(0,T.jsx)("h5",{className:"flex-grow-1 m-0 ps-2",children:"Trip Sheet Creation"}),(0,T.jsx)(d.A,{variant:"outlined",onClick:ce,disabled:0===J.length||!(0,v.vd)(K.Trip_Date),children:"Save"})]}),(0,T.jsxs)(o.A,{style:{minHeight:500},children:[(0,T.jsxs)("div",{className:"row ",children:[(0,T.jsx)("div",{className:"col-xxl-3 col-lg-4 col-md-5 p-2",children:(0,T.jsxs)("div",{className:"border p-2",style:{minHeight:"30vh",height:"100%"},children:[(0,T.jsxs)("div",{className:"d-flex align-items-center flex-wrap mb-2 border-bottom pb-2",children:[(0,T.jsx)("h6",{className:"flex-grow-1 m-0",children:"Staff Involved"}),(0,T.jsx)(d.A,{variant:"outlined",color:"primary",type:"button",onClick:()=>W([...Q,(0,t.A)({},g)]),children:"Add"})]}),(0,T.jsxs)("table",{className:"table table-bordered",children:[(0,T.jsx)("thead",{children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"fa-13",children:"Sno"}),(0,T.jsx)("th",{className:"fa-13",children:"Staff Name"}),(0,T.jsx)("th",{className:"fa-13",children:"Category"})]})}),(0,T.jsx)("tbody",{children:Q.map((e,a)=>(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"fa-13 vctr text-center",children:a+1}),(0,T.jsx)("td",{className:"fa-13 w-100 p-0",children:(0,T.jsx)(p.Ay,{value:{value:null===e||void 0===e?void 0:e.Involved_Emp_Id,label:null===e||void 0===e?void 0:e.Emp_Name},onChange:e=>{W(l=>l.map((l,s)=>{if((0,v.id)(s,a)){var r;const a=M.find(a=>(0,v.id)(a.Cost_Center_Id,e.value)),s=(0,t.A)((0,t.A)({},l),{},{Cost_Center_Type_Id:l.Cost_Center_Type_Id||a.User_Type||0,Involved_Emp_Id:e.value,Emp_Name:null!==(r=a.Cost_Center_Name)&&void 0!==r?r:""});return 9===Number(s.Cost_Center_Type_Id)?E({UserId:s.Involved_Emp_Id,Name:s.Emp_Name}):(null===P||void 0===P?void 0:P.UserId)===s.Involved_Emp_Id&&E(null),s}return l}))},options:M.filter(e=>-1===Q.findIndex(a=>(0,v.id)(a.Cost_Center_Type_Id,e.Cost_Center_Id))).map(e=>({value:e.Cost_Center_Id,label:e.Cost_Center_Name})),styles:x.MR,isSearchable:!0,placeholder:"Select Staff"})}),(0,T.jsx)("td",{className:"fa-13 vctr p-0",style:{maxWidth:"130px",minWidth:"110px"},children:(0,T.jsxs)("select",{value:null===e||void 0===e?void 0:e.Cost_Center_Type_Id,onChange:e=>((e,a)=>{W(l=>l.map((l,s)=>{if((0,v.id)(s,a)){const a=(0,t.A)((0,t.A)({},l),{},{Cost_Center_Type_Id:e.target.value});return 9===Number(a.Cost_Center_Type_Id)?E({UserId:a.Involved_Emp_Id,Name:a.Emp_Name}):(null===P||void 0===P?void 0:P.UserId)===a.Involved_Emp_Id&&E(null),a}return l}))})(e,a),className:"cus-inpt p-2",children:[(0,T.jsx)("option",{value:"",children:"Select"}),F.map((e,a)=>(0,T.jsx)("option",{value:null===e||void 0===e?void 0:e.Cost_Category_Id,children:null===e||void 0===e?void 0:e.Cost_Category},a))]})}),(0,T.jsx)("td",{className:"fa-13 vctr text-center",children:(0,T.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>{W(l=>{const t=l.filter((e,l)=>l!==a);return(null===P||void 0===P?void 0:P.UserId)===e.Involved_Emp_Id&&E(null),t})},children:(0,T.jsx)(_.A,{})})})]},a))})]})]})}),(0,T.jsx)("div",{className:"col-xxl-9 col-lg-8 col-md-7 py-2 px-0",children:(0,T.jsxs)("div",{className:"border p-2",style:{minHeight:"30vh",height:"100%"},children:[(0,T.jsxs)("div",{className:"row",children:[(0,T.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,T.jsxs)("label",{children:["Branch ",(0,T.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,T.jsxs)("select",{value:K.Branch_Id,onChange:e=>H((0,t.A)((0,t.A)({},K),{},{Branch_Id:e.target.value})),placeholder:"Select Branch",className:"cus-inpt mb-2 p-2",children:[(0,T.jsx)("option",{value:"",disabled:!0,children:"Select Branch"}),z.map((e,a)=>(0,T.jsx)("option",{value:e.BranchId,children:e.BranchName},a))]})]}),(0,T.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,T.jsx)("label",{children:"Trip_Date"}),(0,T.jsx)("input",{value:K.Trip_Date,type:"date",onChange:e=>H((0,t.A)((0,t.A)({},K),{},{Trip_Date:e.target.value})),className:"cus-inpt p-2 mb-2"})]}),(0,T.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,T.jsx)("label",{children:"Vehicle No"}),(0,T.jsx)("input",{value:K.Vehicle_No,onChange:e=>H((0,t.A)((0,t.A)({},K),{},{Vehicle_No:e.target.value})),className:"cus-inpt p-2 mb-2"})]}),(0,T.jsxs)("div",{className:"col-xl-3 col-md-6 col-sm-12 p-2",children:[(0,T.jsxs)("label",{children:["Delivery Person ",(0,T.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,T.jsx)("input",{id:"delivery-person",name:"deliveryPerson",type:"text",value:P?P.Name:"",readOnly:!0,className:"form-control",placeholder:"Delivery Person"})]}),(0,T.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,T.jsx)("label",{children:"Trip No"}),(0,T.jsx)("input",{value:K.Trip_No,onChange:e=>H((0,t.A)((0,t.A)({},K),{},{Trip_No:e.target.value})),className:"cus-inpt p-2 mb-2"})]}),(0,T.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,T.jsx)("label",{children:"Voucher Type"}),(0,T.jsxs)("select",{className:"cus-inpt p-2 mb-2",value:null!==(a=null===K||void 0===K?void 0:K.VoucherType)&&void 0!==a?a:"",onChange:e=>H((0,t.A)((0,t.A)({},K),{},{VoucherType:e.target.value})),children:[(0,T.jsx)("option",{value:"",children:"Select Voucher Type"}),(0,T.jsx)("option",{value:"0",children:"SALES"})]})]}),(0,T.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,T.jsx)("label",{children:"Bill Type"}),(0,T.jsxs)("select",{className:"cus-inpt p-2 mb-2",value:null!==(l=null===K||void 0===K?void 0:K.BillType)&&void 0!==l?l:"",onChange:e=>H((0,t.A)((0,t.A)({},K),{},{BillType:e.target.value})),children:[(0,T.jsx)("option",{value:"",children:"Select Bill Type"}),(0,T.jsx)("option",{value:"SALES",children:"SALES"})]})]}),(0,T.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,T.jsx)("label",{children:"Trip Status"}),(0,T.jsxs)("select",{value:(null===K||void 0===K?void 0:K.TripStatus)||"",onChange:e=>H(a=>(0,t.A)((0,t.A)({},a),{},{TripStatus:e.target.value})),className:"cus-inpt p-2",children:[(0,T.jsx)("option",{value:"",children:"Select"}),(0,T.jsx)("option",{value:"New",children:"New"}),(0,T.jsx)("option",{value:"OnProcess",children:"OnProcess"}),(0,T.jsx)("option",{value:"Completed",children:"Completed"}),(0,T.jsx)("option",{value:"Canceled",children:"Canceled"})]})]})]}),(0,T.jsx)("div",{className:"table-responsive",children:(0,T.jsxs)("table",{className:"table table-bordered",children:[(0,T.jsxs)("thead",{children:[(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{colSpan:2,className:"fa-13 text-center",children:"Time"}),(0,T.jsx)("th",{colSpan:2,className:"fa-13 text-center",children:"Distance"})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"fa-13 text-center",children:"Start "}),(0,T.jsx)("th",{className:"fa-13 text-center",children:"End"}),(0,T.jsx)("th",{className:"fa-13 text-center",children:"Start (Km)"}),(0,T.jsx)("th",{className:"fa-13 text-center",children:"End (Km)"})]})]}),(0,T.jsx)("tbody",{children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"fa-13",children:(0,T.jsx)("input",{type:"time",onChange:e=>H(a=>(0,t.A)((0,t.A)({},a),{},{StartTime:e.target.value})),value:null===K||void 0===K?void 0:K.StartTime,className:"cus-inpt p-2"})}),(0,T.jsx)("td",{className:"fa-13",children:(0,T.jsx)("input",{type:"time",onChange:e=>H(a=>(0,t.A)((0,t.A)({},a),{},{EndTime:e.target.value})),value:null===K||void 0===K?void 0:K.EndTime,className:"cus-inpt p-2"})}),(0,T.jsx)("td",{className:"fa-13",children:(0,T.jsx)("input",{type:"number",onChange:e=>H(a=>{var l,s;return(0,t.A)((0,t.A)({},a),{},{Trip_ST_KM:e.target.value,Trip_Tot_Kms:(0,v.DG)(null!==(l=a.Trip_EN_KM)&&void 0!==l?l:0,null!==(s=e.target.value)&&void 0!==s?s:0)})}),value:null===K||void 0===K?void 0:K.Trip_ST_KM,min:0,className:"cus-inpt p-2",placeholder:"Kilometers"})}),(0,T.jsx)("td",{className:"fa-13",children:(0,T.jsx)("input",{type:"number",onChange:e=>H(a=>{var l,s;return(0,t.A)((0,t.A)({},a),{},{Trip_EN_KM:e.target.value,Trip_Tot_Kms:(0,v.DG)(null!==(l=e.target.value)&&void 0!==l?l:0,null!==(s=a.Trip_ST_KM)&&void 0!==s?s:0)})}),value:null===K||void 0===K?void 0:K.Trip_EN_KM,min:(0,v.Lr)(null===K||void 0===K?void 0:K.Trip_ST_KM,1),className:"cus-inpt p-2",placeholder:"Kilometers"})})]})})]})})]})})]}),(0,T.jsxs)("div",{className:"d-flex justify-content-end gap-3",children:[(0,T.jsxs)("h6",{className:"m-0 text-muted",children:["Total Bill Qty: ",null===J||void 0===J?void 0:J.reduce((e,a)=>{var l;return e+((null===a||void 0===a||null===(l=a.Products_List)||void 0===l?void 0:l.reduce((e,a)=>e+(parseFloat(null===a||void 0===a?void 0:a.Bill_Qty)||0),0))||0)},0)]}),(0,T.jsxs)("h6",{className:"m-0 text-muted",children:["Selected Sales Orders: ",J.length]})," ",(0,T.jsx)("span",{}),(0,T.jsxs)("h6",{className:"m-0 text-muted",children:["Total Items: ",null===J||void 0===J?void 0:J.reduce((e,a)=>{var l;return e+((null===(l=a.Products_List)||void 0===l?void 0:l.length)||0)},0)]})]}),(0,T.jsx)(N.Ay,{dataArray:null===J||void 0===J?void 0:J.map(e=>null===e||void 0===e?void 0:e.Products_List).flat(),expandableComp:e=>{let{row:a}=e;return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)("table",{className:"table",children:(0,T.jsxs)("tbody",{children:[(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"border p-2 bg-light",children:"Branch"}),(0,T.jsx)("td",{className:"border p-2",children:a.Branch_Name}),(0,T.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,T.jsx)("td",{className:"border p-2",children:a.Sales_Person_Name}),(0,T.jsx)("td",{className:"border p-2 bg-light",children:"Round off"}),(0,T.jsx)("td",{className:"border p-2",children:a.Round_off})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"border p-2 bg-light",children:"Invoice Type"}),(0,T.jsxs)("td",{className:"border p-2",children:[(0,v.id)(a.GST_Inclusive,1)&&"Inclusive",(0,v.id)(a.GST_Inclusive,0)&&"Exclusive"]}),(0,T.jsx)("td",{className:"border p-2 bg-light",children:"Tax Type"}),(0,T.jsxs)("td",{className:"border p-2",children:[(0,v.id)(a.IS_IGST,1)&&"IGST",(0,v.id)(a.IS_IGST,0)&&"GST"]}),(0,T.jsx)("td",{className:"border p-2 bg-light",children:"Sales Person"}),(0,T.jsx)("td",{className:"border p-2",children:a.Sales_Person_Name})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"border p-2 bg-light",children:"Narration"}),(0,T.jsx)("td",{className:"border p-2",colSpan:5,children:a.Narration})]})]})})})},ButtonArea:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(d.A,{onClick:()=>w(e=>(0,t.A)((0,t.A)({},e),{},{addItemDialog:!0})),children:"Add"}),(0,T.jsx)(d.A,{onClick:()=>Z([]),className:"me-2",children:"Clear"})]}),EnableSerialNumber:!0,disablePagination:!0,maxHeightOption:!0,columns:[(0,N.Lj)("Retailer_Name","string","Retailer_Name"),(0,N.Lj)("Product_Name","string","Product_Name"),(0,N.Lj)("Taxable_Rate","number","Rate"),(0,N.Lj)("Bill_Qty","number","Bill_Qty"),(0,N.Lj)("Taxable_Amount","string","Before_Tax_Amount"),(0,N.Lj)("Amount","number","Total_Invoice_value"),{isVisible:1,ColumnHeader:"#",isCustomCell:!0,Cell:e=>{let{row:a}=e;return(0,T.jsx)(i.A,{variant:"contained",color:"error",size:"small",onClick:()=>{const e=null===J||void 0===J?void 0:J.map(e=>(0,t.A)((0,t.A)({},e),{},{Products_List:e.Products_List.filter(e=>e[a.DO_St_Id?"DO_St_Id":"SO_St_Id"]!==a[a.DO_St_Id?"DO_St_Id":"SO_St_Id"])})).filter(e=>e.Products_List.length>0);Z(e)},children:(0,T.jsx)(j.A,{className:"fa-20"})})}}]})]}),(0,T.jsx)("div",{className:"border-top p-2 text-end",children:(0,T.jsx)(d.A,{variant:"outlined",onClick:ce,disabled:0===J.length||!(0,v.vd)(K.Trip_Date),children:"Save"})})]}),(0,T.jsx)(c.A,{open:R.addItemDialog,onClose:()=>w(e=>(0,t.A)((0,t.A)({},e),{},{addItemDialog:!1})),maxWidth:"lg",fullWidth:!0,fullScreen:!0,children:(0,T.jsxs)("form",{onSubmit:e=>{e.preventDefault();const{Fromdate:a,Todate:l,Sales_Person_Id:t,Broker:s,Transporters:n,Godown:d,Item:o,Retailer:i,VoucherType:c}=R,m=Array.isArray(c)?c.join(","):c||"",u=Array.isArray(s)?s.join(","):s||"",h=Array.isArray(n)?n.join(","):n||"",v=Array.isArray(o)?o.join(","):o||"",p=Array.isArray(i)?i.join(","):i||"",x=(null===R||void 0===R?void 0:R.Branch)||"";a&&l&&(S&&S(),k([]),(0,r.z)({address:"delivery/deliveryDetailsList?Fromdate=".concat(a,"&Todate=").concat(l,"&Sales_Person_Id=").concat(t,"&VoucherType=").concat(m,"&Branch=").concat(x,"\n            &Broker=").concat(u,"&Transporter=").concat(h,"&Godown=").concat(d,"&Item=").concat(v,"&Retailer=").concat(p)}).then(e=>{e.success&&k(e.data)}).catch(e=>console.log(e)).finally(()=>{f&&f()}))},children:[(0,T.jsxs)(m.A,{className:"d-flex align-items-center",children:[(0,T.jsx)("span",{className:"flex-grow-1",children:"Add Data"}),(0,T.jsx)(d.A,{variant:"outlined",type:"submit",className:"me-2",startIcon:(0,T.jsx)(A.A,{}),children:"Search"}),(0,T.jsx)(i.A,{size:"small",color:"error",onClick:()=>w(e=>(0,t.A)((0,t.A)({},e),{},{addItemDialog:!1})),children:(0,T.jsx)(_.A,{})})]}),(0,T.jsxs)(u.A,{children:[(0,T.jsx)("div",{className:"table-responsive",children:(0,T.jsx)("table",{className:"table table-bordered",children:(0,T.jsxs)("tbody",{children:[(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},className:"fa-13 fw-bold",children:"From Date"}),(0,T.jsx)("td",{children:(0,T.jsx)("input",{type:"date",value:R.Fromdate,className:"cus-inpt p-2",required:!0,max:R.Todate,onChange:e=>w(a=>(0,t.A)((0,t.A)({},a),{},{Fromdate:e.target.value})),style:{width:"100%"}})}),(0,T.jsx)("td",{style:{verticalAlign:"middle"},className:"fa-13 fw-bold",children:"To Date"}),(0,T.jsx)("td",{children:(0,T.jsx)("input",{type:"date",value:R.Todate,className:"cus-inpt p-2",min:R.Fromdate,required:!0,onChange:e=>w(a=>(0,t.A)((0,t.A)({},a),{},{Todate:e.target.value})),style:{width:"100%"}})}),(0,T.jsx)("td",{style:{verticalAlign:"middle"},className:"fa-13 fw-bold",children:"Sales Person"}),(0,T.jsx)("td",{children:(0,T.jsx)(p.Ay,{value:{value:null===R||void 0===R?void 0:R.Sales_Person_Id,label:(null===R||void 0===R?void 0:R.Sales_Person_Name)||"ALL"},onChange:e=>{w((0,t.A)((0,t.A)({},R),{},{Sales_Person_Id:e.value,Sales_Person_Name:e.label}))},options:[{value:"",label:"ALL"},...B.map(e=>({value:null===e||void 0===e?void 0:e.UserId,label:null===e||void 0===e?void 0:e.Name}))],placeholder:"Select Sales Person",styles:{menuPortal:e=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999})},isSearchable:!0,menuPortalTarget:document.body,menuPosition:"fixed",menuPlacement:"auto"})}),(0,T.jsx)("td",{style:{verticalAlign:"middle"},className:"fa-13 fw-bold",children:"Voucher Type"}),(0,T.jsx)("td",{children:(0,T.jsx)(ie,{value:(R.VoucherType||[]).map(e=>{var a;return{value:e,label:(null===(a=oe.find(a=>a.value===e))||void 0===a?void 0:a.label)||e}}),onChange:e=>w((0,t.A)((0,t.A)({},R),{},{VoucherType:e?e.map(e=>e.value):[]})),options:oe,placeholder:"Select Voucher Types"})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},className:"fa-13 fw-bold",children:"Branch"}),(0,T.jsx)("td",{children:(0,T.jsx)(p.Ay,{value:{value:null===R||void 0===R?void 0:R.Branch,label:(null===R||void 0===R?void 0:R.BranchName)||"ALL"},onChange:e=>w((0,t.A)((0,t.A)({},R),{},{Branch:e.value,BranchName:e.label})),options:[{value:"",label:"ALL"},...z.map(e=>({value:e.BranchId,label:e.BranchName}))],placeholder:"Select Branch",styles:{menuPortal:e=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999})},isSearchable:!0,menuPortalTarget:document.body,menuPosition:"fixed",menuPlacement:"auto"})}),(0,T.jsx)("td",{style:{verticalAlign:"middle"},className:"fa-13 fw-bold",children:"Broker"}),(0,T.jsx)("td",{children:(0,T.jsx)(ie,{value:(R.Broker||[]).map(e=>{var a;return{value:e,label:(null===(a=Y.find(a=>a.Cost_Center_Id===e))||void 0===a?void 0:a.Cost_Center_Name)||e}}),onChange:e=>w((0,t.A)((0,t.A)({},R),{},{Broker:e?e.map(e=>e.value):[]})),options:Y.map(e=>({value:e.Cost_Center_Id,label:e.Cost_Center_Name})),placeholder:"Select Brokers"})}),(0,T.jsx)("td",{style:{verticalAlign:"middle"},className:"fa-13 fw-bold",children:"Transporter"}),(0,T.jsx)("td",{children:(0,T.jsx)(ie,{value:(R.Transporters||[]).map(e=>{var a;return{value:e,label:(null===(a=ee.find(a=>a.Cost_Center_Id===e))||void 0===a?void 0:a.Cost_Center_Name)||e}}),onChange:e=>w((0,t.A)((0,t.A)({},R),{},{Transporters:e?e.map(e=>e.value):[]})),options:ee.map(e=>({value:e.Cost_Center_Id,label:e.Cost_Center_Name})),placeholder:"Select Transporters"})}),(0,T.jsx)("td",{style:{verticalAlign:"middle"},className:"fa-13 fw-bold",children:"Godown"}),(0,T.jsx)("td",{children:(0,T.jsx)(p.Ay,{value:{value:null===R||void 0===R?void 0:R.Godown,label:(null===R||void 0===R?void 0:R.GodownName)||"ALL"},onChange:e=>w((0,t.A)((0,t.A)({},R),{},{Godown:e.value,GodownName:e.label})),options:[{value:"",label:"ALL"},...se.map(e=>({value:e.Godown_Id,label:e.Godown_Name}))],placeholder:"Select Godown",styles:{menuPortal:e=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999})},isSearchable:!0,menuPortalTarget:document.body,menuPosition:"fixed",menuPlacement:"auto"})})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{style:{verticalAlign:"middle"},className:"fa-13 fw-bold",children:"Retailers"}),(0,T.jsx)("td",{colSpan:"3",children:(0,T.jsx)(ie,{value:(R.Retailer||[]).map(e=>{var a;return{value:e,label:(null===(a=ne.find(a=>a.Retailer_Id===e))||void 0===a?void 0:a.Retailer_Name)||e}}),onChange:e=>w((0,t.A)((0,t.A)({},R),{},{Retailer:e?e.map(e=>e.value):[]})),options:ne.map(e=>({value:e.Retailer_Id,label:e.Retailer_Name})),placeholder:"Select Retailers"})}),(0,T.jsx)("td",{style:{verticalAlign:"middle"},className:"fa-13 fw-bold",children:"Products"}),(0,T.jsx)("td",{colSpan:"3",children:(0,T.jsx)(ie,{value:(R.Item||[]).map(e=>{var a;return{value:e,label:(null===(a=le.find(a=>a.Product_Id===e))||void 0===a?void 0:a.Product_Name)||e}}),onChange:e=>w((0,t.A)((0,t.A)({},R),{},{Item:e?e.map(e=>e.value):[]})),options:le.map(e=>({value:e.Product_Id,label:e.Product_Name})),placeholder:"Select Products"})})]})]})})}),(0,T.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[O.length>0&&(0,T.jsx)(d.A,{variant:"outlined",onClick:()=>{J.length===O.length?Z([]):Z(O)},children:J.length===O.length?"Unselect All":"Select All"}),J.length>=0&&(0,T.jsxs)("div",{className:"d-flex justify-content-end gap-3",children:[(0,T.jsxs)("h6",{className:"m-0 text-muted",children:["Selected Sales Orders: ",J.length]}),(0,T.jsxs)("h6",{className:"m-0 text-muted",children:["Total Items: ",null===J||void 0===J?void 0:J.reduce((e,a)=>{var l;return e+((null===(l=a.Products_List)||void 0===l?void 0:l.length)||0)},0)]})]})]}),(0,T.jsx)(N.Ay,{dataArray:O,disablePagination:!0,maxHeightOption:!0,columns:[{Field_Name:"checkbox",ColumnHeader:"",isVisible:1,pointer:!0,isCustomCell:!0,Cell:e=>{let{row:a}=e;return(0,T.jsx)("input",{type:"checkbox",checked:J.some(e=>e.Do_Id===a.Do_Id),onChange:()=>(e=>{Z(a=>a.some(a=>a.Do_Id==e.Do_Id)?a.filter(a=>a.Do_Id!=e.Do_Id):[...a,e])})(a),onFocus:e=>{e.target.blur()},style:{cursor:"pointer",transform:"scale(1.5)",width:"14px",height:"20px"}})}},(0,N.Lj)("Retailer_Name","string","Retailer_Name"),(0,N.Lj)("Branch_Name","string","Branch_Name"),(0,N.Lj)("AreaName","string","AreaName"),(0,N.Lj)("Do_Date","date","Do_Date"),(0,N.Lj)("Total_Before_Tax","string","Total_Before_Tax"),(0,N.Lj)("Total_Tax","number","Total_Tax"),(0,N.Lj)("Total_Invoice_value","number","Total_Invoice_value")]})]}),(0,T.jsx)(h.A,{children:(0,T.jsx)(d.A,{type:"button",onClick:()=>w(e=>(0,t.A)((0,t.A)({},e),{},{addItemDialog:!1})),children:"close"})})]})})]})}},26494:(e,a,l)=>{l.d(a,{A:()=>x});var t=l(58168),s=l(98587),r=l(65043),n=l(58387),d=l(68606),o=l(34535),i=l(6431),c=l(57056),m=l(32400);function u(e){return(0,m.Ay)("MuiCardContent",e)}(0,c.A)("MuiCardContent",["root"]);var h=l(70579);const v=["className","component"],p=(0,o.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,a)=>a.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),x=r.forwardRef(function(e,a){const l=(0,i.b)({props:e,name:"MuiCardContent"}),{className:r,component:o="div"}=l,c=(0,s.A)(l,v),m=(0,t.A)({},l,{component:o}),x=(e=>{const{classes:a}=e;return(0,d.A)({root:["root"]},u,a)})(m);return(0,h.jsx)(p,(0,t.A)({as:o,className:(0,n.A)(x.root,r),ownerState:m,ref:a},c))})},33438:(e,a,l)=>{l.d(a,{A:()=>r});var t=l(59662),s=l(70579);const r=(0,t.A)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},63406:(e,a,l)=>{l.d(a,{zU:()=>d,ex:()=>o,MR:()=>n,Ap:()=>r,FX:()=>i});var t=l(89379);const s=l.p+"static/media/smt.aa4d4f940bbebff07a57.png",r={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},n={menu:(e,a)=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,a)=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:a.isSelected?"#2684FF":a.isFocused?"#E2ECF9":"white",color:a.isSelected?"white":"#333",padding:"10px 12px"})},d=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],o=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:s,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:s,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:s,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],i=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]}}]);
//# sourceMappingURL=57.c1fbe4d5.chunk.js.map