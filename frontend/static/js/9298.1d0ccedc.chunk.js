"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[9298],{89298:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var l=t(89379),n=t(65043),i=t(12110),s=t(17392),r=t(30279),o=t(26494),c=t(8737),d=t(692),u=t(97707),v=t(70579);const x=e=>{let{Value:a,Label:t}=e;return(0,v.jsxs)("div",{className:"grid-card d-flex align-items-center justify-content-center flex-column cus-shadow",children:[(0,v.jsx)("h1",{style:{fontSize:"45px",color:"blue",margin:"0 0.5em"},children:isNaN(a)?a||"-":a?(0,u.jG)(a):"0"}),(0,v.jsx)("h2",{className:"fa-20",children:t})]})};var h=t(29978),j=t(65074);const m=e=>{let{Value:a,Label:t}=e;return(0,v.jsx)(x,{Value:a,Label:t})},p=e=>{let{reqDate:a,reqLocation:t}=e;const[i,s]=(0,n.useState)([]),[r,o]=(0,n.useState)([]),[c,d]=(0,n.useState)({currentMonth:(0,u.tj)()});(0,n.useEffect)(()=>{(0,j.z)({address:"dataEntry/driverActivities?reqDate=".concat(a,"&reqLocation=").concat(t)}).then(e=>{e.success&&s(e.data)}).catch(e=>console.error(e)),(0,j.z)({address:"dataEntry/driverActivities/tripBased?reqDate=".concat(a,"&reqLocation=").concat(t)}).then(e=>o(e.data)).catch(e=>console.error(e))},[a,t]);const x=(e=>{const a={};return e.forEach(e=>{e.LocationGroup.forEach(e=>{a[e.TripCategory]||(a[e.TripCategory]=0),e.TripDetails.forEach(t=>{var l;a[e.TripCategory]+=null===t||void 0===t||null===(l=t.Trips)||void 0===l?void 0:l.reduce((e,a)=>e+((null===a||void 0===a?void 0:a.TonnageValue)||0),0)})})}),a})(i),p=Object.values(x).reduce((e,a)=>e+a,0);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"my-2",children:(0,v.jsxs)("div",{className:"cus-grid text-dark",children:[(0,v.jsx)(m,{Value:null===i||void 0===i?void 0:i.length,Label:"DRIVERS"}),(0,v.jsx)(m,{Value:null===r||void 0===r?void 0:r.reduce((e,a)=>{var t;let l=0;return l+=(null===a||void 0===a||null===(t=a.Trips)||void 0===t?void 0:t.length)||0,l+e},0),Label:"TRIPS"}),(0,v.jsx)(m,{Value:p,Label:"TOTAL"}),Object.entries(x).map(e=>{let[a,t]=e;return(0,v.jsx)(m,{Value:t,Label:a},a)})]})}),(0,v.jsx)("input",{type:"month",className:"cus-inpt w-auto mt-3",value:c.currentMonth,onChange:e=>d(a=>(0,l.A)((0,l.A)({},a),{},{currentMonth:e.target.value}))}),(0,v.jsx)("div",{className:"my-3 d-flex justify-content-center flex-wrap",children:(0,v.jsx)(h.E,{xAxis:[{scaleType:"band",data:null===r||void 0===r?void 0:r.map(e=>null===e||void 0===e?void 0:e.DriverName)}],series:[{data:null===r||void 0===r?void 0:r.map(e=>{var a;return null===e||void 0===e||null===(a=e.Trips)||void 0===a?void 0:a.length}),label:"TRIPS"},{data:null===r||void 0===r?void 0:r.map(e=>{var a;return Number(null===e||void 0===e||null===(a=e.Trips)||void 0===a?void 0:a.reduce((e,a)=>{var t;let l=0;return l+=null===a||void 0===a||null===(t=a.Categories)||void 0===t?void 0:t.reduce((e,a)=>{let t=0;return t+=(null===a||void 0===a?void 0:a.TonnageValue)||0,t+e},0),e+l},0)).toFixed(2)}),label:"TONNAGE"}],width:900,height:400,barLabel:"value",borderRadius:6})})]})},L=e=>{let{Value:a,Label:t}=e;return(0,v.jsx)(x,{Value:a,Label:t})},f=e=>{var a,t,l,i,s;let{reqDate:r,reqLocation:o}=e;const[c,d]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(0,j.z)({address:"dataEntry/godownActivities/abstract?reqDate=".concat(r,"&reqLocation=").concat(o)}).then(e=>{e.success&&d(e.data)}).catch(e=>console.error(e))},[r,o]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"my-2",children:(0,v.jsxs)("div",{className:"cus-grid text-dark",children:[(0,v.jsx)(L,{Value:(null===(a=c[0])||void 0===a?void 0:a.PurchaseTotal)||0,Label:"Purchase"}),(0,v.jsx)(L,{Value:(null===(t=c[0])||void 0===t?void 0:t.SalesTotal)||0,Label:"Sales"}),(0,v.jsx)(L,{Value:(null===(l=c[0])||void 0===l?void 0:l.ManagementTotal)||0,Label:"Handling"}),(0,v.jsx)(L,{Value:null!==(i=c[0])&&void 0!==i&&i.EntryAt?(0,u.O6)(null===(s=c[0])||void 0===s?void 0:s.EntryAt):"-",Label:"Updated"})]})})})},g=e=>{let{Value:a,Label:t}=e;return(0,v.jsx)(x,{Value:a,Label:t})},b=e=>{var a,t,l,i,s,r;let{reqDate:o,reqLocation:c}=e;const[d,x]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(0,j.z)({address:"dataEntry/deliveryActivities/abstract?reqDate=".concat(o,"&reqLocation=").concat(c)}).then(e=>{e.success&&x(e.data)}).catch(e=>console.error(e))},[o,c]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"my-2",children:(0,v.jsxs)("div",{className:"cus-grid text-dark",children:[(0,v.jsx)(g,{Value:null!==(a=d[0])&&void 0!==a&&a.EntryTime?(0,u.O6)(null===(t=d[0])||void 0===t?void 0:t.EntryTime):"-",Label:"Time"}),(0,v.jsx)(g,{Value:(null===(l=d[0])||void 0===l?void 0:l.OverAllSales)||0,Label:"Sales"}),(0,v.jsx)(g,{Value:(null===(i=d[0])||void 0===i?void 0:i.NotTaken)||0,Label:"NotTaken"}),(0,v.jsx)(g,{Value:(null===(s=d[0])||void 0===s?void 0:s.NotVerified)||0,Label:"NotVerified"}),(0,v.jsx)(g,{Value:(null===(r=d[0])||void 0===r?void 0:r.NotDelivery)||0,Label:"Not Delivery"})]})})})},q=e=>{let{Value:a,Label:t}=e;return(0,v.jsx)(x,{Value:a,Label:t})},y=e=>{var a,t;let{reqDate:i,reqLocation:s}=e;const[r,o]=(0,n.useState)([]);(0,n.useEffect)(()=>{(0,j.z)({address:"dataEntry/staffActivities/staffBased?reqDate=".concat(i,"&reqLocation=").concat(s)}).then(e=>{e.success&&o(e.data)}).catch(e=>console.error(e))},[i,s]);const c=()=>{let e=[];return null===r||void 0===r||r.forEach(a=>{var t;null===a||void 0===a||null===(t=a.Categories)||void 0===t||t.forEach(a=>{const t=e.findIndex(e=>(null===e||void 0===e?void 0:e.Category)===(null===a||void 0===a?void 0:a.Category));var n,i,s;-1!==t?e[t]=(0,l.A)((0,l.A)({},e[t]),{},{Total:(null===(n=e[t])||void 0===n?void 0:n.Total)+((null===a||void 0===a||null===(i=a.StaffDetails)||void 0===i?void 0:i.Tonnage)||0)}):e.push({Category:null===a||void 0===a?void 0:a.Category,Total:(null===a||void 0===a||null===(s=a.StaffDetails)||void 0===s?void 0:s.Tonnage)||0})})}),e},d=null===(a=c())||void 0===a?void 0:a.reduce((e,a)=>{let t=0;return t+="OTHERS 1 - PRINT"!==(null===a||void 0===a?void 0:a.Category)?null===a||void 0===a?void 0:a.Total:0,e+t},0);return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"my-2",children:(0,v.jsxs)("div",{className:"cus-grid text-dark",children:[(0,v.jsx)(q,{Value:(null===r||void 0===r?void 0:r.length)||0,Label:"Staffs"}),null===(t=c())||void 0===t?void 0:t.map((e,a)=>(0,v.jsx)(q,{Value:null===e||void 0===e?void 0:e.Total,Label:null===e||void 0===e?void 0:e.Category},a)),(0,v.jsx)(q,{Value:d,Label:"Total"})]})})})},A=e=>{let{Value:a,Label:t}=e;return(0,v.jsx)(x,{Value:a,Label:t})},N=e=>{let{reqDate:a,reqLocation:t}=e;const[l,i]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(0,j.z)({address:"dataEntry/weightCheckActivity?reqDate=".concat(a,"&reqLocation=").concat(t)}).then(e=>{e.success&&i(e.data)}).catch(e=>console.error(e))},[a,t]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"my-2",children:(0,v.jsxs)("div",{className:"cus-grid text-dark",children:[(0,v.jsx)(A,{Value:(null===l||void 0===l?void 0:l.length)||0,Label:"Items"}),Object.entries(null===l||void 0===l?void 0:l.reduce((e,a)=>({Average_Input:e.Average_Input+=a.InputKG||0,Average_Output:e.Average_Output+=a.OutputKG||0}),{Average_Input:0,Average_Output:0})).map(e=>{let[a,t]=e;return(0,v.jsx)(A,{Value:parseInt(t/l.length),Label:null===a||void 0===a?void 0:a.replace("_"," ")},a)})]})})})};var D=t(85051),T=t(31462),V=t(17962),O=t(3538),E=t(70686);const S=()=>{const[e,a]=(0,n.useState)({reqDate:(0,u.ny)(),reqLocation:"MILL"}),[t,x]=(0,n.useState)([{name:"Driver Activities",isOpen:!1,icon:(0,v.jsx)(D.wXW,{style:{fontSize:"40px"}})},{name:"Godown Activities",isOpen:!1,icon:(0,v.jsx)(V.uyV,{style:{fontSize:"40px"}})},{name:"Delivery Activities",isOpen:!1,icon:(0,v.jsx)(T.Xs8,{style:{fontSize:"40px"}})},{name:"Staff Activities",isOpen:!1,icon:(0,v.jsx)(O.ccC,{style:{fontSize:"40px"}})},{name:"Weight Checking Activities",isOpen:!1,icon:(0,v.jsx)(E.bIb,{style:{fontSize:"40px"}})}]),h=(0,n.useMemo)(()=>[(0,v.jsx)(p,{reqDate:e.reqDate,reqLocation:e.reqLocation}),(0,v.jsx)(f,{reqDate:e.reqDate,reqLocation:e.reqLocation}),(0,v.jsx)(b,{reqDate:e.reqDate,reqLocation:e.reqLocation}),(0,v.jsx)(y,{reqDate:e.reqDate,reqLocation:e.reqLocation}),(0,v.jsx)(N,{reqDate:e.reqDate,reqLocation:e.reqLocation})],[e.reqDate,e.reqLocation]);(0,n.useEffect)(()=>{x(e=>e.map((e,a)=>(0,l.A)((0,l.A)({},e),{},{comp:h[a]})))},[h]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"d-flex flex-wrap",children:[(0,v.jsxs)("div",{className:"d-flex flex-column p-1",children:[(0,v.jsx)("label",{className:"mb-1",children:"DATE"}),(0,v.jsx)("input",{type:"date",className:"cus-inpt w-auto",value:e.reqDate,onChange:e=>a(a=>(0,l.A)((0,l.A)({},a),{},{reqDate:e.target.value}))})]}),(0,v.jsxs)("div",{className:"d-flex flex-column p-1",children:[(0,v.jsx)("label",{className:"mb-1",children:"LOCATION"}),(0,v.jsxs)("select",{className:"cus-inpt w-auto",value:e.reqLocation,onChange:e=>a(a=>(0,l.A)((0,l.A)({},a),{},{reqLocation:e.target.value})),children:[(0,v.jsx)("option",{value:"MILL",children:"MILL"}),(0,v.jsx)("option",{value:"GODOWN",children:"GODOWN"})]})]})]}),t.map((e,a)=>(0,v.jsxs)(i.A,{className:"mt-2",children:[(0,v.jsxs)("div",{className:"fa-17 fw-bold border-bottom p-0 d-flex justify-content-between align-items-center",onClick:()=>(e=>{x(a=>a.map((a,t)=>t===e?(0,l.A)((0,l.A)({},a),{},{isOpen:!a.isOpen}):a))})(a),style:{cursor:"pointer"},children:[(0,v.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-0",children:[(0,v.jsx)("span",{className:"p-4 bg-primary text-white",children:e.icon}),(0,v.jsx)("span",{className:"ps-3 fa-20",children:e.name})]}),(0,v.jsx)(s.A,{size:"small",className:"p-2",children:e.isOpen?(0,v.jsx)(c.A,{}):(0,v.jsx)(d.A,{})})]}),(0,v.jsx)(r.A,{in:e.isOpen,unmountOnExit:!0,children:(0,v.jsx)(o.A,{children:e.comp})})]},a))]})}}}]);
//# sourceMappingURL=9298.1d0ccedc.chunk.js.map