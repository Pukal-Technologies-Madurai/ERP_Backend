{"version":3,"file":"static/js/1614.bae33d04.chunk.js","mappings":"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","sources":["Pages/Analytics/reportsTemplateMobCreation.jsx","../node_modules/@mui/material/Card/cardClasses.js","../node_modules/@mui/material/Card/Card.js","../node_modules/@mui/material/CardContent/cardContentClasses.js","../node_modules/@mui/material/CardContent/CardContent.js","../node_modules/@mui/icons-material/esm/Save.js","../node_modules/@mui/icons-material/esm/ArrowBackIosNewOutlined.js","../node_modules/@mui/icons-material/esm/RemoveRedEyeOutlined.js","../node_modules/@mui/icons-material/esm/KeyboardArrowLeft.js"],"sourcesContent":["// import  { useContext, useEffect, useState } from 'react';\r\n// import {\r\n//   Card, CardContent, Button, Tooltip, Dialog, DialogTitle, DialogContent, DialogActions,\r\n//   Box, Grid, Typography\r\n// } from '@mui/material';\r\n// import { ArrowBackIosNewOutlined, KeyboardArrowLeft, RemoveRedEyeOutlined, Save } from '@mui/icons-material';\r\n// import { isValidObject, isEqualNumber } from '../../Components/functions';\r\n// import { toast } from 'react-toastify';\r\n// import { useLocation, useNavigate } from 'react-router-dom';\r\n// import { MyContext } from '../../Components/context/contextProvider';\r\n// import { fetchLink } from '../../Components/fetchComponent';\r\n// import Select from 'react-select';\r\n// const ReportsTemplateMobCreation = () => {\r\n//   const storage = JSON.parse(localStorage.getItem('user'));\r\n//   const nav = useNavigate();\r\n//   const { contextObj } = useContext(MyContext);\r\n//   const locationState = useLocation().state;\r\n\r\n//   const initialValue = {\r\n//     Report_Type_Id: '',\r\n//     reportName: '',\r\n//     tables: [], \r\n//     tableJoins: [],\r\n//     currentTab: '',\r\n//     createdBy: storage?.UserId\r\n//   };\r\n\r\n//   // const[showDropdown,setShowDropdown]=useState([])\r\n//   const [inputValues, setInputValues] = useState(initialValue);\r\n//   const [reportTables, setReportTables] = useState([]);\r\n//   const[existingReportName,setExistingReportName]=useState([])\r\n//   const [loadingReports,setLoadingReports]=useState(false)\r\n  \r\n//   const [reportOptions, setReportOptions] = useState([]);\r\n//   const [filterSlotsLevel1, setFilterSlotsLevel1] = useState([\r\n//     { slot: 1, enabled: false, tableId: null, columnName: null, type: 1 },\r\n//     { slot: 2, enabled: false, tableId: null, columnName: null, type: 2 },\r\n//     { slot: 3, enabled: false, tableId: null, columnName: null, type: 3 },\r\n//   ]);\r\n\r\n//   const [filterSlotsLevel2, setFilterSlotsLevel2] = useState([\r\n//     { slot: 1, enabled: false, tableId: null, columnName: null, type: 4 },\r\n//     { slot: 2, enabled: false, tableId: null, columnName: null, type: 5 },\r\n//     { slot: 3, enabled: false, tableId: null, columnName: null, type: 6 },\r\n//   ]);\r\n\r\n//   const [groupFilterSlots, setGroupFilterSlots] = useState([\r\n//     { slot: 1, enabled: false, tableId: null, columnName: null, type: 7 },\r\n//   ]);\r\n\r\n//   const [selectedListTypes, setSelectedListTypes] = useState([]); \r\n//   const [openConfigPreview, setOpenConfigPreview] = useState(false);\r\n\r\n//   const losTables = reportTables.filter(table => \r\n//     table.Table_Name?.toLowerCase().includes('los') || \r\n//     table.AliasName?.toLowerCase().includes('los')\r\n//   );\r\n\r\n//   useEffect(() => {\r\n//     fetchExistingReportNames();\r\n//   }, []);\r\n\r\n//   const fetchExistingReportNames = async () => {\r\n//     try {\r\n//       setLoadingReports(true);\r\n//       const response = await fetchLink({\r\n//         address: 'reports/templateMobile',\r\n//         method: 'GET'\r\n//       });\r\n      \r\n//       if (response?.success) {\r\n//         const reports = response?.data || [];\r\n//         const uniqueReportNames = [...new Set(reports.map(report => report.Report_Name).filter(name => name))];\r\n//         setExistingReportName(uniqueReportNames);\r\n        \r\n       \r\n//         const options = uniqueReportNames.map(name => ({\r\n//           value: name,\r\n//           label: name\r\n//         }));\r\n//         setReportOptions(options);\r\n//       }\r\n//     } catch (error) {\r\n//       console.error('Error fetching existing reports:', error);\r\n//       toast.error('Failed to load existing reports');\r\n//     } finally {\r\n//       setLoadingReports(false);\r\n//     }\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     const stateValue = locationState?.ReportState;\r\n//     if (isValidObject(stateValue)) {\r\n//       const reportName = stateValue?.reportName ?? '';\r\n      \r\n//       setInputValues(prev => ({\r\n//         ...prev,\r\n//         Report_Type_Id: stateValue?.Report_Type_Id ?? '',\r\n//         reportName: reportName,\r\n//         tables: [...(stateValue?.tables || [])],\r\n//         createdBy: stateValue?.createdBy ?? storage?.UserId\r\n//       }));\r\n      \r\n    \r\n//       if (reportName && !reportOptions.some(opt => opt.value === reportName)) {\r\n//         const newOption = { value: reportName, label: reportName };\r\n//         setReportOptions(prev => [...prev, newOption]);\r\n//         setExistingReportName(prev => [...prev, reportName]);\r\n//       }\r\n      \r\n//       const groupFilterFromState = stateValue?.GroupFilter || [];\r\n      \r\n//       if (groupFilterFromState.length > 0) {\r\n//         setGroupFilterSlots(prev => {\r\n//           const newSlots = [...prev];\r\n          \r\n//           groupFilterFromState.forEach((gf, index) => {\r\n//             if (index < newSlots.length) {\r\n//               newSlots[index] = {\r\n//                 ...newSlots[index],\r\n//                 enabled: true,\r\n//                 tableId: gf.Table_Id,\r\n//                 columnName: gf.Column_Name,\r\n//                 type: gf.Type || 7\r\n//               };\r\n//             }\r\n//           });\r\n          \r\n//           return newSlots;\r\n//         });\r\n//       }\r\n//     }\r\n//   }, [locationState?.ReportState, storage?.UserId]);\r\n\r\n//   useEffect(() => {\r\n//     fetchLink({ address: `reports/tablesAndColumnsMobile` })\r\n//       .then(data => {\r\n//         if (data?.success) setReportTables(data?.data || []);\r\n//       }).catch(e => console.error(e));\r\n//   }, []);\r\n\r\n//   useEffect(() => {\r\n//     if (!inputValues.tables || inputValues.tables.length === 0) return;\r\n\r\n//     const assignments = [];\r\n//     const allListTypes = new Set(); \r\n    \r\n//     inputValues.tables.forEach(table => {\r\n//       table.columns?.forEach(column => {\r\n//         if (column.Type) {\r\n//           const types = Array.isArray(column.Type) ? column.Type : [column.Type];\r\n//           types.forEach(type => {\r\n//             if (type) {\r\n//               assignments.push({\r\n//                 type: Number(type),\r\n//                 tableId: table.Table_Id,\r\n//                 columnName: column.Column_Name,\r\n//                 listType: column.List_Type,\r\n//                 level: column.Level \r\n//               });\r\n\r\n//               if (column.List_Type) {\r\n//                 const listTypes = String(column.List_Type)\r\n//                   .split(',')\r\n//                   .map(lt => Number(lt.trim()))\r\n//                   .filter(lt => !isNaN(lt));\r\n                \r\n//                 listTypes.forEach(lt => allListTypes.add(lt));\r\n//               }\r\n//             }\r\n//           });\r\n//         }\r\n//       });\r\n//     });\r\n\r\n//     const level1Assignments = assignments.filter(a => a.level === 1 || (a.type >= 1 && a.type <= 3));\r\n//     const level2Assignments = assignments.filter(a => a.level === 2 || (a.type >= 4 && a.type <= 6));\r\n//     const groupFilterAssignments = assignments.filter(a => a.type === 7);\r\n\r\n//     if (level1Assignments.length > 0) {\r\n//       setFilterSlotsLevel1(prev => {\r\n//         const newSlots = prev.map(slot => ({ ...slot, enabled: false, tableId: null, columnName: null }));\r\n        \r\n//         level1Assignments.forEach(assignment => {\r\n//           const slotIndex = newSlots.findIndex(slot => slot.type === assignment.type);\r\n//           if (slotIndex !== -1) {\r\n//             newSlots[slotIndex] = {\r\n//               ...newSlots[slotIndex],\r\n//               enabled: true,\r\n//               tableId: assignment.tableId,\r\n//               columnName: assignment.columnName\r\n//             };\r\n//           }\r\n//         });\r\n        \r\n//         return newSlots;\r\n//       });\r\n//     }\r\n\r\n//     if (level2Assignments.length > 0) {\r\n//       setFilterSlotsLevel2(prev => {\r\n//         const newSlots = prev.map(slot => ({ ...slot, enabled: false, tableId: null, columnName: null }));\r\n        \r\n//         level2Assignments.forEach(assignment => {\r\n//           const slotIndex = newSlots.findIndex(slot => slot.type === assignment.type);\r\n//           if (slotIndex !== -1) {\r\n//             newSlots[slotIndex] = {\r\n//               ...newSlots[slotIndex],\r\n//               enabled: true,\r\n//               tableId: assignment.tableId,\r\n//               columnName: assignment.columnName\r\n//             };\r\n//           }\r\n//         });\r\n        \r\n//         return newSlots;\r\n//       });\r\n//     }\r\n\r\n//     if (groupFilterAssignments.length > 0) {\r\n//       setGroupFilterSlots(prev => {\r\n//         const newSlots = prev.map(slot => ({ ...slot, enabled: false, tableId: null, columnName: null }));\r\n        \r\n//         groupFilterAssignments.forEach(assignment => {\r\n//           const slotIndex = newSlots.findIndex(slot => slot.type === assignment.type);\r\n//           if (slotIndex !== -1) {\r\n//             newSlots[slotIndex] = {\r\n//               ...newSlots[slotIndex],\r\n//               enabled: true,\r\n//               tableId: assignment.tableId,\r\n//               columnName: assignment.columnName\r\n//             };\r\n//           }\r\n//         });\r\n        \r\n//         return newSlots;\r\n//       });\r\n//     }\r\n   \r\n//     if (allListTypes.size > 0) {\r\n//       setSelectedListTypes(Array.from(allListTypes));\r\n//     } else {\r\n//       setSelectedListTypes([1]); \r\n//     }\r\n//   }, [inputValues.tables]);\r\n\r\n//   const getColumnsForTableId = (tableId) => {\r\n//     if (!tableId) return [];\r\n//     const inSelected = inputValues.tables.find(t => String(t.Table_Id) === String(tableId));\r\n//     if (inSelected && Array.isArray(inSelected.columns) && inSelected.columns.length) return inSelected.columns;\r\n\r\n//     const meta = reportTables.find(t => String(t.Table_Id) === String(tableId));\r\n//     if (meta && Array.isArray(meta.Columns)) return meta.Columns.map(c => ({\r\n//       Column_Name: c.Column_Name,\r\n//       Column_Data_Type: c.Column_Data_Type ?? c?.Column_Data_Type ?? 'string',\r\n//       IS_Default: c.IS_Default ?? c?.IS_Default ?? 0,\r\n//       IS_Join_Key: c.IS_Join_Key ?? c?.IS_Join_Key ?? 0\r\n//     }));\r\n//     return [];\r\n//   };\r\n\r\n\r\n//   const handleFilterToggle = (idx, level) => {\r\n//     if (level === 'level1') {\r\n//       setFilterSlotsLevel1(prev => {\r\n//         const arr = [...prev];\r\n//         const newEnabledState = !arr[idx].enabled;\r\n        \r\n//         arr[idx] = { \r\n//           ...arr[idx], \r\n//           enabled: newEnabledState,\r\n//           tableId: newEnabledState ? arr[idx].tableId : null, \r\n//           columnName: newEnabledState ? arr[idx].columnName : null \r\n//         };\r\n        \r\n//         return arr;\r\n//       });\r\n//     } else if (level === 'level2') {\r\n//       setFilterSlotsLevel2(prev => {\r\n//         const arr = [...prev];\r\n//         const newEnabledState = !arr[idx].enabled;\r\n        \r\n//         arr[idx] = { \r\n//           ...arr[idx], \r\n//           enabled: newEnabledState,\r\n//           tableId: newEnabledState ? arr[idx].tableId : null, \r\n//           columnName: newEnabledState ? arr[idx].columnName : null \r\n//         };\r\n        \r\n//         return arr;\r\n//       });\r\n//     } else {\r\n//       setGroupFilterSlots(prev => {\r\n//         const arr = [...prev];\r\n//         const newEnabledState = !arr[idx].enabled;\r\n        \r\n//         arr[idx] = { \r\n//           ...arr[idx], \r\n//           enabled: newEnabledState,\r\n//           tableId: newEnabledState ? arr[idx].tableId : null, \r\n//           columnName: newEnabledState ? arr[idx].columnName : null \r\n//         };\r\n        \r\n//         return arr;\r\n//       });\r\n//     }\r\n//   };\r\n\r\n//   const tablesSelectedCountLevel1 = filterSlotsLevel1.reduce((acc, s) => acc + (s.enabled && s.tableId ? 1 : 0), 0);\r\n//   const columnsSelectedCountLevel1 = filterSlotsLevel1.reduce((acc, s) => acc + (s.enabled && s.columnName ? 1 : 0), 0);\r\n  \r\n//   const tablesSelectedCountLevel2 = filterSlotsLevel2.reduce((acc, s) => acc + (s.enabled && s.tableId ? 1 : 0), 0);\r\n//   const columnsSelectedCountLevel2 = filterSlotsLevel2.reduce((acc, s) => acc + (s.enabled && s.columnName ? 1 : 0), 0);\r\n\r\n//   const tablesSelectedCountGroup = groupFilterSlots.reduce((acc, s) => acc + (s.enabled && s.tableId ? 1 : 0), 0);\r\n//   const columnsSelectedCountGroup = groupFilterSlots.reduce((acc, s) => acc + (s.enabled && s.columnName ? 1 : 0), 0);\r\n\r\n//   const totalTablesSelected = tablesSelectedCountLevel1 + tablesSelectedCountLevel2 + tablesSelectedCountGroup;\r\n//   const totalColumnsSelected = columnsSelectedCountLevel1 + columnsSelectedCountLevel2 + columnsSelectedCountGroup;\r\n\r\n//   const buildDetails = () => {\r\n//     const details = [];\r\n//     const groupFilterDetails = [];\r\n\r\n//     // Regular filters (Level 1 & 2)\r\n//     filterSlotsLevel1.forEach(slot => {\r\n//       if (!slot.enabled) return;\r\n//       if (!slot.tableId || !slot.columnName) return;\r\n\r\n//       const listTypeToSave = selectedListTypes.length === 0 ? \"1\" : selectedListTypes.join(',');\r\n\r\n//       details.push({\r\n//         Type: Number(slot.type),\r\n//         Table_Id: Number(slot.tableId),\r\n//         Column_Name: slot.columnName,\r\n//         List_Type: listTypeToSave,\r\n//         Level: 1\r\n//       });\r\n//     });\r\n\r\n//     filterSlotsLevel2.forEach(slot => {\r\n//       if (!slot.enabled) return;\r\n//       if (!slot.tableId || !slot.columnName) return;\r\n\r\n//       const listTypeToSave = selectedListTypes.length === 0 ? \"1\" : selectedListTypes.join(',');\r\n\r\n//       details.push({\r\n//         Type: Number(slot.type),\r\n//         Table_Id: Number(slot.tableId),\r\n//         Column_Name: slot.columnName,\r\n//         List_Type: listTypeToSave,\r\n//         Level: 2\r\n//       });\r\n//     });\r\n\r\n//     // Group filter - separate array\r\n//     groupFilterSlots.forEach(slot => {\r\n//       if (!slot.enabled) return;\r\n//       if (!slot.tableId || !slot.columnName) return;\r\n\r\n//       const listTypeToSave = selectedListTypes.length === 0 ? \"1\" : selectedListTypes.join(',');\r\n\r\n//       groupFilterDetails.push({\r\n//         Type: Number(slot.type),\r\n//         Table_Id: Number(slot.tableId),\r\n//         Column_Name: slot.columnName,\r\n//         List_Type: listTypeToSave,\r\n//         Level: 3\r\n//       });\r\n//     });\r\n\r\n//     return { details, groupFilterDetails };\r\n//   };\r\n\r\n// // Update validation function to allow same column in different filter levels\r\n// const validateNoDuplicateColumns = () => {\r\n//   // Only check for duplicates within the same level\r\n//   // Group Filter can use the same columns as Level 1/2\r\n  \r\n//   // Check Level 1 for duplicates within Level 1 only\r\n//   const level1Slots = filterSlotsLevel1.filter(s => s.enabled && s.tableId && s.columnName);\r\n//   const level1Set = new Set();\r\n//   for (const slot of level1Slots) {\r\n//     const key = `${slot.tableId}_${slot.columnName}`;\r\n//     if (level1Set.has(key)) {\r\n//       const tableMeta = reportTables.find(t => String(t.Table_Id) === String(slot.tableId));\r\n//       const tableName = tableMeta ? (tableMeta.AliasName || tableMeta.Table_Name) : `Table ${slot.tableId}`;\r\n//       return {\r\n//         isValid: false,\r\n//         message: `Column \"${slot.columnName}\" from \"${tableName}\" is used in multiple Level 1 filters`\r\n//       };\r\n//     }\r\n//     level1Set.add(key);\r\n//   }\r\n  \r\n//   // Check Level 2 for duplicates within Level 2 only\r\n//   const level2Slots = filterSlotsLevel2.filter(s => s.enabled && s.tableId && s.columnName);\r\n//   const level2Set = new Set();\r\n//   for (const slot of level2Slots) {\r\n//     const key = `${slot.tableId}_${slot.columnName}`;\r\n//     if (level2Set.has(key)) {\r\n//       const tableMeta = reportTables.find(t => String(t.Table_Id) === String(slot.tableId));\r\n//       const tableName = tableMeta ? (tableMeta.AliasName || tableMeta.Table_Name) : `Table ${slot.tableId}`;\r\n//       return {\r\n//         isValid: false,\r\n//         message: `Column \"${slot.columnName}\" from \"${tableName}\" is used in multiple Level 2 filters`\r\n//       };\r\n//     }\r\n//     level2Set.add(key);\r\n//   }\r\n  \r\n\r\n//   for (const slot1 of level1Slots) {\r\n//     for (const slot2 of level2Slots) {\r\n//       if (String(slot1.tableId) === String(slot2.tableId) && \r\n//           String(slot1.columnName) === String(slot2.columnName)) {\r\n//         const tableMeta = reportTables.find(t => String(t.Table_Id) === String(slot1.tableId));\r\n//         const tableName = tableMeta ? (tableMeta.AliasName || tableMeta.Table_Name) : `Table ${slot1.tableId}`;\r\n//         return {\r\n//           isValid: false,\r\n//           message: `Column \"${slot1.columnName}\" from \"${tableName}\" cannot be used in both Level 1 and Level 2 filters`\r\n//         };\r\n//       }\r\n//     }\r\n//   }\r\n  \r\n\r\n  \r\n//   return { isValid: true };\r\n// };\r\n\r\n//   const saveTemplate = async () => {\r\n   \r\n//     const validation = validateNoDuplicateColumns();\r\n//     if (!validation.isValid) {\r\n//       toast.error(validation.message);\r\n//       return;\r\n//     }\r\n    \r\n//     const { details, groupFilterDetails } = buildDetails();\r\n\r\n    \r\n//     if (details.length === 0 && groupFilterDetails.length === 0) {\r\n//       toast.error(\"Assign at least one filter slot (table + column) before saving\");\r\n//       return;\r\n//     }\r\n//     if (!inputValues.reportName || String(inputValues.reportName).trim() === '') {\r\n//       toast.error(\"Report name is required\");\r\n//       return;\r\n//     }\r\n\r\n    \r\n//     const payload = {\r\n//       Report_Type_Id: inputValues?.Report_Type_Id || null,\r\n//       reportName: inputValues.reportName,\r\n//       createdBy: inputValues.createdBy,\r\n//       updatedBy: storage?.UserId,\r\n//       details: details, \r\n//       ...(groupFilterDetails.length > 0 && {\r\n//         GroupFilter: groupFilterDetails \r\n//       })\r\n//     };\r\n\r\n//     try {\r\n//       const res = await fetchLink({\r\n//         address: `reports/templateMobile`,\r\n//         method: inputValues?.Report_Type_Id ? 'PUT' : 'POST',\r\n//         bodyData: payload\r\n//       });\r\n//       if (res?.success) {\r\n//         toast.success(res.message);\r\n//         setInputValues(initialValue);\r\n//         setFilterSlotsLevel1([\r\n//           { slot: 1, enabled: false, tableId: null, columnName: null, type: 1 },\r\n//           { slot: 2, enabled: false, tableId: null, columnName: null, type: 2 },\r\n//           { slot: 3, enabled: false, tableId: null, columnName: null, type: 3 }\r\n//         ]);\r\n//         setFilterSlotsLevel2([\r\n//           { slot: 1, enabled: false, tableId: null, columnName: null, type: 4 },\r\n//           { slot: 2, enabled: false, tableId: null, columnName: null, type: 5 },\r\n//           { slot: 3, enabled: false, tableId: null, columnName: null, type: 6 }\r\n//         ]);\r\n//         setGroupFilterSlots([\r\n//           { slot: 1, enabled: false, tableId: null, columnName: null, type: 7 }\r\n//         ]);\r\n//         setSelectedListTypes([]);\r\n//         nav(-1);\r\n//       } else {\r\n//         toast.error(res?.message || 'Failed to save');\r\n//       }\r\n//     } catch (e) {\r\n//       console.error(e);\r\n//       toast.error('Error saving template');\r\n//     }\r\n//   };\r\n\r\n\r\n//   const canPreview = \r\n//     filterSlotsLevel1.some(s => s.enabled && s.tableId && s.columnName) ||\r\n//     filterSlotsLevel2.some(s => s.enabled && s.tableId && s.columnName) ||\r\n//     groupFilterSlots.some(s => s.enabled && s.tableId && s.columnName);\r\n\r\n//   if (!isEqualNumber(contextObj?.Add_Rights, 1)) return null;\r\n\r\n//   const renderFilterSection = (title, filterSlots, level) => (\r\n//     <Box className=\"mt-3 p-3 border rounded\" sx={{ background: '#FBFCFD' }}>\r\n//       <Typography variant=\"subtitle1\" fontWeight={700} gutterBottom>{title}</Typography>\r\n      \r\n//       <Grid container spacing={3}>\r\n//         {filterSlots.map((slot, idx) => {\r\n//           const label = level === 'group' ? 'Group Filter' : `Filter ${slot.slot}`;\r\n    \r\n//           const tablesToShow = level === 'group' ? losTables : reportTables;\r\n          \r\n//           return (\r\n//             <Grid item xs={4} key={slot.type}>\r\n//               <Box sx={{ \r\n//                 display: 'flex', \r\n//                 alignItems: 'center', \r\n//                 p: 1.5, \r\n//                 mb: 1,\r\n//                 borderRadius: 1, \r\n//                 background: '#fff', \r\n//                 border: '1px solid #e0e0e0',\r\n//                 minHeight: '60px'\r\n//               }}>\r\n//                 <label style={{ display: 'flex', alignItems: 'center', gap: 10, width: '100%' }}>\r\n//                   <input\r\n//                     type=\"checkbox\"\r\n//                     checked={slot.enabled}\r\n//                     onChange={() => handleFilterToggle(idx, level)}\r\n//                     style={{ width: '18px', height: '18px' }}\r\n//                   />\r\n//                   <Typography variant=\"subtitle1\" fontWeight={600}>{label}</Typography>\r\n//                 </label>\r\n//               </Box>\r\n              \r\n//               {slot.enabled ? (\r\n//                 <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1.5 }}>\r\n//                   <Box>\r\n//                     <Typography variant=\"caption\" color=\"textSecondary\" sx={{ mb: 0.5, display: 'block' }}>\r\n//                       Table\r\n//                     </Typography>\r\n//                     <select\r\n//                       className=\"cus-inpt\"\r\n//                       value={slot.tableId ?? ''}\r\n//                       onChange={(e) => {\r\n//                         const val = e.target.value || null;\r\n//                         if (level === 'level1') {\r\n//                           setFilterSlotsLevel1(prev => {\r\n//                             const arr = [...prev];\r\n//                             arr[idx] = { ...arr[idx], tableId: val, columnName: null };\r\n//                             return arr;\r\n//                           });\r\n//                         } else if (level === 'level2') {\r\n//                           setFilterSlotsLevel2(prev => {\r\n//                             const arr = [...prev];\r\n//                             arr[idx] = { ...arr[idx], tableId: val, columnName: null };\r\n//                             return arr;\r\n//                           });\r\n//                         } else {\r\n//                           setGroupFilterSlots(prev => {\r\n//                             const arr = [...prev];\r\n//                             arr[idx] = { ...arr[idx], tableId: val, columnName: null };\r\n//                             return arr;\r\n//                           });\r\n//                         }\r\n//                       }}\r\n//                       style={{ width: '100%' }}\r\n//                     >\r\n//                       <option value=\"\">Select table</option>\r\n//                       {tablesToShow.map((t, ti) => (\r\n//                         <option key={ti} value={t.Table_Id}>\r\n//                           {t.AliasName || t.Table_Name}\r\n//                           {level === 'group' && ' (LOS)'}\r\n//                         </option>\r\n//                       ))}\r\n//                       {level === 'group' && tablesToShow.length === 0 && (\r\n//                         <option value=\"\" disabled>No LOS tables found</option>\r\n//                       )}\r\n//                     </select>\r\n//                     {level === 'group' && (\r\n//                       <Typography variant=\"caption\" color=\"textSecondary\" sx={{ mt: 0.5, display: 'block' }}>\r\n//                         Only LOS tables are shown for group filter\r\n//                       </Typography>\r\n//                     )}\r\n//                   </Box>\r\n                  \r\n//          <Box>\r\n//   <Typography variant=\"caption\" color=\"textSecondary\" sx={{ mb: 0.5, display: 'block' }}>\r\n//     Column\r\n//   </Typography>\r\n//   <select\r\n//     className=\"cus-inpt\"\r\n//     value={slot.columnName ?? ''}\r\n//     disabled={!slot.tableId}\r\n//     onChange={(e) => {\r\n//       const val = e.target.value || null;\r\n      \r\n//       if (level === 'level1') {\r\n//         setFilterSlotsLevel1(prev => {\r\n//           const arr = [...prev];\r\n//           arr[idx] = { ...arr[idx], columnName: val };\r\n//           return arr;\r\n//         });\r\n//       } else if (level === 'level2') {\r\n//         setFilterSlotsLevel2(prev => {\r\n//           const arr = [...prev];\r\n//           arr[idx] = { ...arr[idx], columnName: val };\r\n//           return arr;\r\n//         });\r\n//       } else {\r\n//         setGroupFilterSlots(prev => {\r\n//           const arr = [...prev];\r\n//           arr[idx] = { ...arr[idx], columnName: val };\r\n//           return arr;\r\n//         });\r\n//       }\r\n//     }}\r\n//     style={{ width: '100%' }}\r\n//   >\r\n//     <option value=\"\">Select column</option>\r\n//     {slot.tableId && getColumnsForTableId(slot.tableId).map((c, ci) => {\r\n//       // For Group Filter: ALL columns are enabled regardless of whether they're used in Level 1/2\r\n//       // For Level 1/2: Check if column is used in other slots of the same level\r\n//       let isDisabled = false;\r\n//       let disabledReason = '';\r\n      \r\n//       if (level === 'group') {\r\n//         // In Group Filter, NO columns are disabled\r\n//         isDisabled = false;\r\n//       } else if (level === 'level1') {\r\n//         // Check if column is used in other Level 1 slots\r\n//         const usedInOtherLevel1 = filterSlotsLevel1.some((s, slotIdx) => {\r\n//           if (!s.enabled || !s.tableId || !s.columnName) return false;\r\n//           if (slotIdx === idx) return false; // Exclude current slot\r\n//           return String(s.tableId) === String(slot.tableId) && \r\n//                  String(s.columnName) === String(c.Column_Name);\r\n//         });\r\n        \r\n//         // Check if column is used in Level 2\r\n//         const usedInLevel2 = filterSlotsLevel2.some(s => {\r\n//           if (!s.enabled || !s.tableId || !s.columnName) return false;\r\n//           return String(s.tableId) === String(slot.tableId) && \r\n//                  String(s.columnName) === String(c.Column_Name);\r\n//         });\r\n        \r\n//         isDisabled = usedInOtherLevel1 || usedInLevel2;\r\n//         if (usedInOtherLevel1) disabledReason = ' (Used in another Level 1 filter)';\r\n//         else if (usedInLevel2) disabledReason = ' (Used in Level 2 filter)';\r\n//       } else if (level === 'level2') {\r\n//         // Check if column is used in other Level 2 slots\r\n//         const usedInOtherLevel2 = filterSlotsLevel2.some((s, slotIdx) => {\r\n//           if (!s.enabled || !s.tableId || !s.columnName) return false;\r\n//           if (slotIdx === idx) return false; // Exclude current slot\r\n//           return String(s.tableId) === String(slot.tableId) && \r\n//                  String(s.columnName) === String(c.Column_Name);\r\n//         });\r\n        \r\n//         // Check if column is used in Level 1\r\n//         const usedInLevel1 = filterSlotsLevel1.some(s => {\r\n//           if (!s.enabled || !s.tableId || !s.columnName) return false;\r\n//           return String(s.tableId) === String(slot.tableId) && \r\n//                  String(s.columnName) === String(c.Column_Name);\r\n//         });\r\n        \r\n//         isDisabled = usedInOtherLevel2 || usedInLevel1;\r\n//         if (usedInOtherLevel2) disabledReason = ' (Used in another Level 2 filter)';\r\n//         else if (usedInLevel1) disabledReason = ' (Used in Level 1 filter)';\r\n//       }\r\n      \r\n//       const isCurrentlySelected = slot.columnName === c.Column_Name;\r\n//       // If it's currently selected, always enable it (so you can keep your selection)\r\n//       const shouldDisable = !isCurrentlySelected && isDisabled;\r\n      \r\n//       return (\r\n//         <option \r\n//           key={ci} \r\n//           value={c.Column_Name} \r\n//           disabled={shouldDisable} \r\n//           style={{ \r\n//             color: shouldDisable ? '#999' : 'inherit',\r\n//             backgroundColor: shouldDisable ? '#f5f5f5' : 'inherit',\r\n//             fontStyle: shouldDisable ? 'italic' : 'normal'\r\n//           }}\r\n//         >\r\n//           {c.Column_Name} \r\n//           {c.Column_Data_Type ? ` (${c.Column_Data_Type})` : ''}\r\n//           {shouldDisable ? disabledReason : ''}\r\n//         </option>\r\n//       );\r\n//     })}\r\n//   </select>\r\n//   {level === 'group' && (\r\n//     <Typography variant=\"caption\" color=\"textSecondary\" sx={{ mt: 0.5, display: 'block', fontSize: '0.75rem' }}>\r\n//       Note: All columns are enabled in Group Filter, even if used in Level 1/2 filters.\r\n//     </Typography>\r\n//   )}\r\n// </Box>\r\n//                 </Box>\r\n//               ) : (\r\n//                 <Box sx={{ \r\n//                   display: 'flex', \r\n//                   alignItems: 'center', \r\n//                   justifyContent: 'center', \r\n//                   p: 3, \r\n//                   borderRadius: 1, \r\n//                   background: '#f8f9fa',\r\n//                   border: '1px dashed #dee2e6',\r\n//                   color: '#6c757d',\r\n//                   textAlign: 'center',\r\n//                   minHeight: '120px'\r\n//                 }}>\r\n//                   <Typography variant=\"body2\">\r\n//                     Enable {label} to configure\r\n//                   </Typography>\r\n//                 </Box>\r\n//               )}\r\n//             </Grid>\r\n//           );\r\n//         })}\r\n//       </Grid>\r\n//     </Box>\r\n//   );\r\n\r\n//   return (\r\n//     <>\r\n//       <Card>\r\n//         <div className=\"p-2 border-bottom fa-16 fw-bold d-flex justify-content-between align-items-center\">\r\n//           <span className=\"text-primary text-uppercase ps-3\">{inputValues?.Report_Type_Id ? 'Modify Mobile Template' : 'Mobile Template Creation'}</span>\r\n//           <Button variant=\"outlined\" onClick={() => nav(-1)} startIcon={<KeyboardArrowLeft />}>Back</Button>\r\n//         </div>\r\n\r\n//         <CardContent>\r\n//           <div>\r\n//             <label className=\"w-100\">Report Name</label>\r\n//             <Select\r\n//               value={\r\n//                 inputValues.reportName\r\n//                   ? {\r\n//                       value: inputValues.reportName,\r\n//                       label: inputValues.reportName,\r\n//                     }\r\n//                   : null\r\n//               }\r\n//               onChange={(selectedOption) => {\r\n//                 setInputValues({ \r\n//                   ...inputValues, \r\n//                   reportName: selectedOption ? selectedOption.value : '' \r\n//                 });\r\n//               }}\r\n//               options={reportOptions}\r\n//               placeholder={loadingReports ? \"Loading reports...\" : \"Select or type to search...\"}\r\n//               isClearable={true}\r\n//               isSearchable={true}\r\n//               isLoading={loadingReports}\r\n//               noOptionsMessage={({ inputValue }) => \r\n//                 inputValue ? `Press Enter to create \"${inputValue}\"` : \"No options available\"\r\n//               }\r\n//               formatCreateLabel={(inputValue) => `Create \"${inputValue}\"`}\r\n//               onCreateOption={(inputValue) => {\r\n               \r\n//                 const alreadyExists = reportOptions.some(opt => \r\n//                   opt.value.toLowerCase() === inputValue.toLowerCase()\r\n//                 );\r\n                \r\n//                 if (!alreadyExists) {\r\n//                   const newOption = {\r\n//                     value: inputValue,\r\n//                     label: inputValue,\r\n//                   };\r\n                 \r\n//                   setReportOptions(prev => [...prev, newOption]);\r\n//                   setExistingReportName(prev => [...prev, inputValue]);\r\n//                 }\r\n                \r\n               \r\n//                 setInputValues({ ...inputValues, reportName: inputValue });\r\n//               }}\r\n//               styles={{\r\n//                 control: (base) => ({\r\n//                   ...base,\r\n//                   width: '600px',\r\n//                   border: '1px solid #ccc',\r\n//                   borderRadius: '4px',\r\n//                   minHeight: '36px',\r\n//                 }),\r\n//                 menu: (base) => ({\r\n//                   ...base,\r\n//                   width: '300px',\r\n//                 }),\r\n//               }}\r\n//             />\r\n//           </div>\r\n\r\n//           <div className=\"p-2 mt-3 border rounded-3 d-inline-block\">\r\n//             <table><tbody>\r\n//               <tr><td className=\"border-end\">Total Filters Assigned</td><td className=\"px-2 blue-text\">{totalTablesSelected}</td></tr>\r\n//               <tr><td className=\"border-end\">Total Columns Assigned</td><td className=\"px-2 blue-text\">{totalColumnsSelected}</td></tr>\r\n//               <tr><td className=\"border-end\">Level 1 Filters</td><td className=\"px-2 blue-text\">{tablesSelectedCountLevel1}</td></tr>\r\n//               <tr><td className=\"border-end\">Level 2 Filters</td><td className=\"px-2 blue-text\">{tablesSelectedCountLevel2}</td></tr>\r\n//               <tr><td className=\"border-end\">Group Filters</td><td className=\"px-2 blue-text\">{tablesSelectedCountGroup}</td></tr>\r\n//             </tbody></table>\r\n//           </div>\r\n\r\n//           {renderFilterSection(\"Level 1 Filters\", filterSlotsLevel1, 'level1')}\r\n//           {renderFilterSection(\"Level 2 Filters\", filterSlotsLevel2, 'level2')}\r\n//           {renderFilterSection(\"Group Filter\", groupFilterSlots, 'group')}\r\n\r\n//           <Box className=\"mt-3 d-flex align-items-center\" sx={{ gap: 2 }}>\r\n//             <Typography fontWeight={700}>List Type:</Typography>\r\n//             <label style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\r\n//               <input \r\n//                 type=\"checkbox\" \r\n//                 checked={selectedListTypes.includes(1)} \r\n//                 onChange={(e) => {\r\n//                   if (e.target.checked) {\r\n//                     setSelectedListTypes(prev => [...prev, 1]);\r\n//                   } else {\r\n//                     setSelectedListTypes(prev => prev.filter(x => x !== 1));\r\n//                   }\r\n//                 }} \r\n//               /> \r\n//               <span>Sum</span>\r\n//             </label>\r\n//             <label style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\r\n//               <input \r\n//                 type=\"checkbox\" \r\n//                 checked={selectedListTypes.includes(2)} \r\n//                 onChange={(e) => {\r\n//                   if (e.target.checked) {\r\n//                     setSelectedListTypes(prev => [...prev, 2]);\r\n//                   } else {\r\n//                     setSelectedListTypes(prev => prev.filter(x => x !== 2));\r\n//                   }\r\n//                 }} \r\n//               /> \r\n//               <span>Avg</span>\r\n//             </label>\r\n//           </Box>\r\n\r\n//           <Box className=\"mt-4 d-flex justify-content-end\" sx={{ gap: 2 }}>\r\n//             <Button variant=\"outlined\" onClick={() => { \r\n//               setFilterSlotsLevel1([\r\n//                 { slot: 1, enabled: false, tableId: null, columnName: null, type: 1 },\r\n//                 { slot: 2, enabled: false, tableId: null, columnName: null, type: 2 },\r\n//                 { slot: 3, enabled: false, tableId: null, columnName: null, type: 3 },\r\n//               ]); \r\n//               setFilterSlotsLevel2([\r\n//                 { slot: 1, enabled: false, tableId: null, columnName: null, type: 4 },\r\n//                 { slot: 2, enabled: false, tableId: null, columnName: null, type: 5 },\r\n//                 { slot: 3, enabled: false, tableId: null, columnName: null, type: 6 },\r\n//               ]);\r\n//               setGroupFilterSlots([\r\n//                 { slot: 1, enabled: false, tableId: null, columnName: null, type: 7 }\r\n//               ]);\r\n//               setSelectedListTypes([]); \r\n//             }}>\r\n//               Reset All\r\n//             </Button>\r\n\r\n//             <Tooltip title={!canPreview ? 'Assign at least one slot to Preview' : ''}>\r\n//               <span>\r\n//                 <Button\r\n//                   variant=\"outlined\"\r\n//                   startIcon={<RemoveRedEyeOutlined />}\r\n//                   disabled={!canPreview}\r\n//                   onClick={() => setOpenConfigPreview(true)}\r\n//                 >\r\n//                   Preview\r\n//                 </Button>\r\n//               </span>\r\n//             </Tooltip>\r\n\r\n//             <Button variant=\"contained\" startIcon={<Save />} onClick={saveTemplate}>\r\n//               Submit\r\n//             </Button>\r\n//           </Box>\r\n//         </CardContent>\r\n//       </Card>\r\n\r\n//       <Dialog open={openConfigPreview} onClose={() => setOpenConfigPreview(false)} fullWidth maxWidth=\"md\">\r\n//         <DialogTitle>Preview - Template Configuration</DialogTitle>\r\n//         <DialogContent dividers>\r\n//           <Typography variant=\"subtitle1\" fontWeight={700} gutterBottom>Report: {inputValues.reportName || ''}</Typography>\r\n\r\n//           <Box sx={{ mb: 2 }}>\r\n//             {filterSlotsLevel1.filter(s => s.enabled && s.tableId && s.columnName).length === 0 &&\r\n//              filterSlotsLevel2.filter(s => s.enabled && s.tableId && s.columnName).length === 0 &&\r\n//              groupFilterSlots.filter(s => s.enabled && s.tableId && s.columnName).length === 0 && (\r\n//               <Typography>No filter assigned yet.</Typography>\r\n//             )}\r\n\r\n//             {filterSlotsLevel1.filter(s => s.enabled && s.tableId && s.columnName).length > 0 && (\r\n//               <>\r\n//                 <Typography variant=\"subtitle2\" fontWeight={700} sx={{ mt: 2, mb: 1 }}>Level 1 Filters:</Typography>\r\n//                 {filterSlotsLevel1.filter(s => s.enabled && s.tableId && s.columnName).map((s, i) => {\r\n//                   const tableMeta = reportTables.find(t => String(t.Table_Id) === String(s.tableId));\r\n//                   const tableLabel = tableMeta ? (tableMeta.AliasName || tableMeta.Table_Name) : `Table ${s.tableId}`;\r\n//                   const listType = selectedListTypes.length === 0 ? '' : (selectedListTypes.length === 2 ? 'Sum & Avg' : (selectedListTypes[0] === 1 ? 'Sum' : 'Avg'));\r\n//                   const label = `Filter ${s.slot}`;\r\n//                   return (\r\n//                     <Box key={s.type} sx={{ p: 1, borderRadius: 1, background: '#F7F9FB', mb: 1 }}>\r\n//                       <Grid container alignItems=\"center\">\r\n//                         <Grid item xs={12} md={3}><strong>{label}</strong></Grid>\r\n//                         <Grid item xs={12} md={4}>{tableLabel}</Grid>\r\n//                         <Grid item xs={12} md={3}>{s.columnName}</Grid>\r\n//                         <Grid item xs={12} md={2} style={{ textAlign: 'right' }}>{listType}</Grid>\r\n//                       </Grid>\r\n//                     </Box>\r\n//                   );\r\n//                 })}\r\n//               </>\r\n//             )}\r\n\r\n//             {filterSlotsLevel2.filter(s => s.enabled && s.tableId && s.columnName).length > 0 && (\r\n//               <>\r\n//                 <Typography variant=\"subtitle2\" fontWeight={700} sx={{ mt: 2, mb: 1 }}>Level 2 Filters:</Typography>\r\n//                 {filterSlotsLevel2.filter(s => s.enabled && s.tableId && s.columnName).map((s, i) => {\r\n//                   const tableMeta = reportTables.find(t => String(t.Table_Id) === String(s.tableId));\r\n//                   const tableLabel = tableMeta ? (tableMeta.AliasName || tableMeta.Table_Name) : `Table ${s.tableId}`;\r\n//                   const listType = selectedListTypes.length === 0 ? '' : (selectedListTypes.length === 2 ? 'Sum & Avg' : (selectedListTypes[0] === 1 ? 'Sum' : 'Avg'));\r\n//                   const label = `Filter ${s.slot}`;\r\n//                   return (\r\n//                     <Box key={s.type} sx={{ p: 1, borderRadius: 1, background: '#F7F9FB', mb: 1 }}>\r\n//                       <Grid container alignItems=\"center\">\r\n//                         <Grid item xs={12} md={3}><strong>{label}</strong></Grid>\r\n//                         <Grid item xs={12} md={4}>{tableLabel}</Grid>\r\n//                         <Grid item xs={12} md={3}>{s.columnName}</Grid>\r\n//                         <Grid item xs={12} md={2} style={{ textAlign: 'right' }}>{listType}</Grid>\r\n//                       </Grid>\r\n//                     </Box>\r\n//                   );\r\n//                 })}\r\n//               </>\r\n//             )}\r\n\r\n//             {groupFilterSlots.filter(s => s.enabled && s.tableId && s.columnName).length > 0 && (\r\n//               <>\r\n//                 <Typography variant=\"subtitle2\" fontWeight={700} sx={{ mt: 2, mb: 1 }}>Group Filter:</Typography>\r\n//                 {groupFilterSlots.filter(s => s.enabled && s.tableId && s.columnName).map((s, i) => {\r\n//                   const tableMeta = reportTables.find(t => String(t.Table_Id) === String(s.tableId));\r\n//                   const tableLabel = tableMeta ? (tableMeta.AliasName || tableMeta.Table_Name) : `Table ${s.tableId}`;\r\n//                   const listType = selectedListTypes.length === 0 ? '' : (selectedListTypes.length === 2 ? 'Sum & Avg' : (selectedListTypes[0] === 1 ? 'Sum' : 'Avg'));\r\n//                   return (\r\n//                     <Box key={s.type} sx={{ p: 1, borderRadius: 1, background: '#F7F9FB', mb: 1 }}>\r\n//                       <Grid container alignItems=\"center\">\r\n//                         <Grid item xs={12} md={3}><strong>Group Filter</strong></Grid>\r\n//                         <Grid item xs={12} md={4}>{tableLabel} {tableMeta && (tableMeta.Table_Name?.toLowerCase().includes('los') || tableMeta.AliasName?.toLowerCase().includes('los')) && '(LOS)'}</Grid>\r\n//                         <Grid item xs={12} md={3}>{s.columnName}</Grid>\r\n//                         <Grid item xs={12} md={2} style={{ textAlign: 'right' }}>{listType}</Grid>\r\n//                       </Grid>\r\n//                     </Box>\r\n//                   );\r\n//                 })}\r\n//               </>\r\n//             )}\r\n//           </Box>\r\n\r\n//           <Typography variant=\"caption\" color=\"textSecondary\">\r\n//             Note: Columns already used in other filter slots are disabled to prevent duplicates.\r\n//           </Typography>\r\n//         </DialogContent>\r\n\r\n//         <DialogActions>\r\n//           <Button onClick={() => setOpenConfigPreview(false)} startIcon={<ArrowBackIosNewOutlined />}>Back</Button>\r\n//           <Button variant=\"contained\" onClick={() => { setOpenConfigPreview(false); saveTemplate(); }}>Submit</Button>\r\n//         </DialogActions>\r\n//       </Dialog>\r\n//     </>\r\n//   );\r\n// };\r\n\r\n// export default ReportsTemplateMobCreation;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport {\r\n  Card, CardContent, Button, Tooltip, Dialog, DialogTitle, DialogContent, DialogActions,\r\n  Box, Grid, Typography\r\n} from '@mui/material';\r\nimport { ArrowBackIosNewOutlined, KeyboardArrowLeft, RemoveRedEyeOutlined, Save } from '@mui/icons-material';\r\nimport { isValidObject, isEqualNumber } from '../../Components/functions';\r\nimport { toast } from 'react-toastify';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { MyContext } from '../../Components/context/contextProvider';\r\nimport { fetchLink } from '../../Components/fetchComponent';\r\nimport Select from 'react-select';\r\n\r\nconst ReportsTemplateMobCreation = () => {\r\n  const storage = JSON.parse(localStorage.getItem('user'));\r\n  const nav = useNavigate();\r\n  const { contextObj } = useContext(MyContext);\r\n  const locationState = useLocation().state;\r\n\r\n  const initialValue = {\r\n    Report_Type_Id: '',\r\n    reportName: '',\r\n    tables: [],\r\n    tableJoins: [],\r\n    currentTab: '',\r\n    createdBy: storage?.UserId\r\n  };\r\n\r\n  const [inputValues, setInputValues] = useState(initialValue);\r\n  const [reportTables, setReportTables] = useState([]);\r\n  const [existingReportName, setExistingReportName] = useState([]);\r\n  const [loadingReports, setLoadingReports] = useState(false);\r\n\r\n  const [reportOptions, setReportOptions] = useState([]);\r\n  const [filterSlotsLevel1, setFilterSlotsLevel1] = useState([\r\n    { slot: 1, enabled: false, tableId: null, columnName: null, type: 1 },\r\n    { slot: 2, enabled: false, tableId: null, columnName: null, type: 2 },\r\n    { slot: 3, enabled: false, tableId: null, columnName: null, type: 3 },\r\n  ]);\r\n\r\n  const [filterSlotsLevel2, setFilterSlotsLevel2] = useState([\r\n    { slot: 1, enabled: false, tableId: null, columnName: null, type: 4 },\r\n    { slot: 2, enabled: false, tableId: null, columnName: null, type: 5 },\r\n    { slot: 3, enabled: false, tableId: null, columnName: null, type: 6 },\r\n  ]);\r\n\r\n  const [groupFilterSlots, setGroupFilterSlots] = useState([\r\n    { slot: 1, enabled: false, tableId: null, columnName: null, type: 7 },\r\n    { slot: 2, enabled: false, tableId: null, columnName: null, type: 8 },\r\n    { slot: 3, enabled: false, tableId: null, columnName: null, type: 9 },\r\n  ]);\r\n\r\n  const [selectedListTypes, setSelectedListTypes] = useState([]);\r\n  const [openConfigPreview, setOpenConfigPreview] = useState(false);\r\n\r\n  const losTables = reportTables.filter(table =>\r\n    table.Table_Name?.toLowerCase().includes('los') ||\r\n    table.AliasName?.toLowerCase().includes('los')\r\n  );\r\n\r\n  useEffect(() => {\r\n    fetchExistingReportNames();\r\n  }, []);\r\n\r\n  const fetchExistingReportNames = async () => {\r\n    try {\r\n      setLoadingReports(true);\r\n      const response = await fetchLink({\r\n        address: 'reports/templateMobile',\r\n        method: 'GET'\r\n      });\r\n\r\n      if (response?.success) {\r\n        const reports = response?.data || [];\r\n        const uniqueReportNames = [...new Set(reports.map(report => report.Report_Name).filter(name => name))];\r\n        setExistingReportName(uniqueReportNames);\r\n\r\n        const options = uniqueReportNames.map(name => ({\r\n          value: name,\r\n          label: name\r\n        }));\r\n        setReportOptions(options);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching existing reports:', error);\r\n      toast.error('Failed to load existing reports');\r\n    } finally {\r\n      setLoadingReports(false);\r\n    }\r\n  };\r\n\r\n  // Load existing template data for editing\r\n  useEffect(() => {\r\n    const stateValue = locationState?.ReportState;\r\n    if (isValidObject(stateValue)) {\r\n      const reportName = stateValue?.reportName ?? '';\r\n\r\n      setInputValues(prev => ({\r\n        ...prev,\r\n        Report_Type_Id: stateValue?.Report_Type_Id ?? '',\r\n        reportName: reportName,\r\n        tables: [...(stateValue?.tables || [])],\r\n        createdBy: stateValue?.createdBy ?? storage?.UserId\r\n      }));\r\n\r\n      if (reportName && !reportOptions.some(opt => opt.value === reportName)) {\r\n        const newOption = { value: reportName, label: reportName };\r\n        setReportOptions(prev => [...prev, newOption]);\r\n        setExistingReportName(prev => [...prev, reportName]);\r\n      }\r\n\r\n      // Load group filters with Level_Id to Type mapping\r\n      const groupFilterFromState = stateValue?.GroupFilter || [];\r\n\r\n      if (groupFilterFromState.length > 0) {\r\n        setGroupFilterSlots(prev => {\r\n          const newSlots = [...prev];\r\n\r\n          groupFilterFromState.forEach((gf, index) => {\r\n            if (index < newSlots.length) {\r\n              // Determine type from either gf.Type or from Level_Id\r\n              let type = gf.Type || (7 + index);\r\n              \r\n              // If Level_Id is present, map it back to Type (1->7, 2->8, 3->9)\r\n              if (gf.Level_Id) {\r\n                if (gf.Level_Id === 1) type = 7;\r\n                else if (gf.Level_Id === 2) type = 8;\r\n                else if (gf.Level_Id === 3) type = 9;\r\n              }\r\n\r\n              newSlots[index] = {\r\n                ...newSlots[index],\r\n                enabled: true,\r\n                tableId: gf.Table_Id ? Number(gf.Table_Id) : null,\r\n                columnName: gf.Column_Name,\r\n                type: type\r\n              };\r\n            }\r\n          });\r\n\r\n          return newSlots;\r\n        });\r\n      }\r\n    }\r\n  }, [locationState?.ReportState, storage?.UserId]);\r\n\r\n  // Fetch tables and columns\r\n  useEffect(() => {\r\n    fetchLink({ address: `reports/tablesAndColumnsMobile` })\r\n      .then(data => {\r\n        if (data?.success) setReportTables(data?.data || []);\r\n      }).catch(e => console.error(e));\r\n  }, []);\r\n\r\n  // Process assignments from selected tables\r\n  useEffect(() => {\r\n    if (!inputValues.tables || inputValues.tables.length === 0) return;\r\n\r\n    const assignments = [];\r\n    const allListTypes = new Set();\r\n\r\n    inputValues.tables.forEach(table => {\r\n      table.columns?.forEach(column => {\r\n        if (column.Type) {\r\n          const types = Array.isArray(column.Type) ? column.Type : [column.Type];\r\n          types.forEach(type => {\r\n            if (type) {\r\n              assignments.push({\r\n                type: Number(type),\r\n                tableId: table.Table_Id,\r\n                columnName: column.Column_Name,\r\n                listType: column.List_Type,\r\n                level: column.Level\r\n              });\r\n\r\n              if (column.List_Type) {\r\n                const listTypes = String(column.List_Type)\r\n                  .split(',')\r\n                  .map(lt => Number(lt.trim()))\r\n                  .filter(lt => !isNaN(lt));\r\n\r\n                listTypes.forEach(lt => allListTypes.add(lt));\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    const level1Assignments = assignments.filter(a => a.level === 1 || (a.type >= 1 && a.type <= 3));\r\n    const level2Assignments = assignments.filter(a => a.level === 2 || (a.type >= 4 && a.type <= 6));\r\n    const groupFilterAssignments = assignments.filter(a =>\r\n      a.type === 7 || a.type === 8 || a.type === 9\r\n    );\r\n\r\n    if (level1Assignments.length > 0) {\r\n      setFilterSlotsLevel1(prev => {\r\n        const newSlots = prev.map(slot => ({ ...slot, enabled: false, tableId: null, columnName: null }));\r\n\r\n        level1Assignments.forEach(assignment => {\r\n          const slotIndex = newSlots.findIndex(slot => slot.type === assignment.type);\r\n          if (slotIndex !== -1) {\r\n            newSlots[slotIndex] = {\r\n              ...newSlots[slotIndex],\r\n              enabled: true,\r\n              tableId: assignment.tableId,\r\n              columnName: assignment.columnName\r\n            };\r\n          }\r\n        });\r\n\r\n        return newSlots;\r\n      });\r\n    }\r\n\r\n    if (level2Assignments.length > 0) {\r\n      setFilterSlotsLevel2(prev => {\r\n        const newSlots = prev.map(slot => ({ ...slot, enabled: false, tableId: null, columnName: null }));\r\n\r\n        level2Assignments.forEach(assignment => {\r\n          const slotIndex = newSlots.findIndex(slot => slot.type === assignment.type);\r\n          if (slotIndex !== -1) {\r\n            newSlots[slotIndex] = {\r\n              ...newSlots[slotIndex],\r\n              enabled: true,\r\n              tableId: assignment.tableId,\r\n              columnName: assignment.columnName\r\n            };\r\n          }\r\n        });\r\n\r\n        return newSlots;\r\n      });\r\n    }\r\n\r\n    if (groupFilterAssignments.length > 0) {\r\n      setGroupFilterSlots(prev => {\r\n        const newSlots = prev.map(slot => ({ ...slot, enabled: false, tableId: null, columnName: null }));\r\n\r\n        groupFilterAssignments.forEach(assignment => {\r\n          const slotIndex = newSlots.findIndex(slot => slot.type === assignment.type);\r\n          if (slotIndex !== -1) {\r\n            newSlots[slotIndex] = {\r\n              ...newSlots[slotIndex],\r\n              enabled: true,\r\n              tableId: assignment.tableId,\r\n              columnName: assignment.columnName\r\n            };\r\n          }\r\n        });\r\n\r\n        return newSlots;\r\n      });\r\n    }\r\n\r\n    if (allListTypes.size > 0) {\r\n      setSelectedListTypes(Array.from(allListTypes));\r\n    } else {\r\n      setSelectedListTypes([1]);\r\n    }\r\n  }, [inputValues.tables]);\r\n\r\n  const getColumnsForTableId = (tableId) => {\r\n    if (!tableId) return [];\r\n    const inSelected = inputValues.tables.find(t => String(t.Table_Id) === String(tableId));\r\n    if (inSelected && Array.isArray(inSelected.columns) && inSelected.columns.length) return inSelected.columns;\r\n\r\n    const meta = reportTables.find(t => String(t.Table_Id) === String(tableId));\r\n    if (meta && Array.isArray(meta.Columns)) return meta.Columns.map(c => ({\r\n      Column_Name: c.Column_Name,\r\n      Column_Data_Type: c.Column_Data_Type ?? c?.Column_Data_Type ?? 'string',\r\n      IS_Default: c.IS_Default ?? c?.IS_Default ?? 0,\r\n      IS_Join_Key: c.IS_Join_Key ?? c?.IS_Join_Key ?? 0\r\n    }));\r\n    return [];\r\n  };\r\n\r\n  const handleFilterToggle = (idx, level) => {\r\n    if (level === 'level1') {\r\n      setFilterSlotsLevel1(prev => {\r\n        const arr = [...prev];\r\n        const newEnabledState = !arr[idx].enabled;\r\n\r\n        arr[idx] = {\r\n          ...arr[idx],\r\n          enabled: newEnabledState,\r\n          tableId: newEnabledState ? arr[idx].tableId : null,\r\n          columnName: newEnabledState ? arr[idx].columnName : null\r\n        };\r\n\r\n        return arr;\r\n      });\r\n    } else if (level === 'level2') {\r\n      setFilterSlotsLevel2(prev => {\r\n        const arr = [...prev];\r\n        const newEnabledState = !arr[idx].enabled;\r\n\r\n        arr[idx] = {\r\n          ...arr[idx],\r\n          enabled: newEnabledState,\r\n          tableId: newEnabledState ? arr[idx].tableId : null,\r\n          columnName: newEnabledState ? arr[idx].columnName : null\r\n        };\r\n\r\n        return arr;\r\n      });\r\n    } else {\r\n      setGroupFilterSlots(prev => {\r\n        const arr = [...prev];\r\n        const newEnabledState = !arr[idx].enabled;\r\n\r\n        arr[idx] = {\r\n          ...arr[idx],\r\n          enabled: newEnabledState,\r\n          tableId: newEnabledState ? arr[idx].tableId : null,\r\n          columnName: newEnabledState ? arr[idx].columnName : null\r\n        };\r\n\r\n        return arr;\r\n      });\r\n    }\r\n  };\r\n\r\n  const tablesSelectedCountLevel1 = filterSlotsLevel1.reduce((acc, s) => acc + (s.enabled && s.tableId ? 1 : 0), 0);\r\n  const columnsSelectedCountLevel1 = filterSlotsLevel1.reduce((acc, s) => acc + (s.enabled && s.columnName ? 1 : 0), 0);\r\n\r\n  const tablesSelectedCountLevel2 = filterSlotsLevel2.reduce((acc, s) => acc + (s.enabled && s.tableId ? 1 : 0), 0);\r\n  const columnsSelectedCountLevel2 = filterSlotsLevel2.reduce((acc, s) => acc + (s.enabled && s.columnName ? 1 : 0), 0);\r\n\r\n  const tablesSelectedCountGroup = groupFilterSlots.reduce((acc, s) => acc + (s.enabled && s.tableId ? 1 : 0), 0);\r\n  const columnsSelectedCountGroup = groupFilterSlots.reduce((acc, s) => acc + (s.enabled && s.columnName ? 1 : 0), 0);\r\n\r\n  const totalTablesSelected = tablesSelectedCountLevel1 + tablesSelectedCountLevel2 + tablesSelectedCountGroup;\r\n  const totalColumnsSelected = columnsSelectedCountLevel1 + columnsSelectedCountLevel2 + columnsSelectedCountGroup;\r\n\r\n  // Build payload for API with proper Level_Id mapping\r\n  const buildDetails = () => {\r\n    const details = [];\r\n    const groupFilterDetails = [];\r\n\r\n    filterSlotsLevel1.forEach(slot => {\r\n      if (!slot.enabled) return;\r\n      if (!slot.tableId || !slot.columnName) return;\r\n\r\n      const listTypeToSave = selectedListTypes.length === 0 ? \"1\" : selectedListTypes.join(',');\r\n\r\n      details.push({\r\n        Type: Number(slot.type),\r\n        Table_Id: Number(slot.tableId),\r\n        Column_Name: slot.columnName,\r\n        List_Type: listTypeToSave,\r\n        Level: 1\r\n      });\r\n    });\r\n\r\n    filterSlotsLevel2.forEach(slot => {\r\n      if (!slot.enabled) return;\r\n      if (!slot.tableId || !slot.columnName) return;\r\n\r\n      const listTypeToSave = selectedListTypes.length === 0 ? \"1\" : selectedListTypes.join(',');\r\n\r\n      details.push({\r\n        Type: Number(slot.type),\r\n        Table_Id: Number(slot.tableId),\r\n        Column_Name: slot.columnName,\r\n        List_Type: listTypeToSave,\r\n        Level: 2\r\n      });\r\n    });\r\n\r\n    groupFilterSlots.forEach(slot => {\r\n      if (!slot.enabled) return;\r\n      if (!slot.tableId || !slot.columnName) return;\r\n\r\n      const listTypeToSave = selectedListTypes.length === 0 ? \"1\" : selectedListTypes.join(',');\r\n\r\n      // Map Type to Level_Id (7->1, 8->2, 9->3) for tbl_Group_Template\r\n      let levelId = 3; // Default\r\n      if (slot.type === 7) levelId = 1;\r\n      else if (slot.type === 8) levelId = 2;\r\n      else if (slot.type === 9) levelId = 3;\r\n\r\n      groupFilterDetails.push({\r\n        Type: Number(slot.type),\r\n        Table_Id: Number(slot.tableId),\r\n        Column_Name: slot.columnName,\r\n        List_Type: listTypeToSave,\r\n        Level: 3,\r\n        Level_Id: levelId // Map Type to Level_Id (1,2,3) for database\r\n      });\r\n    });\r\n\r\n    return { details, groupFilterDetails };\r\n  };\r\n\r\n  const validateNoDuplicateColumns = () => {\r\n    const level1Slots = filterSlotsLevel1.filter(s => s.enabled && s.tableId && s.columnName);\r\n    const level1Set = new Set();\r\n    for (const slot of level1Slots) {\r\n      const key = `${slot.tableId}_${slot.columnName}`;\r\n      if (level1Set.has(key)) {\r\n        const tableMeta = reportTables.find(t => String(t.Table_Id) === String(slot.tableId));\r\n        const tableName = tableMeta ? (tableMeta.AliasName || tableMeta.Table_Name) : `Table ${slot.tableId}`;\r\n        return {\r\n          isValid: false,\r\n          message: `Column \"${slot.columnName}\" from \"${tableName}\" is used in multiple Level 1 filters`\r\n        };\r\n      }\r\n      level1Set.add(key);\r\n    }\r\n\r\n    const level2Slots = filterSlotsLevel2.filter(s => s.enabled && s.tableId && s.columnName);\r\n    const level2Set = new Set();\r\n    for (const slot of level2Slots) {\r\n      const key = `${slot.tableId}_${slot.columnName}`;\r\n      if (level2Set.has(key)) {\r\n        const tableMeta = reportTables.find(t => String(t.Table_Id) === String(slot.tableId));\r\n        const tableName = tableMeta ? (tableMeta.AliasName || tableMeta.Table_Name) : `Table ${slot.tableId}`;\r\n        return {\r\n          isValid: false,\r\n          message: `Column \"${slot.columnName}\" from \"${tableName}\" is used in multiple Level 2 filters`\r\n        };\r\n      }\r\n      level2Set.add(key);\r\n    }\r\n\r\n    for (const slot1 of level1Slots) {\r\n      for (const slot2 of level2Slots) {\r\n        if (String(slot1.tableId) === String(slot2.tableId) &&\r\n          String(slot1.columnName) === String(slot2.columnName)) {\r\n          const tableMeta = reportTables.find(t => String(t.Table_Id) === String(slot1.tableId));\r\n          const tableName = tableMeta ? (tableMeta.AliasName || tableMeta.Table_Name) : `Table ${slot1.tableId}`;\r\n          return {\r\n            isValid: false,\r\n            message: `Column \"${slot1.columnName}\" from \"${tableName}\" cannot be used in both Level 1 and Level 2 filters`\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    // Note: Group filters can have duplicate columns - no validation needed\r\n\r\n    return { isValid: true };\r\n  };\r\n\r\n  const saveTemplate = async () => {\r\n    const validation = validateNoDuplicateColumns();\r\n    if (!validation.isValid) {\r\n      toast.error(validation.message);\r\n      return;\r\n    }\r\n\r\n    const { details, groupFilterDetails } = buildDetails();\r\n\r\n    if (details.length === 0 && groupFilterDetails.length === 0) {\r\n      toast.error(\"Assign at least one filter slot (table + column) before saving\");\r\n      return;\r\n    }\r\n    if (!inputValues.reportName || String(inputValues.reportName).trim() === '') {\r\n      toast.error(\"Report name is required\");\r\n      return;\r\n    }\r\n\r\n    const payload = {\r\n      Report_Type_Id: inputValues?.Report_Type_Id || null,\r\n      reportName: inputValues.reportName,\r\n      createdBy: inputValues.createdBy,\r\n      updatedBy: storage?.UserId,\r\n      details: details,\r\n      ...(groupFilterDetails.length > 0 && {\r\n        GroupFilter: groupFilterDetails\r\n      })\r\n    };\r\n\r\n    try {\r\n      const res = await fetchLink({\r\n        address: `reports/templateMobile`,\r\n        method: inputValues?.Report_Type_Id ? 'PUT' : 'POST',\r\n        bodyData: payload\r\n      });\r\n      if (res?.success) {\r\n        toast.success(res.message);\r\n        setInputValues(initialValue);\r\n        setFilterSlotsLevel1([\r\n          { slot: 1, enabled: false, tableId: null, columnName: null, type: 1 },\r\n          { slot: 2, enabled: false, tableId: null, columnName: null, type: 2 },\r\n          { slot: 3, enabled: false, tableId: null, columnName: null, type: 3 }\r\n        ]);\r\n        setFilterSlotsLevel2([\r\n          { slot: 1, enabled: false, tableId: null, columnName: null, type: 4 },\r\n          { slot: 2, enabled: false, tableId: null, columnName: null, type: 5 },\r\n          { slot: 3, enabled: false, tableId: null, columnName: null, type: 6 }\r\n        ]);\r\n        setGroupFilterSlots([\r\n          { slot: 1, enabled: false, tableId: null, columnName: null, type: 7 },\r\n          { slot: 2, enabled: false, tableId: null, columnName: null, type: 8 },\r\n          { slot: 3, enabled: false, tableId: null, columnName: null, type: 9 }\r\n        ]);\r\n        setSelectedListTypes([]);\r\n        nav(-1);\r\n      } else {\r\n        toast.error(res?.message || 'Failed to save');\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast.error('Error saving template');\r\n    }\r\n  };\r\n\r\n  const canPreview =\r\n    filterSlotsLevel1.some(s => s.enabled && s.tableId && s.columnName) ||\r\n    filterSlotsLevel2.some(s => s.enabled && s.tableId && s.columnName) ||\r\n    groupFilterSlots.some(s => s.enabled && s.tableId && s.columnName);\r\n\r\n  if (!isEqualNumber(contextObj?.Add_Rights, 1)) return null;\r\n\r\n  const renderFilterSection = (title, filterSlots, level) => (\r\n    <Box className=\"mt-3 p-3 border rounded\" sx={{ background: '#FBFCFD' }}>\r\n      <Typography variant=\"subtitle1\" fontWeight={700} gutterBottom>{title}</Typography>\r\n\r\n      <Grid container spacing={3}>\r\n        {filterSlots.map((slot, idx) => {\r\n          const label = level === 'group' ? `Group Filter ${slot.slot}` : `Filter ${slot.slot}`;\r\n\r\n          const tablesToShow = level === 'group' ? losTables : reportTables;\r\n\r\n          return (\r\n            <Grid item xs={4} key={slot.type}>\r\n              <Box sx={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                p: 1.5,\r\n                mb: 1,\r\n                borderRadius: 1,\r\n                background: '#fff',\r\n                border: '1px solid #e0e0e0',\r\n                minHeight: '60px'\r\n              }}>\r\n                <label style={{ display: 'flex', alignItems: 'center', gap: 10, width: '100%' }}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={slot.enabled}\r\n                    onChange={() => handleFilterToggle(idx, level)}\r\n                    style={{ width: '18px', height: '18px' }}\r\n                  />\r\n                  <Typography variant=\"subtitle1\" fontWeight={600}>{label}</Typography>\r\n                </label>\r\n              </Box>\r\n\r\n              {slot.enabled ? (\r\n                <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1.5 }}>\r\n                  <Box>\r\n                    <Typography variant=\"caption\" color=\"textSecondary\" sx={{ mb: 0.5, display: 'block' }}>\r\n                      Table\r\n                    </Typography>\r\n                    <select\r\n                      className=\"cus-inpt\"\r\n                      value={slot.tableId ?? ''}\r\n                      onChange={(e) => {\r\n                        const val = e.target.value || null;\r\n                        if (level === 'level1') {\r\n                          setFilterSlotsLevel1(prev => {\r\n                            const arr = [...prev];\r\n                            arr[idx] = { ...arr[idx], tableId: val, columnName: null };\r\n                            return arr;\r\n                          });\r\n                        } else if (level === 'level2') {\r\n                          setFilterSlotsLevel2(prev => {\r\n                            const arr = [...prev];\r\n                            arr[idx] = { ...arr[idx], tableId: val, columnName: null };\r\n                            return arr;\r\n                          });\r\n                        } else {\r\n                          setGroupFilterSlots(prev => {\r\n                            const arr = [...prev];\r\n                            arr[idx] = { ...arr[idx], tableId: val, columnName: null };\r\n                            return arr;\r\n                          });\r\n                        }\r\n                      }}\r\n                      style={{ width: '100%' }}\r\n                    >\r\n                      <option value=\"\">Select table</option>\r\n                      {tablesToShow.map((t, ti) => (\r\n                        <option key={ti} value={t.Table_Id}>\r\n                          {t.AliasName || t.Table_Name}\r\n                          {level === 'group' && ' (LOS)'}\r\n                        </option>\r\n                      ))}\r\n                      {level === 'group' && tablesToShow.length === 0 && (\r\n                        <option value=\"\" disabled>No LOS tables found</option>\r\n                      )}\r\n                    </select>\r\n                    {level === 'group' && (\r\n                      <Typography variant=\"caption\" color=\"textSecondary\" sx={{ mt: 0.5, display: 'block' }}>\r\n                        Only LOS tables are shown for group filter\r\n                      </Typography>\r\n                    )}\r\n                  </Box>\r\n\r\n                  <Box>\r\n                    <Typography variant=\"caption\" color=\"textSecondary\" sx={{ mb: 0.5, display: 'block' }}>\r\n                      Column\r\n                    </Typography>\r\n                    <select\r\n                      className=\"cus-inpt\"\r\n                      value={slot.columnName ?? ''}\r\n                      disabled={!slot.tableId}\r\n                      onChange={(e) => {\r\n                        const val = e.target.value || null;\r\n\r\n                        if (level === 'level1') {\r\n                          setFilterSlotsLevel1(prev => {\r\n                            const arr = [...prev];\r\n                            arr[idx] = { ...arr[idx], columnName: val };\r\n                            return arr;\r\n                          });\r\n                        } else if (level === 'level2') {\r\n                          setFilterSlotsLevel2(prev => {\r\n                            const arr = [...prev];\r\n                            arr[idx] = { ...arr[idx], columnName: val };\r\n                            return arr;\r\n                          });\r\n                        } else {\r\n                          setGroupFilterSlots(prev => {\r\n                            const arr = [...prev];\r\n                            arr[idx] = { ...arr[idx], columnName: val };\r\n                            return arr;\r\n                          });\r\n                        }\r\n                      }}\r\n                      style={{ width: '100%' }}\r\n                    >\r\n                      <option value=\"\">Select column</option>\r\n                      {slot.tableId && getColumnsForTableId(slot.tableId).map((c, ci) => {\r\n                        let isDisabled = false;\r\n                        let disabledReason = '';\r\n\r\n                        if (level === 'group') {\r\n                          isDisabled = false;\r\n                        } else if (level === 'level1') {\r\n                          const usedInOtherLevel1 = filterSlotsLevel1.some((s, slotIdx) => {\r\n                            if (!s.enabled || !s.tableId || !s.columnName) return false;\r\n                            if (slotIdx === idx) return false;\r\n                            return String(s.tableId) === String(slot.tableId) &&\r\n                              String(s.columnName) === String(c.Column_Name);\r\n                          });\r\n\r\n                          const usedInLevel2 = filterSlotsLevel2.some(s => {\r\n                            if (!s.enabled || !s.tableId || !s.columnName) return false;\r\n                            return String(s.tableId) === String(slot.tableId) &&\r\n                              String(s.columnName) === String(c.Column_Name);\r\n                          });\r\n\r\n                          isDisabled = usedInOtherLevel1 || usedInLevel2;\r\n                          if (usedInOtherLevel1) disabledReason = ' (Used in another Level 1 filter)';\r\n                          else if (usedInLevel2) disabledReason = ' (Used in Level 2 filter)';\r\n                        } else if (level === 'level2') {\r\n                          const usedInOtherLevel2 = filterSlotsLevel2.some((s, slotIdx) => {\r\n                            if (!s.enabled || !s.tableId || !s.columnName) return false;\r\n                            if (slotIdx === idx) return false;\r\n                            return String(s.tableId) === String(slot.tableId) &&\r\n                              String(s.columnName) === String(c.Column_Name);\r\n                          });\r\n\r\n                          const usedInLevel1 = filterSlotsLevel1.some(s => {\r\n                            if (!s.enabled || !s.tableId || !s.columnName) return false;\r\n                            return String(s.tableId) === String(slot.tableId) &&\r\n                              String(s.columnName) === String(c.Column_Name);\r\n                          });\r\n\r\n                          isDisabled = usedInOtherLevel2 || usedInLevel1;\r\n                          if (usedInOtherLevel2) disabledReason = ' (Used in another Level 2 filter)';\r\n                          else if (usedInLevel1) disabledReason = ' (Used in Level 1 filter)';\r\n                        }\r\n\r\n                        const isCurrentlySelected = slot.columnName === c.Column_Name;\r\n                        const shouldDisable = !isCurrentlySelected && isDisabled;\r\n\r\n                        return (\r\n                          <option\r\n                            key={ci}\r\n                            value={c.Column_Name}\r\n                            disabled={shouldDisable}\r\n                            style={{\r\n                              color: shouldDisable ? '#999' : 'inherit',\r\n                              backgroundColor: shouldDisable ? '#f5f5f5' : 'inherit',\r\n                              fontStyle: shouldDisable ? 'italic' : 'normal'\r\n                            }}\r\n                          >\r\n                            {c.Column_Name}\r\n                            {c.Column_Data_Type ? ` (${c.Column_Data_Type})` : ''}\r\n                            {shouldDisable ? disabledReason : ''}\r\n                          </option>\r\n                        );\r\n                      })}\r\n                    </select>\r\n                    {level === 'group' && (\r\n                      <Typography variant=\"caption\" color=\"textSecondary\" sx={{ mt: 0.5, display: 'block', fontSize: '0.75rem' }}>\r\n                        Note: All columns are enabled in Group Filter, even if used in Level 1/2 filters.\r\n                      </Typography>\r\n                    )}\r\n                  </Box>\r\n                </Box>\r\n              ) : (\r\n                <Box sx={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  p: 3,\r\n                  borderRadius: 1,\r\n                  background: '#f8f9fa',\r\n                  border: '1px dashed #dee2e6',\r\n                  color: '#6c757d',\r\n                  textAlign: 'center',\r\n                  minHeight: '120px'\r\n                }}>\r\n                  <Typography variant=\"body2\">\r\n                    Enable {label} to configure\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n            </Grid>\r\n          );\r\n        })}\r\n      </Grid>\r\n    </Box>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Card>\r\n        <div className=\"p-2 border-bottom fa-16 fw-bold d-flex justify-content-between align-items-center\">\r\n          <span className=\"text-primary text-uppercase ps-3\">{inputValues?.Report_Type_Id ? 'Modify Mobile Template' : 'Mobile Template Creation'}</span>\r\n          <Button variant=\"outlined\" onClick={() => nav(-1)} startIcon={<KeyboardArrowLeft />}>Back</Button>\r\n        </div>\r\n\r\n        <CardContent>\r\n          <div>\r\n            <label className=\"w-100\">Report Name</label>\r\n            <Select\r\n              value={\r\n                inputValues.reportName\r\n                  ? {\r\n                    value: inputValues.reportName,\r\n                    label: inputValues.reportName,\r\n                  }\r\n                  : null\r\n              }\r\n              onChange={(selectedOption) => {\r\n                setInputValues({\r\n                  ...inputValues,\r\n                  reportName: selectedOption ? selectedOption.value : ''\r\n                });\r\n              }}\r\n              options={reportOptions}\r\n              placeholder={loadingReports ? \"Loading reports...\" : \"Select or type to search...\"}\r\n              isClearable={true}\r\n              isSearchable={true}\r\n              isLoading={loadingReports}\r\n              noOptionsMessage={({ inputValue }) =>\r\n                inputValue ? `Press Enter to create \"${inputValue}\"` : \"No options available\"\r\n              }\r\n              formatCreateLabel={(inputValue) => `Create \"${inputValue}\"`}\r\n              onCreateOption={(inputValue) => {\r\n                const alreadyExists = reportOptions.some(opt =>\r\n                  opt.value.toLowerCase() === inputValue.toLowerCase()\r\n                );\r\n\r\n                if (!alreadyExists) {\r\n                  const newOption = {\r\n                    value: inputValue,\r\n                    label: inputValue,\r\n                  };\r\n\r\n                  setReportOptions(prev => [...prev, newOption]);\r\n                  setExistingReportName(prev => [...prev, inputValue]);\r\n                }\r\n\r\n                setInputValues({ ...inputValues, reportName: inputValue });\r\n              }}\r\n              styles={{\r\n                control: (base) => ({\r\n                  ...base,\r\n                  width: '600px',\r\n                  border: '1px solid #ccc',\r\n                  borderRadius: '4px',\r\n                  minHeight: '36px',\r\n                }),\r\n                menu: (base) => ({\r\n                  ...base,\r\n                  width: '300px',\r\n                }),\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"p-2 mt-3 border rounded-3 d-inline-block\">\r\n            <table>\r\n              <tbody>\r\n                <tr><td className=\"border-end\">Total Filters Assigned</td><td className=\"px-2 blue-text\">{totalTablesSelected}</td></tr>\r\n                <tr><td className=\"border-end\">Total Columns Assigned</td><td className=\"px-2 blue-text\">{totalColumnsSelected}</td></tr>\r\n                <tr><td className=\"border-end\">Level 1 Filters</td><td className=\"px-2 blue-text\">{tablesSelectedCountLevel1}</td></tr>\r\n                <tr><td className=\"border-end\">Level 2 Filters</td><td className=\"px-2 blue-text\">{tablesSelectedCountLevel2}</td></tr>\r\n                <tr><td className=\"border-end\">Group Filters</td><td className=\"px-2 blue-text\">{tablesSelectedCountGroup}</td></tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          {renderFilterSection(\"Level 1 Filters\", filterSlotsLevel1, 'level1')}\r\n          {renderFilterSection(\"Level 2 Filters\", filterSlotsLevel2, 'level2')}\r\n          {renderFilterSection(\"Group Filters\", groupFilterSlots, 'group')}\r\n\r\n          <Box className=\"mt-3 d-flex align-items-center\" sx={{ gap: 2 }}>\r\n            <Typography fontWeight={700}>List Type:</Typography>\r\n            <label style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={selectedListTypes.includes(1)}\r\n                onChange={(e) => {\r\n                  if (e.target.checked) {\r\n                    setSelectedListTypes(prev => [...prev, 1]);\r\n                  } else {\r\n                    setSelectedListTypes(prev => prev.filter(x => x !== 1));\r\n                  }\r\n                }}\r\n              />\r\n              <span>Sum</span>\r\n            </label>\r\n            <label style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={selectedListTypes.includes(2)}\r\n                onChange={(e) => {\r\n                  if (e.target.checked) {\r\n                    setSelectedListTypes(prev => [...prev, 2]);\r\n                  } else {\r\n                    setSelectedListTypes(prev => prev.filter(x => x !== 2));\r\n                  }\r\n                }}\r\n              />\r\n              <span>Avg</span>\r\n            </label>\r\n          </Box>\r\n\r\n          <Box className=\"mt-4 d-flex justify-content-end\" sx={{ gap: 2 }}>\r\n            <Button variant=\"outlined\" onClick={() => {\r\n              setFilterSlotsLevel1([\r\n                { slot: 1, enabled: false, tableId: null, columnName: null, type: 1 },\r\n                { slot: 2, enabled: false, tableId: null, columnName: null, type: 2 },\r\n                { slot: 3, enabled: false, tableId: null, columnName: null, type: 3 },\r\n              ]);\r\n              setFilterSlotsLevel2([\r\n                { slot: 1, enabled: false, tableId: null, columnName: null, type: 4 },\r\n                { slot: 2, enabled: false, tableId: null, columnName: null, type: 5 },\r\n                { slot: 3, enabled: false, tableId: null, columnName: null, type: 6 },\r\n              ]);\r\n              setGroupFilterSlots([\r\n                { slot: 1, enabled: false, tableId: null, columnName: null, type: 7 },\r\n                { slot: 2, enabled: false, tableId: null, columnName: null, type: 8 },\r\n                { slot: 3, enabled: false, tableId: null, columnName: null, type: 9 }\r\n              ]);\r\n              setSelectedListTypes([]);\r\n            }}>\r\n              Reset All\r\n            </Button>\r\n\r\n            <Tooltip title={!canPreview ? 'Assign at least one slot to Preview' : ''}>\r\n              <span>\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  startIcon={<RemoveRedEyeOutlined />}\r\n                  disabled={!canPreview}\r\n                  onClick={() => setOpenConfigPreview(true)}\r\n                >\r\n                  Preview\r\n                </Button>\r\n              </span>\r\n            </Tooltip>\r\n\r\n            <Button variant=\"contained\" startIcon={<Save />} onClick={saveTemplate}>\r\n              Submit\r\n            </Button>\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Dialog open={openConfigPreview} onClose={() => setOpenConfigPreview(false)} fullWidth maxWidth=\"md\">\r\n        <DialogTitle>Preview - Template Configuration</DialogTitle>\r\n        <DialogContent dividers>\r\n          <Typography variant=\"subtitle1\" fontWeight={700} gutterBottom>Report: {inputValues.reportName || ''}</Typography>\r\n\r\n          <Box sx={{ mb: 2 }}>\r\n            {filterSlotsLevel1.filter(s => s.enabled && s.tableId && s.columnName).length === 0 &&\r\n              filterSlotsLevel2.filter(s => s.enabled && s.tableId && s.columnName).length === 0 &&\r\n              groupFilterSlots.filter(s => s.enabled && s.tableId && s.columnName).length === 0 && (\r\n                <Typography>No filter assigned yet.</Typography>\r\n              )}\r\n\r\n            {filterSlotsLevel1.filter(s => s.enabled && s.tableId && s.columnName).length > 0 && (\r\n              <>\r\n                <Typography variant=\"subtitle2\" fontWeight={700} sx={{ mt: 2, mb: 1 }}>Level 1 Filters:</Typography>\r\n                {filterSlotsLevel1.filter(s => s.enabled && s.tableId && s.columnName).map((s, i) => {\r\n                  const tableMeta = reportTables.find(t => String(t.Table_Id) === String(s.tableId));\r\n                  const tableLabel = tableMeta ? (tableMeta.AliasName || tableMeta.Table_Name) : `Table ${s.tableId}`;\r\n                  const listType = selectedListTypes.length === 0 ? '' : (selectedListTypes.length === 2 ? 'Sum & Avg' : (selectedListTypes[0] === 1 ? 'Sum' : 'Avg'));\r\n                  const label = `Filter ${s.slot}`;\r\n                  return (\r\n                    <Box key={s.type} sx={{ p: 1, borderRadius: 1, background: '#F7F9FB', mb: 1 }}>\r\n                      <Grid container alignItems=\"center\">\r\n                        <Grid item xs={12} md={3}><strong>{label}</strong></Grid>\r\n                        <Grid item xs={12} md={4}>{tableLabel}</Grid>\r\n                        <Grid item xs={12} md={3}>{s.columnName}</Grid>\r\n                        <Grid item xs={12} md={2} style={{ textAlign: 'right' }}>{listType}</Grid>\r\n                      </Grid>\r\n                    </Box>\r\n                  );\r\n                })}\r\n              </>\r\n            )}\r\n\r\n            {filterSlotsLevel2.filter(s => s.enabled && s.tableId && s.columnName).length > 0 && (\r\n              <>\r\n                <Typography variant=\"subtitle2\" fontWeight={700} sx={{ mt: 2, mb: 1 }}>Level 2 Filters:</Typography>\r\n                {filterSlotsLevel2.filter(s => s.enabled && s.tableId && s.columnName).map((s, i) => {\r\n                  const tableMeta = reportTables.find(t => String(t.Table_Id) === String(s.tableId));\r\n                  const tableLabel = tableMeta ? (tableMeta.AliasName || tableMeta.Table_Name) : `Table ${s.tableId}`;\r\n                  const listType = selectedListTypes.length === 0 ? '' : (selectedListTypes.length === 2 ? 'Sum & Avg' : (selectedListTypes[0] === 1 ? 'Sum' : 'Avg'));\r\n                  const label = `Filter ${s.slot}`;\r\n                  return (\r\n                    <Box key={s.type} sx={{ p: 1, borderRadius: 1, background: '#F7F9FB', mb: 1 }}>\r\n                      <Grid container alignItems=\"center\">\r\n                        <Grid item xs={12} md={3}><strong>{label}</strong></Grid>\r\n                        <Grid item xs={12} md={4}>{tableLabel}</Grid>\r\n                        <Grid item xs={12} md={3}>{s.columnName}</Grid>\r\n                        <Grid item xs={12} md={2} style={{ textAlign: 'right' }}>{listType}</Grid>\r\n                      </Grid>\r\n                    </Box>\r\n                  );\r\n                })}\r\n              </>\r\n            )}\r\n\r\n            {groupFilterSlots.filter(s => s.enabled && s.tableId && s.columnName).length > 0 && (\r\n              <>\r\n                <Typography variant=\"subtitle2\" fontWeight={700} sx={{ mt: 2, mb: 1 }}>Group Filters:</Typography>\r\n                {groupFilterSlots.filter(s => s.enabled && s.tableId && s.columnName).map((s, i) => {\r\n                  const tableMeta = reportTables.find(t => String(t.Table_Id) === String(s.tableId));\r\n                  const tableLabel = tableMeta ? (tableMeta.AliasName || tableMeta.Table_Name) : `Table ${s.tableId}`;\r\n                  const listType = selectedListTypes.length === 0 ? '' : (selectedListTypes.length === 2 ? 'Sum & Avg' : (selectedListTypes[0] === 1 ? 'Sum' : 'Avg'));\r\n                  \r\n                  // Determine Level_Id for display (1,2,3)\r\n                  const levelId = s.type === 7 ? 1 : s.type === 8 ? 2 : 3;\r\n                  \r\n                  return (\r\n                    <Box key={s.type} sx={{ p: 1, borderRadius: 1, background: '#F7F9FB', mb: 1 }}>\r\n                      <Grid container alignItems=\"center\">\r\n                        <Grid item xs={12} md={3}><strong>Group Filter {s.slot} (Level {levelId})</strong></Grid>\r\n                        <Grid item xs={12} md={4}>{tableLabel} {tableMeta && (tableMeta.Table_Name?.toLowerCase().includes('los') || tableMeta.AliasName?.toLowerCase().includes('los')) && '(LOS)'}</Grid>\r\n                        <Grid item xs={12} md={3}>{s.columnName}</Grid>\r\n                        <Grid item xs={12} md={2} style={{ textAlign: 'right' }}>{listType}</Grid>\r\n                      </Grid>\r\n                    </Box>\r\n                  );\r\n                })}\r\n              </>\r\n            )}\r\n          </Box>\r\n\r\n          <Typography variant=\"caption\" color=\"textSecondary\">\r\n            Note: Columns already used in other filter slots are disabled to prevent duplicates. Group Filters can use any column.\r\n          </Typography>\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n          <Button onClick={() => setOpenConfigPreview(false)} startIcon={<ArrowBackIosNewOutlined />}>Back</Button>\r\n          <Button variant=\"contained\" onClick={() => { setOpenConfigPreview(false); saveTemplate(); }}>Submit</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ReportsTemplateMobCreation;","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCardUtilityClass(slot) {\n  return generateUtilityClass('MuiCard', slot);\n}\nconst cardClasses = generateUtilityClasses('MuiCard', ['root']);\nexport default cardClasses;","'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"raised\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport chainPropTypes from '@mui/utils/chainPropTypes';\nimport composeClasses from '@mui/utils/composeClasses';\nimport styled from '../styles/styled';\nimport { useDefaultProps } from '../DefaultPropsProvider';\nimport Paper from '../Paper';\nimport { getCardUtilityClass } from './cardClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getCardUtilityClass, classes);\n};\nconst CardRoot = styled(Paper, {\n  name: 'MuiCard',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})(() => {\n  return {\n    overflow: 'hidden'\n  };\n});\nconst Card = /*#__PURE__*/React.forwardRef(function Card(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiCard'\n  });\n  const {\n      className,\n      raised = false\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    raised\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardRoot, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : undefined,\n    ref: ref,\n    ownerState: ownerState\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Card.propTypes /* remove-proptypes */ = {\n  //  Warning \n  //  These PropTypes are generated from the TypeScript type definitions. \n  //     To update them, edit the d.ts file and run `pnpm proptypes`.     \n  // \n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the card will use raised styling.\n   * @default false\n   */\n  raised: chainPropTypes(PropTypes.bool, props => {\n    if (props.raised && props.variant === 'outlined') {\n      return new Error('MUI: Combining `raised={true}` with `variant=\"outlined\"` has no effect.');\n    }\n    return null;\n  }),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default Card;","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCardContentUtilityClass(slot) {\n  return generateUtilityClass('MuiCardContent', slot);\n}\nconst cardContentClasses = generateUtilityClasses('MuiCardContent', ['root']);\nexport default cardContentClasses;","'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"component\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport styled from '../styles/styled';\nimport { useDefaultProps } from '../DefaultPropsProvider';\nimport { getCardContentUtilityClass } from './cardContentClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getCardContentUtilityClass, classes);\n};\nconst CardContentRoot = styled('div', {\n  name: 'MuiCardContent',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})(() => {\n  return {\n    padding: 16,\n    '&:last-child': {\n      paddingBottom: 24\n    }\n  };\n});\nconst CardContent = /*#__PURE__*/React.forwardRef(function CardContent(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiCardContent'\n  });\n  const {\n      className,\n      component = 'div'\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    component\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardContentRoot, _extends({\n    as: component,\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? CardContent.propTypes /* remove-proptypes */ = {\n  //  Warning \n  //  These PropTypes are generated from the TypeScript type definitions. \n  //     To update them, edit the d.ts file and run `pnpm proptypes`.     \n  // \n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default CardContent;","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z\"\n}), 'Save');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z\"\n}), 'ArrowBackIosNewOutlined');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 6.5c3.79 0 7.17 2.13 8.82 5.5-1.65 3.37-5.02 5.5-8.82 5.5S4.83 15.37 3.18 12C4.83 8.63 8.21 6.5 12 6.5m0-2C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5m0 5c1.38 0 2.5 1.12 2.5 2.5s-1.12 2.5-2.5 2.5-2.5-1.12-2.5-2.5 1.12-2.5 2.5-2.5m0-2c-2.48 0-4.5 2.02-4.5 4.5s2.02 4.5 4.5 4.5 4.5-2.02 4.5-4.5-2.02-4.5-4.5-4.5\"\n}), 'RemoveRedEyeOutlined');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z\"\n}), 'KeyboardArrowLeft');"],"names":["ReportsTemplateMobCreation","storage","JSON","parse","localStorage","getItem","nav","useNavigate","contextObj","useContext","MyContext","locationState","useLocation","state","initialValue","Report_Type_Id","reportName","tables","tableJoins","currentTab","createdBy","UserId","inputValues","setInputValues","useState","reportTables","setReportTables","existingReportName","setExistingReportName","loadingReports","setLoadingReports","reportOptions","setReportOptions","filterSlotsLevel1","setFilterSlotsLevel1","slot","enabled","tableId","columnName","type","filterSlotsLevel2","setFilterSlotsLevel2","groupFilterSlots","setGroupFilterSlots","selectedListTypes","setSelectedListTypes","openConfigPreview","setOpenConfigPreview","losTables","filter","table","_table$Table_Name","_table$AliasName","Table_Name","toLowerCase","includes","AliasName","useEffect","fetchExistingReportNames","async","response","fetchLink","address","method","success","reports","data","uniqueReportNames","Set","map","report","Report_Name","name","options","value","label","error","console","toast","stateValue","ReportState","isValidObject","_stateValue$reportNam","prev","_stateValue$Report_Ty","_stateValue$createdBy","_objectSpread","some","opt","newOption","groupFilterFromState","GroupFilter","length","newSlots","forEach","gf","index","Type","Level_Id","Table_Id","Number","Column_Name","then","catch","e","assignments","allListTypes","_table$columns","columns","column","Array","isArray","push","listType","List_Type","level","Level","String","split","lt","trim","isNaN","add","level1Assignments","a","level2Assignments","groupFilterAssignments","assignment","slotIndex","findIndex","size","from","getColumnsForTableId","inSelected","find","t","meta","Columns","c","_ref","_c$Column_Data_Type","_ref2","_c$IS_Default","_ref3","_c$IS_Join_Key","Column_Data_Type","IS_Default","IS_Join_Key","tablesSelectedCountLevel1","reduce","acc","s","columnsSelectedCountLevel1","tablesSelectedCountLevel2","columnsSelectedCountLevel2","tablesSelectedCountGroup","totalTablesSelected","totalColumnsSelected","saveTemplate","validation","validateNoDuplicateColumns","level1Slots","level1Set","key","concat","has","tableMeta","tableName","isValid","message","level2Slots","level2Set","slot1","slot2","details","groupFilterDetails","buildDetails","listTypeToSave","join","levelId","payload","updatedBy","res","bodyData","canPreview","isEqualNumber","Add_Rights","renderFilterSection","title","filterSlots","_jsxs","Box","className","sx","background","children","_jsx","Typography","variant","fontWeight","gutterBottom","Grid","container","spacing","idx","_slot$tableId","_slot$columnName","tablesToShow","item","xs","display","alignItems","p","mb","borderRadius","border","minHeight","style","gap","width","checked","onChange","handleFilterToggle","arr","newEnabledState","height","flexDirection","color","val","target","ti","disabled","mt","ci","isDisabled","disabledReason","usedInOtherLevel1","slotIdx","usedInLevel2","usedInOtherLevel2","usedInLevel1","shouldDisable","backgroundColor","fontStyle","fontSize","justifyContent","textAlign","_Fragment","Card","Button","onClick","startIcon","KeyboardArrowLeft","CardContent","Select","selectedOption","placeholder","isClearable","isSearchable","isLoading","noOptionsMessage","_ref4","inputValue","formatCreateLabel","onCreateOption","styles","control","base","menu","x","Tooltip","RemoveRedEyeOutlined","Save","Dialog","open","onClose","fullWidth","maxWidth","DialogTitle","DialogContent","dividers","i","tableLabel","md","_tableMeta$Table_Name","_tableMeta$AliasName","DialogActions","ArrowBackIosNewOutlined","getCardUtilityClass","generateUtilityClass","generateUtilityClasses","_excluded","CardRoot","styled","Paper","overridesResolver","props","root","overflow","React","inProps","ref","useDefaultProps","raised","other","_objectWithoutPropertiesLoose","ownerState","_extends","classes","composeClasses","useUtilityClasses","clsx","elevation","undefined","getCardContentUtilityClass","CardContentRoot","padding","paddingBottom","component","as","createSvgIcon","d"],"sourceRoot":""}