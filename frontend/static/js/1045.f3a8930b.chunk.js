"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[1045],{51214:(e,a,s)=>{s.d(a,{A:()=>d});var t=s(59662),l=s(70579);const d=(0,t.A)((0,l.jsx)("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonth")},53911:(e,a,s)=>{s.d(a,{A:()=>d});var t=s(59662),l=s(70579);const d=(0,t.A)([(0,l.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,l.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"QueryBuilder")},63406:(e,a,s)=>{s.d(a,{zU:()=>i,ex:()=>r,MR:()=>n,Ap:()=>d,FX:()=>c});var t=s(89379);const l=s.p+"static/media/smt.aa4d4f940bbebff07a57.png",d={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},n={menu:(e,a)=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,t.A)((0,t.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,a)=>(0,t.A)((0,t.A)({},e),{},{backgroundColor:a.isSelected?"#2684FF":a.isFocused?"#E2ECF9":"white",color:a.isSelected?"white":"#333",padding:"10px 12px"})},i=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],r=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:l,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:l,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],c=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},65829:(e,a,s)=>{s.d(a,{A:()=>d});var t=s(59662),l=s(70579);const d=(0,t.A)((0,l.jsx)("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"}),"KeyboardArrowLeft")},73485:(e,a,s)=>{s.r(a),s.d(a,{default:()=>g});var t=s(89379),l=s(65043),d=s(73216),n=s(17392),i=s(83462),r=s(26600),c=s(35316),o=s(29347),m=s(11906),h=s(51214),v=s(83560),u=s(65829),x=s(53911),p=(s(92342),s(91036)),j=s(20656),N=s(63406),b=s(65074),_=s(22520),f=s(70579);const g=()=>{var e;const a=(0,d.zy)(),s=null===(e=a.state)||void 0===e?void 0:e.taskDetails,g=localStorage.getItem("user"),A=JSON.parse(g),E=(0,d.Zp)(),S={AN_No:"",Project_Id:null===s||void 0===s?void 0:s.Project_Id,Sch_Id:null===s||void 0===s?void 0:s.Sch_Id,Task_Levl_Id:null===s||void 0===s?void 0:s.Task_Levl_Id,Task_Id:null===s||void 0===s?void 0:s.Task_Id,Assigned_Emp_Id:null===A||void 0===A?void 0:A.UserId,Emp_Id:"",Task_Assign_dt:(0,_.ny)(),Sch_Period:null===s||void 0===s?void 0:s.Task_Sch_Duaration,Sch_Time:null===s||void 0===s?void 0:s.Task_Start_Time,EN_Time:null===s||void 0===s?void 0:s.Task_End_Time,Est_Start_Dt:null!==s&&void 0!==s&&s.Task_Est_Start_Date?(0,_.ny)(null===s||void 0===s?void 0:s.Task_Est_Start_Date):(0,_.ny)(),Est_End_Dt:null!==s&&void 0!==s&&s.Task_Est_End_Date?(0,_.ny)(null===s||void 0===s?void 0:s.Task_Est_End_Date):(0,_.ny)(),Ord_By:1,Timer_Based:!0,Invovled_Stat:!0,EmpGet:"- Select Employee -"},[y,T]=(0,l.useState)({assignEmp:!1}),[k,D]=(0,l.useState)(!1),[I,C]=(0,l.useState)([]),[M,R]=(0,l.useState)(S),[B,w]=(0,l.useState)([]),[O,z]=(0,l.useState)(!1),[L,P]=(0,l.useState)([]);(0,l.useEffect)(()=>{(0,_.aF)(s)||E("/taskManagement/projectActivity")},[s]),(0,l.useEffect)(()=>{null!==s&&void 0!==s&&s.Task_Levl_Id&&((0,b.z)({address:"masters/users/employee/dropDown?Company_id=".concat(null===A||void 0===A?void 0:A.Company_id)}).then(e=>{e.success&&C(e.data)}).catch(e=>console.error(e)),(0,b.z)({address:"taskManagement/task/workedDetails?Task_Levl_Id=".concat(null===s||void 0===s?void 0:s.Task_Levl_Id)}).then(e=>{e.success&&P(e.data)}).catch(e=>console.error(e)))},[s]),(0,l.useEffect)(()=>{null!==s&&void 0!==s&&s.Task_Levl_Id&&(0,b.z)({address:"taskManagement/task/assignEmployee?Task_Levl_Id=".concat(null===s||void 0===s?void 0:s.Task_Levl_Id)}).then(e=>{e.success&&w(e.data)}).catch(e=>console.error(e))},[O,s]),(0,l.useEffect)(()=>{if(null!==M&&void 0!==M&&M.Sch_Time&&null!==M&&void 0!==M&&M.EN_Time){var e,a,s,l;const[d,n]=null===M||void 0===M||null===(e=M.Sch_Time)||void 0===e||null===(a=e.split(":"))||void 0===a?void 0:a.map(Number),[i,r]=null===M||void 0===M||null===(s=M.EN_Time)||void 0===s||null===(l=s.split(":"))||void 0===l?void 0:l.map(Number),c=new Date(0,0,0,d,n),o=new Date(0,0,0,i,r);if(o>c){let e=Math.abs(o-c);const a=Math.floor(e/36e5);e%=36e5;const s=Math.floor(e/6e4),l=String(a).padStart(2,"0"),d=String(s).padStart(2,"0");R(e=>(0,t.A)((0,t.A)({},e),{},{Sch_Period:"".concat(l,":").concat(d)}))}}},[null===M||void 0===M?void 0:M.Sch_Time,null===M||void 0===M?void 0:M.EN_Time]);const F=e=>{e?(R(e),D(!0)):(R(S),D(!1)),T((0,t.A)((0,t.A)({},y),{},{assignEmp:!y.assignEmp}))},H=e=>{const[a,s]=e.split(":").map(Number);let t=a%12;t=t||12;const l=a<12?"AM":"PM",d=s<10?"0"+s:s;return"".concat(t<10?"0"+t:t,":").concat(d," ").concat(l)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.N9,{}),(0,f.jsx)("div",{className:"cus-card p-2",children:(0,f.jsxs)("h5",{className:"mb-0 d-flex px-3 py-2 align-items-center",children:[(0,f.jsxs)("span",{className:"flex-grow-1 fa-16",children:["Task: ",null===s||void 0===s?void 0:s.TaskNameGet]}),(0,f.jsx)("span",{className:" d-flex ",children:(0,f.jsxs)("span",{className:"fa-12",children:[null===s||void 0===s?void 0:s.TaskTypeGet,(0,f.jsx)("br",{}),(0,f.jsxs)("span",{className:"fa-12",children:["(",(0,_.yc)(null===s||void 0===s?void 0:s.Task_Est_Start_Date)," - ",(0,_.yc)(null===s||void 0===s?void 0:s.Task_Est_End_Date),")"]})]})})]})}),(0,f.jsxs)("div",{className:"cus-card py-2 ps-3",children:[(0,f.jsxs)("h5",{className:"d-flex align-items-center m-0",children:[(0,f.jsx)("span",{className:"fa-17 flex-grow-1",children:"Involved Employees"}),(0,f.jsxs)("span",{className:"d-flex pe-2",children:[(0,f.jsx)("button",{className:"btn btn-primary rounded-5 px-3 fa-13 shadow d-flex align-items-center me-2",onClick:()=>F(),children:"Assign Employee"}),(0,f.jsxs)("button",{className:"btn btn-secondary rounded-5 px-3 fa-13 shadow d-flex align-items-center",onClick:()=>{var e;return E("/taskManagement/projectActivity/projectDetails",{state:null===(e=a.state)||void 0===e?void 0:e.retObj})},children:[(0,f.jsx)(u.A,{className:"fa-in me-2"})," Back"]})]})]}),B.length?(0,f.jsx)("div",{className:"table-responsive mt-3",children:(0,f.jsxs)("table",{className:"table",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:"fa-14 text-center",children:"Employee"}),(0,f.jsx)("th",{className:"fa-14 text-center",children:"Assigned By"}),(0,f.jsx)("th",{className:"fa-14 text-center",children:"Start-End Date"}),(0,f.jsx)("th",{className:"fa-14 text-center",children:"Start-End Time"}),(0,f.jsx)("th",{className:"fa-14 text-center",children:"Total Hours"}),(0,f.jsx)("th",{className:"fa-14 text-center",children:"Timer Based"}),(0,f.jsx)("th",{className:"fa-14 text-center",children:"Involved Status"}),(0,f.jsx)("th",{className:"fa-14 text-center",children:"Order By"}),(0,f.jsx)("th",{className:"fa-14 text-center",children:"Action"})]})}),(0,f.jsx)("tbody",{children:B.map((e,a)=>(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"fa-13 text-center",children:null===e||void 0===e?void 0:e.EmployeeName}),(0,f.jsx)("td",{className:"fa-13 text-center",children:null===e||void 0===e?void 0:e.AssignedUser}),(0,f.jsx)("td",{className:"fa-14 text-center",children:(0,f.jsxs)("span",{className:"badge rounded-4 px-3 bg-light text-primary",children:[(0,f.jsx)(h.A,{className:"fa-18 me-2"}),(0,_.yc)(null===e||void 0===e?void 0:e.Est_Start_Dt)," - ",(0,_.yc)(null===e||void 0===e?void 0:e.Est_End_Dt)]})}),(0,f.jsx)("td",{className:"fa-14 text-center",children:(0,f.jsxs)("span",{className:"badge rounded-4 px-3 bg-light text-primary",children:[(0,f.jsx)(x.A,{className:"fa-18 me-2"}),null===e||void 0===e?void 0:e.Sch_Time," - ",null===e||void 0===e?void 0:e.EN_Time]})}),(0,f.jsx)("td",{className:"fa-13 text-center",children:null===e||void 0===e?void 0:e.Sch_Period}),(0,f.jsx)("td",{className:"fa-14",children:(0,f.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(Number(null===e||void 0===e?void 0:e.Timer_Based)?"bg-success":"bg-warning"),children:Number(null===e||void 0===e?void 0:e.Timer_Based)?"Yes":"No"})}),(0,f.jsx)("td",{className:"fa-14 text-center",children:(0,f.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat(Number(null===e||void 0===e?void 0:e.Invovled_Stat)?"bg-success":"bg-danger"),children:Number(null===e||void 0===e?void 0:e.Invovled_Stat)?"IN":"OUT"})}),(0,f.jsx)("td",{className:"fa-13 text-center",children:null===e||void 0===e?void 0:e.Ord_By}),(0,f.jsx)("td",{className:"fa-13 text-center",children:(0,f.jsx)(n.A,{size:"small",onClick:()=>{F((0,t.A)((0,t.A)({},e),{},{EmpGet:null===e||void 0===e?void 0:e.EmployeeName}))},children:(0,f.jsx)(v.A,{className:"fa-18"})})})]},a))})]})}):(0,f.jsx)("h6",{className:"mt-3",children:"No Data"})]}),(0,f.jsxs)("div",{className:"cus-card py-2 ps-3",children:[(0,f.jsx)("h5",{className:"m-0 mt-2 fa-17",children:"Task Activity"}),L.length>0?(0,f.jsx)("div",{className:"table-responsive mt-3",children:(0,f.jsxs)("table",{className:"table",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:"fa-14 text-center",children:"Sno"}),(0,f.jsx)("th",{className:"fa-14 text-center",children:"Employee"}),(0,f.jsx)("th",{className:"fa-14 text-center",children:"Date"}),(0,f.jsx)("th",{className:"fa-14 text-center",children:"Time"}),(0,f.jsx)("th",{className:"fa-14 text-center",children:"Duration (Mins)"}),(0,f.jsx)("th",{className:"fa-14 text-center",children:"Status"}),(0,f.jsx)("th",{className:"fa-14",children:"Work Description"})]})}),(0,f.jsx)("tbody",{children:L.map((e,a)=>{return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"fa-13 text-center",children:a+1}),(0,f.jsx)("td",{className:"fa-13 text-center",children:null===e||void 0===e?void 0:e.EmployeeName}),(0,f.jsx)("td",{className:"fa-13 text-center",children:(0,_.yc)(null===e||void 0===e?void 0:e.Work_Dt)}),(0,f.jsx)("td",{className:"fa-14 text-center",children:(0,f.jsxs)("span",{className:"badge rounded-4 px-3 bg-light text-primary",children:[(0,f.jsx)(x.A,{className:"fa-18 me-2"}),H(null===e||void 0===e?void 0:e.Start_Time)," - ",H(null===e||void 0===e?void 0:e.End_Time)]})}),(0,f.jsx)("td",{className:"fa-13 text-center",children:null===e||void 0===e?void 0:e.Tot_Minutes}),(0,f.jsx)("td",{className:"fa-13 text-center",children:(0,f.jsx)("span",{className:"badge rounded-4 px-3 fw-bold text-white ".concat((s=null===e||void 0===e?void 0:e.Work_Status,["bg-dark","bg-info","bg-warning","bg-success","bg-danger"][Number(s)])),children:null===e||void 0===e?void 0:e.WorkStatus})}),(0,f.jsx)("td",{className:"fa-13",children:null===e||void 0===e?void 0:e.Work_Done})]},a);var s})})]})}):(0,f.jsx)("h6",{className:"mt-3",children:"No Data"})]}),(0,f.jsxs)(i.A,{open:null===y||void 0===y?void 0:y.assignEmp,onClose:()=>F(),children:[(0,f.jsx)(r.A,{children:k?"Modify Assigned Task":"Assign Task"}),(0,f.jsxs)("form",{onSubmit:e=>{e.preventDefault(),null!==M&&void 0!==M&&M.Emp_Id?(0,b.z)({address:"taskManagement/task/assignEmployee",method:k?"PUT":"POST",bodyData:M}).then(e=>{e.success?(p.oR.success(e.message),F(),z(!O)):p.oR.error(e.message)}).catch(e=>console.error(e)):p.oR.warn("Select Employee")},children:[(0,f.jsx)(c.A,{className:"table-responsive",children:(0,f.jsx)("table",{className:"table",children:(0,f.jsxs)("tbody",{children:[(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"Employee"}),(0,f.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,f.jsx)(j.Ay,{value:{value:null===M||void 0===M?void 0:M.Emp_Id,label:null===M||void 0===M?void 0:M.EmpGet},onChange:e=>R((0,t.A)((0,t.A)({},M),{},{Emp_Id:e.value,EmpGet:e.label})),options:[{value:"",label:"- Select Employee -"},...I.map(e=>({value:e.UserId,label:e.Name}))],styles:N.MR,required:!0,isSearchable:!0,placeholder:"Select User"})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"Start Time"}),(0,f.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,f.jsx)("input",{type:"time",className:"cus-inpt",value:null===M||void 0===M?void 0:M.Sch_Time,required:!0,onChange:e=>R((0,t.A)((0,t.A)({},M),{},{Sch_Time:e.target.value}))})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"End Time"}),(0,f.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,f.jsx)("input",{type:"time",className:"cus-inpt",value:null===M||void 0===M?void 0:M.EN_Time,required:!0,min:null===M||void 0===M?void 0:M.Sch_Time,onChange:e=>R((0,t.A)((0,t.A)({},M),{},{EN_Time:e.target.value}))})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"Start Date "}),(0,f.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,f.jsx)("input",{type:"date",className:"cus-inpt",required:!0,value:(0,_.ny)(null===M||void 0===M?void 0:M.Est_Start_Dt),onChange:e=>R((0,t.A)((0,t.A)({},M),{},{Est_Start_Dt:e.target.value}))})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"End Date "}),(0,f.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,f.jsx)("input",{type:"date",className:"cus-inpt",required:!0,min:null===M||void 0===M?void 0:M.Est_Start_Dt,value:(null===M||void 0===M?void 0:M.Est_End_Dt)&&(0,_.ny)(null===M||void 0===M?void 0:M.Est_End_Dt),onChange:e=>R((0,t.A)((0,t.A)({},M),{},{Est_End_Dt:e.target.value}))})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"Order BY "}),(0,f.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,f.jsx)("input",{type:"number",required:!0,placeholder:"1, 2, 3...",className:"cus-inpt",value:null===M||void 0===M?void 0:M.Ord_By,onChange:e=>R((0,t.A)((0,t.A)({},M),{},{Ord_By:e.target.value}))})})]}),(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:k&&(0,f.jsxs)("div",{children:[(0,f.jsx)("input",{className:"form-check-input shadow-none",style:{padding:"0.7em"},type:"checkbox",id:"involve",checked:Boolean(Number(null===M||void 0===M?void 0:M.Invovled_Stat)),onChange:e=>R((0,t.A)((0,t.A)({},M),{},{Invovled_Stat:e.target.checked}))}),(0,f.jsx)("label",{className:"form-check-label p-1 ps-2",htmlFor:"involve",children:"is Involved?"})]})}),(0,f.jsx)("td",{className:"border-bottom-0 fa-15 text-end",children:(0,f.jsxs)("div",{children:[(0,f.jsx)("input",{className:"form-check-input shadow-none",style:{padding:"0.7em"},type:"checkbox",id:"timerbased",checked:Boolean(Number(null===M||void 0===M?void 0:M.Timer_Based)),onChange:e=>R((0,t.A)((0,t.A)({},M),{},{Timer_Based:e.target.checked}))}),(0,f.jsx)("label",{className:"form-check-label p-1 ps-2",htmlFor:"timerbased",children:"Timer Based Task?"})]})})]})]})})}),(0,f.jsxs)(o.A,{children:[(0,f.jsx)(m.A,{type:"button",onClick:()=>F(),children:"close"}),(0,f.jsx)(m.A,{type:"submit",children:"submit"})]})]})]})]})}},83560:(e,a,s)=>{s.d(a,{A:()=>d});var t=s(59662),l=s(70579);const d=(0,t.A)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=1045.f3a8930b.chunk.js.map