{"version":3,"file":"static/js/325.adbaaa42.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/Download.js","../node_modules/@mui/icons-material/esm/ArrowBackIos.js","../node_modules/@mui/icons-material/esm/Replay.js","../node_modules/@mui/icons-material/esm/ArticleOutlined.js","../node_modules/@mui/icons-material/esm/Attachment.js","../node_modules/@mui/icons-material/esm/Send.js","Pages/Discussions/chats.jsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z\"\n}), 'Download');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z\"\n}), 'ArrowBackIos');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8\"\n}), 'Replay');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon([/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2\"\n}, \"0\"), /*#__PURE__*/_jsx(\"path\", {\n  d: \"M14 17H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z\"\n}, \"1\")], 'ArticleOutlined');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5\"\n}), 'Attachment');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z\"\n}), 'Send');","import React, { Fragment, useEffect, useState, useRef } from 'react';\r\nimport api from '../../API';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { IconButton, Tooltip, Dialog, DialogTitle, DialogContent, DialogActions, Button } from '@mui/material';\r\nimport { Send, ArrowBackIos, Replay, Attachment, Download, ArticleOutlined } from '@mui/icons-material';\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport axios from 'axios';\r\nimport { fetchLink } from \"../../Components/fetchComponent\";\r\n\r\nconst ChatsDisplayer = () => {\r\n    const localData = localStorage.getItem(\"user\");\r\n    const parseData = JSON.parse(localData);\r\n    const location = useLocation();\r\n    const locationData = location.state;\r\n    const navigate = useNavigate();\r\n    const [messageData, setMessageData] = useState([]);\r\n    const [documents, setDocuments] = useState([]);\r\n    const chatBodyRef = useRef(null);\r\n    const [messageInput, setMessageInput] = useState('');\r\n    const [reload, setReload] = useState(false);\r\n\r\n    const [uploadDialog, setUploadDialog] = useState(false);\r\n    const [uploadFile, setUploadFile] = useState('');\r\n    const [uploadPercentage, setUploadPercentage] = useState(0);\r\n\r\n    const [documentsDialog, setDocumentsDialog] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (!locationData) {\r\n            return navigate('/taskManagement/discussions')\r\n        }\r\n        fetchLink({\r\n            address: `discussionForum/messages?Topic_Id=${locationData?.Id}`,\r\n        }).then(data => {\r\n            if (data.success) {\r\n                const groupedData = data.data.reduce((acc, message) => {\r\n                    const date = new Date(message.CreatedAt).toDateString();\r\n                    if (!acc[date]) {\r\n                        acc[date] = [];\r\n                    }\r\n                    acc[date].push(message);\r\n                    return acc;\r\n                }, {});\r\n                setMessageData(groupedData);\r\n            }\r\n        }).catch(e => console.log(e))\r\n        \r\n        fetchLink({\r\n            address: `discussionForum/files?Topic_Id=${locationData?.Id}`,\r\n        }).then(data => {\r\n            if (data.success) {\r\n                setDocuments(data.data);\r\n            }\r\n        }).catch(e => console.log(e))\r\n    }, [reload])\r\n\r\n    useEffect(() => {\r\n        if (chatBodyRef.current) {\r\n            const { scrollHeight, clientHeight } = chatBodyRef.current;\r\n            chatBodyRef.current.scrollTop = scrollHeight - clientHeight;\r\n        }\r\n    }, [messageData]);\r\n\r\n    const handleFormSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (messageInput.trim() === '') {\r\n            toast.warn('Enter a message');\r\n            setMessageInput('')\r\n            return;\r\n        }\r\n\r\n        fetchLink({\r\n            address: `discussionForum/messages`,\r\n            method: 'POST',\r\n            bodyData: {\r\n                Topic_Id: locationData?.Id,\r\n                User_Id: parseData?.UserId,\r\n                Message: messageInput\r\n            }\r\n        }).then(data => {\r\n            if (data.success) {\r\n                setReload(!reload);\r\n                setMessageInput('');\r\n            } else {\r\n                toast.error(data.message);\r\n            }\r\n        }).catch(e => console.log(e))\r\n    };\r\n\r\n    const closeFileUploadDialog = () => {\r\n        setUploadDialog(false);\r\n        setUploadFile('')\r\n    }\r\n\r\n    const uploadFileFun = (e) => {\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append('files', uploadFile);\r\n        formData.append('User_Id', parseData?.UserId);\r\n        formData.append('Project_Id', locationData?.Project_Id);\r\n        formData.append('Topic_Id', locationData?.Id);\r\n\r\n        try {\r\n            axios.post(`${api}discussionForum/files`, formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                    \"Authorization\": parseData?.Autheticate_Id\r\n                },\r\n                onUploadProgress: progressEvent => {\r\n                    let percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n                    setUploadPercentage(percentCompleted);\r\n                },\r\n            }).then((data) => {\r\n                toast.success(data.data.message);\r\n                setReload(!reload)\r\n            }).catch(e => {\r\n                toast.error('Failed to upload')\r\n                console.error(e)\r\n            }).finally(() => {\r\n                closeFileUploadDialog();\r\n                setUploadPercentage(0);\r\n            })\r\n        } catch (error) {\r\n            console.error('Error uploading file:', error);\r\n        }\r\n    }\r\n\r\n    const downloadFile = async (id) => {\r\n        try {\r\n            const response = await fetchLink({\r\n                address: `discussionForum/files/download?FileId=${id}`,\r\n                headers: {\r\n                    \"Content-Type\": \"application/octet-stream\",  \r\n                    \"Authorization\": parseData.Autheticate_Id\r\n                }\r\n            });\r\n    \r\n            const blob = await response.blob();\r\n            const downloadUrl = window.URL.createObjectURL(blob);\r\n            const link = document.createElement('a');\r\n            link.href = downloadUrl;\r\n            link.setAttribute('download', `file_${id}`);  \r\n            document.body.appendChild(link);\r\n            link.click();\r\n            link.parentNode.removeChild(link);  \r\n        } catch (e) {\r\n            console.error('Download Error', e);\r\n        }\r\n    };\r\n    \r\n\r\n    return (\r\n        <>\r\n            <ToastContainer />\r\n            <div className=\"chat-header d-flex align-items-center\">\r\n                <p className='mb-0 fa-14 text-white text-uppercase fw-bold flex-grow-1'>{locationData?.Topic}</p>\r\n                <Tooltip title=\"Back\">\r\n                    <IconButton size='small' onClick={() => navigate('/taskManagement/discussions')}><ArrowBackIos className='fa-18' /></IconButton>\r\n                </Tooltip>\r\n                <Tooltip title=\"Refresh Chat\">\r\n                    <IconButton size='small' onClick={() => setReload(!reload)}><Replay className='fa-18' /></IconButton>\r\n                </Tooltip>\r\n                <Tooltip title=\"Documnets Shared\">\r\n                    <IconButton size='small' onClick={() => setDocumentsDialog(true)}><ArticleOutlined /></IconButton>\r\n                </Tooltip>\r\n                <Dropdown>\r\n                    <Dropdown.Toggle\r\n                        variant=\"success\"\r\n                        id=\"actions\"\r\n                        className=\"rounded-5 bg-transparent text-muted fa-18 border-0 btn\"\r\n                    >\r\n                    </Dropdown.Toggle>\r\n                    <Dropdown.Menu>\r\n                        <h5 className='mb-1 text-primary px-3 fa-18 border-bottom'> Teams</h5>\r\n                        {locationData?.InvolvedUsers.map((o, i) => (\r\n                            <p key={i} className='fw-bold text-muted fa-13 mb-0 px-3 py-1 '>{o.Name}</p>\r\n                        ))}\r\n                    </Dropdown.Menu>\r\n                </Dropdown>\r\n            </div>\r\n            <div className=\"chat-body\" ref={chatBodyRef}>\r\n                {Object.entries(messageData).map(([date, messages]) => (\r\n                    <Fragment key={date}>\r\n                        <div className=\"badge rounded-3 bg-light text-center text-dark mx-auto my-2\">\r\n                            {new Date().toDateString() === date ? 'Today' : date}\r\n                        </div>\r\n                        {messages.map((message) => (\r\n                            <div\r\n                                key={message.Id}\r\n                                className={`messages ${Number(message?.User_Id) === Number(parseData?.UserId) ? 'message-right' : 'message-left'}`}\r\n                            >\r\n                                <p className={'fw-bold mb-1 text-primary fa-12'}>\r\n                                    {Number(message?.User_Id) === Number(parseData?.UserId) ? \"You\" : message.Name}\r\n                                </p>\r\n                                <div className='fa-16 mb-2'>{message.Message}</div>\r\n                                <p className={`fa-11 mb-0 fw-bold ${Number(message?.User_Id) === Number(parseData?.UserId) && 'text-end'} `}>\r\n                                    {new Date(message.CreatedAt).toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' })}\r\n                                </p>\r\n                            </div>\r\n                        ))}\r\n                    </Fragment>\r\n                ))}\r\n            </div>\r\n            <form onSubmit={handleFormSubmit}>\r\n                <div className=\"chat-footer\">\r\n                    <div className=\"input-icon-container\">\r\n                        <input\r\n                            className='cus-inpt rounded-5 border-0 outline-none px-3'\r\n                            placeholder=\"Type a message\"\r\n                            autoFocus required\r\n                            value={messageInput}\r\n                            onChange={e => setMessageInput(e.target.value)}\r\n                            onInvalid={e => e.target.setCustomValidity('Type a message')}\r\n                            onInput={e => e.target.setCustomValidity('')}\r\n                        />\r\n                        <Tooltip title=\"Upload Files\">\r\n                            <IconButton onClick={() => setUploadDialog(true)} type='button' >\r\n                                <Attachment />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title=\"Send Message\">\r\n                            <IconButton type='submit'>\r\n                                <Send />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n\r\n            <Dialog\r\n                open={uploadDialog}\r\n                onClose={closeFileUploadDialog}\r\n                fullWidth\r\n                maxWidth=\"sm\" >\r\n                <DialogTitle>Share Files</DialogTitle>\r\n                <form onSubmit={uploadFileFun}>\r\n                    <DialogContent>\r\n                        <input\r\n                            type='file'\r\n                            className='cus-inpt ' required\r\n                            onChange={e => setUploadFile(e.target.files[0])} />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={closeFileUploadDialog} type='button'>close</Button>\r\n                        <Button onClick={uploadFileFun} disabled={uploadPercentage !== 0} type='submit'>Upload</Button>\r\n                    </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n\r\n            <Dialog\r\n                open={documentsDialog}\r\n                onClose={() => setDocumentsDialog(false)}\r\n                fullWidth\r\n                maxWidth={documents.length > 0 ? \"lg\" : 'sm'} >\r\n                <DialogTitle>Shared Documents</DialogTitle>\r\n                <DialogContent>\r\n                    {documents.length > 0 ? (\r\n                        <div className=\"table-responsive\">\r\n                            <table className=\"table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th className='fa-14'>S.No</th>\r\n                                        <th className='fa-14'>File Name</th>\r\n                                        <th className='fa-14'>Size</th>\r\n                                        <th className='fa-14'>Type</th>\r\n                                        <th className='fa-14'>Date</th>\r\n                                        <th className='fa-14'></th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {documents.map((o, i) => (\r\n                                        <tr key={i}>\r\n                                            <td className='fa-14'>{i + 1}</td>\r\n                                            <td className='fa-14'>{o?.FileName}</td>\r\n                                            <td className='fa-14'>{o?.FileSize ? (o?.FileSize / 1024 / 1024).toFixed(2) : 0} MB</td>\r\n                                            <td className='fa-14'>{o?.FileType}</td>\r\n                                            <td className='fa-14'>{o?.SendDate}</td>\r\n                                            <td className='fa-14'>\r\n                                                <IconButton className='text-primary' size=\"small\" onClick={() => downloadFile(o.FileId)}><Download /></IconButton>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    ) : (\r\n                        <h5 className='text-center text-muted my-5'>No Documents Available</h5>\r\n                    )}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => setDocumentsDialog(false)}>Close</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ChatsDisplayer;"],"names":["createSvgIcon","_jsx","d","ChatsDisplayer","localData","localStorage","getItem","parseData","JSON","parse","locationData","useLocation","state","navigate","useNavigate","messageData","setMessageData","useState","documents","setDocuments","chatBodyRef","useRef","messageInput","setMessageInput","reload","setReload","uploadDialog","setUploadDialog","uploadFile","setUploadFile","uploadPercentage","setUploadPercentage","documentsDialog","setDocumentsDialog","useEffect","fetchLink","address","concat","Id","then","data","success","groupedData","reduce","acc","message","date","Date","CreatedAt","toDateString","push","catch","e","console","log","current","scrollHeight","clientHeight","scrollTop","closeFileUploadDialog","uploadFileFun","preventDefault","formData","FormData","append","UserId","Project_Id","axios","post","api","headers","Autheticate_Id","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","toast","error","finally","_jsxs","_Fragment","children","ToastContainer","className","Topic","Tooltip","title","IconButton","size","onClick","ArrowBackIos","Replay","ArticleOutlined","Dropdown","Toggle","variant","id","Menu","InvolvedUsers","map","o","i","Name","ref","Object","entries","_ref","messages","Fragment","Number","User_Id","Message","toLocaleTimeString","hour","minute","onSubmit","async","trim","warn","method","bodyData","Topic_Id","placeholder","autoFocus","required","value","onChange","target","onInvalid","setCustomValidity","onInput","type","Attachment","Send","Dialog","open","onClose","fullWidth","maxWidth","DialogTitle","DialogContent","files","DialogActions","Button","disabled","length","FileName","FileSize","toFixed","FileType","SendDate","response","blob","downloadUrl","window","URL","createObjectURL","link","document","createElement","href","setAttribute","body","appendChild","click","parentNode","removeChild","downloadFile","FileId","Download"],"sourceRoot":""}