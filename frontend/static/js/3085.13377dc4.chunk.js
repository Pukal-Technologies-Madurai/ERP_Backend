"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3085],{8846:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(59662),l=o(70579);const a=(0,n.A)((0,l.jsx)("path",{d:"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41z"}),"FilterAltOff")},33064:(e,t,o)=>{o.d(t,{A:()=>w});var n=o(98587),l=o(58168),a=o(65043),s=o(58387),r=o(68606),c=o(6803),i=o(34535),d=o(61475),u=o(54516),p=o(85213),h=o(75429),m=o(57056),x=o(32400);function g(e){return(0,x.Ay)("PrivateSwitchBase",e)}(0,m.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var A=o(70579);const f=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],v=(0,i.Ay)(h.A)(e=>{let{ownerState:t}=e;return(0,l.A)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})}),b=(0,i.Ay)("input",{shouldForwardProp:d.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),w=a.forwardRef(function(e,t){const{autoFocus:o,checked:a,checkedIcon:i,className:d,defaultChecked:h,disabled:m,disableFocusRipple:x=!1,edge:w=!1,icon:j,id:y,inputProps:C,inputRef:k,name:S,onBlur:F,onChange:N,onFocus:P,readOnly:z,required:D=!1,tabIndex:E,type:B,value:I}=e,T=(0,n.A)(e,f),[_,O]=(0,u.A)({controlled:a,default:Boolean(h),name:"SwitchBase",state:"checked"}),R=(0,p.A)();let M=m;R&&"undefined"===typeof M&&(M=R.disabled);const H="checkbox"===B||"radio"===B,G=(0,l.A)({},e,{checked:_,disabled:M,disableFocusRipple:x,edge:w}),L=(e=>{const{classes:t,checked:o,disabled:n,edge:l}=e,a={root:["root",o&&"checked",n&&"disabled",l&&"edge".concat((0,c.A)(l))],input:["input"]};return(0,r.A)(a,g,t)})(G);return(0,A.jsxs)(v,(0,l.A)({component:"span",className:(0,s.A)(L.root,d),centerRipple:!0,focusRipple:!x,disabled:M,tabIndex:null,role:void 0,onFocus:e=>{P&&P(e),R&&R.onFocus&&R.onFocus(e)},onBlur:e=>{F&&F(e),R&&R.onBlur&&R.onBlur(e)},ownerState:G,ref:t},T,{children:[(0,A.jsx)(b,(0,l.A)({autoFocus:o,checked:a,defaultChecked:h,className:L.input,disabled:M,id:H?y:void 0,name:S,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;O(t),N&&N(e,t)},readOnly:z,ref:k,required:D,ownerState:G,tabIndex:E,type:B},"checkbox"===B&&void 0===I?{}:{value:I},C)),_?i:j]}))})},48471:(e,t,o)=>{o.d(t,{Ay:()=>O,JT:()=>T,Lj:()=>B,wF:()=>I});var n=o(89379),l=o(65043),a=o(77739),s=o(17392),r=o(41020),c=o(30922),i=o(32143),d=o(2050),u=o(48734),p=o(28076),h=o(39652),m=o(12110),x=o(63336),g=o(79650),A=o(71806),f=o(84882),v=o(58093),b=o(73460),w=o(31159),j=o(97707),y=o(47968),C=o(692),k=o(8737),S=o(58558),F=o(30599),N=o(433),P=o(37762),z=(o(20557),o(11238)),D=o(70579);const E=(e,t)=>e.map(e=>{const o={};return t.forEach((t,n)=>{if(t.isVisible||t.Defult_Display)if(t.isCustomCell&&t.Cell){const l=t.Cell({row:e}),a=t.ColumnHeader?String(t.ColumnHeader).replace(/\s+/g,"_").toLowerCase():"field_".concat(n+1);"string"!==typeof l&&"number"!==typeof l&&"bigint"!==typeof l||(o[a]=l)}else{let n=t.Field_Name;o[n]=e[n]||""}}),o}),B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"center",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,n.A)({isVisible:s,Field_Name:e,Fied_Data:t,align:l,verticalAlign:a},o&&{ColumnHeader:o})},I=e=>{let{buttonsData:t=[],ToolTipText:o="Options"}=e;const[n,p]=(0,l.useState)(null),h=Boolean(n);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(a.A,{title:o,children:(0,D.jsx)(s.A,{"aria-describedby":h,onClick:e=>{p(e.currentTarget)},className:"ms-2",size:"small",children:(0,D.jsx)(S.A,{})})}),(0,D.jsx)(r.Ay,{open:h,anchorEl:n,onClose:()=>{p(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,D.jsx)(c.A,{children:t.map((e,t)=>(0,D.jsxs)(i.A,{onClick:()=>(null===e||void 0===e?void 0:e.onclick)&&(null===e||void 0===e?void 0:e.onclick()),disabled:null===e||void 0===e?void 0:e.disabled,children:[(0,D.jsx)(d.A,{children:null===e||void 0===e?void 0:e.icon}),(0,D.jsx)(u.A,{children:null===e||void 0===e?void 0:e.name})]},t))})})]})},T=(e,t)=>{switch(t){case"number":return e?(0,j.jG)(e):e;case"date":return e?(0,j.yc)(e):e;case"time":return e?(0,j.JG)(e):e;case"string":return e;default:return""}},_=e=>{let{dataArray:t=[],columns:o=[],onClickFun:a=null,isExpendable:r=!1,expandableComp:c=null,tableMaxHeight:i=550,initialPageCount:d=20,EnableSerialNumber:u=!1,CellSize:S="small",disablePagination:B=!1,title:_="",PDFPrintOption:O=!1,ExcelPrintOption:R=!1,maxHeightOption:M=!1,ButtonArea:H=null,MenuButtons:G=[],bodyFontSizePx:L=13,headerFontSizePx:V=13}=e;const[W,Q]=(0,l.useState)(0),[q,J]=(0,l.useState)(d),[K,Y]=(0,l.useState)([]),[X,U]=(0,l.useState)(!0),Z=X&&M?" max-content ":i,$=[{type:"left",class:"text-start"},{type:"right",class:"text-end"},{type:"center",class:"text-center"}],ee=[{type:"top",class:" vtop "},{type:"bottom",class:" vbottom "},{type:"center",class:" vctr "}],te=(e=>{if(!K.length)return e;return[...e].sort((e,t)=>{for(const o of K){const{columnId:n,direction:l}=o,a=e[n],s=t[n];if(a!==s)return"asc"===l?a>s?1:-1:a<s?1:-1}return 0})})(t),oe=W*q,ne=oe+q,le=te.slice(oe,ne),ae=e=>{let{row:t,index:n}=e;const[i,d]=(0,l.useState)(!1),m="20px";return(0,D.jsxs)(l.Fragment,{children:[(0,D.jsxs)(p.A,{children:[!0===r&&c&&(0,D.jsx)(h.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(L,"px")},children:(0,D.jsx)(s.A,{size:"small",onClick:()=>d(e=>!e),children:i?(0,D.jsx)(k.A,{sx:{fontSize:m}}):(0,D.jsx)(C.A,{sx:{fontSize:m}})})}),!0===u&&(0,D.jsx)(h.A,{className:"border-end text-center vtop",sx:{fontSize:"".concat(L,"px")},children:q*W+n+1}),null===o||void 0===o?void 0:o.map((e,o)=>{var l,s;const r=(0,j.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,j.id)(null===e||void 0===e?void 0:e.isVisible,1),c=Boolean(null===e||void 0===e?void 0:e.isCustomCell)&&e.Cell,i=!c,d=(t,o,n)=>null!==e&&void 0!==e&&e.tdClass?" ".concat(null===e||void 0===e?void 0:e.tdClass({row:t,Field_Name:o,index:n})," "):"",u=e.align?null===(l=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===l?void 0:l.class:"",p=e.verticalAlign?null===(s=ee.find(t=>t.type===String(e.verticalAlign).toLowerCase()))||void 0===s?void 0:s.class:" vctr ";if(r&&i){const l=Object.entries(t).find(t=>{let[o]=t;return o===e.Field_Name});return(0,D.jsx)(h.A,{className:"border-end ".concat(u," ").concat(p," ").concat(d(t,e.Field_Name,n)),sx:{fontSize:"".concat(L,"px")},onClick:()=>a?a(t):console.log("Function not supplied"),children:l?T(l[1],null===e||void 0===e?void 0:e.Fied_Data):"-"},o)}return r&&c?(0,D.jsx)(h.A,{className:"border-end ".concat(u," ").concat(p," ").concat(d(t,e.Field_Name,n)),sx:{fontSize:"".concat(L,"px")},children:e.Cell({row:t,Field_Name:e.Field_Name,index:n})},o):(0,D.jsx)(h.A,{sx:{fontSize:"".concat(L,"px")},className:"border-end ".concat(u," ").concat(p),children:"-"},o)})]}),!0===r&&c&&i&&(0,D.jsx)(p.A,{children:(0,D.jsx)(h.A,{colSpan:Number(null===o||void 0===o?void 0:o.length)+(!0===u?2:1),children:c({row:t,index:n})})})]})};return(0,D.jsxs)(m.A,{className:"rounded-3 bg-white overflow-hidden",component:x.A,children:[(0,D.jsxs)("div",{className:"d-flex align-items-center flex-wrap px-3 py-2 flex-row-reverse ",children:[(O||R||G.length>0||M)&&(0,D.jsx)(I,{ToolTipText:"Table Options",buttonsData:[...M?[{name:"Max Height",icon:X?(0,D.jsx)(N.A,{fontSize:"small",color:"primary"}):(0,D.jsx)(F.A,{fontSize:"small"}),onclick:()=>U(e=>!e),disabled:(0,j.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...O?[{name:"PDF Print",icon:(0,D.jsx)(y.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const o=new P.default,l=E(e,t),a=t.filter(e=>e.isVisible||e.Defult_Display).map(e=>e.Field_Name||String(e.ColumnHeader).replace(/\s+/g,"_").toLowerCase()),s=l.map(e=>a.map(t=>e[t])).map((e,t)=>(0,n.A)((0,n.A)({},e),{},{Sno:t+1}));o.autoTable({head:[a],body:s}),o.save("table.pdf")}catch(o){console.error(o)}})(t,o),disabled:(0,j.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...R?[{name:"Excel Print",icon:(0,D.jsx)(y.A,{fontSize:"small",color:"primary"}),onclick:()=>((e,t)=>{try{const o=E(e,t),n=z.Wp.json_to_sheet(o),l=z.Wp.book_new();z.Wp.book_append_sheet(l,n,"Data"),z._h(l,"table.xlsx")}catch(o){console.error(o)}})(t,o),disabled:(0,j.id)(null===t||void 0===t?void 0:t.length,0)}]:[],...G]}),H&&H,_&&(0,D.jsx)("h6",{className:"fw-bold text-muted flex-grow-1 m-0",children:_})]}),(0,D.jsx)(g.A,{sx:{maxHeight:Z},children:(0,D.jsxs)(A.A,{stickyHeader:!0,size:S,children:[(0,D.jsx)(f.A,{children:(0,D.jsxs)(p.A,{children:[r&&c&&(0,D.jsx)(h.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:"#"}),u&&(0,D.jsx)(h.A,{className:"fw-bold border-end border-top text-center",sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:"SNo"}),o.map((e,t)=>{const o=(0,j.id)(null===e||void 0===e?void 0:e.Defult_Display,1)||(0,j.id)(null===e||void 0===e?void 0:e.isVisible,1),l=!1===Boolean(null===e||void 0===e?void 0:e.isCustomCell)||!e.Cell,a=K.find(t=>t.columnId===e.Field_Name),s=a?a.direction:"asc";var r,c,i,d;return o?l?(0,D.jsx)(h.A,{className:"fw-bold border-end border-top "+(e.align?null===(r=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===r?void 0:r.class:""),sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},sortDirection:!!a&&s,children:(0,D.jsx)(v.A,{active:!!a,direction:s,onClick:()=>(e=>{const t=K.find(t=>t.columnId===e);if(t){const o="asc"===t.direction;Y(K.map(t=>t.columnId===e?(0,n.A)((0,n.A)({},t),{},{direction:o?"desc":"asc"}):t))}else Y([...K,{columnId:e,direction:"asc"}])})(e.Field_Name),children:e.ColumnHeader||(null===e||void 0===e||null===(c=e.Field_Name)||void 0===c?void 0:c.replace(/_/g," "))})},t):(0,D.jsx)(h.A,{className:"".concat(e.ColumnHeader||null!==e&&void 0!==e&&e.Field_Name?" fw-bold border-end border-top p-2 appFont ":" p-0 "," ")+(e.align?null===(i=$.find(t=>t.type===String(e.align).toLowerCase()))||void 0===i?void 0:i.class:""),sx:{fontSize:"".concat(V,"px"),backgroundColor:"#EDF0F7"},children:e.ColumnHeader||(null===e||void 0===e||null===(d=e.Field_Name)||void 0===d?void 0:d.replace(/_/g," "))},t):null})]})}),(0,D.jsxs)(b.A,{children:[(B?te:le).map((e,t)=>(0,D.jsx)(ae,{row:e,index:t},t)),0===t.length&&(0,D.jsx)(p.A,{children:(0,D.jsx)(h.A,{colSpan:o.length+(!0===r&&c?1:0)+(!0===u?1:0),sx:{textAlign:"center"},children:"No Data"})})]})]})}),!B&&0!==le.length&&(0,D.jsx)("div",{className:"p-2 pb-0",children:(0,D.jsx)(w.A,{component:"div",count:t.length,page:W,onPageChange:(e,t)=>{Q(t)},rowsPerPage:q,onRowsPerPageChange:e=>{J(parseInt(e.target.value,10)),Q(0)},rowsPerPageOptions:Array.from(new Set([d,5,20,50,100,200,500,1e3,2e3])).sort((e,t)=>e-t),labelRowsPerPage:"Rows per page",showFirstButton:!0,showLastButton:!0})})]})};_.defaultProps={dataArray:[],columns:[],onClickFun:null,isExpendable:!1,expandableComp:null,tableMaxHeight:550,initialPageCount:20,EnableSerialNumber:!1,CellSize:"small",disablePagination:!1,title:void 0,PDFPrintOption:!1,ExcelPrintOption:!1,maxHeightOption:!1,ButtonArea:null,MenuButtons:[],headerFontSizePx:13,bodyFontSizePx:13};const O=_},51962:(e,t,o)=>{o.d(t,{A:()=>N});var n=o(98587),l=o(58168),a=o(65043),s=o(58387),r=o(68606),c=o(67266),i=o(33064),d=o(59662),u=o(70579);const p=(0,d.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),h=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),m=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var x=o(6803),g=o(6431),A=o(34535),f=o(61475),v=o(57056),b=o(32400);function w(e){return(0,b.Ay)("MuiCheckbox",e)}const j=(0,v.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),y=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],C=(0,A.Ay)(i.A,{shouldForwardProp:e=>(0,f.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.indeterminate&&t.indeterminate,t["size".concat((0,x.A)(o.size))],"default"!==o.color&&t["color".concat((0,x.A)(o.color))]]}})(e=>{let{theme:t,ownerState:o}=e;return(0,l.A)({color:(t.vars||t).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===o.color?t.vars.palette.action.activeChannel:t.vars.palette[o.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,c.X4)("default"===o.color?t.palette.action.active:t.palette[o.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==o.color&&{["&.".concat(j.checked,", &.").concat(j.indeterminate)]:{color:(t.vars||t).palette[o.color].main},["&.".concat(j.disabled)]:{color:(t.vars||t).palette.action.disabled}})}),k=(0,u.jsx)(h,{}),S=(0,u.jsx)(p,{}),F=(0,u.jsx)(m,{}),N=a.forwardRef(function(e,t){var o,c;const i=(0,g.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=k,color:p="primary",icon:h=S,indeterminate:m=!1,indeterminateIcon:A=F,inputProps:f,size:v="medium",className:b}=i,j=(0,n.A)(i,y),N=m?A:h,P=m?A:d,z=(0,l.A)({},i,{color:p,indeterminate:m,size:v}),D=(e=>{const{classes:t,indeterminate:o,color:n,size:a}=e,s={root:["root",o&&"indeterminate","color".concat((0,x.A)(n)),"size".concat((0,x.A)(a))]},c=(0,r.A)(s,w,t);return(0,l.A)({},t,c)})(z);return(0,u.jsx)(C,(0,l.A)({type:"checkbox",inputProps:(0,l.A)({"data-indeterminate":m},f),icon:a.cloneElement(N,{fontSize:null!=(o=N.props.fontSize)?o:v}),checkedIcon:a.cloneElement(P,{fontSize:null!=(c=P.props.fontSize)?c:v}),ownerState:z,ref:t,className:(0,s.A)(D.root,b)},j,{classes:D}))})},59383:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(59662),l=o(70579);const a=(0,n.A)((0,l.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")},73085:(e,t,o)=>{o.r(t),o.d(t,{default:()=>B});var n=o(89379),l=o(81e3),a=o(85865),s=o(77739),r=o(17392),c=o(11906),i=o(43845),d=o(83462),u=o(26600),p=o(35316),h=o(68903),m=o(67784),x=o(12412),g=o(53193),A=o(79190),f=o(72221),v=o(32143),b=o(51962),w=o(48734),j=o(29347),y=o(59383),C=o(8846),k=o(65043),S=o(65074),F=o(48471),N=o(69223),P=o.n(N),z=o(72450),D=o(70579);const E={passingDate:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date).toISOString().split("T")[0]}(),selectedBrands:[],selectedProducts:[],selectedGodowns:["Main Location","Smt Mill"]},B=e=>{let{loadingOn:t,loadingOff:o}=e;const N=JSON.parse(localStorage.getItem("user")),[B,I]=(0,k.useState)(null),[T,_]=(0,k.useState)(!0),[O,R]=(0,k.useState)((0,n.A)((0,n.A)({},E),{},{filterDialog:!1})),[M,H]=(0,k.useState)([]),[G,L]=(0,k.useState)([]),[V,W]=(0,k.useState)([]);(0,k.useEffect)(()=>{if(B){const e=[...new Set(B.map(e=>e.brandName).filter(Boolean))];H(e);const t=[],o=new Set;B.forEach(e=>{e.godowns&&e.godowns.forEach(e=>{o.add(e.godownName),e.products&&e.products.forEach(e=>{e.baseProduct&&!t.includes(e.baseProduct)&&t.push(e.baseProduct)})})}),L(t),W(Array.from(o).sort())}},[B]);const Q=(0,k.useCallback)(async()=>{t(),_(!0);try{const e=await(0,S.z)({address:"reports/smtreports?PassingDate=".concat(O.passingDate),method:"POST"});e.success?I(e.data):console.error("Failed to fetch data:",e.message)}catch(e){console.error("Error fetching data:",e)}finally{_(!1),o()}},[O.passingDate]);(0,k.useEffect)(()=>{null!==N&&void 0!==N&&N.Company_id&&O.passingDate&&Q()},[null===N||void 0===N?void 0:N.Company_id,Q]);const q=(0,k.useMemo)(()=>B?0===O.selectedBrands.length&&0===O.selectedProducts.length&&0===O.selectedGodowns.length?B:B.filter(e=>{if(!(0===O.selectedBrands.length||O.selectedBrands.includes(e.brandName)))return!1;if(O.selectedProducts.length>0){var t;if(!(null===(t=e.godowns)||void 0===t?void 0:t.some(e=>{var t;return null===(t=e.products)||void 0===t?void 0:t.some(e=>O.selectedProducts.includes(e.baseProduct))})))return!1}if(O.selectedGodowns.length>0){var o;if(!(null===(o=e.godowns)||void 0===o?void 0:o.some(e=>O.selectedGodowns.includes(e.godownName))))return!1}return!0}).map(e=>{let t=e.godowns;return O.selectedGodowns.length>0&&(t=t.filter(e=>O.selectedGodowns.includes(e.godownName))),O.selectedProducts.length>0&&(t=t.map(e=>{const t=e.products.filter(e=>O.selectedProducts.includes(e.baseProduct));return(0,n.A)((0,n.A)({},e),{},{products:t})}).filter(e=>e.products.length>0)),(0,n.A)((0,n.A)({},e),{},{godowns:t})}):[],[B,O.selectedBrands,O.selectedProducts,O.selectedGodowns]);return(0,D.jsxs)(l.A,{sx:{p:3},children:[(0,D.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,D.jsx)(a.A,{variant:"h4",component:"h1",children:"Stock Paper"}),(0,D.jsxs)(l.A,{sx:{display:"flex",gap:1,marginLeft:"auto"},children:[(0,D.jsx)(s.A,{title:"Filter",children:(0,D.jsx)(r.A,{color:"primary",onClick:()=>R((0,n.A)((0,n.A)({},O),{},{filterDialog:!0})),children:(0,D.jsx)(y.A,{})})}),(0,D.jsx)(s.A,{title:"Download Excel",children:(0,D.jsx)(c.A,{variant:"contained",color:"success",onClick:async()=>{if(!q||0===q.length)return void alert("No data to export");const e=new(P().Workbook),t=e.addWorksheet("SMT Report");t.mergeCells("A1:D1"),t.getCell("A1").value="SMT STOCK REPORT - ".concat(new Date(O.passingDate).toLocaleDateString("en-GB")),t.getCell("A1").font={bold:!0,size:14},t.getCell("A1").alignment={horizontal:"center"};const o=new Set;q.forEach(e=>{e.godowns.forEach(e=>{e.products.forEach(e=>{e.packs.forEach(e=>{o.add(e.packType)})})})});const n=q[0].godowns.map(e=>({godownName:e.godownName,godownId:e.godownId,packTypes:Array.from(o).sort()})),l=["Products"],a=[""],s=[""];n.forEach(e=>{const t=3*e.packTypes.length;for(let o=0;o<t;o++)l.push("");e.packTypes.forEach(e=>{a.push(e,"",""),s.push("Wk Avg","Yest","Bal")})}),t.addRow(l),t.addRow(a),t.addRow(s);let r=2;n.forEach(e=>{const o=3*e.packTypes.length;t.mergeCells(2,r,2,r+o-1);const n=t.getCell(2,r);n.value=e.godownName,n.font={bold:!0,size:12,color:{argb:"FFFFFFFF"}},n.alignment={horizontal:"center",vertical:"middle"},n.fill={type:"pattern",pattern:"solid",fgColor:{argb:"4472C4"}};for(let l=r;l<=r+o-1;l++){t.getCell(2,l).border={top:{style:"medium"},left:{style:l===r?"medium":"thin"},right:{style:l===r+o-1?"medium":"thin"},bottom:{style:"medium"}}}r+=o}),r=2,n.forEach(e=>{e.packTypes.forEach(()=>{t.mergeCells(3,r,3,r+2),r+=3})}),t.getRow(4).eachCell(e=>{e.font={bold:!0},e.alignment={horizontal:"center",vertical:"middle"},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});const c=1+n.reduce((e,t)=>e+3*t.packTypes.length,0);q.forEach(e=>{const o=new Set;e.godowns.forEach(e=>{e.products.forEach(e=>{o.add(e.baseProduct)})});const l=Array.from(o),a=t.addRow([e.brandName]);for(let t=1;t<=c;t++){const e=a.getCell(t);e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"7030A0"}},e.font={bold:!0,size:13,color:{argb:"FFFFFFFF"}},e.alignment={horizontal:1===t?"left":"center",vertical:"middle"}}l.forEach(o=>{const l=[o];n.forEach(t=>{const n=e.godowns.find(e=>e.godownId===t.godownId),a=null===n||void 0===n?void 0:n.products.find(e=>e.baseProduct===o);t.packTypes.forEach(e=>{if(a){const t=a.packs.find(t=>t.packType===e);l.push(Number(((null===t||void 0===t?void 0:t.weeklyAverage)||0).toFixed(2))),l.push(Number(((null===t||void 0===t?void 0:t.yesterdayQty)||0).toFixed(2))),l.push(Number(((null===t||void 0===t?void 0:t.balanceQty)||0).toFixed(2)))}else l.push(0,0,0)})}),t.addRow(l)}),t.addRow([])}),t.columns.forEach(e=>{e.width=15});const i=await e.xlsx.writeBuffer();(0,z.saveAs)(new Blob([i]),"STOCK_REPORT_".concat(O.passingDate,".xlsx"))},children:"Download Excel"})})]})]}),(O.selectedBrands.length>0||O.selectedProducts.length>0||O.selectedGodowns.length>0)&&(0,D.jsxs)(l.A,{sx:{mb:2},children:[(0,D.jsx)(a.A,{variant:"subtitle1",gutterBottom:!0,children:"Active Filters:"}),(0,D.jsxs)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[O.selectedBrands.map(e=>(0,D.jsx)(i.A,{label:"Brand: ".concat(e),onDelete:()=>R((0,n.A)((0,n.A)({},O),{},{selectedBrands:O.selectedBrands.filter(t=>t!==e)})),color:"primary",variant:"outlined"},e)),O.selectedProducts.map(e=>(0,D.jsx)(i.A,{label:"Product: ".concat(e),onDelete:()=>R((0,n.A)((0,n.A)({},O),{},{selectedProducts:O.selectedProducts.filter(t=>t!==e)})),color:"secondary",variant:"outlined"},e)),O.selectedGodowns.map(e=>(0,D.jsx)(i.A,{label:"Godown: ".concat(e),onDelete:()=>R((0,n.A)((0,n.A)({},O),{},{selectedGodowns:O.selectedGodowns.filter(t=>t!==e)})),color:"info",variant:"outlined"},e))]})]}),(0,D.jsx)(F.Ay,{title:"Stock Details",dataArray:q,EnableSerialNumber:!0,columns:[(0,F.Lj)("brandName","string","Brand Name")],ButtonArea:(0,D.jsx)(s.A,{title:"Clear Filters",children:(0,D.jsx)(r.A,{onClick:()=>R((0,n.A)((0,n.A)({},E),{},{passingDate:O.passingDate})),children:(0,D.jsx)(C.A,{})})}),isExpendable:!0,tableMaxHeight:550,expandableComp:e=>{var t;let{row:o}=e;const n=o.godowns.map(e=>({godownName:e.godownName,godownId:e.godownId,packTypes:[...new Set(e.products.flatMap(e=>e.packs.map(e=>e.packType)))]})),l=1+n.reduce((e,t)=>e+3*t.packTypes.length,0);return(0,D.jsx)("div",{className:"p-3",children:(0,D.jsx)("div",{className:"table-responsive",children:(0,D.jsxs)("table",{className:"table table-bordered text-center",style:{fontSize:"12px"},children:[(0,D.jsxs)("thead",{children:[(0,D.jsx)("tr",{children:(0,D.jsxs)("th",{colSpan:l,className:"text-center bg-light",children:["STOCK PAPER - ",(new Date).toLocaleDateString("en-GB")]})}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{className:"bg-light",children:"Products"}),n.map(e=>(0,D.jsx)("th",{colSpan:3*e.packTypes.length,className:"text-center bg-light",children:e.godownName},e.godownId))]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{className:"bg-light"}),n.map(e=>e.packTypes.map(t=>(0,D.jsx)("th",{colSpan:3,className:"text-center bg-light",children:t},"".concat(e.godownId,"-").concat(t))))]}),(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{className:"bg-light"}),n.map(e=>e.packTypes.map(t=>(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("th",{className:"text-center bg-light",children:"Wk Avg"},"wk-".concat(e.godownId,"-").concat(t)),(0,D.jsx)("th",{className:"text-center bg-light",children:"Yest"},"yest-".concat(e.godownId,"-").concat(t)),(0,D.jsx)("th",{className:"text-center bg-light",children:"Bal"},"bal-".concat(e.godownId,"-").concat(t))]})))]})]}),(0,D.jsx)("tbody",{children:null===(t=o.godowns[0])||void 0===t?void 0:t.products.map((e,t)=>(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"fw-medium",children:e.baseProduct}),n.map(n=>n.packTypes.map(l=>{const a=o.godowns.find(e=>e.godownId===n.godownId),s=null===a||void 0===a?void 0:a.products.find(t=>t.baseProduct===e.baseProduct),r=null===s||void 0===s?void 0:s.packs.find(e=>e.packType===l);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("td",{className:"text-center",children:((null===r||void 0===r?void 0:r.weeklyAverage)||0).toFixed(2)},"wkVal-".concat(n.godownId,"-").concat(t,"-").concat(l)),(0,D.jsx)("td",{className:"text-center",children:((null===r||void 0===r?void 0:r.yesterdayQty)||0).toFixed(2)},"yestVal-".concat(n.godownId,"-").concat(t,"-").concat(l)),(0,D.jsx)("td",{className:"text-center",children:((null===r||void 0===r?void 0:r.balanceQty)||0).toFixed(2)},"balVal-".concat(n.godownId,"-").concat(t,"-").concat(l))]})}))]},t))})]})})})}}),(0,D.jsxs)(d.A,{open:O.filterDialog,onClose:()=>R((0,n.A)((0,n.A)({},O),{},{filterDialog:!1})),maxWidth:"md",fullWidth:!0,children:[(0,D.jsx)(u.A,{children:"Filter Options"}),(0,D.jsx)(p.A,{children:(0,D.jsxs)(h.Ay,{container:!0,spacing:2,sx:{mt:1},children:[(0,D.jsx)(h.Ay,{item:!0,xs:12,children:(0,D.jsx)(m.A,{fullWidth:!0,label:"Date",type:"date",value:O.passingDate,onChange:e=>R((0,n.A)((0,n.A)({},O),{},{passingDate:e.target.value})),InputLabelProps:{shrink:!0}})}),(0,D.jsx)(h.Ay,{item:!0,xs:12,children:(0,D.jsx)(x.A,{multiple:!0,options:M,value:O.selectedBrands,onChange:(e,t)=>R((0,n.A)((0,n.A)({},O),{},{selectedBrands:t})),renderInput:e=>(0,D.jsx)(m.A,(0,n.A)((0,n.A)({},e),{},{label:"Brands",placeholder:"Search brands..."}))})}),(0,D.jsx)(h.Ay,{item:!0,xs:12,children:(0,D.jsx)(x.A,{multiple:!0,options:G,value:O.selectedProducts,onChange:(e,t)=>R((0,n.A)((0,n.A)({},O),{},{selectedProducts:t})),renderInput:e=>(0,D.jsx)(m.A,(0,n.A)((0,n.A)({},e),{},{label:"Products",placeholder:"Search products..."}))})}),(0,D.jsx)(h.Ay,{item:!0,xs:12,children:(0,D.jsxs)(g.A,{fullWidth:!0,children:[(0,D.jsx)(A.A,{children:"Godowns"}),(0,D.jsx)(f.A,{multiple:!0,value:O.selectedGodowns,onChange:e=>R((0,n.A)((0,n.A)({},O),{},{selectedGodowns:e.target.value})),renderValue:e=>e.join(", "),label:"Godowns",children:V.map(e=>(0,D.jsxs)(v.A,{value:e,children:[(0,D.jsx)(b.A,{checked:O.selectedGodowns.indexOf(e)>-1}),(0,D.jsx)(w.A,{primary:e})]},e))})]})})]})}),(0,D.jsxs)(j.A,{children:[(0,D.jsx)(c.A,{onClick:()=>R((0,n.A)((0,n.A)({},O),{},{filterDialog:!1})),children:"Cancel"}),(0,D.jsx)(c.A,{onClick:()=>{R((0,n.A)((0,n.A)({},O),{},{filterDialog:!1})),Q()},variant:"contained",children:"Apply Filters"})]})]})]})}}}]);
//# sourceMappingURL=3085.13377dc4.chunk.js.map