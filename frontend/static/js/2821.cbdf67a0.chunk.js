"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[2821],{22821:(e,l,t)=>{t.r(l),t.d(l,{default:()=>U});var a=t(89379),s=t(65043),n=t(65074),d=t(12110),r=t(4598),o=t(11906),i=t(26494),c=t(17392),u=t(83462),m=t(26600),v=t(35316),_=t(70141),p=t(51387),h=t(22520),x=t(48471),I=t(91036),j=t(73216),N=t(14844);const g=localStorage.getItem("user"),A=(0,h.zM)(g)?JSON.parse(g):{},b={PIN_Id:"",Po_Inv_No:"",Branch_Id:"",Voucher_Type:0,Ref_Po_Inv_No:"",Po_Inv_Date:(0,h.ny)(),Po_Entry_Date:(0,h.ny)(),Retailer_Id:"",Retailer_Name:"",GST_Inclusive:2,IS_IGST:0,Narration:"",isConverted:"",CSGT_Total:0,SGST_Total:0,IGST_Total:0,Round_off:0,Total_Before_Tax:0,Total_Tax:0,Total_Invoice_value:0,Cancel_status:0,Stock_Item_Ledger_Name:"",Created_by:A.UserId,Altered_by:A.UserId,Created_on:"",Alterd_on:"",Trans_Type:"",Alter_Id:"",Approved_By:"",Approve_Status:"",Discount:0,QualityCondition:"",PaymentDays:0},y={Trip_Id:"",Trip_Item_SNo:"",POI_St_Id:"",DeliveryId:"",OrderId:"",PIN_Id:"",Po_Inv_Date:"",S_No:"",Location_Id:"",Item_Id:"",Item_Name:"",Bill_Qty:0,Act_Qty:0,Item_Rate:0,Bill_Alt_Qty:0,Alt_Act_Qty:0,Free_Qty:0,Unit_Id:"",Unit_Name:"",Batch_No:"",Taxable_Rate:0,Amount:0,Total_Qty:0,Taxble:0,HSN_Code:"",Taxable_Amount:0,Tax_Rate:0,Cgst:0,Cgst_Amo:0,Sgst:0,Sgst_Amo:0,Igst:0,Igst_Amo:0,Final_Amo:0,Created_on:""},f={Id:"",PIN_Id:"",Involved_Emp_Id:"",Involved_Emp_Name:"select",Cost_Center_Type_Id:""},S={PA_Id:"",PIN_Id:"",Expense_Id:"",Amount_value_DR:0,Amount_value_CR:0};var C=t(29347),T=t(34496),P=t(14792),R=t(20656),B=t(63406),E=t(70579);const D=e=>{var l,t;let{children:n,orderProducts:d=[],setOrderProducts:r,open:i=!1,onClose:c,products:_=[],brands:p=[],uom:x=[],godowns:j=[],GST_Inclusive:g,IS_IGST:A,editValues:b=null,initialValue:y={}}=e;const[f,S]=(0,s.useState)(y),D=(0,h.id)(g,1),Q=(0,h.id)(g,2),G=(0,s.useRef)(null);(0,s.useEffect)(()=>{(0,h.aF)(b)&&i&&S(e=>Object.fromEntries(Object.entries(e).map(e=>{let[l,t]=e;return[l,b[l]?b[l]:t]})))},[b]);const w=e=>{var l;return null!==(l=null===_||void 0===_?void 0:_.find(l=>(0,h.id)(null===l||void 0===l?void 0:l.Product_Id,e)))&&void 0!==l?l:{}},O=(0,s.useMemo)(()=>{const e=w(f.Item_Id);return f.Item_Id?e:{}},[_,f.Item_Id]);(0,s.useEffect)(()=>{const{Item_Rate:e,Amount:l,Bill_Qty:t}=f;if((0,h.gf)(t)&&0!==t){if(("RATE"===G.current||"QTY"===G.current)&&(0,h.gf)(e)){const l=(0,h.JH)(e,t);S(e=>e.Amount===l?e:(0,a.A)((0,a.A)({},e),{},{Amount:l}))}if("AMOUNT"===G.current&&(0,h.gf)(l)){const e=(0,h.SX)(l,t);S(l=>l.Item_Rate===e?l:(0,a.A)((0,a.A)({},l),{},{Item_Rate:e}))}}},[f.Item_Rate,f.Amount,f.Bill_Qty,f.Act_Qty]);const L=()=>{S(y),c()};return(0,E.jsxs)(E.Fragment,{children:[n,(0,E.jsxs)(u.A,{open:i,onClose:L,maxWidth:"md",fullWidth:!0,children:[(0,E.jsx)(m.A,{className:"border-bottom",children:(0,E.jsx)("span",{children:"Add Products Details"})}),(0,E.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f.Item_Id?(r(e=>[...e.filter(e=>!(0,h.id)(e.Item_Id,f.Item_Id)),Object.fromEntries(Object.entries(y).map(e=>{let[l,t]=e;const a=w(f.Item_Id),s=A?a.Igst_P:a.Gst_P,n=s>0,{Bill_Qty:d,Item_Rate:r,Amount:o}=f,i=Q?"zerotax":D?"remove":"add",c=(0,N.v)(r,s,i),u=(0,N.v)(o,s,i),m=A?0:u.cgst_per,v=A?u.igst_per:0,_=A?0:u.cgst_amount,p=A?u.igst_amount:0;switch(l){case"Item_Name":return[l,a.Product_Name];case"Taxable_Rate":return[l,c.base_amount];case"Total_Qty":return[l,d];case"Taxble":return[l,n?1:0];case"Taxable_Amount":return[l,u.base_amount];case"Tax_Rate":return[l,s];case"Cgst":case"Sgst":return[l,null!==m&&void 0!==m?m:0];case"Cgst_Amo":case"Sgst_Amo":return[l,Q?0:_];case"Igst":return[l,null!==v&&void 0!==v?v:0];case"Igst_Amo":return[l,Q?0:p];case"Final_Amo":return[l,u.with_tax];default:return[l,f[l]||t]}}))]),L()):I.oR.warn("Select Product")},children:[(0,E.jsx)(v.A,{children:(0,E.jsxs)("div",{className:"row pb-5",children:[(0,E.jsxs)("div",{className:"col-6 p-2",children:[(0,E.jsx)("label",{children:"Brand"}),(0,E.jsx)(R.Ay,{value:{value:f.BrandID,label:f.Brand},onChange:e=>S(l=>(0,a.A)((0,a.A)({},l),{},{BrandID:e.value,Brand:e.label})),options:[{value:"",label:"select",isDisabled:!0},...p.map(e=>({value:null===e||void 0===e?void 0:e.Brand,label:null===e||void 0===e?void 0:e.Brand_Name}))],styles:B.MR,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Brand",maxMenuHeight:200,filterOption:h.GI})]}),(0,E.jsxs)("div",{className:"col-6 p-2",children:[(0,E.jsx)("label",{children:"Group"}),(0,E.jsx)(R.Ay,{value:{value:f.GroupID,label:f.Group},onChange:e=>S(l=>(0,a.A)((0,a.A)({},l),{},{GroupID:e.value,Group:e.label})),options:[{value:"",label:"select",isDisabled:!0},..._.filter(e=>!f.BrandID||(0,h.id)(e.Brand,f.BrandID)).reduce((e,l)=>(e.some(e=>e.value===l.Product_Group)||e.push({value:l.Product_Group,label:l.Pro_Group}),e),[])],styles:B.MR,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Group",maxMenuHeight:200,filterOption:h.GI})]}),(0,E.jsxs)("div",{className:"col-md-8 p-2",children:[(0,E.jsxs)("label",{children:["Item Name ",(0,E.jsx)(P.A,{})]}),(0,E.jsx)(R.Ay,{value:{value:f.Item_Id,label:null===(l=w(f.Item_Id))||void 0===l?void 0:l.Product_Name},isDisabled:(0,h.IQ)(f.Pre_Id),menuPortalTarget:document.body,onChange:e=>{const l=w(e.value);S(t=>{var s,n,d,r,o,i,c;return(0,a.A)((0,a.A)({},t),{},{Group:null!==(s=l.Pro_Group)&&void 0!==s?s:t.Group,GroupID:null!==(n=l.Product_Group)&&void 0!==n?n:t.GroupID,Brand:null!==(d=l.Brand_Name)&&void 0!==d?d:t.Brand,BrandID:null!==(r=l.Brand)&&void 0!==r?r:t.BrandID,Item_Id:e.value,Item_Rate:null!==(o=l.Item_Rate)&&void 0!==o?o:0,Bill_Qty:0,Amount:0,Unit_Id:null!==(i=l.UOM_Id)&&void 0!==i?i:t.Unit_Id,Unit_Name:null!==(c=l.Units)&&void 0!==c?c:t.Unit_Name,HSN_Code:null===l||void 0===l?void 0:l.HSN_Code})})},options:[{value:"",label:"select",isDisabled:!0},...[..._.filter(e=>!f.BrandID||(0,h.id)(e.Brand,f.BrandID)).filter(e=>!f.GroupID||(0,h.id)(e.Product_Group,f.GroupID))].map(e=>({value:null===e||void 0===e?void 0:e.Product_Id,label:null===e||void 0===e?void 0:e.Product_Name,isDisabled:-1!==d.findIndex(l=>(0,h.id)(null===l||void 0===l?void 0:l.Item_Id,null===e||void 0===e?void 0:e.Product_Id))}))],styles:B.MR,isSearchable:!0,required:!0,placeholder:"Select Product",maxMenuHeight:200,filterOption:h.GI})]}),(0,E.jsxs)("div",{className:"col-md-4 p-2",children:[(0,E.jsx)("label",{children:"Godown"}),(0,E.jsx)(R.Ay,{value:{value:null===f||void 0===f?void 0:f.Location_Id,label:(null===(t=j.find(e=>(0,h.id)(e.Godown_Id,null===f||void 0===f?void 0:f.Location_Id)))||void 0===t?void 0:t.Godown_Name)||""},onChange:e=>S(l=>(0,a.A)((0,a.A)({},l),{},{Location_Id:e.value})),options:[{value:"",label:"select",isDisabled:!0},...(0,h.$r)(j).map(e=>({value:null===e||void 0===e?void 0:e.Godown_Id,label:null===e||void 0===e?void 0:e.Godown_Name}))],styles:B.MR,isDisabled:!(0,h.IQ)(null===f||void 0===f?void 0:f.Item_Id),menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Godown",filterOption:h.GI})]}),(0,E.jsxs)("div",{className:"col-md-6 p-2",children:[(0,E.jsx)("label",{children:"Actual Quantity "}),(0,E.jsx)("input",{value:f.Act_Qty?f.Act_Qty:"",onInput:h.BE,disabled:!(0,h.IQ)(f.Item_Id),onChange:e=>{G.current="QTY";const l=null===O||void 0===O?void 0:O.PackGet,t=(0,h.SX)(e.target.value,l);S(l=>(0,a.A)((0,a.A)({},l),{},{Act_Qty:e.target.value,Bill_Qty:e.target.value,Alt_Act_Qty:t,Alt_Bill_Qty:t}))},required:!0,className:"cus-inpt"})]}),(0,E.jsxs)("div",{className:"col-md-6 p-2",children:[(0,E.jsx)("label",{children:"Alt Act Quantity"}),(0,E.jsx)("input",{value:f.Alt_Act_Qty||"",className:"cus-inpt",type:"number",onChange:e=>{G.current="QTY";const l=null===O||void 0===O?void 0:O.PackGet,t=(0,h.JH)(e.target.value,l);S(l=>(0,a.A)((0,a.A)({},l),{},{Alt_Act_Qty:e.target.value,Alt_Bill_Qty:e.target.value,Act_Qty:t,Bill_Qty:t}))}})]}),(0,E.jsxs)("div",{className:"col-md-6 p-2",children:[(0,E.jsxs)("label",{children:["Bill Quantity ",(0,E.jsx)(P.A,{})]}),(0,E.jsx)("input",{required:!0,value:f.Bill_Qty?f.Bill_Qty:"",onInput:h.BE,disabled:!(0,h.IQ)(f.Item_Id),onChange:e=>{G.current="QTY";const l=null===O||void 0===O?void 0:O.PackGet,t=(0,h.SX)(e.target.value,l);S(l=>(0,a.A)((0,a.A)({},l),{},{Bill_Qty:e.target.value,Alt_Bill_Qty:t}))},className:"cus-inpt",min:1})]}),(0,E.jsxs)("div",{className:"col-md-6 p-2",children:[(0,E.jsx)("label",{children:"Alt Bill Quantity"}),(0,E.jsx)("input",{value:f.Alt_Bill_Qty||"",className:"cus-inpt",type:"number",onChange:e=>{G.current="QTY";const l=null===O||void 0===O?void 0:O.PackGet;S(t=>(0,a.A)((0,a.A)({},t),{},{Alt_Bill_Qty:e.target.value,Bill_Qty:(0,h.JH)(e.target.value,l)}))}})]}),(0,E.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,E.jsx)("label",{children:"Rate "}),(0,E.jsx)("input",{value:f.Item_Rate||"",onInput:h.BE,disabled:!(0,h.IQ)(f.Item_Id),onChange:e=>{return l=e.target.value,G.current="RATE",void S(e=>(0,a.A)((0,a.A)({},e),{},{Item_Rate:l}));var l},required:!0,className:"cus-inpt"})]}),(0,E.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,E.jsx)("label",{children:"UOM"}),(0,E.jsxs)("select",{value:Object.hasOwn(f,"UOM")?f.UOM:Object.hasOwn(f,"Unit_Id")?f.Unit_Id:"",onChange:e=>{const l=e.target.selectedIndex,t=e.target.options[l].text,s=e.target.value;S(e=>(0,a.A)((0,a.A)({},e),{},{UOM:s,Unit_Id:s,Units:t,Unit_Name:t}))},className:"cus-inpt",disabled:!(0,h.IQ)(f.Item_Id),children:[(0,E.jsx)("option",{value:"",disabled:!0,children:"select"}),x.map((e,l)=>(0,E.jsx)("option",{value:e.Unit_Id,children:e.Units},l))]})]}),(0,E.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,E.jsx)("label",{children:"Amount"}),(0,E.jsx)("input",{required:!0,value:f.Amount||"",onInput:h.BE,disabled:!(0,h.IQ)(f.Item_Id),onChange:e=>{return l=e.target.value,G.current="AMOUNT",void S(e=>(0,a.A)((0,a.A)({},e),{},{Amount:l}));var l},className:"cus-inpt",min:1})]}),(0,E.jsxs)("div",{className:"col-lg-4 col-md-6 p-2",children:[(0,E.jsx)("label",{children:"Batch"}),(0,E.jsx)("input",{value:f.Batch_No?f.Batch_No:"",disabled:!(0,h.IQ)(f.Item_Id),onChange:e=>S(l=>(0,a.A)((0,a.A)({},l),{},{Batch_No:e.target.value})),className:"cus-inpt"})]})]})}),(0,E.jsxs)(C.A,{className:"d-flex justify-content-between align-items-center",children:[(0,E.jsx)(o.A,{onClick:()=>S(y),type:"button",startIcon:(0,E.jsx)(T.A,{}),children:"Clear"}),(0,E.jsxs)("span",{children:[(0,E.jsx)(o.A,{type:"button",onClick:L,children:"cancel"}),(0,E.jsx)(o.A,{type:"submit",variant:"outlined",children:"Add"})]})]})]})]})]})},Q=e=>{let{baseData:l,StaffArray:t,setStaffArray:s,staffRowDetails:n}=e;return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("div",{className:"col-xxl-3 col-lg-4 col-md-5 p-2",children:(0,E.jsxs)("div",{className:"border p-2",style:{minHeight:"30vh",height:"100%"},children:[(0,E.jsxs)("div",{className:"d-flex align-items-center flex-wrap mb-2 border-bottom pb-2",children:[(0,E.jsx)("h6",{className:"flex-grow-1 m-0",children:"Staff Involved"}),(0,E.jsx)(o.A,{variant:"outlined",color:"primary",type:"button",onClick:()=>s([...t,(0,a.A)({},n)]),children:"Add"})]}),(0,E.jsxs)("table",{className:"table table-bordered",children:[(0,E.jsx)("thead",{children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("th",{className:"fa-13",children:"Sno"}),(0,E.jsx)("th",{className:"fa-13",children:"Staff Name"}),(0,E.jsx)("th",{className:"fa-13",children:"Category"}),(0,E.jsx)("th",{className:"fa-13",children:"#"})]})}),(0,E.jsx)("tbody",{children:t.map((e,n)=>(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{className:"fa-13 vctr text-center",children:n+1}),(0,E.jsx)("td",{className:"fa-13 w-100 p-0",children:(0,E.jsx)(R.Ay,{value:{value:null===e||void 0===e?void 0:e.Involved_Emp_Id,label:null===e||void 0===e?void 0:e.Involved_Emp_Name},onChange:e=>s(t=>t.map((t,s)=>{if((0,h.id)(s,n)){const s=l.staff.find(l=>(0,h.id)(l.Cost_Center_Id,e.value));return(0,a.A)((0,a.A)({},t),{},{Cost_Center_Type_Id:(0,h.IQ)(t.Cost_Center_Type_Id)?Number(t.Cost_Center_Type_Id):(0,h.IQ)(s.User_Type)?Number(s.User_Type):0,Involved_Emp_Id:Number(e.value),Involved_Emp_Name:e.label})}return t})),options:[...l.staff.filter(e=>!t.some(l=>(0,h.id)(l.Involved_Emp_Id,e.Cost_Center_Id)))].map(e=>({value:e.Cost_Center_Id,label:e.Cost_Center_Name})),styles:B.MR,isSearchable:!0,placeholder:"Select Staff",filterOption:h.GI})}),(0,E.jsx)("td",{className:"fa-13 vctr p-0",style:{maxWidth:"130px",minWidth:"100px"},children:(0,E.jsxs)("select",{value:null===e||void 0===e?void 0:e.Cost_Center_Type_Id,onChange:e=>s(l=>l.map((l,t)=>(0,h.id)(t,n)?(0,a.A)((0,a.A)({},l),{},{Cost_Center_Type_Id:e.target.value}):l)),className:"cus-inpt p-2 border-0",children:[(0,E.jsx)("option",{value:"",children:"Select"}),l.staffType.map((e,l)=>(0,E.jsx)("option",{value:null===e||void 0===e?void 0:e.Cost_Category_Id,children:null===e||void 0===e?void 0:e.Cost_Category},l))]})}),(0,E.jsx)("td",{className:"fa-13 vctr p-0",children:(0,E.jsx)(c.A,{onClick:()=>{s(e=>e.filter((e,l)=>n!==l))},size:"small",children:(0,E.jsx)(p.A,{color:"error"})})})]},n))})]})]})})})},G=e=>{let{invoiceDetails:l,setInvoiceDetails:t,baseData:s,selectedItems:n,setSelectedItems:d,searchFromArrival:r,inputStyle:o}=e;return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("div",{className:"col-xxl-9 col-lg-8 col-md-7 py-2 px-0",children:(0,E.jsxs)("div",{className:"border px-3 py-1",style:{minHeight:"30vh",height:"100%"},children:[(0,E.jsxs)("div",{className:"row",children:[(0,E.jsxs)("div",{className:"col-sm-8 p-2",children:[(0,E.jsx)("label",{className:"fa-13",children:"Vendor"}),(0,E.jsx)(R.Ay,{value:{value:null===l||void 0===l?void 0:l.Retailer_Id,label:null===l||void 0===l?void 0:l.Retailer_Name},onChange:e=>{t(l=>(0,a.A)((0,a.A)({},l),{},{Retailer_Id:e.value,Retailer_Name:e.label})),d([]),r(e.value)},options:[{value:"",label:"Search",isDisabled:!0},...s.retailers.map(e=>({value:null===e||void 0===e?void 0:e.Retailer_Id,label:null===e||void 0===e?void 0:e.Retailer_Name}))],styles:B.MR,isSearchable:!0,placeholder:"Select Vendor",maxMenuHeight:300,filterOption:h.GI})]}),(0,E.jsxs)("div",{className:"col-sm-4 p-2",children:[(0,E.jsx)("label",{className:"fa-13",children:"Voucher Type"}),(0,E.jsxs)("select",{value:l.Voucher_Type,onChange:e=>t(l=>(0,a.A)((0,a.A)({},l),{},{Voucher_Type:e.target.value})),className:o,required:!0,children:[(0,E.jsx)("option",{value:"",children:"Select"}),s.voucherType.filter(e=>(0,h.xL)(e.Type,"PURCHASE_INVOICE")).map((e,l)=>(0,E.jsx)("option",{value:e.Vocher_Type_Id,children:e.Voucher_Type},l))]})]}),(0,E.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsxs)("label",{className:"fa-13",children:["Branch ",(0,E.jsx)(P.A,{})]}),(0,E.jsxs)("select",{className:o,value:null===l||void 0===l?void 0:l.Branch_Id,required:!0,onChange:e=>t(l=>(0,a.A)((0,a.A)({},l),{},{Branch_Id:e.target.value})),children:[(0,E.jsx)("option",{value:"",children:"select"}),s.branch.map((e,l)=>(0,E.jsx)("option",{value:null===e||void 0===e?void 0:e.BranchId,children:null===e||void 0===e?void 0:e.BranchName},l))]})]}),(0,E.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsxs)("label",{className:"fa-13",children:["Entry Date ",(0,E.jsx)(P.A,{})]}),(0,E.jsx)("input",{value:null===l||void 0===l?void 0:l.Po_Entry_Date,type:"date",required:!0,className:o,onChange:e=>t(l=>(0,a.A)((0,a.A)({},l),{},{Po_Entry_Date:e.target.value}))})]}),(0,E.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsxs)("label",{className:"fa-13",children:["Bill Date ",(0,E.jsx)(P.A,{})]}),(0,E.jsx)("input",{value:null===l||void 0===l?void 0:l.Po_Inv_Date,type:"date",required:!0,className:o,onChange:e=>t(l=>(0,a.A)((0,a.A)({},l),{},{Po_Inv_Date:e.target.value}))})]}),(0,E.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsx)("label",{className:"fa-13",children:"Ref Number"}),(0,E.jsx)("input",{value:null===l||void 0===l?void 0:l.Ref_Po_Inv_No,className:o,onChange:e=>t(l=>(0,a.A)((0,a.A)({},l),{},{Ref_Po_Inv_No:e.target.value}))})]}),(0,E.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsxs)("label",{className:"fa-13",children:["GST Type ",(0,E.jsx)(P.A,{})]}),(0,E.jsxs)("select",{className:o,onChange:e=>t(l=>(0,a.A)((0,a.A)({},l),{},{GST_Inclusive:Number(e.target.value)})),value:l.GST_Inclusive,required:!0,children:[(0,E.jsx)("option",{value:1,children:"Inclusive Tax"}),(0,E.jsx)("option",{value:0,children:"Exclusive Tax"}),(0,E.jsx)("option",{value:2,children:"Not Taxable"})]})]}),(0,E.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsx)("label",{className:"fa-13",children:"Tax Type"}),(0,E.jsxs)("select",{className:o,onChange:e=>t(l=>(0,a.A)((0,a.A)({},l),{},{IS_IGST:Number(e.target.value)})),value:l.IS_IGST,children:[(0,E.jsx)("option",{value:"0",children:"GST"}),(0,E.jsx)("option",{value:"1",children:"IGST"})]})]}),(0,E.jsxs)("div",{className:"col-sm-6 p-2",children:[(0,E.jsx)("label",{className:"fa-13",children:"Stock Item Ledger Name"}),(0,E.jsx)(R.Ay,{value:{value:l.Stock_Item_Ledger_Name,label:l.Stock_Item_Ledger_Name},onChange:e=>t(l=>(0,a.A)((0,a.A)({},l),{},{Stock_Item_Ledger_Name:e.label})),options:[{value:"",label:"Search",isDisabled:!0},...s.stockItemLedgerName.map(e=>({value:null===e||void 0===e?void 0:e.Stock_Item_Ledger_Name,label:null===e||void 0===e?void 0:e.Stock_Item_Ledger_Name}))],styles:B.MR,required:!0,isSearchable:!0,placeholder:"Select",maxMenuHeight:300,filterOption:h.GI})]}),(0,E.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsx)("label",{className:"fa-13",children:"Discount (% or Amount)"}),(0,E.jsx)("input",{type:"number",className:o,value:l.Discount,onChange:e=>t(l=>(0,a.A)((0,a.A)({},l),{},{Discount:e.target.value})),placeholder:"ex: 10%, 20% || 250, 300"})]}),(0,E.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsx)("label",{className:"fa-13",children:"Quality Condition"}),(0,E.jsx)("input",{className:o,value:l.QualityCondition,onChange:e=>t(l=>(0,a.A)((0,a.A)({},l),{},{QualityCondition:e.target.value})),placeholder:"discribe the quality",maxLength:150})]}),(0,E.jsxs)("div",{className:"col-xl-3 col-md-4 col-sm-6 p-2",children:[(0,E.jsx)("label",{className:"fa-13",children:"Payment Days (in count)"}),(0,E.jsx)("input",{type:"number",className:o,value:l.PaymentDays,onChange:e=>t(l=>(0,a.A)((0,a.A)({},l),{},{PaymentDays:e.target.value})),placeholder:"ex: 30, 12"})]})]}),(0,E.jsx)("label",{className:"fa-13",children:"Narration"}),(0,E.jsx)("textarea",{className:"cus-inpt fa-14",rows:2,value:l.Narration,onChange:e=>t(l=>(0,a.A)((0,a.A)({},l),{},{Narration:e.target.value}))})]})})})},w=e=>{let{invoiceExpences:l=[],setInvoiceExpences:t,expenceMaster:s=[],IS_IGST:n,taxType:r,Total_Invoice_value:i=0}=e;return(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(d.A,{children:[(0,E.jsxs)("div",{className:"d-flex align-items-center justify-content-between flex-wrap px-3 py-2",children:[(0,E.jsx)("h5",{className:"m-0",children:"Expenses"}),(0,E.jsx)(o.A,{variant:"outlined",type:"button",onClick:()=>{t(e=>[...e,(0,a.A)((0,a.A)({},S),{},{Sno:e.length})])},children:"Add"})]}),(0,E.jsx)("div",{className:"table-responsive",children:(0,E.jsxs)("table",{className:"table table-bordered m-0",children:[(0,E.jsx)("thead",{className:"table-light",children:(0,E.jsx)("tr",{children:["S.No","Expense","Expense Value","Action"].map((e,l)=>(0,E.jsx)("th",{className:"fa-13 bg-light",children:e},l))})}),(0,E.jsxs)("tbody",{style:{fontSize:"13px"},children:[l.map((e,d)=>{var o;const u=(null===(o=s.find(l=>(0,h.id)(l.Id,null===e||void 0===e?void 0:e.Expense_Id)))||void 0===o?void 0:o.Expence_Name)||"";return(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:d+1}),(0,E.jsx)("td",{className:"p-0 vctr",style:{minWidth:"180px"},children:(0,E.jsx)(R.Ay,{value:{value:null===e||void 0===e?void 0:e.Expense_Id,label:u},onChange:e=>((e,l)=>{const n=s.find(e=>(0,h.id)(e.Id,l.value))||{},d=(0,h.gf)(null===n||void 0===n?void 0:n.percentageValue)?(0,h.Nj)(i,n.percentageValue):0;t(l=>l.map((l,t)=>t!==e?l:(0,a.A)((0,a.A)({},l),{},{Expense_Id:n.Id,Expence_Value:(0,h.e3)(d)})))})(d,e),options:s.filter(t=>!!(0,h.id)(t.Id,null===e||void 0===e?void 0:e.Expense_Id)||!l.some((e,l)=>l!==d&&(0,h.id)(e.Expense_Id,t.Id))).map(e=>({value:e.Id,label:e.Expence_Name})),styles:B.MR,menuPortalTarget:document.body,isSearchable:!0,placeholder:"Select Expense",filterOption:h.GI})}),(0,E.jsx)("td",{className:"p-0 vctr",children:(0,E.jsx)("input",{onInput:h.rV,className:"cus-inpt p-2 border-0",value:e.Expence_Value||"",disabled:!(0,h.IQ)(e.Expense_Id),onChange:e=>{((e,l,s)=>{t(t=>t.map((t,d)=>{if(d!==e)return t;const o=(0,a.A)((0,a.A)({},t),{},{[l]:s});if("Expence_Value"===l){const e=t.Cgst?(0,h.Ro)(t.Cgst):0,l=t.Sgst?(0,h.Ro)(t.Sgst):0,a=t.Igst?(0,h.Ro)(t.Igst):0,d=(0,h.Ro)(s),i=n?a:(0,h.Lr)(e,l),c=(0,N.v)(d,i,r);o.Cgst_Amo=e>0&&!n?c.cgst_amount:0,o.Sgst_Amo=l>0&&!n?c.sgst_amount:0,o.Igst_Amo=a>0&&n?c.igst_amount:0}if("Igst"===l){const e=n?(0,h.Ro)(s):0,l=n?0:(0,h.SX)((0,h.Ro)(s),2),a=n?0:(0,h.SX)((0,h.Ro)(s),2),d=(0,h.Ro)(t.Expence_Value),i=n?e:(0,h.Lr)(l,a),c=(0,N.v)(d,i,r);o.Cgst=l,o.Sgst=a,o.Cgst_Amo=l>0?c.cgst_amount:0,o.Sgst_Amo=a>0?c.sgst_amount:0,o.Igst_Amo=e>0?c.igst_amount:0}return o}))})(d,"Expence_Value",e.target.value)}})}),(0,E.jsx)("td",{className:"p-0 vctr  text-center ",children:(0,E.jsx)(c.A,{onClick:()=>(e=>{t(l=>l.filter((l,t)=>t!==e))})(d),size:"small",children:(0,E.jsx)(p.A,{color:"error",fontSize:"small"})})})]},d)}),0===l.length&&(0,E.jsx)("tr",{children:(0,E.jsx)("td",{className:"text-center",colSpan:6,children:"No rows"})})]})]})})]})})},O=function(){var e;let l=arguments.length>1?arguments[1]:void 0;return null!==(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(e=>(0,h.id)(e.Product_Id,l)))&&void 0!==e?e:{}},L={addProductDialog:!1,selectArrivalDialog:!1},U=e=>{var l,t,g;let{loadingOn:A,loadingOff:S}=e;const C=(0,j.zy)(),T=(0,j.Zp)(),P=C.state,[R,B]=(0,s.useState)(b),[U,k]=(0,s.useState)([]),[M,V]=(0,s.useState)([]),[F,H]=(0,s.useState)([]),[z,q]=(0,s.useState)([]),[W,X]=(0,s.useState)(null),J="border fa-14 vctr",Y="cus-inpt p-2",Z=(0,h.id)(null===R||void 0===R?void 0:R.GST_Inclusive,1),$=(0,h.id)(null===R||void 0===R?void 0:R.GST_Inclusive,2),K=(0,h.id)(null===R||void 0===R?void 0:R.IS_IGST,1),ee=$?"zerotax":Z?"remove":"add",[le,te]=(0,s.useState)(L),[ae,se]=(0,s.useState)(!1),[ne,de]=(0,s.useState)({retailers:[],branch:[],uom:[],products:[],voucherType:[],stockItemLedgerName:[],godown:[],staff:[],staffType:[],brand:[],defaultAccounts:[]}),re=(0,s.useMemo)(()=>(F||[]).reduce((e,l)=>(0,h.Lr)(e,null===l||void 0===l?void 0:l.Expence_Value),0),[F]),oe=(0,s.useMemo)(()=>{const e=U.reduce((e,l)=>{const t=(0,h.e3)(null===l||void 0===l?void 0:l.Amount);if($)return(0,h.Lr)(e,t);const a=O(ne.products,l.Item_Id),s=K?a.Igst_P:a.Gst_P;return Z?(0,h.Lr)(e,(0,N.v)(t,s,"remove").with_tax):(0,h.Lr)(e,(0,N.v)(t,s,"add").with_tax)},0);return(0,h.Lr)(e,re)},[U,$,ne.products,K,Z,re]),ie=(0,s.useMemo)(()=>{if(!U||0===U.length)return{};let e=0,l=0;U.forEach(t=>{const a=(0,h.e3)((null===t||void 0===t?void 0:t.Amount)||0);if($)return void(e=(0,h.Lr)(e,a));const s=O(ne.products,t.Item_Id),n=(0,h.id)(K,1)?s.Igst_P:s.Gst_P,d=(0,N.v)(a,n,Z?"remove":"add");e=(0,h.Lr)(e,parseFloat(d.without_tax)),l=(0,h.Lr)(l,parseFloat(d.tax_amount))});const t=(0,h.Lr)(e,l),a=(0,h.Lr)(t,re),s=Math.round(a),n=(0,h.e3)(s-a),d=(0,h.id)(K,1)?0:(0,h.e3)(l/2),r=(0,h.id)(K,1)?0:(0,h.e3)(l/2),o=(0,h.id)(K,1)?(0,h.e3)(l):0;return{totalTaxable:(0,h.e3)(e),totalTax:(0,h.e3)(l),cgst:d,sgst:r,igst:o,roundOff:n,invoiceTotal:s}},[U,ne.products,K,$,Z,re]);(0,s.useEffect)(()=>{(async()=>{try{A&&A();const[e,l,t,s,d,r,o,i,c,u]=await Promise.all([(0,n.z)({address:"masters/retailers/dropDown"}),(0,n.z)({address:"masters/branch/dropDown"}),(0,n.z)({address:"masters/uom"}),(0,n.z)({address:"masters/products"}),(0,n.z)({address:"masters/voucher?module=PURCHASE_INVOICE"}),(0,n.z)({address:"purchase/stockItemLedgerName?type=PURCHASE_INVOICE"}),(0,n.z)({address:"dataEntry/godownLocationMaster"}),(0,n.z)({address:"dataEntry/costCenter"}),(0,n.z)({address:"dataEntry/costCenter/category"}),(0,n.z)({address:"masters/defaultAccountMaster?Type=PURCHASE_INVOICE"})]),m=(e.success?e.data:[]).sort((e,l)=>String(null===e||void 0===e?void 0:e.Retailer_Name).localeCompare(null===l||void 0===l?void 0:l.Retailer_Name)),v=(l.success?l.data:[]).sort((e,l)=>String(null===e||void 0===e?void 0:e.BranchName).localeCompare(null===l||void 0===l?void 0:l.BranchName)),_=(t.success?t.data:[]).sort((e,l)=>String(e.Units).localeCompare(l.Units)),p=(s.success?s.data:[]).sort((e,l)=>String(null===e||void 0===e?void 0:e.Product_Name).localeCompare(null===l||void 0===l?void 0:l.Product_Name)),x=(d.success?d.data:[]).sort((e,l)=>String(null===e||void 0===e?void 0:e.Voucher_Type).localeCompare(null===l||void 0===l?void 0:l.Voucher_Type)),I=(r.success?r.data:[]).sort((e,l)=>String(null===e||void 0===e?void 0:e.Stock_Item_Ledger_Name).localeCompare(null===l||void 0===l?void 0:l.Stock_Item_Ledger_Name)),j=(o.success?o.data:[]).sort((e,l)=>String(null===e||void 0===e?void 0:e.Godown_Name).localeCompare(null===l||void 0===l?void 0:l.Godown_Name)),N=(i.success?i.data:[]).sort((e,l)=>String(null===e||void 0===e?void 0:e.Cost_Center_Name).localeCompare(null===l||void 0===l?void 0:l.Cost_Center_Name)),g=(c.success?c.data:[]).sort((e,l)=>String(null===e||void 0===e?void 0:e.Cost_Category).localeCompare(null===l||void 0===l?void 0:l.Cost_Category)),b=(u.success?u.data:[]).sort((e,l)=>String(null===e||void 0===e?void 0:e.Account_Name).localeCompare(null===l||void 0===l?void 0:l.Account_Name));de(e=>(0,a.A)((0,a.A)({},e),{},{retailers:m,branch:v,uom:_,products:p,voucherType:x,stockItemLedgerName:I,godown:j,staff:N,staffType:g,brand:(0,h.Mn)(p,"Brand",["Brand_Name"]),defaultAccounts:b.map(e=>({Id:e.Acc_Id,Expence_Name:e.Account_Name,percentageValue:e.percentageValue}))}))}catch(e){console.error("Error fetching data:",e)}finally{S&&S()}})()},[]),(0,s.useEffect)(()=>{if((0,h.aF)(P)&&Array.isArray(null===P||void 0===P?void 0:P.orderInfo)&&Array.isArray(null===P||void 0===P?void 0:P.staffInfo)&&(0,h.aF)(null===P||void 0===P?void 0:P.invoiceInfo)){const{invoiceInfo:e,orderInfo:l,staffInfo:t}=P;ce(e.Retailer_Id),B(Object.fromEntries(Object.entries(b).map(l=>{var t;let[a,s]=l;return"Po_Inv_Date"===a||"Po_Entry_Date"===a?[a,e[a]?(0,h.ny)(e[a]):s]:[a,null!==(t=e[a])&&void 0!==t?t:s]}))),k(l.map(e=>Object.fromEntries(Object.entries(y).map(l=>{var t;let[a,s]=l;return"Item_Name"===a?[a,e.Product_Name||s]:[a,null!==(t=e[a])&&void 0!==t?t:s]})))),V(t.map(e=>Object.fromEntries(Object.entries(f).map(l=>{var t;let[a,s]=l;return[a,null!==(t=e[a])&&void 0!==t?t:s]})))),se(!e.isFromPurchaseOrder)}console.log(P)},[P]);const ce=e=>{(0,h.IQ)(e)&&(A&&A(),q([]),(0,n.z)({address:"dataEntry/purchaseOrderEntry/delivery/partyBased?VendorId=".concat(e)}).then(e=>{e.success&&q(e.data)}).catch(e=>console.error(e)).finally(()=>{S&&S()}))},ue=(e,l)=>{k(t=>{const a=t.filter(l=>!((0,h.id)(null===l||void 0===l?void 0:l.OrderId,null===e||void 0===e?void 0:e.OrderId)&&(0,h.id)(null===l||void 0===l?void 0:l.Item_Id,null===e||void 0===e?void 0:e.ItemId)&&(0,h.id)(null===l||void 0===l?void 0:l.DeliveryId,null===e||void 0===e?void 0:e.Trip_Item_SNo)));if(l)return a;{const l=z.filter(l=>(0,h.id)(l.OrderId,e.OrderId)&&(0,h.id)(null===e||void 0===e?void 0:e.ItemId,null===l||void 0===l?void 0:l.ItemId)&&(0,h.id)(null===e||void 0===e?void 0:e.Trip_Item_SNo,null===l||void 0===l?void 0:l.Trip_Item_SNo)),t=[...new Map(l.flatMap(e=>e.EmployeesInvolved).filter(e=>!M.some(l=>(0,h.id)(l.Involved_Emp_Id,e.EmployeeId))).map(e=>[e.EmployeeId,e])).values()];t.length>0&&V(e=>[...e,...t.map(e=>Object.fromEntries(Object.entries(f).map(l=>{let[t,a]=l;switch(t){case"Involved_Emp_Id":return[t,null===e||void 0===e?void 0:e.EmployeeId];case"Involved_Emp_Name":return[t,null===e||void 0===e?void 0:e.EmployeeName];case"Cost_Center_Type_Id":return[t,null===e||void 0===e?void 0:e.CostType];default:return[t,a]}})))]);const s=l.map(e=>{var l,t;const a=O(ne.products,e.ItemId),s=K?a.Igst_P:a.Gst_P,n=s>0,d=null!==(l=parseFloat(e.Weight))&&void 0!==l?l:0,r=null!==(t=(0,h.e3)(e.BilledRate))&&void 0!==t?t:0,o=(0,h.JH)(d,r),i=(0,N.v)(r,s,ee),c=(0,N.v)(o,s,ee),u=K?0:c.cgst_per,m=K?c.igst_per:0,v=K?0:c.cgst_amount,_=K?c.igst_amount:0,p=null===a||void 0===a?void 0:a.PackGet,x=parseInt((0,h.SX)(null===e||void 0===e?void 0:e.pendingInvoiceWeight,p));return Object.fromEntries(Object.entries(y).map(l=>{var t;let[p,h]=l;switch(p){case"DeliveryId":return[p,Number(null===e||void 0===e?void 0:e.Trip_Item_SNo)];case"OrderId":return[p,Number(null===e||void 0===e?void 0:e.OrderId)];case"Po_Inv_Date":return[p,null===R||void 0===R?void 0:R.Po_Inv_Date];case"Location_Id":return[p,null!==(t=Number(null===e||void 0===e?void 0:e.LocationId))&&void 0!==t?t:""];case"Item_Id":return[p,Number(null===e||void 0===e?void 0:e.ItemId)];case"Item_Name":return[p,null===a||void 0===a?void 0:a.Product_Name];case"Unit_Id":return[p,null===a||void 0===a?void 0:a.UOM_Id];case"Unit_Name":return[p,null===a||void 0===a?void 0:a.Units];case"Bill_Qty":return[p,null===e||void 0===e?void 0:e.pendingInvoiceWeight];case"Act_Qty":case"Total_Qty":return[p,d];case"Item_Rate":return[p,r];case"Bill_Alt_Qty":return[p,Number(null===e||void 0===e?void 0:e.Quantity)];case"Alt_Act_Qty":return[p,x];case"Batch_No":return[p,null===e||void 0===e?void 0:e.BatchLocation];case"Amount":return[p,o];case"Taxable_Rate":return[p,i.base_amount];case"Taxble":return[p,n?1:0];case"HSN_Code":return[p,a.HSN_Code];case"Taxable_Amount":return[p,c.base_amount];case"Tax_Rate":return[p,s];case"Cgst":case"Sgst":return[p,null!==u&&void 0!==u?u:0];case"Cgst_Amo":case"Sgst_Amo":return[p,$?0:v];case"Igst":return[p,null!==m&&void 0!==m?m:0];case"Igst_Amo":return[p,$?0:_];case"Final_Amo":return[p,c.with_tax];default:return[p,h]}}))});return a.concat(s)}})},me=()=>{te(L)},ve=(e,l,t)=>{k(s=>s.map((s,n)=>{if((0,h.id)(n,e))switch(l){case"Bill_Qty":{const e=parseFloat(t||0),l=(0,a.A)((0,a.A)({},s),{},{Bill_Qty:e});return s.Item_Rate?l.Amount=(0,h.JH)(s.Item_Rate,e):s.Amount&&(l.Item_Rate=(0,h.SX)(s.Amount,e)),l}case"Item_Rate":{const e=parseFloat(t||0),l=(0,a.A)((0,a.A)({},s),{},{Item_Rate:e});return s.Bill_Qty&&(l.Amount=(0,h.JH)(e,s.Bill_Qty)),l}case"Amount":{const e=parseFloat(t||0),l=(0,a.A)((0,a.A)({},s),{},{Amount:e});return s.Bill_Qty&&(l.Item_Rate=(0,h.SX)(e,s.Bill_Qty)),l}default:return(0,a.A)((0,a.A)({},s),{},{[l]:t})}return s}))},_e=()=>{A&&A(),(0,n.z)({address:"purchase/purchaseOrder",method:(0,h.IQ)(null===R||void 0===R?void 0:R.PIN_Id)?"PUT":"POST",bodyData:(0,a.A)({Product_Array:U,StaffArray:M,Expence_Array:F},R)}).then(e=>{e.success?(k([]),B(b),q([]),V([]),H([]),I.oR.success((null===e||void 0===e?void 0:e.message)||"Saved"),(Array.isArray(null===P||void 0===P?void 0:P.orderInfo)||(0,h.aF)(null===P||void 0===P?void 0:P.invoiceInfo))&&window.history.length>1?T(-1):T(C.pathname,{replace:!0,state:null})):I.oR.error((null===e||void 0===e?void 0:e.message)||"Request Failed")}).catch(e=>console.error(e)).finally(()=>{S&&S()})};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(D,{orderProducts:U,setOrderProducts:k,open:le.addProductDialog,onClose:()=>{te(e=>(0,a.A)((0,a.A)({},e),{},{addProductDialog:!1})),X(null)},products:ne.products,brands:ne.brand,uom:ne.uom,godowns:ne.godown,GST_Inclusive:Z,IS_IGST:K,editValues:W,initialValue:y,stockInGodown:[]}),(0,E.jsx)("form",{onSubmit:e=>{e.preventDefault(),_e()},children:(0,E.jsxs)(d.A,{children:[(0,E.jsxs)("div",{className:"d-flex flex-wrap align-items-center border-bottom py-2 px-3",children:[(0,E.jsx)("span",{className:"flex-grow-1 fa-16 fw-bold",children:"Purchase Invoice Creation"}),(0,E.jsxs)("span",{children:[(0,E.jsx)("label",{htmlFor:"",children:"Manual Invoice"}),(0,E.jsx)(r.A,{checked:ae,onChange:e=>{se(e.target.checked),k([])}}),(0,E.jsx)(o.A,{type:"button",onClick:()=>{(Array.isArray(null===P||void 0===P?void 0:P.orderInfo)||(0,h.aF)(null===P||void 0===P?void 0:P.invoiceInfo))&&window.history.length>1?T(-1):T("/erp/purchase/invoice")},children:"Cancel"}),(0,E.jsx)(o.A,{type:"submit",variant:"contained",children:"submit"})]})]}),(0,E.jsxs)(i.A,{children:[(0,E.jsxs)("div",{className:"row",children:[(0,E.jsx)(Q,{baseData:ne,StaffArray:M,setStaffArray:V,staffRowDetails:f}),(0,E.jsx)(G,{invoiceDetails:R,setInvoiceDetails:B,baseData:ne,selectedItems:U,setSelectedItems:k,searchFromArrival:ce,inputStyle:Y})]}),(0,E.jsxs)("div",{className:"table-responsive",children:[(0,E.jsxs)("div",{className:"d-flex p-2 justify-content-end",children:[(0,E.jsx)(o.A,{type:"button",onClick:()=>k([]),children:"clear selected"}),(0,E.jsx)(o.A,{onClick:()=>{ae?(X(null),te(e=>(0,a.A)((0,a.A)({},e),{},{addProductDialog:!0}))):te(e=>(0,a.A)((0,a.A)({},e),{},{selectArrivalDialog:!0}))},variant:"outlined",type:"button",startIcon:(0,E.jsx)(_.A,{}),disabled:!(0,h.IQ)(R.Retailer_Id),children:"Add Product"})]}),(0,E.jsxs)("table",{className:"table",children:[(0,E.jsx)("thead",{children:(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{className:J,children:"SNo"}),(0,E.jsx)("td",{className:J,children:"Item"}),(0,E.jsx)("td",{className:J,children:"Rate"}),(0,E.jsx)("td",{className:J,children:"Bill Quantity"}),(0,E.jsx)("td",{className:J,children:"Acl Quantity"}),(0,E.jsx)("td",{className:J,children:"Unit"}),(0,E.jsx)("td",{className:J,children:"Amount"}),(0,E.jsx)("td",{className:J,children:"Godown Location"}),(0,E.jsx)("td",{className:J,children:"Batch"}),(0,E.jsx)("td",{className:J,children:"#"})]})}),(0,E.jsx)("tbody",{children:U.map((e,l)=>{var t;return(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{className:J,children:l+1}),(0,E.jsx)("td",{className:J,children:(null===e||void 0===e?void 0:e.Item_Name)||"Not found"}),(0,E.jsx)("td",{className:J,children:(0,E.jsx)("input",{value:null!==e&&void 0!==e&&e.Item_Rate?null===e||void 0===e?void 0:e.Item_Rate:"",type:"number",className:Y,onChange:e=>ve(l,"Item_Rate",e.target.value),required:!0})}),(0,E.jsx)("td",{className:J,children:(0,E.jsx)("input",{value:null!==e&&void 0!==e&&e.Bill_Qty?null===e||void 0===e?void 0:e.Bill_Qty:"",type:"number",className:Y,onChange:e=>ve(l,"Bill_Qty",e.target.value),required:!0})}),(0,E.jsx)("td",{className:J,children:(0,E.jsx)("input",{value:null!==(t=null===e||void 0===e?void 0:e.Act_Qty)&&void 0!==t?t:"",type:"number",className:Y,onChange:e=>ve(l,"Act_Qty",e.target.value),required:!0})}),(0,E.jsx)("td",{className:J,children:(0,E.jsxs)("select",{value:null===e||void 0===e?void 0:e.Unit_Id,className:Y,onChange:e=>{const t=e.target.selectedIndex,a=e.target.options[t].text,s=e.target.value;ve(l,"Unit_Id",s),ve(l,"Unit_Name",a)},required:!0,children:[(0,E.jsx)("option",{value:"",children:"select"}),ne.uom.map((e,l)=>(0,E.jsx)("option",{value:e.Unit_Id,children:e.Units},l))]})}),(0,E.jsx)("td",{className:J,children:(0,E.jsx)("input",{value:null!==e&&void 0!==e&&e.Amount?null===e||void 0===e?void 0:e.Amount:"",type:"number",className:Y,onChange:e=>ve(l,"Amount",e.target.value),required:!0})}),(0,E.jsx)("td",{className:J,children:(0,E.jsxs)("select",{value:null===e||void 0===e?void 0:e.Location_Id,className:Y,onChange:e=>ve(l,"Location_Id",e.target.value),children:[(0,E.jsx)("option",{value:"",children:"select"}),ne.godown.map((e,l)=>(0,E.jsx)("option",{value:null===e||void 0===e?void 0:e.Godown_Id,children:null===e||void 0===e?void 0:e.Godown_Name},l))]})}),(0,E.jsx)("td",{className:J,children:(0,E.jsx)("input",{value:null===e||void 0===e?void 0:e.Batch_No,className:Y,onChange:e=>ve(l,"Batch_No",e.target.value),disabled:(0,h.Ro)(null===e||void 0===e?void 0:e.DeliveryId)})}),(0,E.jsx)("td",{className:J,children:(0,E.jsx)(c.A,{onClick:()=>{k(e=>e.filter((e,t)=>l!==t))},size:"small",children:(0,E.jsx)(p.A,{color:"error"})})})]},l)})})]}),(0,E.jsx)("br",{}),(0,E.jsx)(w,{invoiceExpences:F,setInvoiceExpences:H,expenceMaster:ne.defaultAccounts,IS_IGST:K,taxType:ee,Total_Invoice_value:oe,invoiceProducts:U,findProductDetails:O,products:ne.products}),(0,E.jsx)("br",{}),(0,E.jsx)("table",{className:"table",children:(0,E.jsxs)("tbody",{children:[(0,E.jsxs)("tr",{children:[(0,E.jsxs)("td",{className:"border p-2",rowSpan:(0,h.id)(R.IS_IGST,1)?5:6,children:["Total in words: ",(0,h.GF)(parseInt(oe))]}),(0,E.jsx)("td",{className:"border p-2",children:"Total Taxable Amount"}),(0,E.jsx)("td",{className:"border p-2",children:ie.totalTaxable})]}),K?(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{className:"border p-2",children:"IGST"}),(0,E.jsx)("td",{className:"border p-2",children:ie.igst})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{className:"border p-2",children:"CGST"}),(0,E.jsx)("td",{className:"border p-2",children:ie.cgst})]}),(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{className:"border p-2",children:"SGST"}),(0,E.jsx)("td",{className:"border p-2",children:ie.sgst})]})]}),(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{className:"border p-2",children:"Total Expences"}),(0,E.jsx)("td",{className:"border p-2",children:(0,h.e3)(re)})]}),(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{className:"border p-2",children:"Round Off"}),(0,E.jsx)("td",{className:"border p-2",children:(0,E.jsx)("input",{value:R.Round_off,defaultValue:ie.roundOff,style:{minWidth:"200px",maxWidth:"350px"},className:"cus-inpt p-2",onInput:h.rV,onChange:e=>B(l=>(0,a.A)((0,a.A)({},l),{},{Round_off:e.target.value}))})})]}),(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{className:"border p-2",children:"Total"}),(0,E.jsx)("td",{className:"border p-2",children:(0,h.jG)(Math.round(oe))})]})]})})]})]})]})}),(0,E.jsxs)(u.A,{open:le.selectArrivalDialog,onClose:me,fullScreen:!0,children:[(0,E.jsxs)(m.A,{className:"d-flex flex-wrap align-items-center ",children:[(0,E.jsx)("span",{className:"flex-grow-1",children:"Select Purchase Order"}),(0,E.jsx)("span",{children:(0,E.jsx)(o.A,{onClick:me,type:"button",className:"me-2",children:"close"})})]}),(0,E.jsx)(v.A,{children:(0,E.jsx)(x.Ay,{dataArray:z,columns:[{isVisible:1,ColumnHeader:"#",isCustomCell:!0,Cell:e=>{let{row:l}=e;const t=-1!==U.findIndex(e=>(0,h.id)(null===e||void 0===e?void 0:e.DeliveryId,null===l||void 0===l?void 0:l.Trip_Item_SNo));return(0,E.jsx)("div",{children:(0,E.jsx)("input",{className:"form-check-input shadow-none pointer",style:{padding:"0.7em"},type:"checkbox",checked:t,onChange:()=>{t?ue(l,!0):ue(l)}})})}},(0,x.Lj)("ArrivalDate","date"),(0,x.Lj)("ItemName","string"),(0,x.Lj)("BilledRate","string"),{isVisible:1,ColumnHeader:"Weight",isCustomCell:!0,Cell:e=>{var l;let{row:t}=e;return(null!==(l=null===t||void 0===t?void 0:t.Weight)&&void 0!==l?l:0)+" "+(null===t||void 0===t?void 0:t.Units)}},(0,x.Lj)("pendingInvoiceWeight","number","Pending Tonnage"),(0,x.Lj)("Quantity","number"),(0,x.Lj)("PO_ID","string"),(0,x.Lj)("Location","string")],EnableSerialNumber:!0,disablePagination:!0,title:"Arrival Details of ".concat(null!==(l=null===(t=ne.retailers)||void 0===t||null===(g=t.find(e=>(0,h.id)(null===e||void 0===e?void 0:e.Retailer_Id,null===R||void 0===R?void 0:R.Retailer_Id)))||void 0===g?void 0:g.Retailer_Name)&&void 0!==l?l:"Not available"),maxHeightOption:!0})})]})]})}}}]);
//# sourceMappingURL=2821.cbdf67a0.chunk.js.map