"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[3036],{5542:(e,s,a)=>{a.r(s),a.d(s,{default:()=>O});var l=a(89379),d=a(65043),t=a(73216),n=a(17392),i=a(30279),o=a(32143),r=a(83462),c=a(26600),v=a(35316),u=a(29347),h=a(11906),_=a(12412),m=a(51962),p=a(67784),x=a(70141),T=a(51387),k=a(83560),j=a(52101),S=a(58293),A=a(65829),b=a(76447),g=(a(92342),a(91036)),N=a(20656),f=a(63406),y=a(34109),I=a(26581),D=a(60235),E=a(65074),C=a(97707),L=a(70579);const w=(0,L.jsx)(y.A,{fontSize:"small"}),M=(0,L.jsx)(I.A,{fontSize:"small"}),O=()=>{var e,s;const a=localStorage.getItem("user"),y=JSON.parse(a),I=(0,t.zy)(),O=null===(e=I.state)||void 0===e?void 0:e.project,G=null===(s=I.state)||void 0===s?void 0:s.rights,R=(0,t.Zp)(),P={Sch_Id:"",Sch_Date:(new Date).toISOString().split("T")[0],Project_Id:null===O||void 0===O?void 0:O.Project_Id,Sch_By:y.UserId,Sch_Type_Id:1,Sch_Est_Start_Date:(new Date).toISOString().split("T")[0],Sch_Est_End_Date:"",Sch_Status:1,Entry_By:y.UserId,Entry_Date:new Date},z={Sch_Project_Id:null===O||void 0===O?void 0:O.Project_Id,Sch_Id:"",Task_Levl_Id:"",Task_Id:"",Type_Task_Id:1,Task_Sch_Duaration:"01:00",Task_Start_Time:"10:00",Task_End_Time:"11:00",Task_Est_Start_Date:(new Date).toISOString().split("T")[0],Task_Est_End_Date:(new Date).toISOString().split("T")[0],Task_Sch_Status:1,Levl_Id:"",Task_Depend_Level_Id:"",TasksGet:"- Select Task -"},[B,F]=(0,d.useState)([]),[U,H]=(0,d.useState)([]),[q,W]=(0,d.useState)([]),[V,J]=(0,d.useState)([]),[Z,K]=(0,d.useState)([]),[Q,X]=(0,d.useState)([]),[Y,$]=(0,d.useState)([]),[ee,se]=(0,d.useState)([]),[ae,le]=(0,d.useState)(P),[de,te]=(0,d.useState)(z),[ne,ie]=(0,d.useState)(!1),[oe,re]=(0,d.useState)(!1),[ce,ve]=(0,d.useState)({scheduleCreate:!1,scheduleDelete:!1,taskSchedule:!1,taskDelete:!1});(0,d.useEffect)(()=>{(0,E.z)({address:"taskManagement/project/schedule?Project_Id=".concat(null===O||void 0===O?void 0:O.Project_Id)}).then(e=>{e.success&&J(e.data)}).catch(e=>console.error(e))},[oe,null===O||void 0===O?void 0:O.Project_Id]),(0,d.useEffect)(()=>{(0,E.z)({address:"masters/user/dropDown?Company_id=".concat(null===y||void 0===y?void 0:y.Company_id)}).then(e=>{e.success&&F(e.data)}).catch(e=>console.error(e)),(0,E.z)({address:"taskManagement/project/schedule/scheduleType"}).then(e=>{e.success&&H(e.data)}).catch(e=>console.error(e)),(0,E.z)({address:"taskManagement/statusList"}).then(e=>{e.success&&(e.data.sort((e,s)=>e.Status_Id-s.Status_Id),W(e.data))}).catch(e=>console.error(e)),(0,E.z)({address:"taskManagement/tasks/dropdown"}).then(e=>{e.success&&K(e.data)}).catch(e=>console.error(e)),(0,E.z)({address:"masters/taskType"}).then(e=>{e.success&&X(e.data)}).catch(e=>console.error(e))},[null===y||void 0===y?void 0:y.BranchId]),(0,d.useEffect)(()=>{const e=U.find(e=>Number(null===e||void 0===e?void 0:e.Sch_Type_Id)===Number(null===ae||void 0===ae?void 0:ae.Sch_Type_Id)),s=new Date,a=s.getDate();s.setDate(a+Number(null===e||void 0===e?void 0:e.Sch_Days)||0);const d=s.toISOString().split("T")[0];le(e=>(0,l.A)((0,l.A)({},e),{},{Sch_Est_End_Date:d}))},[null===ae||void 0===ae?void 0:ae.Sch_Est_Start_Date,null===ae||void 0===ae?void 0:ae.Sch_Type_Id,U]),(0,d.useEffect)(()=>{const[e,s]=null===de||void 0===de?void 0:de.Task_Start_Time.split(":").map(Number),[a,d]=null===de||void 0===de?void 0:de.Task_End_Time.split(":").map(Number),t=new Date(0,0,0,e,s),n=new Date(0,0,0,a,d);if(n>t){let e=Math.abs(n-t);const s=Math.floor(e/36e5);e%=36e5;const a=Math.floor(e/6e4),d=String(s).padStart(2,"0"),i=String(a).padStart(2,"0");te(e=>(0,l.A)((0,l.A)({},e),{},{Task_Sch_Duaration:"".concat(d,":").concat(i)}))}},[null===de||void 0===de?void 0:de.Task_Start_Time,null===de||void 0===de?void 0:de.Task_End_Time,null===de||void 0===de?void 0:de.Task_Id]),(0,d.useEffect)(()=>{if(ee.length>0){const e=ee.map(e=>null===e||void 0===e?void 0:e.Task_Levl_Id).join(",");te(s=>(0,l.A)((0,l.A)({},s),{},{Task_Depend_Level_Id:e}))}else te(e=>(0,l.A)((0,l.A)({},e),{},{Task_Depend_Level_Id:""}))},[ee]),(0,d.useEffect)(()=>{O&&G||R("/taskManagement/projectActivity")},[O,G,R]);const ue=e=>{e&&(le(e),ie(!0)),e||!0!==ce.scheduleCreate||(le(P),ie(!1)),ve((0,l.A)((0,l.A)({},ce),{},{scheduleCreate:!ce.scheduleCreate}))},he=(e,s)=>{s&&!e&&(te(s),ie(!0)),s||!0!==ce.taskSchedule||!0!==e||(te(z),$([]),se([]),ie(!1)),ve((0,l.A)((0,l.A)({},ce),{},{taskSchedule:!ce.taskSchedule}))},_e=e=>{le(e||P),ve((0,l.A)((0,l.A)({},ce),{},{scheduleDelete:!ce.scheduleDelete}))},me=e=>{te(e||z),ve((0,l.A)((0,l.A)({},ce),{},{taskDelete:!ce.taskDelete}))},pe=e=>["","bg-primary","bg-warning","bg-success","bg-danger"][Number(e)],xe=e=>{var s;let{obj:a,SNo:t}=e;const r=(0,d.useRef)(null),[c,v]=(0,d.useState)(0);(0,d.useEffect)(()=>{r.current&&v(r.current.offsetHeight)},[]);const u=(e,s)=>{const a=e.findIndex(e=>Number(e.Task_Levl_Id)===Number(s));return a>=0?a+1+". ":""},h=e=>{var s;let{gobj:t}=e;const[r,c]=(0,d.useState)(!1);return(0,L.jsxs)(d.Fragment,{children:[(0,L.jsxs)("h5",{className:"mt-2 mb-3",children:[(0,L.jsx)(n.A,{onClick:()=>c(!r),children:r?(0,L.jsx)(j.A,{sx:{fontSize:"20px",color:"black"}}):(0,L.jsx)(S.A,{sx:{fontSize:"20px",color:"black"}})}),(0,L.jsx)("span",{onClick:()=>c(!r),children:null!==t&&void 0!==t&&t.Task_Type?null===t||void 0===t?void 0:t.Task_Type:"Not Grouped"})]}),(0,L.jsx)(i.A,{in:r,unmountOnExit:!0,children:null===t||void 0===t||null===(s=t.TaskGroup)||void 0===s?void 0:s.map((e,s)=>(0,L.jsxs)("div",{className:"rounded-4 bg-light p-2 px-3 d-flex align-items-center mt-2",children:[(0,L.jsxs)("span",{className:"flex-grow-1 fw-bold",children:[s+1+". ",null===e||void 0===e?void 0:e.TaskNameGet]}),(0,L.jsxs)("span",{className:"fa-14 d-flex align-items-center",children:[(0,C.yc)(null===e||void 0===e?void 0:e.Task_Est_Start_Date),(0,L.jsx)("span",{className:"rounded-5 ms-2 ".concat(pe(null===e||void 0===e?void 0:e.Task_Sch_Status)),style:{padding:"5.2px"}}),(0,L.jsx)("span",{children:(0,L.jsxs)(D.A,{children:[(0,L.jsx)(D.A.Toggle,{variant:"success",id:"actions",className:"rounded-5 bg-transparent text-dark border-0 btn"}),(0,L.jsxs)(D.A.Menu,{children:[1===Number(null===G||void 0===G?void 0:G.edit)&&(0,L.jsxs)(o.A,{onClick:()=>{he(!1,{Sch_Project_Id:null===O||void 0===O?void 0:O.Project_Id,Sch_Id:null===a||void 0===a?void 0:a.Sch_Id,Task_Levl_Id:null===e||void 0===e?void 0:e.Task_Levl_Id,Task_Id:null===e||void 0===e?void 0:e.Task_Id,Type_Task_Id:null===e||void 0===e?void 0:e.Type_Task_Id,Task_Sch_Duaration:null===e||void 0===e?void 0:e.Task_Sch_Duaration,Task_Start_Time:null===e||void 0===e?void 0:e.Task_Start_Time,Task_End_Time:null===e||void 0===e?void 0:e.Task_End_Time,Task_Est_Start_Date:new Date(null===e||void 0===e?void 0:e.Task_Est_Start_Date).toISOString().split("T")[0],Task_Est_End_Date:new Date(null===e||void 0===e?void 0:e.Task_Est_End_Date).toISOString().split("T")[0],Task_Sch_Status:null===e||void 0===e?void 0:e.Task_Sch_Status,Levl_Id:1,Task_Depend_Level_Id:"",TasksGet:null===e||void 0===e?void 0:e.TaskNameGet})},children:[(0,L.jsx)(k.A,{className:"fa-in me-2 text-primary"}),"Edit"]}),1===Number(null===G||void 0===G?void 0:G.delete)&&(0,L.jsxs)(o.A,{onClick:()=>{me((0,l.A)((0,l.A)({},de),{},{Task_Levl_Id:null===e||void 0===e?void 0:e.Task_Levl_Id}))},children:[(0,L.jsx)(T.A,{className:"fa-in me-2 text-danger "}),"Delete"]}),(0,L.jsxs)(o.A,{onClick:()=>{var s;return R("taskActivity",{state:{taskDetails:(0,l.A)((0,l.A)({},e),{},{Project_Id:null===O||void 0===O?void 0:O.Project_Id,Sch_Id:null===a||void 0===a?void 0:a.Sch_Id}),rights:null===(s=I.state)||void 0===s?void 0:s.rights,retObj:I.state}})},children:[(0,L.jsx)(b.A,{className:"fa-in me-2 text-primary "}),"Open Task"]})]})]})})]})]},s))})]})},_=e=>{var s;let{gobjlvl2:t}=e;const[r,c]=(0,d.useState)(!1);return(0,L.jsxs)(d.Fragment,{children:[(0,L.jsxs)("h5",{className:"mt-2 mb-3",children:[(0,L.jsx)(n.A,{onClick:()=>c(!r),children:r?(0,L.jsx)(j.A,{sx:{fontSize:"20px",color:"black"}}):(0,L.jsx)(S.A,{sx:{fontSize:"20px",color:"black"}})}),(0,L.jsx)("span",{onClick:()=>c(!r),children:null!==t&&void 0!==t&&t.Task_Type?null===t||void 0===t?void 0:t.Task_Type:"Not Grouped"})]}),(0,L.jsx)(i.A,{in:r,unmountOnExit:!0,children:null===t||void 0===t||null===(s=t.TaskGroup)||void 0===s?void 0:s.map((e,s)=>{var d,t,n;return(0,L.jsxs)("div",{className:"rounded-4 bg-light py-2 px-3 mt-2",children:[(0,L.jsxs)("div",{className:"mb-0 d-flex align-items-center",children:[(0,L.jsxs)("span",{className:"flex-grow-1 fw-bold",children:[s+1+". ",null===e||void 0===e?void 0:e.TaskNameGet]}),(0,L.jsxs)("span",{className:"fa-14 d-flex align-items-center",children:[(0,C.yc)(null===e||void 0===e?void 0:e.Task_Est_Start_Date),(0,L.jsx)("span",{className:"rounded-5 ms-2 ".concat(pe(null===e||void 0===e?void 0:e.Task_Sch_Status)),style:{padding:"5.2px"}}),(0,L.jsx)("span",{children:(0,L.jsxs)(D.A,{children:[(0,L.jsx)(D.A.Toggle,{variant:"success",id:"actions",className:"rounded-5 bg-transparent text-dark border-0 btn"}),(0,L.jsxs)(D.A.Menu,{children:[1===Number(null===G||void 0===G?void 0:G.edit)&&(0,L.jsxs)(o.A,{onClick:()=>{var s;he(!1,{Sch_Project_Id:null===O||void 0===O?void 0:O.Project_Id,Sch_Id:null===a||void 0===a?void 0:a.Sch_Id,Task_Levl_Id:null===e||void 0===e?void 0:e.Task_Levl_Id,Task_Id:null===e||void 0===e?void 0:e.Task_Id,Type_Task_Id:null===e||void 0===e?void 0:e.Type_Task_Id,Task_Sch_Duaration:null===e||void 0===e?void 0:e.Task_Sch_Duaration,Task_Start_Time:null===e||void 0===e?void 0:e.Task_Start_Time,Task_End_Time:null===e||void 0===e?void 0:e.Task_End_Time,Task_Est_Start_Date:(0,C.ny)(null===e||void 0===e?void 0:e.Task_Est_Start_Date),Task_Est_End_Date:(0,C.ny)(null===e||void 0===e?void 0:e.Task_Est_End_Date),Task_Sch_Status:null===e||void 0===e?void 0:e.Task_Sch_Status,Levl_Id:2,Task_Depend_Level_Id:"",TasksGet:null===e||void 0===e?void 0:e.TaskNameGet}),se([...null===e||void 0===e||null===(s=e.DependancyTasks)||void 0===s?void 0:s.map(e=>({Task_Levl_Id:null===e||void 0===e?void 0:e.Task_Depend_Level_Id,TaskNameGet:null===e||void 0===e?void 0:e.TaskNameGet}))]),$(null===a||void 0===a?void 0:a.LevelOneTasks.flatMap(e=>null===e||void 0===e?void 0:e.TaskGroup))},children:[(0,L.jsx)(k.A,{className:"fa-in me-2 text-primary"}),"Edit"]}),1===Number(null===G||void 0===G?void 0:G.delete)&&(0,L.jsxs)(o.A,{onClick:()=>{me((0,l.A)((0,l.A)({},de),{},{Task_Levl_Id:null===e||void 0===e?void 0:e.Task_Levl_Id}))},children:[(0,L.jsx)(T.A,{className:"fa-in me-2 text-danger "}),"Delete"]}),(0,L.jsxs)(o.A,{onClick:()=>{var s;return R("taskActivity",{state:{taskDetails:(0,l.A)((0,l.A)({},e),{},{Project_Id:null===O||void 0===O?void 0:O.Project_Id,Sch_Id:null===a||void 0===a?void 0:a.Sch_Id}),rights:null===(s=I.state)||void 0===s?void 0:s.rights,retObj:I.state}})},children:[(0,L.jsx)(b.A,{className:"fa-in me-2 text-primary "}),"Open Task"]})]})]})})]})]}),(0,L.jsx)("hr",{className:"mt-0 mb-2"}),(null===e||void 0===e||null===(d=e.DependancyTasks)||void 0===d?void 0:d.length)>0&&(0,L.jsxs)("p",{className:"mb-1 text-primary",children:["Dependency Tasks (",null===e||void 0===e||null===(t=e.DependancyTasks)||void 0===t?void 0:t.length,")"]}),(0,L.jsx)("div",{className:"d-flex overflow-auto",children:null===e||void 0===e||null===(n=e.DependancyTasks)||void 0===n?void 0:n.map((e,s)=>(0,L.jsxs)("span",{className:"rounded-4 mt-2 me-2 px-3 py-1 fa-13 fw-bold",style:{backgroundColor:"#E7C8DD"},children:[u(null===a||void 0===a?void 0:a.LevelOneTasks.flatMap(e=>null===e||void 0===e?void 0:e.TaskGroup),e.Task_Depend_Level_Id),null===e||void 0===e?void 0:e.TaskNameGet]},s))})]},s)})})]})},m=e=>{var s;let{gobjlvl3:t}=e;const[r,c]=(0,d.useState)(!1);return(0,L.jsxs)(d.Fragment,{children:[(0,L.jsxs)("h5",{className:"mt-2 mb-3",children:[(0,L.jsx)(n.A,{onClick:()=>c(!r),children:r?(0,L.jsx)(j.A,{sx:{fontSize:"20px",color:"black"}}):(0,L.jsx)(S.A,{sx:{fontSize:"20px",color:"black"}})}),(0,L.jsx)("span",{onClick:()=>c(!r),children:null!==t&&void 0!==t&&t.Task_Type?null===t||void 0===t?void 0:t.Task_Type:"Not Grouped"})]}),(0,L.jsx)(i.A,{in:r,unmountOnExit:!0,children:null===t||void 0===t||null===(s=t.TaskGroup)||void 0===s?void 0:s.map((e,s)=>{var d,t,n;return(0,L.jsxs)("div",{className:"rounded-4 bg-light py-2 px-3 mt-2",children:[(0,L.jsxs)("div",{className:"mb-0 d-flex align-items-center",children:[(0,L.jsxs)("span",{className:"flex-grow-1 fw-bold",children:[s+1+". ",null===e||void 0===e?void 0:e.TaskNameGet]}),(0,L.jsxs)("span",{className:"fa-14 d-flex align-items-center",children:[(0,C.yc)(null===e||void 0===e?void 0:e.Task_Est_Start_Date),(0,L.jsx)("span",{className:"rounded-5 ms-2 ".concat(pe(null===e||void 0===e?void 0:e.Task_Sch_Status)),style:{padding:"5.2px"}}),(0,L.jsx)("span",{children:(0,L.jsxs)(D.A,{children:[(0,L.jsx)(D.A.Toggle,{variant:"success",id:"actions",className:"rounded-5 bg-transparent text-dark border-0 btn"}),(0,L.jsxs)(D.A.Menu,{children:[1===Number(null===G||void 0===G?void 0:G.edit)&&(0,L.jsxs)(o.A,{onClick:()=>{var s;he(!1,{Sch_Project_Id:null===O||void 0===O?void 0:O.Project_Id,Sch_Id:null===a||void 0===a?void 0:a.Sch_Id,Task_Levl_Id:null===e||void 0===e?void 0:e.Task_Levl_Id,Task_Id:null===e||void 0===e?void 0:e.Task_Id,Type_Task_Id:null===e||void 0===e?void 0:e.Type_Task_Id,Task_Sch_Duaration:null===e||void 0===e?void 0:e.Task_Sch_Duaration,Task_Start_Time:null===e||void 0===e?void 0:e.Task_Start_Time,Task_End_Time:null===e||void 0===e?void 0:e.Task_End_Time,Task_Est_Start_Date:(0,C.ny)(null===e||void 0===e?void 0:e.Task_Est_Start_Date),Task_Est_End_Date:(0,C.ny)(null===e||void 0===e?void 0:e.Task_Est_End_Date),Task_Sch_Status:null===e||void 0===e?void 0:e.Task_Sch_Status,Levl_Id:3,Task_Depend_Level_Id:"",TasksGet:null===e||void 0===e?void 0:e.TaskNameGet}),se([...null===e||void 0===e||null===(s=e.DependancyTasks)||void 0===s?void 0:s.map(e=>({Task_Levl_Id:null===e||void 0===e?void 0:e.Task_Depend_Level_Id,TaskNameGet:null===e||void 0===e?void 0:e.TaskNameGet}))]),$(null===a||void 0===a?void 0:a.LevelTwoTasks.flatMap(e=>null===e||void 0===e?void 0:e.TaskGroup))},children:[(0,L.jsx)(k.A,{className:"fa-in me-2 text-primary"}),"Edit"]}),1===Number(null===G||void 0===G?void 0:G.delete)&&(0,L.jsxs)(o.A,{onClick:()=>{me((0,l.A)((0,l.A)({},de),{},{Task_Levl_Id:null===e||void 0===e?void 0:e.Task_Levl_Id}))},children:[(0,L.jsx)(T.A,{className:"fa-in me-2 text-danger "}),"Delete"]}),(0,L.jsxs)(o.A,{onClick:()=>{var s;return R("taskActivity",{state:{taskDetails:(0,l.A)((0,l.A)({},e),{},{Project_Id:null===O||void 0===O?void 0:O.Project_Id,Sch_Id:null===a||void 0===a?void 0:a.Sch_Id}),rights:null===(s=I.state)||void 0===s?void 0:s.rights,retObj:I.state}})},children:[(0,L.jsx)(b.A,{className:"fa-in me-2 text-primary "}),"Open Task"]})]})]})})]})]}),(0,L.jsx)("hr",{className:"mt-0 mb-2"}),(null===e||void 0===e||null===(d=e.DependancyTasks)||void 0===d?void 0:d.length)>0&&(0,L.jsxs)("p",{className:"mb-1 text-primary",children:["Dependency Tasks (",null===e||void 0===e||null===(t=e.DependancyTasks)||void 0===t?void 0:t.length,")"]}),(0,L.jsx)("div",{className:"d-flex overflow-auto",children:null===e||void 0===e||null===(n=e.DependancyTasks)||void 0===n?void 0:n.map((e,s)=>(0,L.jsxs)("span",{className:"rounded-4 mt-2 me-2 px-3 py-1 fa-13 fw-bold",style:{backgroundColor:"#E2E4F6"},children:[u(null===a||void 0===a?void 0:a.LevelTwoTasks.flatMap(e=>null===e||void 0===e?void 0:e.TaskGroup),e.Task_Depend_Level_Id),null===e||void 0===e?void 0:e.TaskNameGet]},s))})]},s)})})]})};return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)("div",{className:"cus-card p-2",children:[(0,L.jsxs)("h5",{className:"mb-0 d-flex px-3 py-2 align-items-center",children:[(0,L.jsxs)("span",{className:"flex-grow-1",children:["Schedule: ",t+" ",(0,L.jsx)("br",{}),(0,L.jsxs)("span",{className:"fa-12",children:["By: ",null===a||void 0===a?void 0:a.SchByGet]})]}),(0,L.jsxs)("span",{className:" d-flex fa-14",children:[(0,L.jsxs)("span",{children:[(null===a||void 0===a?void 0:a.SchTypGet)+" ("+(null===a||void 0===a?void 0:a.SchDays)+") ",(0,L.jsx)("br",{}),(0,L.jsxs)("span",{className:"fa-12",children:["(",(0,C.yc)(null===a||void 0===a?void 0:a.Sch_Est_Start_Date)," - ",(0,C.yc)(null===a||void 0===a?void 0:a.Sch_Est_End_Date),")"]})]}),(0,L.jsxs)(D.A,{children:[(0,L.jsx)(D.A.Toggle,{variant:"success",id:"actions",className:"rounded-5 bg-transparent text-dark border-0 btn"}),(0,L.jsxs)(D.A.Menu,{children:[1===Number(null===G||void 0===G?void 0:G.edit)&&(0,L.jsxs)(o.A,{onClick:()=>{ue({Sch_Id:null===a||void 0===a?void 0:a.Sch_Id,Sch_Date:(0,C.ny)(null===a||void 0===a?void 0:a.Sch_Date),Project_Id:null===O||void 0===O?void 0:O.Project_Id,Sch_By:null===a||void 0===a?void 0:a.Sch_By,Sch_Type_Id:null===a||void 0===a?void 0:a.Sch_Type_Id,Sch_Est_Start_Date:(0,C.ny)(null===a||void 0===a?void 0:a.Sch_Est_Start_Date),Sch_Est_End_Date:(0,C.ny)(null===a||void 0===a?void 0:a.Sch_Est_End_Date),Sch_Status:null===a||void 0===a?void 0:a.Sch_Status,Entry_By:null===a||void 0===a?void 0:a.Entry_By,Entry_Date:(0,C.ny)(null===a||void 0===a?void 0:a.Entry_Date)})},children:[(0,L.jsx)(k.A,{className:"fa-in me-2 text-primary"}),"Edit"]}),1===Number(null===G||void 0===G?void 0:G.delete)&&(0,L.jsxs)(o.A,{onClick:()=>_e((0,l.A)((0,l.A)({},de),{},{Sch_Id:null===a||void 0===a?void 0:a.Sch_Id})),children:[(0,L.jsx)(T.A,{className:"fa-in me-2 text-danger "}),"Delete"]})]})]})]})]}),(0,L.jsx)("hr",{className:"mt-0"}),(0,L.jsxs)("div",{className:"d-flex flex-nowrap overflow-scroll",style:{paddingBottom:"4.6em"},children:[(0,L.jsx)("div",{className:"res-width px-3 py-2",children:(0,L.jsxs)("div",{className:"rounded-4 p-3",style:{backgroundColor:"#E7C8DD"},ref:r,children:[(0,L.jsxs)("div",{className:"d-flex align-items-center",children:[(0,L.jsx)("span",{className:"flex-grow-1 ps-2 fw-bold",children:"Level 1"}),1===Number(null===G||void 0===G?void 0:G.add)&&(0,L.jsx)("button",{className:"btn btn-primary rounded-5 px-3 fa-13 shadow d-flex align-items-center",onClick:()=>{he(!1),te((0,l.A)((0,l.A)({},de),{},{Sch_Id:null===a||void 0===a?void 0:a.Sch_Id,Levl_Id:1})),$([])},children:"Assign Task"})]}),null===a||void 0===a||null===(s=a.LevelOneTasks)||void 0===s?void 0:s.map((e,s)=>{var a;return(null===e||void 0===e||null===(a=e.TaskGroup)||void 0===a?void 0:a.length)>0&&(0,L.jsx)(h,{gobj:e},s)})]})}),(0,L.jsx)("div",{className:"res-width px-3 py-2",children:(0,L.jsxs)("div",{className:"rounded-4 p-3",style:{backgroundColor:"#E2E4F6",minHeight:c,overflow:"auto"},children:[(0,L.jsxs)("div",{className:"d-flex align-items-center",children:[(0,L.jsx)("span",{className:"flex-grow-1 ps-2 fw-bold ",children:"Level 2"}),1===Number(null===G||void 0===G?void 0:G.add)&&(0,L.jsx)("button",{className:"btn btn-primary rounded-5 px-3 fa-13 shadow d-flex align-items-center",disabled:0===(null===a||void 0===a?void 0:a.LevelOneTasks.flatMap(e=>null===e||void 0===e?void 0:e.TaskGroup).length),onClick:()=>{he(!1),te((0,l.A)((0,l.A)({},de),{},{Sch_Id:null===a||void 0===a?void 0:a.Sch_Id,Levl_Id:2})),$(null===a||void 0===a?void 0:a.LevelOneTasks.flatMap(e=>null===e||void 0===e?void 0:e.TaskGroup))},children:"Assign Task"})]}),null===a||void 0===a?void 0:a.LevelTwoTasks.map((e,s)=>{var a;return(null===e||void 0===e||null===(a=e.TaskGroup)||void 0===a?void 0:a.length)>0&&(0,L.jsx)(_,{gobjlvl2:e},s)})]})}),(0,L.jsx)("div",{className:"res-width px-3 py-2",children:(0,L.jsxs)("div",{className:"rounded-4 p-3",style:{backgroundColor:"#B4D2E7",minHeight:c,overflow:"auto"},children:[(0,L.jsxs)("div",{className:"d-flex align-items-center",children:[(0,L.jsx)("span",{className:"flex-grow-1 ps-2 fw-bold ",children:"Level 3"}),1===Number(null===G||void 0===G?void 0:G.add)&&(0,L.jsx)("button",{className:"btn btn-primary rounded-5 px-3 fa-13 shadow d-flex align-items-center",disabled:0===(null===a||void 0===a?void 0:a.LevelTwoTasks.flatMap(e=>null===e||void 0===e?void 0:e.TaskGroup).length),onClick:()=>{he(!1),te((0,l.A)((0,l.A)({},de),{},{Sch_Id:null===a||void 0===a?void 0:a.Sch_Id,Levl_Id:3})),$(null===a||void 0===a?void 0:a.LevelTwoTasks.flatMap(e=>null===e||void 0===e?void 0:e.TaskGroup))},children:"Assign Task"})]}),a.LevelThreeTasks.map((e,s)=>{var a;return(null===e||void 0===e||null===(a=e.TaskGroup)||void 0===a?void 0:a.length)>0&&(0,L.jsx)(m,{gobjlvl3:e},s)})]})})]})]})})};return 1===Number(null===G||void 0===G?void 0:G.read)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:"cus-card p-3",children:[(0,L.jsxs)("div",{className:"d-flex align-items-center",children:[(0,L.jsx)("h5",{className:" flex-grow-1 mb-0 text-muted fa-16 ps-2",children:"Create New Schedule"}),1===Number(null===G||void 0===G?void 0:G.add)&&(0,L.jsxs)("button",{className:"btn btn-primary rounded-5 px-3 fa-13 shadow d-flex align-items-center me-2",onClick:()=>ue(),children:[(0,L.jsx)(x.A,{className:"fa-in me-2"})," Add"]}),(0,L.jsxs)("button",{className:"btn btn-secondary rounded-5 px-3 fa-13 shadow d-flex align-items-center",onClick:()=>R("/taskManagement/projectActivity"),children:[(0,L.jsx)(A.A,{className:"fa-in me-2"})," Back"]})]}),(0,L.jsxs)("h6",{className:"my-2 d-flex align-items-center",children:[(0,L.jsx)("span",{className:"rounded-5 mx-2 ".concat(pe(1)),style:{padding:"5.2px"}}),"New",(0,L.jsx)("span",{className:"rounded-5 mx-2 ".concat(pe(2)),style:{padding:"5.2px"}}),"Progress",(0,L.jsx)("span",{className:"rounded-5 mx-2 ".concat(pe(3)),style:{padding:"5.2px"}}),"Completed",(0,L.jsx)("span",{className:"rounded-5 mx-2 ".concat(pe(4)),style:{padding:"5.2px"}}),"Canceled"]})]}),V.map((e,s)=>(0,L.jsx)(xe,{obj:e,SNo:s+1},s)),(0,L.jsxs)(r.A,{open:ce.scheduleCreate,onClose:()=>ue(),maxWidth:"sm",fullWidth:!0,children:[(0,L.jsx)(c.A,{className:"fa-18",children:ne?"Change Schedule":"Create Schedule"}),(0,L.jsx)(v.A,{children:(0,L.jsx)("table",{className:"table",children:(0,L.jsxs)("tbody",{children:[(0===Number(null===y||void 0===y?void 0:y.UserTypeId)||1===Number(null===y||void 0===y?void 0:y.UserTypeId))&&(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"Scheduled By"}),(0,L.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,L.jsx)("select",{className:"cus-inpt",value:ae.Sch_By,onChange:e=>le((0,l.A)((0,l.A)({},ae),{},{Sch_By:e.target.value})),children:B.map((e,s)=>(0,L.jsx)("option",{value:null===e||void 0===e?void 0:e.UserId,children:null===e||void 0===e?void 0:e.Name},s))})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:" Date"}),(0,L.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,L.jsx)("input",{type:"date",className:"cus-inpt",value:ae.Sch_Date,onChange:e=>le((0,l.A)((0,l.A)({},ae),{},{Sch_Date:e.target.value}))})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"Type"}),(0,L.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,L.jsx)("select",{className:"cus-inpt",value:ae.Sch_Type_Id,onChange:e=>le((0,l.A)((0,l.A)({},ae),{},{Sch_Type_Id:e.target.value})),children:U.map((e,s)=>(0,L.jsx)("option",{value:null===e||void 0===e?void 0:e.Sch_Type_Id,children:(null===e||void 0===e?void 0:e.Sch_Type)+" ("+(null===e||void 0===e?void 0:e.Sch_Days)+" Day)"},s))})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"Status"}),(0,L.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,L.jsx)("select",{className:"cus-inpt",value:ae.Sch_Status,onChange:e=>le((0,l.A)((0,l.A)({},ae),{},{Sch_Status:e.target.value})),children:q.map((e,s)=>(0,L.jsx)("option",{value:null===e||void 0===e?void 0:e.Status_Id,children:null===e||void 0===e?void 0:e.Status},s))})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"Start Date"}),(0,L.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,L.jsx)("input",{type:"date",className:"cus-inpt",value:ae.Sch_Est_Start_Date,onChange:e=>le((0,l.A)((0,l.A)({},ae),{},{Sch_Est_Start_Date:e.target.value}))})})]})]})})}),(0,L.jsxs)(u.A,{children:[(0,L.jsx)(h.A,{onClick:()=>ue(),children:"cancel"}),(0,L.jsx)(h.A,{onClick:()=>{(0,E.z)({address:"taskManagement/project/schedule",method:ne?"PUT":"POST",headers:{"Content-Type":"application/json"},bodyData:ae}).then(e=>{e.success?(g.oR.success(e.message),re(!oe)):g.oR.error(e.message)}).catch(e=>console.error).finally(()=>ue())},children:ne?"Update":"Create"})]})]}),(0,L.jsxs)(r.A,{open:null===ce||void 0===ce?void 0:ce.taskSchedule,onClose:()=>he(!0),maxWidth:"sm",fullWidth:!0,children:[(0,L.jsx)(c.A,{children:ne?"Manage Task":"Assign Task"}),(0,L.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{if(de.Task_Id){if(1!==Number(null===de||void 0===de?void 0:de.Levl_Id)&&""===de.Task_Depend_Level_Id)return g.oR.warn("Select Dependency Tasks");(0,E.z)({address:"taskManagement/project/schedule/scheduleTask",method:ne?"PUT":"POST",headers:{"Content-Type":"application/json"},bodyData:de}).then(e=>{e.success?(g.oR.success(e.message),he(!0),re(!oe)):g.oR.error(e.message)}).catch(e=>console.error(e))}else g.oR.warn("Select Task")})()},children:[(0,L.jsxs)(v.A,{children:[(0,L.jsx)("table",{className:"table",children:(0,L.jsxs)("tbody",{children:[(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"Task"}),(0,L.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,L.jsx)(N.Ay,{value:{value:null===de||void 0===de?void 0:de.Task_Id,label:null===de||void 0===de?void 0:de.TasksGet},onChange:e=>te((0,l.A)((0,l.A)({},de),{},{Task_Id:e.value,TasksGet:e.label})),options:[...Z.map(e=>({value:e.Task_Id,label:e.Task_Name}))],styles:f.MR,isSearchable:!0,required:!0,placeholder:"Select Task"})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"Task Type"}),(0,L.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,L.jsx)("select",{className:"cus-inpt",value:null===de||void 0===de?void 0:de.Type_Task_Id,required:!0,onChange:e=>te((0,l.A)((0,l.A)({},de),{},{Type_Task_Id:e.target.value})),children:Q.map((e,s)=>(0,L.jsx)("option",{value:null===e||void 0===e?void 0:e.Task_Type_Id,children:null===e||void 0===e?void 0:e.Task_Type},s))})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"Start Date"}),(0,L.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,L.jsx)("input",{type:"date",className:"cus-inpt",required:!0,value:(null===de||void 0===de?void 0:de.Task_Est_Start_Date)&&new Date(null===de||void 0===de?void 0:de.Task_Est_Start_Date).toISOString().split("T")[0],onChange:e=>te((0,l.A)((0,l.A)({},de),{},{Task_Est_Start_Date:e.target.value}))})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"End Date"}),(0,L.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,L.jsx)("input",{type:"date",className:"cus-inpt",required:!0,min:null===de||void 0===de?void 0:de.Task_Est_Start_Date,value:(null===de||void 0===de?void 0:de.Task_Est_End_Date)&&new Date(null===de||void 0===de?void 0:de.Task_Est_End_Date).toISOString().split("T")[0],onChange:e=>te((0,l.A)((0,l.A)({},de),{},{Task_Est_End_Date:e.target.value}))})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"Start Time"}),(0,L.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,L.jsx)("input",{type:"time",className:"cus-inpt",value:null===de||void 0===de?void 0:de.Task_Start_Time,required:!0,onChange:e=>te((0,l.A)((0,l.A)({},de),{},{Task_Start_Time:e.target.value}))})})]}),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"End Time"}),(0,L.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,L.jsx)("input",{type:"time",className:"cus-inpt",required:!0,min:null===de||void 0===de?void 0:de.Task_Start_Time,value:null===de||void 0===de?void 0:de.Task_End_Time,onChange:e=>te((0,l.A)((0,l.A)({},de),{},{Task_End_Time:e.target.value}))})})]}),ne&&(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"border-bottom-0 fa-15",style:{verticalAlign:"middle"},children:"Status"}),(0,L.jsx)("td",{className:"border-bottom-0 fa-15",children:(0,L.jsx)("select",{className:"cus-inpt",value:de.Task_Sch_Status,required:!0,onChange:e=>te((0,l.A)((0,l.A)({},de),{},{Task_Sch_Status:e.target.value})),children:q.map((e,s)=>(0,L.jsx)("option",{value:null===e||void 0===e?void 0:e.Status_Id,children:null===e||void 0===e?void 0:e.Status},s))})})]})]})}),1!==Number(null===de||void 0===de?void 0:de.Levl_Id)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("label",{className:"mb-2",children:"Select Dependency Tasks"}),(0,L.jsx)(_.A,{multiple:!0,id:"checkboxes-tags-demo",options:Y,disableCloseOnSelect:!0,getOptionLabel:e=>null===e||void 0===e?void 0:e.TaskNameGet,value:ee,onChange:(e,s)=>se(s),renderOption:(e,s,a)=>{let{selected:d}=a;return(0,L.jsxs)("li",(0,l.A)((0,l.A)({},e),{},{children:[(0,L.jsx)(m.A,{icon:w,checkedIcon:M,style:{marginRight:8},checked:d}),null===s||void 0===s?void 0:s.TaskNameGet]}))},style:{width:"100%"},isOptionEqualToValue:(e,s)=>Number(null===e||void 0===e?void 0:e.Task_Levl_Id)===Number(null===s||void 0===s?void 0:s.Task_Levl_Id),renderInput:e=>(0,L.jsx)(p.A,(0,l.A)((0,l.A)({},e),{},{label:"Tasks",placeholder:"Select Dependency Tasks"}))})]})]}),(0,L.jsxs)(u.A,{children:[(0,L.jsx)(h.A,{type:"button",onClick:()=>he(!0),children:"close"}),(0,L.jsx)(h.A,{type:"submit",children:ne?"Update":"Assign Task"})]})]})]}),(0,L.jsxs)(r.A,{open:null===ce||void 0===ce?void 0:ce.scheduleDelete,onClose:()=>_e(),children:[(0,L.jsx)(c.A,{children:"Confirmation"}),(0,L.jsx)(v.A,{children:"Do you want to delete the Schedule?"}),(0,L.jsxs)(u.A,{children:[(0,L.jsx)(h.A,{onClick:()=>_e(),children:"cancel"}),(0,L.jsx)(h.A,{onClick:()=>{(0,E.z)({address:"taskManagement/project/schedule",method:"DELETE",headers:{"Content-Type":"application/json"},bodyData:ae}).then(e=>{e.success?(g.oR.success(e.message),re(!oe)):g.oR.error(e.message)}).catch(e=>console.error).finally(()=>_e())},children:"Delete"})]})]}),(0,L.jsxs)(r.A,{open:null===ce||void 0===ce?void 0:ce.taskDelete,onClose:()=>me(),children:[(0,L.jsx)(c.A,{children:"Confirmation"}),(0,L.jsx)(v.A,{children:"Do you want to delete the Task?"}),(0,L.jsxs)(u.A,{children:[(0,L.jsx)(h.A,{onClick:()=>me(),children:"cancel"}),(0,L.jsx)(h.A,{onClick:()=>{(0,E.z)({address:"taskManagement/project/schedule/scheduleTask",method:"DELETE",headers:{"Content-Type":"application/json"},bodyData:de}).then(e=>{e.success?(g.oR.success(e.message),re(!oe)):g.oR.error(e.message)}).catch(e=>console.error(e)).finally(()=>me())},children:"Delete"})]})]})]})}},52101:(e,s,a)=>{a.d(s,{A:()=>t});var l=a(59662),d=a(70579);const t=(0,l.A)((0,d.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess")},58293:(e,s,a)=>{a.d(s,{A:()=>t});var l=a(59662),d=a(70579);const t=(0,l.A)((0,d.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},63406:(e,s,a)=>{a.d(s,{zU:()=>i,ex:()=>o,MR:()=>n,Ap:()=>t,FX:()=>r});var l=a(89379);const d=a.p+"static/media/smt.aa4d4f940bbebff07a57.png",t={table:{style:{width:"auto",backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"}},headCells:{style:{backgroundColor:"#6b9080f8",color:"white",fontSize:"14px"}}},n={menu:(e,s)=>(0,l.A)((0,l.A)({},e),{},{zIndex:9999}),menuPortal:e=>(0,l.A)((0,l.A)({},e),{},{zIndex:9999}),groupHeading:e=>(0,l.A)((0,l.A)({},e),{},{backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold",fontSize:"14px",padding:"8px 12px",borderBottom:"1px solid #ddd",textTransform:"uppercase"}),option:(e,s)=>(0,l.A)((0,l.A)({},e),{},{backgroundColor:s.isSelected?"#2684FF":s.isFocused?"#E2ECF9":"white",color:s.isSelected?"white":"#333",padding:"10px 12px"})},i=[{id:1,headname:"Menu ID",variant:"head",align:"left",width:100},{id:2,headname:"MenuName"},{id:3,headname:"Read Rights"},{id:4,headname:"Add Rights"},{id:5,headname:"Edit Rights"},{id:6,headname:"Delete Rights"},{id:7,headname:"Print Rights"},{id:8,headname:"Action"}],o=[{dataBase:1,name:"SHANKAR TRADERS",business:"Wholesale Merchant in Dhall",address:"32, Chitrakara Street, Madurai - 01 <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:d,gstin:"33AADFS6973R1ZD",phone:"984-313-1353, 984-335-5166",fssai:"12418012000818",bankAccount:"0021 5032 0885 122",ifsc:"TMBL0000002"},{dataBase:2,name:"SMT AGRO PRODUCTS",business:"",address:"H.O: 153, Chitrakara Street, 2nd Floor, Madurai -01 <br /> G.O: 746 Puliyur, Sayanapuram, Svga <br /> Bill of Supply -Disclaimer Affidavlt Field Extemped",logo:d,gstin:"33ACMFS3420Q1ZQ",phone:"0452-4371625",fssai:"12418012000818",bankAccount:"0025 3031 0875 947",ifsc:"TMBL0000002"},{dataBase:3,name:"BHAVANI TRADERS",business:"",address:"H.O: 152-A, Chitrakara Street, Madurai -01 <br /> G.O: 30/1-Rajman Nagar, Chintamani Main Road, Mdu-01 <br /> Tax Invoice",logo:d,gstin:"33AAEFB6728J1ZG",phone:"958-559-7641, 958-559-7614",fssai:"12418012000670",bankAccount:"0021 5005 0800 309",ifsc:"TMBL0000002"}],r=[{name:"PURCHASE_ORDER"},{name:"PURCHASE_INVOICE"},{name:"SALE_ORDER"},{name:"SALE_INVOICE"},{name:"JOURNAL"},{name:"STOCK_JOURNAL"},{name:"PAYMENT"},{name:"RECEIPT"},{name:"CONTRA"}]},65829:(e,s,a)=>{a.d(s,{A:()=>t});var l=a(59662),d=a(70579);const t=(0,l.A)((0,d.jsx)("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6z"}),"KeyboardArrowLeft")},70141:(e,s,a)=>{a.d(s,{A:()=>t});var l=a(59662),d=a(70579);const t=(0,l.A)((0,d.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")}}]);
//# sourceMappingURL=3036.8b1dff31.chunk.js.map