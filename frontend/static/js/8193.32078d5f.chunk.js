"use strict";(self.webpackChunkerp=self.webpackChunkerp||[]).push([[2110,8193,9729],{12110:(e,t,a)=>{a.d(t,{A:()=>p});var l=a(58168),n=a(98587),s=a(65043),d=a(58387),o=a(68606),r=a(34535),i=a(6431),c=a(63336),u=a(57056),v=a(32400);function h(e){return(0,v.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var m=a(70579);const f=["className","raised"],x=(0,r.Ay)(c.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),p=s.forwardRef(function(e,t){const a=(0,i.b)({props:e,name:"MuiCard"}),{className:s,raised:r=!1}=a,c=(0,n.A)(a,f),u=(0,l.A)({},a,{raised:r}),v=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},h,t)})(u);return(0,m.jsx)(x,(0,l.A)({className:(0,d.A)(v.root,s),elevation:r?8:void 0,ref:t,ownerState:u},c))})},26494:(e,t,a)=>{a.d(t,{A:()=>x});var l=a(58168),n=a(98587),s=a(65043),d=a(58387),o=a(68606),r=a(34535),i=a(6431),c=a(57056),u=a(32400);function v(e){return(0,u.Ay)("MuiCardContent",e)}(0,c.A)("MuiCardContent",["root"]);var h=a(70579);const m=["className","component"],f=(0,r.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),x=s.forwardRef(function(e,t){const a=(0,i.b)({props:e,name:"MuiCardContent"}),{className:s,component:r="div"}=a,c=(0,n.A)(a,m),u=(0,l.A)({},a,{component:r}),x=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},v,t)})(u);return(0,h.jsx)(f,(0,l.A)({as:r,className:(0,d.A)(x.root,s),ownerState:u,ref:t},c))})},38193:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var l=a(89379),n=a(65043),s=a(97707),d=a(91036),o=a(12110),r=a(11906),i=a(26494),c=a(83462),u=a(26600),v=a(35316),h=a(29347),m=a(45777),f=a(65074),x=a(70579);const p=()=>{var e,t,a,p;const A=JSON.parse(localStorage.getItem("user")),j={Id:"",EntryDate:(0,s.ny)(),LocationDetails:"MILL",WorkDetails:"",StaffType:"",StaffCount:"",EntryBy:null===A||void 0===A?void 0:A.UserId},[N,y]=(0,n.useState)([]),[b,g]=(0,n.useState)([]),[S,C]=(0,n.useState)([]),[D,T]=(0,n.useState)(!1),[L,k]=(0,n.useState)(j),{contextObj:I}=(0,n.useContext)(m.i),[w,M]=(0,n.useState)({Fromdate:(0,s.Gz)(),Todate:(0,s.ny)(),reqLocation:"MILL",dialog:!1});(0,n.useEffect)(()=>{y([]),C([]),g([]),(0,f.z)({address:"dataEntry/dataEntryAttendance?Fromdate=".concat(w.Fromdate,"&Todate=").concat(w.Todate,"&reqLocation=").concat(w.reqLocation)}).then(e=>{var t,a,l,n;null!==e&&void 0!==e&&e.success&&(y(null===e||void 0===e?void 0:e.data),C(null!==(t=null===e||void 0===e||null===(a=e.others)||void 0===a?void 0:a.StaffType)&&void 0!==t?t:[]),g(null!==(l=null===e||void 0===e||null===(n=e.others)||void 0===n?void 0:n.WorkDetails)&&void 0!==l?l:[]))}).catch(e=>console.error(e))},[w.Fromdate,w.Todate,w.reqLocation,D]);const E=()=>{M(e=>(0,l.A)((0,l.A)({},e),{},{dialog:!1})),k(j)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(o.A,{children:[(0,x.jsxs)("div",{className:"fa-16 fw-bold border-bottom d-flex justify-content-between align-items-center",children:[(0,x.jsx)("span",{className:"p-3",children:"Staff Attendance"}),(0,s.id)(null===I||void 0===I?void 0:I.Add_Rights,1)&&(0,x.jsx)(r.A,{variant:"outlined",onClick:()=>M(e=>(0,l.A)((0,l.A)({},e),{},{dialog:!0})),className:"me-2",children:"Add Attendance"})]}),(0,x.jsxs)("div",{className:"d-flex flex-wrap p-2 px-3",children:[(0,x.jsxs)("div",{className:"d-flex flex-column p-1",children:[(0,x.jsx)("label",{className:"mb-1",children:"From"}),(0,x.jsx)("input",{type:"date",className:"cus-inpt w-auto",value:w.Fromdate,onChange:e=>M(t=>(0,l.A)((0,l.A)({},t),{},{Fromdate:e.target.value}))})]}),(0,x.jsxs)("div",{className:"d-flex flex-column p-1",children:[(0,x.jsx)("label",{className:"mb-1",children:"To"}),(0,x.jsx)("input",{type:"date",className:"cus-inpt w-auto",value:w.Todate,onChange:e=>M(t=>(0,l.A)((0,l.A)({},t),{},{Todate:e.target.value}))})]}),(0,x.jsxs)("div",{className:"d-flex flex-column p-1",children:[(0,x.jsx)("label",{className:"mb-1",children:"LOCATION"}),(0,x.jsxs)("select",{className:"cus-inpt w-auto",value:w.reqLocation,onChange:e=>M(t=>(0,l.A)((0,l.A)({},t),{},{reqLocation:e.target.value})),children:[(0,x.jsx)("option",{value:"MILL",children:"MILL"}),(0,x.jsx)("option",{value:"GODOWN",children:"GODOWN"})]})]})]}),(0,x.jsx)(i.A,{children:(null===N||void 0===N?void 0:N.length)>0&&(0,x.jsx)("div",{className:"table-responsive",style:{maxHeight:"65dvh",overflow:"auto"},children:(0,x.jsxs)("table",{className:"table",children:[(0,x.jsxs)("thead",{children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"fa-14 border text-center"}),null===(e=N[0])||void 0===e||null===(t=e.Categories)||void 0===t?void 0:t.map((e,t)=>{var a;return(0,x.jsx)("th",{className:"fa-14 border text-center",colSpan:null===e||void 0===e||null===(a=e.StaffTypes)||void 0===a?void 0:a.length,children:null===e||void 0===e?void 0:e.WorkDetails},t)}),(0,x.jsx)("th",{className:"fa-14 border text-center"})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"fa-14 border text-center tble-hed-stick",children:"DATE"}),null===(a=N[0])||void 0===a||null===(p=a.Categories)||void 0===p?void 0:p.map(e=>{var t;return null===e||void 0===e||null===(t=e.StaffTypes)||void 0===t?void 0:t.map((e,t)=>(0,x.jsx)("th",{className:"fa-14 border text-center",children:null===e||void 0===e?void 0:e.StaffType},t))}),(0,x.jsx)("th",{className:"fa-14 border text-center",children:"TOTAL"})]})]}),(0,x.jsx)("tbody",{children:null===N||void 0===N?void 0:N.map((e,t)=>{var a,n;return(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"fa-13 border text-center",children:(0,s.yc)(null===e||void 0===e?void 0:e.EntryDate)}),null===e||void 0===e||null===(a=e.Categories)||void 0===a?void 0:a.map(e=>{var t;return null===e||void 0===e||null===(t=e.StaffTypes)||void 0===t?void 0:t.map((e,t)=>{var a,n,d;return(0,x.jsx)("td",{className:"fa-13 border text-center p-0",onClick:null!==e&&void 0!==e&&null!==(a=e.StaffAttendance)&&void 0!==a&&a.Id?()=>{var t,a;k((0,l.A)((0,l.A)({},null===e||void 0===e?void 0:e.StaffAttendance),{},{EntryDate:null!==e&&void 0!==e&&null!==(t=e.StaffAttendance)&&void 0!==t&&t.EntryDate?(0,s.ny)(null===e||void 0===e||null===(a=e.StaffAttendance)||void 0===a?void 0:a.EntryDate):""})),M(e=>(0,l.A)((0,l.A)({},e),{},{dialog:!0}))}:void 0,children:(0,x.jsx)("div",{className:"".concat(null!==e&&void 0!==e&&null!==(n=e.StaffAttendance)&&void 0!==n&&n.Id?"cellHover p-2":""),children:null===e||void 0===e||null===(d=e.StaffAttendance)||void 0===d?void 0:d.StaffCount})},t)})}),(0,x.jsx)("td",{className:"fa-13 border text-center blue-text",children:null===e||void 0===e||null===(n=e.Categories)||void 0===n?void 0:n.reduce((e,t)=>{var a;return e+(Number(null===t||void 0===t||null===(a=t.StaffTypes)||void 0===a?void 0:a.reduce((e,t)=>{var a;return e+(Number(null===t||void 0===t||null===(a=t.StaffAttendance)||void 0===a?void 0:a.StaffCount)||0)},0))||0)},0)})]},t)})})]})})})]}),(0,x.jsxs)(c.A,{open:w.dialog,onClose:E,fullWidth:!0,maxWidth:"sm",children:[(0,x.jsx)(u.A,{className:" bg-light",children:null!==L&&void 0!==L&&L.Id?"Modify Attendance":"Add Attendance"}),(0,x.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(0,f.z)({address:"dataEntry/dataEntryAttendance",method:L.Id?"PUT":"POST",bodyData:L}).then(e=>{e.success?(d.oR.success(e.message),E(),T(!D)):d.oR.error(e.message)}).catch(e=>console.error(e))},children:[(0,x.jsx)(v.A,{children:(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsx)("table",{className:"table",children:(0,x.jsxs)("tbody",{children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border-0",style:{verticalAlign:"middle"},children:"Location"}),(0,x.jsx)("td",{className:"border-0",children:(0,x.jsxs)("select",{value:null===L||void 0===L?void 0:L.LocationDetails,onChange:e=>k(t=>(0,l.A)((0,l.A)({},t),{},{LocationDetails:e.target.value})),className:"cus-inpt",children:[(0,x.jsx)("option",{value:"MILL",children:"MILL"}),(0,x.jsx)("option",{value:"GODOWN",children:"GODOWN"})]})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border-0",style:{verticalAlign:"middle"},children:"Date"}),(0,x.jsx)("td",{className:"border-0",children:(0,x.jsx)("input",{type:"date",value:null===L||void 0===L?void 0:L.EntryDate,required:!0,className:"cus-inpt",onChange:e=>k(t=>(0,l.A)((0,l.A)({},t),{},{EntryDate:e.target.value}))})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border-0",style:{verticalAlign:"middle"},children:"Work Type"}),(0,x.jsx)("td",{className:"border-0",children:(0,x.jsx)("input",{value:null===L||void 0===L?void 0:L.WorkDetails,type:"search",list:"workDetails",required:!0,className:"cus-inpt",placeholder:"Type or Search Work Details",onChange:e=>k(t=>(0,l.A)((0,l.A)({},t),{},{WorkDetails:e.target.value}))})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border-0",style:{verticalAlign:"middle"},children:"Staff Type"}),(0,x.jsx)("td",{className:"border-0",children:(0,x.jsx)("input",{value:null===L||void 0===L?void 0:L.StaffType,type:"search",list:"staffDetails",required:!0,className:"cus-inpt",placeholder:"Type or Search Staff Type",onChange:e=>k(t=>(0,l.A)((0,l.A)({},t),{},{StaffType:e.target.value}))})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"border-0",style:{verticalAlign:"middle"},children:"Staff's Count"}),(0,x.jsx)("td",{className:"border-0",children:(0,x.jsx)("input",{value:(0,s.Im)(null===L||void 0===L?void 0:L.StaffCount),className:"cus-inpt",onInput:s.BE,required:!0,onChange:e=>k(t=>(0,l.A)((0,l.A)({},t),{},{StaffCount:e.target.value}))})})]})]})})})}),(0,x.jsxs)(h.A,{children:[(0,x.jsx)(r.A,{onClick:E,type:"button",children:"Cancel"}),(0,x.jsx)(r.A,{type:"submit",variant:"contained",children:"SUBMIT"})]})]})]}),(0,x.jsx)("datalist",{id:"staffDetails",children:null===S||void 0===S?void 0:S.map((e,t)=>(0,x.jsx)("option",{value:e.StaffType},t))}),(0,x.jsx)("datalist",{id:"workDetails",children:null===b||void 0===b?void 0:b.map((e,t)=>(0,x.jsx)("option",{value:e.WorkDetails},t))})]})}}}]);
//# sourceMappingURL=8193.32078d5f.chunk.js.map